/**
* plotly.js v2.30.0-75-g96a5e7eb3
* Copyright 2012-2024, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function (g, f) {
    if ("object" == typeof exports && "object" == typeof module) {
      module.exports = f();
    } else if ("function" == typeof define && define.amd) {
      define("Plotly", [], f);
    } else if ("object" == typeof exports) {
      exports["Plotly"] = f();
    } else {
      g["Plotly"] = f();
    }
  }(this, () => {
var exports = {};
var module = { exports };
"use strict";var aq=Object.defineProperty;var FQe=Object.getOwnPropertyDescriptor;var qQe=Object.getOwnPropertyNames;var zQe=Object.prototype.hasOwnProperty;var Bs=(e,t)=>()=>(e&&(t=e(e=0)),t);var ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),OQe=(e,t)=>{for(var r in t)aq(e,r,{get:t[r],enumerable:!0})},BQe=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of qQe(t))!zQe.call(e,n)&&n!==r&&aq(e,n,{get:()=>t[n],enumerable:!(i=FQe(t,n))||i.enumerable});return e};var Wb=e=>BQe(aq({},"__esModule",{value:!0}),e);var _k=ne(OJ=>{"use strict";OJ.version="2.30.0-75-g96a5e7eb3"});var NJ=ne((BJ,bk)=>{(function(t,r,i){r[t]=r[t]||i(),typeof bk!="undefined"&&bk.exports?bk.exports=r[t]:typeof define=="function"&&define.amd&&define(function(){return r[t]})})("Promise",typeof window!="undefined"?window:BJ,function(){"use strict";var t,r,i,n=Object.prototype.toString,a=typeof setImmediate!="undefined"?function(A){return setImmediate(A)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(A,b,w,k){return Object.defineProperty(A,b,{value:w,writable:!0,configurable:k!==!1})}}catch(g){t=function(b,w,k){return b[w]=k,b}}i=function(){var A,b,w;function k(x,E){this.fn=x,this.self=E,this.next=void 0}return{add:function(E,M){w=new k(E,M),b?b.next=w:A=w,b=w,w=void 0},drain:function(){var E=A;for(A=b=r=void 0;E;)E.fn.call(E.self),E=E.next}}}();function o(g,A){i.add(g,A),r||(r=a(i.drain))}function s(g){var A,b=typeof g;return g!=null&&(b=="object"||b=="function")&&(A=g.then),typeof A=="function"?A:!1}function l(){for(var g=0;g<this.chain.length;g++)u(this,this.state===1?this.chain[g].success:this.chain[g].failure,this.chain[g]);this.chain.length=0}function u(g,A,b){var w,k;try{A===!1?b.reject(g.msg):(A===!0?w=g.msg:w=A.call(void 0,g.msg),w===b.promise?b.reject(TypeError("Promise-chain cycle")):(k=s(w))?k.call(w,b.resolve,b.reject):b.resolve(w))}catch(x){b.reject(x)}}function f(g){var A,b=this;if(!b.triggered){b.triggered=!0,b.def&&(b=b.def);try{(A=s(g))?o(function(){var w=new v(b);try{A.call(g,function(){f.apply(w,arguments)},function(){c.apply(w,arguments)})}catch(k){c.call(w,k)}}):(b.msg=g,b.state=1,b.chain.length>0&&o(l,b))}catch(w){c.call(new v(b),w)}}}function c(g){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=g,A.state=2,A.chain.length>0&&o(l,A))}function h(g,A,b,w){for(var k=0;k<A.length;k++)(function(E){g.resolve(A[E]).then(function(d){b(E,d)},w)})(k)}function v(g){this.def=g,this.triggered=!1}function p(g){this.promise=g,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function _(g){if(typeof g!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new p(this);this.then=function(w,k){var x={success:typeof w=="function"?w:!0,failure:typeof k=="function"?k:!1};return x.promise=new this.constructor(function(M,d){if(typeof M!="function"||typeof d!="function")throw TypeError("Not a function");x.resolve=M,x.reject=d}),A.chain.push(x),A.state!==0&&o(l,A),x.promise},this.catch=function(w){return this.then(void 0,w)};try{g.call(void 0,function(w){f.call(A,w)},function(w){c.call(A,w)})}catch(b){c.call(A,b)}}var T=t({},"constructor",_,!1);return _.prototype=T,t(T,"__NPO__",0,!1),t(_,"resolve",function(A){var b=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");k(A)})}),t(_,"reject",function(A){return new this(function(w,k){if(typeof w!="function"||typeof k!="function")throw TypeError("Not a function");k(A)})}),t(_,"all",function(A){var b=this;return n.call(A)!="[object Array]"?b.reject(TypeError("Not an array")):A.length===0?b.resolve([]):new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");var E=A.length,M=Array(E),d=0;h(b,A,function(S,P){M[S]=P,++d===E&&k(M)},x)})}),t(_,"race",function(A){var b=this;return n.call(A)!="[object Array]"?b.reject(TypeError("Not an array")):new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");h(b,A,function(M,d){k(d)},x)})}),_})});var Ai=ne((NQt,wk)=>{(function(){var e={version:"3.8.0"},t=[].slice,r=function(U){return t.call(U)},i=self.document;function n(U){return U&&(U.ownerDocument||U.document||U).documentElement}function a(U){return U&&(U.ownerDocument&&U.ownerDocument.defaultView||U.document&&U||U.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(U){r=function(Q){for(var se=Q.length,me=new Array(se);se--;)me[se]=Q[se];return me}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(U){var o=this.Element.prototype,s=o.setAttribute,l=o.setAttributeNS,u=this.CSSStyleDeclaration.prototype,f=u.setProperty;o.setAttribute=function(Q,se){s.call(this,Q,se+"")},o.setAttributeNS=function(Q,se,me){l.call(this,Q,se,me+"")},u.setProperty=function(Q,se,me){f.call(this,Q,se+"",me)}}e.ascending=c;function c(U,Q){return U<Q?-1:U>Q?1:U>=Q?0:NaN}e.descending=function(U,Q){return Q<U?-1:Q>U?1:Q>=U?0:NaN},e.min=function(U,Q){var se=-1,me=U.length,we,Me;if(arguments.length===1){for(;++se<me;)if((Me=U[se])!=null&&Me>=Me){we=Me;break}for(;++se<me;)(Me=U[se])!=null&&we>Me&&(we=Me)}else{for(;++se<me;)if((Me=Q.call(U,U[se],se))!=null&&Me>=Me){we=Me;break}for(;++se<me;)(Me=Q.call(U,U[se],se))!=null&&we>Me&&(we=Me)}return we},e.max=function(U,Q){var se=-1,me=U.length,we,Me;if(arguments.length===1){for(;++se<me;)if((Me=U[se])!=null&&Me>=Me){we=Me;break}for(;++se<me;)(Me=U[se])!=null&&Me>we&&(we=Me)}else{for(;++se<me;)if((Me=Q.call(U,U[se],se))!=null&&Me>=Me){we=Me;break}for(;++se<me;)(Me=Q.call(U,U[se],se))!=null&&Me>we&&(we=Me)}return we},e.extent=function(U,Q){var se=-1,me=U.length,we,Me,Ye;if(arguments.length===1){for(;++se<me;)if((Me=U[se])!=null&&Me>=Me){we=Ye=Me;break}for(;++se<me;)(Me=U[se])!=null&&(we>Me&&(we=Me),Ye<Me&&(Ye=Me))}else{for(;++se<me;)if((Me=Q.call(U,U[se],se))!=null&&Me>=Me){we=Ye=Me;break}for(;++se<me;)(Me=Q.call(U,U[se],se))!=null&&(we>Me&&(we=Me),Ye<Me&&(Ye=Me))}return[we,Ye]};function h(U){return U===null?NaN:+U}function v(U){return!isNaN(U)}e.sum=function(U,Q){var se=0,me=U.length,we,Me=-1;if(arguments.length===1)for(;++Me<me;)v(we=+U[Me])&&(se+=we);else for(;++Me<me;)v(we=+Q.call(U,U[Me],Me))&&(se+=we);return se},e.mean=function(U,Q){var se=0,me=U.length,we,Me=-1,Ye=me;if(arguments.length===1)for(;++Me<me;)v(we=h(U[Me]))?se+=we:--Ye;else for(;++Me<me;)v(we=h(Q.call(U,U[Me],Me)))?se+=we:--Ye;if(Ye)return se/Ye},e.quantile=function(U,Q){var se=(U.length-1)*Q+1,me=Math.floor(se),we=+U[me-1],Me=se-me;return Me?we+Me*(U[me]-we):we},e.median=function(U,Q){var se=[],me=U.length,we,Me=-1;if(arguments.length===1)for(;++Me<me;)v(we=h(U[Me]))&&se.push(we);else for(;++Me<me;)v(we=h(Q.call(U,U[Me],Me)))&&se.push(we);if(se.length)return e.quantile(se.sort(c),.5)},e.variance=function(U,Q){var se=U.length,me=0,we,Me,Ye=0,Pe=-1,tt=0;if(arguments.length===1)for(;++Pe<se;)v(we=h(U[Pe]))&&(Me=we-me,me+=Me/++tt,Ye+=Me*(we-me));else for(;++Pe<se;)v(we=h(Q.call(U,U[Pe],Pe)))&&(Me=we-me,me+=Me/++tt,Ye+=Me*(we-me));if(tt>1)return Ye/(tt-1)},e.deviation=function(){var U=e.variance.apply(this,arguments);return U&&Math.sqrt(U)};function p(U){return{left:function(Q,se,me,we){for(arguments.length<3&&(me=0),arguments.length<4&&(we=Q.length);me<we;){var Me=me+we>>>1;U(Q[Me],se)<0?me=Me+1:we=Me}return me},right:function(Q,se,me,we){for(arguments.length<3&&(me=0),arguments.length<4&&(we=Q.length);me<we;){var Me=me+we>>>1;U(Q[Me],se)>0?we=Me:me=Me+1}return me}}}var _=p(c);e.bisectLeft=_.left,e.bisect=e.bisectRight=_.right,e.bisector=function(U){return p(U.length===1?function(Q,se){return c(U(Q),se)}:U)},e.shuffle=function(U,Q,se){(me=arguments.length)<3&&(se=U.length,me<2&&(Q=0));for(var me=se-Q,we,Me;me;)Me=Math.random()*me--|0,we=U[me+Q],U[me+Q]=U[Me+Q],U[Me+Q]=we;return U},e.permute=function(U,Q){for(var se=Q.length,me=new Array(se);se--;)me[se]=U[Q[se]];return me},e.pairs=function(U){for(var Q=0,se=U.length-1,me,we=U[0],Me=new Array(se<0?0:se);Q<se;)Me[Q]=[me=we,we=U[++Q]];return Me},e.transpose=function(U){if(!(Me=U.length))return[];for(var Q=-1,se=e.min(U,T),me=new Array(se);++Q<se;)for(var we=-1,Me,Ye=me[Q]=new Array(Me);++we<Me;)Ye[we]=U[we][Q];return me};function T(U){return U.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(U){var Q=[];for(var se in U)Q.push(se);return Q},e.values=function(U){var Q=[];for(var se in U)Q.push(U[se]);return Q},e.entries=function(U){var Q=[];for(var se in U)Q.push({key:se,value:U[se]});return Q},e.merge=function(U){for(var Q=U.length,se,me=-1,we=0,Me,Ye;++me<Q;)we+=U[me].length;for(Me=new Array(we);--Q>=0;)for(Ye=U[Q],se=Ye.length;--se>=0;)Me[--we]=Ye[se];return Me};var g=Math.abs;e.range=function(U,Q,se){if(arguments.length<3&&(se=1,arguments.length<2&&(Q=U,U=0)),(Q-U)/se===1/0)throw new Error("infinite range");var me=[],we=A(g(se)),Me=-1,Ye;if(U*=we,Q*=we,se*=we,se<0)for(;(Ye=U+se*++Me)>Q;)me.push(Ye/we);else for(;(Ye=U+se*++Me)<Q;)me.push(Ye/we);return me};function A(U){for(var Q=1;U*Q%1;)Q*=10;return Q}function b(U,Q){for(var se in Q)Object.defineProperty(U.prototype,se,{value:Q[se],enumerable:!1})}e.map=function(U,Q){var se=new w;if(U instanceof w)U.forEach(function(Pe,tt){se.set(Pe,tt)});else if(Array.isArray(U)){var me=-1,we=U.length,Me;if(arguments.length===1)for(;++me<we;)se.set(me,U[me]);else for(;++me<we;)se.set(Q.call(U,Me=U[me],me),Me)}else for(var Ye in U)se.set(Ye,U[Ye]);return se};function w(){this._=Object.create(null)}var k="__proto__",x="\0";b(w,{has:d,get:function(U){return this._[E(U)]},set:function(U,Q){return this._[E(U)]=Q},remove:C,keys:S,values:function(){var U=[];for(var Q in this._)U.push(this._[Q]);return U},entries:function(){var U=[];for(var Q in this._)U.push({key:M(Q),value:this._[Q]});return U},size:P,empty:D,forEach:function(U){for(var Q in this._)U.call(this,M(Q),this._[Q])}});function E(U){return(U+="")===k||U[0]===x?x+U:U}function M(U){return(U+="")[0]===x?U.slice(1):U}function d(U){return E(U)in this._}function C(U){return(U=E(U))in this._&&delete this._[U]}function S(){var U=[];for(var Q in this._)U.push(M(Q));return U}function P(){var U=0;for(var Q in this._)++U;return U}function D(){for(var U in this._)return!1;return!0}e.nest=function(){var U={},Q=[],se=[],me,we;function Me(Pe,tt,Mt){if(Mt>=Q.length)return we?we.call(U,tt):me?tt.sort(me):tt;for(var kt=-1,er=tt.length,$t=Q[Mt++],Tr,Er,rr,dr=new w,wr;++kt<er;)(wr=dr.get(Tr=$t(Er=tt[kt])))?wr.push(Er):dr.set(Tr,[Er]);return Pe?(Er=Pe(),rr=function(Pr,kr){Er.set(Pr,Me(Pe,kr,Mt))}):(Er={},rr=function(Pr,kr){Er[Pr]=Me(Pe,kr,Mt)}),dr.forEach(rr),Er}function Ye(Pe,tt){if(tt>=Q.length)return Pe;var Mt=[],kt=se[tt++];return Pe.forEach(function(er,$t){Mt.push({key:er,values:Ye($t,tt)})}),kt?Mt.sort(function(er,$t){return kt(er.key,$t.key)}):Mt}return U.map=function(Pe,tt){return Me(tt,Pe,0)},U.entries=function(Pe){return Ye(Me(e.map,Pe,0),0)},U.key=function(Pe){return Q.push(Pe),U},U.sortKeys=function(Pe){return se[Q.length-1]=Pe,U},U.sortValues=function(Pe){return me=Pe,U},U.rollup=function(Pe){return we=Pe,U},U},e.set=function(U){var Q=new z;if(U)for(var se=0,me=U.length;se<me;++se)Q.add(U[se]);return Q};function z(){this._=Object.create(null)}b(z,{has:d,add:function(U){return this._[E(U+="")]=!0,U},remove:C,values:S,size:P,empty:D,forEach:function(U){for(var Q in this._)U.call(this,M(Q))}}),e.behavior={};function O(U){return U}e.rebind=function(U,Q){for(var se=1,me=arguments.length,we;++se<me;)U[we=arguments[se]]=V(U,Q,Q[we]);return U};function V(U,Q,se){return function(){var me=se.apply(Q,arguments);return me===Q?U:me}}function B(U,Q){if(Q in U)return Q;Q=Q.charAt(0).toUpperCase()+Q.slice(1);for(var se=0,me=F.length;se<me;++se){var we=F[se]+Q;if(we in U)return we}}var F=["webkit","ms","moz","Moz","o","O"];function N(){}e.dispatch=function(){for(var U=new Z,Q=-1,se=arguments.length;++Q<se;)U[arguments[Q]]=J(U);return U};function Z(){}Z.prototype.on=function(U,Q){var se=U.indexOf("."),me="";if(se>=0&&(me=U.slice(se+1),U=U.slice(0,se)),U)return arguments.length<2?this[U].on(me):this[U].on(me,Q);if(arguments.length===2){if(Q==null)for(U in this)this.hasOwnProperty(U)&&this[U].on(me,null);return this}};function J(U){var Q=[],se=new w;function me(){for(var we=Q,Me=-1,Ye=we.length,Pe;++Me<Ye;)(Pe=we[Me].on)&&Pe.apply(this,arguments);return U}return me.on=function(we,Me){var Ye=se.get(we),Pe;return arguments.length<2?Ye&&Ye.on:(Ye&&(Ye.on=null,Q=Q.slice(0,Pe=Q.indexOf(Ye)).concat(Q.slice(Pe+1)),se.remove(we)),Me&&Q.push(se.set(we,{on:Me})),U)},me}e.event=null;function re(){e.event.preventDefault()}function le(){for(var U=e.event,Q;Q=U.sourceEvent;)U=Q;return U}function fe(U){for(var Q=new Z,se=0,me=arguments.length;++se<me;)Q[arguments[se]]=J(Q);return Q.of=function(we,Me){return function(Ye){try{var Pe=Ye.sourceEvent=e.event;Ye.target=U,e.event=Ye,Q[Ye.type].apply(we,Me)}finally{e.event=Pe}}},Q}e.requote=function(U){return U.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(U,Q){U.__proto__=Q}:function(U,Q){for(var se in Q)U[se]=Q[se]};function ae(U){return X(U,he),U}var oe=function(U,Q){return Q.querySelector(U)},_e=function(U,Q){return Q.querySelectorAll(U)},be=function(U,Q){var se=U.matches||U[B(U,"matchesSelector")];return be=function(me,we){return se.call(me,we)},be(U,Q)};typeof Sizzle=="function"&&(oe=function(U,Q){return Sizzle(U,Q)[0]||null},_e=Sizzle,be=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var he=e.selection.prototype=[];he.select=function(U){var Q=[],se,me,we,Me;U=ie(U);for(var Ye=-1,Pe=this.length;++Ye<Pe;){Q.push(se=[]),se.parentNode=(we=this[Ye]).parentNode;for(var tt=-1,Mt=we.length;++tt<Mt;)(Me=we[tt])?(se.push(me=U.call(Me,Me.__data__,tt,Ye)),me&&"__data__"in Me&&(me.__data__=Me.__data__)):se.push(null)}return ae(Q)};function ie(U){return typeof U=="function"?U:function(){return oe(U,this)}}he.selectAll=function(U){var Q=[],se,me;U=ye(U);for(var we=-1,Me=this.length;++we<Me;)for(var Ye=this[we],Pe=-1,tt=Ye.length;++Pe<tt;)(me=Ye[Pe])&&(Q.push(se=r(U.call(me,me.__data__,Pe,we))),se.parentNode=me);return ae(Q)};function ye(U){return typeof U=="function"?U:function(){return _e(U,this)}}var ue="http://www.w3.org/1999/xhtml",Ae={svg:"http://www.w3.org/2000/svg",xhtml:ue,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:Ae,qualify:function(U){var Q=U.indexOf(":"),se=U;return Q>=0&&(se=U.slice(0,Q))!=="xmlns"&&(U=U.slice(Q+1)),Ae.hasOwnProperty(se)?{space:Ae[se],local:U}:U}},he.attr=function(U,Q){if(arguments.length<2){if(typeof U=="string"){var se=this.node();return U=e.ns.qualify(U),U.local?se.getAttributeNS(U.space,U.local):se.getAttribute(U)}for(Q in U)this.each(Re(Q,U[Q]));return this}return this.each(Re(U,Q))};function Re(U,Q){U=e.ns.qualify(U);function se(){this.removeAttribute(U)}function me(){this.removeAttributeNS(U.space,U.local)}function we(){this.setAttribute(U,Q)}function Me(){this.setAttributeNS(U.space,U.local,Q)}function Ye(){var tt=Q.apply(this,arguments);tt==null?this.removeAttribute(U):this.setAttribute(U,tt)}function Pe(){var tt=Q.apply(this,arguments);tt==null?this.removeAttributeNS(U.space,U.local):this.setAttributeNS(U.space,U.local,tt)}return Q==null?U.local?me:se:typeof Q=="function"?U.local?Pe:Ye:U.local?Me:we}function ze(U){return U.trim().replace(/\s+/g," ")}he.classed=function(U,Q){if(arguments.length<2){if(typeof U=="string"){var se=this.node(),me=(U=Le(U)).length,we=-1;if(Q=se.classList){for(;++we<me;)if(!Q.contains(U[we]))return!1}else for(Q=se.getAttribute("class");++we<me;)if(!et(U[we]).test(Q))return!1;return!0}for(Q in U)this.each(Ie(Q,U[Q]));return this}return this.each(Ie(U,Q))};function et(U){return new RegExp("(?:^|\\s+)"+e.requote(U)+"(?:\\s+|$)","g")}function Le(U){return(U+"").trim().split(/^|\s+/)}function Ie(U,Q){U=Le(U).map(dt);var se=U.length;function me(){for(var Me=-1;++Me<se;)U[Me](this,Q)}function we(){for(var Me=-1,Ye=Q.apply(this,arguments);++Me<se;)U[Me](this,Ye)}return typeof Q=="function"?we:me}function dt(U){var Q=et(U);return function(se,me){if(we=se.classList)return me?we.add(U):we.remove(U);var we=se.getAttribute("class")||"";me?(Q.lastIndex=0,Q.test(we)||se.setAttribute("class",ze(we+" "+U))):se.setAttribute("class",ze(we.replace(Q," ")))}}he.style=function(U,Q,se){var me=arguments.length;if(me<3){if(typeof U!="string"){me<2&&(Q="");for(se in U)this.each(ct(se,U[se],Q));return this}if(me<2){var we=this.node();return a(we).getComputedStyle(we,null).getPropertyValue(U)}se=""}return this.each(ct(U,Q,se))};function ct(U,Q,se){function me(){this.style.removeProperty(U)}function we(){this.style.setProperty(U,Q,se)}function Me(){var Ye=Q.apply(this,arguments);Ye==null?this.style.removeProperty(U):this.style.setProperty(U,Ye,se)}return Q==null?me:typeof Q=="function"?Me:we}he.property=function(U,Q){if(arguments.length<2){if(typeof U=="string")return this.node()[U];for(Q in U)this.each(Ke(Q,U[Q]));return this}return this.each(Ke(U,Q))};function Ke(U,Q){function se(){delete this[U]}function me(){this[U]=Q}function we(){var Me=Q.apply(this,arguments);Me==null?delete this[U]:this[U]=Me}return Q==null?se:typeof Q=="function"?we:me}he.text=function(U){return arguments.length?this.each(typeof U=="function"?function(){var Q=U.apply(this,arguments);this.textContent=Q==null?"":Q}:U==null?function(){this.textContent=""}:function(){this.textContent=U}):this.node().textContent},he.html=function(U){return arguments.length?this.each(typeof U=="function"?function(){var Q=U.apply(this,arguments);this.innerHTML=Q==null?"":Q}:U==null?function(){this.innerHTML=""}:function(){this.innerHTML=U}):this.node().innerHTML},he.append=function(U){return U=_t(U),this.select(function(){return this.appendChild(U.apply(this,arguments))})};function _t(U){function Q(){var me=this.ownerDocument,we=this.namespaceURI;return we===ue&&me.documentElement.namespaceURI===ue?me.createElement(U):me.createElementNS(we,U)}function se(){return this.ownerDocument.createElementNS(U.space,U.local)}return typeof U=="function"?U:(U=e.ns.qualify(U)).local?se:Q}he.insert=function(U,Q){return U=_t(U),Q=ie(Q),this.select(function(){return this.insertBefore(U.apply(this,arguments),Q.apply(this,arguments)||null)})},he.remove=function(){return this.each(zt)};function zt(){var U=this.parentNode;U&&U.removeChild(this)}he.data=function(U,Q){var se=-1,me=this.length,we,Me;if(!arguments.length){for(U=new Array(me=(we=this[0]).length);++se<me;)(Me=we[se])&&(U[se]=Me.__data__);return U}function Ye(kt,er){var $t,Tr=kt.length,Er=er.length,rr=Math.min(Tr,Er),dr=new Array(Er),wr=new Array(Er),Pr=new Array(Tr),kr,vr;if(Q){var gn=new w,bn=new Array(Tr),In;for($t=-1;++$t<Tr;)(kr=kt[$t])&&(gn.has(In=Q.call(kr,kr.__data__,$t))?Pr[$t]=kr:gn.set(In,kr),bn[$t]=In);for($t=-1;++$t<Er;)(kr=gn.get(In=Q.call(er,vr=er[$t],$t)))?kr!==!0&&(dr[$t]=kr,kr.__data__=vr):wr[$t]=Et(vr),gn.set(In,!0);for($t=-1;++$t<Tr;)$t in bn&&gn.get(bn[$t])!==!0&&(Pr[$t]=kt[$t])}else{for($t=-1;++$t<rr;)kr=kt[$t],vr=er[$t],kr?(kr.__data__=vr,dr[$t]=kr):wr[$t]=Et(vr);for(;$t<Er;++$t)wr[$t]=Et(er[$t]);for(;$t<Tr;++$t)Pr[$t]=kt[$t]}wr.update=dr,wr.parentNode=dr.parentNode=Pr.parentNode=kt.parentNode,Pe.push(wr),tt.push(dr),Mt.push(Pr)}var Pe=nt([]),tt=ae([]),Mt=ae([]);if(typeof U=="function")for(;++se<me;)Ye(we=this[se],U.call(we,we.parentNode.__data__,se));else for(;++se<me;)Ye(we=this[se],U);return tt.enter=function(){return Pe},tt.exit=function(){return Mt},tt};function Et(U){return{__data__:U}}he.datum=function(U){return arguments.length?this.property("__data__",U):this.property("__data__")},he.filter=function(U){var Q=[],se,me,we;typeof U!="function"&&(U=Se(U));for(var Me=0,Ye=this.length;Me<Ye;Me++){Q.push(se=[]),se.parentNode=(me=this[Me]).parentNode;for(var Pe=0,tt=me.length;Pe<tt;Pe++)(we=me[Pe])&&U.call(we,we.__data__,Pe,Me)&&se.push(we)}return ae(Q)};function Se(U){return function(){return be(this,U)}}he.order=function(){for(var U=-1,Q=this.length;++U<Q;)for(var se=this[U],me=se.length-1,we=se[me],Me;--me>=0;)(Me=se[me])&&(we&&we!==Me.nextSibling&&we.parentNode.insertBefore(Me,we),we=Me);return this},he.sort=function(U){U=je.apply(this,arguments);for(var Q=-1,se=this.length;++Q<se;)this[Q].sort(U);return this.order()};function je(U){return arguments.length||(U=c),function(Q,se){return Q&&se?U(Q.__data__,se.__data__):!Q-!se}}he.each=function(U){return ht(this,function(Q,se,me){U.call(Q,Q.__data__,se,me)})};function ht(U,Q){for(var se=0,me=U.length;se<me;se++)for(var we=U[se],Me=0,Ye=we.length,Pe;Me<Ye;Me++)(Pe=we[Me])&&Q(Pe,Me,se);return U}he.call=function(U){var Q=r(arguments);return U.apply(Q[0]=this,Q),this},he.empty=function(){return!this.node()},he.node=function(){for(var U=0,Q=this.length;U<Q;U++)for(var se=this[U],me=0,we=se.length;me<we;me++){var Me=se[me];if(Me)return Me}return null},he.size=function(){var U=0;return ht(this,function(){++U}),U};function nt(U){return X(U,lt),U}var lt=[];e.selection.enter=nt,e.selection.enter.prototype=lt,lt.append=he.append,lt.empty=he.empty,lt.node=he.node,lt.call=he.call,lt.size=he.size,lt.select=function(U){for(var Q=[],se,me,we,Me,Ye,Pe=-1,tt=this.length;++Pe<tt;){we=(Me=this[Pe]).update,Q.push(se=[]),se.parentNode=Me.parentNode;for(var Mt=-1,kt=Me.length;++Mt<kt;)(Ye=Me[Mt])?(se.push(we[Mt]=me=U.call(Me.parentNode,Ye.__data__,Mt,Pe)),me.__data__=Ye.__data__):se.push(null)}return ae(Q)},lt.insert=function(U,Q){return arguments.length<2&&(Q=rt(this)),he.insert.call(this,U,Q)};function rt(U){var Q,se;return function(me,we,Me){var Ye=U[Me].update,Pe=Ye.length,tt;for(Me!=se&&(se=Me,Q=0),we>=Q&&(Q=we+1);!(tt=Ye[Q])&&++Q<Pe;);return tt}}e.select=function(U){var Q;return typeof U=="string"?(Q=[oe(U,i)],Q.parentNode=i.documentElement):(Q=[U],Q.parentNode=n(U)),ae([Q])},e.selectAll=function(U){var Q;return typeof U=="string"?(Q=r(_e(U,i)),Q.parentNode=i.documentElement):(Q=r(U),Q.parentNode=null),ae([Q])},he.on=function(U,Q,se){var me=arguments.length;if(me<3){if(typeof U!="string"){me<2&&(Q=!1);for(se in U)this.each(Xe(se,U[se],Q));return this}if(me<2)return(me=this.node()["__on"+U])&&me._;se=!1}return this.each(Xe(U,Q,se))};function Xe(U,Q,se){var me="__on"+U,we=U.indexOf("."),Me=gt;we>0&&(U=U.slice(0,we));var Ye=ft.get(U);Ye&&(U=Ye,Me=Qt);function Pe(){var kt=this[me];kt&&(this.removeEventListener(U,kt,kt.$),delete this[me])}function tt(){var kt=Me(Q,r(arguments));Pe.call(this),this.addEventListener(U,this[me]=kt,kt.$=se),kt._=Q}function Mt(){var kt=new RegExp("^__on([^.]+)"+e.requote(U)+"$"),er;for(var $t in this)if(er=$t.match(kt)){var Tr=this[$t];this.removeEventListener(er[1],Tr,Tr.$),delete this[$t]}}return we?Q?tt:Pe:Q?N:Mt}var ft=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&ft.forEach(function(U){"on"+U in i&&ft.remove(U)});function gt(U,Q){return function(se){var me=e.event;e.event=se,Q[0]=this.__data__;try{U.apply(this,Q)}finally{e.event=me}}}function Qt(U,Q){var se=gt(U,Q);return function(me){var we=this,Me=me.relatedTarget;(!Me||Me!==we&&!(Me.compareDocumentPosition(we)&8))&&se.call(we,me)}}var Jt,fr=0;function nr(U){var Q=".dragsuppress-"+ ++fr,se="click"+Q,me=e.select(a(U)).on("touchmove"+Q,re).on("dragstart"+Q,re).on("selectstart"+Q,re);if(Jt==null&&(Jt="onselectstart"in U?!1:B(U.style,"userSelect")),Jt){var we=n(U).style,Me=we[Jt];we[Jt]="none"}return function(Ye){if(me.on(Q,null),Jt&&(we[Jt]=Me),Ye){var Pe=function(){me.on(se,null)};me.on(se,function(){re(),Pe()},!0),setTimeout(Pe,0)}}}e.mouse=function(U){return qt(U,le())};var ur=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function qt(U,Q){Q.changedTouches&&(Q=Q.changedTouches[0]);var se=U.ownerSVGElement||U;if(se.createSVGPoint){var me=se.createSVGPoint();if(ur<0){var we=a(U);if(we.scrollX||we.scrollY){se=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Me=se[0][0].getScreenCTM();ur=!(Me.f||Me.e),se.remove()}}return ur?(me.x=Q.pageX,me.y=Q.pageY):(me.x=Q.clientX,me.y=Q.clientY),me=me.matrixTransform(U.getScreenCTM().inverse()),[me.x,me.y]}var Ye=U.getBoundingClientRect();return[Q.clientX-Ye.left-U.clientLeft,Q.clientY-Ye.top-U.clientTop]}e.touch=function(U,Q,se){if(arguments.length<3&&(se=Q,Q=le().changedTouches),Q){for(var me=0,we=Q.length,Me;me<we;++me)if((Me=Q[me]).identifier===se)return qt(U,Me)}},e.behavior.drag=function(){var U=fe(we,"drag","dragstart","dragend"),Q=null,se=Me(N,e.mouse,a,"mousemove","mouseup"),me=Me(xt,e.touch,O,"touchmove","touchend");function we(){this.on("mousedown.drag",se).on("touchstart.drag",me)}function Me(Ye,Pe,tt,Mt,kt){return function(){var er=this,$t=e.event.target.correspondingElement||e.event.target,Tr=er.parentNode,Er=U.of(er,arguments),rr=0,dr=Ye(),wr=".drag"+(dr==null?"":"-"+dr),Pr,kr=e.select(tt($t)).on(Mt+wr,bn).on(kt+wr,In),vr=nr($t),gn=Pe(Tr,dr);Q?(Pr=Q.apply(er,arguments),Pr=[Pr.x-gn[0],Pr.y-gn[1]]):Pr=[0,0],Er({type:"dragstart"});function bn(){var Xn=Pe(Tr,dr),Ci,Fi;Xn&&(Ci=Xn[0]-gn[0],Fi=Xn[1]-gn[1],rr|=Ci|Fi,gn=Xn,Er({type:"drag",x:Xn[0]+Pr[0],y:Xn[1]+Pr[1],dx:Ci,dy:Fi}))}function In(){Pe(Tr,dr)&&(kr.on(Mt+wr,null).on(kt+wr,null),vr(rr),Er({type:"dragend"}))}}}return we.origin=function(Ye){return arguments.length?(Q=Ye,we):Q},e.rebind(we,U,"on")};function xt(){return e.event.changedTouches[0].identifier}e.touches=function(U,Q){return arguments.length<2&&(Q=le().touches),Q?r(Q).map(function(se){var me=qt(U,se);return me.identifier=se.identifier,me}):[]};var At=1e-6,Je=At*At,xe=Math.PI,ce=2*xe,ge=ce-At,qe=xe/2,yt=xe/180,Vt=180/xe;function Ut(U){return U>0?1:U<0?-1:0}function br(U,Q,se){return(Q[0]-U[0])*(se[1]-U[1])-(Q[1]-U[1])*(se[0]-U[0])}function xr(U){return U>1?0:U<-1?xe:Math.acos(U)}function Or(U){return U>1?qe:U<-1?-qe:Math.asin(U)}function Hr(U){return((U=Math.exp(U))-1/U)/2}function gr(U){return((U=Math.exp(U))+1/U)/2}function Ur(U){return((U=Math.exp(2*U))-1)/(U+1)}function _n(U){return(U=Math.sin(U/2))*U}var si=Math.SQRT2,xn=2,ci=4;e.interpolateZoom=function(U,Q){var se=U[0],me=U[1],we=U[2],Me=Q[0],Ye=Q[1],Pe=Q[2],tt=Me-se,Mt=Ye-me,kt=tt*tt+Mt*Mt,er,$t;if(kt<Je)$t=Math.log(Pe/we)/si,er=function(Pr){return[se+Pr*tt,me+Pr*Mt,we*Math.exp(si*Pr*$t)]};else{var Tr=Math.sqrt(kt),Er=(Pe*Pe-we*we+ci*kt)/(2*we*xn*Tr),rr=(Pe*Pe-we*we-ci*kt)/(2*Pe*xn*Tr),dr=Math.log(Math.sqrt(Er*Er+1)-Er),wr=Math.log(Math.sqrt(rr*rr+1)-rr);$t=(wr-dr)/si,er=function(Pr){var kr=Pr*$t,vr=gr(dr),gn=we/(xn*Tr)*(vr*Ur(si*kr+dr)-Hr(dr));return[se+gn*tt,me+gn*Mt,we*vr/gr(si*kr+dr)]}}return er.duration=$t*1e3,er},e.behavior.zoom=function(){var U={x:0,y:0,k:1},Q,se,me,we=[960,500],Me=Wi,Ye=250,Pe=0,tt="mousedown.zoom",Mt="mousemove.zoom",kt="mouseup.zoom",er,$t="touchstart.zoom",Tr,Er=fe(kr,"zoomstart","zoom","zoomend"),rr,dr,wr,Pr;Zi||(Zi="onwheel"in i?(oi=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(oi=function(){return e.event.wheelDelta},"mousewheel"):(oi=function(){return-e.event.detail},"MozMousePixelScroll"));function kr(Sn){Sn.on(tt,va).on(Zi+".zoom",Po).on("dblclick.zoom",Ao).on($t,go)}kr.event=function(Sn){Sn.each(function(){var da=Er.of(this,arguments),Sa=U;ds?e.select(this).transition().each("start.zoom",function(){U=this.__chart__||{x:0,y:0,k:1},Fi(da)}).tween("zoom:zoom",function(){var La=we[0],Ts=we[1],Gs=se?se[0]:La/2,yl=se?se[1]:Ts/2,ls=e.interpolateZoom([(Gs-U.x)/U.k,(yl-U.y)/U.k,La/U.k],[(Gs-Sa.x)/Sa.k,(yl-Sa.y)/Sa.k,La/Sa.k]);return function(Wl){var We=ls(Wl),Gt=La/We[2];this.__chart__=U={x:Gs-We[0]*Gt,y:yl-We[1]*Gt,k:Gt},xa(da)}}).each("interrupt.zoom",function(){Gi(da)}).each("end.zoom",function(){Gi(da)}):(this.__chart__=U,Fi(da),xa(da),Gi(da))})},kr.translate=function(Sn){return arguments.length?(U={x:+Sn[0],y:+Sn[1],k:U.k},Ci(),kr):[U.x,U.y]},kr.scale=function(Sn){return arguments.length?(U={x:U.x,y:U.y,k:null},bn(+Sn),Ci(),kr):U.k},kr.scaleExtent=function(Sn){return arguments.length?(Me=Sn==null?Wi:[+Sn[0],+Sn[1]],kr):Me},kr.center=function(Sn){return arguments.length?(me=Sn&&[+Sn[0],+Sn[1]],kr):me},kr.size=function(Sn){return arguments.length?(we=Sn&&[+Sn[0],+Sn[1]],kr):we},kr.duration=function(Sn){return arguments.length?(Ye=+Sn,kr):Ye},kr.x=function(Sn){return arguments.length?(dr=Sn,rr=Sn.copy(),U={x:0,y:0,k:1},kr):dr},kr.y=function(Sn){return arguments.length?(Pr=Sn,wr=Sn.copy(),U={x:0,y:0,k:1},kr):Pr};function vr(Sn){return[(Sn[0]-U.x)/U.k,(Sn[1]-U.y)/U.k]}function gn(Sn){return[Sn[0]*U.k+U.x,Sn[1]*U.k+U.y]}function bn(Sn){U.k=Math.max(Me[0],Math.min(Me[1],Sn))}function In(Sn,da){da=gn(da),U.x+=Sn[0]-da[0],U.y+=Sn[1]-da[1]}function Xn(Sn,da,Sa,La){Sn.__chart__={x:U.x,y:U.y,k:U.k},bn(Math.pow(2,La)),In(se=da,Sa),Sn=e.select(Sn),Ye>0&&(Sn=Sn.transition().duration(Ye)),Sn.call(kr.event)}function Ci(){dr&&dr.domain(rr.range().map(function(Sn){return(Sn-U.x)/U.k}).map(rr.invert)),Pr&&Pr.domain(wr.range().map(function(Sn){return(Sn-U.y)/U.k}).map(wr.invert))}function Fi(Sn){Pe++||Sn({type:"zoomstart"})}function xa(Sn){Ci(),Sn({type:"zoom",scale:U.k,translate:[U.x,U.y]})}function Gi(Sn){--Pe||(Sn({type:"zoomend"}),se=null)}function va(){var Sn=this,da=Er.of(Sn,arguments),Sa=0,La=e.select(a(Sn)).on(Mt,yl).on(kt,ls),Ts=vr(e.mouse(Sn)),Gs=nr(Sn);pa.call(Sn),Fi(da);function yl(){Sa=1,In(e.mouse(Sn),Ts),xa(da)}function ls(){La.on(Mt,null).on(kt,null),Gs(Sa),Gi(da)}}function go(){var Sn=this,da=Er.of(Sn,arguments),Sa={},La=0,Ts,Gs=".zoom-"+e.event.changedTouches[0].identifier,yl="touchmove"+Gs,ls="touchend"+Gs,Wl=[],We=e.select(Sn),Gt=nr(Sn);qr(),Fi(da),We.on(tt,null).on($t,qr);function or(){var Kr=e.touches(Sn);return Ts=U.k,Kr.forEach(function(yn){yn.identifier in Sa&&(Sa[yn.identifier]=vr(yn))}),Kr}function qr(){var Kr=e.event.target;e.select(Kr).on(yl,$r).on(ls,jr),Wl.push(Kr);for(var yn=e.event.changedTouches,Qn=0,Wn=yn.length;Qn<Wn;++Qn)Sa[yn[Qn].identifier]=null;var Rn=or(),ia=Date.now();if(Rn.length===1){if(ia-Tr<500){var Un=Rn[0];Xn(Sn,Un,Sa[Un.identifier],Math.floor(Math.log(U.k)/Math.LN2)+1),re()}Tr=ia}else if(Rn.length>1){var Un=Rn[0],Bn=Rn[1],mn=Un[0]-Bn[0],zr=Un[1]-Bn[1];La=mn*mn+zr*zr}}function $r(){var Kr=e.touches(Sn),yn,Qn,Wn,Rn;pa.call(Sn);for(var ia=0,Un=Kr.length;ia<Un;++ia,Rn=null)if(Wn=Kr[ia],Rn=Sa[Wn.identifier]){if(Qn)break;yn=Wn,Qn=Rn}if(Rn){var Bn=(Bn=Wn[0]-yn[0])*Bn+(Bn=Wn[1]-yn[1])*Bn,mn=La&&Math.sqrt(Bn/La);yn=[(yn[0]+Wn[0])/2,(yn[1]+Wn[1])/2],Qn=[(Qn[0]+Rn[0])/2,(Qn[1]+Rn[1])/2],bn(mn*Ts)}Tr=null,In(yn,Qn),xa(da)}function jr(){if(e.event.touches.length){for(var Kr=e.event.changedTouches,yn=0,Qn=Kr.length;yn<Qn;++yn)delete Sa[Kr[yn].identifier];for(var Wn in Sa)return void or()}e.selectAll(Wl).on(Gs,null),We.on(tt,va).on($t,go),Gt(),Gi(da)}}function Po(){var Sn=Er.of(this,arguments);er?clearTimeout(er):(pa.call(this),Q=vr(se=me||e.mouse(this)),Fi(Sn)),er=setTimeout(function(){er=null,Gi(Sn)},50),re(),bn(Math.pow(2,oi()*.002)*U.k),In(se,Q),xa(Sn)}function Ao(){var Sn=e.mouse(this),da=Math.log(U.k)/Math.LN2;Xn(this,Sn,vr(Sn),e.event.shiftKey?Math.ceil(da)-1:Math.floor(da)+1)}return e.rebind(kr,Er,"on")};var Wi=[0,1/0],oi,Zi;e.color=Ei;function Ei(){}Ei.prototype.toString=function(){return this.rgb()+""},e.hsl=at;function at(U,Q,se){return this instanceof at?(this.h=+U,this.s=+Q,void(this.l=+se)):arguments.length<2?U instanceof at?new at(U.h,U.s,U.l):zi(""+U,ya,at):new at(U,Q,se)}var Ne=at.prototype=new Ei;Ne.brighter=function(U){return U=Math.pow(.7,arguments.length?U:1),new at(this.h,this.s,this.l/U)},Ne.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new at(this.h,this.s,U*this.l)},Ne.rgb=function(){return st(this.h,this.s,this.l)};function st(U,Q,se){var me,we;U=isNaN(U)?0:(U%=360)<0?U+360:U,Q=isNaN(Q)||Q<0?0:Q>1?1:Q,se=se<0?0:se>1?1:se,we=se<=.5?se*(1+Q):se+Q-se*Q,me=2*se-we;function Me(Pe){return Pe>360?Pe-=360:Pe<0&&(Pe+=360),Pe<60?me+(we-me)*Pe/60:Pe<180?we:Pe<240?me+(we-me)*(240-Pe)/60:me}function Ye(Pe){return Math.round(Me(Pe)*255)}return new ji(Ye(U+120),Ye(U),Ye(U-120))}e.hcl=mt;function mt(U,Q,se){return this instanceof mt?(this.h=+U,this.c=+Q,void(this.l=+se)):arguments.length<2?U instanceof mt?new mt(U.h,U.c,U.l):U instanceof pr?qn(U.l,U.a,U.b):qn((U=zn((U=e.rgb(U)).r,U.g,U.b)).l,U.a,U.b):new mt(U,Q,se)}var Ot=mt.prototype=new Ei;Ot.brighter=function(U){return new mt(this.h,this.c,Math.min(100,this.l+hr*(arguments.length?U:1)))},Ot.darker=function(U){return new mt(this.h,this.c,Math.max(0,this.l-hr*(arguments.length?U:1)))},Ot.rgb=function(){return tr(this.h,this.c,this.l).rgb()};function tr(U,Q,se){return isNaN(U)&&(U=0),isNaN(Q)&&(Q=0),new pr(se,Math.cos(U*=yt)*Q,Math.sin(U)*Q)}e.lab=pr;function pr(U,Q,se){return this instanceof pr?(this.l=+U,this.a=+Q,void(this.b=+se)):arguments.length<2?U instanceof pr?new pr(U.l,U.a,U.b):U instanceof mt?tr(U.h,U.c,U.l):zn((U=ji(U)).r,U.g,U.b):new pr(U,Q,se)}var hr=18,Rr=.95047,Gr=1,Yr=1.08883,vn=pr.prototype=new Ei;vn.brighter=function(U){return new pr(Math.min(100,this.l+hr*(arguments.length?U:1)),this.a,this.b)},vn.darker=function(U){return new pr(Math.max(0,this.l-hr*(arguments.length?U:1)),this.a,this.b)},vn.rgb=function(){return Wr(this.l,this.a,this.b)};function Wr(U,Q,se){var me=(U+16)/116,we=me+Q/500,Me=me-se/200;return we=vi(we)*Rr,me=vi(me)*Gr,Me=vi(Me)*Yr,new ji(Ui(3.2404542*we-1.5371385*me-.4985314*Me),Ui(-.969266*we+1.8760108*me+.041556*Me),Ui(.0556434*we-.2040259*me+1.0572252*Me))}function qn(U,Q,se){return U>0?new mt(Math.atan2(se,Q)*Vt,Math.sqrt(Q*Q+se*se),U):new mt(NaN,NaN,U)}function vi(U){return U>.206893034?U*U*U:(U-4/29)/7.787037}function Mi(U){return U>.008856?Math.pow(U,1/3):7.787037*U+4/29}function Ui(U){return Math.round(255*(U<=.00304?12.92*U:1.055*Math.pow(U,1/2.4)-.055))}e.rgb=ji;function ji(U,Q,se){return this instanceof ji?(this.r=~~U,this.g=~~Q,void(this.b=~~se)):arguments.length<2?U instanceof ji?new ji(U.r,U.g,U.b):zi(""+U,ji,st):new ji(U,Q,se)}function ea(U){return new ji(U>>16,U>>8&255,U&255)}function Ra(U){return ea(U)+""}var Li=ji.prototype=new Ei;Li.brighter=function(U){U=Math.pow(.7,arguments.length?U:1);var Q=this.r,se=this.g,me=this.b,we=30;return!Q&&!se&&!me?new ji(we,we,we):(Q&&Q<we&&(Q=we),se&&se<we&&(se=we),me&&me<we&&(me=we),new ji(Math.min(255,Q/U),Math.min(255,se/U),Math.min(255,me/U)))},Li.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new ji(U*this.r,U*this.g,U*this.b)},Li.hsl=function(){return ya(this.r,this.g,this.b)},Li.toString=function(){return"#"+Yn(this.r)+Yn(this.g)+Yn(this.b)};function Yn(U){return U<16?"0"+Math.max(0,U).toString(16):Math.min(255,U).toString(16)}function zi(U,Q,se){var me=0,we=0,Me=0,Ye,Pe,tt;if(Ye=/([a-z]+)\((.*)\)/.exec(U=U.toLowerCase()),Ye)switch(Pe=Ye[2].split(","),Ye[1]){case"hsl":return se(parseFloat(Pe[0]),parseFloat(Pe[1])/100,parseFloat(Pe[2])/100);case"rgb":return Q(Bt(Pe[0]),Bt(Pe[1]),Bt(Pe[2]))}return(tt=sr.get(U))?Q(tt.r,tt.g,tt.b):(U!=null&&U.charAt(0)==="#"&&!isNaN(tt=parseInt(U.slice(1),16))&&(U.length===4?(me=(tt&3840)>>4,me=me>>4|me,we=tt&240,we=we>>4|we,Me=tt&15,Me=Me<<4|Me):U.length===7&&(me=(tt&16711680)>>16,we=(tt&65280)>>8,Me=tt&255)),Q(me,we,Me))}function ya(U,Q,se){var me=Math.min(U/=255,Q/=255,se/=255),we=Math.max(U,Q,se),Me=we-me,Ye,Pe,tt=(we+me)/2;return Me?(Pe=tt<.5?Me/(we+me):Me/(2-we-me),U==we?Ye=(Q-se)/Me+(Q<se?6:0):Q==we?Ye=(se-U)/Me+2:Ye=(U-Q)/Me+4,Ye*=60):(Ye=NaN,Pe=tt>0&&tt<1?0:Ye),new at(Ye,Pe,tt)}function zn(U,Q,se){U=Ze(U),Q=Ze(Q),se=Ze(se);var me=Mi((.4124564*U+.3575761*Q+.1804375*se)/Rr),we=Mi((.2126729*U+.7151522*Q+.072175*se)/Gr),Me=Mi((.0193339*U+.119192*Q+.9503041*se)/Yr);return pr(116*we-16,500*(me-we),200*(we-Me))}function Ze(U){return(U/=255)<=.04045?U/12.92:Math.pow((U+.055)/1.055,2.4)}function Bt(U){var Q=parseFloat(U);return U.charAt(U.length-1)==="%"?Math.round(Q*2.55):Q}var sr=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});sr.forEach(function(U,Q){sr.set(U,ea(Q))});function _r(U){return typeof U=="function"?U:function(){return U}}e.functor=_r,e.xhr=Jr(O);function Jr(U){return function(Q,se,me){return arguments.length===2&&typeof se=="function"&&(me=se,se=null),on(Q,se,U,me)}}function on(U,Q,se,me){var we={},Me=e.dispatch("beforesend","progress","load","error"),Ye={},Pe=new XMLHttpRequest,tt=null;self.XDomainRequest&&!("withCredentials"in Pe)&&/^(http(s)?:)?\/\//.test(U)&&(Pe=new XDomainRequest),"onload"in Pe?Pe.onload=Pe.onerror=Mt:Pe.onreadystatechange=function(){Pe.readyState>3&&Mt()};function Mt(){var kt=Pe.status,er;if(!kt&&Cr(Pe)||kt>=200&&kt<300||kt===304){try{er=se.call(we,Pe)}catch($t){Me.error.call(we,$t);return}Me.load.call(we,er)}else Me.error.call(we,Pe)}return Pe.onprogress=function(kt){var er=e.event;e.event=kt;try{Me.progress.call(we,Pe)}finally{e.event=er}},we.header=function(kt,er){return kt=(kt+"").toLowerCase(),arguments.length<2?Ye[kt]:(er==null?delete Ye[kt]:Ye[kt]=er+"",we)},we.mimeType=function(kt){return arguments.length?(Q=kt==null?null:kt+"",we):Q},we.responseType=function(kt){return arguments.length?(tt=kt,we):tt},we.response=function(kt){return se=kt,we},["get","post"].forEach(function(kt){we[kt]=function(){return we.send.apply(we,[kt].concat(r(arguments)))}}),we.send=function(kt,er,$t){if(arguments.length===2&&typeof er=="function"&&($t=er,er=null),Pe.open(kt,U,!0),Q!=null&&!("accept"in Ye)&&(Ye.accept=Q+",*/*"),Pe.setRequestHeader)for(var Tr in Ye)Pe.setRequestHeader(Tr,Ye[Tr]);return Q!=null&&Pe.overrideMimeType&&Pe.overrideMimeType(Q),tt!=null&&(Pe.responseType=tt),$t!=null&&we.on("error",$t).on("load",function(Er){$t(null,Er)}),Me.beforesend.call(we,Pe),Pe.send(er==null?null:er),we},we.abort=function(){return Pe.abort(),we},e.rebind(we,Me,"on"),me==null?we:we.get(pn(me))}function pn(U){return U.length===1?function(Q,se){U(Q==null?se:null)}:U}function Cr(U){var Q=U.responseType;return Q&&Q!=="text"?U.response:U.responseText}e.dsv=function(U,Q){var se=new RegExp('["'+U+`
]`),me=U.charCodeAt(0);function we(Mt,kt,er){arguments.length<3&&(er=kt,kt=null);var $t=on(Mt,Q,kt==null?Me:Ye(kt),er);return $t.row=function(Tr){return arguments.length?$t.response((kt=Tr)==null?Me:Ye(Tr)):kt},$t}function Me(Mt){return we.parse(Mt.responseText)}function Ye(Mt){return function(kt){return we.parse(kt.responseText,Mt)}}we.parse=function(Mt,kt){var er;return we.parseRows(Mt,function($t,Tr){if(er)return er($t,Tr-1);var Er=function(rr){for(var dr={},wr=$t.length,Pr=0;Pr<wr;++Pr)dr[$t[Pr]]=rr[Pr];return dr};er=kt?function(rr,dr){return kt(Er(rr),dr)}:Er})},we.parseRows=function(Mt,kt){var er={},$t={},Tr=[],Er=Mt.length,rr=0,dr=0,wr,Pr;function kr(){if(rr>=Er)return $t;if(Pr)return Pr=!1,er;var gn=rr;if(Mt.charCodeAt(gn)===34){for(var bn=gn;bn++<Er;)if(Mt.charCodeAt(bn)===34){if(Mt.charCodeAt(bn+1)!==34)break;++bn}rr=bn+2;var In=Mt.charCodeAt(bn+1);return In===13?(Pr=!0,Mt.charCodeAt(bn+2)===10&&++rr):In===10&&(Pr=!0),Mt.slice(gn+1,bn).replace(/""/g,'"')}for(;rr<Er;){var In=Mt.charCodeAt(rr++),Xn=1;if(In===10)Pr=!0;else if(In===13)Pr=!0,Mt.charCodeAt(rr)===10&&(++rr,++Xn);else if(In!==me)continue;return Mt.slice(gn,rr-Xn)}return Mt.slice(gn)}for(;(wr=kr())!==$t;){for(var vr=[];wr!==er&&wr!==$t;)vr.push(wr),wr=kr();kt&&(vr=kt(vr,dr++))==null||Tr.push(vr)}return Tr},we.format=function(Mt){if(Array.isArray(Mt[0]))return we.formatRows(Mt);var kt=new z,er=[];return Mt.forEach(function($t){for(var Tr in $t)kt.has(Tr)||er.push(kt.add(Tr))}),[er.map(tt).join(U)].concat(Mt.map(function($t){return er.map(function(Tr){return tt($t[Tr])}).join(U)})).join(`
`)},we.formatRows=function(Mt){return Mt.map(Pe).join(`
`)};function Pe(Mt){return Mt.map(tt).join(U)}function tt(Mt){return se.test(Mt)?'"'+Mt.replace(/\"/g,'""')+'"':Mt}return we},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var cn,gi,Hn,qi,fa=this[B(this,"requestAnimationFrame")]||function(U){setTimeout(U,17)};e.timer=function(){eo.apply(this,arguments)};function eo(U,Q,se){var me=arguments.length;me<2&&(Q=0),me<3&&(se=Date.now());var we=se+Q,Me={c:U,t:we,n:null};return gi?gi.n=Me:cn=Me,gi=Me,Hn||(qi=clearTimeout(qi),Hn=1,fa(ma)),Me}function ma(){var U=so(),Q=ja()-U;Q>24?(isFinite(Q)&&(clearTimeout(qi),qi=setTimeout(ma,Q)),Hn=0):(Hn=1,fa(ma))}e.timer.flush=function(){so(),ja()};function so(){for(var U=Date.now(),Q=cn;Q;)U>=Q.t&&Q.c(U-Q.t)&&(Q.c=null),Q=Q.n;return U}function ja(){for(var U,Q=cn,se=1/0;Q;)Q.c?(Q.t<se&&(se=Q.t),Q=(U=Q).n):Q=U?U.n=Q.n:cn=Q.n;return gi=U,se}e.round=function(U,Q){return Q?Math.round(U*(Q=Math.pow(10,Q)))/Q:Math.round(U)},e.geom={};function Xo(U){return U[0]}function Uo(U){return U[1]}e.geom.hull=function(U){var Q=Xo,se=Uo;if(arguments.length)return me(U);function me(we){if(we.length<3)return[];var Me=_r(Q),Ye=_r(se),Pe,tt=we.length,Mt=[],kt=[];for(Pe=0;Pe<tt;Pe++)Mt.push([+Me.call(this,we[Pe],Pe),+Ye.call(this,we[Pe],Pe),Pe]);for(Mt.sort(as),Pe=0;Pe<tt;Pe++)kt.push([Mt[Pe][0],-Mt[Pe][1]]);var er=ms(Mt),$t=ms(kt),Tr=$t[0]===er[0],Er=$t[$t.length-1]===er[er.length-1],rr=[];for(Pe=er.length-1;Pe>=0;--Pe)rr.push(we[Mt[er[Pe]][2]]);for(Pe=+Tr;Pe<$t.length-Er;++Pe)rr.push(we[Mt[$t[Pe]][2]]);return rr}return me.x=function(we){return arguments.length?(Q=we,me):Q},me.y=function(we){return arguments.length?(se=we,me):se},me};function ms(U){for(var Q=U.length,se=[0,1],me=2,we=2;we<Q;we++){for(;me>1&&br(U[se[me-2]],U[se[me-1]],U[we])<=0;)--me;se[me++]=we}return se.slice(0,me)}function as(U,Q){return U[0]-Q[0]||U[1]-Q[1]}e.geom.polygon=function(U){return X(U,il),U};var il=e.geom.polygon.prototype=[];il.area=function(){for(var U=-1,Q=this.length,se,me=this[Q-1],we=0;++U<Q;)se=me,me=this[U],we+=se[1]*me[0]-se[0]*me[1];return we*.5},il.centroid=function(U){var Q=-1,se=this.length,me=0,we=0,Me,Ye=this[se-1],Pe;for(arguments.length||(U=-1/(6*this.area()));++Q<se;)Me=Ye,Ye=this[Q],Pe=Me[0]*Ye[1]-Ye[0]*Me[1],me+=(Me[0]+Ye[0])*Pe,we+=(Me[1]+Ye[1])*Pe;return[me*U,we*U]},il.clip=function(U){for(var Q,se=Eo(U),me=-1,we=this.length-Eo(this),Me,Ye,Pe=this[we-1],tt,Mt,kt;++me<we;){for(Q=U.slice(),U.length=0,tt=this[me],Mt=Q[(Ye=Q.length-se)-1],Me=-1;++Me<Ye;)kt=Q[Me],oo(kt,Pe,tt)?(oo(Mt,Pe,tt)||U.push(cs(Mt,kt,Pe,tt)),U.push(kt)):oo(Mt,Pe,tt)&&U.push(cs(Mt,kt,Pe,tt)),Mt=kt;se&&U.push(U[0]),Pe=tt}return U};function oo(U,Q,se){return(se[0]-Q[0])*(U[1]-Q[1])<(se[1]-Q[1])*(U[0]-Q[0])}function cs(U,Q,se,me){var we=U[0],Me=se[0],Ye=Q[0]-we,Pe=me[0]-Me,tt=U[1],Mt=se[1],kt=Q[1]-tt,er=me[1]-Mt,$t=(Pe*(tt-Mt)-er*(we-Me))/(er*Ye-Pe*kt);return[we+$t*Ye,tt+$t*kt]}function Eo(U){var Q=U[0],se=U[U.length-1];return!(Q[0]-se[0]||Q[1]-se[1])}var hs,Jo,Qo,Oa=[],co,Al,$l=[];function Nu(){ko(this),this.edge=this.site=this.circle=null}function os(U){var Q=Oa.pop()||new Nu;return Q.site=U,Q}function hn(U){Aa(U),Qo.remove(U),Oa.push(U),ko(U)}function bi(U){var Q=U.circle,se=Q.x,me=Q.cy,we={x:se,y:me},Me=U.P,Ye=U.N,Pe=[U];hn(U);for(var tt=Me;tt.circle&&g(se-tt.circle.x)<At&&g(me-tt.circle.cy)<At;)Me=tt.P,Pe.unshift(tt),hn(tt),tt=Me;Pe.unshift(tt),Aa(tt);for(var Mt=Ye;Mt.circle&&g(se-Mt.circle.x)<At&&g(me-Mt.circle.cy)<At;)Ye=Mt.N,Pe.push(Mt),hn(Mt),Mt=Ye;Pe.push(Mt),Aa(Mt);var kt=Pe.length,er;for(er=1;er<kt;++er)Mt=Pe[er],tt=Pe[er-1],dl(Mt.edge,tt.site,Mt.site,we);tt=Pe[0],Mt=Pe[kt-1],Mt.edge=Rf(tt.site,Mt.site,null,we),ni(tt),ni(Mt)}function ac(U){for(var Q=U.x,se=U.y,me,we,Me,Ye,Pe=Qo._;Pe;)if(Me=Pl(Pe,se)-Q,Me>At)Pe=Pe.L;else if(Ye=Q-ss(Pe,se),Ye>At){if(!Pe.R){me=Pe;break}Pe=Pe.R}else{Me>-At?(me=Pe.P,we=Pe):Ye>-At?(me=Pe,we=Pe.N):me=we=Pe;break}var tt=os(U);if(Qo.insert(me,tt),!(!me&&!we)){if(me===we){Aa(me),we=os(me.site),Qo.insert(tt,we),tt.edge=we.edge=Rf(me.site,tt.site),ni(me),ni(we);return}if(!we){tt.edge=Rf(me.site,tt.site);return}Aa(me),Aa(we);var Mt=me.site,kt=Mt.x,er=Mt.y,$t=U.x-kt,Tr=U.y-er,Er=we.site,rr=Er.x-kt,dr=Er.y-er,wr=2*($t*dr-Tr*rr),Pr=$t*$t+Tr*Tr,kr=rr*rr+dr*dr,vr={x:(dr*Pr-Tr*kr)/wr+kt,y:($t*kr-rr*Pr)/wr+er};dl(we.edge,Mt,Er,vr),tt.edge=Rf(Mt,U,null,vr),we.edge=Rf(U,Er,null,vr),ni(me),ni(we)}}function Pl(U,Q){var se=U.site,me=se.x,we=se.y,Me=we-Q;if(!Me)return me;var Ye=U.P;if(!Ye)return-1/0;se=Ye.site;var Pe=se.x,tt=se.y,Mt=tt-Q;if(!Mt)return Pe;var kt=Pe-me,er=1/Me-1/Mt,$t=kt/Mt;return er?(-$t+Math.sqrt($t*$t-2*er*(kt*kt/(-2*Mt)-tt+Mt/2+we-Me/2)))/er+me:(me+Pe)/2}function ss(U,Q){var se=U.N;if(se)return Pl(se,Q);var me=U.site;return me.y===Q?me.x:1/0}function vl(U){this.site=U,this.edges=[]}vl.prototype.prepare=function(){for(var U=this.edges,Q=U.length,se;Q--;)se=U[Q].edge,(!se.b||!se.a)&&U.splice(Q,1);return U.sort(Rl),U.length};function $o(U){for(var Q=U[0][0],se=U[1][0],me=U[0][1],we=U[1][1],Me,Ye,Pe,tt,Mt=Jo,kt=Mt.length,er,$t,Tr,Er,rr,dr;kt--;)if(er=Mt[kt],!(!er||!er.prepare()))for(Tr=er.edges,Er=Tr.length,$t=0;$t<Er;)dr=Tr[$t].end(),Pe=dr.x,tt=dr.y,rr=Tr[++$t%Er].start(),Me=rr.x,Ye=rr.y,(g(Pe-Me)>At||g(tt-Ye)>At)&&(Tr.splice($t,0,new ff(Wc(er.site,dr,g(Pe-Q)<At&&we-tt>At?{x:Q,y:g(Me-Q)<At?Ye:we}:g(tt-we)<At&&se-Pe>At?{x:g(Ye-we)<At?Me:se,y:we}:g(Pe-se)<At&&tt-me>At?{x:se,y:g(Me-se)<At?Ye:me}:g(tt-me)<At&&Pe-Q>At?{x:g(Ye-me)<At?Me:Q,y:me}:null),er.site,null)),++Er)}function Rl(U,Q){return Q.angle-U.angle}function xu(){ko(this),this.x=this.y=this.arc=this.site=this.cy=null}function ni(U){var Q=U.P,se=U.N;if(!(!Q||!se)){var me=Q.site,we=U.site,Me=se.site;if(me!==Me){var Ye=we.x,Pe=we.y,tt=me.x-Ye,Mt=me.y-Pe,kt=Me.x-Ye,dr=Me.y-Pe,er=2*(tt*dr-Mt*kt);if(!(er>=-Je)){var $t=tt*tt+Mt*Mt,Tr=kt*kt+dr*dr,Er=(dr*$t-Mt*Tr)/er,rr=(tt*Tr-kt*$t)/er,dr=rr+Pe,wr=$l.pop()||new xu;wr.arc=U,wr.site=we,wr.x=Er+Ye,wr.y=dr+Math.sqrt(Er*Er+rr*rr),wr.cy=dr,U.circle=wr;for(var Pr=null,kr=Al._;kr;)if(wr.y<kr.y||wr.y===kr.y&&wr.x<=kr.x)if(kr.L)kr=kr.L;else{Pr=kr.P;break}else if(kr.R)kr=kr.R;else{Pr=kr;break}Al.insert(Pr,wr),Pr||(co=wr)}}}}function Aa(U){var Q=U.circle;Q&&(Q.P||(co=Q.N),Al.remove(Q),$l.push(Q),ko(Q),U.circle=null)}function Ca(U,Q,se,me){return function(we){var Me=we.a,Ye=we.b,Pe=Me.x,tt=Me.y,Mt=Ye.x,kt=Ye.y,er=0,$t=1,Tr=Mt-Pe,Er=kt-tt,rr;if(rr=U-Pe,!(!Tr&&rr>0)){if(rr/=Tr,Tr<0){if(rr<er)return;rr<$t&&($t=rr)}else if(Tr>0){if(rr>$t)return;rr>er&&(er=rr)}if(rr=se-Pe,!(!Tr&&rr<0)){if(rr/=Tr,Tr<0){if(rr>$t)return;rr>er&&(er=rr)}else if(Tr>0){if(rr<er)return;rr<$t&&($t=rr)}if(rr=Q-tt,!(!Er&&rr>0)){if(rr/=Er,Er<0){if(rr<er)return;rr<$t&&($t=rr)}else if(Er>0){if(rr>$t)return;rr>er&&(er=rr)}if(rr=me-tt,!(!Er&&rr<0)){if(rr/=Er,Er<0){if(rr>$t)return;rr>er&&(er=rr)}else if(Er>0){if(rr<er)return;rr<$t&&($t=rr)}return er>0&&(we.a={x:Pe+er*Tr,y:tt+er*Er}),$t<1&&(we.b={x:Pe+$t*Tr,y:tt+$t*Er}),we}}}}}}function Fs(U){for(var Q=hs,se=Ca(U[0][0],U[0][1],U[1][0],U[1][1]),me=Q.length,we;me--;)we=Q[me],(!Pf(we,U)||!se(we)||g(we.a.x-we.b.x)<At&&g(we.a.y-we.b.y)<At)&&(we.a=we.b=null,Q.splice(me,1))}function Pf(U,Q){var se=U.b;if(se)return!0;var me=U.a,we=Q[0][0],Me=Q[1][0],Ye=Q[0][1],Pe=Q[1][1],tt=U.l,Mt=U.r,kt=tt.x,er=tt.y,$t=Mt.x,Tr=Mt.y,Er=(kt+$t)/2,rr=(er+Tr)/2,dr,wr;if(Tr===er){if(Er<we||Er>=Me)return;if(kt>$t){if(!me)me={x:Er,y:Ye};else if(me.y>=Pe)return;se={x:Er,y:Pe}}else{if(!me)me={x:Er,y:Pe};else if(me.y<Ye)return;se={x:Er,y:Ye}}}else if(dr=(kt-$t)/(Tr-er),wr=rr-dr*Er,dr<-1||dr>1)if(kt>$t){if(!me)me={x:(Ye-wr)/dr,y:Ye};else if(me.y>=Pe)return;se={x:(Pe-wr)/dr,y:Pe}}else{if(!me)me={x:(Pe-wr)/dr,y:Pe};else if(me.y<Ye)return;se={x:(Ye-wr)/dr,y:Ye}}else if(er<Tr){if(!me)me={x:we,y:dr*we+wr};else if(me.x>=Me)return;se={x:Me,y:dr*Me+wr}}else{if(!me)me={x:Me,y:dr*Me+wr};else if(me.x<we)return;se={x:we,y:dr*we+wr}}return U.a=me,U.b=se,!0}function Ma(U,Q){this.l=U,this.r=Q,this.a=this.b=null}function Rf(U,Q,se,me){var we=new Ma(U,Q);return hs.push(we),se&&dl(we,U,Q,se),me&&dl(we,Q,U,me),Jo[U.i].edges.push(new ff(we,U,Q)),Jo[Q.i].edges.push(new ff(we,Q,U)),we}function Wc(U,Q,se){var me=new Ma(U,null);return me.a=Q,me.b=se,hs.push(me),me}function dl(U,Q,se,me){!U.a&&!U.b?(U.a=me,U.l=Q,U.r=se):U.l===se?U.b=me:U.a=me}function ff(U,Q,se){var me=U.a,we=U.b;this.edge=U,this.site=Q,this.angle=se?Math.atan2(se.y-Q.y,se.x-Q.x):U.l===Q?Math.atan2(we.x-me.x,me.y-we.y):Math.atan2(me.x-we.x,we.y-me.y)}ff.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function $s(){this._=null}function ko(U){U.U=U.C=U.L=U.R=U.P=U.N=null}$s.prototype={insert:function(U,Q){var se,me,we;if(U){if(Q.P=U,Q.N=U.N,U.N&&(U.N.P=Q),U.N=Q,U.R){for(U=U.R;U.L;)U=U.L;U.L=Q}else U.R=Q;se=U}else this._?(U=Ah(this._),Q.P=null,Q.N=U,U.P=U.L=Q,se=U):(Q.P=Q.N=null,this._=Q,se=null);for(Q.L=Q.R=null,Q.U=se,Q.C=!0,U=Q;se&&se.C;)me=se.U,se===me.L?(we=me.R,we&&we.C?(se.C=we.C=!1,me.C=!0,U=me):(U===se.R&&(eu(this,se),U=se,se=U.U),se.C=!1,me.C=!0,_u(this,me))):(we=me.L,we&&we.C?(se.C=we.C=!1,me.C=!0,U=me):(U===se.L&&(_u(this,se),U=se,se=U.U),se.C=!1,me.C=!0,eu(this,me))),se=U.U;this._.C=!1},remove:function(U){U.N&&(U.N.P=U.P),U.P&&(U.P.N=U.N),U.N=U.P=null;var Q=U.U,se,me=U.L,we=U.R,Me,Ye;if(me?we?Me=Ah(we):Me=me:Me=we,Q?Q.L===U?Q.L=Me:Q.R=Me:this._=Me,me&&we?(Ye=Me.C,Me.C=U.C,Me.L=me,me.U=Me,Me!==we?(Q=Me.U,Me.U=U.U,U=Me.R,Q.L=U,Me.R=we,we.U=Me):(Me.U=Q,Q=Me,U=Me.R)):(Ye=U.C,U=Me),U&&(U.U=Q),!Ye){if(U&&U.C){U.C=!1;return}do{if(U===this._)break;if(U===Q.L){if(se=Q.R,se.C&&(se.C=!1,Q.C=!0,eu(this,Q),se=Q.R),se.L&&se.L.C||se.R&&se.R.C){(!se.R||!se.R.C)&&(se.L.C=!1,se.C=!0,_u(this,se),se=Q.R),se.C=Q.C,Q.C=se.R.C=!1,eu(this,Q),U=this._;break}}else if(se=Q.L,se.C&&(se.C=!1,Q.C=!0,_u(this,Q),se=Q.L),se.L&&se.L.C||se.R&&se.R.C){(!se.L||!se.L.C)&&(se.R.C=!1,se.C=!0,eu(this,se),se=Q.L),se.C=Q.C,Q.C=se.L.C=!1,_u(this,Q),U=this._;break}se.C=!0,U=Q,Q=Q.U}while(!U.C);U&&(U.C=!1)}}};function eu(U,Q){var se=Q,me=Q.R,we=se.U;we?we.L===se?we.L=me:we.R=me:U._=me,me.U=we,se.U=me,se.R=me.L,se.R&&(se.R.U=se),me.L=se}function _u(U,Q){var se=Q,me=Q.L,we=se.U;we?we.L===se?we.L=me:we.R=me:U._=me,me.U=we,se.U=me,se.L=me.R,se.L&&(se.L.U=se),me.R=se}function Ah(U){for(;U.L;)U=U.L;return U}function Uu(U,Q){var se=U.sort(nv).pop(),me,we,Me;for(hs=[],Jo=new Array(U.length),Qo=new $s,Al=new $s;;)if(Me=co,se&&(!Me||se.y<Me.y||se.y===Me.y&&se.x<Me.x))(se.x!==me||se.y!==we)&&(Jo[se.i]=new vl(se),ac(se),me=se.x,we=se.y),se=U.pop();else if(Me)bi(Me.arc);else break;Q&&(Fs(Q),$o(Q));var Ye={cells:Jo,edges:hs};return Qo=Al=hs=Jo=null,Ye}function nv(U,Q){return Q.y-U.y||Q.x-U.x}e.geom.voronoi=function(U){var Q=Xo,se=Uo,me=Q,we=se,Me=Ac;if(U)return Ye(U);function Ye(tt){var Mt=new Array(tt.length),kt=Me[0][0],er=Me[0][1],$t=Me[1][0],Tr=Me[1][1];return Uu(Pe(tt),Me).cells.forEach(function(Er,rr){var dr=Er.edges,wr=Er.site,Pr=Mt[rr]=dr.length?dr.map(function(kr){var vr=kr.start();return[vr.x,vr.y]}):wr.x>=kt&&wr.x<=$t&&wr.y>=er&&wr.y<=Tr?[[kt,Tr],[$t,Tr],[$t,er],[kt,er]]:[];Pr.point=tt[rr]}),Mt}function Pe(tt){return tt.map(function(Mt,kt){return{x:Math.round(me(Mt,kt)/At)*At,y:Math.round(we(Mt,kt)/At)*At,i:kt}})}return Ye.links=function(tt){return Uu(Pe(tt)).edges.filter(function(Mt){return Mt.l&&Mt.r}).map(function(Mt){return{source:tt[Mt.l.i],target:tt[Mt.r.i]}})},Ye.triangles=function(tt){var Mt=[];return Uu(Pe(tt)).cells.forEach(function(kt,er){for(var $t=kt.site,Tr=kt.edges.sort(Rl),Er=-1,rr=Tr.length,dr,wr,Pr=Tr[rr-1].edge,kr=Pr.l===$t?Pr.r:Pr.l;++Er<rr;)dr=Pr,wr=kr,Pr=Tr[Er].edge,kr=Pr.l===$t?Pr.r:Pr.l,er<wr.i&&er<kr.i&&lo($t,wr,kr)<0&&Mt.push([tt[er],tt[wr.i],tt[kr.i]])}),Mt},Ye.x=function(tt){return arguments.length?(me=_r(Q=tt),Ye):Q},Ye.y=function(tt){return arguments.length?(we=_r(se=tt),Ye):se},Ye.clipExtent=function(tt){return arguments.length?(Me=tt==null?Ac:tt,Ye):Me===Ac?null:Me},Ye.size=function(tt){return arguments.length?Ye.clipExtent(tt&&[[0,0],tt]):Me===Ac?null:Me&&Me[1]},Ye};var Ac=[[-1e6,-1e6],[1e6,1e6]];function lo(U,Q,se){return(U.x-se.x)*(Q.y-U.y)-(U.x-Q.x)*(se.y-U.y)}e.geom.delaunay=function(U){return e.geom.voronoi().triangles(U)},e.geom.quadtree=function(U,Q,se,me,we){var Me=Xo,Ye=Uo,Pe;if(Pe=arguments.length)return Me=Df,Ye=Mh,Pe===3&&(we=se,me=Q,se=Q=0),tt(U);function tt(Mt){var kt,er=_r(Me),$t=_r(Ye),Tr,Er,rr,dr,wr,Pr,kr,vr;if(Q!=null)wr=Q,Pr=se,kr=me,vr=we;else if(kr=vr=-(wr=Pr=1/0),Tr=[],Er=[],dr=Mt.length,Pe)for(rr=0;rr<dr;++rr)kt=Mt[rr],kt.x<wr&&(wr=kt.x),kt.y<Pr&&(Pr=kt.y),kt.x>kr&&(kr=kt.x),kt.y>vr&&(vr=kt.y),Tr.push(kt.x),Er.push(kt.y);else for(rr=0;rr<dr;++rr){var gn=+er(kt=Mt[rr],rr),bn=+$t(kt,rr);gn<wr&&(wr=gn),bn<Pr&&(Pr=bn),gn>kr&&(kr=gn),bn>vr&&(vr=bn),Tr.push(gn),Er.push(bn)}var In=kr-wr,Xn=vr-Pr;In>Xn?vr=Pr+In:kr=wr+Xn;function Ci(Gi,va,go,Po,Ao,Sn,da,Sa){if(!(isNaN(go)||isNaN(Po)))if(Gi.leaf){var La=Gi.x,Ts=Gi.y;if(La!=null)if(g(La-go)+g(Ts-Po)<.01)Fi(Gi,va,go,Po,Ao,Sn,da,Sa);else{var Gs=Gi.point;Gi.x=Gi.y=Gi.point=null,Fi(Gi,Gs,La,Ts,Ao,Sn,da,Sa),Fi(Gi,va,go,Po,Ao,Sn,da,Sa)}else Gi.x=go,Gi.y=Po,Gi.point=va}else Fi(Gi,va,go,Po,Ao,Sn,da,Sa)}function Fi(Gi,va,go,Po,Ao,Sn,da,Sa){var La=(Ao+da)*.5,Ts=(Sn+Sa)*.5,Gs=go>=La,yl=Po>=Ts,ls=yl<<1|Gs;Gi.leaf=!1,Gi=Gi.nodes[ls]||(Gi.nodes[ls]=Us()),Gs?Ao=La:da=La,yl?Sn=Ts:Sa=Ts,Ci(Gi,va,go,Po,Ao,Sn,da,Sa)}var xa=Us();if(xa.add=function(Gi){Ci(xa,Gi,+er(Gi,++rr),+$t(Gi,rr),wr,Pr,kr,vr)},xa.visit=function(Gi){xs(Gi,xa,wr,Pr,kr,vr)},xa.find=function(Gi){return Sh(xa,Gi[0],Gi[1],wr,Pr,kr,vr)},rr=-1,Q==null){for(;++rr<dr;)Ci(xa,Mt[rr],Tr[rr],Er[rr],wr,Pr,kr,vr);--rr}else Mt.forEach(xa.add);return Tr=Er=Mt=kt=null,xa}return tt.x=function(Mt){return arguments.length?(Me=Mt,tt):Me},tt.y=function(Mt){return arguments.length?(Ye=Mt,tt):Ye},tt.extent=function(Mt){return arguments.length?(Mt==null?Q=se=me=we=null:(Q=+Mt[0][0],se=+Mt[0][1],me=+Mt[1][0],we=+Mt[1][1]),tt):Q==null?null:[[Q,se],[me,we]]},tt.size=function(Mt){return arguments.length?(Mt==null?Q=se=me=we=null:(Q=se=0,me=+Mt[0],we=+Mt[1]),tt):Q==null?null:[me-Q,we-se]},tt};function Df(U){return U.x}function Mh(U){return U.y}function Us(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function xs(U,Q,se,me,we,Me){if(!U(Q,se,me,we,Me)){var Ye=(se+we)*.5,Pe=(me+Me)*.5,tt=Q.nodes;tt[0]&&xs(U,tt[0],se,me,Ye,Pe),tt[1]&&xs(U,tt[1],Ye,me,we,Pe),tt[2]&&xs(U,tt[2],se,Pe,Ye,Me),tt[3]&&xs(U,tt[3],Ye,Pe,we,Me)}}function Sh(U,Q,se,me,we,Me,Ye){var Pe=1/0,tt;return function Mt(kt,er,$t,Tr,Er){if(!(er>Me||$t>Ye||Tr<me||Er<we)){if(rr=kt.point){var rr,dr=Q-kt.x,wr=se-kt.y,Pr=dr*dr+wr*wr;if(Pr<Pe){var kr=Math.sqrt(Pe=Pr);me=Q-kr,we=se-kr,Me=Q+kr,Ye=se+kr,tt=rr}}for(var vr=kt.nodes,gn=(er+Tr)*.5,bn=($t+Er)*.5,In=Q>=gn,Xn=se>=bn,Ci=Xn<<1|In,Fi=Ci+4;Ci<Fi;++Ci)if(kt=vr[Ci&3])switch(Ci&3){case 0:Mt(kt,er,$t,gn,bn);break;case 1:Mt(kt,gn,$t,Tr,bn);break;case 2:Mt(kt,er,bn,gn,Er);break;case 3:Mt(kt,gn,bn,Tr,Er);break}}}(U,me,we,Me,Ye),tt}e.interpolateRgb=cf;function cf(U,Q){U=e.rgb(U),Q=e.rgb(Q);var se=U.r,me=U.g,we=U.b,Me=Q.r-se,Ye=Q.g-me,Pe=Q.b-we;return function(tt){return"#"+Yn(Math.round(se+Me*tt))+Yn(Math.round(me+Ye*tt))+Yn(Math.round(we+Pe*tt))}}e.interpolateObject=To;function To(U,Q){var se={},me={},we;for(we in U)we in Q?se[we]=qs(U[we],Q[we]):me[we]=U[we];for(we in Q)we in U||(me[we]=Q[we]);return function(Me){for(we in se)me[we]=se[we](Me);return me}}e.interpolateNumber=vs;function vs(U,Q){return U=+U,Q=+Q,function(se){return U*(1-se)+Q*se}}e.interpolateString=po;function po(U,Q){var se=Co.lastIndex=Mc.lastIndex=0,me,we,Me,Ye=-1,Pe=[],tt=[];for(U=U+"",Q=Q+"";(me=Co.exec(U))&&(we=Mc.exec(Q));)(Me=we.index)>se&&(Me=Q.slice(se,Me),Pe[Ye]?Pe[Ye]+=Me:Pe[++Ye]=Me),(me=me[0])===(we=we[0])?Pe[Ye]?Pe[Ye]+=we:Pe[++Ye]=we:(Pe[++Ye]=null,tt.push({i:Ye,x:vs(me,we)})),se=Mc.lastIndex;return se<Q.length&&(Me=Q.slice(se),Pe[Ye]?Pe[Ye]+=Me:Pe[++Ye]=Me),Pe.length<2?tt[0]?(Q=tt[0].x,function(Mt){return Q(Mt)+""}):function(){return Q}:(Q=tt.length,function(Mt){for(var kt=0,er;kt<Q;++kt)Pe[(er=tt[kt]).i]=er.x(Mt);return Pe.join("")})}var Co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mc=new RegExp(Co.source,"g");e.interpolate=qs;function qs(U,Q){for(var se=e.interpolators.length,me;--se>=0&&!(me=e.interpolators[se](U,Q)););return me}e.interpolators=[function(U,Q){var se=typeof Q;return(se==="string"?sr.has(Q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Q)?cf:po:Q instanceof Ei?cf:Array.isArray(Q)?Vl:se==="object"&&isNaN(Q)?To:vs)(U,Q)}],e.interpolateArray=Vl;function Vl(U,Q){var se=[],me=[],we=U.length,Me=Q.length,Ye=Math.min(U.length,Q.length),Pe;for(Pe=0;Pe<Ye;++Pe)se.push(qs(U[Pe],Q[Pe]));for(;Pe<we;++Pe)me[Pe]=U[Pe];for(;Pe<Me;++Pe)me[Pe]=Q[Pe];return function(tt){for(Pe=0;Pe<Ye;++Pe)me[Pe]=se[Pe](tt);return me}}var hf=function(){return O},_d=e.map({linear:hf,poly:iv,quad:function(){return Dv},cubic:function(){return vf},sin:function(){return Eh},exp:function(){return av},circle:function(){return wu},elastic:Iv,back:ov,bounce:function(){return kh}}),bu=e.map({in:O,out:Hl,"in-out":ho,"out-in":function(U){return ho(Hl(U))}});e.ease=function(U){var Q=U.indexOf("-"),se=Q>=0?U.slice(0,Q):U,me=Q>=0?U.slice(Q+1):"in";return se=_d.get(se)||hf,me=bu.get(me)||O,Wp(me(se.apply(null,t.call(arguments,1))))};function Wp(U){return function(Q){return Q<=0?0:Q>=1?1:U(Q)}}function Hl(U){return function(Q){return 1-U(1-Q)}}function ho(U){return function(Q){return .5*(Q<.5?U(2*Q):2-U(2-2*Q))}}function Dv(U){return U*U}function vf(U){return U*U*U}function Gl(U){if(U<=0)return 0;if(U>=1)return 1;var Q=U*U,se=Q*U;return 4*(U<.5?se:3*(U-Q)+se-.75)}function iv(U){return function(Q){return Math.pow(Q,U)}}function Eh(U){return 1-Math.cos(U*qe)}function av(U){return Math.pow(2,10*(U-1))}function wu(U){return 1-Math.sqrt(1-U*U)}function Iv(U,Q){var se;return arguments.length<2&&(Q=.45),arguments.length?se=Q/ce*Math.asin(1/U):(U=1,se=Q/4),function(me){return 1+U*Math.pow(2,-10*me)*Math.sin((me-se)*ce/Q)}}function ov(U){return U||(U=1.70158),function(Q){return Q*Q*((U+1)*Q-U)}}function kh(U){return U<1/2.75?7.5625*U*U:U<2/2.75?7.5625*(U-=1.5/2.75)*U+.75:U<2.5/2.75?7.5625*(U-=2.25/2.75)*U+.9375:7.5625*(U-=2.625/2.75)*U+.984375}e.interpolateHcl=sv;function sv(U,Q){U=e.hcl(U),Q=e.hcl(Q);var se=U.h,me=U.c,we=U.l,Me=Q.h-se,Ye=Q.c-me,Pe=Q.l-we;return isNaN(Ye)&&(Ye=0,me=isNaN(me)?Q.c:me),isNaN(Me)?(Me=0,se=isNaN(se)?Q.h:se):Me>180?Me-=360:Me<-180&&(Me+=360),function(tt){return tr(se+Me*tt,me+Ye*tt,we+Pe*tt)+""}}e.interpolateHsl=bd;function bd(U,Q){U=e.hsl(U),Q=e.hsl(Q);var se=U.h,me=U.s,we=U.l,Me=Q.h-se,Ye=Q.s-me,Pe=Q.l-we;return isNaN(Ye)&&(Ye=0,me=isNaN(me)?Q.s:me),isNaN(Me)?(Me=0,se=isNaN(se)?Q.h:se):Me>180?Me-=360:Me<-180&&(Me+=360),function(tt){return st(se+Me*tt,me+Ye*tt,we+Pe*tt)+""}}e.interpolateLab=Hd;function Hd(U,Q){U=e.lab(U),Q=e.lab(Q);var se=U.l,me=U.a,we=U.b,Me=Q.l-se,Ye=Q.a-me,Pe=Q.b-we;return function(tt){return Wr(se+Me*tt,me+Ye*tt,we+Pe*tt)+""}}e.interpolateRound=If;function If(U,Q){return Q-=U,function(se){return Math.round(U+Q*se)}}e.transform=function(U){var Q=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(se){if(se!=null){Q.setAttribute("transform",se);var me=Q.transform.baseVal.consolidate()}return new Fv(me?me.matrix:Sc)})(U)};function Fv(U){var Q=[U.a,U.b],se=[U.c,U.d],me=Ch(Q),we=oc(Q,se),Me=Ch(Vu(se,Q,-we))||0;Q[0]*se[1]<se[0]*Q[1]&&(Q[0]*=-1,Q[1]*=-1,me*=-1,we*=-1),this.rotate=(me?Math.atan2(Q[1],Q[0]):Math.atan2(-se[0],se[1]))*Vt,this.translate=[U.e,U.f],this.scale=[me,Me],this.skew=Me?Math.atan2(we,Me)*Vt:0}Fv.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function oc(U,Q){return U[0]*Q[0]+U[1]*Q[1]}function Ch(U){var Q=Math.sqrt(oc(U,U));return Q&&(U[0]/=Q,U[1]/=Q),Q}function Vu(U,Q,se){return U[0]+=se*Q[0],U[1]+=se*Q[1],U}var Sc={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=uv;function Ff(U){return U.length?U.pop()+",":""}function qv(U,Q,se,me){if(U[0]!==Q[0]||U[1]!==Q[1]){var we=se.push("translate(",null,",",null,")");me.push({i:we-4,x:vs(U[0],Q[0])},{i:we-2,x:vs(U[1],Q[1])})}else(Q[0]||Q[1])&&se.push("translate("+Q+")")}function zv(U,Q,se,me){U!==Q?(U-Q>180?Q+=360:Q-U>180&&(U+=360),me.push({i:se.push(Ff(se)+"rotate(",null,")")-2,x:vs(U,Q)})):Q&&se.push(Ff(se)+"rotate("+Q+")")}function Ov(U,Q,se,me){U!==Q?me.push({i:se.push(Ff(se)+"skewX(",null,")")-2,x:vs(U,Q)}):Q&&se.push(Ff(se)+"skewX("+Q+")")}function lv(U,Q,se,me){if(U[0]!==Q[0]||U[1]!==Q[1]){var we=se.push(Ff(se)+"scale(",null,",",null,")");me.push({i:we-4,x:vs(U[0],Q[0])},{i:we-2,x:vs(U[1],Q[1])})}else(Q[0]!==1||Q[1]!==1)&&se.push(Ff(se)+"scale("+Q+")")}function uv(U,Q){var se=[],me=[];return U=e.transform(U),Q=e.transform(Q),qv(U.translate,Q.translate,se,me),zv(U.rotate,Q.rotate,se,me),Ov(U.skew,Q.skew,se,me),lv(U.scale,Q.scale,se,me),U=Q=null,function(we){for(var Me=-1,Ye=me.length,Pe;++Me<Ye;)se[(Pe=me[Me]).i]=Pe.x(we);return se.join("")}}function Bv(U,Q){return Q=(Q-=U=+U)||1/Q,function(se){return(se-U)/Q}}function tu(U,Q){return Q=(Q-=U=+U)||1/Q,function(se){return Math.max(0,Math.min(1,(se-U)/Q))}}e.layout={},e.layout.bundle=function(){return function(U){for(var Q=[],se=-1,me=U.length;++se<me;)Q.push(fv(U[se]));return Q}};function fv(U){for(var Q=U.source,se=U.target,me=ru(Q,se),we=[Q];Q!==me;)Q=Q.parent,we.push(Q);for(var Me=we.length;se!==me;)we.splice(Me,0,se),se=se.parent;return we}function al(U){for(var Q=[],se=U.parent;se!=null;)Q.push(U),U=se,se=se.parent;return Q.push(U),Q}function ru(U,Q){if(U===Q)return U;for(var se=al(U),me=al(Q),we=se.pop(),Me=me.pop(),Ye=null;we===Me;)Ye=we,we=se.pop(),Me=me.pop();return Ye}e.layout.chord=function(){var U={},Q,se,me,we,Me=0,Ye,Pe,tt;function Mt(){var er={},$t=[],Tr=e.range(we),Er=[],rr,dr,wr,Pr,kr;for(Q=[],se=[],rr=0,Pr=-1;++Pr<we;){for(dr=0,kr=-1;++kr<we;)dr+=me[Pr][kr];$t.push(dr),Er.push(e.range(we)),rr+=dr}for(Ye&&Tr.sort(function(xa,Gi){return Ye($t[xa],$t[Gi])}),Pe&&Er.forEach(function(xa,Gi){xa.sort(function(va,go){return Pe(me[Gi][va],me[Gi][go])})}),rr=(ce-Me*we)/rr,dr=0,Pr=-1;++Pr<we;){for(wr=dr,kr=-1;++kr<we;){var vr=Tr[Pr],gn=Er[vr][kr],bn=me[vr][gn],In=dr,Xn=dr+=bn*rr;er[vr+"-"+gn]={index:vr,subindex:gn,startAngle:In,endAngle:Xn,value:bn}}se[vr]={index:vr,startAngle:wr,endAngle:dr,value:$t[vr]},dr+=Me}for(Pr=-1;++Pr<we;)for(kr=Pr-1;++kr<we;){var Ci=er[Pr+"-"+kr],Fi=er[kr+"-"+Pr];(Ci.value||Fi.value)&&Q.push(Ci.value<Fi.value?{source:Fi,target:Ci}:{source:Ci,target:Fi})}tt&&kt()}function kt(){Q.sort(function(er,$t){return tt((er.source.value+er.target.value)/2,($t.source.value+$t.target.value)/2)})}return U.matrix=function(er){return arguments.length?(we=(me=er)&&me.length,Q=se=null,U):me},U.padding=function(er){return arguments.length?(Me=er,Q=se=null,U):Me},U.sortGroups=function(er){return arguments.length?(Ye=er,Q=se=null,U):Ye},U.sortSubgroups=function(er){return arguments.length?(Pe=er,Q=null,U):Pe},U.sortChords=function(er){return arguments.length?(tt=er,Q&&kt(),U):tt},U.chords=function(){return Q||Mt(),Q},U.groups=function(){return se||Mt(),se},U},e.layout.force=function(){var U={},Q=e.dispatch("start","tick","end"),se,me=[1,1],we,Me,Ye=.9,Pe=zs,tt=Gd,Mt=-30,kt=Yd,er=.1,$t=.64,Tr=[],Er=[],rr,dr,wr;function Pr(vr){return function(gn,bn,In,Xn){if(gn.point!==vr){var Ci=gn.cx-vr.x,Fi=gn.cy-vr.y,xa=Xn-bn,Gi=Ci*Ci+Fi*Fi;if(xa*xa/$t<Gi){if(Gi<kt){var va=gn.charge/Gi;vr.px-=Ci*va,vr.py-=Fi*va}return!0}if(gn.point&&Gi&&Gi<kt){var va=gn.pointCharge/Gi;vr.px-=Ci*va,vr.py-=Fi*va}}return!gn.charge}}U.tick=function(){if((Me*=.99)<.005)return se=null,Q.end({type:"end",alpha:Me=0}),!0;var vr=Tr.length,gn=Er.length,bn,In,Xn,Ci,Fi,xa,Gi,va,go;for(In=0;In<gn;++In)Xn=Er[In],Ci=Xn.source,Fi=Xn.target,va=Fi.x-Ci.x,go=Fi.y-Ci.y,(xa=va*va+go*go)&&(xa=Me*dr[In]*((xa=Math.sqrt(xa))-rr[In])/xa,va*=xa,go*=xa,Fi.x-=va*(Gi=Ci.weight+Fi.weight?Ci.weight/(Ci.weight+Fi.weight):.5),Fi.y-=go*Gi,Ci.x+=va*(Gi=1-Gi),Ci.y+=go*Gi);if((Gi=Me*er)&&(va=me[0]/2,go=me[1]/2,In=-1,Gi))for(;++In<vr;)Xn=Tr[In],Xn.x+=(va-Xn.x)*Gi,Xn.y+=(go-Xn.y)*Gi;if(Mt)for(Dl(bn=e.geom.quadtree(Tr),Me,wr),In=-1;++In<vr;)(Xn=Tr[In]).fixed||bn.visit(Pr(Xn));for(In=-1;++In<vr;)Xn=Tr[In],Xn.fixed?(Xn.x=Xn.px,Xn.y=Xn.py):(Xn.x-=(Xn.px-(Xn.px=Xn.x))*Ye,Xn.y-=(Xn.py-(Xn.py=Xn.y))*Ye);Q.tick({type:"tick",alpha:Me})},U.nodes=function(vr){return arguments.length?(Tr=vr,U):Tr},U.links=function(vr){return arguments.length?(Er=vr,U):Er},U.size=function(vr){return arguments.length?(me=vr,U):me},U.linkDistance=function(vr){return arguments.length?(Pe=typeof vr=="function"?vr:+vr,U):Pe},U.distance=U.linkDistance,U.linkStrength=function(vr){return arguments.length?(tt=typeof vr=="function"?vr:+vr,U):tt},U.friction=function(vr){return arguments.length?(Ye=+vr,U):Ye},U.charge=function(vr){return arguments.length?(Mt=typeof vr=="function"?vr:+vr,U):Mt},U.chargeDistance=function(vr){return arguments.length?(kt=vr*vr,U):Math.sqrt(kt)},U.gravity=function(vr){return arguments.length?(er=+vr,U):er},U.theta=function(vr){return arguments.length?($t=vr*vr,U):Math.sqrt($t)},U.alpha=function(vr){return arguments.length?(vr=+vr,Me?vr>0?Me=vr:(se.c=null,se.t=NaN,se=null,Q.end({type:"end",alpha:Me=0})):vr>0&&(Q.start({type:"start",alpha:Me=vr}),se=eo(U.tick)),U):Me},U.start=function(){var vr,gn=Tr.length,bn=Er.length,In=me[0],Xn=me[1],Ci,Fi;for(vr=0;vr<gn;++vr)(Fi=Tr[vr]).index=vr,Fi.weight=0;for(vr=0;vr<bn;++vr)Fi=Er[vr],typeof Fi.source=="number"&&(Fi.source=Tr[Fi.source]),typeof Fi.target=="number"&&(Fi.target=Tr[Fi.target]),++Fi.source.weight,++Fi.target.weight;for(vr=0;vr<gn;++vr)Fi=Tr[vr],isNaN(Fi.x)&&(Fi.x=xa("x",In)),isNaN(Fi.y)&&(Fi.y=xa("y",Xn)),isNaN(Fi.px)&&(Fi.px=Fi.x),isNaN(Fi.py)&&(Fi.py=Fi.y);if(rr=[],typeof Pe=="function")for(vr=0;vr<bn;++vr)rr[vr]=+Pe.call(this,Er[vr],vr);else for(vr=0;vr<bn;++vr)rr[vr]=Pe;if(dr=[],typeof tt=="function")for(vr=0;vr<bn;++vr)dr[vr]=+tt.call(this,Er[vr],vr);else for(vr=0;vr<bn;++vr)dr[vr]=tt;if(wr=[],typeof Mt=="function")for(vr=0;vr<gn;++vr)wr[vr]=+Mt.call(this,Tr[vr],vr);else for(vr=0;vr<gn;++vr)wr[vr]=Mt;function xa(Gi,va){if(!Ci){for(Ci=new Array(gn),Ao=0;Ao<gn;++Ao)Ci[Ao]=[];for(Ao=0;Ao<bn;++Ao){var go=Er[Ao];Ci[go.source.index].push(go.target),Ci[go.target.index].push(go.source)}}for(var Po=Ci[vr],Ao=-1,Sn=Po.length,da;++Ao<Sn;)if(!isNaN(da=Po[Ao][Gi]))return da;return Math.random()*va}return U.resume()},U.resume=function(){return U.alpha(.1)},U.stop=function(){return U.alpha(0)},U.drag=function(){if(we||(we=e.behavior.drag().origin(O).on("dragstart.force",qf).on("drag.force",kr).on("dragend.force",Vs)),!arguments.length)return we;this.on("mouseover.force",Xc).on("mouseout.force",zf).call(we)};function kr(vr){vr.px=e.event.x,vr.py=e.event.y,U.resume()}return e.rebind(U,Q,"on")};function qf(U){U.fixed|=2}function Vs(U){U.fixed&=-7}function Xc(U){U.fixed|=4,U.px=U.x,U.py=U.y}function zf(U){U.fixed&=-5}function Dl(U,Q,se){var me=0,we=0;if(U.charge=0,!U.leaf)for(var Me=U.nodes,Ye=Me.length,Pe=-1,tt;++Pe<Ye;)tt=Me[Pe],tt!=null&&(Dl(tt,Q,se),U.charge+=tt.charge,me+=tt.charge*tt.cx,we+=tt.charge*tt.cy);if(U.point){U.leaf||(U.point.x+=Math.random()-.5,U.point.y+=Math.random()-.5);var Mt=Q*se[U.point.index];U.charge+=U.pointCharge=Mt,me+=Mt*U.point.x,we+=Mt*U.point.y}U.cx=me/U.charge,U.cy=we/U.charge}var zs=20,Gd=1,Yd=1/0;e.layout.hierarchy=function(){var U=jc,Q=Wd,se=Zc;function me(we){var Me=[we],Ye=[],Pe;for(we.depth=0;(Pe=Me.pop())!=null;)if(Ye.push(Pe),(Mt=Q.call(me,Pe,Pe.depth))&&(tt=Mt.length)){for(var tt,Mt,kt;--tt>=0;)Me.push(kt=Mt[tt]),kt.parent=Pe,kt.depth=Pe.depth+1;se&&(Pe.value=0),Pe.children=Mt}else se&&(Pe.value=+se.call(me,Pe,Pe.depth)||0),delete Pe.children;return nu(we,function(er){var $t,Tr;U&&($t=er.children)&&$t.sort(U),se&&(Tr=er.parent)&&(Tr.value+=er.value)}),Ye}return me.sort=function(we){return arguments.length?(U=we,me):U},me.children=function(we){return arguments.length?(Q=we,me):Q},me.value=function(we){return arguments.length?(se=we,me):se},me.revalue=function(we){return se&&(df(we,function(Me){Me.children&&(Me.value=0)}),nu(we,function(Me){var Ye;Me.children||(Me.value=+se.call(me,Me,Me.depth)||0),(Ye=Me.parent)&&(Ye.value+=Me.value)})),we},me};function Tu(U,Q){return e.rebind(U,Q,"sort","children","value"),U.nodes=U,U.links=Au,U}function df(U,Q){for(var se=[U];(U=se.pop())!=null;)if(Q(U),(we=U.children)&&(me=we.length))for(var me,we;--me>=0;)se.push(we[me])}function nu(U,Q){for(var se=[U],me=[];(U=se.pop())!=null;)if(me.push(U),(Ye=U.children)&&(Me=Ye.length))for(var we=-1,Me,Ye;++we<Me;)se.push(Ye[we]);for(;(U=me.pop())!=null;)Q(U)}function Wd(U){return U.children}function Zc(U){return U.value}function jc(U,Q){return Q.value-U.value}function Au(U){return e.merge(U.map(function(Q){return(Q.children||[]).map(function(se){return{source:Q,target:se}})}))}e.layout.partition=function(){var U=e.layout.hierarchy(),Q=[1,1];function se(Me,Ye,Pe,tt){var Mt=Me.children;if(Me.x=Ye,Me.y=Me.depth*tt,Me.dx=Pe,Me.dy=tt,Mt&&(er=Mt.length)){var kt=-1,er,$t,Tr;for(Pe=Me.value?Pe/Me.value:0;++kt<er;)se($t=Mt[kt],Ye,Tr=$t.value*Pe,tt),Ye+=Tr}}function me(Me){var Ye=Me.children,Pe=0;if(Ye&&(Mt=Ye.length))for(var tt=-1,Mt;++tt<Mt;)Pe=Math.max(Pe,me(Ye[tt]));return 1+Pe}function we(Me,Ye){var Pe=U.call(this,Me,Ye);return se(Pe[0],0,Q[0],Q[1]/me(Pe[0])),Pe}return we.size=function(Me){return arguments.length?(Q=Me,we):Q},Tu(we,U)},e.layout.pie=function(){var U=Number,Q=Nv,se=0,me=ce,we=0;function Me(Ye){var Pe=Ye.length,tt=Ye.map(function(Pr,kr){return+U.call(Me,Pr,kr)}),Mt=+(typeof se=="function"?se.apply(this,arguments):se),kt=(typeof me=="function"?me.apply(this,arguments):me)-Mt,er=Math.min(Math.abs(kt)/Pe,+(typeof we=="function"?we.apply(this,arguments):we)),$t=er*(kt<0?-1:1),Tr=e.sum(tt),Er=Tr?(kt-Pe*$t)/Tr:0,rr=e.range(Pe),dr=[],wr;return Q!=null&&rr.sort(Q===Nv?function(Pr,kr){return tt[kr]-tt[Pr]}:function(Pr,kr){return Q(Ye[Pr],Ye[kr])}),rr.forEach(function(Pr){dr[Pr]={data:Ye[Pr],value:wr=tt[Pr],startAngle:Mt,endAngle:Mt+=wr*Er+$t,padAngle:er}}),dr}return Me.value=function(Ye){return arguments.length?(U=Ye,Me):U},Me.sort=function(Ye){return arguments.length?(Q=Ye,Me):Q},Me.startAngle=function(Ye){return arguments.length?(se=Ye,Me):se},Me.endAngle=function(Ye){return arguments.length?(me=Ye,Me):me},Me.padAngle=function(Ye){return arguments.length?(we=Ye,Me):we},Me};var Nv={};e.layout.stack=function(){var U=O,Q=Ec,se=Lh,me=Uv,we=cv,Me=hv;function Ye(Pe,tt){if(!(Er=Pe.length))return Pe;var Mt=Pe.map(function(Pr,kr){return U.call(Ye,Pr,kr)}),kt=Mt.map(function(Pr){return Pr.map(function(kr,vr){return[we.call(Ye,kr,vr),Me.call(Ye,kr,vr)]})}),er=Q.call(Ye,kt,tt);Mt=e.permute(Mt,er),kt=e.permute(kt,er);var $t=se.call(Ye,kt,tt),Tr=Mt[0].length,Er,rr,dr,wr;for(dr=0;dr<Tr;++dr)for(me.call(Ye,Mt[0][dr],wr=$t[dr],kt[0][dr][1]),rr=1;rr<Er;++rr)me.call(Ye,Mt[rr][dr],wr+=kt[rr-1][dr][1],kt[rr][dr][1]);return Pe}return Ye.values=function(Pe){return arguments.length?(U=Pe,Ye):U},Ye.order=function(Pe){return arguments.length?(Q=typeof Pe=="function"?Pe:Kc.get(Pe)||Ec,Ye):Q},Ye.offset=function(Pe){return arguments.length?(se=typeof Pe=="function"?Pe:Of.get(Pe)||Lh,Ye):se},Ye.x=function(Pe){return arguments.length?(we=Pe,Ye):we},Ye.y=function(Pe){return arguments.length?(Me=Pe,Ye):Me},Ye.out=function(Pe){return arguments.length?(me=Pe,Ye):me},Ye};function cv(U){return U.x}function hv(U){return U.y}function Uv(U,Q,se){U.y0=Q,U.y=se}var Kc=e.map({"inside-out":function(U){var Q=U.length,se,me,we=U.map(wd),Me=U.map(Oo),Ye=e.range(Q).sort(function(er,$t){return we[er]-we[$t]}),Pe=0,tt=0,Mt=[],kt=[];for(se=0;se<Q;++se)me=Ye[se],Pe<tt?(Pe+=Me[me],Mt.push(me)):(tt+=Me[me],kt.push(me));return kt.reverse().concat(Mt)},reverse:function(U){return e.range(U.length).reverse()},default:Ec}),Of=e.map({silhouette:function(U){var Q=U.length,se=U[0].length,me=[],we=0,Me,Ye,Pe,tt=[];for(Ye=0;Ye<se;++Ye){for(Me=0,Pe=0;Me<Q;Me++)Pe+=U[Me][Ye][1];Pe>we&&(we=Pe),me.push(Pe)}for(Ye=0;Ye<se;++Ye)tt[Ye]=(we-me[Ye])/2;return tt},wiggle:function(U){var Q=U.length,se=U[0],me=se.length,we,Me,Ye,Pe,tt,Mt,kt,er,$t,Tr=[];for(Tr[0]=er=$t=0,Me=1;Me<me;++Me){for(we=0,Pe=0;we<Q;++we)Pe+=U[we][Me][1];for(we=0,tt=0,kt=se[Me][0]-se[Me-1][0];we<Q;++we){for(Ye=0,Mt=(U[we][Me][1]-U[we][Me-1][1])/(2*kt);Ye<we;++Ye)Mt+=(U[Ye][Me][1]-U[Ye][Me-1][1])/kt;tt+=Mt*U[we][Me][1]}Tr[Me]=er-=Pe?tt/Pe*kt:0,er<$t&&($t=er)}for(Me=0;Me<me;++Me)Tr[Me]-=$t;return Tr},expand:function(U){var Q=U.length,se=U[0].length,me=1/Q,we,Me,Ye,Pe=[];for(Me=0;Me<se;++Me){for(we=0,Ye=0;we<Q;we++)Ye+=U[we][Me][1];if(Ye)for(we=0;we<Q;we++)U[we][Me][1]/=Ye;else for(we=0;we<Q;we++)U[we][Me][1]=me}for(Me=0;Me<se;++Me)Pe[Me]=0;return Pe},zero:Lh});function Ec(U){return e.range(U.length)}function Lh(U){for(var Q=-1,se=U[0].length,me=[];++Q<se;)me[Q]=0;return me}function wd(U){for(var Q=1,se=0,me=U[0][1],we,Me=U.length;Q<Me;++Q)(we=U[Q][1])>me&&(se=Q,me=we);return se}function Oo(U){return U.reduce(Jc,0)}function Jc(U,Q){return U+Q[1]}e.layout.histogram=function(){var U=!0,Q=Number,se=Qc,me=kc;function we(Me,$t){for(var Pe=[],tt=Me.map(Q,this),Mt=se.call(this,tt,$t),kt=me.call(this,Mt,tt,$t),er,$t=-1,Tr=tt.length,Er=kt.length-1,rr=U?1:1/Tr,dr;++$t<Er;)er=Pe[$t]=[],er.dx=kt[$t+1]-(er.x=kt[$t]),er.y=0;if(Er>0)for($t=-1;++$t<Tr;)dr=tt[$t],dr>=Mt[0]&&dr<=Mt[1]&&(er=Pe[e.bisect(kt,dr,1,Er)-1],er.y+=rr,er.push(Me[$t]));return Pe}return we.value=function(Me){return arguments.length?(Q=Me,we):Q},we.range=function(Me){return arguments.length?(se=_r(Me),we):se},we.bins=function(Me){return arguments.length?(me=typeof Me=="number"?function(Ye){return Cc(Ye,Me)}:_r(Me),we):me},we.frequency=function(Me){return arguments.length?(U=!!Me,we):U},we};function kc(U,Q){return Cc(U,Math.ceil(Math.log(Q.length)/Math.LN2+1))}function Cc(U,Q){for(var se=-1,me=+U[0],we=(U[1]-me)/Q,Me=[];++se<=Q;)Me[se]=we*se+me;return Me}function Qc(U){return[e.min(U),e.max(U)]}e.layout.pack=function(){var U=e.layout.hierarchy().sort(pf),Q=0,se=[1,1],me;function we(Me,Ye){var Pe=U.call(this,Me,Ye),tt=Pe[0],Mt=se[0],kt=se[1],er=me==null?Math.sqrt:typeof me=="function"?me:function(){return me};if(tt.x=tt.y=0,nu(tt,function(Tr){Tr.r=+er(Tr.value)}),nu(tt,vv),Q){var $t=Q*(me?1:Math.max(2*tt.r/Mt,2*tt.r/kt))/2;nu(tt,function(Tr){Tr.r+=$t}),nu(tt,vv),nu(tt,function(Tr){Tr.r-=$t})}return Uf(tt,Mt/2,kt/2,me?1:1/Math.max(2*tt.r/Mt,2*tt.r/kt)),Pe}return we.size=function(Me){return arguments.length?(se=Me,we):se},we.radius=function(Me){return arguments.length?(me=Me==null||typeof Me=="function"?Me:+Me,we):me},we.padding=function(Me){return arguments.length?(Q=+Me,we):Q},Tu(we,U)};function pf(U,Q){return U.value-Q.value}function sc(U,Q){var se=U._pack_next;U._pack_next=Q,Q._pack_prev=U,Q._pack_next=se,se._pack_prev=Q}function Vv(U,Q){U._pack_next=Q,Q._pack_prev=U}function Hs(U,Q){var se=Q.x-U.x,me=Q.y-U.y,we=U.r+Q.r;return .999*we*we>se*se+me*me}function vv(U){if(!(Q=U.children)||!($t=Q.length))return;var Q,se=1/0,me=-1/0,we=1/0,Me=-1/0,Ye,Pe,tt,Mt,kt,er,$t;function Tr(vr){se=Math.min(vr.x-vr.r,se),me=Math.max(vr.x+vr.r,me),we=Math.min(vr.y-vr.r,we),Me=Math.max(vr.y+vr.r,Me)}if(Q.forEach(Bf),Ye=Q[0],Ye.x=-Ye.r,Ye.y=0,Tr(Ye),$t>1&&(Pe=Q[1],Pe.x=Pe.r,Pe.y=0,Tr(Pe),$t>2))for(tt=Q[2],_s(Ye,Pe,tt),Tr(tt),sc(Ye,tt),Ye._pack_prev=tt,sc(tt,Pe),Pe=Ye._pack_next,Mt=3;Mt<$t;Mt++){_s(Ye,Pe,tt=Q[Mt]);var Er=0,rr=1,dr=1;for(kt=Pe._pack_next;kt!==Pe;kt=kt._pack_next,rr++)if(Hs(kt,tt)){Er=1;break}if(Er==1)for(er=Ye._pack_prev;er!==kt._pack_prev&&!Hs(er,tt);er=er._pack_prev,dr++);Er?(rr<dr||rr==dr&&Pe.r<Ye.r?Vv(Ye,Pe=kt):Vv(Ye=er,Pe),Mt--):(sc(Ye,tt),Pe=tt,Tr(tt))}var wr=(se+me)/2,Pr=(we+Me)/2,kr=0;for(Mt=0;Mt<$t;Mt++)tt=Q[Mt],tt.x-=wr,tt.y-=Pr,kr=Math.max(kr,tt.r+Math.sqrt(tt.x*tt.x+tt.y*tt.y));U.r=kr,Q.forEach(Nf)}function Bf(U){U._pack_next=U._pack_prev=U}function Nf(U){delete U._pack_next,delete U._pack_prev}function Uf(U,Q,se,me){var we=U.children;if(U.x=Q+=me*U.x,U.y=se+=me*U.y,U.r*=me,we)for(var Me=-1,Ye=we.length;++Me<Ye;)Uf(we[Me],Q,se,me)}function _s(U,Q,se){var me=U.r+se.r,we=Q.x-U.x,Me=Q.y-U.y;if(me&&(we||Me)){var Ye=Q.r+se.r,Pe=we*we+Me*Me;Ye*=Ye,me*=me;var tt=.5+(me-Ye)/(2*Pe),Mt=Math.sqrt(Math.max(0,2*Ye*(me+Pe)-(me-=Pe)*me-Ye*Ye))/(2*Pe);se.x=U.x+tt*we+Mt*Me,se.y=U.y+tt*Me-Mt*we}else se.x=U.x+me,se.y=U.y}e.layout.tree=function(){var U=e.layout.hierarchy().sort(null).value(null),Q=pl,se=[1,1],me=null;function we(kt,er){var $t=U.call(this,kt,er),Tr=$t[0],Er=Me(Tr);if(nu(Er,Ye),Er.parent.m=-Er.z,df(Er,Pe),me)df(Tr,Mt);else{var rr=Tr,dr=Tr,wr=Tr;df(Tr,function(gn){gn.x<rr.x&&(rr=gn),gn.x>dr.x&&(dr=gn),gn.depth>wr.depth&&(wr=gn)});var Pr=Q(rr,dr)/2-rr.x,kr=se[0]/(dr.x+Q(dr,rr)/2+Pr),vr=se[1]/(wr.depth||1);df(Tr,function(gn){gn.x=(gn.x+Pr)*kr,gn.y=gn.depth*vr})}return $t}function Me(kt){for(var er={A:null,children:[kt]},$t=[er],Tr;(Tr=$t.pop())!=null;)for(var Er=Tr.children,rr,dr=0,wr=Er.length;dr<wr;++dr)$t.push((Er[dr]=rr={_:Er[dr],parent:Tr,children:(rr=Er[dr].children)&&rr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:dr}).a=rr);return er.children[0]}function Ye(kt){var er=kt.children,$t=kt.parent.children,Tr=kt.i?$t[kt.i-1]:null;if(er.length){Ph(kt);var Er=(er[0].z+er[er.length-1].z)/2;Tr?(kt.z=Tr.z+Q(kt._,Tr._),kt.m=kt.z-Er):kt.z=Er}else Tr&&(kt.z=Tr.z+Q(kt._,Tr._));kt.parent.A=tt(kt,Tr,kt.parent.A||$t[0])}function Pe(kt){kt._.x=kt.z+kt.parent.m,kt.m+=kt.parent.m}function tt(kt,er,$t){if(er){for(var Tr=kt,Er=kt,rr=er,dr=Tr.parent.children[0],wr=Tr.m,Pr=Er.m,kr=rr.m,vr=dr.m,gn;rr=Vf(rr),Tr=Hu(Tr),rr&&Tr;)dr=Hu(dr),Er=Vf(Er),Er.a=kt,gn=rr.z+kr-Tr.z-wr+Q(rr._,Tr._),gn>0&&(Gu(Ve(rr,kt,$t),kt,gn),wr+=gn,Pr+=gn),kr+=rr.m,wr+=Tr.m,vr+=dr.m,Pr+=Er.m;rr&&!Vf(Er)&&(Er.t=rr,Er.m+=kr-Pr),Tr&&!Hu(dr)&&(dr.t=Tr,dr.m+=wr-vr,$t=kt)}return $t}function Mt(kt){kt.x*=se[0],kt.y=kt.depth*se[1]}return we.separation=function(kt){return arguments.length?(Q=kt,we):Q},we.size=function(kt){return arguments.length?(me=(se=kt)==null?Mt:null,we):me?null:se},we.nodeSize=function(kt){return arguments.length?(me=(se=kt)==null?null:Mt,we):me?se:null},Tu(we,U)};function pl(U,Q){return U.parent==Q.parent?1:2}function Hu(U){var Q=U.children;return Q.length?Q[0]:U.t}function Vf(U){var Q=U.children,se;return(se=Q.length)?Q[se-1]:U.t}function Gu(U,Q,se){var me=se/(Q.i-U.i);Q.c-=me,Q.s+=se,U.c+=me,Q.z+=se,Q.m+=se}function Ph(U){for(var Q=0,se=0,me=U.children,we=me.length,Me;--we>=0;)Me=me[we],Me.z+=Q,Me.m+=Q,Q+=Me.s+(se+=Me.c)}function Ve(U,Q,se){return U.a.parent===Q.parent?U.a:se}e.layout.cluster=function(){var U=e.layout.hierarchy().sort(null).value(null),Q=pl,se=[1,1],me=!1;function we(Me,Ye){var Pe=U.call(this,Me,Ye),tt=Pe[0],Mt,kt=0;nu(tt,function(rr){var dr=rr.children;dr&&dr.length?(rr.x=Ht(dr),rr.y=it(dr)):(rr.x=Mt?kt+=Q(rr,Mt):0,rr.y=0,Mt=rr)});var er=Rt(tt),$t=lr(tt),Tr=er.x-Q(er,$t)/2,Er=$t.x+Q($t,er)/2;return nu(tt,me?function(rr){rr.x=(rr.x-tt.x)*se[0],rr.y=(tt.y-rr.y)*se[1]}:function(rr){rr.x=(rr.x-Tr)/(Er-Tr)*se[0],rr.y=(1-(tt.y?rr.y/tt.y:1))*se[1]}),Pe}return we.separation=function(Me){return arguments.length?(Q=Me,we):Q},we.size=function(Me){return arguments.length?(me=(se=Me)==null,we):me?null:se},we.nodeSize=function(Me){return arguments.length?(me=(se=Me)!=null,we):me?se:null},Tu(we,U)};function it(U){return 1+e.max(U,function(Q){return Q.y})}function Ht(U){return U.reduce(function(Q,se){return Q+se.x},0)/U.length}function Rt(U){var Q=U.children;return Q&&Q.length?Rt(Q[0]):U}function lr(U){var Q=U.children,se;return Q&&(se=Q.length)?lr(Q[se-1]):U}e.layout.treemap=function(){var U=e.layout.hierarchy(),Q=Math.round,se=[1,1],me=null,we=Lr,Me=!1,Ye,Pe="squarify",tt=.5*(1+Math.sqrt(5));function Mt(rr,dr){for(var wr=-1,Pr=rr.length,kr,vr;++wr<Pr;)vr=(kr=rr[wr]).value*(dr<0?0:dr),kr.area=isNaN(vr)||vr<=0?0:vr}function kt(rr){var dr=rr.children;if(dr&&dr.length){var wr=we(rr),Pr=[],kr=dr.slice(),vr,gn=1/0,bn,In=Pe==="slice"?wr.dx:Pe==="dice"?wr.dy:Pe==="slice-dice"?rr.depth&1?wr.dy:wr.dx:Math.min(wr.dx,wr.dy),Xn;for(Mt(kr,wr.dx*wr.dy/rr.value),Pr.area=0;(Xn=kr.length)>0;)Pr.push(vr=kr[Xn-1]),Pr.area+=vr.area,Pe!=="squarify"||(bn=$t(Pr,In))<=gn?(kr.pop(),gn=bn):(Pr.area-=Pr.pop().area,Tr(Pr,In,wr,!1),In=Math.min(wr.dx,wr.dy),Pr.length=Pr.area=0,gn=1/0);Pr.length&&(Tr(Pr,In,wr,!0),Pr.length=Pr.area=0),dr.forEach(kt)}}function er(rr){var dr=rr.children;if(dr&&dr.length){var wr=we(rr),Pr=dr.slice(),kr,vr=[];for(Mt(Pr,wr.dx*wr.dy/rr.value),vr.area=0;kr=Pr.pop();)vr.push(kr),vr.area+=kr.area,kr.z!=null&&(Tr(vr,kr.z?wr.dx:wr.dy,wr,!Pr.length),vr.length=vr.area=0);dr.forEach(er)}}function $t(rr,dr){for(var wr=rr.area,Pr,kr=0,vr=1/0,gn=-1,bn=rr.length;++gn<bn;)(Pr=rr[gn].area)&&(Pr<vr&&(vr=Pr),Pr>kr&&(kr=Pr));return wr*=wr,dr*=dr,wr?Math.max(dr*kr*tt/wr,wr/(dr*vr*tt)):1/0}function Tr(rr,dr,wr,Pr){var kr=-1,vr=rr.length,gn=wr.x,bn=wr.y,In=dr?Q(rr.area/dr):0,Xn;if(dr==wr.dx){for((Pr||In>wr.dy)&&(In=wr.dy);++kr<vr;)Xn=rr[kr],Xn.x=gn,Xn.y=bn,Xn.dy=In,gn+=Xn.dx=Math.min(wr.x+wr.dx-gn,In?Q(Xn.area/In):0);Xn.z=!0,Xn.dx+=wr.x+wr.dx-gn,wr.y+=In,wr.dy-=In}else{for((Pr||In>wr.dx)&&(In=wr.dx);++kr<vr;)Xn=rr[kr],Xn.x=gn,Xn.y=bn,Xn.dx=In,bn+=Xn.dy=Math.min(wr.y+wr.dy-bn,In?Q(Xn.area/In):0);Xn.z=!1,Xn.dy+=wr.y+wr.dy-bn,wr.x+=In,wr.dx-=In}}function Er(rr){var dr=Ye||U(rr),wr=dr[0];return wr.x=wr.y=0,wr.value?(wr.dx=se[0],wr.dy=se[1]):wr.dx=wr.dy=0,Ye&&U.revalue(wr),Mt([wr],wr.dx*wr.dy/wr.value),(Ye?er:kt)(wr),Me&&(Ye=dr),dr}return Er.size=function(rr){return arguments.length?(se=rr,Er):se},Er.padding=function(rr){if(!arguments.length)return me;function dr(kr){var vr=rr.call(Er,kr,kr.depth);return vr==null?Lr(kr):Fr(kr,typeof vr=="number"?[vr,vr,vr,vr]:vr)}function wr(kr){return Fr(kr,rr)}var Pr;return we=(me=rr)==null?Lr:(Pr=typeof rr)=="function"?dr:(Pr==="number"&&(rr=[rr,rr,rr,rr]),wr),Er},Er.round=function(rr){return arguments.length?(Q=rr?Math.round:Number,Er):Q!=Number},Er.sticky=function(rr){return arguments.length?(Me=rr,Ye=null,Er):Me},Er.ratio=function(rr){return arguments.length?(tt=rr,Er):tt},Er.mode=function(rr){return arguments.length?(Pe=rr+"",Er):Pe},Tu(Er,U)};function Lr(U){return{x:U.x,y:U.y,dx:U.dx,dy:U.dy}}function Fr(U,Q){var se=U.x+Q[3],me=U.y+Q[0],we=U.dx-Q[1]-Q[3],Me=U.dy-Q[0]-Q[2];return we<0&&(se+=we/2,we=0),Me<0&&(me+=Me/2,Me=0),{x:se,y:me,dx:we,dy:Me}}e.random={normal:function(U,Q){var se=arguments.length;return se<2&&(Q=1),se<1&&(U=0),function(){var me,we,Me;do me=Math.random()*2-1,we=Math.random()*2-1,Me=me*me+we*we;while(!Me||Me>1);return U+Q*me*Math.sqrt(-2*Math.log(Me)/Me)}},logNormal:function(){var U=e.random.normal.apply(e,arguments);return function(){return Math.exp(U())}},bates:function(U){var Q=e.random.irwinHall(U);return function(){return Q()/U}},irwinHall:function(U){return function(){for(var Q=0,se=0;se<U;se++)Q+=Math.random();return Q}}},e.scale={};function Zr(U){var Q=U[0],se=U[U.length-1];return Q<se?[Q,se]:[se,Q]}function nn(U){return U.rangeExtent?U.rangeExtent():Zr(U.range())}function An(U,Q,se,me){var we=se(U[0],U[1]),Me=me(Q[0],Q[1]);return function(Ye){return Me(we(Ye))}}function Br(U,Q){var se=0,me=U.length-1,we=U[se],Me=U[me],Ye;return Me<we&&(Ye=se,se=me,me=Ye,Ye=we,we=Me,Me=Ye),U[se]=Q.floor(we),U[me]=Q.ceil(Me),U}function tn(U){return U?{floor:function(Q){return Math.floor(Q/U)*U},ceil:function(Q){return Math.ceil(Q/U)*U}}:rn}var rn={floor:O,ceil:O};function wn(U,Q,se,me){var we=[],Me=[],Ye=0,Pe=Math.min(U.length,Q.length)-1;for(U[Pe]<U[0]&&(U=U.slice().reverse(),Q=Q.slice().reverse());++Ye<=Pe;)we.push(se(U[Ye-1],U[Ye])),Me.push(me(Q[Ye-1],Q[Ye]));return function(tt){var Mt=e.bisect(U,tt,1,Pe)-1;return Me[Mt](we[Mt](tt))}}e.scale.linear=function(){return Gn([0,1],[0,1],qs,!1)};function Gn(U,Q,se,me){var we,Me;function Ye(){var tt=Math.min(U.length,Q.length)>2?wn:An,Mt=me?tu:Bv;return we=tt(U,Q,Mt,se),Me=tt(Q,U,Mt,qs),Pe}function Pe(tt){return we(tt)}return Pe.invert=function(tt){return Me(tt)},Pe.domain=function(tt){return arguments.length?(U=tt.map(Number),Ye()):U},Pe.range=function(tt){return arguments.length?(Q=tt,Ye()):Q},Pe.rangeRound=function(tt){return Pe.range(tt).interpolate(If)},Pe.clamp=function(tt){return arguments.length?(me=tt,Ye()):me},Pe.interpolate=function(tt){return arguments.length?(se=tt,Ye()):se},Pe.ticks=function(tt){return Ki(U,tt)},Pe.tickFormat=function(tt,Mt){return d3_scale_linearTickFormat(U,tt,Mt)},Pe.nice=function(tt){return Ii(U,tt),Ye()},Pe.copy=function(){return Gn(U,Q,se,me)},Ye()}function Oi(U,Q){return e.rebind(U,Q,"range","rangeRound","interpolate","clamp")}function Ii(U,Q){return Br(U,tn(Hi(U,Q)[2])),Br(U,tn(Hi(U,Q)[2])),U}function Hi(U,Q){Q==null&&(Q=10);var se=Zr(U),me=se[1]-se[0],we=Math.pow(10,Math.floor(Math.log(me/Q)/Math.LN10)),Me=Q/me*we;return Me<=.15?we*=10:Me<=.35?we*=5:Me<=.75&&(we*=2),se[0]=Math.ceil(se[0]/we)*we,se[1]=Math.floor(se[1]/we)*we+we*.5,se[2]=we,se}function Ki(U,Q){return e.range.apply(e,Hi(U,Q))}var On={s:1,g:1,p:1,r:1,e:1};function $n(U){return-Math.floor(Math.log(U)/Math.LN10+.01)}function Ji(U,Q){var se=$n(Q[2]);return U in On?Math.abs(se-$n(Math.max(g(Q[0]),g(Q[1]))))+ +(U!=="e"):se-(U==="%")*2}e.scale.log=function(){return ca(e.scale.linear().domain([0,1]),10,!0,[1,10])};function ca(U,Q,se,me){function we(Pe){return(se?Math.log(Pe<0?0:Pe):-Math.log(Pe>0?0:-Pe))/Math.log(Q)}function Me(Pe){return se?Math.pow(Q,Pe):-Math.pow(Q,-Pe)}function Ye(Pe){return U(we(Pe))}return Ye.invert=function(Pe){return Me(U.invert(Pe))},Ye.domain=function(Pe){return arguments.length?(se=Pe[0]>=0,U.domain((me=Pe.map(Number)).map(we)),Ye):me},Ye.base=function(Pe){return arguments.length?(Q=+Pe,U.domain(me.map(we)),Ye):Q},Ye.nice=function(){var Pe=Br(me.map(we),se?Math:Ka);return U.domain(Pe),me=Pe.map(Me),Ye},Ye.ticks=function(){var Pe=Zr(me),tt=[],Mt=Pe[0],kt=Pe[1],er=Math.floor(we(Mt)),$t=Math.ceil(we(kt)),Tr=Q%1?2:Q;if(isFinite($t-er)){if(se){for(;er<$t;er++)for(var Er=1;Er<Tr;Er++)tt.push(Me(er)*Er);tt.push(Me(er))}else for(tt.push(Me(er));er++<$t;)for(var Er=Tr-1;Er>0;Er--)tt.push(Me(er)*Er);for(er=0;tt[er]<Mt;er++);for($t=tt.length;tt[$t-1]>kt;$t--);tt=tt.slice(er,$t)}return tt},Ye.copy=function(){return ca(U.copy(),Q,se,me)},Oi(Ye,U)}var Ka={floor:function(U){return-Math.ceil(-U)},ceil:function(U){return-Math.floor(-U)}};e.scale.pow=function(){return mo(e.scale.linear(),1,[0,1])};function mo(U,Q,se){var me=vo(Q),we=vo(1/Q);function Me(Ye){return U(me(Ye))}return Me.invert=function(Ye){return we(U.invert(Ye))},Me.domain=function(Ye){return arguments.length?(U.domain((se=Ye.map(Number)).map(me)),Me):se},Me.ticks=function(Ye){return Ki(se,Ye)},Me.tickFormat=function(Ye,Pe){return d3_scale_linearTickFormat(se,Ye,Pe)},Me.nice=function(Ye){return Me.domain(Ii(se,Ye))},Me.exponent=function(Ye){return arguments.length?(me=vo(Q=Ye),we=vo(1/Q),U.domain(se.map(me)),Me):Q},Me.copy=function(){return mo(U.copy(),Q,se)},Oi(Me,U)}function vo(U){return function(Q){return Q<0?-Math.pow(-Q,U):Math.pow(Q,U)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return xo([],{t:"range",a:[[]]})};function xo(U,Q){var se,me,we;function Me(Pe){return me[((se.get(Pe)||(Q.t==="range"?se.set(Pe,U.push(Pe)):NaN))-1)%me.length]}function Ye(Pe,tt){return e.range(U.length).map(function(Mt){return Pe+tt*Mt})}return Me.domain=function(Pe){if(!arguments.length)return U;U=[],se=new w;for(var tt=-1,Mt=Pe.length,kt;++tt<Mt;)se.has(kt=Pe[tt])||se.set(kt,U.push(kt));return Me[Q.t].apply(Me,Q.a)},Me.range=function(Pe){return arguments.length?(me=Pe,we=0,Q={t:"range",a:arguments},Me):me},Me.rangePoints=function(Pe,tt){arguments.length<2&&(tt=0);var Mt=Pe[0],kt=Pe[1],er=U.length<2?(Mt=(Mt+kt)/2,0):(kt-Mt)/(U.length-1+tt);return me=Ye(Mt+er*tt/2,er),we=0,Q={t:"rangePoints",a:arguments},Me},Me.rangeRoundPoints=function(Pe,tt){arguments.length<2&&(tt=0);var Mt=Pe[0],kt=Pe[1],er=U.length<2?(Mt=kt=Math.round((Mt+kt)/2),0):(kt-Mt)/(U.length-1+tt)|0;return me=Ye(Mt+Math.round(er*tt/2+(kt-Mt-(U.length-1+tt)*er)/2),er),we=0,Q={t:"rangeRoundPoints",a:arguments},Me},Me.rangeBands=function(Pe,tt,Mt){arguments.length<2&&(tt=0),arguments.length<3&&(Mt=tt);var kt=Pe[1]<Pe[0],er=Pe[kt-0],$t=Pe[1-kt],Tr=($t-er)/(U.length-tt+2*Mt);return me=Ye(er+Tr*Mt,Tr),kt&&me.reverse(),we=Tr*(1-tt),Q={t:"rangeBands",a:arguments},Me},Me.rangeRoundBands=function(Pe,tt,Mt){arguments.length<2&&(tt=0),arguments.length<3&&(Mt=tt);var kt=Pe[1]<Pe[0],er=Pe[kt-0],$t=Pe[1-kt],Tr=Math.floor(($t-er)/(U.length-tt+2*Mt));return me=Ye(er+Math.round(($t-er-(U.length-tt)*Tr)/2),Tr),kt&&me.reverse(),we=Math.round(Tr*(1-tt)),Q={t:"rangeRoundBands",a:arguments},Me},Me.rangeBand=function(){return we},Me.rangeExtent=function(){return Zr(Q.a[0])},Me.copy=function(){return xo(U,Q)},Me.domain(U)}e.scale.category10=function(){return e.scale.ordinal().range(Na)},e.scale.category20=function(){return e.scale.ordinal().range(bs)},e.scale.category20b=function(){return e.scale.ordinal().range(Zo)},e.scale.category20c=function(){return e.scale.ordinal().range(Bo)};var Na=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ra),bs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ra),Zo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ra),Bo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ra);e.scale.quantile=function(){return hi([],[])};function hi(U,Q){var se;function me(){var Me=0,Ye=Q.length;for(se=[];++Me<Ye;)se[Me-1]=e.quantile(U,Me/Ye);return we}function we(Me){if(!isNaN(Me=+Me))return Q[e.bisect(se,Me)]}return we.domain=function(Me){return arguments.length?(U=Me.map(h).filter(v).sort(c),me()):U},we.range=function(Me){return arguments.length?(Q=Me,me()):Q},we.quantiles=function(){return se},we.invertExtent=function(Me){return Me=Q.indexOf(Me),Me<0?[NaN,NaN]:[Me>0?se[Me-1]:U[0],Me<se.length?se[Me]:U[U.length-1]]},we.copy=function(){return hi(U,Q)},me()}e.scale.quantize=function(){return ta(0,1,[0,1])};function ta(U,Q,se){var me,we;function Me(Pe){return se[Math.max(0,Math.min(we,Math.floor(me*(Pe-U))))]}function Ye(){return me=se.length/(Q-U),we=se.length-1,Me}return Me.domain=function(Pe){return arguments.length?(U=+Pe[0],Q=+Pe[Pe.length-1],Ye()):[U,Q]},Me.range=function(Pe){return arguments.length?(se=Pe,Ye()):se},Me.invertExtent=function(Pe){return Pe=se.indexOf(Pe),Pe=Pe<0?NaN:Pe/me+U,[Pe,Pe+1/me]},Me.copy=function(){return ta(U,Q,se)},Ye()}e.scale.threshold=function(){return ws([.5],[0,1])};function ws(U,Q){function se(me){if(me<=me)return Q[e.bisect(U,me)]}return se.domain=function(me){return arguments.length?(U=me,se):U},se.range=function(me){return arguments.length?(Q=me,se):Q},se.invertExtent=function(me){return me=Q.indexOf(me),[U[me-1],U[me]]},se.copy=function(){return ws(U,Q)},se}e.scale.identity=function(){return Ml([0,1])};function Ml(U){function Q(se){return+se}return Q.invert=Q,Q.domain=Q.range=function(se){return arguments.length?(U=se.map(Q),Q):U},Q.ticks=function(se){return Ki(U,se)},Q.tickFormat=function(se,me){return d3_scale_linearTickFormat(U,se,me)},Q.copy=function(){return Ml(U)},Q}e.svg={};function Yl(){return 0}e.svg.arc=function(){var U=Yu,Q=Hf,se=Yl,me=iu,we=au,Me=Lc,Ye=Pc;function Pe(){var Mt=Math.max(0,+U.apply(this,arguments)),kt=Math.max(0,+Q.apply(this,arguments)),er=we.apply(this,arguments)-qe,$t=Me.apply(this,arguments)-qe,Tr=Math.abs($t-er),Er=er>$t?0:1;if(kt<Mt&&(rr=kt,kt=Mt,Mt=rr),Tr>=ge)return tt(kt,Er)+(Mt?tt(Mt,1-Er):"")+"Z";var rr,dr,wr,Pr,kr=0,vr=0,gn,bn,In,Xn,Ci,Fi,xa,Gi,va=[];if((Pr=(+Ye.apply(this,arguments)||0)/2)&&(wr=me===iu?Math.sqrt(Mt*Mt+kt*kt):+me.apply(this,arguments),Er||(vr*=-1),kt&&(vr=Or(wr/kt*Math.sin(Pr))),Mt&&(kr=Or(wr/Mt*Math.sin(Pr)))),kt){gn=kt*Math.cos(er+vr),bn=kt*Math.sin(er+vr),In=kt*Math.cos($t-vr),Xn=kt*Math.sin($t-vr);var go=Math.abs($t-er-2*vr)<=xe?0:1;if(vr&&lc(gn,bn,In,Xn)===Er^go){var Po=(er+$t)/2;gn=kt*Math.cos(Po),bn=kt*Math.sin(Po),In=Xn=null}}else gn=bn=0;if(Mt){Ci=Mt*Math.cos($t-kr),Fi=Mt*Math.sin($t-kr),xa=Mt*Math.cos(er+kr),Gi=Mt*Math.sin(er+kr);var Ao=Math.abs(er-$t+2*kr)<=xe?0:1;if(kr&&lc(Ci,Fi,xa,Gi)===1-Er^Ao){var Sn=(er+$t)/2;Ci=Mt*Math.cos(Sn),Fi=Mt*Math.sin(Sn),xa=Gi=null}}else Ci=Fi=0;if(Tr>At&&(rr=Math.min(Math.abs(kt-Mt)/2,+se.apply(this,arguments)))>.001){dr=Mt<kt^Er?0:1;var da=rr,Sa=rr;if(Tr<xe){var La=xa==null?[Ci,Fi]:In==null?[gn,bn]:cs([gn,bn],[xa,Gi],[In,Xn],[Ci,Fi]),Ts=gn-La[0],Gs=bn-La[1],yl=In-La[0],ls=Xn-La[1],Wl=1/Math.sin(Math.acos((Ts*yl+Gs*ls)/(Math.sqrt(Ts*Ts+Gs*Gs)*Math.sqrt(yl*yl+ls*ls)))/2),We=Math.sqrt(La[0]*La[0]+La[1]*La[1]);Sa=Math.min(rr,(Mt-We)/(Wl-1)),da=Math.min(rr,(kt-We)/(Wl+1))}if(In!=null){var Gt=Rh(xa==null?[Ci,Fi]:[xa,Gi],[gn,bn],kt,da,Er),or=Rh([In,Xn],[Ci,Fi],kt,da,Er);rr===da?va.push("M",Gt[0],"A",da,",",da," 0 0,",dr," ",Gt[1],"A",kt,",",kt," 0 ",1-Er^lc(Gt[1][0],Gt[1][1],or[1][0],or[1][1]),",",Er," ",or[1],"A",da,",",da," 0 0,",dr," ",or[0]):va.push("M",Gt[0],"A",da,",",da," 0 1,",dr," ",or[0])}else va.push("M",gn,",",bn);if(xa!=null){var qr=Rh([gn,bn],[xa,Gi],Mt,-Sa,Er),$r=Rh([Ci,Fi],In==null?[gn,bn]:[In,Xn],Mt,-Sa,Er);rr===Sa?va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",dr," ",$r[1],"A",Mt,",",Mt," 0 ",Er^lc($r[1][0],$r[1][1],qr[1][0],qr[1][1]),",",1-Er," ",qr[1],"A",Sa,",",Sa," 0 0,",dr," ",qr[0]):va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",dr," ",qr[0])}else va.push("L",Ci,",",Fi)}else va.push("M",gn,",",bn),In!=null&&va.push("A",kt,",",kt," 0 ",go,",",Er," ",In,",",Xn),va.push("L",Ci,",",Fi),xa!=null&&va.push("A",Mt,",",Mt," 0 ",Ao,",",1-Er," ",xa,",",Gi);return va.push("Z"),va.join("")}function tt(Mt,kt){return"M0,"+Mt+"A"+Mt+","+Mt+" 0 1,"+kt+" 0,"+-Mt+"A"+Mt+","+Mt+" 0 1,"+kt+" 0,"+Mt}return Pe.innerRadius=function(Mt){return arguments.length?(U=_r(Mt),Pe):U},Pe.outerRadius=function(Mt){return arguments.length?(Q=_r(Mt),Pe):Q},Pe.cornerRadius=function(Mt){return arguments.length?(se=_r(Mt),Pe):se},Pe.padRadius=function(Mt){return arguments.length?(me=Mt==iu?iu:_r(Mt),Pe):me},Pe.startAngle=function(Mt){return arguments.length?(we=_r(Mt),Pe):we},Pe.endAngle=function(Mt){return arguments.length?(Me=_r(Mt),Pe):Me},Pe.padAngle=function(Mt){return arguments.length?(Ye=_r(Mt),Pe):Ye},Pe.centroid=function(){var Mt=(+U.apply(this,arguments)+ +Q.apply(this,arguments))/2,kt=(+we.apply(this,arguments)+ +Me.apply(this,arguments))/2-qe;return[Math.cos(kt)*Mt,Math.sin(kt)*Mt]},Pe};var iu="auto";function Yu(U){return U.innerRadius}function Hf(U){return U.outerRadius}function au(U){return U.startAngle}function Lc(U){return U.endAngle}function Pc(U){return U&&U.padAngle}function lc(U,Q,se,me){return(U-se)*Q-(Q-me)*U>0?0:1}function Rh(U,Q,se,me,we){var Me=U[0]-Q[0],Ye=U[1]-Q[1],Pe=(we?me:-me)/Math.sqrt(Me*Me+Ye*Ye),tt=Pe*Ye,Mt=-Pe*Me,kt=U[0]+tt,er=U[1]+Mt,$t=Q[0]+tt,Tr=Q[1]+Mt,Er=(kt+$t)/2,rr=(er+Tr)/2,dr=$t-kt,wr=Tr-er,Pr=dr*dr+wr*wr,kr=se-me,vr=kt*Tr-$t*er,gn=(wr<0?-1:1)*Math.sqrt(Math.max(0,kr*kr*Pr-vr*vr)),bn=(vr*wr-dr*gn)/Pr,In=(-vr*dr-wr*gn)/Pr,Xn=(vr*wr+dr*gn)/Pr,Ci=(-vr*dr+wr*gn)/Pr,Fi=bn-Er,xa=In-rr,Gi=Xn-Er,va=Ci-rr;return Fi*Fi+xa*xa>Gi*Gi+va*va&&(bn=Xn,In=Ci),[[bn-tt,In-Mt],[bn*se/kr,In*se/kr]]}function $c(){return!0}function uc(U){var Q=Xo,se=Uo,me=$c,we=Wu,Me=we.key,Ye=.7;function Pe(tt){var Mt=[],kt=[],er=-1,$t=tt.length,Tr,Er=_r(Q),rr=_r(se);function dr(){Mt.push("M",we(U(kt),Ye))}for(;++er<$t;)me.call(this,Tr=tt[er],er)?kt.push([+Er.call(this,Tr,er),+rr.call(this,Tr,er)]):kt.length&&(dr(),kt=[]);return kt.length&&dr(),Mt.length?Mt.join(""):null}return Pe.x=function(tt){return arguments.length?(Q=tt,Pe):Q},Pe.y=function(tt){return arguments.length?(se=tt,Pe):se},Pe.defined=function(tt){return arguments.length?(me=tt,Pe):me},Pe.interpolate=function(tt){return arguments.length?(typeof tt=="function"?Me=we=tt:Me=(we=gf.get(tt)||Wu).key,Pe):Me},Pe.tension=function(tt){return arguments.length?(Ye=tt,Pe):Ye},Pe}e.svg.line=function(){return uc(O)};var gf=e.map({linear:Wu,"linear-closed":Dh,step:Hv,"step-before":Ih,"step-after":Gv,basis:Gf,"basis-open":Fh,"basis-closed":Yv,bundle:qh,cardinal:eh,"cardinal-open":Rc,"cardinal-closed":Mu,monotone:Ft});gf.forEach(function(U,Q){Q.key=U,Q.closed=/-closed$/.test(U)});function Wu(U){return U.length>1?U.join("L"):U+"Z"}function Dh(U){return U.join("L")+"Z"}function Hv(U){for(var Q=0,se=U.length,me=U[0],we=[me[0],",",me[1]];++Q<se;)we.push("H",(me[0]+(me=U[Q])[0])/2,"V",me[1]);return se>1&&we.push("H",me[0]),we.join("")}function Ih(U){for(var Q=0,se=U.length,me=U[0],we=[me[0],",",me[1]];++Q<se;)we.push("V",(me=U[Q])[1],"H",me[0]);return we.join("")}function Gv(U){for(var Q=0,se=U.length,me=U[0],we=[me[0],",",me[1]];++Q<se;)we.push("H",(me=U[Q])[0],"V",me[1]);return we.join("")}function Rc(U,Q){return U.length<4?Wu(U):U[1]+th(U.slice(1,-1),rh(U,Q))}function Mu(U,Q){return U.length<3?Dh(U):U[0]+th((U.push(U[0]),U),rh([U[U.length-2]].concat(U,[U[1]]),Q))}function eh(U,Q){return U.length<3?Wu(U):U[0]+th(U,rh(U,Q))}function th(U,Q){if(Q.length<1||U.length!=Q.length&&U.length!=Q.length+2)return Wu(U);var se=U.length!=Q.length,me="",we=U[0],Me=U[1],Ye=Q[0],Pe=Ye,tt=1;if(se&&(me+="Q"+(Me[0]-Ye[0]*2/3)+","+(Me[1]-Ye[1]*2/3)+","+Me[0]+","+Me[1],we=U[1],tt=2),Q.length>1){Pe=Q[1],Me=U[tt],tt++,me+="C"+(we[0]+Ye[0])+","+(we[1]+Ye[1])+","+(Me[0]-Pe[0])+","+(Me[1]-Pe[1])+","+Me[0]+","+Me[1];for(var Mt=2;Mt<Q.length;Mt++,tt++)Me=U[tt],Pe=Q[Mt],me+="S"+(Me[0]-Pe[0])+","+(Me[1]-Pe[1])+","+Me[0]+","+Me[1]}if(se){var kt=U[tt];me+="Q"+(Me[0]+Pe[0]*2/3)+","+(Me[1]+Pe[1]*2/3)+","+kt[0]+","+kt[1]}return me}function rh(U,Q){for(var se=[],me=(1-Q)/2,we,Me=U[0],Ye=U[1],Pe=1,tt=U.length;++Pe<tt;)we=Me,Me=Ye,Ye=U[Pe],se.push([me*(Ye[0]-we[0]),me*(Ye[1]-we[1])]);return se}function Gf(U){if(U.length<3)return Wu(U);var Q=1,se=U.length,me=U[0],we=me[0],Me=me[1],Ye=[we,we,we,(me=U[1])[0]],Pe=[Me,Me,Me,me[1]],tt=[we,",",Me,"L",ou(Ce,Ye),",",ou(Ce,Pe)];for(U.push(U[se-1]);++Q<=se;)me=U[Q],Ye.shift(),Ye.push(me[0]),Pe.shift(),Pe.push(me[1]),De(tt,Ye,Pe);return U.pop(),tt.push("L",me),tt.join("")}function Fh(U){if(U.length<4)return Wu(U);for(var Q=[],se=-1,me=U.length,we,Me=[0],Ye=[0];++se<3;)we=U[se],Me.push(we[0]),Ye.push(we[1]);for(Q.push(ou(Ce,Me)+","+ou(Ce,Ye)),--se;++se<me;)we=U[se],Me.shift(),Me.push(we[0]),Ye.shift(),Ye.push(we[1]),De(Q,Me,Ye);return Q.join("")}function Yv(U){for(var Q,se=-1,me=U.length,we=me+4,Me,Ye=[],Pe=[];++se<4;)Me=U[se%me],Ye.push(Me[0]),Pe.push(Me[1]);for(Q=[ou(Ce,Ye),",",ou(Ce,Pe)],--se;++se<we;)Me=U[se%me],Ye.shift(),Ye.push(Me[0]),Pe.shift(),Pe.push(Me[1]),De(Q,Ye,Pe);return Q.join("")}function qh(U,Q){var se=U.length-1;if(se)for(var me=U[0][0],we=U[0][1],Me=U[se][0]-me,Ye=U[se][1]-we,Pe=-1,tt,Mt;++Pe<=se;)tt=U[Pe],Mt=Pe/se,tt[0]=Q*tt[0]+(1-Q)*(me+Mt*Me),tt[1]=Q*tt[1]+(1-Q)*(we+Mt*Ye);return Gf(U)}function ou(U,Q){return U[0]*Q[0]+U[1]*Q[1]+U[2]*Q[2]+U[3]*Q[3]}var de=[0,2/3,1/3,0],Te=[0,1/3,2/3,0],Ce=[0,1/6,2/3,1/6];function De(U,Q,se){U.push("C",ou(de,Q),",",ou(de,se),",",ou(Te,Q),",",ou(Te,se),",",ou(Ce,Q),",",ou(Ce,se))}function Ge(U,Q){return(Q[1]-U[1])/(Q[0]-U[0])}function He(U){for(var Q=0,se=U.length-1,me=[],we=U[0],Me=U[1],Ye=me[0]=Ge(we,Me);++Q<se;)me[Q]=(Ye+(Ye=Ge(we=Me,Me=U[Q+1])))/2;return me[Q]=Ye,me}function Qe(U){for(var Q=[],se,me,we,Me,Ye=He(U),Pe=-1,tt=U.length-1;++Pe<tt;)se=Ge(U[Pe],U[Pe+1]),g(se)<At?Ye[Pe]=Ye[Pe+1]=0:(me=Ye[Pe]/se,we=Ye[Pe+1]/se,Me=me*me+we*we,Me>9&&(Me=se*3/Math.sqrt(Me),Ye[Pe]=Me*me,Ye[Pe+1]=Me*we));for(Pe=-1;++Pe<=tt;)Me=(U[Math.min(tt,Pe+1)][0]-U[Math.max(0,Pe-1)][0])/(6*(1+Ye[Pe]*Ye[Pe])),Q.push([Me||0,Ye[Pe]*Me||0]);return Q}function Ft(U){return U.length<3?Wu(U):U[0]+th(U,Qe(U))}e.svg.line.radial=function(){var U=uc(jt);return U.radius=U.x,delete U.x,U.angle=U.y,delete U.y,U};function jt(U){for(var Q,se=-1,me=U.length,we,Me;++se<me;)Q=U[se],we=Q[0],Me=Q[1]-qe,Q[0]=we*Math.cos(Me),Q[1]=we*Math.sin(Me);return U}function It(U){var Q=Xo,se=Xo,me=0,we=Uo,Me=$c,Ye=Wu,Pe=Ye.key,tt=Ye,Mt="L",kt=.7;function er($t){var Tr=[],Er=[],rr=[],dr=-1,wr=$t.length,Pr,kr=_r(Q),vr=_r(me),gn=Q===se?function(){return In}:_r(se),bn=me===we?function(){return Xn}:_r(we),In,Xn;function Ci(){Tr.push("M",Ye(U(rr),kt),Mt,tt(U(Er.reverse()),kt),"Z")}for(;++dr<wr;)Me.call(this,Pr=$t[dr],dr)?(Er.push([In=+kr.call(this,Pr,dr),Xn=+vr.call(this,Pr,dr)]),rr.push([+gn.call(this,Pr,dr),+bn.call(this,Pr,dr)])):Er.length&&(Ci(),Er=[],rr=[]);return Er.length&&Ci(),Tr.length?Tr.join(""):null}return er.x=function($t){return arguments.length?(Q=se=$t,er):se},er.x0=function($t){return arguments.length?(Q=$t,er):Q},er.x1=function($t){return arguments.length?(se=$t,er):se},er.y=function($t){return arguments.length?(me=we=$t,er):we},er.y0=function($t){return arguments.length?(me=$t,er):me},er.y1=function($t){return arguments.length?(we=$t,er):we},er.defined=function($t){return arguments.length?(Me=$t,er):Me},er.interpolate=function($t){return arguments.length?(typeof $t=="function"?Pe=Ye=$t:Pe=(Ye=gf.get($t)||Wu).key,tt=Ye.reverse||Ye,Mt=Ye.closed?"M":"L",er):Pe},er.tension=function($t){return arguments.length?(kt=$t,er):kt},er}Ih.reverse=Gv,Gv.reverse=Ih,e.svg.area=function(){return It(O)},e.svg.area.radial=function(){var U=It(jt);return U.radius=U.x,delete U.x,U.innerRadius=U.x0,delete U.x0,U.outerRadius=U.x1,delete U.x1,U.angle=U.y,delete U.y,U.startAngle=U.y0,delete U.y0,U.endAngle=U.y1,delete U.y1,U};function Kt(U){return U.source}function ir(U){return U.target}e.svg.chord=function(){var U=Kt,Q=ir,se=mr,me=au,we=Lc;function Me(kt,er){var $t=Ye(this,U,kt,er),Tr=Ye(this,Q,kt,er);return"M"+$t.p0+tt($t.r,$t.p1,$t.a1-$t.a0)+(Pe($t,Tr)?Mt($t.r,$t.p1,$t.r,$t.p0):Mt($t.r,$t.p1,Tr.r,Tr.p0)+tt(Tr.r,Tr.p1,Tr.a1-Tr.a0)+Mt(Tr.r,Tr.p1,$t.r,$t.p0))+"Z"}function Ye(kt,er,$t,Tr){var Er=er.call(kt,$t,Tr),rr=se.call(kt,Er,Tr),dr=me.call(kt,Er,Tr)-qe,wr=we.call(kt,Er,Tr)-qe;return{r:rr,a0:dr,a1:wr,p0:[rr*Math.cos(dr),rr*Math.sin(dr)],p1:[rr*Math.cos(wr),rr*Math.sin(wr)]}}function Pe(kt,er){return kt.a0==er.a0&&kt.a1==er.a1}function tt(kt,er,$t){return"A"+kt+","+kt+" 0 "+ +($t>xe)+",1 "+er}function Mt(kt,er,$t,Tr){return"Q 0,0 "+Tr}return Me.radius=function(kt){return arguments.length?(se=_r(kt),Me):se},Me.source=function(kt){return arguments.length?(U=_r(kt),Me):U},Me.target=function(kt){return arguments.length?(Q=_r(kt),Me):Q},Me.startAngle=function(kt){return arguments.length?(me=_r(kt),Me):me},Me.endAngle=function(kt){return arguments.length?(we=_r(kt),Me):we},Me};function mr(U){return U.radius}e.svg.diagonal=function(){var U=Kt,Q=ir,se=Sr;function me(we,Me){var Ye=U.call(this,we,Me),Pe=Q.call(this,we,Me),tt=(Ye.y+Pe.y)/2,Mt=[Ye,{x:Ye.x,y:tt},{x:Pe.x,y:tt},Pe];return Mt=Mt.map(se),"M"+Mt[0]+"C"+Mt[1]+" "+Mt[2]+" "+Mt[3]}return me.source=function(we){return arguments.length?(U=_r(we),me):U},me.target=function(we){return arguments.length?(Q=_r(we),me):Q},me.projection=function(we){return arguments.length?(se=we,me):se},me};function Sr(U){return[U.x,U.y]}e.svg.diagonal.radial=function(){var U=e.svg.diagonal(),Q=Sr,se=U.projection;return U.projection=function(me){return arguments.length?se(Vr(Q=me)):Q},U};function Vr(U){return function(){var Q=U.apply(this,arguments),se=Q[0],me=Q[1]-qe;return[se*Math.cos(me),se*Math.sin(me)]}}e.svg.symbol=function(){var U=kn,Q=sn;function se(me,we){return(Qi.get(U.call(this,me,we))||yi)(Q.call(this,me,we))}return se.type=function(me){return arguments.length?(U=_r(me),se):U},se.size=function(me){return arguments.length?(Q=_r(me),se):Q},se};function sn(){return 64}function kn(){return"circle"}function yi(U){var Q=Math.sqrt(U/xe);return"M0,"+Q+"A"+Q+","+Q+" 0 1,1 0,"+-Q+"A"+Q+","+Q+" 0 1,1 0,"+Q+"Z"}var Qi=e.map({circle:yi,cross:function(U){var Q=Math.sqrt(U/5)/2;return"M"+-3*Q+","+-Q+"H"+-Q+"V"+-3*Q+"H"+Q+"V"+-Q+"H"+3*Q+"V"+Q+"H"+Q+"V"+3*Q+"H"+-Q+"V"+Q+"H"+-3*Q+"Z"},diamond:function(U){var Q=Math.sqrt(U/(2*sa)),se=Q*sa;return"M0,"+-Q+"L"+se+",0 0,"+Q+" "+-se+",0Z"},square:function(U){var Q=Math.sqrt(U)/2;return"M"+-Q+","+-Q+"L"+Q+","+-Q+" "+Q+","+Q+" "+-Q+","+Q+"Z"},"triangle-down":function(U){var Q=Math.sqrt(U/ra),se=Q*ra/2;return"M0,"+se+"L"+Q+","+-se+" "+-Q+","+-se+"Z"},"triangle-up":function(U){var Q=Math.sqrt(U/ra),se=Q*ra/2;return"M0,"+-se+"L"+Q+","+se+" "+-Q+","+se+"Z"}});e.svg.symbolTypes=Qi.keys();var ra=Math.sqrt(3),sa=Math.tan(30*yt);he.transition=function(U){for(var Q=ds||++qa,se=Ya(U),me=[],we,Me,Ye=ol||{time:Date.now(),ease:Gl,delay:0,duration:250},Pe=-1,tt=this.length;++Pe<tt;){me.push(we=[]);for(var Mt=this[Pe],kt=-1,er=Mt.length;++kt<er;)(Me=Mt[kt])&&Il(Me,kt,se,Q,Ye),we.push(Me)}return jo(me,se,Q)},he.interrupt=function(U){return this.each(U==null?pa:Lo(Ya(U)))};var pa=Lo(Ya());function Lo(U){return function(){var Q,se,me;(Q=this[U])&&(me=Q[se=Q.active])&&(me.timer.c=null,me.timer.t=NaN,--Q.count?delete Q[se]:delete this[U],Q.active+=.5,me.event&&me.event.interrupt.call(this,this.__data__,me.index))}}function jo(U,Q,se){return X(U,ba),U.namespace=Q,U.id=se,U}var ba=[],qa=0,ds,ol;ba.call=he.call,ba.empty=he.empty,ba.node=he.node,ba.size=he.size,e.transition=function(U,Q){return U&&U.transition?ds?U.transition(Q):U:e.selection().transition(U)},e.transition.prototype=ba,ba.select=function(U){var Q=this.id,se=this.namespace,me=[],we,Me,Ye;U=ie(U);for(var Pe=-1,tt=this.length;++Pe<tt;){me.push(we=[]);for(var Mt=this[Pe],kt=-1,er=Mt.length;++kt<er;)(Ye=Mt[kt])&&(Me=U.call(Ye,Ye.__data__,kt,Pe))?("__data__"in Ye&&(Me.__data__=Ye.__data__),Il(Me,kt,se,Q,Ye[se][Q]),we.push(Me)):we.push(null)}return jo(me,se,Q)},ba.selectAll=function(U){var Q=this.id,se=this.namespace,me=[],we,Me,Ye,Pe,tt;U=ye(U);for(var Mt=-1,kt=this.length;++Mt<kt;)for(var er=this[Mt],$t=-1,Tr=er.length;++$t<Tr;)if(Ye=er[$t]){tt=Ye[se][Q],Me=U.call(Ye,Ye.__data__,$t,Mt),me.push(we=[]);for(var Er=-1,rr=Me.length;++Er<rr;)(Pe=Me[Er])&&Il(Pe,Er,se,Q,tt),we.push(Pe)}return jo(me,se,Q)},ba.filter=function(U){var Q=[],se,me,we;typeof U!="function"&&(U=Se(U));for(var Me=0,Ye=this.length;Me<Ye;Me++){Q.push(se=[]);for(var me=this[Me],Pe=0,tt=me.length;Pe<tt;Pe++)(we=me[Pe])&&U.call(we,we.__data__,Pe,Me)&&se.push(we)}return jo(Q,this.namespace,this.id)},ba.tween=function(U,Q){var se=this.id,me=this.namespace;return arguments.length<2?this.node()[me][se].tween.get(U):ht(this,Q==null?function(we){we[me][se].tween.remove(U)}:function(we){we[me][se].tween.set(U,Q)})};function el(U,Q,se,me){var we=U.id,Me=U.namespace;return ht(U,typeof se=="function"?function(Ye,Pe,tt){Ye[Me][we].tween.set(Q,me(se.call(Ye,Ye.__data__,Pe,tt)))}:(se=me(se),function(Ye){Ye[Me][we].tween.set(Q,se)}))}ba.attr=function(U,Q){if(arguments.length<2){for(Q in U)this.attr(Q,U[Q]);return this}var se=U=="transform"?uv:qs,me=e.ns.qualify(U);function we(){this.removeAttribute(me)}function Me(){this.removeAttributeNS(me.space,me.local)}function Ye(tt){return tt==null?we:(tt+="",function(){var Mt=this.getAttribute(me),kt;return Mt!==tt&&(kt=se(Mt,tt),function(er){this.setAttribute(me,kt(er))})})}function Pe(tt){return tt==null?Me:(tt+="",function(){var Mt=this.getAttributeNS(me.space,me.local),kt;return Mt!==tt&&(kt=se(Mt,tt),function(er){this.setAttributeNS(me.space,me.local,kt(er))})})}return el(this,"attr."+U,Q,me.local?Pe:Ye)},ba.attrTween=function(U,Q){var se=e.ns.qualify(U);function me(Me,Ye){var Pe=Q.call(this,Me,Ye,this.getAttribute(se));return Pe&&function(tt){this.setAttribute(se,Pe(tt))}}function we(Me,Ye){var Pe=Q.call(this,Me,Ye,this.getAttributeNS(se.space,se.local));return Pe&&function(tt){this.setAttributeNS(se.space,se.local,Pe(tt))}}return this.tween("attr."+U,se.local?we:me)},ba.style=function(U,Q,se){var me=arguments.length;if(me<3){if(typeof U!="string"){me<2&&(Q="");for(se in U)this.style(se,U[se],Q);return this}se=""}function we(){this.style.removeProperty(U)}function Me(Ye){return Ye==null?we:(Ye+="",function(){var Pe=a(this).getComputedStyle(this,null).getPropertyValue(U),tt;return Pe!==Ye&&(tt=qs(Pe,Ye),function(Mt){this.style.setProperty(U,tt(Mt),se)})})}return el(this,"style."+U,Q,Me)},ba.styleTween=function(U,Q,se){arguments.length<3&&(se="");function me(we,Me){var Ye=Q.call(this,we,Me,a(this).getComputedStyle(this,null).getPropertyValue(U));return Ye&&function(Pe){this.style.setProperty(U,Ye(Pe),se)}}return this.tween("style."+U,me)},ba.text=function(U){return el(this,"text",U,to)};function to(U){return U==null&&(U=""),function(){this.textContent=U}}ba.remove=function(){var U=this.namespace;return this.each("end.transition",function(){var Q;this[U].count<2&&(Q=this.parentNode)&&Q.removeChild(this)})},ba.ease=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].ease:(typeof U!="function"&&(U=e.ease.apply(e,arguments)),ht(this,function(me){me[se][Q].ease=U}))},ba.delay=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].delay:ht(this,typeof U=="function"?function(me,we,Me){me[se][Q].delay=+U.call(me,me.__data__,we,Me)}:(U=+U,function(me){me[se][Q].delay=U}))},ba.duration=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].duration:ht(this,typeof U=="function"?function(me,we,Me){me[se][Q].duration=Math.max(1,U.call(me,me.__data__,we,Me))}:(U=Math.max(1,U),function(me){me[se][Q].duration=U}))},ba.each=function(U,Q){var se=this.id,me=this.namespace;if(arguments.length<2){var we=ol,Me=ds;try{ds=se,ht(this,function(Ye,Pe,tt){ol=Ye[me][se],U.call(Ye,Ye.__data__,Pe,tt)})}finally{ol=we,ds=Me}}else ht(this,function(Ye){var Pe=Ye[me][se];(Pe.event||(Pe.event=e.dispatch("start","end","interrupt"))).on(U,Q)});return this},ba.transition=function(){for(var U=this.id,Q=++qa,se=this.namespace,me=[],we,Me,Ye,Pe,tt=0,Mt=this.length;tt<Mt;tt++){me.push(we=[]);for(var Me=this[tt],kt=0,er=Me.length;kt<er;kt++)(Ye=Me[kt])&&(Pe=Ye[se][U],Il(Ye,kt,se,Q,{time:Pe.time,ease:Pe.ease,delay:Pe.delay+Pe.duration,duration:Pe.duration})),we.push(Ye)}return jo(me,se,Q)};function Ya(U){return U==null?"__transition__":"__transition_"+U+"__"}function Il(U,Q,se,me,we){var Me=U[se]||(U[se]={active:0,count:0}),Ye=Me[me],Pe,tt,Mt,kt,er;function $t(rr){var dr=Ye.delay;if(tt.t=dr+Pe,dr<=rr)return Tr(rr-dr);tt.c=Tr}function Tr(rr){var dr=Me.active,wr=Me[dr];wr&&(wr.timer.c=null,wr.timer.t=NaN,--Me.count,delete Me[dr],wr.event&&wr.event.interrupt.call(U,U.__data__,wr.index));for(var Pr in Me)if(+Pr<me){var kr=Me[Pr];kr.timer.c=null,kr.timer.t=NaN,--Me.count,delete Me[Pr]}tt.c=Er,eo(function(){return tt.c&&Er(rr||1)&&(tt.c=null,tt.t=NaN),1},0,Pe),Me.active=me,Ye.event&&Ye.event.start.call(U,U.__data__,Q),er=[],Ye.tween.forEach(function(vr,gn){(gn=gn.call(U,U.__data__,Q))&&er.push(gn)}),kt=Ye.ease,Mt=Ye.duration}function Er(rr){for(var dr=rr/Mt,wr=kt(dr),Pr=er.length;Pr>0;)er[--Pr].call(U,wr);if(dr>=1)return Ye.event&&Ye.event.end.call(U,U.__data__,Q),--Me.count?delete Me[me]:delete U[se],1}Ye||(Pe=we.time,tt=eo($t,0,Pe),Ye=Me[me]={tween:new w,time:Pe,timer:tt,delay:we.delay,duration:we.duration,ease:we.ease,index:Q},we=null,++Me.count)}e.svg.axis=function(){var U=e.scale.linear(),Q=Sl,se=6,me=6,we=3,Me=[10],Ye=null,Pe;function tt(Mt){Mt.each(function(){var kt=e.select(this),er=this.__chart__||U,$t=this.__chart__=U.copy(),Tr=Ye==null?$t.ticks?$t.ticks.apply($t,Me):$t.domain():Ye,Er=Pe==null?$t.tickFormat?$t.tickFormat.apply($t,Me):O:Pe,rr=kt.selectAll(".tick").data(Tr,$t),dr=rr.enter().insert("g",".domain").attr("class","tick").style("opacity",At),wr=e.transition(rr.exit()).style("opacity",At).remove(),Pr=e.transition(rr.order()).style("opacity",1),kr=Math.max(se,0)+we,vr,gn=nn($t),bn=kt.selectAll(".domain").data([0]),In=(bn.enter().append("path").attr("class","domain"),e.transition(bn));dr.append("line"),dr.append("text");var Xn=dr.select("line"),Ci=Pr.select("line"),Fi=rr.select("text").text(Er),xa=dr.select("text"),Gi=Pr.select("text"),va=Q==="top"||Q==="left"?-1:1,go,Po,Ao,Sn;if(Q==="bottom"||Q==="top"?(vr=su,go="x",Ao="y",Po="x2",Sn="y2",Fi.attr("dy",va<0?"0em":".71em").style("text-anchor","middle"),In.attr("d","M"+gn[0]+","+va*me+"V0H"+gn[1]+"V"+va*me)):(vr=Fl,go="y",Ao="x",Po="y2",Sn="x2",Fi.attr("dy",".32em").style("text-anchor",va<0?"end":"start"),In.attr("d","M"+va*me+","+gn[0]+"H0V"+gn[1]+"H"+va*me)),Xn.attr(Sn,va*se),xa.attr(Ao,va*kr),Ci.attr(Po,0).attr(Sn,va*se),Gi.attr(go,0).attr(Ao,va*kr),$t.rangeBand){var da=$t,Sa=da.rangeBand()/2;er=$t=function(La){return da(La)+Sa}}else er.rangeBand?er=$t:wr.call(vr,$t,er);dr.call(vr,er,$t),Pr.call(vr,$t,$t)})}return tt.scale=function(Mt){return arguments.length?(U=Mt,tt):U},tt.orient=function(Mt){return arguments.length?(Q=Mt in Su?Mt+"":Sl,tt):Q},tt.ticks=function(){return arguments.length?(Me=r(arguments),tt):Me},tt.tickValues=function(Mt){return arguments.length?(Ye=Mt,tt):Ye},tt.tickFormat=function(Mt){return arguments.length?(Pe=Mt,tt):Pe},tt.tickSize=function(Mt){var kt=arguments.length;return kt?(se=+Mt,me=+arguments[kt-1],tt):se},tt.innerTickSize=function(Mt){return arguments.length?(se=+Mt,tt):se},tt.outerTickSize=function(Mt){return arguments.length?(me=+Mt,tt):me},tt.tickPadding=function(Mt){return arguments.length?(we=+Mt,tt):we},tt.tickSubdivide=function(){return arguments.length&&tt},tt};var Sl="bottom",Su={top:1,right:1,bottom:1,left:1};function su(U,Q,se){U.attr("transform",function(me){var we=Q(me);return"translate("+(isFinite(we)?we:se(me))+",0)"})}function Fl(U,Q,se){U.attr("transform",function(me){var we=Q(me);return"translate(0,"+(isFinite(we)?we:se(me))+")"})}e.svg.brush=function(){var U=fe(kt,"brushstart","brush","brushend"),Q=null,se=null,me=[0,0],we=[0,0],Me,Ye,Pe=!0,tt=!0,Mt=yf[0];function kt(rr){rr.each(function(){var dr=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Er).on("touchstart.brush",Er),wr=dr.selectAll(".background").data([0]);wr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),dr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Pr=dr.selectAll(".resize").data(Mt,O);Pr.exit().remove(),Pr.enter().append("g").attr("class",function(bn){return"resize "+bn}).style("cursor",function(bn){return El[bn]}).append("rect").attr("x",function(bn){return/[ew]$/.test(bn)?-3:null}).attr("y",function(bn){return/^[ns]/.test(bn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Pr.style("display",kt.empty()?"none":null);var kr=e.transition(dr),vr=e.transition(wr),gn;Q&&(gn=nn(Q),vr.attr("x",gn[0]).attr("width",gn[1]-gn[0]),$t(kr)),se&&(gn=nn(se),vr.attr("y",gn[0]).attr("height",gn[1]-gn[0]),Tr(kr)),er(kr)})}kt.event=function(rr){rr.each(function(){var dr=U.of(this,arguments),wr={x:me,y:we,i:Me,j:Ye},Pr=this.__chart__||wr;this.__chart__=wr,ds?e.select(this).transition().each("start.brush",function(){Me=Pr.i,Ye=Pr.j,me=Pr.x,we=Pr.y,dr({type:"brushstart"})}).tween("brush:brush",function(){var kr=Vl(me,wr.x),vr=Vl(we,wr.y);return Me=Ye=null,function(gn){me=wr.x=kr(gn),we=wr.y=vr(gn),dr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Me=wr.i,Ye=wr.j,dr({type:"brush",mode:"resize"}),dr({type:"brushend"})}):(dr({type:"brushstart"}),dr({type:"brush",mode:"resize"}),dr({type:"brushend"}))})};function er(rr){rr.selectAll(".resize").attr("transform",function(dr){return"translate("+me[+/e$/.test(dr)]+","+we[+/^s/.test(dr)]+")"})}function $t(rr){rr.select(".extent").attr("x",me[0]),rr.selectAll(".extent,.n>rect,.s>rect").attr("width",me[1]-me[0])}function Tr(rr){rr.select(".extent").attr("y",we[0]),rr.selectAll(".extent,.e>rect,.w>rect").attr("height",we[1]-we[0])}function Er(){var rr=this,dr=e.select(e.event.target),wr=U.of(rr,arguments),Pr=e.select(rr),kr=dr.datum(),vr=!/^(n|s)$/.test(kr)&&Q,gn=!/^(e|w)$/.test(kr)&&se,bn=dr.classed("extent"),In=nr(rr),Xn,Ci=e.mouse(rr),Fi,xa=e.select(a(rr)).on("keydown.brush",go).on("keyup.brush",Po);if(e.event.changedTouches?xa.on("touchmove.brush",Ao).on("touchend.brush",da):xa.on("mousemove.brush",Ao).on("mouseup.brush",da),Pr.interrupt().selectAll("*").interrupt(),bn)Ci[0]=me[0]-Ci[0],Ci[1]=we[0]-Ci[1];else if(kr){var Gi=+/w$/.test(kr),va=+/^n/.test(kr);Fi=[me[1-Gi]-Ci[0],we[1-va]-Ci[1]],Ci[0]=me[Gi],Ci[1]=we[va]}else e.event.altKey&&(Xn=Ci.slice());Pr.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",dr.style("cursor")),wr({type:"brushstart"}),Ao();function go(){e.event.keyCode==32&&(bn||(Xn=null,Ci[0]-=me[1],Ci[1]-=we[1],bn=2),re())}function Po(){e.event.keyCode==32&&bn==2&&(Ci[0]+=me[1],Ci[1]+=we[1],bn=0,re())}function Ao(){var Sa=e.mouse(rr),La=!1;Fi&&(Sa[0]+=Fi[0],Sa[1]+=Fi[1]),bn||(e.event.altKey?(Xn||(Xn=[(me[0]+me[1])/2,(we[0]+we[1])/2]),Ci[0]=me[+(Sa[0]<Xn[0])],Ci[1]=we[+(Sa[1]<Xn[1])]):Xn=null),vr&&Sn(Sa,Q,0)&&($t(Pr),La=!0),gn&&Sn(Sa,se,1)&&(Tr(Pr),La=!0),La&&(er(Pr),wr({type:"brush",mode:bn?"move":"resize"}))}function Sn(Sa,La,Ts){var Gs=nn(La),yl=Gs[0],ls=Gs[1],Wl=Ci[Ts],We=Ts?we:me,Gt=We[1]-We[0],or,qr;if(bn&&(yl-=Wl,ls-=Gt+Wl),or=(Ts?tt:Pe)?Math.max(yl,Math.min(ls,Sa[Ts])):Sa[Ts],bn?qr=(or+=Wl)+Gt:(Xn&&(Wl=Math.max(yl,Math.min(ls,2*Xn[Ts]-or))),Wl<or?(qr=or,or=Wl):qr=Wl),We[0]!=or||We[1]!=qr)return Ts?Ye=null:Me=null,We[0]=or,We[1]=qr,!0}function da(){Ao(),Pr.style("pointer-events","all").selectAll(".resize").style("display",kt.empty()?"none":null),e.select("body").style("cursor",null),xa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),In(),wr({type:"brushend"})}}return kt.x=function(rr){return arguments.length?(Q=rr,Mt=yf[!Q<<1|!se],kt):Q},kt.y=function(rr){return arguments.length?(se=rr,Mt=yf[!Q<<1|!se],kt):se},kt.clamp=function(rr){return arguments.length?(Q&&se?(Pe=!!rr[0],tt=!!rr[1]):Q?Pe=!!rr:se&&(tt=!!rr),kt):Q&&se?[Pe,tt]:Q?Pe:se?tt:null},kt.extent=function(rr){var dr,wr,Pr,kr,vr;return arguments.length?(Q&&(dr=rr[0],wr=rr[1],se&&(dr=dr[0],wr=wr[0]),Me=[dr,wr],Q.invert&&(dr=Q(dr),wr=Q(wr)),wr<dr&&(vr=dr,dr=wr,wr=vr),(dr!=me[0]||wr!=me[1])&&(me=[dr,wr])),se&&(Pr=rr[0],kr=rr[1],Q&&(Pr=Pr[1],kr=kr[1]),Ye=[Pr,kr],se.invert&&(Pr=se(Pr),kr=se(kr)),kr<Pr&&(vr=Pr,Pr=kr,kr=vr),(Pr!=we[0]||kr!=we[1])&&(we=[Pr,kr])),kt):(Q&&(Me?(dr=Me[0],wr=Me[1]):(dr=me[0],wr=me[1],Q.invert&&(dr=Q.invert(dr),wr=Q.invert(wr)),wr<dr&&(vr=dr,dr=wr,wr=vr))),se&&(Ye?(Pr=Ye[0],kr=Ye[1]):(Pr=we[0],kr=we[1],se.invert&&(Pr=se.invert(Pr),kr=se.invert(kr)),kr<Pr&&(vr=Pr,Pr=kr,kr=vr))),Q&&se?[[dr,Pr],[wr,kr]]:Q?[dr,wr]:se&&[Pr,kr])},kt.clear=function(){return kt.empty()||(me=[0,0],we=[0,0],Me=Ye=null),kt},kt.empty=function(){return!!Q&&me[0]==me[1]||!!se&&we[0]==we[1]},e.rebind(kt,U,"on")};var El={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=Jr(function(U){return U.responseText}),e.json=function(U,Q){return on(U,"application/json",Xu,Q)};function Xu(U){return JSON.parse(U.responseText)}e.html=function(U,Q){return on(U,"text/html",Zu,Q)};function Zu(U){var Q=i.createRange();return Q.selectNode(i.body),Q.createContextualFragment(U.responseText)}e.xml=Jr(function(U){return U.responseXML}),typeof define=="function"&&define.amd?define(e):typeof wk=="object"&&wk.exports?wk.exports=e:this.d3=e}).apply(self)});var oq=ne((Tk,UJ)=>{(function(e,t){typeof Tk=="object"&&typeof UJ!="undefined"?t(Tk):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(Tk,function(e){"use strict";var t=new Date,r=new Date;function i(Se,je,ht,nt){function lt(rt){return Se(rt=arguments.length===0?new Date:new Date(+rt)),rt}return lt.floor=function(rt){return Se(rt=new Date(+rt)),rt},lt.ceil=function(rt){return Se(rt=new Date(rt-1)),je(rt,1),Se(rt),rt},lt.round=function(rt){var Xe=lt(rt),ft=lt.ceil(rt);return rt-Xe<ft-rt?Xe:ft},lt.offset=function(rt,Xe){return je(rt=new Date(+rt),Xe==null?1:Math.floor(Xe)),rt},lt.range=function(rt,Xe,ft){var gt=[],Qt;if(rt=lt.ceil(rt),ft=ft==null?1:Math.floor(ft),!(rt<Xe)||!(ft>0))return gt;do gt.push(Qt=new Date(+rt)),je(rt,ft),Se(rt);while(Qt<rt&&rt<Xe);return gt},lt.filter=function(rt){return i(function(Xe){if(Xe>=Xe)for(;Se(Xe),!rt(Xe);)Xe.setTime(Xe-1)},function(Xe,ft){if(Xe>=Xe)if(ft<0)for(;++ft<=0;)for(;je(Xe,-1),!rt(Xe););else for(;--ft>=0;)for(;je(Xe,1),!rt(Xe););})},ht&&(lt.count=function(rt,Xe){return t.setTime(+rt),r.setTime(+Xe),Se(t),Se(r),Math.floor(ht(t,r))},lt.every=function(rt){return rt=Math.floor(rt),!isFinite(rt)||!(rt>0)?null:rt>1?lt.filter(nt?function(Xe){return nt(Xe)%rt===0}:function(Xe){return lt.count(0,Xe)%rt===0}):lt}),lt}var n=i(function(){},function(Se,je){Se.setTime(+Se+je)},function(Se,je){return je-Se});n.every=function(Se){return Se=Math.floor(Se),!isFinite(Se)||!(Se>0)?null:Se>1?i(function(je){je.setTime(Math.floor(je/Se)*Se)},function(je,ht){je.setTime(+je+ht*Se)},function(je,ht){return(ht-je)/Se}):n};var a=n.range,o=1e3,s=6e4,l=36e5,u=864e5,f=6048e5,c=i(function(Se){Se.setTime(Se-Se.getMilliseconds())},function(Se,je){Se.setTime(+Se+je*o)},function(Se,je){return(je-Se)/o},function(Se){return Se.getUTCSeconds()}),h=c.range,v=i(function(Se){Se.setTime(Se-Se.getMilliseconds()-Se.getSeconds()*o)},function(Se,je){Se.setTime(+Se+je*s)},function(Se,je){return(je-Se)/s},function(Se){return Se.getMinutes()}),p=v.range,_=i(function(Se){Se.setTime(Se-Se.getMilliseconds()-Se.getSeconds()*o-Se.getMinutes()*s)},function(Se,je){Se.setTime(+Se+je*l)},function(Se,je){return(je-Se)/l},function(Se){return Se.getHours()}),T=_.range,g=i(function(Se){Se.setHours(0,0,0,0)},function(Se,je){Se.setDate(Se.getDate()+je)},function(Se,je){return(je-Se-(je.getTimezoneOffset()-Se.getTimezoneOffset())*s)/u},function(Se){return Se.getDate()-1}),A=g.range;function b(Se){return i(function(je){je.setDate(je.getDate()-(je.getDay()+7-Se)%7),je.setHours(0,0,0,0)},function(je,ht){je.setDate(je.getDate()+ht*7)},function(je,ht){return(ht-je-(ht.getTimezoneOffset()-je.getTimezoneOffset())*s)/f})}var w=b(0),k=b(1),x=b(2),E=b(3),M=b(4),d=b(5),C=b(6),S=w.range,P=k.range,D=x.range,z=E.range,O=M.range,V=d.range,B=C.range,F=i(function(Se){Se.setDate(1),Se.setHours(0,0,0,0)},function(Se,je){Se.setMonth(Se.getMonth()+je)},function(Se,je){return je.getMonth()-Se.getMonth()+(je.getFullYear()-Se.getFullYear())*12},function(Se){return Se.getMonth()}),N=F.range,Z=i(function(Se){Se.setMonth(0,1),Se.setHours(0,0,0,0)},function(Se,je){Se.setFullYear(Se.getFullYear()+je)},function(Se,je){return je.getFullYear()-Se.getFullYear()},function(Se){return Se.getFullYear()});Z.every=function(Se){return!isFinite(Se=Math.floor(Se))||!(Se>0)?null:i(function(je){je.setFullYear(Math.floor(je.getFullYear()/Se)*Se),je.setMonth(0,1),je.setHours(0,0,0,0)},function(je,ht){je.setFullYear(je.getFullYear()+ht*Se)})};var J=Z.range,re=i(function(Se){Se.setUTCSeconds(0,0)},function(Se,je){Se.setTime(+Se+je*s)},function(Se,je){return(je-Se)/s},function(Se){return Se.getUTCMinutes()}),le=re.range,fe=i(function(Se){Se.setUTCMinutes(0,0,0)},function(Se,je){Se.setTime(+Se+je*l)},function(Se,je){return(je-Se)/l},function(Se){return Se.getUTCHours()}),K=fe.range,X=i(function(Se){Se.setUTCHours(0,0,0,0)},function(Se,je){Se.setUTCDate(Se.getUTCDate()+je)},function(Se,je){return(je-Se)/u},function(Se){return Se.getUTCDate()-1}),ae=X.range;function oe(Se){return i(function(je){je.setUTCDate(je.getUTCDate()-(je.getUTCDay()+7-Se)%7),je.setUTCHours(0,0,0,0)},function(je,ht){je.setUTCDate(je.getUTCDate()+ht*7)},function(je,ht){return(ht-je)/f})}var _e=oe(0),be=oe(1),he=oe(2),ie=oe(3),ye=oe(4),ue=oe(5),Ae=oe(6),Re=_e.range,ze=be.range,et=he.range,Le=ie.range,Ie=ye.range,dt=ue.range,ct=Ae.range,Ke=i(function(Se){Se.setUTCDate(1),Se.setUTCHours(0,0,0,0)},function(Se,je){Se.setUTCMonth(Se.getUTCMonth()+je)},function(Se,je){return je.getUTCMonth()-Se.getUTCMonth()+(je.getUTCFullYear()-Se.getUTCFullYear())*12},function(Se){return Se.getUTCMonth()}),_t=Ke.range,zt=i(function(Se){Se.setUTCMonth(0,1),Se.setUTCHours(0,0,0,0)},function(Se,je){Se.setUTCFullYear(Se.getUTCFullYear()+je)},function(Se,je){return je.getUTCFullYear()-Se.getUTCFullYear()},function(Se){return Se.getUTCFullYear()});zt.every=function(Se){return!isFinite(Se=Math.floor(Se))||!(Se>0)?null:i(function(je){je.setUTCFullYear(Math.floor(je.getUTCFullYear()/Se)*Se),je.setUTCMonth(0,1),je.setUTCHours(0,0,0,0)},function(je,ht){je.setUTCFullYear(je.getUTCFullYear()+ht*Se)})};var Et=zt.range;e.timeDay=g,e.timeDays=A,e.timeFriday=d,e.timeFridays=V,e.timeHour=_,e.timeHours=T,e.timeInterval=i,e.timeMillisecond=n,e.timeMilliseconds=a,e.timeMinute=v,e.timeMinutes=p,e.timeMonday=k,e.timeMondays=P,e.timeMonth=F,e.timeMonths=N,e.timeSaturday=C,e.timeSaturdays=B,e.timeSecond=c,e.timeSeconds=h,e.timeSunday=w,e.timeSundays=S,e.timeThursday=M,e.timeThursdays=O,e.timeTuesday=x,e.timeTuesdays=D,e.timeWednesday=E,e.timeWednesdays=z,e.timeWeek=w,e.timeWeeks=S,e.timeYear=Z,e.timeYears=J,e.utcDay=X,e.utcDays=ae,e.utcFriday=ue,e.utcFridays=dt,e.utcHour=fe,e.utcHours=K,e.utcMillisecond=n,e.utcMilliseconds=a,e.utcMinute=re,e.utcMinutes=le,e.utcMonday=be,e.utcMondays=ze,e.utcMonth=Ke,e.utcMonths=_t,e.utcSaturday=Ae,e.utcSaturdays=ct,e.utcSecond=c,e.utcSeconds=h,e.utcSunday=_e,e.utcSundays=Re,e.utcThursday=ye,e.utcThursdays=Ie,e.utcTuesday=he,e.utcTuesdays=et,e.utcWednesday=ie,e.utcWednesdays=Le,e.utcWeek=_e,e.utcWeeks=Re,e.utcYear=zt,e.utcYears=Et,Object.defineProperty(e,"__esModule",{value:!0})})});var Xb=ne((Ak,VJ)=>{(function(e,t){typeof Ak=="object"&&typeof VJ!="undefined"?t(Ak,oq()):typeof define=="function"&&define.amd?define(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(Ak,function(e,t){"use strict";function r(xt){if(0<=xt.y&&xt.y<100){var At=new Date(-1,xt.m,xt.d,xt.H,xt.M,xt.S,xt.L);return At.setFullYear(xt.y),At}return new Date(xt.y,xt.m,xt.d,xt.H,xt.M,xt.S,xt.L)}function i(xt){if(0<=xt.y&&xt.y<100){var At=new Date(Date.UTC(-1,xt.m,xt.d,xt.H,xt.M,xt.S,xt.L));return At.setUTCFullYear(xt.y),At}return new Date(Date.UTC(xt.y,xt.m,xt.d,xt.H,xt.M,xt.S,xt.L))}function n(xt,At,Je){return{y:xt,m:At,d:Je,H:0,M:0,S:0,L:0}}function a(xt){var At=xt.dateTime,Je=xt.date,xe=xt.time,ce=xt.periods,ge=xt.days,qe=xt.shortDays,yt=xt.months,Vt=xt.shortMonths,Ut=h(ce),br=v(ce),xr=h(ge),Or=v(ge),Hr=h(qe),gr=v(qe),Ur=h(yt),_n=v(yt),si=h(Vt),xn=v(Vt),ci={a:Gr,A:Yr,b:vn,B:Wr,c:null,d:F,e:F,f:le,H:N,I:Z,j:J,L:re,m:fe,M:K,p:qn,q:vi,Q:Xe,s:ft,S:X,u:ae,U:oe,V:_e,w:be,W:he,x:null,X:null,y:ie,Y:ye,Z:ue,"%":rt},Wi={a:Mi,A:Ui,b:ji,B:ea,c:null,d:Ae,e:Ae,f:Ie,H:Re,I:ze,j:et,L:Le,m:dt,M:ct,p:Ra,q:Li,Q:Xe,s:ft,S:Ke,u:_t,U:zt,V:Et,w:Se,W:je,x:null,X:null,y:ht,Y:nt,Z:lt,"%":rt},oi={a:st,A:mt,b:Ot,B:tr,c:pr,d:M,e:M,f:z,H:C,I:C,j:d,L:D,m:E,M:S,p:Ne,q:x,Q:V,s:B,S:P,u:_,U:T,V:g,w:p,W:A,x:hr,X:Rr,y:w,Y:b,Z:k,"%":O};ci.x=Zi(Je,ci),ci.X=Zi(xe,ci),ci.c=Zi(At,ci),Wi.x=Zi(Je,Wi),Wi.X=Zi(xe,Wi),Wi.c=Zi(At,Wi);function Zi(Yn,zi){return function(ya){var zn=[],Ze=-1,Bt=0,sr=Yn.length,_r,Jr,on;for(ya instanceof Date||(ya=new Date(+ya));++Ze<sr;)Yn.charCodeAt(Ze)===37&&(zn.push(Yn.slice(Bt,Ze)),(Jr=o[_r=Yn.charAt(++Ze)])!=null?_r=Yn.charAt(++Ze):Jr=_r==="e"?" ":"0",(on=zi[_r])&&(_r=on(ya,Jr)),zn.push(_r),Bt=Ze+1);return zn.push(Yn.slice(Bt,Ze)),zn.join("")}}function Ei(Yn,zi){return function(ya){var zn=n(1900,void 0,1),Ze=at(zn,Yn,ya+="",0),Bt,sr;if(Ze!=ya.length)return null;if("Q"in zn)return new Date(zn.Q);if("s"in zn)return new Date(zn.s*1e3+("L"in zn?zn.L:0));if(zi&&!("Z"in zn)&&(zn.Z=0),"p"in zn&&(zn.H=zn.H%12+zn.p*12),zn.m===void 0&&(zn.m="q"in zn?zn.q:0),"V"in zn){if(zn.V<1||zn.V>53)return null;"w"in zn||(zn.w=1),"Z"in zn?(Bt=i(n(zn.y,0,1)),sr=Bt.getUTCDay(),Bt=sr>4||sr===0?t.utcMonday.ceil(Bt):t.utcMonday(Bt),Bt=t.utcDay.offset(Bt,(zn.V-1)*7),zn.y=Bt.getUTCFullYear(),zn.m=Bt.getUTCMonth(),zn.d=Bt.getUTCDate()+(zn.w+6)%7):(Bt=r(n(zn.y,0,1)),sr=Bt.getDay(),Bt=sr>4||sr===0?t.timeMonday.ceil(Bt):t.timeMonday(Bt),Bt=t.timeDay.offset(Bt,(zn.V-1)*7),zn.y=Bt.getFullYear(),zn.m=Bt.getMonth(),zn.d=Bt.getDate()+(zn.w+6)%7)}else("W"in zn||"U"in zn)&&("w"in zn||(zn.w="u"in zn?zn.u%7:"W"in zn?1:0),sr="Z"in zn?i(n(zn.y,0,1)).getUTCDay():r(n(zn.y,0,1)).getDay(),zn.m=0,zn.d="W"in zn?(zn.w+6)%7+zn.W*7-(sr+5)%7:zn.w+zn.U*7-(sr+6)%7);return"Z"in zn?(zn.H+=zn.Z/100|0,zn.M+=zn.Z%100,i(zn)):r(zn)}}function at(Yn,zi,ya,zn){for(var Ze=0,Bt=zi.length,sr=ya.length,_r,Jr;Ze<Bt;){if(zn>=sr)return-1;if(_r=zi.charCodeAt(Ze++),_r===37){if(_r=zi.charAt(Ze++),Jr=oi[_r in o?zi.charAt(Ze++):_r],!Jr||(zn=Jr(Yn,ya,zn))<0)return-1}else if(_r!=ya.charCodeAt(zn++))return-1}return zn}function Ne(Yn,zi,ya){var zn=Ut.exec(zi.slice(ya));return zn?(Yn.p=br[zn[0].toLowerCase()],ya+zn[0].length):-1}function st(Yn,zi,ya){var zn=Hr.exec(zi.slice(ya));return zn?(Yn.w=gr[zn[0].toLowerCase()],ya+zn[0].length):-1}function mt(Yn,zi,ya){var zn=xr.exec(zi.slice(ya));return zn?(Yn.w=Or[zn[0].toLowerCase()],ya+zn[0].length):-1}function Ot(Yn,zi,ya){var zn=si.exec(zi.slice(ya));return zn?(Yn.m=xn[zn[0].toLowerCase()],ya+zn[0].length):-1}function tr(Yn,zi,ya){var zn=Ur.exec(zi.slice(ya));return zn?(Yn.m=_n[zn[0].toLowerCase()],ya+zn[0].length):-1}function pr(Yn,zi,ya){return at(Yn,At,zi,ya)}function hr(Yn,zi,ya){return at(Yn,Je,zi,ya)}function Rr(Yn,zi,ya){return at(Yn,xe,zi,ya)}function Gr(Yn){return qe[Yn.getDay()]}function Yr(Yn){return ge[Yn.getDay()]}function vn(Yn){return Vt[Yn.getMonth()]}function Wr(Yn){return yt[Yn.getMonth()]}function qn(Yn){return ce[+(Yn.getHours()>=12)]}function vi(Yn){return 1+~~(Yn.getMonth()/3)}function Mi(Yn){return qe[Yn.getUTCDay()]}function Ui(Yn){return ge[Yn.getUTCDay()]}function ji(Yn){return Vt[Yn.getUTCMonth()]}function ea(Yn){return yt[Yn.getUTCMonth()]}function Ra(Yn){return ce[+(Yn.getUTCHours()>=12)]}function Li(Yn){return 1+~~(Yn.getUTCMonth()/3)}return{format:function(Yn){var zi=Zi(Yn+="",ci);return zi.toString=function(){return Yn},zi},parse:function(Yn){var zi=Ei(Yn+="",!1);return zi.toString=function(){return Yn},zi},utcFormat:function(Yn){var zi=Zi(Yn+="",Wi);return zi.toString=function(){return Yn},zi},utcParse:function(Yn){var zi=Ei(Yn+="",!0);return zi.toString=function(){return Yn},zi}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,u=/[\\^$*+?|[\]().{}]/g;function f(xt,At,Je){var xe=xt<0?"-":"",ce=(xe?-xt:xt)+"",ge=ce.length;return xe+(ge<Je?new Array(Je-ge+1).join(At)+ce:ce)}function c(xt){return xt.replace(u,"\\$&")}function h(xt){return new RegExp("^(?:"+xt.map(c).join("|")+")","i")}function v(xt){for(var At={},Je=-1,xe=xt.length;++Je<xe;)At[xt[Je].toLowerCase()]=Je;return At}function p(xt,At,Je){var xe=s.exec(At.slice(Je,Je+1));return xe?(xt.w=+xe[0],Je+xe[0].length):-1}function _(xt,At,Je){var xe=s.exec(At.slice(Je,Je+1));return xe?(xt.u=+xe[0],Je+xe[0].length):-1}function T(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.U=+xe[0],Je+xe[0].length):-1}function g(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.V=+xe[0],Je+xe[0].length):-1}function A(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.W=+xe[0],Je+xe[0].length):-1}function b(xt,At,Je){var xe=s.exec(At.slice(Je,Je+4));return xe?(xt.y=+xe[0],Je+xe[0].length):-1}function w(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.y=+xe[0]+(+xe[0]>68?1900:2e3),Je+xe[0].length):-1}function k(xt,At,Je){var xe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(At.slice(Je,Je+6));return xe?(xt.Z=xe[1]?0:-(xe[2]+(xe[3]||"00")),Je+xe[0].length):-1}function x(xt,At,Je){var xe=s.exec(At.slice(Je,Je+1));return xe?(xt.q=xe[0]*3-3,Je+xe[0].length):-1}function E(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.m=xe[0]-1,Je+xe[0].length):-1}function M(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.d=+xe[0],Je+xe[0].length):-1}function d(xt,At,Je){var xe=s.exec(At.slice(Je,Je+3));return xe?(xt.m=0,xt.d=+xe[0],Je+xe[0].length):-1}function C(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.H=+xe[0],Je+xe[0].length):-1}function S(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.M=+xe[0],Je+xe[0].length):-1}function P(xt,At,Je){var xe=s.exec(At.slice(Je,Je+2));return xe?(xt.S=+xe[0],Je+xe[0].length):-1}function D(xt,At,Je){var xe=s.exec(At.slice(Je,Je+3));return xe?(xt.L=+xe[0],Je+xe[0].length):-1}function z(xt,At,Je){var xe=s.exec(At.slice(Je,Je+6));return xe?(xt.L=Math.floor(xe[0]/1e3),Je+xe[0].length):-1}function O(xt,At,Je){var xe=l.exec(At.slice(Je,Je+1));return xe?Je+xe[0].length:-1}function V(xt,At,Je){var xe=s.exec(At.slice(Je));return xe?(xt.Q=+xe[0],Je+xe[0].length):-1}function B(xt,At,Je){var xe=s.exec(At.slice(Je));return xe?(xt.s=+xe[0],Je+xe[0].length):-1}function F(xt,At){return f(xt.getDate(),At,2)}function N(xt,At){return f(xt.getHours(),At,2)}function Z(xt,At){return f(xt.getHours()%12||12,At,2)}function J(xt,At){return f(1+t.timeDay.count(t.timeYear(xt),xt),At,3)}function re(xt,At){return f(xt.getMilliseconds(),At,3)}function le(xt,At){return re(xt,At)+"000"}function fe(xt,At){return f(xt.getMonth()+1,At,2)}function K(xt,At){return f(xt.getMinutes(),At,2)}function X(xt,At){return f(xt.getSeconds(),At,2)}function ae(xt){var At=xt.getDay();return At===0?7:At}function oe(xt,At){return f(t.timeSunday.count(t.timeYear(xt)-1,xt),At,2)}function _e(xt,At){var Je=xt.getDay();return xt=Je>=4||Je===0?t.timeThursday(xt):t.timeThursday.ceil(xt),f(t.timeThursday.count(t.timeYear(xt),xt)+(t.timeYear(xt).getDay()===4),At,2)}function be(xt){return xt.getDay()}function he(xt,At){return f(t.timeMonday.count(t.timeYear(xt)-1,xt),At,2)}function ie(xt,At){return f(xt.getFullYear()%100,At,2)}function ye(xt,At){return f(xt.getFullYear()%1e4,At,4)}function ue(xt){var At=xt.getTimezoneOffset();return(At>0?"-":(At*=-1,"+"))+f(At/60|0,"0",2)+f(At%60,"0",2)}function Ae(xt,At){return f(xt.getUTCDate(),At,2)}function Re(xt,At){return f(xt.getUTCHours(),At,2)}function ze(xt,At){return f(xt.getUTCHours()%12||12,At,2)}function et(xt,At){return f(1+t.utcDay.count(t.utcYear(xt),xt),At,3)}function Le(xt,At){return f(xt.getUTCMilliseconds(),At,3)}function Ie(xt,At){return Le(xt,At)+"000"}function dt(xt,At){return f(xt.getUTCMonth()+1,At,2)}function ct(xt,At){return f(xt.getUTCMinutes(),At,2)}function Ke(xt,At){return f(xt.getUTCSeconds(),At,2)}function _t(xt){var At=xt.getUTCDay();return At===0?7:At}function zt(xt,At){return f(t.utcSunday.count(t.utcYear(xt)-1,xt),At,2)}function Et(xt,At){var Je=xt.getUTCDay();return xt=Je>=4||Je===0?t.utcThursday(xt):t.utcThursday.ceil(xt),f(t.utcThursday.count(t.utcYear(xt),xt)+(t.utcYear(xt).getUTCDay()===4),At,2)}function Se(xt){return xt.getUTCDay()}function je(xt,At){return f(t.utcMonday.count(t.utcYear(xt)-1,xt),At,2)}function ht(xt,At){return f(xt.getUTCFullYear()%100,At,2)}function nt(xt,At){return f(xt.getUTCFullYear()%1e4,At,4)}function lt(){return"+0000"}function rt(){return"%"}function Xe(xt){return+xt}function ft(xt){return Math.floor(+xt/1e3)}var gt;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(xt){return gt=a(xt),e.timeFormat=gt.format,e.timeParse=gt.parse,e.utcFormat=gt.utcFormat,e.utcParse=gt.utcParse,gt}var Jt="%Y-%m-%dT%H:%M:%S.%LZ";function fr(xt){return xt.toISOString()}var nr=Date.prototype.toISOString?fr:e.utcFormat(Jt);function ur(xt){var At=new Date(xt);return isNaN(At)?null:At}var qt=+new Date("2000-01-01T00:00:00.000Z")?ur:e.utcParse(Jt);e.isoFormat=nr,e.isoParse=qt,e.timeFormatDefaultLocale=Qt,e.timeFormatLocale=a,Object.defineProperty(e,"__esModule",{value:!0})})});var sq=ne((Mk,HJ)=>{(function(e,t){typeof Mk=="object"&&typeof HJ!="undefined"?t(Mk):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(Mk,function(e){"use strict";function t(E){return Math.abs(E=Math.round(E))>=1e21?E.toLocaleString("en").replace(/,/g,""):E.toString(10)}function r(E,M){if((d=(E=M?E.toExponential(M-1):E.toExponential()).indexOf("e"))<0)return null;var d,C=E.slice(0,d);return[C.length>1?C[0]+C.slice(2):C,+E.slice(d+1)]}function i(E){return E=r(Math.abs(E)),E?E[1]:NaN}function n(E,M){return function(d,C){for(var S=d.length,P=[],D=0,z=E[0],O=0;S>0&&z>0&&(O+z+1>C&&(z=Math.max(1,C-O)),P.push(d.substring(S-=z,S+z)),!((O+=z+1)>C));)z=E[D=(D+1)%E.length];return P.reverse().join(M)}}function a(E){return function(M){return M.replace(/[0-9]/g,function(d){return E[+d]})}}var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(E){if(!(M=o.exec(E)))throw new Error("invalid format: "+E);var M;return new l({fill:M[1],align:M[2],sign:M[3],symbol:M[4],zero:M[5],width:M[6],comma:M[7],precision:M[8]&&M[8].slice(1),trim:M[9],type:M[10]})}s.prototype=l.prototype;function l(E){this.fill=E.fill===void 0?" ":E.fill+"",this.align=E.align===void 0?">":E.align+"",this.sign=E.sign===void 0?"-":E.sign+"",this.symbol=E.symbol===void 0?"":E.symbol+"",this.zero=!!E.zero,this.width=E.width===void 0?void 0:+E.width,this.comma=!!E.comma,this.precision=E.precision===void 0?void 0:+E.precision,this.trim=!!E.trim,this.type=E.type===void 0?"":E.type+""}l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u(E){e:for(var M=E.length,d=1,C=-1,S;d<M;++d)switch(E[d]){case".":C=S=d;break;case"0":C===0&&(C=d),S=d;break;default:if(!+E[d])break e;C>0&&(C=0);break}return C>0?E.slice(0,C)+E.slice(S+1):E}var f;function c(E,M){var d=r(E,M);if(!d)return E+"";var C=d[0],S=d[1],P=S-(f=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,D=C.length;return P===D?C:P>D?C+new Array(P-D+1).join("0"):P>0?C.slice(0,P)+"."+C.slice(P):"0."+new Array(1-P).join("0")+r(E,Math.max(0,M+P-1))[0]}function h(E,M){var d=r(E,M);if(!d)return E+"";var C=d[0],S=d[1];return S<0?"0."+new Array(-S).join("0")+C:C.length>S+1?C.slice(0,S+1)+"."+C.slice(S+1):C+new Array(S-C.length+2).join("0")}var v={"%":function(E,M){return(E*100).toFixed(M)},b:function(E){return Math.round(E).toString(2)},c:function(E){return E+""},d:t,e:function(E,M){return E.toExponential(M)},f:function(E,M){return E.toFixed(M)},g:function(E,M){return E.toPrecision(M)},o:function(E){return Math.round(E).toString(8)},p:function(E,M){return h(E*100,M)},r:h,s:c,X:function(E){return Math.round(E).toString(16).toUpperCase()},x:function(E){return Math.round(E).toString(16)}};function p(E){return E}var _=Array.prototype.map,T=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function g(E){var M=E.grouping===void 0||E.thousands===void 0?p:n(_.call(E.grouping,Number),E.thousands+""),d=E.currency===void 0?"":E.currency[0]+"",C=E.currency===void 0?"":E.currency[1]+"",S=E.decimal===void 0?".":E.decimal+"",P=E.numerals===void 0?p:a(_.call(E.numerals,String)),D=E.percent===void 0?"%":E.percent+"",z=E.minus===void 0?"-":E.minus+"",O=E.nan===void 0?"NaN":E.nan+"";function V(F){F=s(F);var N=F.fill,Z=F.align,J=F.sign,re=F.symbol,le=F.zero,fe=F.width,K=F.comma,X=F.precision,ae=F.trim,oe=F.type;oe==="n"?(K=!0,oe="g"):v[oe]||(X===void 0&&(X=12),ae=!0,oe="g"),(le||N==="0"&&Z==="=")&&(le=!0,N="0",Z="=");var _e=re==="$"?d:re==="#"&&/[boxX]/.test(oe)?"0"+oe.toLowerCase():"",be=re==="$"?C:/[%p]/.test(oe)?D:"",he=v[oe],ie=/[defgprs%]/.test(oe);X=X===void 0?6:/[gprs]/.test(oe)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X));function ye(ue){var Ae=_e,Re=be,ze,et,Le;if(oe==="c")Re=he(ue)+Re,ue="";else{ue=+ue;var Ie=ue<0||1/ue<0;if(ue=isNaN(ue)?O:he(Math.abs(ue),X),ae&&(ue=u(ue)),Ie&&+ue==0&&J!=="+"&&(Ie=!1),Ae=(Ie?J==="("?J:z:J==="-"||J==="("?"":J)+Ae,Re=(oe==="s"?T[8+f/3]:"")+Re+(Ie&&J==="("?")":""),ie){for(ze=-1,et=ue.length;++ze<et;)if(Le=ue.charCodeAt(ze),48>Le||Le>57){Re=(Le===46?S+ue.slice(ze+1):ue.slice(ze))+Re,ue=ue.slice(0,ze);break}}}K&&!le&&(ue=M(ue,1/0));var dt=Ae.length+ue.length+Re.length,ct=dt<fe?new Array(fe-dt+1).join(N):"";switch(K&&le&&(ue=M(ct+ue,ct.length?fe-Re.length:1/0),ct=""),Z){case"<":ue=Ae+ue+Re+ct;break;case"=":ue=Ae+ct+ue+Re;break;case"^":ue=ct.slice(0,dt=ct.length>>1)+Ae+ue+Re+ct.slice(dt);break;default:ue=ct+Ae+ue+Re;break}return P(ue)}return ye.toString=function(){return F+""},ye}function B(F,N){var Z=V((F=s(F),F.type="f",F)),J=Math.max(-8,Math.min(8,Math.floor(i(N)/3)))*3,re=Math.pow(10,-J),le=T[8+J/3];return function(fe){return Z(re*fe)+le}}return{format:V,formatPrefix:B}}var A;b({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function b(E){return A=g(E),e.format=A.format,e.formatPrefix=A.formatPrefix,A}function w(E){return Math.max(0,-i(Math.abs(E)))}function k(E,M){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(M)/3)))*3-i(Math.abs(E)))}function x(E,M){return E=Math.abs(E),M=Math.abs(M)-E,Math.max(0,i(M)-i(E))+1}e.FormatSpecifier=l,e.formatDefaultLocale=b,e.formatLocale=g,e.formatSpecifier=s,e.precisionFixed=w,e.precisionPrefix=k,e.precisionRound=x,Object.defineProperty(e,"__esModule",{value:!0})})});var YJ=ne((UQt,GJ)=>{"use strict";GJ.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var la=ne((VQt,WJ)=>{"use strict";var NQe=YJ();WJ.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&NQe(r))return!1}else if(t!=="number")return!1;return e-e<1}});var $a=ne((HQt,XJ)=>{"use strict";XJ.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var lq=ne((Sk,ZJ)=>{(function(e,t){typeof Sk=="object"&&typeof ZJ!="undefined"?t(Sk):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(Sk,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var n=function(o){var s=new Uint8Array(o),l,u=s.length,f="";for(l=0;l<u;l+=3)f+=t[s[l]>>2],f+=t[(s[l]&3)<<4|s[l+1]>>4],f+=t[(s[l+1]&15)<<2|s[l+2]>>6],f+=t[s[l+2]&63];return u%3===2?f=f.substring(0,f.length-1)+"=":u%3===1&&(f=f.substring(0,f.length-2)+"=="),f},a=function(o){var s=o.length*.75,l=o.length,u,f=0,c,h,v,p;o[o.length-1]==="="&&(s--,o[o.length-2]==="="&&s--);var _=new ArrayBuffer(s),T=new Uint8Array(_);for(u=0;u<l;u+=4)c=r[o.charCodeAt(u)],h=r[o.charCodeAt(u+1)],v=r[o.charCodeAt(u+2)],p=r[o.charCodeAt(u+3)],T[f++]=c<<2|h>>4,T[f++]=(h&15)<<4|v>>2,T[f++]=(v&3)<<6|p&63;return _};e.decode=a,e.encode=n,Object.defineProperty(e,"__esModule",{value:!0})})});var Lg=ne((GQt,jJ)=>{"use strict";jJ.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var uh=ne(Jp=>{"use strict";var UQe=lq().decode,VQe=Lg(),uq=Array.isArray,HQe=ArrayBuffer,GQe=DataView;function KJ(e){return HQe.isView(e)&&!(e instanceof GQe)}Jp.isTypedArray=KJ;function Ek(e){return uq(e)||KJ(e)}Jp.isArrayOrTypedArray=Ek;function YQe(e){return!Ek(e[0])}Jp.isArray1D=YQe;Jp.ensureArray=function(e,t){return uq(e)||(e=[]),e.length=t,e};var cc={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};cc.uint8c=cc.u1c;cc.uint8=cc.u1;cc.int8=cc.i1;cc.uint16=cc.u2;cc.int16=cc.i2;cc.uint32=cc.u4;cc.int32=cc.i4;cc.float32=cc.f4;cc.float64=cc.f8;function fq(e){return e.constructor===ArrayBuffer}Jp.isArrayBuffer=fq;Jp.decodeTypedArraySpec=function(e){var t=[],r=WQe(e),i=r.dtype,n=cc[i];if(!n)throw new Error('Error in dtype: "'+i+'"');var a=n.BYTES_PER_ELEMENT,o=r.bdata;fq(o)||(o=UQe(o));var s=r.shape===void 0?[o.byteLength/a]:(""+r.shape).split(",");s.reverse();var l=s.length,u,f,c=+s[0],h=a*c,v=0;if(l===1)t=new n(o);else if(l===2)for(u=+s[1],f=0;f<u;f++)t[f]=new n(o,v,c),v+=h;else if(l===3){u=+s[1];for(var p=+s[2],_=0;_<p;_++)for(t[_]=[],f=0;f<u;f++)t[_][f]=new n(o,v,c),v+=h}else throw new Error("ndim: "+l+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=s.reverse().join(","),e._inputArray=t,t};Jp.isTypedArraySpec=function(e){return VQe(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||fq(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function WQe(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}Jp.concat=function(){var e=[],t=!0,r=0,i,n,a,o,s,l,u,f;for(a=0;a<arguments.length;a++)o=arguments[a],l=o.length,l&&(n?e.push(o):(n=o,s=l),uq(o)?i=!1:(t=!1,r?i!==o.constructor&&(i=!1):i=o.constructor),r+=l);if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(i){for(u=new i(r),u.set(n),a=0;a<e.length;a++)o=e[a],u.set(o,s),s+=o.length;return u}for(u=new Array(r),f=0;f<n.length;f++)u[f]=n[f];for(a=0;a<e.length;a++){for(o=e[a],f=0;f<o.length;f++)u[s+f]=o[f];s+=f}return u};Jp.maxRowLength=function(e){return JJ(e,Math.max,0)};Jp.minRowLength=function(e){return JJ(e,Math.min,1/0)};function JJ(e,t,r){if(Ek(e))if(Ek(e[0])){for(var i=r,n=0;n<e.length;n++)i=t(i,e[n].length);return i}else return e.length;return 0}});var iA=ne((WQt,rQ)=>{"use strict";var QJ=la(),hq=uh().isArrayOrTypedArray;rQ.exports=function(t,r){if(QJ(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i=r.split("."),n,a,o,s;for(s=0;s<i.length;s++)if(String(i[s]).slice(0,2)==="__")throw"bad property string";for(s=0;s<i.length;){if(n=String(i[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),n){if(n[1])i[s]=n[1];else if(s===0)i.splice(0,1);else throw"bad property string";for(a=n[2].substr(1,n[2].length-2).split("]["),o=0;o<a.length;o++)s++,i.splice(s,0,Number(a[o]))}s++}return typeof t!="object"?KQe(t,r,i):{set:eQ(t,i,r),get:$J(t,i),astr:r,parts:i,obj:t}};function $J(e,t){return function(){var r=e,i,n,a,o,s;for(o=0;o<t.length-1;o++){if(i=t[o],i===-1){for(n=!0,a=[],s=0;s<r.length;s++)a[s]=$J(r[s],t.slice(o+1))(),a[s]!==a[0]&&(n=!1);return n?a[0]:a}if(typeof i=="number"&&!hq(r)||(r=r[i],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(a=r[t[o]],a!==null))return a}}var XQe=/(^|\.)args\[/;function cq(e,t){return e===void 0||e===null&&!t.match(XQe)}function eQ(e,t,r){return function(i){var n=e,a="",o=[[e,a]],s=cq(i,r),l,u;for(u=0;u<t.length-1;u++){if(l=t[u],typeof l=="number"&&!hq(n))throw"array index but container is not an array";if(l===-1){if(s=!jQe(n,t.slice(u+1),i,r),s)break;return}if(!tQ(n,l,t[u+1],s))break;if(n=n[l],typeof n!="object"||n===null)throw"container is not an object";a=ZQe(a,l),o.push([n,a])}if(s){if(u===t.length-1&&(delete n[t[u]],Array.isArray(n)&&+t[u]===n.length-1))for(;n.length&&n[n.length-1]===void 0;)n.pop()}else n[t[u]]=i}}function ZQe(e,t){var r=t;return QJ(t)?r="["+t+"]":e&&(r="."+t),e+r}function jQe(e,t,r,i){var n=hq(r),a=!0,o=r,s=i.replace("-1",0),l=n?!1:cq(r,s),u=t[0],f;for(f=0;f<e.length;f++)s=i.replace("-1",f),n&&(o=r[f%r.length],l=cq(o,s)),l&&(a=!1),tQ(e,f,u,l)&&eQ(e[f],t,i.replace("-1",f))(o);return a}function tQ(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function KQe(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var oQ=ne((XQt,aQ)=>{"use strict";var Zb=iA(),JQe=/^\w*$/,QQe=0,nQ=1,kk=2,iQ=3,K1=4;aQ.exports=function(t,r,i,n){i=i||"name",n=n||"value";var a,o,s,l={};r&&r.length?(s=Zb(t,r),o=s.get()):o=t,r=r||"";var u={};if(o)for(a=0;a<o.length;a++)u[o[a][i]]=a;var f=JQe.test(n),c={set:function(h,v){var p=v===null?K1:QQe;if(!o){if(!s||p===K1)return;o=[],s.set(o)}var _=u[h];if(_===void 0){if(p===K1)return;p=p|iQ,_=o.length,u[h]=_}else v!==(f?o[_][n]:Zb(o[_],n).get())&&(p=p|kk);var T=o[_]=o[_]||{};return T[i]=h,f?T[n]=v:Zb(T,n).set(v),v!==null&&(p=p&~K1),l[_]=l[_]|p,c},get:function(h){if(o){var v=u[h];if(v!==void 0)return f?o[v][n]:Zb(o[v],n).get()}},rename:function(h,v){var p=u[h];return p===void 0||(l[p]=l[p]|nQ,u[v]=p,delete u[h],o[p][i]=v),c},remove:function(h){var v=u[h];if(v===void 0)return c;var p=o[v];if(Object.keys(p).length>2)return l[v]=l[v]|kk,c.set(h,null);if(f){for(a=v;a<o.length;a++)l[a]=l[a]|iQ;for(a=v;a<o.length;a++)u[o[a][i]]--;o.splice(v,1),delete u[h]}else Zb(p,n).set(null),l[v]=l[v]|kk|K1;return c},constructUpdate:function(){for(var h,v,p={},_=Object.keys(l),T=0;T<_.length;T++)v=_[T],h=r+"["+v+"]",o[v]?(l[v]&nQ&&(p[h+"."+i]=o[v][i]),l[v]&kk&&(f?p[h+"."+n]=l[v]&K1?null:o[v][n]:p[h+"."+n]=l[v]&K1?null:Zb(o[v],n).get())):p[h]=null;return p}};return c}});var lQ=ne((ZQt,sQ)=>{"use strict";var $Qe=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e$e=/^[^\.\[\]]+$/;sQ.exports=function(e,t){for(;t;){var r=e.match($Qe);if(r)e=r[1];else if(e.match(e$e))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var Ck=ne((jQt,uQ)=>{"use strict";var t$e=la();uQ.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return t$e(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var hQ=ne((KQt,cQ)=>{"use strict";var fQ=uh().isArrayOrTypedArray,aA=Lg();cQ.exports=function e(t,r){for(var i in r){var n=r[i],a=t[i];if(a!==n)if(i.charAt(0)==="_"||typeof n=="function"){if(i in t)continue;t[i]=n}else if(fQ(n)&&fQ(a)&&aA(n[0])){if(i==="customdata"||i==="ids")continue;for(var o=Math.min(n.length,a.length),s=0;s<o;s++)a[s]!==n[s]&&aA(n[s])&&aA(a[s])&&e(a[s],n[s])}else aA(n)&&aA(a)&&(e(a,n),Object.keys(a).length||delete t[i])}}});var jb=ne((JQt,vQ)=>{"use strict";function r$e(e,t){var r=e%t;return r<0?r+t:r}function n$e(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}vQ.exports={mod:r$e,modHalf:n$e}});var Xf=ne((QQt,Lk)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,n=e.round,a=e.min,o=e.max,s=e.random;function l(ie,ye){if(ie=ie||"",ye=ye||{},ie instanceof l)return ie;if(!(this instanceof l))return new l(ie,ye);var ue=u(ie);this._originalInput=ie,this._r=ue.r,this._g=ue.g,this._b=ue.b,this._a=ue.a,this._roundA=n(100*this._a)/100,this._format=ye.format||ue.format,this._gradientType=ye.gradientType,this._r<1&&(this._r=n(this._r)),this._g<1&&(this._g=n(this._g)),this._b<1&&(this._b=n(this._b)),this._ok=ue.ok,this._tc_id=i++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},getLuminance:function(){var ie=this.toRgb(),ye,ue,Ae,Re,ze,et;return ye=ie.r/255,ue=ie.g/255,Ae=ie.b/255,ye<=.03928?Re=ye/12.92:Re=e.pow((ye+.055)/1.055,2.4),ue<=.03928?ze=ue/12.92:ze=e.pow((ue+.055)/1.055,2.4),Ae<=.03928?et=Ae/12.92:et=e.pow((Ae+.055)/1.055,2.4),.2126*Re+.7152*ze+.0722*et},setAlpha:function(ie){return this._a=F(ie),this._roundA=n(100*this._a)/100,this},toHsv:function(){var ie=v(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=v(this._r,this._g,this._b),ye=n(ie.h*360),ue=n(ie.s*100),Ae=n(ie.v*100);return this._a==1?"hsv("+ye+", "+ue+"%, "+Ae+"%)":"hsva("+ye+", "+ue+"%, "+Ae+"%, "+this._roundA+")"},toHsl:function(){var ie=c(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=c(this._r,this._g,this._b),ye=n(ie.h*360),ue=n(ie.s*100),Ae=n(ie.l*100);return this._a==1?"hsl("+ye+", "+ue+"%, "+Ae+"%)":"hsla("+ye+", "+ue+"%, "+Ae+"%, "+this._roundA+")"},toHex:function(ie){return _(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return T(this._r,this._g,this._b,this._a,ie)},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:n(this._r),g:n(this._g),b:n(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+n(this._r)+", "+n(this._g)+", "+n(this._b)+")":"rgba("+n(this._r)+", "+n(this._g)+", "+n(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:n(N(this._r,255)*100)+"%",g:n(N(this._g,255)*100)+"%",b:n(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%)":"rgba("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:V[_(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var ye="#"+g(this._r,this._g,this._b,this._a),ue=ye,Ae=this._gradientType?"GradientType = 1, ":"";if(ie){var Re=l(ie);ue="#"+g(Re._r,Re._g,Re._b,Re._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ae+"startColorstr="+ye+",endColorstr="+ue+")"},toString:function(ie){var ye=!!ie;ie=ie||this._format;var ue=!1,Ae=this._a<1&&this._a>=0,Re=!ye&&Ae&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="hex4"||ie==="hex8"||ie==="name");return Re?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(ue=this.toRgbString()),ie==="prgb"&&(ue=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(ue=this.toHexString()),ie==="hex3"&&(ue=this.toHexString(!0)),ie==="hex4"&&(ue=this.toHex8String(!0)),ie==="hex8"&&(ue=this.toHex8String()),ie==="name"&&(ue=this.toName()),ie==="hsl"&&(ue=this.toHslString()),ie==="hsv"&&(ue=this.toHsvString()),ue||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(ie,ye){var ue=ie.apply(null,[this].concat([].slice.call(ye)));return this._r=ue._r,this._g=ue._g,this._b=ue._b,this.setAlpha(ue._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(ie,ye){return ie.apply(null,[this].concat([].slice.call(ye)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(d,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},l.fromRatio=function(ie,ye){if(typeof ie=="object"){var ue={};for(var Ae in ie)ie.hasOwnProperty(Ae)&&(Ae==="a"?ue[Ae]=ie[Ae]:ue[Ae]=K(ie[Ae]));ie=ue}return l(ie,ye)};function u(ie){var ye={r:0,g:0,b:0},ue=1,Ae=null,Re=null,ze=null,et=!1,Le=!1;return typeof ie=="string"&&(ie=be(ie)),typeof ie=="object"&&(_e(ie.r)&&_e(ie.g)&&_e(ie.b)?(ye=f(ie.r,ie.g,ie.b),et=!0,Le=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):_e(ie.h)&&_e(ie.s)&&_e(ie.v)?(Ae=K(ie.s),Re=K(ie.v),ye=p(ie.h,Ae,Re),et=!0,Le="hsv"):_e(ie.h)&&_e(ie.s)&&_e(ie.l)&&(Ae=K(ie.s),ze=K(ie.l),ye=h(ie.h,Ae,ze),et=!0,Le="hsl"),ie.hasOwnProperty("a")&&(ue=ie.a)),ue=F(ue),{ok:et,format:ie.format||Le,r:a(255,o(ye.r,0)),g:a(255,o(ye.g,0)),b:a(255,o(ye.b,0)),a:ue}}function f(ie,ye,ue){return{r:N(ie,255)*255,g:N(ye,255)*255,b:N(ue,255)*255}}function c(ie,ye,ue){ie=N(ie,255),ye=N(ye,255),ue=N(ue,255);var Ae=o(ie,ye,ue),Re=a(ie,ye,ue),ze,et,Le=(Ae+Re)/2;if(Ae==Re)ze=et=0;else{var Ie=Ae-Re;switch(et=Le>.5?Ie/(2-Ae-Re):Ie/(Ae+Re),Ae){case ie:ze=(ye-ue)/Ie+(ye<ue?6:0);break;case ye:ze=(ue-ie)/Ie+2;break;case ue:ze=(ie-ye)/Ie+4;break}ze/=6}return{h:ze,s:et,l:Le}}function h(ie,ye,ue){var Ae,Re,ze;ie=N(ie,360),ye=N(ye,100),ue=N(ue,100);function et(dt,ct,Ke){return Ke<0&&(Ke+=1),Ke>1&&(Ke-=1),Ke<1/6?dt+(ct-dt)*6*Ke:Ke<1/2?ct:Ke<2/3?dt+(ct-dt)*(2/3-Ke)*6:dt}if(ye===0)Ae=Re=ze=ue;else{var Le=ue<.5?ue*(1+ye):ue+ye-ue*ye,Ie=2*ue-Le;Ae=et(Ie,Le,ie+1/3),Re=et(Ie,Le,ie),ze=et(Ie,Le,ie-1/3)}return{r:Ae*255,g:Re*255,b:ze*255}}function v(ie,ye,ue){ie=N(ie,255),ye=N(ye,255),ue=N(ue,255);var Ae=o(ie,ye,ue),Re=a(ie,ye,ue),ze,et,Le=Ae,Ie=Ae-Re;if(et=Ae===0?0:Ie/Ae,Ae==Re)ze=0;else{switch(Ae){case ie:ze=(ye-ue)/Ie+(ye<ue?6:0);break;case ye:ze=(ue-ie)/Ie+2;break;case ue:ze=(ie-ye)/Ie+4;break}ze/=6}return{h:ze,s:et,v:Le}}function p(ie,ye,ue){ie=N(ie,360)*6,ye=N(ye,100),ue=N(ue,100);var Ae=e.floor(ie),Re=ie-Ae,ze=ue*(1-ye),et=ue*(1-Re*ye),Le=ue*(1-(1-Re)*ye),Ie=Ae%6,dt=[ue,et,ze,ze,Le,ue][Ie],ct=[Le,ue,ue,et,ze,ze][Ie],Ke=[ze,ze,Le,ue,ue,et][Ie];return{r:dt*255,g:ct*255,b:Ke*255}}function _(ie,ye,ue,Ae){var Re=[fe(n(ie).toString(16)),fe(n(ye).toString(16)),fe(n(ue).toString(16))];return Ae&&Re[0].charAt(0)==Re[0].charAt(1)&&Re[1].charAt(0)==Re[1].charAt(1)&&Re[2].charAt(0)==Re[2].charAt(1)?Re[0].charAt(0)+Re[1].charAt(0)+Re[2].charAt(0):Re.join("")}function T(ie,ye,ue,Ae,Re){var ze=[fe(n(ie).toString(16)),fe(n(ye).toString(16)),fe(n(ue).toString(16)),fe(X(Ae))];return Re&&ze[0].charAt(0)==ze[0].charAt(1)&&ze[1].charAt(0)==ze[1].charAt(1)&&ze[2].charAt(0)==ze[2].charAt(1)&&ze[3].charAt(0)==ze[3].charAt(1)?ze[0].charAt(0)+ze[1].charAt(0)+ze[2].charAt(0)+ze[3].charAt(0):ze.join("")}function g(ie,ye,ue,Ae){var Re=[fe(X(Ae)),fe(n(ie).toString(16)),fe(n(ye).toString(16)),fe(n(ue).toString(16))];return Re.join("")}l.equals=function(ie,ye){return!ie||!ye?!1:l(ie).toRgbString()==l(ye).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})};function A(ie,ye){ye=ye===0?0:ye||10;var ue=l(ie).toHsl();return ue.s-=ye/100,ue.s=Z(ue.s),l(ue)}function b(ie,ye){ye=ye===0?0:ye||10;var ue=l(ie).toHsl();return ue.s+=ye/100,ue.s=Z(ue.s),l(ue)}function w(ie){return l(ie).desaturate(100)}function k(ie,ye){ye=ye===0?0:ye||10;var ue=l(ie).toHsl();return ue.l+=ye/100,ue.l=Z(ue.l),l(ue)}function x(ie,ye){ye=ye===0?0:ye||10;var ue=l(ie).toRgb();return ue.r=o(0,a(255,ue.r-n(255*-(ye/100)))),ue.g=o(0,a(255,ue.g-n(255*-(ye/100)))),ue.b=o(0,a(255,ue.b-n(255*-(ye/100)))),l(ue)}function E(ie,ye){ye=ye===0?0:ye||10;var ue=l(ie).toHsl();return ue.l-=ye/100,ue.l=Z(ue.l),l(ue)}function M(ie,ye){var ue=l(ie).toHsl(),Ae=(ue.h+ye)%360;return ue.h=Ae<0?360+Ae:Ae,l(ue)}function d(ie){var ye=l(ie).toHsl();return ye.h=(ye.h+180)%360,l(ye)}function C(ie){var ye=l(ie).toHsl(),ue=ye.h;return[l(ie),l({h:(ue+120)%360,s:ye.s,l:ye.l}),l({h:(ue+240)%360,s:ye.s,l:ye.l})]}function S(ie){var ye=l(ie).toHsl(),ue=ye.h;return[l(ie),l({h:(ue+90)%360,s:ye.s,l:ye.l}),l({h:(ue+180)%360,s:ye.s,l:ye.l}),l({h:(ue+270)%360,s:ye.s,l:ye.l})]}function P(ie){var ye=l(ie).toHsl(),ue=ye.h;return[l(ie),l({h:(ue+72)%360,s:ye.s,l:ye.l}),l({h:(ue+216)%360,s:ye.s,l:ye.l})]}function D(ie,ye,ue){ye=ye||6,ue=ue||30;var Ae=l(ie).toHsl(),Re=360/ue,ze=[l(ie)];for(Ae.h=(Ae.h-(Re*ye>>1)+720)%360;--ye;)Ae.h=(Ae.h+Re)%360,ze.push(l(Ae));return ze}function z(ie,ye){ye=ye||6;for(var ue=l(ie).toHsv(),Ae=ue.h,Re=ue.s,ze=ue.v,et=[],Le=1/ye;ye--;)et.push(l({h:Ae,s:Re,v:ze})),ze=(ze+Le)%1;return et}l.mix=function(ie,ye,ue){ue=ue===0?0:ue||50;var Ae=l(ie).toRgb(),Re=l(ye).toRgb(),ze=ue/100,et={r:(Re.r-Ae.r)*ze+Ae.r,g:(Re.g-Ae.g)*ze+Ae.g,b:(Re.b-Ae.b)*ze+Ae.b,a:(Re.a-Ae.a)*ze+Ae.a};return l(et)},l.readability=function(ie,ye){var ue=l(ie),Ae=l(ye);return(e.max(ue.getLuminance(),Ae.getLuminance())+.05)/(e.min(ue.getLuminance(),Ae.getLuminance())+.05)},l.isReadable=function(ie,ye,ue){var Ae=l.readability(ie,ye),Re,ze;switch(ze=!1,Re=he(ue),Re.level+Re.size){case"AAsmall":case"AAAlarge":ze=Ae>=4.5;break;case"AAlarge":ze=Ae>=3;break;case"AAAsmall":ze=Ae>=7;break}return ze},l.mostReadable=function(ie,ye,ue){var Ae=null,Re=0,ze,et,Le,Ie;ue=ue||{},et=ue.includeFallbackColors,Le=ue.level,Ie=ue.size;for(var dt=0;dt<ye.length;dt++)ze=l.readability(ie,ye[dt]),ze>Re&&(Re=ze,Ae=l(ye[dt]));return l.isReadable(ie,Ae,{level:Le,size:Ie})||!et?Ae:(ue.includeFallbackColors=!1,l.mostReadable(ie,["#fff","#000"],ue))};var O=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},V=l.hexNames=B(O);function B(ie){var ye={};for(var ue in ie)ie.hasOwnProperty(ue)&&(ye[ie[ue]]=ue);return ye}function F(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function N(ie,ye){re(ie)&&(ie="100%");var ue=le(ie);return ie=a(ye,o(0,parseFloat(ie))),ue&&(ie=parseInt(ie*ye,10)/100),e.abs(ie-ye)<1e-6?1:ie%ye/parseFloat(ye)}function Z(ie){return a(1,o(0,ie))}function J(ie){return parseInt(ie,16)}function re(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function le(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function fe(ie){return ie.length==1?"0"+ie:""+ie}function K(ie){return ie<=1&&(ie=ie*100+"%"),ie}function X(ie){return e.round(parseFloat(ie)*255).toString(16)}function ae(ie){return J(ie)/255}var oe=function(){var ie="[-\\+]?\\d+%?",ye="[-\\+]?\\d*\\.\\d+%?",ue="(?:"+ye+")|(?:"+ie+")",Ae="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",Re="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?";return{CSS_UNIT:new RegExp(ue),rgb:new RegExp("rgb"+Ae),rgba:new RegExp("rgba"+Re),hsl:new RegExp("hsl"+Ae),hsla:new RegExp("hsla"+Re),hsv:new RegExp("hsv"+Ae),hsva:new RegExp("hsva"+Re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function _e(ie){return!!oe.CSS_UNIT.exec(ie)}function be(ie){ie=ie.replace(t,"").replace(r,"").toLowerCase();var ye=!1;if(O[ie])ie=O[ie],ye=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ue;return(ue=oe.rgb.exec(ie))?{r:ue[1],g:ue[2],b:ue[3]}:(ue=oe.rgba.exec(ie))?{r:ue[1],g:ue[2],b:ue[3],a:ue[4]}:(ue=oe.hsl.exec(ie))?{h:ue[1],s:ue[2],l:ue[3]}:(ue=oe.hsla.exec(ie))?{h:ue[1],s:ue[2],l:ue[3],a:ue[4]}:(ue=oe.hsv.exec(ie))?{h:ue[1],s:ue[2],v:ue[3]}:(ue=oe.hsva.exec(ie))?{h:ue[1],s:ue[2],v:ue[3],a:ue[4]}:(ue=oe.hex8.exec(ie))?{r:J(ue[1]),g:J(ue[2]),b:J(ue[3]),a:ae(ue[4]),format:ye?"name":"hex8"}:(ue=oe.hex6.exec(ie))?{r:J(ue[1]),g:J(ue[2]),b:J(ue[3]),format:ye?"name":"hex"}:(ue=oe.hex4.exec(ie))?{r:J(ue[1]+""+ue[1]),g:J(ue[2]+""+ue[2]),b:J(ue[3]+""+ue[3]),a:ae(ue[4]+""+ue[4]),format:ye?"name":"hex8"}:(ue=oe.hex3.exec(ie))?{r:J(ue[1]+""+ue[1]),g:J(ue[2]+""+ue[2]),b:J(ue[3]+""+ue[3]),format:ye?"name":"hex"}:!1}function he(ie){var ye,ue;return ie=ie||{level:"AA",size:"small"},ye=(ie.level||"AA").toUpperCase(),ue=(ie.size||"small").toLowerCase(),ye!=="AA"&&ye!=="AAA"&&(ye="AA"),ue!=="small"&&ue!=="large"&&(ue="small"),{level:ye,size:ue}}typeof Lk!="undefined"&&Lk.exports?Lk.exports=l:typeof define=="function"&&define.amd?define(function(){return l}):window.tinycolor=l})(Math)});var ll=ne(($Qt,dQ)=>{"use strict";dQ.exports=function(e){var t=e.editType,r=e.colorEditType;r===void 0&&(r=t);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};return e.autoSize&&(i.size.dflt="auto"),e.autoColor&&(i.color.dflt="auto"),e.arrayOk&&(i.family.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i}});var oA=ne((e$t,pQ)=>{"use strict";pQ.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var Pg=ne((t$t,mQ)=>{"use strict";var gQ=oA(),yQ=ll(),vq=yQ({editType:"none"});vq.family.dflt=gQ.HOVERFONT;vq.size.dflt=gQ.HOVERFONTSIZE;mQ.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:vq,grouptitlefont:yQ({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var oa=ne(uA=>{"use strict";var xQ=Lg(),sA=Array.isArray;function i$e(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}uA.extendFlat=function(){return lA(arguments,!1,!1,!1)};uA.extendDeep=function(){return lA(arguments,!0,!1,!1)};uA.extendDeepAll=function(){return lA(arguments,!0,!0,!1)};uA.extendDeepNoArrays=function(){return lA(arguments,!0,!1,!0)};function lA(e,t,r,i){var n=e[0],a=e.length,o,s,l,u,f,c,h;if(a===2&&sA(n)&&sA(e[1])&&n.length===0){if(h=i$e(e[1],n),h)return n;n.splice(0,n.length)}for(var v=1;v<a;v++){o=e[v];for(s in o)l=n[s],u=o[s],i&&sA(u)?n[s]=u:t&&u&&(xQ(u)||(f=sA(u)))?(f?(f=!1,c=l&&sA(l)?l:[]):c=l&&xQ(l)?l:{},n[s]=lA([c,u],t,r,i)):(typeof u!="undefined"||r)&&(n[s]=u)}return n}});var Kb=ne((n$t,_Q)=>{"use strict";var a$e=ll(),Pk=Pg().hoverlabel,Rk=oa().extendFlat;_Q.exports={hoverlabel:{bgcolor:Rk({},Pk.bgcolor,{arrayOk:!0}),bordercolor:Rk({},Pk.bordercolor,{arrayOk:!0}),font:a$e({arrayOk:!0,editType:"none"}),align:Rk({},Pk.align,{arrayOk:!0}),namelength:Rk({},Pk.namelength,{arrayOk:!0}),editType:"none"}}});var es=ne((i$t,bQ)=>{"use strict";var o$e=ll(),s$e=Kb();bQ.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:o$e({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:s$e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var J1=ne((a$t,AQ)=>{"use strict";var l$e=Xf(),Dk={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},wQ=Dk.RdBu;function u$e(e,t){if(t||(t=wQ),!e)return t;function r(){try{e=Dk[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),TQ(e)?e:t}function TQ(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!l$e(i[1]).isValid())return!1;t=+i[0]}return!0}function f$e(e){return Dk[e]!==void 0?!0:TQ(e)}AQ.exports={scales:Dk,defaultScale:wQ,get:u$e,isValid:f$e}});var Ku=ne(Q1=>{"use strict";Q1.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Q1.defaultLine="#444";Q1.lightLine="#eee";Q1.background="#fff";Q1.borderLine="#BEC8D9";Q1.lightFraction=100*10/11});var _i=ne((s$t,MQ)=>{"use strict";var Kv=Xf(),c$e=la(),h$e=uh().isTypedArray,Zf=MQ.exports={},Ik=Ku();Zf.defaults=Ik.defaults;var v$e=Zf.defaultLine=Ik.defaultLine;Zf.lightLine=Ik.lightLine;var pq=Zf.background=Ik.background;Zf.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};Zf.rgb=function(e){return Zf.tinyRGB(Kv(e))};Zf.opacity=function(e){return e?Kv(e).getAlpha():0};Zf.addOpacity=function(e,t){var r=Kv(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};Zf.combine=function(e,t){var r=Kv(e).toRgb();if(r.a===1)return Kv(e).toRgbString();var i=Kv(t||pq).toRgb(),n=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return Kv(a).toRgbString()};Zf.interpolate=function(e,t,r){var i=Kv(e).toRgb(),n=Kv(t).toRgb(),a={r:r*i.r+(1-r)*n.r,g:r*i.g+(1-r)*n.g,b:r*i.b+(1-r)*n.b};return Kv(a).toRgbString()};Zf.contrast=function(e,t,r){var i=Kv(e);i.getAlpha()!==1&&(i=Kv(Zf.combine(e,pq)));var n=i.isDark()?t?i.lighten(t):pq:r?i.darken(r):v$e;return n.toString()};Zf.stroke=function(e,t){var r=Kv(t);e.style({stroke:Zf.tinyRGB(r),"stroke-opacity":r.getAlpha()})};Zf.fill=function(e,t){var r=Kv(t);e.style({fill:Zf.tinyRGB(r),"fill-opacity":r.getAlpha()})};Zf.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,n,a;for(r=0;r<t.length;r++)if(n=t[r],a=e[n],n.substr(n.length-5)==="color")if(Array.isArray(a))for(i=0;i<a.length;i++)a[i]=dq(a[i]);else e[n]=dq(a);else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(a))for(i=0;i<a.length;i++)Array.isArray(a[i])&&(a[i][1]=dq(a[i][1]));else if(Array.isArray(a)){var o=a[0];if(!Array.isArray(o)&&o&&typeof o=="object")for(i=0;i<a.length;i++)Zf.clean(a[i])}else a&&typeof a=="object"&&!h$e(a)&&Zf.clean(a)}};function dq(e){if(c$e(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),n=t.charAt(3)==="a"&&i.length===4;if(!n&&i.length!==3)return e;for(var a=0;a<i.length;a++){if(!i[a].length||(i[a]=Number(i[a]),!(i[a]>=0)))return e;if(a===3)i[a]>1&&(i[a]=1);else if(i[a]>=1)return e}var o=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return n?"rgba("+o+", "+i[3]+")":"rgb("+o+")"}});var Yy=ne((l$t,SQ)=>{"use strict";SQ.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var Jb=ne(EQ=>{"use strict";EQ.counter=function(e,t,r,i){var n=(t||"")+(r?"":"$"),a=i===!1?"":"^";return e==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+n)}});var LQ=ne(Jv=>{"use strict";var gq=la(),kQ=Xf(),d$e=es(),p$e=J1(),g$e=_i(),y$e=Yy().DESELECTDIM,Qb=iA(),CQ=Jb().counter,m$e=jb().modHalf,D0=uh().isArrayOrTypedArray,Fk=uh().isTypedArraySpec,qk=uh().decodeTypedArraySpec;Jv.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(D0(e)?e:Fk(e)?qk(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var n=String(r[i]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var a=new RegExp(n.substr(1,n.length-2));if(a.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r){e===!0||e===!1?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){!gq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){e%1||!gq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var n=typeof e=="number";i.strict===!0||!n?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){kQ(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(n){return kQ(n).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(p$e.get(e,r))}},angle:{coerceFunction:function(e,t,r){e==="auto"?t.set("auto"):gq(e)?t.set(m$e(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var n=i.regex||CQ(r);if(typeof e=="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!CQ(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var n=e.split("+"),a=0;a<n.length;){var o=n[a];i.flags.indexOf(o)===-1||n.indexOf(o)<a?n.splice(a,1):a++}n.length?t.set(n.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(Fk(e)?qk(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function n(A,b,w){var k,x={set:function(E){k=E}};return w===void 0&&(w=b.dflt),Jv.valObjectMeta[b.valType].coerceFunction(A,x,w,b),k}if(Fk(e)&&(e=qk(e)),!D0(e)){t.set(r);return}var a=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&D0(e[0]),o=i.items,s=[],l=Array.isArray(o),u=l&&a&&D0(o[0]),f=a&&l&&!u,c=l&&!f?o.length:e.length,h,v,p,_,T,g;if(r=Array.isArray(r)?r:[],a)for(h=0;h<c;h++)for(s[h]=[],p=D0(e[h])?e[h]:[],f?T=o.length:l?T=o[h].length:T=p.length,v=0;v<T;v++)f?_=o[v]:l?_=o[h][v]:_=o,g=n(p[v],_,(r[h]||[])[v]),g!==void 0&&(s[h][v]=g);else for(h=0;h<c;h++)g=n(e[h],l?o[h]:o,r[h]),g!==void 0&&(s[h]=g);t.set(s)},validateFunction:function(e,t){if(!D0(e))return!1;var r=t.items,i=Array.isArray(r),n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(n){if(!D0(e[a])||!t.freeLength&&e[a].length!==r[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!zk(e[a][o],i?r[a][o]:r))return!1}else if(!zk(e[a],i?r[a]:r))return!1;return!0}}};Jv.coerce=function(e,t,r,i,n){var a=Qb(r,i).get(),o=Qb(e,i),s=Qb(t,i),l=o.get(),u=t._template;if(l===void 0&&u&&(l=Qb(u,i).get(),u=0),n===void 0&&(n=a.dflt),a.arrayOk){if(D0(l))return s.set(l),l;if(Fk(l))return l=qk(l),s.set(l),l}var f=Jv.valObjectMeta[a.valType].coerceFunction;f(l,s,n,a);var c=s.get();return u&&c===n&&!zk(l,a)&&(l=Qb(u,i).get(),f(l,s,n,a),c=s.get()),c};Jv.coerce2=function(e,t,r,i,n){var a=Qb(e,i),o=Jv.coerce(e,t,r,i,n),s=a.get();return s!=null?o:!1};Jv.coerceFont=function(e,t,r){var i={};return r=r||{},i.family=e(t+".family",r.family),i.size=e(t+".size",r.size),i.color=e(t+".color",r.color),i};Jv.coercePattern=function(e,t,r,i){var n=e(t+".shape");if(n){e(t+".solidity"),e(t+".size");var a=e(t+".fillmode"),o=a==="overlay";if(!i){var s=e(t+".bgcolor",o?r:void 0);e(t+".fgcolor",o?g$e.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};Jv.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,n=i.hoverinfo?i:d$e,a=n.hoverinfo,o;if(r._dataLength===1){var s=a.dflt==="all"?a.flags.slice():a.dflt.split("+");s.splice(s.indexOf("name"),1),o=s.join("+")}return Jv.coerce(e,t,n,"hoverinfo",o)};Jv.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,n;!D0(r)&&!e.selected&&!e.unselected&&(i=r,n=y$e*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",n)}}};function zk(e,t){var r=Jv.valObjectMeta[t.valType];if(t.arrayOk&&D0(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},n=i,a={set:function(o){n=o}};return r.coerceFunction(e,a,i,t),n!==i}Jv.validate=zk});var $1=ne((c$t,IQ)=>{"use strict";var PQ={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},RQ={};function DQ(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),DQ(i,t[r]))}}DQ(PQ,RQ);IQ.exports={configAttributes:PQ,dfltConfig:RQ}});var mq=ne((h$t,FQ)=>{"use strict";var yq=Ai(),x$e=la(),fA=[];FQ.exports=function(e,t){if(fA.indexOf(e)!==-1)return;fA.push(e);var r=1e3;x$e(t)?r=t:t==="long"&&(r=3e3);var i=yq.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(fA);function a(o){o.duration(700).style("opacity",0).each("end",function(s){var l=fA.indexOf(s);l!==-1&&fA.splice(l,1),yq.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var s=yq.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(a)});for(var l=s.append("p"),u=o.split(/<br\s*\/?>/g),f=0;f<u.length;f++)f&&l.append("br"),l.append("span").text(u[f]);t==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}});var Wy=ne((v$t,qQ)=>{"use strict";var $b=$1().dfltConfig,xq=mq(),_q=qQ.exports={};_q.log=function(){var e;if($b.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if($b.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);xq(r.join("<br>"),"long")}};_q.warn=function(){var e;if($b.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if($b.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);xq(r.join("<br>"),"stick")}};_q.error=function(){var e;if($b.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if($b.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);xq(r.join("<br>"),"stick")}}});var Ok=ne((d$t,zQ)=>{"use strict";zQ.exports=function(){}});var bq=ne((p$t,OQ)=>{"use strict";OQ.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var NQ=ne((g$t,BQ)=>{BQ.exports=_$e;function _$e(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var VQ=ne((y$t,UQ)=>{UQ.exports=b$e;function b$e(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var GQ=ne((m$t,HQ)=>{HQ.exports=w$e;function w$e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var wq=ne((x$t,YQ)=>{YQ.exports=T$e;function T$e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var XQ=ne((_$t,WQ)=>{WQ.exports=A$e;function A$e(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var jQ=ne((b$t,ZQ)=>{ZQ.exports=M$e;function M$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],p=t[12],_=t[13],T=t[14],g=t[15],A=r*s-i*o,b=r*l-n*o,w=r*u-a*o,k=i*l-n*s,x=i*u-a*s,E=n*u-a*l,M=f*_-c*p,d=f*T-h*p,C=f*g-v*p,S=c*T-h*_,P=c*g-v*_,D=h*g-v*T,z=A*D-b*P+w*S+k*C-x*d+E*M;return z?(z=1/z,e[0]=(s*D-l*P+u*S)*z,e[1]=(n*P-i*D-a*S)*z,e[2]=(_*E-T*x+g*k)*z,e[3]=(h*x-c*E-v*k)*z,e[4]=(l*C-o*D-u*d)*z,e[5]=(r*D-n*C+a*d)*z,e[6]=(T*w-p*E-g*b)*z,e[7]=(f*E-h*w+v*b)*z,e[8]=(o*P-s*C+u*M)*z,e[9]=(i*C-r*P-a*M)*z,e[10]=(p*x-_*w+g*A)*z,e[11]=(c*w-f*x-v*A)*z,e[12]=(s*d-o*S-l*M)*z,e[13]=(r*S-i*d+n*M)*z,e[14]=(_*b-p*k-T*A)*z,e[15]=(f*k-c*b+h*A)*z,e):null}});var JQ=ne((w$t,KQ)=>{KQ.exports=S$e;function S$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],p=t[12],_=t[13],T=t[14],g=t[15];return e[0]=s*(h*g-v*T)-c*(l*g-u*T)+_*(l*v-u*h),e[1]=-(i*(h*g-v*T)-c*(n*g-a*T)+_*(n*v-a*h)),e[2]=i*(l*g-u*T)-s*(n*g-a*T)+_*(n*u-a*l),e[3]=-(i*(l*v-u*h)-s*(n*v-a*h)+c*(n*u-a*l)),e[4]=-(o*(h*g-v*T)-f*(l*g-u*T)+p*(l*v-u*h)),e[5]=r*(h*g-v*T)-f*(n*g-a*T)+p*(n*v-a*h),e[6]=-(r*(l*g-u*T)-o*(n*g-a*T)+p*(n*u-a*l)),e[7]=r*(l*v-u*h)-o*(n*v-a*h)+f*(n*u-a*l),e[8]=o*(c*g-v*_)-f*(s*g-u*_)+p*(s*v-u*c),e[9]=-(r*(c*g-v*_)-f*(i*g-a*_)+p*(i*v-a*c)),e[10]=r*(s*g-u*_)-o*(i*g-a*_)+p*(i*u-a*s),e[11]=-(r*(s*v-u*c)-o*(i*v-a*c)+f*(i*u-a*s)),e[12]=-(o*(c*T-h*_)-f*(s*T-l*_)+p*(s*h-l*c)),e[13]=r*(c*T-h*_)-f*(i*T-n*_)+p*(i*h-n*c),e[14]=-(r*(s*T-l*_)-o*(i*T-n*_)+p*(i*l-n*s)),e[15]=r*(s*h-l*c)-o*(i*h-n*c)+f*(i*l-n*s),e}});var $Q=ne((T$t,QQ)=>{QQ.exports=E$e;function E$e(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],h=e[11],v=e[12],p=e[13],_=e[14],T=e[15],g=t*o-r*a,A=t*s-i*a,b=t*l-n*a,w=r*s-i*o,k=r*l-n*o,x=i*l-n*s,E=u*p-f*v,M=u*_-c*v,d=u*T-h*v,C=f*_-c*p,S=f*T-h*p,P=c*T-h*_;return g*P-A*S+b*C+w*d-k*M+x*E}});var t$=ne((A$t,e$)=>{e$.exports=k$e;function k$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],h=t[9],v=t[10],p=t[11],_=t[12],T=t[13],g=t[14],A=t[15],b=r[0],w=r[1],k=r[2],x=r[3];return e[0]=b*i+w*s+k*c+x*_,e[1]=b*n+w*l+k*h+x*T,e[2]=b*a+w*u+k*v+x*g,e[3]=b*o+w*f+k*p+x*A,b=r[4],w=r[5],k=r[6],x=r[7],e[4]=b*i+w*s+k*c+x*_,e[5]=b*n+w*l+k*h+x*T,e[6]=b*a+w*u+k*v+x*g,e[7]=b*o+w*f+k*p+x*A,b=r[8],w=r[9],k=r[10],x=r[11],e[8]=b*i+w*s+k*c+x*_,e[9]=b*n+w*l+k*h+x*T,e[10]=b*a+w*u+k*v+x*g,e[11]=b*o+w*f+k*p+x*A,b=r[12],w=r[13],k=r[14],x=r[15],e[12]=b*i+w*s+k*c+x*_,e[13]=b*n+w*l+k*h+x*T,e[14]=b*a+w*u+k*v+x*g,e[15]=b*o+w*f+k*p+x*A,e}});var n$=ne((M$t,r$)=>{r$.exports=C$e;function C$e(e,t,r){var i=r[0],n=r[1],a=r[2],o,s,l,u,f,c,h,v,p,_,T,g;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*a+t[12],e[13]=t[1]*i+t[5]*n+t[9]*a+t[13],e[14]=t[2]*i+t[6]*n+t[10]*a+t[14],e[15]=t[3]*i+t[7]*n+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],f=t[4],c=t[5],h=t[6],v=t[7],p=t[8],_=t[9],T=t[10],g=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=f,e[5]=c,e[6]=h,e[7]=v,e[8]=p,e[9]=_,e[10]=T,e[11]=g,e[12]=o*i+f*n+p*a+t[12],e[13]=s*i+c*n+_*a+t[13],e[14]=l*i+h*n+T*a+t[14],e[15]=u*i+v*n+g*a+t[15]),e}});var a$=ne((S$t,i$)=>{i$.exports=L$e;function L$e(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var s$=ne((E$t,o$)=>{o$.exports=P$e;function P$e(e,t,r,i){var n=i[0],a=i[1],o=i[2],s=Math.sqrt(n*n+a*a+o*o),l,u,f,c,h,v,p,_,T,g,A,b,w,k,x,E,M,d,C,S,P,D,z,O;return Math.abs(s)<1e-6?null:(s=1/s,n*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),f=1-u,c=t[0],h=t[1],v=t[2],p=t[3],_=t[4],T=t[5],g=t[6],A=t[7],b=t[8],w=t[9],k=t[10],x=t[11],E=n*n*f+u,M=a*n*f+o*l,d=o*n*f-a*l,C=n*a*f-o*l,S=a*a*f+u,P=o*a*f+n*l,D=n*o*f+a*l,z=a*o*f-n*l,O=o*o*f+u,e[0]=c*E+_*M+b*d,e[1]=h*E+T*M+w*d,e[2]=v*E+g*M+k*d,e[3]=p*E+A*M+x*d,e[4]=c*C+_*S+b*P,e[5]=h*C+T*S+w*P,e[6]=v*C+g*S+k*P,e[7]=p*C+A*S+x*P,e[8]=c*D+_*z+b*O,e[9]=h*D+T*z+w*O,e[10]=v*D+g*z+k*O,e[11]=p*D+A*z+x*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var u$=ne((k$t,l$)=>{l$.exports=R$e;function R$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+u*i,e[5]=o*n+f*i,e[6]=s*n+c*i,e[7]=l*n+h*i,e[8]=u*n-a*i,e[9]=f*n-o*i,e[10]=c*n-s*i,e[11]=h*n-l*i,e}});var c$=ne((C$t,f$)=>{f$.exports=D$e;function D$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-u*i,e[1]=o*n-f*i,e[2]=s*n-c*i,e[3]=l*n-h*i,e[8]=a*i+u*n,e[9]=o*i+f*n,e[10]=s*i+c*n,e[11]=l*i+h*n,e}});var v$=ne((L$t,h$)=>{h$.exports=I$e;function I$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+u*i,e[1]=o*n+f*i,e[2]=s*n+c*i,e[3]=l*n+h*i,e[4]=u*n-a*i,e[5]=f*n-o*i,e[6]=c*n-s*i,e[7]=h*n-l*i,e}});var p$=ne((P$t,d$)=>{d$.exports=F$e;function F$e(e,t,r){var i,n,a,o=r[0],s=r[1],l=r[2],u=Math.sqrt(o*o+s*s+l*l);return Math.abs(u)<1e-6?null:(u=1/u,o*=u,s*=u,l*=u,i=Math.sin(t),n=Math.cos(t),a=1-n,e[0]=o*o*a+n,e[1]=s*o*a+l*i,e[2]=l*o*a-s*i,e[3]=0,e[4]=o*s*a-l*i,e[5]=s*s*a+n,e[6]=l*s*a+o*i,e[7]=0,e[8]=o*l*a+s*i,e[9]=s*l*a-o*i,e[10]=l*l*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var y$=ne((R$t,g$)=>{g$.exports=q$e;function q$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,l=n+n,u=a+a,f=i*s,c=i*l,h=i*u,v=n*l,p=n*u,_=a*u,T=o*s,g=o*l,A=o*u;return e[0]=1-(v+_),e[1]=c+A,e[2]=h-g,e[3]=0,e[4]=c-A,e[5]=1-(f+_),e[6]=p+T,e[7]=0,e[8]=h+g,e[9]=p-T,e[10]=1-(f+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var x$=ne((D$t,m$)=>{m$.exports=z$e;function z$e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var b$=ne((I$t,_$)=>{_$.exports=O$e;function O$e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var T$=ne((F$t,w$)=>{w$.exports=B$e;function B$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var M$=ne((q$t,A$)=>{A$.exports=N$e;function N$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var E$=ne((z$t,S$)=>{S$.exports=U$e;function U$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var Tq=ne((O$t,k$)=>{k$.exports=V$e;function V$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,l=n+n,u=r*o,f=i*o,c=i*s,h=n*o,v=n*s,p=n*l,_=a*o,T=a*s,g=a*l;return e[0]=1-c-p,e[1]=f+g,e[2]=h-T,e[3]=0,e[4]=f-g,e[5]=1-u-p,e[6]=v+_,e[7]=0,e[8]=h+T,e[9]=v-_,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var L$=ne((B$t,C$)=>{C$.exports=H$e;function H$e(e,t,r,i,n,a,o){var s=1/(r-t),l=1/(n-i),u=1/(a-o);return e[0]=a*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}});var R$=ne((N$t,P$)=>{P$.exports=G$e;function G$e(e,t,r,i,n){var a=1/Math.tan(t/2),o=1/(i-n);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*o,e[15]=0,e}});var I$=ne((U$t,D$)=>{D$.exports=Y$e;function Y$e(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*l*.5),e[9]=(n-a)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var q$=ne((V$t,F$)=>{F$.exports=W$e;function W$e(e,t,r,i,n,a,o){var s=1/(t-r),l=1/(i-n),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(o+a)*u,e[15]=1,e}});var O$=ne((H$t,z$)=>{var X$e=wq();z$.exports=Z$e;function Z$e(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,p=t[0],_=t[1],T=t[2],g=i[0],A=i[1],b=i[2],w=r[0],k=r[1],x=r[2];return Math.abs(p-w)<1e-6&&Math.abs(_-k)<1e-6&&Math.abs(T-x)<1e-6?X$e(e):(f=p-w,c=_-k,h=T-x,v=1/Math.sqrt(f*f+c*c+h*h),f*=v,c*=v,h*=v,n=A*h-b*c,a=b*f-g*h,o=g*c-A*f,v=Math.sqrt(n*n+a*a+o*o),v?(v=1/v,n*=v,a*=v,o*=v):(n=0,a=0,o=0),s=c*o-h*a,l=h*n-f*o,u=f*a-c*n,v=Math.sqrt(s*s+l*l+u*u),v?(v=1/v,s*=v,l*=v,u*=v):(s=0,l=0,u=0),e[0]=n,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=c,e[7]=0,e[8]=o,e[9]=u,e[10]=h,e[11]=0,e[12]=-(n*p+a*_+o*T),e[13]=-(s*p+l*_+u*T),e[14]=-(f*p+c*_+h*T),e[15]=1,e)}});var N$=ne((G$t,B$)=>{B$.exports=j$e;function j$e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var Aq=ne((Y$t,U$)=>{U$.exports={create:NQ(),clone:VQ(),copy:GQ(),identity:wq(),transpose:XQ(),invert:jQ(),adjoint:JQ(),determinant:$Q(),multiply:t$(),translate:n$(),scale:a$(),rotate:s$(),rotateX:u$(),rotateY:c$(),rotateZ:v$(),fromRotation:p$(),fromRotationTranslation:y$(),fromScaling:x$(),fromTranslation:b$(),fromXRotation:T$(),fromYRotation:M$(),fromZRotation:E$(),fromQuat:Tq(),frustum:L$(),perspective:R$(),perspectiveFromFieldOfView:I$(),ortho:q$(),lookAt:O$(),str:N$()}});var Bk=ne(Ru=>{"use strict";var K$e=Aq();Ru.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};Ru.transposeRagged=function(e){var t=0,r=e.length,i,n;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var a=new Array(t);for(i=0;i<t;i++)for(a[i]=new Array(r),n=0;n<r;n++)a[i][n]=e[n][i];return a};Ru.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,n;if(e[0].length)for(i=new Array(r),n=0;n<r;n++)i[n]=Ru.dot(e[n],t);else if(t[0].length){var a=Ru.transposeRagged(t);for(i=new Array(a.length),n=0;n<a.length;n++)i[n]=Ru.dot(e,a[n])}else for(i=0,n=0;n<r;n++)i+=e[n]*t[n];return i};Ru.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};Ru.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};Ru.rotationXYMatrix=function(e,t,r){return Ru.dot(Ru.dot(Ru.translationMatrix(t,r),Ru.rotationMatrix(e)),Ru.translationMatrix(-t,-r))};Ru.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return Ru.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};Ru.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return Ru.dot(e,[r[0],r[1],1]).slice(0,2)}};Ru.apply2DTransform2=function(e){var t=Ru.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};Ru.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};Ru.inverseTransformMatrix=function(e){var t=[];return K$e.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var cA=ne((X$t,W$)=>{"use strict";var J$e=Ai(),Q$e=Wy(),$$e=Bk(),eet=Aq();function tet(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function ret(e){var t=J$e.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function V$(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function net(e,t){H$("global",e,t)}function H$(e,t,r){var i="plotly.js-style-"+e,n=document.getElementById(i);n||(n=document.createElement("style"),n.setAttribute("id",i),n.appendChild(document.createTextNode("")),document.head.appendChild(n));var a=n.sheet;a.insertRule?a.insertRule(t+"{"+r+"}",0):a.addRule?a.addRule(t,r,0):Q$e.warn("addStyleRule failed")}function iet(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&V$(r)}function aet(e){var t=Y$(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var n=G$(i);if(n){var a=$$e.convertCssMatrix(n);r=eet.multiply(r,r,a)}}),r}function G$(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function Y$(e){for(var t=[];oet(e);)t.push(e),e=e.parentNode;return t}function oet(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function set(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}W$.exports={getGraphDiv:tet,isPlotDiv:ret,removeElement:V$,addStyleRule:net,addRelatedStyleRule:H$,deleteRelatedStyleRule:iet,getFullTransformMatrix:aet,getElementTransformMatrix:G$,getElementAndAncestors:Y$,equalDomRects:set}});var hA=ne((Z$t,X$)=>{"use strict";X$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var Xs=ne((j$t,eee)=>{"use strict";var j$=oa().extendFlat,uet=Lg(),K$={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},J$={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},fet=K$.flags.slice().concat(["fullReplot"]),cet=J$.flags.slice().concat("layoutReplot");eee.exports={traces:K$,layout:J$,traceFlags:function(){return Z$(fet)},layoutFlags:function(){return Z$(cet)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),n=0;n<i.length;n++)e[i[n]]=!0},overrideAll:Q$};function Z$(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function Q$(e,t,r){var i=j$({},e);for(var n in i){var a=i[n];uet(a)&&(i[n]=$$(a,t,r,n))}return r==="from-root"&&(i.editType=t),i}function $$(e,t,r,i){if(e.valType){var n=j$({},e);if(n.editType=t,Array.isArray(e.items)){n.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)n.items[a]=$$(e.items[a],t,"from-root")}return n}else return Q$(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var hc=ne(Mq=>{"use strict";Mq.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};Mq.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var Sq=ne((J$t,tee)=>{"use strict";tee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var Ba=ne(Nk=>{"use strict";var ree=Sq(),Q$t=ree.FORMAT_LINK,$$t=ree.DATE_FORMAT_LINK;function Eq(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var i=[],n=0;n<r.length;n++)i[n]="`"+r[n]+"`";t=t+"Finally, the template string has access to ",r.length===1?t=t+"variable "+i[0]:t=t+"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}Nk.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Eq(t),i={valType:"string",dflt:"",editType:e.editType||"none"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Nk.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Eq(t),i={valType:"string",dflt:"",editType:e.editType||"calc"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Nk.shapeTexttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=e.newshape?"new ":"",i=Eq(t),n={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return n}});var Hk=ne((ter,iee)=>{"use strict";function Xy(e,t){return t?t.d2l(e):e}function nee(e,t){return t?t.l2d(e):e}function het(e){return e.x0}function vet(e){return e.x1}function det(e){return e.y0}function pet(e){return e.y1}function Uk(e,t){return Xy(e.x1,t)-Xy(e.x0,t)}function Vk(e,t,r){return Xy(e.y1,r)-Xy(e.y0,r)}function get(e,t){return Math.abs(Uk(e,t))}function yet(e,t,r){return Math.abs(Vk(e,t,r))}function met(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(Uk(e,t),2)+Math.pow(Vk(e,t,r),2))}function xet(e,t){return nee((Xy(e.x1,t)+Xy(e.x0,t))/2,t)}function _et(e,t,r){return nee((Xy(e.y1,r)+Xy(e.y0,r))/2,r)}function bet(e,t,r){return e.type!=="line"?void 0:Vk(e,t,r)/Uk(e,t)}iee.exports={x0:het,x1:vet,y0:det,y1:pet,slope:bet,dx:Uk,dy:Vk,width:get,height:yet,length:met,xcenter:xet,ycenter:_et}});var see=ne((rer,oee)=>{"use strict";var wet=Xs().overrideAll,ex=es(),aee=ll(),Tet=hc().dash,Zy=oa().extendFlat,Aet=Ba().shapeTexttemplateAttrs,Met=Hk();oee.exports=wet({newshape:{visible:Zy({},ex.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Zy({},ex.legend,{}),legendgroup:Zy({},ex.legendgroup,{}),legendgrouptitle:{text:Zy({},ex.legendgrouptitle.text,{}),font:aee({})},legendrank:Zy({},ex.legendrank,{}),legendwidth:Zy({},ex.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Zy({},Tet,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Zy({},ex.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:Aet({newshape:!0},{keys:Object.keys(Met)}),font:aee({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var uee=ne((ner,lee)=>{"use strict";var Eet=hc().dash,ket=oa().extendFlat;lee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:ket({},Eet,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var Gk=ne((ier,fee)=>{"use strict";fee.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var tx=ne((aer,dee)=>{"use strict";var kq=ll(),Cet=hA(),Yk=Ku(),cee=see(),hee=uee(),Let=Gk(),vee=oa().extendFlat,Wk=kq({editType:"calc"});Wk.family.dflt='"Open Sans", verdana, arial, sans-serif';Wk.size.dflt=12;Wk.color.dflt=Yk.defaultLine;dee.exports={font:Wk,title:{text:{valType:"string",editType:"layoutstyle"},font:kq({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:vee(Let({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:Yk.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:Yk.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:Yk.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:cee.newshape,activeshape:cee.activeshape,newselection:hee.newselection,activeselection:hee.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:vee({},Cet.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:kq({editType:"layoutstyle"})}}});var wi=ne(Za=>{"use strict";var e2=Wy(),pee=Ok(),gee=bq(),Pet=Lg(),Ret=cA().addStyleRule,yee=oa(),Det=es(),Iet=tx(),Fet=yee.extendFlat,Xk=yee.extendDeepAll;Za.modules={};Za.allCategories={};Za.allTypes=[];Za.subplotsRegistry={};Za.transformsRegistry={};Za.componentsRegistry={};Za.layoutArrayContainers=[];Za.layoutArrayRegexes=[];Za.traceLayoutAttributes={};Za.localeRegistry={};Za.apiMethodRegistry={};Za.collectableSubplotTypes=null;Za.register=function(t){if(Za.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":qet(i);break;case"transform":Bet(i);break;case"component":Oet(i);break;case"locale":Net(i);break;case"apiMethod":var n=i.name;Za.apiMethodRegistry[n]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};Za.getModule=function(e){var t=Za.modules[wee(e)];return t?t._module:!1};Za.traceIs=function(e,t){if(e=wee(e),e==="various")return!1;var r=Za.modules[e];return r||(e&&e2.log("Unrecognized trace type "+e+"."),r=Za.modules[Det.type.dflt]),!!r.categories[t]};Za.getTransformIndices=function(e,t){for(var r=[],i=e.transforms||[],n=0;n<i.length;n++)i[n].type===t&&r.push(n);return r};Za.hasTransform=function(e,t){for(var r=e.transforms||[],i=0;i<r.length;i++)if(r[i].type===t)return!0;return!1};Za.getComponentMethod=function(e,t){var r=Za.componentsRegistry[e];return r&&r[t]||pee};Za.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return Za.apiMethodRegistry[e].apply(null,t)};function qet(e){var t=e.name,r=e.categories,i=e.meta;if(Za.modules[t]){e2.log("Type "+t+" already registered");return}Za.subplotsRegistry[e.basePlotModule.name]||zet(e.basePlotModule);for(var n={},a=0;a<r.length;a++)n[r[a]]=!0,Za.allCategories[r[a]]=!0;Za.modules[t]={_module:e,categories:n},i&&Object.keys(i).length&&(Za.modules[t].meta=i),Za.allTypes.push(t);for(var o in Za.componentsRegistry)xee(o,t);e.layoutAttributes&&Fet(Za.traceLayoutAttributes,e.layoutAttributes);var s=e.basePlotModule,l=s.name;if(l==="mapbox"){var u=s.constants.styleRules;for(var f in u)Ret(".js-plotly-plot .plotly .mapboxgl-"+f,u[f])}(l==="geo"||l==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function zet(e){var t=e.name;if(Za.subplotsRegistry[t]){e2.log("Plot type "+t+" already registered.");return}mee(e),Za.subplotsRegistry[t]=e;for(var r in Za.componentsRegistry)bee(r,e.name)}function Oet(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;Za.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&gee(Za.layoutArrayContainers,t),mee(e));for(var r in Za.modules)xee(t,r);for(var i in Za.subplotsRegistry)bee(t,i);for(var n in Za.transformsRegistry)_ee(t,n);e.schema&&e.schema.layout&&Xk(Iet,e.schema.layout)}function Bet(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&e2.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),Pet(e.attributes)||e2.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&e2.log(t+" registered without a *supplyDefaults* method."),Za.transformsRegistry[e.name]=e;for(var n in Za.componentsRegistry)_ee(n,e.name)}function Net(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,n=e.format,a=i&&Object.keys(i).length,o=n&&Object.keys(n).length,s=Za.localeRegistry,l=s[t];if(l||(s[t]=l={}),r!==t){var u=s[r];u||(s[r]=u={}),a&&u.dictionary===l.dictionary&&(u.dictionary=i),o&&u.format===l.format&&(u.format=n)}a&&(l.dictionary=i),o&&(l.format=n)}function mee(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)gee(Za.layoutArrayRegexes,t[r])}}function xee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&Xk(Za.modules[t]._module.attributes,i)}}function _ee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.transforms)){var i=r.transforms[t];i&&Xk(Za.transformsRegistry[t].attributes,i)}}function bee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=Za.subplotsRegistry[t],n=i.layoutAttributes,a=i.attr==="subplot"?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var o=r.subplots[a];n&&o&&Xk(n,o)}}function wee(e){return typeof e=="object"&&(e=e.type),e}});var Pee=ne(Du=>{"use strict";var Uet=Xb().timeFormat,Cee=la(),Cq=Wy(),Ky=jb().mod,n2=$a(),Jd=n2.BADNUM,Qv=n2.ONEDAY,vA=n2.ONEHOUR,jy=n2.ONEMIN,r2=n2.ONESEC,dA=n2.EPOCHJD,Rg=wi(),Tee=Xb().utcFormat,Vet=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,Het=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,Aee=new Date().getFullYear()-70;function Dg(e){return e&&Rg.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}Du.dateTick0=function(e,t){var r=Get(e,!!t);if(t<2)return r;var i=Du.dateTime2ms(r,e);return i+=Qv*(t-1),Du.ms2DateTime(i,0,e)};function Get(e,t){return Dg(e)?t?Rg.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:Rg.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}Du.dfltRange=function(e){return Dg(e)?Rg.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};Du.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var jk,Kk;Du.dateTime2ms=function(e,t){if(Du.isJSDate(e)){var r=e.getTimezoneOffset()*jy,i=(e.getUTCMinutes()-e.getMinutes())*jy+(e.getUTCSeconds()-e.getSeconds())*r2+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var n=3*jy;r=r-n/2+Ky(i-r+n/2,n)}return e=Number(e)-r,e>=jk&&e<=Kk?e:Jd}if(typeof e!="string"&&typeof e!="number")return Jd;e=String(e);var a=Dg(t),o=e.charAt(0);a&&(o==="G"||o==="g")&&(e=e.substr(1),t="");var s=a&&t.substr(0,7)==="chinese",l=e.match(s?Het:Vet);if(!l)return Jd;var u=l[1],f=l[3]||"1",c=Number(l[5]||1),h=Number(l[7]||0),v=Number(l[9]||0),p=Number(l[11]||0);if(a){if(u.length===2)return Jd;u=Number(u);var _;try{var T=Rg.getComponentMethod("calendars","getCal")(t);if(s){var g=f.charAt(f.length-1)==="i";f=parseInt(f,10),_=T.newDate(u,T.toMonthIndex(u,f,g),c)}else _=T.newDate(u,Number(f),c)}catch(b){return Jd}return _?(_.toJD()-dA)*Qv+h*vA+v*jy+p*r2:Jd}u.length===2?u=(Number(u)+2e3-Aee)%100+Aee:u=Number(u),f-=1;var A=new Date(Date.UTC(2e3,f,c,h,v));return A.setUTCFullYear(u),A.getUTCMonth()!==f||A.getUTCDate()!==c?Jd:A.getTime()+p*r2};jk=Du.MIN_MS=Du.dateTime2ms("-9999");Kk=Du.MAX_MS=Du.dateTime2ms("9999-12-31 23:59:59.9999");Du.isDateTime=function(e,t){return Du.dateTime2ms(e,t)!==Jd};function t2(e,t){return String(e+Math.pow(10,t)).substr(1)}var Zk=90*Qv,Mee=3*vA,See=5*jy;Du.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=jk&&e<=Kk))return Jd;t||(t=0);var i=Math.floor(Ky(e+.05,1)*10),n=Math.round(e-i/10),a,o,s,l,u,f;if(Dg(r)){var c=Math.floor(n/Qv)+dA,h=Math.floor(Ky(e,Qv));try{a=Rg.getComponentMethod("calendars","getCal")(r).fromJD(c).formatDate("yyyy-mm-dd")}catch(v){a=Tee("G%Y-%m-%d")(new Date(n))}if(a.charAt(0)==="-")for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=t<Zk?Math.floor(h/vA):0,s=t<Zk?Math.floor(h%vA/jy):0,l=t<Mee?Math.floor(h%jy/r2):0,u=t<See?h%r2*10+i:0}else f=new Date(n),a=Tee("%Y-%m-%d")(f),o=t<Zk?f.getUTCHours():0,s=t<Zk?f.getUTCMinutes():0,l=t<Mee?f.getUTCSeconds():0,u=t<See?f.getUTCMilliseconds()*10+i:0;return Lee(a,o,s,l,u)};Du.ms2DateTimeLocal=function(e){if(!(e>=jk+Qv&&e<=Kk-Qv))return Jd;var t=Math.floor(Ky(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=Uet("%Y-%m-%d")(r),n=r.getHours(),a=r.getMinutes(),o=r.getSeconds(),s=r.getUTCMilliseconds()*10+t;return Lee(i,n,a,o,s)};function Lee(e,t,r,i,n){if((t||r||i||n)&&(e+=" "+t2(t,2)+":"+t2(r,2),(i||n)&&(e+=":"+t2(i,2),n))){for(var a=4;n%10===0;)a-=1,n/=10;e+="."+t2(n,a)}return e}Du.cleanDate=function(e,t,r){if(e===Jd)return t;if(Du.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(Dg(r))return Cq.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=Du.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!Du.isDateTime(e,r))return Cq.error("unrecognized date",e),t;return e};var Yet=/%\d?f/g,Wet=/%h/g,Xet={1:"1",2:"1",3:"2",4:"2"};function Eee(e,t,r,i){e=e.replace(Yet,function(a){var o=Math.min(+a.charAt(1)||6,6),s=(t/1e3%1+2).toFixed(o).substr(2).replace(/0+$/,"")||"0";return s});var n=new Date(Math.floor(t+.05));if(e=e.replace(Wet,function(){return Xet[r("%q")(n)]}),Dg(i))try{e=Rg.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(a){return"Invalid"}return r(e)(n)}var Zet=[59,59.9,59.99,59.999,59.9999];function jet(e,t){var r=Ky(e+.05,Qv),i=t2(Math.floor(r/vA),2)+":"+t2(Ky(Math.floor(r/jy),60),2);if(t!=="M"){Cee(t)||(t=0);var n=Math.min(Ky(e/r2,60),Zet[t]),a=(100+n).toFixed(t).substr(1);t>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+a}return i}Du.formatDate=function(e,t,r,i,n,a){if(n=Dg(n)&&n,!t)if(r==="y")t=a.year;else if(r==="m")t=a.month;else if(r==="d")t=a.dayMonth+`
`+a.year;else return jet(e,r)+`
`+Eee(a.dayMonthYear,e,i,n);return Eee(t,e,i,n)};var kee=3*Qv;Du.incrementMonth=function(e,t,r){r=Dg(r)&&r;var i=Ky(e,Qv);if(e=Math.round(e-i),r)try{var n=Math.round(e/Qv)+dA,a=Rg.getComponentMethod("calendars","getCal")(r),o=a.fromJD(n);return t%12?a.add(o,t,"m"):a.add(o,t/12,"y"),(o.toJD()-dA)*Qv+i}catch(l){Cq.error("invalid ms "+e+" in calendar "+r)}var s=new Date(e+kee);return s.setUTCMonth(s.getUTCMonth()+t)+i-kee};Du.findExactDates=function(e,t){for(var r=0,i=0,n=0,a=0,o,s,l=Dg(t)&&Rg.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++){if(s=e[u],!Cee(s)){a++;continue}if(!(s%Qv))if(l)try{o=l.fromJD(s/Qv+dA),o.day()===1?o.month()===1?r++:i++:n++}catch(c){}else o=new Date(s),o.getUTCDate()===1?o.getUTCMonth()===0?r++:i++:n++}i+=r,n+=i;var f=e.length-a;return{exactYears:r/f,exactMonths:i/f,exactDays:n/f}}});var pA=ne((ler,Ree)=>{"use strict";Ree.exports=function(t){return t}});var Jk=ne(Ig=>{"use strict";var Ket=la(),Jet=Wy(),Qet=pA(),$et=$a().BADNUM,Lq=1e-9;Ig.findBin=function(e,t,r){if(Ket(t.start))return r?Math.ceil((e-t.start)/t.size-Lq)-1:Math.floor((e-t.start)/t.size+Lq);var i=0,n=t.length,a=0,o=n>1?(t[n-1]-t[0])/(n-1):1,s,l;for(o>=0?l=r?ett:ttt:l=r?ntt:rtt,e+=o*Lq*(r?-1:1)*(o>=0?1:-1);i<n&&a++<100;)s=Math.floor((i+n)/2),l(t[s],e)?i=s+1:n=s;return a>90&&Jet.log("Long binary search..."),i-1};function ett(e,t){return e<t}function ttt(e,t){return e<=t}function rtt(e,t){return e>t}function ntt(e,t){return e>=t}Ig.sorterAsc=function(e,t){return e-t};Ig.sorterDes=function(e,t){return t-e};Ig.distinctVals=function(e){var t=e.slice();t.sort(Ig.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===$et;r--);for(var i=t[r]-t[0]||1,n=i/(r||1)/1e4,a=[],o,s=0;s<=r;s++){var l=t[s],u=l-o;o===void 0?(a.push(l),o=l):u>n&&(i=Math.min(i,u),a.push(l),o=l)}return{vals:a,minDiff:i}};Ig.roundUp=function(e,t,r){for(var i=0,n=t.length-1,a,o=0,s=r?0:1,l=r?1:0,u=r?Math.ceil:Math.floor;i<n&&o++<100;)a=u((i+n)/2),t[a]<=e?i=a+s:n=a-l;return t[i]};Ig.sort=function(e,t){for(var r=0,i=0,n=1;n<e.length;n++){var a=t(e[n],e[n-1]);if(a<0?r=1:a>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};Ig.findIndexOfMin=function(e,t){t=t||Qet;for(var r=1/0,i,n=0;n<e.length;n++){var a=t(e[n]);a<r&&(r=a,i=n)}return i}});var rx=ne((fer,Dee)=>{"use strict";Dee.exports=function(t){return Object.keys(t).sort()}});var Iee=ne(jf=>{"use strict";var gA=la(),itt=uh().isArrayOrTypedArray;jf.aggNums=function(e,t,r,i){var n,a;if((!i||i>r.length)&&(i=r.length),gA(t)||(t=!1),itt(r[0])){for(a=new Array(i),n=0;n<i;n++)a[n]=jf.aggNums(e,t,r[n]);r=a}for(n=0;n<i;n++)gA(t)?gA(r[n])&&(t=e(+t,+r[n])):t=r[n];return t};jf.len=function(e){return jf.aggNums(function(t){return t+1},0,e)};jf.mean=function(e,t){return t||(t=jf.len(e)),jf.aggNums(function(r,i){return r+i},0,e)/t};jf.midRange=function(e){if(!(e===void 0||e.length===0))return(jf.aggNums(Math.max,null,e)+jf.aggNums(Math.min,null,e))/2};jf.variance=function(e,t,r){return t||(t=jf.len(e)),gA(r)||(r=jf.mean(e,t)),jf.aggNums(function(i,n){return i+Math.pow(n-r,2)},0,e)/t};jf.stdev=function(e,t,r){return Math.sqrt(jf.variance(e,t,r))};jf.median=function(e){var t=e.slice().sort();return jf.interp(t,.5)};jf.interp=function(e,t){if(!gA(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var Bee=ne((her,Oee)=>{"use strict";var Fee=jb(),Pq=Fee.mod,att=Fee.modHalf,yA=Math.PI,Jy=2*yA;function ott(e){return e/180*yA}function stt(e){return e/yA*180}function Rq(e){return Math.abs(e[1]-e[0])>Jy-1e-14}function qee(e,t){return att(t-e,Jy)}function ltt(e,t){return Math.abs(qee(e,t))}function zee(e,t){if(Rq(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=Pq(r,Jy),i=Pq(i,Jy),r>i&&(i+=Jy);var n=Pq(e,Jy),a=n+Jy;return n>=r&&n<=i||a>=r&&a<=i}function utt(e,t,r,i){if(!zee(t,i))return!1;var n,a;return r[0]<r[1]?(n=r[0],a=r[1]):(n=r[1],a=r[0]),e>=n&&e<=a}function Dq(e,t,r,i,n,a,o){n=n||0,a=a||0;var s=Rq([r,i]),l,u,f,c,h;s?(l=0,u=yA,f=Jy):r<i?(l=r,f=i):(l=i,f=r),e<t?(c=e,h=t):(c=t,h=e);function v(g,A){return[g*Math.cos(A)+n,a-g*Math.sin(A)]}var p=Math.abs(f-l)<=yA?0:1;function _(g,A,b){return"A"+[g,g]+" "+[0,p,b]+" "+v(g,A)}var T;return s?c===null?T="M"+v(h,l)+_(h,u,0)+_(h,f,0)+"Z":T="M"+v(c,l)+_(c,u,0)+_(c,f,0)+"ZM"+v(h,l)+_(h,u,1)+_(h,f,1)+"Z":c===null?(T="M"+v(h,l)+_(h,f,0),o&&(T+="L0,0Z")):T="M"+v(c,l)+"L"+v(h,l)+_(h,f,0)+"L"+v(c,f)+_(c,l,1)+"Z",T}function ftt(e,t,r,i,n){return Dq(null,e,t,r,i,n,0)}function ctt(e,t,r,i,n){return Dq(null,e,t,r,i,n,1)}function htt(e,t,r,i,n,a){return Dq(e,t,r,i,n,a,1)}Oee.exports={deg2rad:ott,rad2deg:stt,angleDelta:qee,angleDist:ltt,isFullCircle:Rq,isAngleInsideSector:zee,isPtInsideSector:utt,pathArc:ftt,pathSector:ctt,pathAnnulus:htt}});var Nee=ne(nx=>{"use strict";nx.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};nx.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};nx.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};nx.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};nx.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};nx.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var Hee=ne(ix=>{"use strict";var Iq=jb().mod;ix.segmentsIntersect=Vee;function Vee(e,t,r,i,n,a,o,s){var l=r-e,u=n-e,f=o-n,c=i-t,h=a-t,v=s-a,p=l*v-f*c;if(p===0)return null;var _=(u*v-f*h)/p,T=(u*c-l*h)/p;return T<0||T>1||_<0||_>1?null:{x:e+l*_,y:t+c*_}}ix.segmentDistance=function(t,r,i,n,a,o,s,l){if(Vee(t,r,i,n,a,o,s,l))return 0;var u=i-t,f=n-r,c=s-a,h=l-o,v=u*u+f*f,p=c*c+h*h,_=Math.min(Qk(u,f,v,a-t,o-r),Qk(u,f,v,s-t,l-r),Qk(c,h,p,t-a,r-o),Qk(c,h,p,i-a,n-o));return Math.sqrt(_)};function Qk(e,t,r,i,n){var a=i*e+n*t;if(a<0)return i*i+n*n;if(a>r){var o=i-e,s=n-t;return o*o+s*s}else{var l=i*t-n*e;return l*l/r}}var $k,Fq,Uee;ix.getTextLocation=function(t,r,i,n){if((t!==Fq||n!==Uee)&&($k={},Fq=t,Uee=n),$k[i])return $k[i];var a=t.getPointAtLength(Iq(i-n/2,r)),o=t.getPointAtLength(Iq(i+n/2,r)),s=Math.atan((o.y-a.y)/(o.x-a.x)),l=t.getPointAtLength(Iq(i,r)),u=(l.x*4+a.x+o.x)/6,f=(l.y*4+a.y+o.y)/6,c={x:u,y:f,theta:s};return $k[i]=c,c};ix.clearLocationCache=function(){Fq=null};ix.getVisibleSegment=function(t,r,i){var n=r.left,a=r.right,o=r.top,s=r.bottom,l=0,u=t.getTotalLength(),f=u,c,h;function v(_){var T=t.getPointAtLength(_);_===0?c=T:_===u&&(h=T);var g=T.x<n?n-T.x:T.x>a?T.x-a:0,A=T.y<o?o-T.y:T.y>s?T.y-s:0;return Math.sqrt(g*g+A*A)}for(var p=v(l);p;){if(l+=p+i,l>f)return;p=v(l)}for(p=v(f);p;){if(f-=p+i,l>f)return;p=v(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-h.x)<.1&&Math.abs(c.y-h.y)<.1}};ix.findPointOnPath=function(t,r,i,n){n=n||{};for(var a=n.pathLength||t.getTotalLength(),o=n.tolerance||.001,s=n.iterationLimit||30,l=t.getPointAtLength(0)[i]>t.getPointAtLength(a)[i]?-1:1,u=0,f=0,c=a,h,v,p;u<s;){if(h=(f+c)/2,v=t.getPointAtLength(h),p=v[i]-r,Math.abs(p)<o)return v;l*p>0?c=h:f=h,u++}return v}});var eC=ne(mA=>{"use strict";var Fg={};mA.throttle=function(t,r,i){var n=Fg[t],a=Date.now();if(!n){for(var o in Fg)Fg[o].ts<a-6e4&&delete Fg[o];n=Fg[t]={ts:0,timer:null}}Gee(n);function s(){i(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(a>n.ts+r){s();return}n.timer=setTimeout(function(){s(),n.timer=null},r)};mA.done=function(e){var t=Fg[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};mA.clear=function(e){if(e)Gee(Fg[e]),delete Fg[e];else for(var t in Fg)mA.clear(t)};function Gee(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var Wee=ne((ger,Yee)=>{"use strict";Yee.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var Xee=ne((yer,tC)=>{"use strict";tC.exports=qq;tC.exports.isMobile=qq;tC.exports.default=qq;var vtt=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,dtt=/CrOS/,ptt=/android|ipad|playbook|silk/i;function qq(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=vtt.test(t)&&!dtt.test(t)||!!e.tablet&&ptt.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var jee=ne((mer,Zee)=>{"use strict";var gtt=la(),ytt=Xee();Zee.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=mtt(),typeof r!="string")return!0;var i=ytt({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var n=r.split(" "),a=1;a<n.length;a++){var o=n[a];if(o.indexOf("Safari")!==-1)for(var s=a-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(gtt(u)&&(u=+u),u>=13)return!0}}}return i};function mtt(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var Jee=ne((xer,Kee)=>{"use strict";var xtt=Ai();Kee.exports=function(t,r,i){var n=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(o){return o[0].trace.uid});n.exit().remove(),n.enter().append("g").attr("class",i),n.order();var a=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each(function(o){o[0][a]=xtt.select(this)}),n}});var $ee=ne((_er,Qee)=>{"use strict";var _tt=wi();Qee.exports=function(t,r){for(var i=t._context.locale,n=0;n<2;n++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[i]||{}).dictionary;if(s){var l=s[r];if(l)return l}a=_tt.localeRegistry}var u=i.split("-")[0];if(u===i)break;i=u}return r}});var zq=ne((ber,ete)=>{"use strict";ete.exports=function(t){for(var r={},i=[],n=0,a=0;a<t.length;a++){var o=t[a];r[o]!==1&&(r[o]=1,i[n++]=o)}return i}});var rte=ne((wer,tte)=>{"use strict";tte.exports=function(t){for(var r=Ttt(t)?wtt:btt,i=[],n=0;n<t.length;n++){var a=t[n];r(a)&&i.push(a)}return i};function btt(e){return e.visible===!0}function wtt(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function Ttt(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var ite=ne((Ter,nte)=>{"use strict";nte.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),n=i>1?(i*t+i*r)/i:t+r,a=String(n).length;if(a>16){var o=String(r).length,s=String(t).length;if(a>=s+o){var l=parseFloat(n).toPrecision(12);l.indexOf("e+")===-1&&(n=+l)}}return n}});var ote=ne((Aer,ate)=>{"use strict";var Att=la(),Mtt=$a().BADNUM,Stt=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ate.exports=function(t){return typeof t=="string"&&(t=t.replace(Stt,"")),Att(t)?Number(t):Mtt}});var Wt=ne((Mer,xte)=>{"use strict";var xA=Ai(),Ett=Xb().utcFormat,ktt=sq().format,hte=la(),vte=$a(),dte=vte.FP_SAFE,Ctt=-dte,ste=vte.BADNUM,Mr=xte.exports={};Mr.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var lte={};Mr.warnBadFormat=function(e){var t=String(e);lte[t]||(lte[t]=1,Mr.warn('encountered bad format: "'+t+'"'))};Mr.noFormat=function(e){return String(e)};Mr.numberFormat=function(e){var t;try{t=ktt(Mr.adjustFormat(e))}catch(r){return Mr.warnBadFormat(e),Mr.noFormat}return t};Mr.nestedProperty=iA();Mr.keyedContainer=oQ();Mr.relativeAttr=lQ();Mr.isPlainObject=Lg();Mr.toLogRange=Ck();Mr.relinkPrivateKeys=hQ();var Qy=uh();Mr.isArrayBuffer=Qy.isArrayBuffer;Mr.isTypedArray=Qy.isTypedArray;Mr.isArrayOrTypedArray=Qy.isArrayOrTypedArray;Mr.isArray1D=Qy.isArray1D;Mr.ensureArray=Qy.ensureArray;Mr.concat=Qy.concat;Mr.maxRowLength=Qy.maxRowLength;Mr.minRowLength=Qy.minRowLength;var pte=jb();Mr.mod=pte.mod;Mr.modHalf=pte.modHalf;var $y=LQ();Mr.valObjectMeta=$y.valObjectMeta;Mr.coerce=$y.coerce;Mr.coerce2=$y.coerce2;Mr.coerceFont=$y.coerceFont;Mr.coercePattern=$y.coercePattern;Mr.coerceHoverinfo=$y.coerceHoverinfo;Mr.coerceSelectionMarkerOpacity=$y.coerceSelectionMarkerOpacity;Mr.validate=$y.validate;var Ed=Pee();Mr.dateTime2ms=Ed.dateTime2ms;Mr.isDateTime=Ed.isDateTime;Mr.ms2DateTime=Ed.ms2DateTime;Mr.ms2DateTimeLocal=Ed.ms2DateTimeLocal;Mr.cleanDate=Ed.cleanDate;Mr.isJSDate=Ed.isJSDate;Mr.formatDate=Ed.formatDate;Mr.incrementMonth=Ed.incrementMonth;Mr.dateTick0=Ed.dateTick0;Mr.dfltRange=Ed.dfltRange;Mr.findExactDates=Ed.findExactDates;Mr.MIN_MS=Ed.MIN_MS;Mr.MAX_MS=Ed.MAX_MS;var ax=Jk();Mr.findBin=ax.findBin;Mr.sorterAsc=ax.sorterAsc;Mr.sorterDes=ax.sorterDes;Mr.distinctVals=ax.distinctVals;Mr.roundUp=ax.roundUp;Mr.sort=ax.sort;Mr.findIndexOfMin=ax.findIndexOfMin;Mr.sortObjectKeys=rx();var em=Iee();Mr.aggNums=em.aggNums;Mr.len=em.len;Mr.mean=em.mean;Mr.median=em.median;Mr.midRange=em.midRange;Mr.variance=em.variance;Mr.stdev=em.stdev;Mr.interp=em.interp;var Qp=Bk();Mr.init2dArray=Qp.init2dArray;Mr.transposeRagged=Qp.transposeRagged;Mr.dot=Qp.dot;Mr.translationMatrix=Qp.translationMatrix;Mr.rotationMatrix=Qp.rotationMatrix;Mr.rotationXYMatrix=Qp.rotationXYMatrix;Mr.apply3DTransform=Qp.apply3DTransform;Mr.apply2DTransform=Qp.apply2DTransform;Mr.apply2DTransform2=Qp.apply2DTransform2;Mr.convertCssMatrix=Qp.convertCssMatrix;Mr.inverseTransformMatrix=Qp.inverseTransformMatrix;var I0=Bee();Mr.deg2rad=I0.deg2rad;Mr.rad2deg=I0.rad2deg;Mr.angleDelta=I0.angleDelta;Mr.angleDist=I0.angleDist;Mr.isFullCircle=I0.isFullCircle;Mr.isAngleInsideSector=I0.isAngleInsideSector;Mr.isPtInsideSector=I0.isPtInsideSector;Mr.pathArc=I0.pathArc;Mr.pathSector=I0.pathSector;Mr.pathAnnulus=I0.pathAnnulus;var a2=Nee();Mr.isLeftAnchor=a2.isLeftAnchor;Mr.isCenterAnchor=a2.isCenterAnchor;Mr.isRightAnchor=a2.isRightAnchor;Mr.isTopAnchor=a2.isTopAnchor;Mr.isMiddleAnchor=a2.isMiddleAnchor;Mr.isBottomAnchor=a2.isBottomAnchor;var o2=Hee();Mr.segmentsIntersect=o2.segmentsIntersect;Mr.segmentDistance=o2.segmentDistance;Mr.getTextLocation=o2.getTextLocation;Mr.clearLocationCache=o2.clearLocationCache;Mr.getVisibleSegment=o2.getVisibleSegment;Mr.findPointOnPath=o2.findPointOnPath;var iC=oa();Mr.extendFlat=iC.extendFlat;Mr.extendDeep=iC.extendDeep;Mr.extendDeepAll=iC.extendDeepAll;Mr.extendDeepNoArrays=iC.extendDeepNoArrays;var Oq=Wy();Mr.log=Oq.log;Mr.warn=Oq.warn;Mr.error=Oq.error;var Ltt=Jb();Mr.counterRegex=Ltt.counter;var Bq=eC();Mr.throttle=Bq.throttle;Mr.throttleDone=Bq.done;Mr.clearThrottle=Bq.clear;var F0=cA();Mr.getGraphDiv=F0.getGraphDiv;Mr.isPlotDiv=F0.isPlotDiv;Mr.removeElement=F0.removeElement;Mr.addStyleRule=F0.addStyleRule;Mr.addRelatedStyleRule=F0.addRelatedStyleRule;Mr.deleteRelatedStyleRule=F0.deleteRelatedStyleRule;Mr.getFullTransformMatrix=F0.getFullTransformMatrix;Mr.getElementTransformMatrix=F0.getElementTransformMatrix;Mr.getElementAndAncestors=F0.getElementAndAncestors;Mr.equalDomRects=F0.equalDomRects;Mr.clearResponsive=Wee();Mr.preserveDrawingBuffer=jee();Mr.makeTraceGroups=Jee();Mr._=$ee();Mr.notifier=mq();Mr.filterUnique=zq();Mr.filterVisible=rte();Mr.pushUnique=bq();Mr.increment=ite();Mr.cleanNumber=ote();Mr.ensureNumber=function(t){return hte(t)?(t=Number(t),t>dte||t<Ctt?ste:t):ste};Mr.isIndex=function(e,t){return t!==void 0&&e>=t?!1:hte(e)&&e>=0&&e%1===0};Mr.noop=Ok();Mr.identity=pA();Mr.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};Mr.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var n=0;n<t.length;n++){var a=t[n],o=Mr.nestedProperty(e,a.replace("?",r)),s=Mr.nestedProperty(e,a.replace("?",i)),l=o.get();o.set(s.get()),s.set(l)}};Mr.raiseToTop=function(t){t.parentNode.appendChild(t)};Mr.cancelTransition=function(e){return e.transition().duration(0)};Mr.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};Mr.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};Mr.simpleMap=function(e,t,r,i,n){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],r,i,n);return o};Mr.randstr=function e(t,r,i,n){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var a=Math.log(Math.pow(2,r))/Math.log(i),o="",s,l,u;for(s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,r/s))/Math.log(i)*s;var f=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)u=Math.floor(Math.random()*i).toString(i),o=u+o;f&&(l=Math.pow(i,f),u=Math.floor(Math.random()*l).toString(i),o=u+o);var c=parseInt(o,i);return t&&t[o]||c!==1/0&&c>=Math.pow(2,r)?n>10?(Mr.warn("randstr failed uniqueness"),o):e(t,r,i,(n||0)+1):o};Mr.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};Mr.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,n=2*t-1,a=new Array(n),o=new Array(r),s,l,u,f;for(s=0;s<n;s++)a[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t);for(s=0;s<r;s++){for(f=0,l=0;l<n;l++)u=s+l+1-t,u<-r?u-=i*Math.round(u/i):u>=i&&(u-=i*Math.floor(u/i)),u<0?u=-1-u:u>=r&&(u=i-1-u),f+=e[u]*a[l];o[s]=f}return o};Mr.syncOrAsync=function(e,t,r){var i,n;function a(){return Mr.syncOrAsync(e,t,r)}for(;e.length;)if(n=e.splice(0,1)[0],i=n(t),i&&i.then)return i.then(a);return r&&r(t)};Mr.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};Mr.noneOrAll=function(e,t,r){if(e){var i=!1,n=!0,a,o;for(a=0;a<r.length;a++)o=e[r[a]],o!=null?i=!0:n=!1;if(i&&!n)for(a=0;a<r.length;a++)e[r[a]]=t[r[a]]}};Mr.mergeArray=function(e,t,r,i){var n=typeof i=="function";if(Mr.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][r]=n?i(s):s}};Mr.mergeArrayCastPositive=function(e,t,r){return Mr.mergeArray(e,t,r,function(i){var n=+i;return isFinite(n)&&n>0?n:0})};Mr.fillArray=function(e,t,r,i){if(i=i||Mr.identity,Mr.isArrayOrTypedArray(e))for(var n=0;n<t.length;n++)t[n][r]=i(e[n])};Mr.castOption=function(e,t,r,i){i=i||Mr.identity;var n=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(n)?Array.isArray(t)&&Mr.isArrayOrTypedArray(n[t[0]])?i(n[t[0]][t[1]]):i(n[t]):n};Mr.extractOption=function(e,t,r,i){if(r in e)return e[r];var n=Mr.nestedProperty(t,i).get();if(!Array.isArray(n))return n};function gte(e){var t={};for(var r in e)for(var i=e[r],n=0;n<i.length;n++)t[i[n]]=+r;return t}Mr.tagSelected=function(e,t,r){var i=t.selectedpoints,n=t._indexToPoints,a;n&&(a=gte(n));function o(c){return c!==void 0&&c<e.length}for(var s=0;s<i.length;s++){var l=i[s];if(Mr.isIndex(l)||Mr.isArrayOrTypedArray(l)&&Mr.isIndex(l[0])&&Mr.isIndex(l[1])){var u=a?a[l]:l,f=r?r[u]:u;o(f)&&(e[f].selected=1)}}};Mr.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=gte(r),n=[],a=0;a<t.length;a++){var o=t[a];if(Mr.isIndex(o)){var s=i[o];Mr.isIndex(s)&&n.push(s)}}return n}else return t};Mr.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(i)?i:!1}else if(Mr.isArrayOrTypedArray(r))return r;return!1};function yte(e,t,r){var i={};typeof t!="object"&&(t={});var n=r==="pieLike"?-1:3,a=Object.keys(e),o,s,l;for(o=0;o<a.length;o++)s=a[o],l=e[s],!(s.charAt(0)==="_"||typeof l=="function")&&(s==="module"?i[s]=l:Array.isArray(l)?s==="colorscale"||n===-1?i[s]=l.slice():i[s]=l.slice(0,n):Mr.isTypedArray(l)?n===-1?i[s]=l.subarray():i[s]=l.subarray(0,n):l&&typeof l=="object"?i[s]=yte(e[s],t[s],r):i[s]=l);for(a=Object.keys(t),o=0;o<a.length;o++)s=a[o],l=t[s],(typeof l!="object"||!(s in i)||typeof i[s]!="object")&&(i[s]=l);return i}Mr.minExtend=yte;Mr.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};Mr.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};Mr.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var Ptt=/Version\/[\d\.]+.*Safari/;Mr.isSafari=function(){return Ptt.test(window.navigator.userAgent)};var Rtt=/iPad|iPhone|iPod/;Mr.isIOS=function(){return Rtt.test(window.navigator.userAgent)};var Dtt=/Firefox\/(\d+)\.\d+/;Mr.getFirefoxVersion=function(){var e=Dtt.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};Mr.isD3Selection=function(e){return e instanceof xA.selection};Mr.ensureSingle=function(e,t,r,i){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var a=e.append(t);return r&&a.classed(r,!0),i&&a.call(i),a};Mr.ensureSingleById=function(e,t,r,i){var n=e.select(t+"#"+r);if(n.size())return n;var a=e.append(t).attr("id",r);return i&&a.call(i),a};Mr.objectFromPath=function(e,t){for(var r=e.split("."),i,n=i={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],i=i[o]=[],a===r.length-1?i[s]=t:i[s]={},i=i[s]):(a===r.length-1?i[o]=t:i[o]={},i=i[o])}return n};var Itt=/^([^\[\.]+)\.(.+)?/,Ftt=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function rC(e){return e.slice(0,2)==="__"}Mr.expandObjectPaths=function(e){var t,r,i,n,a,o,s;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(Itt)){if(n=e[r],i=t[1],rC(i))continue;delete e[r],e[i]=Mr.extendDeepNoArrays(e[i]||{},Mr.objectFromPath(r,Mr.expandObjectPaths(n))[i])}else if(t=r.match(Ftt)){if(n=e[r],i=t[1],rC(i))continue;if(a=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")s=t[4],o=e[i][a]=e[i][a]||{},Mr.extendDeepNoArrays(o,Mr.objectFromPath(s,Mr.expandObjectPaths(n)));else{if(rC(i))continue;e[i][a]=Mr.expandObjectPaths(n)}}else{if(rC(r))continue;e[r]=Mr.expandObjectPaths(e[r])}}return e};Mr.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,n=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?n+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+l};Mr.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var mte=/^\w*$/;Mr.templateString=function(e,t){var r={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(i,n){var a;return mte.test(n)?a=t[n]:(r[n]=r[n]||Mr.nestedProperty(t,n).get,a=r[n]()),Mr.isValidTextValue(a)?a:""})};var qtt={max:10,count:0,name:"hovertemplate"};Mr.hovertemplateString=function(){return Nq.apply(qtt,arguments)};var ztt={max:10,count:0,name:"texttemplate"};Mr.texttemplateString=function(){return Nq.apply(ztt,arguments)};var Ott=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function Btt(e){var t=e.match(Ott);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var Ntt={max:10,count:0,name:"texttemplate",parseMultDiv:!0};Mr.texttemplateStringForShapes=function(){return Nq.apply(Ntt,arguments)};var ute=/^[:|\|]/;function Nq(e,t,r){var i=this,n=arguments;t||(t={});var a={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(o,s,l){var u=s==="xother"||s==="yother",f=s==="_xother"||s==="_yother",c=s==="_xother_"||s==="_yother_",h=s==="xother_"||s==="yother_",v=u||f||h||c,p=s;(f||c)&&(p=p.substring(1)),(h||c)&&(p=p.substring(0,p.length-1));var _=null,T=null;if(i.parseMultDiv){var g=Btt(p);p=g.key,_=g.op,T=g.number}var A;if(v){if(A=t[p],A===void 0)return""}else{var b,w;for(w=3;w<n.length;w++)if(b=n[w],!!b){if(b.hasOwnProperty(p)){A=b[p];break}if(mte.test(p)||(A=Mr.nestedProperty(b,p).get(),A=a[p]||Mr.nestedProperty(b,p).get(),A&&(a[p]=A)),A!==void 0)break}}if(A!==void 0&&(_==="*"&&(A*=T),_==="/"&&(A/=T)),A===void 0&&i)return i.count<i.max&&(Mr.warn("Variable '"+p+"' in "+i.name+" could not be found!"),A=o),i.count===i.max&&Mr.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,o;if(l){var k;if(l[0]===":"&&(k=r?r.numberFormat:Mr.numberFormat,A=k(l.replace(ute,""))(A)),l[0]==="|"){k=r?r.timeFormat:Ett;var x=Mr.dateTime2ms(A);A=Mr.formatDate(x,l.replace(ute,""),!1,k)}}else{var E=p+"Label";t.hasOwnProperty(E)&&(A=t[E])}return v&&(A="("+A+")",(f||c)&&(A=" "+A),(h||c)&&(A=A+" ")),A})}var nC=48,fte=57;Mr.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,n=0,a=0;a<r;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=nC&&o<=fte,u=s>=nC&&s<=fte;if(l&&(i=10*i+o-nC),u&&(n=10*n+s-nC),!l||!u){if(i!==n)return i-n;if(o!==s)return o-s}}return n-i};var i2=2e9;Mr.seedPseudoRandom=function(){i2=2e9};Mr.pseudoRandom=function(){var e=i2;return i2=(69069*i2+1)%4294967296,Math.abs(i2-e)<429496729?Mr.pseudoRandom():i2/4294967296};Mr.fillText=function(e,t,r){var i=Array.isArray(r)?function(o){r.push(o)}:function(o){r.text=o},n=Mr.extractOption(e,t,"htx","hovertext");if(Mr.isValidTextValue(n))return i(n);var a=Mr.extractOption(e,t,"tx","text");if(Mr.isValidTextValue(a))return i(a)};Mr.isValidTextValue=function(e){return e||e===0};Mr.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};Mr.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};Mr.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};Mr.strRotate=function(e){return e?"rotate("+e+")":""};Mr.strScale=function(e){return e!==1?"scale("+e+")":""};Mr.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,n=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,u=e.scale;return u?u>1&&(u=1):u=0,Mr.strTranslate(n-u*(r+o),a-u*(i+s))+Mr.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+i)+")":"")};Mr.setTransormAndDisplay=function(e,t){e.attr("transform",Mr.getTextTransform(t)),e.style("display",t.scale?null:"none")};Mr.ensureUniformFontSize=function(e,t){var r=Mr.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};Mr.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};Mr.bigFont=function(e){return Math.round(1.2*e)};var cte=Mr.getFirefoxVersion(),Utt=cte!==null&&cte<86;Mr.getPositionFromD3Event=function(){return Utt?[xA.event.layerX,xA.event.layerY]:[xA.event.offsetX,xA.event.offsetY]}});var wte=ne(()=>{"use strict";var Vtt=Wt(),_te={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(Uq in _te)bte=Uq.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),Vtt.addStyleRule(bte,_te[Uq]);var bte,Uq});var Vq=ne((ker,Tte)=>{Tte.exports=!0});var Gq=ne((Cer,Ate)=>{"use strict";var Htt=Vq(),Hq;typeof window.matchMedia=="function"?Hq=!window.matchMedia("(hover: none)").matches:Hq=Htt;Ate.exports=Hq});var ox=ne((Ler,Yq)=>{"use strict";var s2=typeof Reflect=="object"?Reflect:null,Mte=s2&&typeof s2.apply=="function"?s2.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},aC;s2&&typeof s2.ownKeys=="function"?aC=s2.ownKeys:Object.getOwnPropertySymbols?aC=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:aC=function(t){return Object.getOwnPropertyNames(t)};function Gtt(e){console&&console.warn&&console.warn(e)}var Ete=Number.isNaN||function(t){return t!==t};function xl(){xl.init.call(this)}Yq.exports=xl;Yq.exports.once=Ztt;xl.EventEmitter=xl;xl.prototype._events=void 0;xl.prototype._eventsCount=0;xl.prototype._maxListeners=void 0;var Ste=10;function oC(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xl,"defaultMaxListeners",{enumerable:!0,get:function(){return Ste},set:function(e){if(typeof e!="number"||e<0||Ete(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ste=e}});xl.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xl.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ete(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function kte(e){return e._maxListeners===void 0?xl.defaultMaxListeners:e._maxListeners}xl.prototype.getMaxListeners=function(){return kte(this)};xl.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=t==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")Mte(l,this,r);else for(var u=l.length,f=Dte(l,u),i=0;i<u;++i)Mte(f[i],this,r);return!0};function Cte(e,t,r,i){var n,a,o;if(oC(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),o===void 0)o=a[t]=r,++e._eventsCount;else if(typeof o=="function"?o=a[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=kte(e),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,Gtt(s)}return e}xl.prototype.addListener=function(t,r){return Cte(this,t,r,!1)};xl.prototype.on=xl.prototype.addListener;xl.prototype.prependListener=function(t,r){return Cte(this,t,r,!0)};function Ytt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Lte(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=Ytt.bind(i);return n.listener=r,i.wrapFn=n,n}xl.prototype.once=function(t,r){return oC(r),this.on(t,Lte(this,t,r)),this};xl.prototype.prependOnceListener=function(t,r){return oC(r),this.prependListener(t,Lte(this,t,r)),this};xl.prototype.removeListener=function(t,r){var i,n,a,o,s;if(oC(r),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():Wtt(i,a),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};xl.prototype.off=xl.prototype.removeListener;xl.prototype.removeAllListeners=function(t){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function Pte(e,t,r){var i=e._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Xtt(n):Dte(n,n.length)}xl.prototype.listeners=function(t){return Pte(this,t,!0)};xl.prototype.rawListeners=function(t){return Pte(this,t,!1)};xl.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Rte.call(e,t)};xl.prototype.listenerCount=Rte;function Rte(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xl.prototype.eventNames=function(){return this._eventsCount>0?aC(this._events):[]};function Dte(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function Wtt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Xtt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Ztt(e,t){return new Promise(function(r,i){function n(o){e.removeListener(t,a),i(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}Ite(e,t,a,{once:!0}),t!=="error"&&jtt(e,n,{once:!0})})}function jtt(e,t,r){typeof e.on=="function"&&Ite(e,"error",t,r)}function Ite(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(a){i.once&&e.removeEventListener(t,n),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var l2=ne((Per,Fte)=>{"use strict";var Wq=ox().EventEmitter,Ktt={init:function(e){if(e._ev instanceof Wq)return e;var t=new Wq,r=new Wq;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,n){typeof jQuery!="undefined"&&jQuery(e).trigger(i,n),t.emit(i,n),r.emit(i,n)},e},triggerHandler:function(e,t,r){var i,n;typeof jQuery!="undefined"&&(i=jQuery(e).triggerHandler(t,r));var a=e._ev;if(!a)return i;var o=a._events[t];if(!o)return i;function s(u){if(u.listener){if(a.removeListener(t,u.listener),!u.fired)return u.fired=!0,u.listener.apply(a,[r])}else return u.apply(a,[r])}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++)s(o[l]);return n=s(o[l]),i!==void 0?i:n},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};Fte.exports=Ktt});var Ote=ne((Rer,zte)=>{"use strict";var qte=Wt(),Jtt=$1().dfltConfig;function Qtt(e,t){for(var r=[],i,n=0;n<t.length;n++)i=t[n],i===e?r[n]=i:typeof i=="object"?r[n]=Array.isArray(i)?qte.extendDeep([],i):qte.extendDeepAll({},i):r[n]=i;return r}var qg={};qg.add=function(e,t,r,i,n){var a,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(r),a.redo.calls.push(i),a.redo.args.push(n)),e.undoQueue.queue.length>Jtt.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};qg.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};qg.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};qg.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)qg.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};qg.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)qg.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};qg.plotDo=function(e,t,r){e.autoplay=!0,r=Qtt(e,r),t.apply(null,r)};zte.exports=qg});var Xq=ne((Der,Bte)=>{"use strict";Bte.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var tm=ne(Ju=>{"use strict";var fh=wi(),wA=Wt(),bA=es(),Zq=tx(),$tt=Xq(),ert=hA(),trt=$1().configAttributes,Nte=Xs(),Qd=wA.extendDeepAll,u2=wA.isPlainObject,rrt=wA.isArrayOrTypedArray,sC=wA.nestedProperty,nrt=wA.valObjectMeta,jq="_isSubplotObj",lC="_isLinkedToArray",irt="_arrayAttrRegexps",Vte="_deprecated",Kq=[jq,lC,irt,Vte];Ju.IS_SUBPLOT_OBJ=jq;Ju.IS_LINKED_TO_ARRAY=lC;Ju.DEPRECATED=Vte;Ju.UNDERSCORE_ATTRS=Kq;Ju.get=function(){var e={};fh.allTypes.forEach(function(r){e[r]=ort(r)});var t={};return Object.keys(fh.transformsRegistry).forEach(function(r){t[r]=lrt(r)}),{defs:{valObjects:nrt,metaKeys:Kq.concat(["description","role","editType","impliedEdits"]),editType:{traces:Nte.traces,layout:Nte.layout},impliedEdits:{}},traces:e,layout:srt(),transforms:t,frames:urt(),animation:sx(ert),config:sx(trt)}};Ju.crawl=function(e,t,r,i){var n=r||0;i=i||"",Object.keys(e).forEach(function(a){var o=e[a];if(Kq.indexOf(a)===-1){var s=(i?i+".":"")+a;t(o,a,e,n,s),!Ju.isValObject(o)&&u2(o)&&a!=="impliedEdits"&&Ju.crawl(o,t,n+1,s)}})};Ju.isValObject=function(e){return e&&e.valType!==void 0};Ju.findArrayAttributes=function(e){var t=[],r=[],i=[],n,a;function o(h,v,p,_){r=r.slice(0,_).concat([v]),i=i.slice(0,_).concat([h&&h._isLinkedToArray]);var T=h&&(h.valType==="data_array"||h.arrayOk===!0)&&!(r[_-1]==="colorbar"&&(v==="ticktext"||v==="tickvals"));T&&s(n,0,"")}function s(h,v,p){var _=h[r[v]],T=p+r[v];if(v===r.length-1)rrt(_)&&t.push(a+T);else if(i[v]){if(Array.isArray(_))for(var g=0;g<_.length;g++)u2(_[g])&&s(_[g],v+1,T+"["+g+"].")}else u2(_)&&s(_,v+1,T+".")}n=e,a="",Ju.crawl(bA,o),e._module&&e._module.attributes&&Ju.crawl(e._module.attributes,o);var l=e.transforms;if(l)for(var u=0;u<l.length;u++){var f=l[u],c=f._module;c&&(a="transforms["+u+"].",n=f,Ju.crawl(c.attributes,o))}return t};Ju.getTraceValObject=function(e,t){var r=t[0],i=1,n,a;if(r==="transforms"){if(t.length===1)return bA.transforms;var o=e.transforms;if(!Array.isArray(o)||!o.length)return!1;var s=t[1];if(!_A(s)||s>=o.length)return!1;n=(fh.transformsRegistry[o[s].type]||{}).attributes,a=n&&n[t[2]],i=3}else{var l=e._module;if(l||(l=(fh.modules[e.type||bA.type.dflt]||{})._module),!l)return!1;if(n=l.attributes,a=n&&n[r],!a){var u=l.basePlotModule;u&&u.attributes&&(a=u.attributes[r])}a||(a=bA[r])}return Hte(a,t,i)};Ju.getLayoutValObject=function(e,t){var r=art(e,t[0]);return Hte(r,t,1)};function art(e,t){var r,i,n,a,o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){if(n=o[r],n.attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;!s&&n.layoutAttributes&&(s=n.layoutAttributes)}var l=n.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u){for(r=0;r<u.length;r++)if(a=u[r].layoutAttributes,a&&t in a)return a[t]}for(i in fh.componentsRegistry){if(n=fh.componentsRegistry[i],n.name==="colorscale"&&t.indexOf("coloraxis")===0)return n.layoutAttributes[t];if(!n.schema&&t===n.name)return n.layoutAttributes}return t in Zq?Zq[t]:!1}function Hte(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(_A(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(u2(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!_A(t[r]))return!1}else if(e.valType==="info_array"){r++;var n=t[r];if(!_A(n))return!1;var a=e.items;if(Array.isArray(a)){if(n>=a.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var o=t[r];if(!_A(o))return!1;e=a[n][o]}else e=a[n]}else e=a}}return e}function _A(e){return e===Math.round(e)&&e>=0}function ort(e){var t,r;t=fh.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var n=Qd({},bA),a=Qd({},t.attributes);Ju.crawl(a,function(l,u,f,c,h){sC(n,h).set(void 0),l===void 0&&sC(a,h).set(void 0)}),Qd(i,n),fh.traceIs(e,"noOpacity")&&delete i.opacity,fh.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),fh.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,Qd(i,a),r.attributes&&Qd(i,r.attributes),i.type=e;var o={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:sx(i)};if(t.layoutAttributes){var s={};Qd(s,t.layoutAttributes),o.layoutAttributes=sx(s)}return t.animatable||Ju.crawl(o,function(l){Ju.isValObject(l)&&"anim"in l&&delete l.anim}),o}function srt(){var e={},t,r;Qd(e,Zq);for(t in fh.subplotsRegistry)if(r=fh.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)Ute(e,r,r.attr[i]);else{var n=r.attr==="subplot"?r.name:r.attr;Ute(e,r,n)}for(t in fh.componentsRegistry){r=fh.componentsRegistry[t];var a=r.schema;if(a&&(a.subplots||a.layout)){var o=a.subplots;if(o&&o.xaxis&&!o.yaxis)for(var s in o.xaxis)delete e.yaxis[s];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?Qd(e,r.layoutAttributes):r.layoutAttributes&&Gte(e,r.layoutAttributes,r.name)}return{layoutAttributes:sx(e)}}function lrt(e){var t=fh.transformsRegistry[e],r=Qd({},t.attributes);return Object.keys(fh.componentsRegistry).forEach(function(i){var n=fh.componentsRegistry[i];n.schema&&n.schema.transforms&&n.schema.transforms[e]&&Object.keys(n.schema.transforms[e]).forEach(function(a){Gte(r,n.schema.transforms[e][a],a)})}),{attributes:sx(r)}}function urt(){var e={frames:Qd({},$tt)};return sx(e),e.frames}function sx(e){return frt(e),crt(e),hrt(e),e}function frt(e){function t(i){return{valType:"string",editType:"none"}}function r(i,n,a){Ju.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(a[n+"src"]=t(n)):u2(i)&&(i.role="object")}Ju.crawl(e,r)}function crt(e){function t(r,i,n){if(r){var a=r[lC];a&&(delete r[lC],n[i]={items:{}},n[i].items[a]=r,n[i].role="object")}}Ju.crawl(e,t)}function hrt(e){function t(r){for(var i in r)if(u2(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var n=0;n<r[i].length;n++)t(r[i][n]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function Ute(e,t,r){var i=sC(e,r),n=Qd({},t.layoutAttributes);n[jq]=!0,i.set(n)}function Gte(e,t,r){var i=sC(e,r);i.set(Qd(i.get()||{},t))}});var So=ne(lx=>{"use strict";var f2=Wt(),vrt=es(),rm="templateitemname",Jq={name:{valType:"string",editType:"none"}};Jq[rm]={valType:"string",editType:"calc"};lx.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=Jq.name,t[rm]=Jq[rm],t};lx.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function n(a){r=f2.coerce(a,{},vrt,"type");var o={type:r,_template:null};if(r in t){i=e[r];var s=t[r]%i.length;t[r]++,o._template=i[s]}return o}return{newTrace:n}};lx.newContainer=function(e,t,r){var i=e._template,n=i&&(i[t]||r&&i[r]);f2.isPlainObject(n)||(n=null);var a=e[t]={_template:n};return a};lx.arrayTemplater=function(e,t,r){var i=e._template,n=i&&i[Wte(t)],a=i&&i[t];(!Array.isArray(a)||!a.length)&&(a=[]);var o={};function s(u){var f={name:u.name,_input:u},c=f[rm]=u[rm];if(!Yte(c))return f._template=n,f;for(var h=0;h<a.length;h++){var v=a[h];if(v.name===c)return o[c]=1,f._template=v,f}return f[r]=u[r]||!1,f._template=!1,f}function l(){for(var u=[],f=0;f<a.length;f++){var c=a[f],h=c.name;if(Yte(h)&&!o[h]){var v={_template:c,name:h,_input:{_templateitemname:h}};v[rm]=c[rm],u.push(v),o[h]=1}}return u}return{newItem:s,defaultItems:l}};function Yte(e){return e&&typeof e=="string"}function Wte(e){var t=e.length-1;return e.charAt(t)!=="s"&&f2.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}lx.arrayDefaultKey=Wte;lx.arrayEditor=function(e,t,r){var i=(f2.nestedProperty(e,t).get()||[]).length,n=r._index,a=n>=i&&(r._input||{})._templateitemname;a&&(n=i);var o=t+"["+n+"]",s;function l(){s={},a&&(s[o]={},s[o][rm]=a)}l();function u(v,p){s[v]=p}function f(v,p){a?f2.nestedProperty(s[o],v).set(p):s[o+"."+v]=p}function c(){var v=s;return l(),v}function h(v,p){v&&f(v,p);var _=c();for(var T in _)f2.nestedProperty(e,T).set(_[T])}return{modifyBase:u,modifyItem:f,getUpdateObj:c,applyUpdate:h}}});var wf=ne((qer,Xte)=>{"use strict";var TA=Jb().counter;Xte.exports={idRegex:{x:TA("x","( domain)?"),y:TA("y","( domain)?")},attrRegex:TA("[xy]axis"),xAxisMatch:TA("xaxis"),yAxisMatch:TA("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}});var zl=ne($v=>{"use strict";var drt=wi(),Qq=wf();$v.id2name=function(t){if(!(typeof t!="string"||!t.match(Qq.AX_ID_PATTERN))){var r=t.split(" ")[0].substr(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};$v.name2id=function(t){if(t.match(Qq.AX_NAME_PATTERN)){var r=t.substr(5);return r==="1"&&(r=""),t.charAt(0)+r}};$v.cleanId=function(t,r,i){var n=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Qq.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(n&&!i)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return a==="1"&&(a=""),t.charAt(0)+a+(n&&i?" domain":"")}};$v.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var n=$v.listIds(e,t),a=new Array(n.length),o;for(o=0;o<n.length;o++){var s=n[o];a[o]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=i._subplots.gl3d||[];for(o=0;o<l.length;o++){var u=i[l[o]];t?a.push(u[t+"axis"]):a.push(u.xaxis,u.yaxis,u.zaxis)}}return a};$v.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};$v.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[$v.id2name(t)]};$v.getFromTrace=function(e,t,r){var i=e._fullLayout,n=null;if(drt.traceIs(t,"gl3d")){var a=t.scene;a.substr(0,5)==="scene"&&(n=i[a][r+"axis"])}else n=$v.getFromId(e,t[r+"axis"]||r);return n};$v.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};$v.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function Zte(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}$v.isLinked=function(e,t){return Zte(t,e._axisMatchGroups)||Zte(t,e._axisConstraintGroups)}});var nm=ne((Oer,jte)=>{"use strict";function prt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function grt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}jte.exports={clearOutlineControllers:prt,clearOutline:grt}});var uC=ne((Ber,Kte)=>{"use strict";Kte.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var vc=ne(fC=>{"use strict";var AA=wi(),yrt=wf().SUBPLOT_PATTERN;fC.getSubplotCalcData=function(e,t,r){var i=AA.subplotsRegistry[t];if(!i)return[];for(var n=i.attr,a=[],o=0;o<e.length;o++){var s=e[o],l=s[0].trace;l[n]===r&&a.push(s)}return a};fC.getModuleCalcData=function(e,t){var r=[],i=[],n;if(typeof t=="string"?n=AA.getModule(t).plot:typeof t=="function"?n=t:n=t.plot,!n)return[r,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;s.visible!==!0||s._length===0||(s._module&&s._module.plot===n?r.push(o):i.push(o))}return[r,i]};fC.getSubplotData=function(t,r,i){if(!AA.subplotsRegistry[r])return[];var n=AA.subplotsRegistry[r].attr,a=[],o,s,l;if(r==="gl2d"){var u=i.match(yrt);s="x"+u[1],l="y"+u[2]}for(var f=0;f<t.length;f++)o=t[f],r==="gl2d"&&AA.traceIs(o,"gl2d")?o[n[0]]===s&&o[n[1]]===l&&a.push(o):o[n]===i&&a.push(o);return a}});var ere=ne(ux=>{"use strict";var mrt=wi(),c2=Wt();ux.manageCommandObserver=function(e,t,r,i){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var o=ux.hasSimpleAPICommandBindings(e,r,n.lookupTable);if(t&&t._commandObserver){if(o)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(o){Jte(e,o,n.cache),n.check=function(){if(a){var f=Jte(e,o,n.cache);return f.changed&&i&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(i({value:f.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)e._internalOn(s[l],n.check);n.remove=function(){for(var u=0;u<s.length;u++)e._removeInternalListener(s[u],n.check)}}else c2.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n};ux.hasSimpleAPICommandBindings=function(e,t,r){var i,n=t.length,a;for(i=0;i<n;i++){var o,s=t[i],l=s.method,u=s.args;if(Array.isArray(u)||(u=[]),!l)return!1;var f=ux.computeAPICommandBindings(e,l,u);if(f.length!==1)return!1;if(!a)a=f[0],Array.isArray(a.traces)&&a.traces.sort();else{if(o=f[0],o.type!==a.type||o.prop!==a.prop)return!1;if(Array.isArray(a.traces))if(Array.isArray(o.traces)){o.traces.sort();for(var c=0;c<a.traces.length;c++)if(a.traces[c]!==o.traces[c])return!1}else return!1;else if(o.prop!==a.prop)return!1}o=f[0];var h=o.value;if(Array.isArray(h))if(h.length===1)h=h[0];else return!1;r&&(r[h]=i)}return a};function Jte(e,t,r){var i,n,a,o=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return n=c2.nestedProperty(i,t.prop).get(),a=r[t.type]=r[t.type]||{},a.hasOwnProperty(t.prop)&&a[t.prop]!==n&&(o=!0),a[t.prop]=n,{changed:o,value:n}}ux.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=mrt.apiMethodRegistry[t],n=[e];Array.isArray(r)||(r=[]);for(var a=0;a<r.length;a++)n.push(r[a]);return i.apply(null,n).catch(function(o){return c2.warn("API call to Plotly."+t+" rejected.",o),Promise.reject(o)})};ux.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=$te(e,r);break;case"relayout":i=Qte(e,r);break;case"update":i=$te(e,[r[0],r[2]]).concat(Qte(e,[r[1]]));break;case"animate":i=xrt(e,r);break;default:i=[]}return i};function xrt(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Qte(e,t){var r=[],i=t[0],n={};if(typeof i=="string")n[i]=t[1];else if(c2.isPlainObject(i))n=i;else return r;return $q(n,function(a,o,s){r.push({type:"layout",prop:a,value:s})},"",0),r}function $te(e,t){var r,i,n,a,o=[];if(i=t[0],n=t[1],r=t[2],a={},typeof i=="string")a[i]=n;else if(c2.isPlainObject(i))a=i,r===void 0&&(r=n);else return o;return r===void 0&&(r=null),$q(a,function(s,l,u){var f,c;if(Array.isArray(u)){c=u.slice();var h=Math.min(c.length,e.data.length);r&&(h=Math.min(h,r.length)),f=[];for(var v=0;v<h;v++)f[v]=r?r[v]:v}else c=u,f=r?r.slice():null;if(f===null)Array.isArray(c)&&(c=c[0]);else if(Array.isArray(f)){if(!Array.isArray(c)){var p=c;c=[];for(var _=0;_<f.length;_++)c[_]=p}c.length=Math.min(f.length,c.length)}o.push({type:"data",prop:s,traces:f,value:c})},"",0),o}function $q(e,t,r,i){Object.keys(e).forEach(function(n){var a=e[n];if(n[0]!=="_"){var o=r+(i>0?".":"")+n;c2.isPlainObject(a)?$q(a,t,o,i+1):t(o,n,a)}})}});var Zs=ne((Ver,dre)=>{"use strict";var ore=Ai(),_rt=Xb().timeFormatLocale,brt=sq().formatLocale,MA=la(),wrt=lq(),Ho=wi(),sre=tm(),Trt=So(),ki=Wt(),lre=_i(),tre=$a().BADNUM,ed=zl(),Art=nm().clearOutline,Mrt=uC(),tz=hA(),Srt=Xq(),Ert=vc().getModuleCalcData,ez=ki.relinkPrivateKeys,h2=ki._,li=dre.exports={};ki.extendFlat(li,Ho);li.attributes=es();li.attributes.type.values=li.allTypes;li.fontAttrs=ll();li.layoutAttributes=tx();li.fontWeight="normal";var hC=li.transformsRegistry,vC=ere();li.executeAPICommand=vC.executeAPICommand;li.computeAPICommandBindings=vC.computeAPICommandBindings;li.manageCommandObserver=vC.manageCommandObserver;li.hasSimpleAPICommandBindings=vC.hasSimpleAPICommandBindings;li.redrawText=function(e){return e=ki.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(Ho.getComponentMethod("annotations","draw")(e),Ho.getComponentMethod("legend","draw")(e),Ho.getComponentMethod("colorbar","draw")(e),t(li.previousPromises(e)))},300)})};li.resize=function(e){e=ki.getGraphDiv(e);var t,r=new Promise(function(i,n){(!e||ki.isHidden(e))&&n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||ki.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var a=e.changed;e.autoplay=!0,Ho.call("relayout",e,{autosize:!0}).then(function(){e.changed=a,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};li.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};li.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=ki.ensureSingle(t._paper,"text","js-plot-link-container",function(l){l.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:lre.defaultLine,"pointer-events":"all"}).each(function(){var u=ore.select(this);u.append("tspan").classed("js-link-to-tool",!0),u.append("tspan").classed("js-link-spacer",!0),u.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),n={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(n["text-anchor"]="start",n.x=5):(n["text-anchor"]="end",n.x=t._paper.attr("width")-7),r.attr(n);var a=r.select(".js-link-to-tool"),o=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&krt(e,a),o.text(a.text()&&s.text()?" - ":"")}};function krt(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){li.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+n})}}li.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=ore.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),n=i.append("input").attr({type:"text",name:"data"});return n.node().value=li.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var Crt=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Lrt=["year","month","dayMonth","dayMonthYear"];li.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var n=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e.calcdata||[],f=e._context||{},c;e._transitionData||li.createTransitionData(e),n._dfltTitle={plot:h2(e,"Click to enter Plot title"),x:h2(e,"Click to enter X axis title"),y:h2(e,"Click to enter Y axis title"),colorbar:h2(e,"Click to enter Colorscale title"),annotation:h2(e,"new text")},n._traceWord=h2(e,"trace");var h=rre(e,Crt);if(n._mapboxAccessToken=f.mapboxAccessToken,i._initialAutoSizeIsDone){var v=i.width,p=i.height;li.supplyLayoutGlobalDefaults(a,n,h),a.width||(n.width=v),a.height||(n.height=p),li.sanitizeMargins(n)}else{li.supplyLayoutGlobalDefaults(a,n,h);var _=!a.width||!a.height,T=n.autosize,g=f.autosizable,A=_&&(T||g);A?li.plotAutoSize(e,a,n):_&&li.sanitizeMargins(n),!T&&_&&(a.width=n.width,a.height=n.height)}n._d3locale=Drt(h,n.separators),n._extraFormat=rre(e,Lrt),n._initialAutoSizeIsDone=!0,n._dataLength=l.length,n._modules=[],n._visibleModules=[],n._basePlotModules=[];var b=n._subplots=Rrt(),w=n._splomAxes={x:{},y:{}},k=n._splomSubplots={};n._splomGridDflt={},n._scatterStackOpts={},n._firstScatter={},n._alignmentOpts={},n._colorAxes={},n._requestRangeslider={},n._traceUids=Prt(o,l),n._globalTransforms=(e._context||{}).globalTransforms,li.supplyDataDefaults(l,s,a,n);var x=Object.keys(w.x),E=Object.keys(w.y);if(x.length>1&&E.length>1){for(Ho.getComponentMethod("grid","sizeDefaults")(a,n),c=0;c<x.length;c++)ki.pushUnique(b.xaxis,x[c]);for(c=0;c<E.length;c++)ki.pushUnique(b.yaxis,E[c]);for(var M in k)ki.pushUnique(b.cartesian,M)}if(n._has=li._hasPlotType.bind(n),o.length===s.length)for(c=0;c<s.length;c++)ez(s[c],o[c]);li.supplyLayoutModuleDefaults(a,n,s,e._transitionData);var d=n._visibleModules,C=[];for(c=0;c<d.length;c++){var S=d[c].crossTraceDefaults;S&&ki.pushUnique(C,S)}for(c=0;c<C.length;c++)C[c](s,n);n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&x.length>15&&E.length>15&&n.shapes.length===0&&n.images.length===0,li.linkSubplots(s,n,o,i),li.cleanPlot(s,n,o,i);var P=!!(i._has&&i._has("gl2d")),D=!!(n._has&&n._has("gl2d")),z=!!(i._has&&i._has("cartesian")),O=!!(n._has&&n._has("cartesian")),V=z||P,B=O||D;V&&!B?i._bgLayer.remove():B&&!V&&(n._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&Art({_fullLayout:i}),Irt(s,n),ez(n,i),Ho.getComponentMethod("colorscale","crossTraceDefaults")(s,n),n._preGUI||(n._preGUI={}),n._tracePreGUI||(n._tracePreGUI={});var F=n._tracePreGUI,N={},Z;for(Z in F)N[Z]="old";for(c=0;c<s.length;c++)Z=s[c]._fullInput.uid,N[Z]||(F[Z]={}),N[Z]="new";for(Z in N)N[Z]==="old"&&delete F[Z];fre(n),Ho.getComponentMethod("rangeslider","makeData")(n),!r&&u.length===s.length&&li.supplyDefaultsUpdateCalc(u,s)};li.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=(e[r]||[])[0];if(n&&n.trace){var a=n.trace;if(a._hasCalcTransform){var o=a._arrayAttrs,s,l,u;for(s=0;s<o.length;s++)l=o[s],u=ki.nestedProperty(a,l).get().slice(),ki.nestedProperty(i,l).set(u)}n.trace=i}}};function Prt(e,t){var r=t.length,i=[],n,a;for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==a&&i.push(o),a=o}var s=i.length,l=new Array(r),u={};function f(v,p){l[p]=v,u[v]=1}function c(v,p){if(v&&typeof v=="string"&&!u[v])return f(v,p),!0}for(n=0;n<r;n++){var h=t[n].uid;typeof h=="number"&&(h=String(h)),!c(h,n)&&(n<s&&c(i[n].uid,n)||f(ki.randstr(u),n))}return l}function Rrt(){var e=Ho.collectableSubplotTypes,t={},r,i;if(!e){e=[];var n=Ho.subplotsRegistry;for(var a in n){var o=n[a],s=o.attr;if(s&&(e.push(a),Array.isArray(s)))for(i=0;i<s.length;i++)ki.pushUnique(e,s[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function rre(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,n={};function a(c){for(var h=!0,v=0;v<t.length;v++){var p=t[v];n[p]||(c[p]?n[p]=c[p]:h=!1)}h&&(i=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(a(u),i))break;s=Ho.localeRegistry}var f=r.split("-")[0];if(i||f===r)break;r=f}return i||a(Ho.localeRegistry.en.format),n}function Drt(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=brt(e).format(ki.adjustFormat(r))}catch(i){return ki.warnBadFormat(r),ki.noFormat}return r},timeFormat:_rt(e).utcFormat}}function Irt(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var n=0;n<e.length;n++){var a=e[n];a.meta?i[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}li.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};li._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var n=i[t].name;if(n===e)return!0;var a=Ho.modules[n];if(a&&a.categories[e])return!0}return!1};li.cleanPlot=function(e,t,r,i){var n,a,o=i._basePlotModules||[];for(n=0;n<o.length;n++){var s=o[n];s.clean&&s.clean(e,t,r,i)}var l=i._has&&i._has("gl"),u=t._has&&t._has("gl");l&&!u&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var f=!!i._infolayer;e:for(n=0;n<r.length;n++){var c=r[n],h=c.uid;for(a=0;a<e.length;a++){var v=e[a];if(h===v.uid)continue e}f&&i._infolayer.select(".cb"+h).remove()}};li.linkSubplots=function(e,t,r,i){var n,a,o=i._plots||{},s=t._plots={},l=t._subplots,u={_fullData:e,_fullLayout:t},f=l.cartesian.concat(l.gl2d||[]);for(n=0;n<f.length;n++){var c=f[n],h=o[c],v=ed.getFromId(u,c,"x"),p=ed.getFromId(u,c,"y"),_;for(h?_=s[c]=h:(_=s[c]={},_.id=c),v._counterAxes.push(p._id),p._counterAxes.push(v._id),v._subplotsWith.push(c),p._subplotsWith.push(c),_.xaxis=v,_.yaxis=p,_._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var T=e[a];if(T.xaxis===_.xaxis._id&&T.yaxis===_.yaxis._id&&T.cliponaxis===!1){_._hasClipOnAxisFalse=!0;break}}}var g=ed.list(u,null,!0),A;for(n=0;n<g.length;n++){A=g[n];var b=null;A.overlaying&&(b=ed.getFromId(u,A.overlaying),b&&b.overlaying&&(A.overlaying=!1,b=null)),A._mainAxis=b||A,b&&(A.domain=b.domain.slice()),A._anchorAxis=A.anchor==="free"?null:ed.getFromId(u,A.anchor)}for(n=0;n<g.length;n++)if(A=g[n],A._counterAxes.sort(ed.idSort),A._subplotsWith.sort(ki.subplotSort),A._mainSubplot=Frt(A,t),A._counterAxes.length&&(A.spikemode&&A.spikemode.indexOf("across")!==-1||A.automargin&&A.mirror&&A.anchor!=="free"||Ho.getComponentMethod("rangeslider","isVisible")(A))){var w=1,k=0;for(a=0;a<A._counterAxes.length;a++){var x=ed.getFromId(u,A._counterAxes[a]);w=Math.min(w,x.domain[0]),k=Math.max(k,x.domain[1])}w<k&&(A._counterDomainMin=w,A._counterDomainMax=k)}};function Frt(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",n=e._mainAxis._anchorAxis,a="",o="",s="";if(n&&(s=n._mainAxis._id,a=i?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,u=0;u<l.length;u++){var f=l[u],c=i?e._id+f:f+e._id;o||(o=c);var h=ed.getFromId(r,f);if(s&&h.overlaying===s){a=c;break}}}return a||o}li.clearExpandedTraceDefaultColors=function(e){var t,r,i;function n(o,s,l,u){r[u]=s,r.length=u+1,o.valType==="color"&&o.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],sre.crawl(e._module.attributes,n)),i=0;i<t.length;i++){var a=ki.nestedProperty(e,"_input."+t[i]);a.get()||ki.nestedProperty(e,t[i]).set(null)}};li.supplyDataDefaults=function(e,t,r,i){var n=i._modules,a=i._visibleModules,o=i._basePlotModules,s=0,l=0,u,f,c;i._transformModules=[];function h(E){t.push(E);var M=E._module;M&&(ki.pushUnique(n,M),E.visible===!0&&ki.pushUnique(a,M),ki.pushUnique(o,E._module.basePlotModule),s++,E._input.visible!==!1&&l++)}var v={},p=[],_=(r.template||{}).data||{},T=Trt.traceTemplater(_);for(u=0;u<e.length;u++){if(c=e[u],f=T.newTrace(c),f.uid=i._traceUids[u],li.supplyTraceDefaults(c,f,l,i,u),f.index=u,f._input=c,f._expandedIndex=s,f.transforms&&f.transforms.length)for(var g=c.visible!==!1&&f.visible===!1,A=qrt(f,t,r,i),b=0;b<A.length;b++){var w=A[b],k={_template:f._template,type:f.type,uid:f.uid+b};g&&w.visible===!1&&delete w.visible,li.supplyTraceDefaults(w,k,s,i,u),ez(k,w),k.index=u,k._input=c,k._fullInput=f,k._expandedIndex=s,k._expandedInput=w,h(k)}else f._fullInput=f,f._expandedInput=f,h(f);Ho.traceIs(f,"carpetAxis")&&(v[f.carpet]=f),Ho.traceIs(f,"carpetDependent")&&p.push(u)}for(u=0;u<p.length;u++)if(f=t[p[u]],!!f.visible){var x=v[f.carpet];if(f._carpet=x,!x||!x.visible){f.visible=!1;continue}f.xaxis=x.xaxis,f.yaxis=x.yaxis}};li.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(n,a){return ki.coerce(e||{},r,tz,n,a)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=li.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=li.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=li.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=li.supplyAnimationTransitionDefaults(e.transition||{});return r};li.supplyAnimationFrameDefaults=function(e){var t={};function r(i,n){return ki.coerce(e||{},t,tz.frame,i,n)}return r("duration"),r("redraw"),t};li.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,n){return ki.coerce(e||{},t,tz.transition,i,n)}return r("duration"),r("easing"),t};li.supplyFrameDefaults=function(e){var t={};function r(i,n){return ki.coerce(e,t,Srt,i,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};li.supplyTraceDefaults=function(e,t,r,i,n){var a=i.colorway||lre.defaults,o=a[r%a.length],s;function l(b,w){return ki.coerce(e,t,li.attributes,b,w)}var u=l("visible");l("type"),l("name",i._traceWord+" "+n),l("uirevision",i.uirevision);var f=li.getModule(t);if(t._module=f,f){var c=f.basePlotModule,h=c.attr,v=c.attributes;if(h&&v){var p=i._subplots,_="";if(u||c.name!=="gl2d"){if(Array.isArray(h))for(s=0;s<h.length;s++){var T=h[s],g=ki.coerce(e,t,v,T);p[T]&&ki.pushUnique(p[T],g),_+=g}else _=ki.coerce(e,t,v,h);p[c.name]&&ki.pushUnique(p[c.name],_)}}}if(u){if(l("customdata"),l("ids"),l("meta"),Ho.traceIs(t,"showLegend")?(ki.coerce(e,t,f.attributes.showlegend?f.attributes:li.attributes,"showlegend"),l("legend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,f&&f.supplyDefaults(e,t,o,i),Ho.traceIs(t,"noOpacity")||l("opacity"),Ho.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Ho.traceIs(t,"noHover")||(t.hovertemplate||ki.coerceHoverinfo(e,t,i),t.type!=="parcats"&&Ho.getComponentMethod("fx","supplyDefaults")(e,t,o,i)),f&&f.selectPoints){var A=l("selectedpoints");ki.isTypedArray(A)&&(t.selectedpoints=Array.from(A))}li.supplyTransformDefaults(e,t,i)}return t};function ure(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var i=t[r],n=i._module||hC[i.type];if(n&&n.makesData)return!0}return!1}li.hasMakesDataTransform=ure;li.supplyTransformDefaults=function(e,t,r){if(t._length||ure(e)){var i=r._globalTransforms||[],n=r._transformModules||[];if(!(!Array.isArray(e.transforms)&&i.length===0))for(var a=e.transforms||[],o=i.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var u=o[l],f=u.type,c=hC[f],h,v=!(u._module&&u._module===c),p=c&&typeof c.transform=="function";c||ki.warn("Unrecognized transform type "+f+"."),c&&c.supplyDefaults&&(v||p)?(h=c.supplyDefaults(u,t,r,e),h.type=f,h._module=c,ki.pushUnique(n,c)):h=ki.extendFlat({},u),s.push(h)}}};function qrt(e,t,r,i){for(var n=e.transforms,a=[e],o=0;o<n.length;o++){var s=n[o],l=hC[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:i,transformIndex:o}))}return a}li.supplyLayoutGlobalDefaults=function(e,t,r){function i(c,h){return ki.coerce(e,t,li.layoutAttributes,c,h)}var n=e.template;ki.isPlainObject(n)&&(t.template=n,t._template=n.layout,t._dataTemplate=n.data),i("autotypenumbers");var a=ki.coerceFont(i,"font"),o=a.size;ki.coerceFont(i,"title.font",ki.extendFlat({},a,{size:Math.round(o*1.4)})),i("title.text",t._dfltTitle.plot),i("title.xref");var s=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var l=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),l&&(s==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),s==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var u=i("uniformtext.mode");u&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&li.sanitizeMargins(t),Ho.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var f=i("uirevision");i("editrevision",f),i("selectionrevision",f),Ho.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Ho.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),Ho.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),ki.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),Ho.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Ho.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),ki.coerce(e,t,Mrt,"scattermode")};function cC(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}li.plotAutoSize=function(t,r,i){var n=t._context||{},a=n.frameMargins,o,s,l=ki.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),n.fillFrame)o=window.innerWidth,s=window.innerHeight,document.body.style.overflow="hidden";else{var u=l?window.getComputedStyle(t):{};if(o=cC(u.width)||cC(u.maxWidth)||i.width,s=cC(u.height)||cC(u.maxHeight)||i.height,MA(a)&&a>0){var f=1-2*a;o=Math.round(f*o),s=Math.round(f*s)}}var c=li.layoutAttributes.width.min,h=li.layoutAttributes.height.min;o<c&&(o=c),s<h&&(s=h);var v=!r.width&&Math.abs(i.width-o)>1,p=!r.height&&Math.abs(i.height-s)>1;(p||v)&&(v&&(i.width=o),p&&(i.height=s)),t._initialAutoSize||(t._initialAutoSize={width:o,height:s}),li.sanitizeMargins(i)};li.supplyLayoutModuleDefaults=function(e,t,r,i){var n=Ho.componentsRegistry,a=t._basePlotModules,o,s,l,u=Ho.subplotsRegistry.cartesian;for(o in n)l=n[o],l.includeBasePlot&&l.includeBasePlot(e,t);a.length||a.push(u),t._has("cartesian")&&(Ho.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t));for(var f in t._subplots)t._subplots[f].sort(ki.subplotSort);for(s=0;s<a.length;s++)l=a[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var c=t._modules;for(s=0;s<c.length;s++)l=c[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var h=t._transformModules;for(s=0;s<h.length;s++)l=h[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r,i);for(o in n)l=n[o],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r)};li.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),ki.clearThrottle(),ki.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};li.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var n=t[i];n.style&&ki.pushUnique(r,n.style)}for(i=0;i<r.length;i++)r[i](e)};li.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,n=t-(i.l+i.r),a=r-(i.t+i.b),o;n<0&&(o=(t-1)/(i.l+i.r),i.l=Math.floor(o*i.l),i.r=Math.floor(o*i.r)),a<0&&(o=(r-1)/(i.t+i.b),i.t=Math.floor(o*i.t),i.b=Math.floor(o*i.b))}};li.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};li.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function fre(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var cre=2,hre=2;li.autoMargin=function(e,t,r){var i=e._fullLayout,n=i.width,a=i.height,o=i.margin,s=i.minreducedwidth,l=i.minreducedheight,u=ki.constrain(n-o.l-o.r,cre,s),f=ki.constrain(a-o.t-o.b,hre,l),c=Math.max(0,n-u),h=Math.max(0,a-f),v=i._pushmargin,p=i._pushmarginIds;if(o.autoexpand!==!1){if(!r)delete v[t],delete p[t];else{var _=r.pad;if(_===void 0&&(_=Math.min(12,o.l,o.r,o.t,o.b)),c){var T=(r.l+r.r)/c;T>1&&(r.l/=T,r.r/=T)}if(h){var g=(r.t+r.b)/h;g>1&&(r.t/=g,r.b/=g)}var A=r.xl!==void 0?r.xl:r.x,b=r.xr!==void 0?r.xr:r.x,w=r.yt!==void 0?r.yt:r.y,k=r.yb!==void 0?r.yb:r.y;v[t]={l:{val:A,size:r.l+_},r:{val:b,size:r.r+_},b:{val:k,size:r.b+_},t:{val:w,size:r.t+_}},p[t]=1}if(!i._replotting)return li.doAutoMargin(e)}};function zrt(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=ed.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}li.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),fre(t);var n=t._size,a=t.margin,o={t:0,b:0,l:0,r:0},s=ki.extendFlat({},n),l=a.l,u=a.r,f=a.t,c=a.b,h=t._pushmargin,v=t._pushmarginIds,p=t.minreducedwidth,_=t.minreducedheight;if(a.autoexpand!==!1){for(var T in h)v[T]||delete h[T];var g=e._fullLayout._reservedMargin;for(var A in g)for(var b in g[A]){var w=g[A][b];o[b]=Math.max(o[b],w)}h.base={l:{val:0,size:l},r:{val:1,size:u},t:{val:1,size:f},b:{val:0,size:c}};for(var k in o){var x=0;for(var E in h)E!=="base"&&MA(h[E][k].size)&&(x=h[E][k].size>x?h[E][k].size:x);var M=Math.max(0,a[k]-x);o[k]=Math.max(0,o[k]-M)}for(var d in h){var C=h[d].l||{},S=h[d].b||{},P=C.val,D=C.size,z=S.val,O=S.size,V=r-o.r-o.l,B=i-o.t-o.b;for(var F in h){if(MA(D)&&h[F].r){var N=h[F].r.val,Z=h[F].r.size;if(N>P){var J=(D*N+(Z-V)*P)/(N-P),re=(Z*(1-P)+(D-V)*(1-N))/(N-P);J+re>l+u&&(l=J,u=re)}}if(MA(O)&&h[F].t){var le=h[F].t.val,fe=h[F].t.size;if(le>z){var K=(O*le+(fe-B)*z)/(le-z),X=(fe*(1-z)+(O-B)*(1-le))/(le-z);K+X>c+f&&(c=K,f=X)}}}}}var ae=ki.constrain(r-a.l-a.r,cre,p),oe=ki.constrain(i-a.t-a.b,hre,_),_e=Math.max(0,r-ae),be=Math.max(0,i-oe);if(_e){var he=(l+u)/_e;he>1&&(l/=he,u/=he)}if(be){var ie=(c+f)/be;ie>1&&(c/=ie,f/=ie)}if(n.l=Math.round(l)+o.l,n.r=Math.round(u)+o.r,n.t=Math.round(f)+o.t,n.b=Math.round(c)+o.b,n.p=Math.round(a.pad),n.w=Math.round(r)-n.l-n.r,n.h=Math.round(i)-n.t-n.b,!t._replotting&&(li.didMarginChange(s,n)||zrt(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var ye=3*(1+Object.keys(v).length);if(t._redrawFromAutoMarginCount<ye)return Ho.call("_doPlot",e);t._size=s,ki.warn("Too many auto-margin redraws.")}Ort(e)};function Ort(e){var t=ed.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var n=t[i][r];n&&n()}})}var nre=["l","r","t","b","p","w","h"];li.didMarginChange=function(e,t){for(var r=0;r<nre.length;r++){var i=nre[r],n=e[i],a=t[i];if(!MA(n)||Math.abs(a-n)>1)return!0}return!1};li.graphJson=function(e,t,r,i,n,a){(n&&t&&!e._fullData||n&&!t&&!e._fullLayout)&&li.supplyDefaults(e);var o=n?e._fullData:e.data,s=n?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(h,v){if(typeof h=="function")return v?"_function_":null;if(ki.isPlainObject(h)){var p={},_;return Object.keys(h).sort().forEach(function(b){if(["_","["].indexOf(b.charAt(0))===-1){if(typeof h[b]=="function"){v&&(p[b]="_function");return}if(r==="keepdata"){if(b.substr(b.length-3)==="src")return}else if(r==="keepstream"){if(_=h[b+"src"],typeof _=="string"&&_.indexOf(":")>0&&!ki.isPlainObject(h.stream))return}else if(r!=="keepall"&&(_=h[b+"src"],typeof _=="string"&&_.indexOf(":")>0))return;p[b]=u(h[b],v)}}),p}var T=Array.isArray(h),g=ki.isTypedArray(h);if((T||g)&&h.dtype&&h.shape){var A=h.bdata;return u({dtype:h.dtype,shape:h.shape,bdata:ki.isArrayBuffer(A)?wrt.encode(A):A},v)}return T?h.map(function(b){return u(b,v)}):g?ki.simpleMap(h,ki.identity):ki.isJSDate(h)?ki.ms2DateTimeLocal(+h):h}var f={data:(o||[]).map(function(h){var v=u(h);return t&&delete v.fit,v})};if(!t&&(f.layout=u(s),n)){var c=s._size;f.layout.computed={margin:{b:c.b,l:c.l,r:c.r,t:c.t}}}return l&&(f.frames=u(l)),a&&(f.config=u(e._context,!0)),i==="object"?f:JSON.stringify(f)};li.modifyFrames=function(e,t){var r,i,n,a=e._transitionData._frames,o=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":n=i.value;var s=(a[i.index]||{}).name,l=n.name;a[i.index]=o[l]=n,l!==s&&(delete o[s],o[l]=n);break;case"insert":n=i.value,o[n.name]=n,a.splice(i.index,0,n);break;case"delete":n=a[i.index],delete o[n.name],a.splice(i.index,1);break}return Promise.resolve()};li.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,n,a,o;if(!t)throw new Error("computeFrame must be given a string frame name");var s=r[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=r[s.baseframe.toString()])&&u.indexOf(s.name)===-1;)l.push(s),u.push(s.name);for(var f={};s=l.pop();)if(s.layout&&(f.layout=li.extendLayout(f.layout,s.layout)),s.data){if(f.data||(f.data=[]),n=s.traces,!n)for(n=[],i=0;i<s.data.length;i++)n[i]=i;for(f.traces||(f.traces=[]),i=0;i<s.data.length;i++)a=n[i],a!=null&&(o=f.traces.indexOf(a),o===-1&&(o=f.data.length,f.traces[o]=a),f.data[o]=li.extendTrace(f.data[o],s.data[i]))}return f};li.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var n=r[i];n&&n.name&&(t[n.name]=n)}};li.extendObjectWithContainers=function(e,t,r){var i,n,a,o,s,l,u,f,c=ki.extendDeepNoArrays({},t||{}),h=ki.expandObjectPaths(c),v={};if(r&&r.length)for(a=0;a<r.length;a++)i=ki.nestedProperty(h,r[a]),n=i.get(),n===void 0?ki.nestedProperty(v,r[a]).set(null):(i.set(null),ki.nestedProperty(v,r[a]).set(n));if(e=ki.extendDeepNoArrays(e||{},h),r&&r.length){for(a=0;a<r.length;a++)if(s=ki.nestedProperty(v,r[a]),u=s.get(),!!u){for(l=ki.nestedProperty(e,r[a]),f=l.get(),Array.isArray(f)||(f=[],l.set(f)),o=0;o<u.length;o++){var p=u[o];p===null?f[o]=null:f[o]=li.extendObjectWithContainers(f[o],p)}l.set(f)}}return e};li.dataArrayContainers=["transforms","dimensions"];li.layoutArrayContainers=Ho.layoutArrayContainers;li.extendTrace=function(e,t){return li.extendObjectWithContainers(e,t,li.dataArrayContainers)};li.extendLayout=function(e,t){return li.extendObjectWithContainers(e,t,li.layoutArrayContainers)};li.transition=function(e,t,r,i,n,a){var o={redraw:n.redraw},s={},l=[];return o.prepareFn=function(){for(var u=Array.isArray(t)?t.length:0,f=i.slice(0,u),c=0;c<f.length;c++){var h=f[c],v=e._fullData[h],p=v._module;if(p){if(p.animatable){var _=p.basePlotModule.name;s[_]||(s[_]=[]),s[_].push(h)}e.data[f[c]]=li.extendTrace(e.data[f[c]],t[c])}}var T=ki.expandObjectPaths(ki.extendDeepNoArrays({},r)),g=/^[xy]axis[0-9]*$/;for(var A in T)g.test(A)&&delete T[A].range;li.extendLayout(e.layout,T),delete e.calcdata,li.supplyDefaults(e),li.doCalcdata(e);var b=ki.expandObjectPaths(r);if(b){var w=e._fullLayout._plots;for(var k in w){var x=w[k],E=x.xaxis,M=x.yaxis,d=E.range.slice(),C=M.range.slice(),S=null,P=null,D=null,z=null;Array.isArray(b[E._name+".range"])?S=b[E._name+".range"].slice():Array.isArray((b[E._name]||{}).range)&&(S=b[E._name].range.slice()),Array.isArray(b[M._name+".range"])?P=b[M._name+".range"].slice():Array.isArray((b[M._name]||{}).range)&&(P=b[M._name].range.slice()),d&&S&&(E.r2l(d[0])!==E.r2l(S[0])||E.r2l(d[1])!==E.r2l(S[1]))&&(D={xr0:d,xr1:S}),C&&P&&(M.r2l(C[0])!==M.r2l(P[0])||M.r2l(C[1])!==M.r2l(P[1]))&&(z={yr0:C,yr1:P}),(D||z)&&l.push(ki.extendFlat({plotinfo:x},D,z))}}return Promise.resolve()},o.runFn=function(u){var f,c=e._fullLayout._basePlotModules,h=l.length,v;if(r)for(v=0;v<c.length;v++)c[v].transitionAxes&&c[v].transitionAxes(e,l,a,u);h?(f=ki.extendFlat({},a),f.duration=0,delete s.cartesian):f=a;for(var p in s){var _=s[p],T=e._fullData[_[0]]._module;T.basePlotModule.plot(e,_,f,u)}},vre(e,a,o)};li.transitionFromReact=function(e,t,r,i){var n=e._fullLayout,a=n.transition,o={},s=[];return o.prepareFn=function(){var l=n._plots;o.redraw=!1,t.anim==="some"&&(o.redraw=!0),r.anim==="some"&&(o.redraw=!0);for(var u in l){var f=l[u],c=f.xaxis,h=f.yaxis,v=i[c._name].range.slice(),p=i[h._name].range.slice(),_=c.range.slice(),T=h.range.slice();c.setScale(),h.setScale();var g=null,A=null;(c.r2l(v[0])!==c.r2l(_[0])||c.r2l(v[1])!==c.r2l(_[1]))&&(g={xr0:v,xr1:_}),(h.r2l(p[0])!==h.r2l(T[0])||h.r2l(p[1])!==h.r2l(T[1]))&&(A={yr0:p,yr1:T}),(g||A)&&s.push(ki.extendFlat({plotinfo:f},g,A))}return Promise.resolve()},o.runFn=function(l){for(var u=e._fullData,f=e._fullLayout,c=f._basePlotModules,h,v,p,_=[],T=0;T<u.length;T++)_.push(T);function g(){if(e._fullLayout)for(var b=0;b<c.length;b++)c[b].transitionAxes&&c[b].transitionAxes(e,s,h,l)}function A(){if(e._fullLayout)for(var b=0;b<c.length;b++)c[b].plot(e,p,v,l)}s.length&&t.anim?a.ordering==="traces first"?(h=ki.extendFlat({},a,{duration:0}),p=_,v=a,setTimeout(g,a.duration),A()):(h=a,p=null,v=ki.extendFlat({},a,{duration:0}),setTimeout(A,h.duration),g()):s.length?(h=a,g()):t.anim&&(p=_,v=a,A())},vre(e,a,o)};function vre(e,t,r){var i=!1;function n(c){var h=Promise.resolve();if(!c)return h;for(;c.length;)h=h.then(c.shift());return h}function a(c){if(c)for(;c.length;)c.shift()}function o(){return e.emit("plotly_transitioning",[]),new Promise(function(c){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return Ho.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var h=0,v=0;function p(){return h++,function(){v++,!i&&v===h&&s(c)}}r.runFn(p),setTimeout(p())})}function s(c){if(e._transitionData)return a(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return Ho.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(c)}function l(){if(e._transitionData)return e._transitioning=!1,n(e._transitionData._interruptCallbacks)}var u=[li.previousPromises,l,r.prepareFn,li.rehover,li.reselect,o],f=ki.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve()),f.then(function(){return e})}li.doCalcdata=function(e,t){var r=ed.list(e),i=e._fullData,n=e._fullLayout,a,o,s,l,u=new Array(i.length),f=(e.calcdata||[]).slice();for(e.calcdata=u,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},s=0;s<i.length;s++)if(Array.isArray(t)&&t.indexOf(s)===-1){u[s]=f[s];continue}for(s=0;s<i.length;s++)a=i[s],a._arrayAttrs=sre.findArrayAttributes(a),a._extremes={};var c=n._subplots.polar||[];for(s=0;s<c.length;s++)r.push(n[c[s]].radialaxis,n[c[s]].angularaxis);for(var h in n._colorAxes){var v=n[h];v.cauto!==!1&&(delete v.cmin,delete v.cmax)}var p=!1;function _(A){if(a=i[A],o=a._module,a.visible===!0&&a.transforms){if(o&&o.calc){var b=o.calc(e,a);b[0]&&b[0].t&&b[0].t._scene&&delete b[0].t._scene.dirty}for(l=0;l<a.transforms.length;l++){var w=a.transforms[l];o=hC[w.type],o&&o.calcTransform&&(a._hasCalcTransform=!0,p=!0,o.calcTransform(e,a,w))}}}function T(A,b){if(a=i[A],o=a._module,!!o.isContainer===b){var w=[];if(a.visible===!0&&a._length!==0){delete a._indexToPoints;var k=a.transforms||[];for(l=k.length-1;l>=0;l--)if(k[l].enabled){a._indexToPoints=k[l]._indexToPoints;break}o&&o.calc&&(w=o.calc(e,a))}(!Array.isArray(w)||!w[0])&&(w=[{x:tre,y:tre}]),w[0].t||(w[0].t={}),w[0].trace=a,u[A]=w}}for(ire(r,i,n),s=0;s<i.length;s++)T(s,!0);for(s=0;s<i.length;s++)_(s);for(p&&ire(r,i,n),s=0;s<i.length;s++)T(s,!0);for(s=0;s<i.length;s++)T(s,!1);are(e);var g=Nrt(r,e);if(g.length){for(n._numBoxes=0,n._numViolins=0,s=0;s<g.length;s++)T(g[s],!0);for(s=0;s<g.length;s++)T(g[s],!1);are(e)}Ho.getComponentMethod("fx","calc")(e),Ho.getComponentMethod("errorbars","calc")(e)};var Brt=/(total|sum|min|max|mean|median) (ascending|descending)/;function Nrt(e,t){var r=[],i,n,a,o,s;function l(F,N,Z){var J=N._id.charAt(0);if(F==="histogram2dcontour"){var re=N._counterAxes[0],le=ed.getFromId(t,re),fe=J==="x"||re==="x"&&le.type==="category",K=J==="y"||re==="y"&&le.type==="category";return function(X,ae){return X===0||ae===0||fe&&X===Z[ae].length-1||K&&ae===Z.length-1?-1:(J==="y"?ae:X)-1}}else return function(X,ae){return J==="y"?ae:X}}var u={min:function(F){return ki.aggNums(Math.min,null,F)},max:function(F){return ki.aggNums(Math.max,null,F)},sum:function(F){return ki.aggNums(function(N,Z){return N+Z},null,F)},total:function(F){return ki.aggNums(function(N,Z){return N+Z},null,F)},mean:function(F){return ki.mean(F)},median:function(F){return ki.median(F)}};function f(F,N){return F[1]-N[1]}function c(F,N){return N[1]-F[1]}for(i=0;i<e.length;i++){var h=e[i];if(h.type==="category"){var v=h.categoryorder.match(Brt);if(v){var p=v[1],_=v[2],T=h._id.charAt(0),g=T==="x",A=[];for(n=0;n<h._categories.length;n++)A.push([h._categories[n],[]]);for(n=0;n<h._traceIndices.length;n++){var b=h._traceIndices[n],w=t._fullData[b];if(w.visible===!0){var k=w.type;Ho.traceIs(w,"histogram")&&(delete w._xautoBinFinished,delete w._yautoBinFinished);var x=k==="splom",E=k==="scattergl",M=t.calcdata[b];for(a=0;a<M.length;a++){var d=M[a],C,S;if(x){var P=w._axesDim[h._id];if(!g){var D=w._diag[P][0];D&&(h=t._fullLayout[ed.id2name(D)])}var z=d.trace.dimensions[P].values;for(o=0;o<z.length;o++)for(C=h._categoriesMap[z[o]],s=0;s<d.trace.dimensions.length;s++)if(s!==P){var O=d.trace.dimensions[s];A[C][1].push(O.values[o])}}else if(E){for(o=0;o<d.t.x.length;o++)g?(C=d.t.x[o],S=d.t.y[o]):(C=d.t.y[o],S=d.t.x[o]),A[C][1].push(S);d.t&&d.t._scene&&delete d.t._scene.dirty}else if(d.hasOwnProperty("z")){S=d.z;var V=l(w.type,h,S);for(o=0;o<S.length;o++)for(s=0;s<S[o].length;s++)C=V(s,o),C+1&&A[C][1].push(S[o][s])}else for(C=d.p,C===void 0&&(C=d[T]),S=d.s,S===void 0&&(S=d.v),S===void 0&&(S=g?d.y:d.x),Array.isArray(S)||(S===void 0?S=[]:S=[S]),o=0;o<S.length;o++)A[C][1].push(S[o])}}}h._categoriesValue=A;var B=[];for(n=0;n<A.length;n++)B.push([A[n][0],u[p](A[n][1])]);B.sort(_==="descending"?c:f),h._categoriesAggregatedValue=B,h._initialCategories=B.map(function(F){return F[0]}),r=r.concat(h.sortByInitialCategories())}}}return r}function ire(e,t,r){var i={};function n(l){l.clearCalc(),l.type==="multicategory"&&l.setupMultiCategory(t),i[l._id]=1}ki.simpleMap(e,n);for(var a=r._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])i[s]||n(r[ed.id2name(s)])}function are(e){var t=e._fullLayout,r=t._visibleModules,i={},n,a,o;for(a=0;a<r.length;a++){var s=r[a],l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;i[u]?ki.pushUnique(i[u],l):i[u]=[l]}}for(o in i){var f=i[o],c=t._subplots[o];if(Array.isArray(c))for(n=0;n<c.length;n++){var h=c[n],v=o==="cartesian"?t._plots[h]:t[h];for(a=0;a<f.length;a++)f[a](e,v,h)}else for(a=0;a<f.length;a++)f[a](e)}}li.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};li.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};li.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var n=t._reselect||JSON.stringify(r)!==JSON.stringify(i);Ho.getComponentMethod("selections","reselect")(e,n)};li.generalUpdatePerTraceModule=function(e,t,r,i){var n=t.traceHash,a={},o;for(o=0;o<r.length;o++){var s=r[o],l=s[0].trace;l.visible&&(a[l.type]=a[l.type]||[],a[l.type].push(s))}for(var u in n)if(!a[u]){var f=n[u][0],c=f[0].trace;c.visible=!1,a[u]=[f]}for(var h in a){var v=a[h],p=v[0][0].trace._module;p.plot(e,t,ki.filterVisible(v),i)}t.traceHash=a};li.plotBasePlot=function(e,t,r,i,n){var a=Ho.getModule(e),o=Ert(t.calcdata,a)[0];a.plot(t,o,i,n)};li.cleanBasePlot=function(e,t,r,i,n){var a=n._has&&n._has(e),o=r._has&&r._has(e);a&&!o&&n["_"+e+"layer"].selectAll("g.trace").remove()}});var kd=ne(fx=>{"use strict";fx.xmlns="http://www.w3.org/2000/xmlns/";fx.svg="http://www.w3.org/2000/svg";fx.xlink="http://www.w3.org/1999/xlink";fx.svgAttrs={xmlns:fx.svg,"xmlns:xlink":fx.xlink}});var Tf=ne((Ger,pre)=>{"use strict";pre.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var Es=ne($d=>{"use strict";var Qu=Ai(),zg=Wt(),Urt=zg.strTranslate,rz=kd(),Vrt=Tf().LINE_SPACING,Hrt=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;$d.convertToTspans=function(e,t,r){var i=e.text(),n=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(Hrt),a=Qu.select(e.node().parentNode);if(a.empty())return;var o=e.attr("class")?e.attr("class").split(" ")[0]:"text";o+="-math",a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function s(){a.empty()||(o=e.attr("class")+"-math",a.select("svg."+o).remove()),e.text("").style("white-space","pre");var l=rnt(e.node(),i);l&&e.style("pointer-events","all"),$d.positionText(e),r&&r.call(e)}return n?(t&&t._promises||[]).push(new Promise(function(l){e.style("display","none");var u=parseInt(e.node().style.fontSize,10),f={fontSize:u};Xrt(n[2],f,function(c,h,v){a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove();var p=c&&c.select("svg");if(!p||!p.node()){s(),l();return}var _=a.append("g").classed(o+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});_.node().appendChild(p.node()),h&&h.node()&&p.node().insertBefore(h.node().cloneNode(!0),p.node().firstChild);var T=v.width,g=v.height;p.attr({class:o,height:g,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var A=e.node().style.fill||"black",b=p.select("g");b.attr({fill:A,stroke:A});var w=b.node().getBoundingClientRect(),k=w.width,x=w.height;(k>T||x>g)&&(p.style("overflow","hidden"),w=p.node().getBoundingClientRect(),k=w.width,x=w.height);var E=+e.attr("x"),M=+e.attr("y"),d=u||e.node().getBoundingClientRect().height,C=-d/4;if(o[0]==="y")_.attr({transform:"rotate("+[-90,E,M]+")"+Urt(-k/2,C-x/2)});else if(o[0]==="l")M=C-x/2;else if(o[0]==="a"&&o.indexOf("atitle")!==0)E=0,M=C;else{var S=e.attr("text-anchor");E=E-k*(S==="middle"?.5:S==="end"?1:0),M=M+C-x/2}p.attr({x:E,y:M}),r&&r.call(e,_),l(_)})})):s(),e};var Grt=/(<|&lt;|&#60;)/g,Yrt=/(>|&gt;|&#62;)/g;function Wrt(e){return e.replace(Grt,"\\lt ").replace(Yrt,"\\gt ")}var gre=[["$","$"],["\\(","\\)"]];function Xrt(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){zg.warn("No MathJax version:",MathJax.version);return}var n,a,o,s,l=function(){return a=zg.extendDeepAll({},MathJax.Hub.config),o=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:gre},displayAlign:"left"})},u=function(){a=zg.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=gre},f=function(){if(n=MathJax.Hub.config.menuSettings.renderer,n!=="SVG")return MathJax.Hub.setRenderer("SVG")},c=function(){n=MathJax.config.startup.output,n!=="svg"&&(MathJax.config.startup.output="svg")},h=function(){var A="math-output-"+zg.randstr({},64);s=Qu.select("body").append("div").attr({id:A}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(Wrt(e));var b=s.node();return i===2?MathJax.Hub.Typeset(b):MathJax.typeset([b])},v=function(){var A=s.select(i===2?".MathJax_SVG":".MathJax"),b=!A.empty()&&s.select("svg").node();if(!b)zg.log("There was an error in the tex syntax.",e),r();else{var w=b.getBoundingClientRect(),k;i===2?k=Qu.select("body").select("#MathJax_SVG_glyphs"):k=A.select("defs"),r(A,k,w)}s.remove()},p=function(){if(n!=="SVG")return MathJax.Hub.setRenderer(n)},_=function(){n!=="svg"&&(MathJax.config.startup.output=n)},T=function(){return o!==void 0&&(MathJax.Hub.processSectionDelay=o),MathJax.Hub.Config(a)},g=function(){MathJax.config=a};i===2?MathJax.Hub.Queue(l,f,h,v,p,T):i===3&&(u(),c(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){h(),v(),_(),g()}))}var _re={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Zrt={sub:"0.3em",sup:"-0.6em"},jrt={sub:"-0.21em",sup:"0.42em"},yre="\u200B",mre=["http:","https:","mailto:","",void 0,":"],bre=$d.NEWLINES=/(\r\n?|\n)/g,iz=/(<[^<>]*>)/,az=/<(\/?)([^ >]*)(\s+(.*))?>/i,Krt=/<br(\s+.*)?>/i;$d.BR_TAG_ALL=/<br(\s+.*)?>/gi;var wre=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,Tre=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,Are=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,Jrt=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function cx(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&dC(i)}var Qrt=/(^|;)\s*color:/;$d.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],n="...",a=n.length,o=e.split(iz),s=[],l="",u=0,f=0;f<o.length;f++){var c=o[f],h=c.match(az),v=h&&h[2].toLowerCase();if(v)i.indexOf(v)!==-1&&(s.push(c),l=v);else{var p=c.length;if(u+p<r)s.push(c),u+=p;else if(u<r){var _=r-u;l&&(l!=="br"||_<=a||p<=a)&&s.pop(),r>a?s.push(c.substr(0,_-a)+n):s.push(c.substr(0,_));break}l=""}}return s.join("")};var $rt={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},ent=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function dC(e){return e.replace(ent,function(t,r){var i;return r.charAt(0)==="#"?i=tnt(r.charAt(1)==="x"?parseInt(r.substr(2),16):parseInt(r.substr(1),10)):i=$rt[r],i||t})}$d.convertEntities=dC;function tnt(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function rnt(e,t){t=t.replace(bre," ");var r=!1,i=[],n,a=-1;function o(){a++;var x=document.createElementNS(rz.svg,"tspan");Qu.select(x).attr({class:"line",dy:a*Vrt+"em"}),e.appendChild(x),n=x;var E=i;if(i=[{node:x}],E.length>1)for(var M=1;M<E.length;M++)s(E[M])}function s(x){var E=x.type,M={},d;if(E==="a"){d="a";var C=x.target,S=x.href,P=x.popup;S&&(M={"xlink:xlink:show":C==="_blank"||C.charAt(0)!=="_"?"new":"replace",target:C,"xlink:xlink:href":S},P&&(M.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+P+'");return false;'))}else d="tspan";x.style&&(M.style=x.style);var D=document.createElementNS(rz.svg,d);if(E==="sup"||E==="sub"){l(n,yre),n.appendChild(D);var z=document.createElementNS(rz.svg,"tspan");l(z,yre),Qu.select(z).attr("dy",jrt[E]),M.dy=Zrt[E],n.appendChild(D),n.appendChild(z)}else n.appendChild(D);Qu.select(D).attr(M),n=x.node=D,i.push(x)}function l(x,E){x.appendChild(document.createTextNode(E))}function u(x){if(i.length===1){zg.log("Ignoring unexpected end tag </"+x+">.",t);return}var E=i.pop();x!==E.type&&zg.log("Start tag <"+E.type+"> doesnt match end tag <"+x+">. Pretending it did match.",t),n=i[i.length-1].node}var f=Krt.test(t);f?o():(n=e,i=[{node:e}]);for(var c=t.split(iz),h=0;h<c.length;h++){var v=c[h],p=v.match(az),_=p&&p[2].toLowerCase(),T=_re[_];if(_==="br")o();else if(T===void 0)l(n,dC(v));else if(p[1])u(_);else{var g=p[4],A={type:_},b=cx(g,wre);if(b?(b=b.replace(Qrt,"$1 fill:"),T&&(b+=";"+T)):T&&(b=T),b&&(A.style=b),_==="a"){r=!0;var w=cx(g,Tre);if(w){var k=Mre(w);k&&(A.href=k,A.target=cx(g,Are)||"_blank",A.popup=cx(g,Jrt))}}s(A)}}return r}function Mre(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var n=r.protocol,a=i.protocol;return mre.indexOf(n)!==-1&&mre.indexOf(a)!==-1?t:""}$d.sanitizeHTML=function(t){t=t.replace(bre," ");for(var r=document.createElement("p"),i=r,n=[],a=t.split(iz),o=0;o<a.length;o++){var s=a[o],l=s.match(az),u=l&&l[2].toLowerCase();if(u in _re)if(l[1])n.length&&(i=n.pop());else{var f=l[4],c=cx(f,wre),h=c?{style:c}:{};if(u==="a"){var v=cx(f,Tre);if(v){var p=Mre(v);if(p){h.href=p;var _=cx(f,Are);_&&(h.target=_)}}}var T=document.createElement(u);i.appendChild(T),Qu.select(T).attr(h),i=T,n.push(T)}else i.appendChild(document.createTextNode(dC(s)))}var g="innerHTML";return r[g]};$d.lineCount=function(t){return t.selectAll("tspan.line").size()||1};$d.positionText=function(t,r,i){return t.each(function(){var n=Qu.select(this);function a(l,u){return u===void 0?(u=n.attr(l),u===null&&(n.attr(l,0),u=0)):n.attr(l,u),u}var o=a("x",r),s=a("y",i);this.nodeName==="text"&&n.selectAll("tspan.line").attr({x:o,y:s})})};function xre(e,t,r){var i=r.horizontalAlign,n=r.verticalAlign||"top",a=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),s,l,u;return n==="bottom"?l=function(){return a.bottom-s.height}:n==="middle"?l=function(){return a.top+(a.height-s.height)/2}:l=function(){return a.top},i==="right"?u=function(){return a.right-s.width}:i==="center"?u=function(){return a.left+(a.width-s.width)/2}:u=function(){return a.left},function(){s=this.node().getBoundingClientRect();var f=u()-o.left,c=l()-o.top,h=r.gd||{};if(r.gd){h._fullLayout._calcInverseTransform(h);var v=zg.apply3DTransform(h._fullLayout._invTransform)(f,c);f=v[0],c=v[1]}return this.style({top:c+"px",left:f+"px","z-index":1e3}),this}}var nz="1px ";$d.makeTextShadow=function(e){var t=nz,r=nz,i=nz;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};$d.makeEditable=function(e,t){var r=t.gd,i=t.delegate,n=Qu.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function o(){l(),e.style({opacity:0});var u=a.attr("class"),f;u?f="."+u.split(" ")[0]+"-math-group":f="[class*=-math-group]",f&&Qu.select(e.node().parentNode).select(f).style({opacity:0})}function s(u){var f=u.node(),c=document.createRange();c.selectNodeContents(f);var h=window.getSelection();h.removeAllRanges(),h.addRange(c),f.focus()}function l(){var u=Qu.select(r),f=u.select(".svg-container"),c=f.append("div"),h=e.node().style,v=parseFloat(h.fontSize||12),p=t.text;p===void 0&&(p=e.attr("data-unformatted")),c.classed("plugin-editable editable",!0).style({position:"absolute","font-family":h.fontFamily||"Arial","font-size":v,color:t.fill||h.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-v/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(p).call(xre(e,f,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var _=Qu.select(this).attr("class"),T;_?T="."+_.split(" ")[0]+"-math-group":T="[class*=-math-group]",T&&Qu.select(e.node().parentNode).select(T).style({opacity:0});var g=this.textContent;Qu.select(this).transition().duration(0).remove(),Qu.select(document).on("mouseup",null),n.edit.call(e,g)}).on("focus",function(){var _=this;r._editing=!0,Qu.select(document).on("mouseup",function(){if(Qu.event.target===_)return!1;document.activeElement===c.node()&&c.node().blur()})}).on("keyup",function(){Qu.event.which===27?(r._editing=!1,e.style({opacity:1}),Qu.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),n.cancel.call(e,this.textContent)):(n.input.call(e,this.textContent),Qu.select(this).call(xre(e,f,t)))}).on("keydown",function(){Qu.event.which===13&&this.blur()}).call(s)}return t.immediate?o():a.on("click",o),Qu.rebind(e,n,"on")}});var Uh=ne((Wer,Dre)=>{"use strict";var nnt=Ai(),gC=Xf(),EA=la(),pC=Wt(),Sre=_i(),int=J1().isValid;function ant(e,t,r){var i=t?pC.nestedProperty(e,t).get()||{}:e,n=i[r||"color"];n&&n._inputArray&&(n=n._inputArray);var a=!1;if(pC.isArrayOrTypedArray(n)){for(var o=0;o<n.length;o++)if(EA(n[o])){a=!0;break}}return pC.isPlainObject(i)&&(a||i.showscale===!0||EA(i.cmin)&&EA(i.cmax)||int(i.colorscale)||pC.isPlainObject(i.colorbar))}var Ere=["showscale","autocolorscale","colorscale","reversescale","colorbar"],SA=["min","max","mid","auto"];function Cre(e){var t=e._colorAx,r=t||e,i={},n,a,o;for(a=0;a<Ere.length;a++)o=Ere[a],i[o]=r[o];if(t)for(n="c",a=0;a<SA.length;a++)o=SA[a],i[o]=r["c"+o];else{var s;for(a=0;a<SA.length;a++){if(o=SA[a],s="c"+o,s in r){i[o]=r[s];continue}s="z"+o,s in r&&(i[o]=r[s])}n=s.charAt(0)}return i._sync=function(l,u){var f=SA.indexOf(l)!==-1?n+l:l;r[f]=r["_"+f]=u},i}function Lre(e){for(var t=Cre(e),r=t.min,i=t.max,n=t.reversescale?Pre(t.colorscale):t.colorscale,a=n.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var u=n[l];o[l]=r+u[0]*(i-r),s[l]=u[1]}return{domain:o,range:s}}function Pre(e){for(var t=e.length,r=new Array(t),i=t-1,n=0;i>=0;i--,n++){var a=e[i];r[n]=[1-a[0],a[1]]}return r}function Rre(e,t){t=t||{};for(var r=e.domain,i=e.range,n=i.length,a=new Array(n),o=0;o<n;o++){var s=gC(i[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=nnt.scale.linear().domain(r).range(a).clamp(!0),u=t.noNumericCheck,f=t.returnArray,c;return u&&f?c=l:u?c=function(h){return kre(l(h))}:f?c=function(h){return EA(h)?l(h):gC(h).isValid()?h:Sre.defaultLine}:c=function(h){return EA(h)?kre(l(h)):gC(h).isValid()?h:Sre.defaultLine},c.domain=l.domain,c.range=function(){return i},c}function ont(e,t){return Rre(Lre(e),t)}function kre(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return gC(t).toRgbString()}Dre.exports={hasColorscale:ant,extractOpts:Cre,extractScale:Lre,flipScale:Pre,makeColorScaleFunc:Rre,makeColorScaleFuncFromTrace:ont}});var kl=ne((Xer,qre)=>{"use strict";var Ire=Sq(),snt=Ire.FORMAT_LINK,lnt=Ire.DATE_FORMAT_LINK;function unt(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?oz:Fre)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function oz(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+snt+"."].join(" ")}function Fre(e,t){return oz(e,t)+[" And for dates see: "+lnt+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}qre.exports={axisHoverFormat:unt,descriptionOnlyNumbers:oz,descriptionWithDates:Fre}});var dc=ne((Zer,Qre)=>{"use strict";var sz=ll(),v2=Ku(),Jre=hc().dash,uz=oa().extendFlat,zre=So().templatedArray,Ore=kl().descriptionWithDates,fnt=$a().ONEDAY,q0=wf(),cnt=q0.HOUR_PATTERN,hnt=q0.WEEKDAY_PATTERN,lz={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},vnt=uz({},lz,{values:lz.values.slice().concat(["sync"])});function Bre(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var Nre={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},Ure={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},Vre={valType:"data_array",editType:"ticks"},Hre={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function Gre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function Yre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var Wre={valType:"color",dflt:v2.defaultLine,editType:"ticks"},Xre={valType:"color",dflt:v2.lightLine,editType:"ticks"};function Zre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var jre=uz({},Jre,{editType:"ticks"}),Kre={valType:"boolean",editType:"ticks"};Qre.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v2.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:sz({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[q0.idRegex.x.toString(),q0.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"calc"},rangebreaks:zre("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[hnt,cnt,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:fnt},editType:"calc"}),tickmode:vnt,nticks:Bre(),tick0:Nre,dtick:Ure,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:Vre,ticktext:{valType:"data_array",editType:"ticks"},ticks:Hre,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:Gre(),tickwidth:Yre(),tickcolor:Wre,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:uz({},Jre,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:sz({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:Ore("tick label")},tickformatstops:zre("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:Ore("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v2.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Kre,gridcolor:Xre,gridwidth:Zre(),griddash:jre,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v2.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v2.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"plot"},minor:{tickmode:lz,nticks:Bre("minor"),tick0:Nre,dtick:Ure,tickvals:Vre,ticks:Hre,ticklen:Gre("minor"),tickwidth:Yre("minor"),tickcolor:Wre,gridcolor:Xre,gridwidth:Zre("minor"),griddash:jre,showgrid:Kre,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:sz({editType:"ticks"})}}});var yC=ne((jer,ene)=>{"use strict";var _l=dc(),fz=ll(),$re=oa().extendFlat,dnt=Xs().overrideAll;ene.exports=dnt({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_l.linecolor,outlinewidth:_l.linewidth,bordercolor:_l.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_l.minor.tickmode,nticks:_l.nticks,tick0:_l.tick0,dtick:_l.dtick,tickvals:_l.tickvals,ticktext:_l.ticktext,ticks:$re({},_l.ticks,{dflt:""}),ticklabeloverflow:$re({},_l.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_l.ticklen,tickwidth:_l.tickwidth,tickcolor:_l.tickcolor,ticklabelstep:_l.ticklabelstep,showticklabels:_l.showticklabels,labelalias:_l.labelalias,tickfont:fz({}),tickangle:_l.tickangle,tickformat:_l.tickformat,tickformatstops:_l.tickformatstops,tickprefix:_l.tickprefix,showtickprefix:_l.showtickprefix,ticksuffix:_l.ticksuffix,showticksuffix:_l.showticksuffix,separatethousands:_l.separatethousands,exponentformat:_l.exponentformat,minexponent:_l.minexponent,showexponent:_l.showexponent,title:{text:{valType:"string"},font:fz({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:fz({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")});var Ps=ne((Jer,rne)=>{"use strict";var pnt=yC(),gnt=Jb().counter,ynt=rx(),tne=J1().scales,Ker=ynt(tne);function mC(e){return"`"+e+"`"}rne.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",n="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,a="noScale"in r?r.noScale:t==="marker.line",o="showScaleDflt"in r?r.showScaleDflt:i==="z",s=typeof r.colorscaleDflt=="string"?tne[r.colorscaleDflt]:null,l=r.editTypeOverride||"",u=t?t+".":"",f,c;"colorAttr"in r?(f=r.colorAttr,c=r.colorAttr):(f={z:"z",c:"color"}[i],c="in "+mC(u+f));var h=n?" Has an effect only if "+c+" is set to a numerical array.":"",v=i+"auto",p=i+"min",_=i+"max",T=i+"mid",g=mC(u+v),A=mC(u+p),b=mC(u+_),w=A+" and "+b,k={};k[p]=k[_]=void 0;var x={};x[v]=!1;var E={};return f==="color"&&(E.color={valType:"color",arrayOk:!0,editType:l||"style"},r.anim&&(E.color.anim=!0)),E[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:k},E[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},E[_]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},E[T]={valType:"number",dflt:null,editType:"calc",impliedEdits:k},E.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},E.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},E.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(E.showscale={valType:"boolean",dflt:o,editType:"calc"},E.colorbar=pnt),r.noColorAxis||(E.coloraxis={valType:"subplotid",regex:gnt("coloraxis"),dflt:null,editType:"calc"}),E}});var hz=ne((Qer,nne)=>{"use strict";var mnt=oa().extendFlat,xnt=Ps(),cz=J1().scales;nne.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:cz.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:cz.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:cz.RdBu,editType:"calc"}},coloraxis:mnt({_isSubplotObj:!0,editType:"calc"},xnt("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var vz=ne(($er,ine)=>{"use strict";var _nt=Wt();ine.exports=function(t){return _nt.isPlainObject(t.colorbar)}});var gz=ne(pz=>{"use strict";var dz=la(),ane=Wt(),one=$a(),bnt=one.ONEDAY,wnt=one.ONEWEEK;pz.dtick=function(e,t){var r=t==="log",i=t==="date",n=t==="category",a=i?bnt:1;if(!e)return a;if(dz(e))return e=Number(e),e<=0?a:n?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return a;var o=e.charAt(0),s=e.substr(1);return s=dz(s)?Number(s):0,s<=0||!(i&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))?a:e};pz.tick0=function(e,t,r,i){if(t==="date")return ane.cleanDate(e,ane.dateTick0(r,i%wnt===0?1:0));if(!(i==="D1"||i==="D2"))return dz(e)?Number(e):0}});var hx=ne((ttr,lne)=>{"use strict";var sne=gz(),Tnt=Wt().isArrayOrTypedArray,Ant=uh().isTypedArraySpec,Mnt=uh().decodeTypedArraySpec;lne.exports=function(t,r,i,n,a){a||(a={});var o=a.isMinor,s=o?t.minor||{}:t,l=o?r.minor:r,u=o?"minor.":"";function f(A){var b=s[A];return Ant(b)&&(b=Mnt(b)),b!==void 0?b:(l._template||{})[A]}var c=f("tick0"),h=f("dtick"),v=f("tickvals"),p=Tnt(v)?"array":h?"linear":"auto",_=i(u+"tickmode",p);if(_==="auto"||_==="sync")i(u+"nticks");else if(_==="linear"){var T=l.dtick=sne.dtick(h,n);l.tick0=sne.tick0(c,n,r.calendar,T)}else if(n!=="multicategory"){var g=i(u+"tickvals");g===void 0?l.tickmode="auto":o||i("ticktext")}}});var d2=ne((rtr,fne)=>{"use strict";var yz=Wt(),une=dc();fne.exports=function(t,r,i,n){var a=n.isMinor,o=a?t.minor||{}:t,s=a?r.minor:r,l=a?une.minor:une,u=a?"minor.":"",f=yz.coerce2(o,s,l,"ticklen",a?(r.ticklen||5)*.6:void 0),c=yz.coerce2(o,s,l,"tickwidth",a?r.tickwidth||1:void 0),h=yz.coerce2(o,s,l,"tickcolor",(a?r.tickcolor:void 0)||s.color),v=i(u+"ticks",!a&&n.outerTicks||f||c||h?"outside":"");v||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)}});var mz=ne((ntr,cne)=>{"use strict";cne.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(a){return t[a]!==void 0}),n=function(a){return t[a]===t[i[0]]};if(i.every(n)||i.length===1)return t[i[0]]}});var ch=ne((itr,hne)=>{"use strict";var xC=Wt(),Snt=So();hne.exports=function(t,r,i){var n=i.name,a=i.inclusionAttr||"visible",o=r[n],s=xC.isArrayOrTypedArray(t[n])?t[n]:[],l=r[n]=[],u=Snt.arrayTemplater(r,n,a),f,c;for(f=0;f<s.length;f++){var h=s[f];xC.isPlainObject(h)?c=u.newItem(h):(c=u.newItem({}),c[a]=!1),c._index=f,c[a]!==!1&&i.handleItemDefaults(h,c,r,i),l.push(c)}var v=u.defaultItems();for(f=0;f<v.length;f++)c=v[f],c._index=l.length,i.handleItemDefaults({},c,r,i,{}),l.push(c);if(xC.isArrayOrTypedArray(o)){var p=Math.min(o.length,l.length);for(f=0;f<p;f++)xC.relinkPrivateKeys(l[f],o[f])}return l}});var im=ne((atr,dne)=>{"use strict";var xz=Wt(),Ent=_i().contrast,vne=dc(),knt=mz(),Cnt=ch();dne.exports=function(t,r,i,n,a){a||(a={});var o=i("labelalias");xz.isPlainObject(o)||delete r.labelalias;var s=knt(t),l=i("showticklabels");if(l){var u=a.font||{},f=r.color,c=r.ticklabelposition||"",h=c.indexOf("inside")!==-1?Ent(a.bgColor):f&&f!==vne.color.dflt?f:u.color;if(xz.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:h}),!a.noTicklabelstep&&n!=="multicategory"&&n!=="log"&&i("ticklabelstep"),!a.noAng){var v=i("tickangle");!a.noAutotickangles&&v==="auto"&&i("autotickangles")}if(n!=="category"){var p=i("tickformat");Cnt(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:Lnt}),r.tickformatstops.length||delete r.tickformatstops,!a.noExp&&!p&&n!=="date"&&(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function Lnt(e,t){function r(n,a){return xz.coerce(e,t,vne.tickformatstops,n,a)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var am=ne((otr,pne)=>{"use strict";var Pnt=mz();pne.exports=function(t,r,i,n,a){a||(a={});var o=a.tickSuffixDflt,s=Pnt(t),l=i("tickprefix");l&&i("showtickprefix",s);var u=i("ticksuffix",o);u&&i("showticksuffix",s)}});var _z=ne((str,gne)=>{"use strict";var om=Wt(),Rnt=So(),Dnt=hx(),Int=d2(),Fnt=im(),qnt=am(),znt=yC();gne.exports=function(t,r,i){var n=Rnt.newContainer(r,"colorbar"),a=t.colorbar||{};function o(S,P){return om.coerce(a,n,znt,S,P)}var s=i.margin||{t:0,b:0,l:0,r:0},l=i.width-s.l-s.r,u=i.height-s.t-s.b,f=o("orientation"),c=f==="v",h=o("thicknessmode");o("thickness",h==="fraction"?30/(c?l:u):30);var v=o("lenmode");o("len",v==="fraction"?1:c?u:l);var p=o("yref"),_=o("xref"),T=p==="paper",g=_==="paper",A,b,w,k="left";c?(w="middle",k=g?"left":"right",A=g?1.02:1,b=.5):(w=T?"bottom":"top",k="center",A=.5,b=T?1.02:1),om.coerce(a,n,{x:{valType:"number",min:g?-2:0,max:g?3:1,dflt:A}},"x"),om.coerce(a,n,{y:{valType:"number",min:T?-2:0,max:T?3:1,dflt:b}},"y"),o("xanchor",k),o("xpad"),o("yanchor",w),o("ypad"),om.noneOrAll(a,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var x=om.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",x.indexOf("inside")!==-1?"hide past domain":"hide past div"),Dnt(a,n,o,"linear");var E=i.font,M={noAutotickangles:!0,outerTicks:!1,font:E};x.indexOf("inside")!==-1&&(M.bgColor="black"),qnt(a,n,o,"linear",M),Fnt(a,n,o,"linear",M),Int(a,n,o,"linear",M),o("title.text",i._dfltTitle.colorbar);var d=n.showticklabels?n.tickfont:E,C=om.extendFlat({},d,{color:E.color,size:om.bigFont(d.size)});om.coerceFont(o,"title.font",C),o("title.side",c?"top":"right")}});var Kf=ne((ltr,xne)=>{"use strict";var yne=la(),wz=Wt(),Ont=vz(),Bnt=_z(),mne=J1().isValid,Nnt=wi().traceIs;function bz(e,t){var r=t.slice(0,t.length-1);return t?wz.nestedProperty(e,r).get()||{}:e}xne.exports=function e(t,r,i,n,a){var o=a.prefix,s=a.cLetter,l="_module"in r,u=bz(t,o),f=bz(r,o),c=bz(r._template||{},o)||{},h=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,n,a)};if(l){var v=i._colorAxes||{},p=n(o+"coloraxis");if(p){var _=Nnt(r,"contour")&&wz.nestedProperty(r,"contours.coloring").get()||"heatmap",T=v[p];T?(T[2].push(h),T[0]!==_&&(T[0]=!1,wz.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[p]=[_,r,[h]];return}}var g=u[s+"min"],A=u[s+"max"],b=yne(g)&&yne(A)&&g<A,w=n(o+s+"auto",!b);w?n(o+s+"mid"):(n(o+s+"min"),n(o+s+"max"));var k=u.colorscale,x=c.colorscale,E;if(k!==void 0&&(E=!mne(k)),x!==void 0&&(E=!mne(x)),n(o+"autocolorscale",E),n(o+"colorscale"),n(o+"reversescale"),o!=="marker.line."){var M;o&&l&&(M=Ont(u));var d=n(o+"showscale",M);d&&(o&&c&&(f._template=c),Bnt(u,f,i))}}});var Tne=ne((utr,wne)=>{"use strict";var _ne=Wt(),Unt=So(),bne=hz(),Vnt=Kf();wne.exports=function(t,r){function i(c,h){return _ne.coerce(t,r,bne,c,h)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var n=r._colorAxes,a,o;function s(c,h){return _ne.coerce(a,o,bne.coloraxis,c,h)}for(var l in n){var u=n[l];if(u[0])a=t[l]||{},o=Unt.newContainer(r,l,"coloraxis"),o._name=l,Vnt(a,o,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<u[2].length;f++)u[2][f]();delete r._colorAxes[l]}}}});var Mne=ne((ftr,Ane)=>{"use strict";var Hnt=Wt(),Gnt=Uh().hasColorscale,Ynt=Uh().extractOpts;Ane.exports=function(t,r){function i(f,c){var h=f["_"+c];h!==void 0&&(f[c]=h)}function n(f,c){var h=c.container?Hnt.nestedProperty(f,c.container).get():f;if(h)if(h.coloraxis)h._colorAx=r[h.coloraxis];else{var v=Ynt(h),p=v.auto;(p||v.min===void 0)&&i(h,c.min),(p||v.max===void 0)&&i(h,c.max),v.autocolorscale&&i(h,"colorscale")}}for(var a=0;a<t.length;a++){var o=t[a],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)n(o,s[l]);else n(o,s);Gnt(o,"marker.line")&&n(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in r._colorAxes)n(r[u],{min:"cmin",max:"cmax"})}});var gv=ne((ctr,Ene)=>{"use strict";var Sne=la(),Tz=Wt(),Wnt=Uh().extractOpts;Ene.exports=function(t,r,i){var n=t._fullLayout,a=i.vals,o=i.containerStr,s=o?Tz.nestedProperty(r,o).get():r,l=Wnt(s),u=l.auto!==!1,f=l.min,c=l.max,h=l.mid,v=function(){return Tz.aggNums(Math.min,null,a)},p=function(){return Tz.aggNums(Math.max,null,a)};if(f===void 0?f=v():u&&(s._colorAx&&Sne(f)?f=Math.min(f,v()):f=v()),c===void 0?c=p():u&&(s._colorAx&&Sne(c)?c=Math.max(c,p()):c=p()),u&&h!==void 0&&(c-h>h-f?f=h-(c-h):c-h<h-f&&(c=h+(h-f))),f===c&&(f-=.5,c+=.5),l._sync("min",f),l._sync("max",c),l.autocolorscale){var _;f*c<0?_=n.colorscale.diverging:f>=0?_=n.colorscale.sequential:_=n.colorscale.sequentialminus,l._sync("colorscale",_)}}});var ul=ne((htr,kne)=>{"use strict";var _C=J1(),p2=Uh();kne.exports={moduleType:"component",name:"colorscale",attributes:Ps(),layoutAttributes:hz(),supplyLayoutDefaults:Tne(),handleDefaults:Kf(),crossTraceDefaults:Mne(),calc:gv(),scales:_C.scales,defaultScale:_C.defaultScale,getScale:_C.get,isValidScale:_C.isValid,hasColorscale:p2.hasColorscale,extractOpts:p2.extractOpts,extractScale:p2.extractScale,flipScale:p2.flipScale,makeColorScaleFunc:p2.makeColorScaleFunc,makeColorScaleFuncFromTrace:p2.makeColorScaleFuncFromTrace}});var js=ne((vtr,Lne)=>{"use strict";var Cne=Wt(),Xnt=uh().isTypedArraySpec;Lne.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return Cne.isPlainObject(t)&&(Cne.isArrayOrTypedArray(t.size)||Xnt(t.size))}}});var kA=ne((dtr,Pne)=>{"use strict";var Znt=la();Pne.exports=function(t,r){r||(r=2);var i=t.marker,n=i.sizeref||1,a=i.sizemin||0,o=i.sizemode==="area"?function(s){return Math.sqrt(s/n)}:function(s){return s/n};return function(s){var l=o(s/r);return Znt(l)&&l>0?Math.max(l,a):0}}});var td=ne(hh=>{"use strict";var Rne=Wt();hh.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};hh.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],n=0;n<r.length;n++)for(var a=0;a<i.length;a++)if(t.indexOf(r[n]+i[a])!==-1)return!0;return!1}return t.indexOf(hh.getSubplot(e))!==-1};hh.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};hh.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};hh.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||hh.quadrature(t,r):e.charAt(0)==="x"?t:r};hh.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=0;i<e.length;i++){var n=t(e[i]);n<=r.distance&&(r.index=i,r.distance=n)}return r};hh.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};hh.quadrature=function(e,t){return function(r){var i=e(r),n=t(r);return Math.sqrt(i*i+n*n)}};hh.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var a=t._indexToPoints[i];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=i;return t._module.eventData?n=t._module.eventData(n,e,t,r,i):("xVal"in e?n.x=e.xVal:"x"in e&&(n.x=e.x),"yVal"in e?n.y=e.yVal:"y"in e&&(n.y=e.y),e.xa&&(n.xaxis=e.xa),e.ya&&(n.yaxis=e.ya),e.zLabelVal!==void 0&&(n.z=e.zLabelVal)),hh.appendArrayPointValue(n,t,i),n};hh.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=Dne(a);if(e[o]===void 0){var s=Rne.nestedProperty(t,a).get(),l=Ine(s,r);l!==void 0&&(e[o]=l)}}};hh.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=Dne(a);if(e[o]===void 0){for(var s=Rne.nestedProperty(t,a).get(),l=new Array(r.length),u=0;u<r.length;u++)l[u]=Ine(s,r[u]);e[o]=l}}};var jnt={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function Dne(e){return jnt[e]||e}function Ine(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var Knt={x:!0,y:!0},Jnt={"x unified":!0,"y unified":!0};hh.isUnifiedHover=function(e){return typeof e!="string"?!1:!!Jnt[e]};hh.isXYhover=function(e){return typeof e!="string"?!1:!!Knt[e]}});var CA=ne((gtr,Fne)=>{Fne.exports=$nt;var Az={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Qnt=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function $nt(e){var t=[];return e.replace(Qnt,function(r,i,n){var a=i.toLowerCase();for(n=tit(n),a=="m"&&n.length>2&&(t.push([i].concat(n.splice(0,2))),a="l",i=i=="m"?"l":"L");;){if(n.length==Az[a])return n.unshift(i),t.push(n);if(n.length<Az[a])throw new Error("malformed path data");t.push([i].concat(n.splice(0,Az[a])))}}),t}var eit=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function tit(e){var t=e.match(eit);return t?t.map(Number):[]}});var Vne=ne((ytr,Une)=>{"use strict";var rit=CA(),Jn=Ai().round,Ua="M0,0Z",qne=Math.sqrt(2),sm=Math.sqrt(3),Mz=Math.PI,Sz=Math.cos,Ez=Math.sin;Une.exports={circle:{n:0,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?Ha(t,r,n):n}},square:{n:1,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.4,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H"+i+"V"+n+"H-"+i+"V"+i+"H-"+n+"V-"+i+"H-"+i+"V-"+n+"H"+i+"V-"+i+"H"+n+"Z")}},x:{n:4,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.8/qne,2),n="l"+i+","+i,a="l"+i+",-"+i,o="l-"+i+",-"+i,s="l-"+i+","+i;return Ha(t,r,"M0,"+i+n+a+o+a+o+s+o+s+n+s+n+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+i+","+n+"H"+i+"L0,-"+a+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+i+",-"+n+"H"+i+"L0,"+a+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M"+n+",-"+i+"V"+i+"L-"+a+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+n+",-"+i+"V"+i+"L"+a+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M-"+n+",-"+i+"H"+i+"V"+n+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+i+",-"+n+"V"+i+"H-"+n+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H-"+i+"V-"+n+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M-"+i+","+n+"V-"+i+"H"+n+"Z")}},pentagon:{n:13,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.951,2),n=Jn(e*.588,2),a=Jn(-e,2),o=Jn(e*-.309,2),s=Jn(e*.809,2);return Ha(t,r,"M"+i+","+o+"L"+n+","+s+"H-"+n+"L-"+i+","+o+"L0,"+a+"Z")}},hexagon:{n:14,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/2,2),a=Jn(e*sm/2,2);return Ha(t,r,"M"+a+",-"+n+"V"+n+"L0,"+i+"L-"+a+","+n+"V-"+n+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/2,2),a=Jn(e*sm/2,2);return Ha(t,r,"M-"+n+","+a+"H"+n+"L"+i+",0L"+n+",-"+a+"H-"+n+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.924,2),n=Jn(e*.383,2);return Ha(t,r,"M-"+n+",-"+i+"H"+n+"L"+i+",-"+n+"V"+n+"L"+n+","+i+"H-"+n+"L-"+i+","+n+"V-"+n+"Z")}},star:{n:17,f:function(e,t,r){if(Va(t))return Ua;var i=e*1.4,n=Jn(i*.225,2),a=Jn(i*.951,2),o=Jn(i*.363,2),s=Jn(i*.588,2),l=Jn(-i,2),u=Jn(i*-.309,2),f=Jn(i*.118,2),c=Jn(i*.809,2),h=Jn(i*.382,2);return Ha(t,r,"M"+n+","+u+"H"+a+"L"+o+","+f+"L"+s+","+c+"L0,"+h+"L-"+s+","+c+"L-"+o+","+f+"L-"+a+","+u+"H-"+n+"L0,"+l+"Z")}},hexagram:{n:18,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.66,2),n=Jn(e*.38,2),a=Jn(e*.76,2);return Ha(t,r,"M-"+a+",0l-"+n+",-"+i+"h"+a+"l"+n+",-"+i+"l"+n+","+i+"h"+a+"l-"+n+","+i+"l"+n+","+i+"h-"+a+"l-"+n+","+i+"l-"+n+",-"+i+"h-"+a+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*sm*.8,2),n=Jn(e*.8,2),a=Jn(e*1.6,2),o=Jn(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M-"+i+","+n+s+i+","+n+s+"0,-"+a+s+"-"+i+","+n+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*sm*.8,2),n=Jn(e*.8,2),a=Jn(e*1.6,2),o=Jn(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M"+i+",-"+n+s+"-"+i+",-"+n+s+"0,"+a+s+i+",-"+n+"Z")}},"star-square":{n:21,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.1,2),n=Jn(e*2,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",-"+i+a+"-"+i+","+i+a+i+","+i+a+i+",-"+i+a+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2),n=Jn(e*1.9,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",0"+a+"0,"+i+a+i+",0"+a+"0,-"+i+a+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.7,2),n=Jn(e*1.4,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2),n=Jn(e*.7,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/qne,2);return Ha(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2),n=Jn(e*.65,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*.85,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e/2,2),n=Jn(e,2);return Ha(t,r,"M"+i+","+n+"V-"+n+"M"+(i-n)+",-"+n+"V"+n+"M"+n+","+i+"H-"+n+"M-"+n+","+(i-n)+"H"+n)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+i+","+a+"L0,0M"+i+","+a+"L0,0M0,-"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+i+",-"+a+"L0,0M"+i+",-"+a+"L0,0M0,"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M"+a+","+i+"L0,0M"+a+",-"+i+"L0,0M-"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+a+","+i+"L0,0M-"+a+",-"+i+"L0,0M"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,0L"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+n+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L-"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(Va(t))return Ua;var i=Mz/2.5,n=2*e*Sz(i),a=2*e*Ez(i);return Ha(t,r,"M0,0L"+-n+","+a+"L"+n+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(Va(t))return Ua;var i=Mz/4,n=2*e*Sz(i),a=2*e*Ez(i);return Ha(t,r,"M0,0L"+-n+","+a+"A "+2*e+","+2*e+" 0 0 1 "+n+","+a+"Z")},backoff:.4,noDot:!0}};function Va(e){return e===null}var zne,One,Bne,Nne;function Ha(e,t,r){if((!e||e%360===0)&&!t)return r;if(Bne===e&&Nne===t&&zne===r)return One;Bne=e,Nne=t,zne=r;function i(T,g){var A=Sz(T),b=Ez(T),w=g[0],k=g[1]+(t||0);return[w*A-k*b,w*b+k*A]}for(var n=e/180*Mz,a=0,o=0,s=rit(r),l="",u=0;u<s.length;u++){var f=s[u],c=f[0],h=a,v=o;if(c==="M"||c==="L")a=+f[1],o=+f[2];else if(c==="m"||c==="l")a+=+f[1],o+=+f[2];else if(c==="H")a=+f[1];else if(c==="h")a+=+f[1];else if(c==="V")o=+f[1];else if(c==="v")o+=+f[1];else if(c==="A"){a=+f[1],o=+f[2];var p=i(n,[+f[6],+f[7]]);f[6]=p[0],f[7]=p[1],f[3]=+f[3]+e}(c==="H"||c==="V")&&(c="L"),(c==="h"||c==="v")&&(c="l"),(c==="m"||c==="l")&&(a-=h,o-=v);var _=i(n,[a,o]);(c==="H"||c==="V")&&(c="L"),(c==="M"||c==="L"||c==="m"||c==="l")&&(f[1]=_[0],f[2]=_[1]),f[0]=c,l+=f[0]+f.slice(1).join(",")}return One=l,l}});var aa=ne((mtr,lie)=>{"use strict";var Jf=Ai(),ks=Wt(),nit=ks.numberFormat,gx=la(),Rz=Xf(),wC=wi(),vh=_i(),iit=ul(),PA=ks.strTranslate,Dz=Es(),ait=kd(),oit=Tf(),sit=oit.LINE_SPACING,Qne=Yy().DESELECTDIM,lit=js(),uit=kA(),fit=td().appendArrayPointValue,ui=lie.exports={};ui.font=function(e,t,r,i){ks.isPlainObject(t)&&(i=t.color,r=t.size,t=t.family),t&&e.style("font-family",t),r+1&&e.style("font-size",r+"px"),i&&e.call(vh.fill,i)};ui.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};ui.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};ui.setRect=function(e,t,r,i,n){e.call(ui.setPosition,t,r).call(ui.setSize,i,n)};ui.translatePoint=function(e,t,r,i){var n=r.c2p(e.x),a=i.c2p(e.y);if(gx(n)&&gx(a)&&t.node())t.node().nodeName==="text"?t.attr("x",n).attr("y",a):t.attr("transform",PA(n,a));else return!1;return!0};ui.translatePoints=function(e,t,r){e.each(function(i){var n=Jf.select(this);ui.translatePoint(i,n,t,r)})};ui.hideOutsideRangePoint=function(e,t,r,i,n,a){t.attr("display",r.isPtWithinRange(e,n)&&i.isPtWithinRange(e,a)?null:"none")};ui.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(n){var a=n[0].trace,o=a.xcalendar,s=a.ycalendar,l=wC.traceIs(a,"bar-like")?".bartext":".point,.textpoint";e.selectAll(l).each(function(u){ui.hideOutsideRangePoint(u,Jf.select(this),r,i,o,s)})})}};ui.crispRound=function(e,t,r){return!t||!gx(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};ui.singleLineStyle=function(e,t,r,i,n){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=n||a.dash||"";vh.stroke(t,i||a.color),ui.dashLine(t,s,o)};ui.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(n){var a=(((n||[])[0]||{}).trace||{}).line||{},o=t||a.width||0,s=i||a.dash||"";Jf.select(this).call(vh.stroke,r||a.color).call(ui.dashLine,s,o)})};ui.dashLine=function(e,t,r){r=+r||0,t=ui.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};ui.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function $ne(e,t,r,i){var n=t.fillpattern,a=t.fillgradient,o=n&&ui.getPatternAttr(n.shape,0,"");if(o){var s=ui.getPatternAttr(n.bgcolor,0,null),l=ui.getPatternAttr(n.fgcolor,0,null),u=n.fgopacity,f=ui.getPatternAttr(n.size,0,8),c=ui.getPatternAttr(n.solidity,0,.3),h=t.uid;ui.pattern(e,"point",r,h,o,f,c,void 0,n.fillmode,s,l,u)}else if(a&&a.type!=="none"){var v=a.type,p="scatterfill-"+t.uid;if(i&&(p="legendfill-"+t.uid),!i&&(a.start!==void 0||a.stop!==void 0)){var _,T;v==="horizontal"?(_={x:a.start,y:0},T={x:a.stop,y:0}):v==="vertical"&&(_={x:0,y:a.start},T={x:0,y:a.stop}),_.x=t._xA.c2p(_.x===void 0?t._extremes.x.min[0].val:_.x,!0),_.y=t._yA.c2p(_.y===void 0?t._extremes.y.min[0].val:_.y,!0),T.x=t._xA.c2p(T.x===void 0?t._extremes.x.max[0].val:T.x,!0),T.y=t._yA.c2p(T.y===void 0?t._extremes.y.max[0].val:T.y,!0),e.call(rie,r,p,"linear",a.colorscale,"fill",_,T,!0,!1)}else v==="horizontal"&&(v=v+"reversed"),e.call(ui.gradient,r,p,v,a.colorscale,"fill")}else t.fillcolor&&e.call(vh.fill,t.fillcolor)}ui.singleFillStyle=function(e,t){var r=Jf.select(e.node()),i=r.data(),n=((i[0]||[])[0]||{}).trace||{};$ne(e,n,t,!1)};ui.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var n=Jf.select(this);i[0].trace&&$ne(n,i[0].trace,t,r)})};var Hne=Vne();ui.symbolNames=[];ui.symbolFuncs=[];ui.symbolBackOffs=[];ui.symbolNeedLines={};ui.symbolNoDot={};ui.symbolNoFill={};ui.symbolList=[];Object.keys(Hne).forEach(function(e){var t=Hne[e],r=t.n;ui.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),ui.symbolNames[r]=e,ui.symbolFuncs[r]=t.f,ui.symbolBackOffs[r]=t.backoff||0,t.needLine&&(ui.symbolNeedLines[r]=!0),t.noDot?ui.symbolNoDot[r]=!0:ui.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(ui.symbolNoFill[r]=!0)});var cit=ui.symbolNames.length,hit="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";ui.symbolNumber=function(e){if(gx(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=ui.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=cit||e>=400?0:Math.floor(Math.max(e,0))};function eie(e,t,r,i){var n=e%100;return ui.symbolFuncs[n](t,r,i)+(e>=200?hit:"")}var Gne=nit("~f"),tie={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};ui.gradient=function(e,t,r,i,n,a){var o=tie[i];return rie(e,t,r,o.type,n,a,o.start,o.stop,!1,o.reversed)};function rie(e,t,r,i,n,a,o,s,l,u){var f=n.length,c;i==="linear"?c={node:"linearGradient",attrs:{x1:o.x,y1:o.y,x2:s.x,y2:s.y,gradientUnits:l?"userSpaceOnUse":"objectBoundingBox"},reversed:u}:i==="radial"&&(c={node:"radialGradient",reversed:u});for(var h=new Array(f),v=0;v<f;v++)c.reversed?h[f-1-v]=[Gne((1-n[v][0])*100),n[v][1]]:h[v]=[Gne(n[v][0]*100),n[v][1]];var p=t._fullLayout,_="g"+p._uid+"-"+r,T=p._defs.select(".gradients").selectAll("#"+_).data([i+h.join(";")],ks.identity);T.exit().remove(),T.enter().append(c.node).each(function(){var g=Jf.select(this);c.attrs&&g.attr(c.attrs),g.attr("id",_);var A=g.selectAll("stop").data(h);A.exit().remove(),A.enter().append("stop"),A.each(function(b){var w=Rz(b[1]);Jf.select(this).attr({offset:b[0]+"%","stop-color":vh.tinyRGB(w),"stop-opacity":w.getAlpha()})})}),e.style(a,Iz(_,t)).style(a+"-opacity",null),e.classed("gradient_filled",!0)}ui.pattern=function(e,t,r,i,n,a,o,s,l,u,f,c){var h=t==="legend";s&&(l==="overlay"?(u=s,f=vh.contrast(u)):(u=void 0,f=s));var v=r._fullLayout,p="p"+v._uid+"-"+i,_,T,g=function(D,z,O,V,B){return V+(B-V)*(D-z)/(O-z)},A,b,w,k,x={},E=Rz(f),M=vh.tinyRGB(E),d=E.getAlpha(),C=c*d;switch(n){case"/":_=a*Math.sqrt(2),T=a*Math.sqrt(2),A="M-"+_/4+","+T/4+"l"+_/2+",-"+T/2+"M0,"+T+"L"+_+",0M"+_/4*3+","+T/4*5+"l"+_/2+",-"+T/2,b=o*a,k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case"\\":_=a*Math.sqrt(2),T=a*Math.sqrt(2),A="M"+_/4*3+",-"+T/4+"l"+_/2+","+T/2+"M0,0L"+_+","+T+"M-"+_/4+","+T/4*3+"l"+_/2+","+T/2,b=o*a,k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case"x":_=a*Math.sqrt(2),T=a*Math.sqrt(2),A="M-"+_/4+","+T/4+"l"+_/2+",-"+T/2+"M0,"+T+"L"+_+",0M"+_/4*3+","+T/4*5+"l"+_/2+",-"+T/2+"M"+_/4*3+",-"+T/4+"l"+_/2+","+T/2+"M0,0L"+_+","+T+"M-"+_/4+","+T/4*3+"l"+_/2+","+T/2,b=a-a*Math.sqrt(1-o),k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case"|":_=a,T=a,k="path",A="M"+_/2+",0L"+_/2+","+T,b=o*a,k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case"-":_=a,T=a,k="path",A="M0,"+T/2+"L"+_+","+T/2,b=o*a,k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case"+":_=a,T=a,k="path",A="M"+_/2+",0L"+_/2+","+T+"M0,"+T/2+"L"+_+","+T/2,b=a-a*Math.sqrt(1-o),k="path",x={d:A,opacity:C,stroke:M,"stroke-width":b+"px"};break;case".":_=a,T=a,o<Math.PI/4?w=Math.sqrt(o*a*a/Math.PI):w=g(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),k="circle",x={cx:_/2,cy:T/2,r:w,opacity:C,fill:M};break}var S=[n||"noSh",u||"noBg",f||"noFg",a,o].join(";"),P=v._defs.select(".patterns").selectAll("#"+p).data([S],ks.identity);P.exit().remove(),P.enter().append("pattern").each(function(){var D=Jf.select(this);if(D.attr({id:p,width:_+"px",height:T+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),u){var z=Rz(u),O=vh.tinyRGB(z),V=z.getAlpha(),B=D.selectAll("rect").data([0]);B.exit().remove(),B.enter().append("rect").attr({width:_+"px",height:T+"px",fill:O,"fill-opacity":V})}var F=D.selectAll(k).data([0]);F.exit().remove(),F.enter().append(k).attr(x)}),e.style("fill",Iz(p,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};ui.initGradients=function(e){var t=e._fullLayout,r=ks.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),Jf.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};ui.initPatterns=function(e){var t=e._fullLayout,r=ks.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),Jf.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};ui.getPatternAttr=function(e,t,r){return e&&ks.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};ui.pointStyle=function(e,t,r,i){if(e.size()){var n=ui.makePointStyleFns(t);e.each(function(a){ui.singlePointStyle(a,Jf.select(this),t,n,r,i)})}};ui.singlePointStyle=function(e,t,r,i,n,a){var o=r.marker,s=o.line;if(a&&a.i>=0&&e.i===void 0&&(e.i=a.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?o.opacity:e.mo),i.ms2mrc){var l;e.ms==="various"||o.size==="various"?l=3:l=i.ms2mrc(e.ms),e.mrc=l,i.selectedSizeFn&&(l=e.mrc=i.selectedSizeFn(e));var u=ui.symbolNumber(e.mx||o.symbol)||0;e.om=u%200>=100;var f=qz(e,r),c=Fz(e,r);t.attr("d",eie(u,l,f,c))}var h=!1,v,p,_;if(e.so)_=s.outlierwidth,p=s.outliercolor,v=o.outliercolor;else{var T=(s||{}).width;_=(e.mlw+1||T+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?p=e.mlcc=i.lineScale(e.mlc):ks.isArrayOrTypedArray(s.color)?p=vh.defaultLine:p=s.color,ks.isArrayOrTypedArray(o.color)&&(v=vh.defaultLine,h=!0),"mc"in e?v=e.mcc=i.markerScale(e.mc):v=o.color||o.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(v=i.selectedColorFn(e))}if(e.om)t.call(vh.stroke,v).style({"stroke-width":(_||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:_)+"px");var g=o.gradient,A=e.mgt;A?h=!0:A=g&&g.type,ks.isArrayOrTypedArray(A)&&(A=A[0],tie[A]||(A=0));var b=o.pattern,w=b&&ui.getPatternAttr(b.shape,e.i,"");if(A&&A!=="none"){var k=e.mgc;k?h=!0:k=g.color;var x=r.uid;h&&(x+="-"+e.i),ui.gradient(t,n,x,A,[[0,k],[1,v]],"fill")}else if(w){var E=!1,M=b.fgcolor;!M&&a&&a.color&&(M=a.color,E=!0);var d=ui.getPatternAttr(M,e.i,a&&a.color||null),C=ui.getPatternAttr(b.bgcolor,e.i,null),S=b.fgopacity,P=ui.getPatternAttr(b.size,e.i,8),D=ui.getPatternAttr(b.solidity,e.i,.3);E=E||e.mcc||ks.isArrayOrTypedArray(b.shape)||ks.isArrayOrTypedArray(b.bgcolor)||ks.isArrayOrTypedArray(b.fgcolor)||ks.isArrayOrTypedArray(b.size)||ks.isArrayOrTypedArray(b.solidity);var z=r.uid;E&&(z+="-"+e.i),ui.pattern(t,"point",n,z,w,P,D,e.mcc,b.fillmode,C,d,S)}else ks.isArrayOrTypedArray(v)?vh.fill(t,v[e.i]):vh.fill(t,v);_&&vh.stroke(t,p)}};ui.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=ui.tryColorscale(r,""),t.lineScale=ui.tryColorscale(r,"line"),wC.traceIs(e,"symbols")&&(t.ms2mrc=lit.isBubble(e)?uit(e):function(){return(r.size||6)/2}),e.selectedpoints&&ks.extendFlat(t,ui.makeSelectedPointStyleFns(e)),t};ui.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.marker||{},a=r.marker||{},o=i.marker||{},s=n.opacity,l=a.opacity,u=o.opacity,f=l!==void 0,c=u!==void 0;(ks.isArrayOrTypedArray(s)||f||c)&&(t.selectedOpacityFn=function(w){var k=w.mo===void 0?n.opacity:w.mo;return w.selected?f?l:k:c?u:Qne*k});var h=n.color,v=a.color,p=o.color;(v||p)&&(t.selectedColorFn=function(w){var k=w.mcc||h;return w.selected?v||k:p||k});var _=n.size,T=a.size,g=o.size,A=T!==void 0,b=g!==void 0;return wC.traceIs(e,"symbols")&&(A||b)&&(t.selectedSizeFn=function(w){var k=w.mrc||_/2;return w.selected?A?T/2:k:b?g/2:k}),t};ui.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.textfont||{},a=r.textfont||{},o=i.textfont||{},s=n.color,l=a.color,u=o.color;return t.selectedTextColorFn=function(f){var c=f.tc||s;return f.selected?l||c:u||(l?c:vh.addOpacity(c,Qne))},t};ui.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedPointStyleFns(t),i=t.marker||{},n=[];r.selectedOpacityFn&&n.push(function(a,o){a.style("opacity",r.selectedOpacityFn(o))}),r.selectedColorFn&&n.push(function(a,o){vh.fill(a,r.selectedColorFn(o))}),r.selectedSizeFn&&n.push(function(a,o){var s=o.mx||i.symbol||0,l=r.selectedSizeFn(o);a.attr("d",eie(ui.symbolNumber(s),l,qz(o,t),Fz(o,t))),o.mrc2=l}),n.length&&e.each(function(a){for(var o=Jf.select(this),s=0;s<n.length;s++)n[s](o,a)})}};ui.tryColorscale=function(e,t){var r=t?ks.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&ks.isArrayOrTypedArray(i))return iit.makeColorScaleFuncFromTrace(r)}return ks.identity};var kz={start:1,end:-1,middle:0,bottom:1,top:-1};function nie(e,t,r,i,n){var a=Jf.select(e.node().parentNode),o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",s=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",l=i?i/.8+1:0,u=(Dz.lineCount(e)-1)*sit+1,f=kz[s]*l,c=r*.75+kz[o]*l+(kz[o]-1)*u*r/2;e.attr("text-anchor",s),n||a.attr("transform",PA(f,c))}function iie(e,t){var r=e.ts||t.textfont.size;return gx(r)&&r>0?r:0}ui.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var n=ui.makeSelectedTextStyleFns(t);i=n.selectedTextColorFn}var a=t.texttemplate,o=r._fullLayout;e.each(function(s){var l=Jf.select(this),u=a?ks.extractOption(s,t,"txt","texttemplate"):ks.extractOption(s,t,"tx","text");if(!u&&u!==0){l.remove();return}if(a){var f=t._module.formatLabels,c=f?f(s,t,o):{},h={};fit(h,t,s.i);var v=t._meta||{};u=ks.texttemplateString(u,c,o._d3locale,h,s,v)}var p=s.tp||t.textposition,_=iie(s,t),T=i?i(s):s.tc||t.textfont.color;l.call(ui.font,s.tf||t.textfont.family,_,T).text(u).call(Dz.convertToTspans,r).call(nie,p,_,s.mrc)})}};ui.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedTextStyleFns(t);e.each(function(i){var n=Jf.select(this),a=r.selectedTextColorFn(i),o=i.tp||t.textposition,s=iie(i,t);vh.fill(n,a);var l=wC.traceIs(t,"bar-like");nie(n,o,s,i.mrc2||i.mrc,l)})}};var Yne=.5;ui.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],n;for(n=1;n<e.length-1;n++)i.push(bC(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};ui.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,n=[bC(e[i],e[0],e[1],t)],a;for(a=1;a<i;a++)n.push(bC(e[a-1],e[a],e[a+1],t));for(n.push(bC(e[i-1],e[i],e[0],t)),a=1;a<=i;a++)r+="C"+n[a-1][1]+" "+n[a][0]+" "+e[a];return r+="C"+n[i][1]+" "+n[0][0]+" "+e[0]+"Z",r};var aie,oie;function g2(e,t,r){return r&&(e=sie(e)),t?px(e[1]):dx(e[0])}function dx(e){var t=Jf.round(e,2);return aie=t,t}function px(e){var t=Jf.round(e,2);return oie=t,t}function bC(e,t,r,i){var n=e[0]-t[0],a=e[1]-t[1],o=r[0]-t[0],s=r[1]-t[1],l=Math.pow(n*n+a*a,Yne/2),u=Math.pow(o*o+s*s,Yne/2),f=(u*u*n-l*l*o)*i,c=(u*u*a-l*l*s)*i,h=3*u*(l+u),v=3*l*(l+u);return[[dx(t[0]+(h&&f/h)),px(t[1]+(h&&c/h))],[dx(t[0]-(v&&f/v)),px(t[1]-(v&&c/v))]]}var vit={hv:function(e,t,r){return"H"+dx(t[0])+"V"+g2(t,1,r)},vh:function(e,t,r){return"V"+px(t[1])+"H"+g2(t,0,r)},hvh:function(e,t,r){return"H"+dx((e[0]+t[0])/2)+"V"+px(t[1])+"H"+g2(t,0,r)},vhv:function(e,t,r){return"V"+px((e[1]+t[1])/2)+"H"+dx(t[0])+"V"+g2(t,1,r)}},dit=function(e,t,r){return"L"+g2(t,0,r)+","+g2(t,1,r)};ui.steps=function(e){var t=vit[e]||dit;return function(r){for(var i="M"+dx(r[0][0])+","+px(r[0][1]),n=r.length,a=1;a<n;a++)i+=t(r[a-1],r[a],a===n-1);return i}};function sie(e,t){var r=e.backoff,i=e.trace,n=e.d,a=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var o=ks.isArrayOrTypedArray(r),s=e,l=t?t[0]:aie||0,u=t?t[1]:oie||0,f=s[0],c=s[1],h=f-l,v=c-u,p=Math.atan2(v,h),_=o?r[a]:r;if(_==="auto"){var T=s.i;i.type==="scatter"&&T--;var g=s.marker,A=g.symbol;ks.isArrayOrTypedArray(A)&&(A=A[T]);var b=g.size;ks.isArrayOrTypedArray(b)&&(b=b[T]),_=g?ui.symbolBackOffs[ui.symbolNumber(A)]*b:0,_+=ui.getMarkerStandoff(n[T],i)||0}var w=f-_*Math.cos(p),k=c-_*Math.sin(p);(w<=f&&w>=l||w>=f&&w<=l)&&(k<=c&&k>=u||k>=c&&k<=u)&&(e=[w,k])}return e}ui.applyBackoff=sie;ui.makeTester=function(){var e=ks.ensureSingleById(Jf.select("body"),"svg","js-plotly-tester",function(r){r.attr(ait.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=ks.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});ui.tester=e,ui.testref=t};ui.savedBBoxes={};var Cz=0,pit=1e4;ui.bBox=function(e,t,r){r||(r=Wne(e));var i;if(r){if(i=ui.savedBBoxes[r],i)return ks.extendFlat({},i)}else if(e.childNodes.length===1){var n=e.childNodes[0];if(r=Wne(n),r){var a=+n.getAttribute("x")||0,o=+n.getAttribute("y")||0,s=n.getAttribute("transform");if(!s){var l=ui.bBox(n,!1,r);return a&&(l.left+=a,l.right+=a),o&&(l.top+=o,l.bottom+=o),l}if(r+="~"+a+"~"+o+"~"+s,i=ui.savedBBoxes[r],i)return ks.extendFlat({},i)}}var u,f;t?u=e:(f=ui.tester.node(),u=e.cloneNode(!0),f.appendChild(u)),Jf.select(u).attr("transform",null).call(Dz.positionText,0,0);var c=u.getBoundingClientRect(),h=ui.testref.node().getBoundingClientRect();t||f.removeChild(u);var v={height:c.height,width:c.width,left:c.left-h.left,top:c.top-h.top,right:c.right-h.left,bottom:c.bottom-h.top};return Cz>=pit&&(ui.savedBBoxes={},Cz=0),r&&(ui.savedBBoxes[r]=v),Cz++,ks.extendFlat({},v)};function Wne(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}ui.setClipUrl=function(e,t,r){e.attr("clip-path",Iz(t,r))};function Iz(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}ui.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};ui.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||0,r=r||0,o=o.replace(i,"").trim(),o+=PA(t,r),o=o.trim(),e[a]("transform",o),o};ui.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};ui.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||1,r=r||1,o=o.replace(i,"").trim(),o+="scale("+t+","+r+")",o=o.trim(),e[a]("transform",o),o};var git=/\s*sc.*/;ui.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var n=(this.getAttribute("transform")||"").replace(git,"");n+=i,n=n.trim(),this.setAttribute("transform",n)})}};var yit=/translate\([^)]*\)\s*$/;ui.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,n=Jf.select(this),a=n.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(n.attr("transform")||"").match(yit);t===1&&r===1?i=[]:i=[PA(o,s),"scale("+t+","+r+")",PA(-o,-s)],l&&i.push(l),n.attr("transform",i.join(""))}})};function Fz(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}ui.getMarkerStandoff=Fz;var LA=Math.atan2,vx=Math.cos,y2=Math.sin;function Xne(e,t){var r=t[0],i=t[1];return[r*vx(e)-i*y2(e),r*y2(e)+i*vx(e)]}var Zne,jne,Kne,Jne,Lz,Pz;function qz(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||ks.isArrayOrTypedArray(r))&&(r=0));var i,n,a=t.marker.angleref;if(a==="previous"||a==="north"){if(t._geo){var o=t._geo.project(e.lonlat);i=o[0],n=o[1]}else{var s=t._xA,l=t._yA;if(s&&l)i=s.c2p(e.x),n=l.c2p(e.y);else return 90}if(t._geo){var u=e.lonlat[0],f=e.lonlat[1],c=t._geo.project([u,f+1e-5]),h=t._geo.project([u+1e-5,f]),v=LA(h[1]-n,h[0]-i),p=LA(c[1]-n,c[0]-i),_;if(a==="north")_=r/180*Math.PI;else if(a==="previous"){var T=u/180*Math.PI,g=f/180*Math.PI,A=Zne/180*Math.PI,b=jne/180*Math.PI,w=A-T,k=vx(b)*y2(w),x=y2(b)*vx(g)-vx(b)*y2(g)*vx(w);_=-LA(k,x)-Math.PI,Zne=u,jne=f}var E=Xne(v,[vx(_),0]),M=Xne(p,[y2(_),0]);r=LA(E[1]+M[1],E[0]+M[0])/Math.PI*180,a==="previous"&&!(Pz===t.uid&&e.i===Lz+1)&&(r=null)}if(a==="previous"&&!t._geo)if(Pz===t.uid&&e.i===Lz+1&&gx(i)&&gx(n)){var d=i-Kne,C=n-Jne,S=t.line&&t.line.shape||"",P=S.slice(S.length-1);P==="h"&&(C=0),P==="v"&&(d=0),r+=LA(C,d)/Math.PI*180+90}else r=null}return Kne=i,Jne=n,Lz=e.i,Pz=t.uid,r}ui.getMarkerAngle=qz});var yx=ne((xtr,gie)=>{"use strict";var TC=Ai(),mit=la(),uie=Zs(),fie=wi(),m2=Wt(),cie=m2.strTranslate,hie=aa(),vie=_i(),zz=Es(),die=Yy(),xit=Tf().OPPOSITE_SIDE,pie=/ [XY][0-9]* /;function _it(e,t,r){var i=r.propContainer,n=r.propName,a=r.placeholder,o=r.traceIndex,s=r.avoid||{},l=r.attributes,u=r.transform,f=r.containerGroup,c=e._fullLayout,h=1,v=!1,p=i.title,_=(p&&p.text?p.text:"").trim(),T=p&&p.font?p.font:{},g=T.family,A=T.size,b=T.color,w;n==="title.text"?w="titleText":n.indexOf("axis")!==-1?w="axisTitleText":n.indexOf("colorbar"!==-1)&&(w="colorbarTitleText");var k=e._context.edits[w];_===""?h=0:_.replace(pie," % ")===a.replace(pie," % ")&&(h=.2,v=!0,k||(_="")),r._meta?_=m2.templateString(_,r._meta):c._meta&&(_=m2.templateString(_,c._meta));var x=_||k,E;f||(f=m2.ensureSingle(c._infolayer,"g","g-"+t),E=c._hColorbarMoveTitle);var M=f.selectAll("text").data(x?[0]:[]);if(M.enter().append("text"),M.text(_).attr("class",t),M.exit().remove(),!x)return f;function d(D){m2.syncOrAsync([C,S],D)}function C(D){var z;return!u&&E&&(u={}),u?(z="",u.rotate&&(z+="rotate("+[u.rotate,l.x,l.y]+")"),(u.offset||E)&&(z+=cie(0,(u.offset||0)-(E||0)))):z=null,D.attr("transform",z),D.style({"font-family":g,"font-size":TC.round(A,2)+"px",fill:vie.rgb(b),opacity:h*vie.opacity(b),"font-weight":uie.fontWeight}).attr(l).call(zz.convertToTspans,e),uie.previousPromises(e)}function S(D){var z=TC.select(D.node().parentNode);if(s&&s.selection&&s.side&&_){z.attr("transform",null);var O=xit[s.side],V=s.side==="left"||s.side==="top"?-1:1,B=mit(s.pad)?s.pad:2,F=hie.bBox(z.node()),N={t:0,b:0,l:0,r:0},Z=e._fullLayout._reservedMargin;for(var J in Z)for(var re in Z[J]){var le=Z[J][re];N[re]=Math.max(N[re],le)}var fe={left:N.l,top:N.t,right:c.width-N.r,bottom:c.height-N.b},K=s.maxShift||V*(fe[s.side]-F[s.side]),X=0;if(K<0)X=K;else{var ae=s.offsetLeft||0,oe=s.offsetTop||0;F.left-=ae,F.right-=ae,F.top-=oe,F.bottom-=oe,s.selection.each(function(){var be=hie.bBox(this);m2.bBoxIntersect(F,be,B)&&(X=Math.max(X,V*(be[s.side]-F[O])+B))}),X=Math.min(K,X),i._titleScoot=Math.abs(X)}if(X>0||K<0){var _e={left:[-X,0],right:[X,0],top:[0,-X],bottom:[0,X]}[s.side];z.attr("transform",cie(_e[0],_e[1]))}}}M.call(d);function P(){h=0,v=!0,M.text(a).on("mouseover.opacity",function(){TC.select(this).transition().duration(die.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){TC.select(this).transition().duration(die.HIDE_PLACEHOLDER).style("opacity",0)})}return k&&(_?M.on(".opacity",null):P(),M.call(zz.makeEditable,{gd:e}).on("edit",function(D){o!==void 0?fie.call("_guiRestyle",e,n,D,o):fie.call("_guiRelayout",e,n,D)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(d)}).on("input",function(D){this.text(D||" ").call(zz.positionText,l.x,l.y)})),M.classed("js-placeholder",v),f}gie.exports={draw:_it}});var B0=ne((_tr,bie)=>{"use strict";var bit=Ai(),wit=Xb().utcFormat,Ks=Wt(),Tit=Ks.numberFormat,z0=la(),lm=Ks.cleanNumber,Ait=Ks.ms2DateTime,yie=Ks.dateTime2ms,O0=Ks.ensureNumber,mie=Ks.isArrayOrTypedArray,um=$a(),AC=um.FP_SAFE,$p=um.BADNUM,Mit=um.LOG_CLIP,Sit=um.ONEWEEK,MC=um.ONEDAY,SC=um.ONEHOUR,xie=um.ONEMIN,_ie=um.ONESEC,EC=zl(),LC=wf(),kC=LC.HOUR_PATTERN,CC=LC.WEEKDAY_PATTERN;function RA(e){return Math.pow(10,e)}function Oz(e){return e!=null}bie.exports=function(t,r){r=r||{};var i=t._id||"x",n=i.charAt(0);function a(w,k){if(w>0)return Math.log(w)/Math.LN10;if(w<=0&&k&&t.range&&t.range.length===2){var x=t.range[0],E=t.range[1];return .5*(x+E-2*Mit*Math.abs(x-E))}else return $p}function o(w,k,x,E){if((E||{}).msUTC&&z0(w))return+w;var M=yie(w,x||t.calendar);if(M===$p)if(z0(w)){w=+w;var d=Math.floor(Ks.mod(w+.05,1)*10),C=Math.round(w-d/10);M=yie(new Date(C))+d/10}else return $p;return M}function s(w,k,x){return Ait(w,k,x||t.calendar)}function l(w){return t._categories[Math.round(w)]}function u(w){if(Oz(w)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[w]!==void 0)return t._categoriesMap[w];t._categories.push(typeof w=="number"?String(w):w);var k=t._categories.length-1;return t._categoriesMap[w]=k,k}return $p}function f(w,k){for(var x=new Array(k),E=0;E<k;E++){var M=(w[0]||[])[E],d=(w[1]||[])[E];x[E]=c([M,d])}return x}function c(w){if(t._categoriesMap)return t._categoriesMap[w]}function h(w){var k=c(w);if(k!==void 0)return k;if(z0(w))return+w}function v(w){return z0(w)?+w:c(w)}function p(w,k,x){return bit.round(x+k*w,2)}function _(w,k,x){return(w-x)/k}var T=function(k){return z0(k)?p(k,t._m,t._b):$p},g=function(w){return _(w,t._m,t._b)};if(t.rangebreaks){var A=n==="y";T=function(w){if(!z0(w))return $p;var k=t._rangebreaks.length;if(!k)return p(w,t._m,t._b);var x=A;t.range[0]>t.range[1]&&(x=!x);for(var E=x?-1:1,M=E*w,d=0,C=0;C<k;C++){var S=E*t._rangebreaks[C].min,P=E*t._rangebreaks[C].max;if(M<S)break;if(M>P)d=C+1;else{d=M<(S+P)/2?C:C+1;break}}var D=t._B[d]||0;return isFinite(D)?p(w,t._m2,D):0},g=function(w){var k=t._rangebreaks.length;if(!k)return _(w,t._m,t._b);for(var x=0,E=0;E<k&&!(w<t._rangebreaks[E].pmin);E++)w>t._rangebreaks[E].pmax&&(x=E+1);return _(w,t._m2,t._B[x])}}t.c2l=t.type==="log"?a:O0,t.l2c=t.type==="log"?RA:O0,t.l2p=T,t.p2l=g,t.c2p=t.type==="log"?function(w,k){return T(a(w,k))}:T,t.p2c=t.type==="log"?function(w){return RA(g(w))}:g,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=lm,t.c2d=t.c2r=t.l2d=t.l2r=O0,t.d2p=t.r2p=function(w){return t.l2p(lm(w))},t.p2d=t.p2r=g,t.cleanPos=O0):t.type==="log"?(t.d2r=t.d2l=function(w,k){return a(lm(w),k)},t.r2d=t.r2c=function(w){return RA(lm(w))},t.d2c=t.r2l=lm,t.c2d=t.l2r=O0,t.c2r=a,t.l2d=RA,t.d2p=function(w,k){return t.l2p(t.d2r(w,k))},t.p2d=function(w){return RA(g(w))},t.r2p=function(w){return t.l2p(lm(w))},t.p2r=g,t.cleanPos=O0):t.type==="date"?(t.d2r=t.r2d=Ks.identity,t.d2c=t.r2c=t.d2l=t.r2l=o,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(w,k,x){return t.l2p(o(w,0,x))},t.p2d=t.p2r=function(w,k,x){return s(g(w),k,x)},t.cleanPos=function(w){return Ks.cleanDate(w,$p,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=u,t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(w){var k=v(w);return k!==void 0?k:t.fraction2r(.5)},t.l2r=t.c2r=O0,t.r2l=v,t.d2p=function(w){return t.l2p(t.r2c(w))},t.p2d=function(w){return l(g(w))},t.r2p=t.d2p,t.p2r=g,t.cleanPos=function(w){return typeof w=="string"&&w!==""?w:O0(w)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(w){var k=h(w);return k!==void 0?k:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=O0,t.r2l=h,t.d2p=function(w){return t.l2p(t.r2c(w))},t.p2d=function(w){return l(g(w))},t.r2p=t.d2p,t.p2r=g,t.cleanPos=function(w){return Array.isArray(w)||typeof w=="string"&&w!==""?w:O0(w)},t.setupMultiCategory=function(w){var k=t._traceIndices,x,E,M=t._matchGroup;if(M&&t._categories.length===0){for(var d in M)if(d!==i){var C=r[EC.id2name(d)];k=k.concat(C._traceIndices)}}var S=[[0,{}],[0,{}]],P=[];for(x=0;x<k.length;x++){var D=w[k[x]];if(n in D){var z=D[n],O=D._length||Ks.minRowLength(z);if(mie(z[0])&&mie(z[1]))for(E=0;E<O;E++){var V=z[0][E],B=z[1][E];Oz(V)&&Oz(B)&&(P.push([V,B]),V in S[0][1]||(S[0][1][V]=S[0][0]++),B in S[1][1]||(S[1][1][B]=S[1][0]++))}}}for(P.sort(function(F,N){var Z=S[0][1],J=Z[F[0]]-Z[N[0]];if(J)return J;var re=S[1][1];return re[F[1]]-re[N[1]]}),x=0;x<P.length;x++)u(P[x])}),t.fraction2r=function(w){var k=t.r2l(t.range[0]),x=t.r2l(t.range[1]);return t.l2r(k+w*(x-k))},t.r2fraction=function(w){var k=t.r2l(t.range[0]),x=t.r2l(t.range[1]);return(t.r2l(w)-k)/(x-k)},t.limitRange=function(w){var k=t.minallowed,x=t.maxallowed;if(!(k===void 0&&x===void 0)){w||(w="range");var E=Ks.nestedProperty(t,w).get(),M=Ks.simpleMap(E,t.r2l),d=M[1]<M[0];d&&M.reverse();var C=Ks.simpleMap([k,x],t.r2l);if(k!==void 0&&M[0]<C[0]&&(E[d?1:0]=k),x!==void 0&&M[1]>C[1]&&(E[d?0:1]=x),E[0]===E[1]){var S=t.l2r(k),P=t.l2r(x);if(k!==void 0){var D=S+1;x!==void 0&&(D=Math.min(D,P)),E[d?1:0]=D}if(x!==void 0){var z=P+1;k!==void 0&&(z=Math.max(z,S)),E[d?0:1]=z}}}},t.cleanRange=function(w,k){t._cleanRange(w,k),t.limitRange(w)},t._cleanRange=function(w,k){k||(k={}),w||(w="range");var x=Ks.nestedProperty(t,w).get(),E,M;if(t.type==="date"?M=Ks.dfltRange(t.calendar):n==="y"?M=LC.DFLTRANGEY:t._name==="realaxis"?M=[0,1]:M=k.dfltRange||LC.DFLTRANGEX,M=M.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(M[0]=0),!x||x.length!==2){Ks.nestedProperty(t,w).set(M);return}var d=x[0]===null,C=x[1]===null;for(t.type==="date"&&!t.autorange&&(x[0]=Ks.cleanDate(x[0],$p,t.calendar),x[1]=Ks.cleanDate(x[1],$p,t.calendar)),E=0;E<2;E++)if(t.type==="date"){if(!Ks.isDateTime(x[E],t.calendar)){t[w]=M;break}if(t.r2l(x[0])===t.r2l(x[1])){var S=Ks.constrain(t.r2l(x[0]),Ks.MIN_MS+1e3,Ks.MAX_MS-1e3);x[0]=t.l2r(S-1e3),x[1]=t.l2r(S+1e3);break}}else{if(!z0(x[E]))if(!(d||C)&&z0(x[1-E]))x[E]=x[1-E]*(E?10:.1);else{t[w]=M;break}if(x[E]<-AC?x[E]=-AC:x[E]>AC&&(x[E]=AC),x[0]===x[1]){var P=Math.max(1,Math.abs(x[0]*1e-6));x[0]-=P,x[1]+=P}}},t.setScale=function(w){var k=r._size;if(t.overlaying){var x=EC.getFromId({_fullLayout:r},t.overlaying);t.domain=x.domain}var E=w&&t._r?"_r":"range",M=t.calendar;t.cleanRange(E);var d=t.r2l(t[E][0],M),C=t.r2l(t[E][1],M),S=n==="y";if(S?(t._offset=k.t+(1-t.domain[1])*k.h,t._length=k.h*(t.domain[1]-t.domain[0]),t._m=t._length/(d-C),t._b=-t._m*C):(t._offset=k.l+t.domain[0]*k.w,t._length=k.w*(t.domain[1]-t.domain[0]),t._m=t._length/(C-d),t._b=-t._m*d),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var P,D;if(t._rangebreaks=t.locateBreaks(Math.min(d,C),Math.max(d,C)),t._rangebreaks.length){for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._lBreaks+=Math.abs(D.max-D.min);var z=S;d>C&&(z=!z),z&&t._rangebreaks.reverse();var O=z?-1:1;for(t._m2=O*t._length/(Math.abs(C-d)-t._lBreaks),t._B.push(-t._m2*(S?C:d)),P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._B.push(t._B[t._B.length-1]-O*t._m2*(D.max-D.min));for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],D.pmin=T(D.min),D.pmax=T(D.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(w){var k=t.rangebreaks||[],x,E,M,d,C;k._cachedPatterns||(k._cachedPatterns=k.map(function(Z){return Z.enabled&&Z.bounds?Ks.simpleMap(Z.bounds,Z.pattern?lm:t.d2c):null})),k._cachedValues||(k._cachedValues=k.map(function(Z){return Z.enabled&&Z.values?Ks.simpleMap(Z.values,t.d2c).sort(Ks.sorterAsc):null}));for(var S=0;S<k.length;S++){var P=k[S];if(P.enabled){if(P.bounds){var D=P.pattern;switch(x=k._cachedPatterns[S],E=x[0],M=x[1],D){case CC:C=new Date(w),d=C.getUTCDay(),E>M&&(M+=7,d<E&&(d+=7));break;case kC:C=new Date(w);var z=C.getUTCHours(),O=C.getUTCMinutes(),V=C.getUTCSeconds(),B=C.getUTCMilliseconds();d=z+(O/60+V/3600+B/36e5),E>M&&(M+=24,d<E&&(d+=24));break;case"":d=w;break}if(d>=E&&d<M)return $p}else for(var F=k._cachedValues[S],N=0;N<F.length;N++)if(E=F[N],M=E+P.dvalue,w>=E&&w<M)return $p}}return w},t.locateBreaks=function(w,k){var x,E,M,d,C=[];if(!t.rangebreaks)return C;var S=t.rangebreaks.slice().sort(function(re,le){return re.pattern===CC&&le.pattern===kC?-1:le.pattern===CC&&re.pattern===kC?1:0}),P=function(re,le){if(re=Ks.constrain(re,w,k),le=Ks.constrain(le,w,k),re!==le){for(var fe=!0,K=0;K<C.length;K++){var X=C[K];re<X.max&&le>=X.min&&(re<X.min&&(X.min=re),le>X.max&&(X.max=le),fe=!1)}fe&&C.push({min:re,max:le})}};for(x=0;x<S.length;x++){var D=S[x];if(D.enabled)if(D.bounds){var z=w,O=k;D.pattern&&(z=Math.floor(z)),E=Ks.simpleMap(D.bounds,D.pattern?lm:t.r2l),M=E[0],d=E[1];var V=new Date(z),B,F;switch(D.pattern){case CC:F=Sit,B=((d<M?7:0)+(d-M))*MC,z+=M*MC-(V.getUTCDay()*MC+V.getUTCHours()*SC+V.getUTCMinutes()*xie+V.getUTCSeconds()*_ie+V.getUTCMilliseconds());break;case kC:F=MC,B=((d<M?24:0)+(d-M))*SC,z+=M*SC-(V.getUTCHours()*SC+V.getUTCMinutes()*xie+V.getUTCSeconds()*_ie+V.getUTCMilliseconds());break;default:z=Math.min(E[0],E[1]),O=Math.max(E[0],E[1]),F=O-z,B=F}for(var N=z;N<O;N+=F)P(N,N+B)}else for(var Z=Ks.simpleMap(D.values,t.d2c),J=0;J<Z.length;J++)M=Z[J],d=M+D.dvalue,P(M,d)}return C.sort(function(re,le){return re.min-le.min}),C},t.makeCalcdata=function(w,k,x){var E,M,d,C,S=t.type,P=S==="date"&&w[k+"calendar"];if(k in w){if(E=w[k],C=w._length||Ks.minRowLength(E),Ks.isTypedArray(E)&&(S==="linear"||S==="log")){if(C===E.length)return E;if(E.subarray)return E.subarray(0,C)}if(S==="multicategory")return f(E,C);for(M=new Array(C),d=0;d<C;d++)M[d]=t.d2c(E[d],0,P,x)}else{var D=k+"0"in w?t.d2c(w[k+"0"],0,P):0,z=w["d"+k]?Number(w["d"+k]):1;for(E=w[{x:"y",y:"x"}[k]],C=w._length||E.length,M=new Array(C),d=0;d<C;d++)M[d]=D+d*z}if(t.rangebreaks)for(d=0;d<C;d++)M[d]=t.maskBreaks(M[d]);return M},t.isValidRange=function(w,k){return Array.isArray(w)&&w.length===2&&(k&&w[0]===null||z0(t.r2l(w[0])))&&(k&&w[1]===null||z0(t.r2l(w[1])))},t.getAutorangeDflt=function(w,k){var x=!t.isValidRange(w,"nullOk");return x&&k&&k.reverseDflt?x="reversed":w&&(w[0]===null&&w[1]===null?x=!0:w[0]===null&&w[1]!==null?x="min":w[0]!==null&&w[1]===null&&(x="max")),x},t.isReversed=function(){var w=t.autorange;return w==="reversed"||w==="min reversed"||w==="max reversed"},t.isPtWithinRange=function(w,k){var x=t.c2l(w[n],null,k),E=t.r2l(t.range[0]),M=t.r2l(t.range[1]);return E<M?E<=x&&x<=M:M<=x&&x<=E},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var w=t._matchGroup;if(w){var k=null,x=null;for(var E in w){var M=r[EC.id2name(E)];if(M._categories){k=M._categories,x=M._categoriesMap;break}}k&&x?(t._categories=k,t._categoriesMap=x):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var d=0;d<t._initialCategories.length;d++)u(t._initialCategories[d])},t.sortByInitialCategories=function(){var w=[];if(t._emptyCategories(),t._initialCategories)for(var k=0;k<t._initialCategories.length;k++)u(t._initialCategories[k]);w=w.concat(t._traceIndices);var x=t._matchGroup;for(var E in x)if(i!==E){var M=r[EC.id2name(E)];M._categories=t._categories,M._categoriesMap=t._categoriesMap,w=w.concat(M._traceIndices)}return w};var b=r._d3locale;t.type==="date"&&(t._dateFormat=b?b.timeFormat:wit,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=b?b.numberFormat:Tit,delete t._minDtick,delete t._forceTick0}});var x2=ne((btr,Mie)=>{"use strict";var wie=la(),Bz=Wt(),Eit=$a().BADNUM,PC=Bz.isArrayOrTypedArray,kit=Bz.isDateTime,Cit=Bz.cleanNumber,Tie=Math.round;Mie.exports=function(t,r,i){var n=t,a=i.noMultiCategory;if(PC(n)&&!n.length)return"-";if(!a&&Iit(n))return"multicategory";if(a&&Array.isArray(n[0])){for(var o=[],s=0;s<n.length;s++)if(PC(n[s]))for(var l=0;l<n[s].length;l++)o.push(n[s][l]);n=o}if(Rit(n,r))return"date";var u=i.autotypenumbers!=="strict";return Dit(n,u)?"category":Pit(n,u)?"linear":"-"};function Lit(e,t){return t?wie(e):typeof e=="number"}function Pit(e,t){for(var r=e.length,i=0;i<r;i++)if(Lit(e[i],t))return!0;return!1}function Rit(e,t){for(var r=e.length,i=Aie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=Tie(s),u=e[l],f=String(u);o[f]||(o[f]=1,kit(u,t)&&n++,wie(u)&&a++)}return n>a*2}function Aie(e){return Math.max(1,(e-1)/1e3)}function Dit(e,t){for(var r=e.length,i=Aie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=Tie(s),u=e[l],f=String(u);if(!o[f]){o[f]=1;var c=typeof u;c==="boolean"?a++:(t?Cit(u)!==Eit:c==="number")?n++:c==="string"&&a++}}return a>n*2}function Iit(e){return PC(e[0])&&PC(e[1])}});var Cd=ne((wtr,Die)=>{"use strict";var Fit=Ai(),Cie=la(),fm=Wt(),RC=$a().FP_SAFE,qit=wi(),zit=aa(),Lie=zl(),Oit=Lie.getFromId,Bit=Lie.isLinked;Die.exports={applyAutorangeOptions:Rie,getAutoRange:Nz,makePadFn:Uz,doAutoRange:Uit,findExtremes:Vit,concatExtremes:Gz};function Nz(e,t){var r,i,n=[],a=e._fullLayout,o=Uz(a,t,0),s=Uz(a,t,1),l=Gz(e,t),u=l.min,f=l.max;if(u.length===0||f.length===0)return fm.simpleMap(t.range,t.r2l);var c=u[0].val,h=f[0].val;for(r=1;r<u.length&&c===h;r++)c=Math.min(c,u[r].val);for(r=1;r<f.length&&c===h;r++)h=Math.max(h,f[r].val);var v=t.autorange,p=v==="reversed"||v==="min reversed"||v==="max reversed";if(!p&&t.range){var _=fm.simpleMap(t.range,t.r2l);p=_[1]<_[0]}t.autorange==="reversed"&&(t.autorange=!0);var T=t.rangemode,g=T==="tozero",A=T==="nonnegative",b=t._length,w=b/10,k=0,x,E,M,d,C,S;for(r=0;r<u.length;r++)for(x=u[r],i=0;i<f.length;i++)E=f[i],S=E.val-x.val-Sie(t,x.val,E.val),S>0&&(C=b-o(x)-s(E),C>w?S/C>k&&(M=x,d=E,k=S/C):S/b>k&&(M={val:x.val,nopad:1},d={val:E.val,nopad:1},k=S/b));function P(B,F){return Math.max(B,s(F))}if(c===h){var D=c-1,z=c+1;if(g)if(c===0)n=[0,1];else{var O=(c>0?f:u).reduce(P,0),V=c/(1-Math.min(.5,O/b));n=c>0?[0,V]:[V,0]}else A?n=[Math.max(0,D),Math.max(1,z)]:n=[D,z]}else g?(M.val>=0&&(M={val:0,nopad:1}),d.val<=0&&(d={val:0,nopad:1})):A&&(M.val-k*o(M)<0&&(M={val:0,nopad:1}),d.val<=0&&(d={val:1,nopad:1})),k=(d.val-M.val-Sie(t,x.val,E.val))/(b-o(M)-s(d)),n=[M.val-k*o(M),d.val+k*s(d)];return n=Rie(n,t),t.limitRange&&t.limitRange(),p&&n.reverse(),fm.simpleMap(n,t.l2r||Number)}function Sie(e,t,r){var i=0;if(e.rangebreaks)for(var n=e.locateBreaks(t,r),a=0;a<n.length;a++){var o=n[a];i+=o.max-o.min}return i}function Uz(e,t,r){var i=.05*t._length,n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var a=t.isReversed();if(!a){var o=fm.simpleMap(t.range,t.r2l);a=o[1]<o[0]}a&&(r=!r)}var s=0;return Bit(e,t._id)||(s=Nit(e,t,r)),i=Math.max(s,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(u){return u.nopad?0:u.pad+(u.extrapad?i:s)}}var Eie=3;function Nit(e,t,r){var i=0,n=t._id.charAt(0)==="x";for(var a in e._plots){var o=e._plots[a];if(!(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)){var s=(n?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right"))){if(s._vals){var l=fm.deg2rad(s._tickAngles[s._id+"tick"]||0),u=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l));if(!s._vals[0].bb){var c=s._id+"tick",h=s._selections[c];h.each(function(A){var b=Fit.select(this),w=b.select(".text-math-group");w.empty()&&(A.bb=zit.bBox(b.node()))})}for(var v=0;v<s._vals.length;v++){var p=s._vals[v],_=p.bb;if(_){var T=2*Eie+_.width,g=2*Eie+_.height;i=Math.max(i,n?Math.max(T*u,g*f):Math.max(g*u,T*f))}}}s.ticks==="inside"&&s.ticklabelposition==="inside"&&(i+=s.ticklen||0)}}}return i}function Gz(e,t,r){var i=t._id,n=e._fullData,a=e._fullLayout,o=[],s=[],l,u,f;function c(T,g){for(l=0;l<g.length;l++){var A=T[g[l]],b=(A._extremes||{})[i];if(A.visible===!0&&b){for(u=0;u<b.min.length;u++)f=b.min[u],Vz(o,f.val,f.pad,{extrapad:f.extrapad});for(u=0;u<b.max.length;u++)f=b.max[u],Hz(s,f.val,f.pad,{extrapad:f.extrapad})}}}if(c(n,t._traceIndices),c(a.annotations||[],t._annIndices||[]),c(a.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var h in t._matchGroup)if(h!==t._id){var v=Oit(e,h),p=Gz(e,v,!0),_=t._length/v._length;for(u=0;u<p.min.length;u++)f=p.min[u],Vz(o,f.val,f.pad*_,{extrapad:f.extrapad});for(u=0;u<p.max.length;u++)f=p.max[u],Hz(s,f.val,f.pad*_,{extrapad:f.extrapad})}}return{min:o,max:s}}function Uit(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():Nz(e,t),t._r=t.range.slice(),t._rl=fm.simpleMap(t._r,t.r2l);var i=t._input,n={};n[t._attr+".range"]=t.range,n[t._attr+".autorange"]=t.autorange,qit.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n),i.range=t.range.slice(),i.autorange=t.autorange}var a=t._anchorAxis;if(a&&a.rangeslider){var o=a.rangeslider[t._name];o&&o.rangemode==="auto"&&(o.range=Nz(e,t)),a._input.rangeslider[t._name]=fm.extendFlat({},o)}}function Vit(e,t,r){r||(r={}),e._m||e.setScale();var i=[],n=[],a=t.length,o=r.padded||!1,s=r.tozero&&(e.type==="linear"||e.type==="-"),l=e.type==="log",u=!1,f=r.vpadLinearized||!1,c,h,v,p,_,T,g,A,b;function w(P){if(Array.isArray(P))return u=!0,function(z){return Math.max(Number(P[z]||0),0)};var D=Math.max(Number(P||0),0);return function(){return D}}var k=w((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),x=w((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),E=w(r.vpadplus||r.vpad),M=w(r.vpadminus||r.vpad);if(!u){if(A=1/0,b=-1/0,l)for(c=0;c<a;c++)h=t[c],h<A&&h>0&&(A=h),h>b&&h<RC&&(b=h);else for(c=0;c<a;c++)h=t[c],h<A&&h>-RC&&(A=h),h>b&&h<RC&&(b=h);t=[A,b],a=2}var d={tozero:s,extrapad:o};function C(P){v=t[P],Cie(v)&&(T=k(P),g=x(P),f?(p=e.c2l(v)-M(P),_=e.c2l(v)+E(P)):(A=v-M(P),b=v+E(P),l&&A<b/10&&(A=b/10),p=e.c2l(A),_=e.c2l(b)),s&&(p=Math.min(0,p),_=Math.max(0,_)),kie(p)&&Vz(i,p,g,d),kie(_)&&Hz(n,_,T,d))}var S=Math.min(6,a);for(c=0;c<S;c++)C(c);for(c=a-1;c>=S;c--)C(c);return{min:i,max:n,opts:r}}function Vz(e,t,r,i){Pie(e,t,r,i,Hit)}function Hz(e,t,r,i){Pie(e,t,r,i,Git)}function Pie(e,t,r,i,n){for(var a=i.tozero,o=i.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=!1;break}else n(t,u.val)&&u.pad<=r&&(o||!u.extrapad)&&(e.splice(l,1),l--)}if(s){var f=a&&t===0;e.push({val:t,pad:f?0:r,extrapad:f?!1:o})}}function kie(e){return Cie(e)&&Math.abs(e)<RC}function Hit(e,t){return e<=t}function Git(e,t){return e>=t}function Yit(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&DC(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&DC(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function Wit(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&DC(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&DC(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function DC(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function Rie(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],n=t.autorangeoptions.include;if(n!==void 0){var a=t.d2l(r),o=t.d2l(i);fm.isArrayOrTypedArray(n)||(n=[n]);for(var s=0;s<n.length;s++){var l=t.d2l(n[s]);a>=l&&(a=l,r=l),o<=l&&(o=l,i=l)}}return r=Yit(r,t),i=Wit(i,t),[r,i]}});var Xi=ne((Ttr,eae)=>{"use strict";var ep=Ai(),$u=la(),b2=Zs(),DA=wi(),Ia=Wt(),w2=Ia.strTranslate,_2=Es(),Xit=yx(),IA=_i(),Ld=aa(),Zit=dc(),Iie=gz(),Vh=$a(),jit=Vh.ONEMAXYEAR,zC=Vh.ONEAVGYEAR,Zz=Vh.ONEMINYEAR,Kit=Vh.ONEMAXQUARTER,jz=Vh.ONEAVGQUARTER,Kz=Vh.ONEMINQUARTER,Jit=Vh.ONEMAXMONTH,T2=Vh.ONEAVGMONTH,Jz=Vh.ONEMINMONTH,tp=Vh.ONEWEEK,yv=Vh.ONEDAY,mx=yv/2,Og=Vh.ONEHOUR,OC=Vh.ONEMIN,Qz=Vh.ONESEC,xx=Vh.MINUS_SIGN,VC=Vh.BADNUM,$z={K:"zeroline"},eO={K:"gridline",L:"path"},tO={K:"minor-gridline",L:"path"},Gie={K:"tick",L:"path"},Fie={K:"tick",L:"text"},qie={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},HC=Tf(),IC=HC.MID_SHIFT,_x=HC.CAP_SHIFT,BC=HC.LINE_SPACING,Qit=HC.OPPOSITE_SIDE,NC=3,Dn=eae.exports={};Dn.setConvert=B0();var $it=x2(),Bg=zl(),eat=Bg.idSort,tat=Bg.isLinked;Dn.id2name=Bg.id2name;Dn.name2id=Bg.name2id;Dn.cleanId=Bg.cleanId;Dn.list=Bg.list;Dn.listIds=Bg.listIds;Dn.getFromId=Bg.getFromId;Dn.getFromTrace=Bg.getFromTrace;var Yie=Cd();Dn.getAutoRange=Yie.getAutoRange;Dn.findExtremes=Yie.findExtremes;var rat=1e-4;function oO(e){var t=(e[1]-e[0])*rat;return[e[0]-t,e[1]+t]}Dn.coerceRef=function(e,t,r,i,n,a){var o=i.charAt(i.length-1),s=r._fullLayout._subplots[o+"axis"],l=i+"ref",u={};return n||(n=s[0]||(typeof a=="string"?a:a[0])),a||(a=n),s=s.concat(s.map(function(f){return f+" domain"})),u[l]={valType:"enumerated",values:s.concat(a?typeof a=="string"?[a]:a:[]),dflt:n},Ia.coerce(e,t,u,l)};Dn.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};Dn.coercePosition=function(e,t,r,i,n,a){var o,s,l=Dn.getRefType(i);if(l!=="range")o=Ia.ensureNumber,s=r(n,a);else{var u=Dn.getFromId(t,i);a=u.fraction2r(a),s=r(n,a),o=u.cleanPos}e[n]=o(s)};Dn.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?Ia.ensureNumber:Dn.getFromId(t,r).cleanPos;return i(e)};Dn.redrawComponents=function(e,t){t=t||Dn.listIds(e);var r=e._fullLayout;function i(n,a,o,s){for(var l=DA.getComponentMethod(n,a),u={},f=0;f<t.length;f++)for(var c=r[Dn.id2name(t[f])],h=c[o],v=0;v<h.length;v++){var p=h[v];if(!u[p]&&(l(e,p),u[p]=1,s))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var nat=Dn.getDataConversions=function(e,t,r,i){var n,a=r==="x"||r==="y"||r==="z"?r:i;if(Ia.isArrayOrTypedArray(a)){if(n={type:$it(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},Dn.setConvert(n),n.type==="category")for(var o=0;o<i.length;o++)n.d2c(i[o])}else n=Dn.getFromTrace(e,t,a);return n?{d2c:n.d2c,c2d:n.c2d}:a==="ids"?{d2c:Oie,c2d:Oie}:{d2c:zie,c2d:zie}};function zie(e){return+e}function Oie(e){return String(e)}Dn.getDataToCoordFunc=function(e,t,r,i){return nat(e,t,r,i).d2c};Dn.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Dn.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};Dn.saveRangeInitial=function(e,t){for(var r=Dn.list(e,"",!0),i=!1,n=0;n<r.length;n++){var a=r[n],o=a._rangeInitial0===void 0&&a._rangeInitial1===void 0,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&l!==!0||t&&s)&&(a._rangeInitial0=l==="min"||l==="max reversed"?void 0:a.range[0],a._rangeInitial1=l==="max"||l==="min reversed"?void 0:a.range[1],a._autorangeInitial=l,i=!0)}return i};Dn.saveShowSpikeInitial=function(e,t){for(var r=Dn.list(e,"",!0),i=!1,n="on",a=0;a<r.length;a++){var o=r[a],s=o._showSpikeInitial===void 0,l=s||o.showspikes!==o._showspikes;(s||t&&l)&&(o._showSpikeInitial=o.showspikes,i=!0),n==="on"&&!o.showspikes&&(n="off")}return e._fullLayout._cartesianSpikesEnabled=n,i};Dn.autoBin=function(e,t,r,i,n,a){var o=Ia.aggNums(Math.min,null,e),s=Ia.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:s-o};n||(n=t.calendar);var l;if(t.type==="log"?l={type:"linear",range:[o,s]}:l={type:t.type,range:Ia.simpleMap([o,s],t.c2r,0,n),calendar:n},Dn.setConvert(l),a=a&&Iie.dtick(a,l.type),a)l.dtick=a,l.tick0=Iie.tick0(void 0,l.type,n);else{var u;if(r)u=(s-o)/r;else{var f=Ia.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=c*Ia.roundUp(f.minDiff/c,[.9,1.9,4.9,9.9],!0);u=Math.max(h,2*Ia.stdev(e)/Math.pow(e.length,i?.25:.4)),$u(u)||(u=1)}Dn.autoTicks(l,u)}var v=l.dtick,p=Dn.tickIncrement(Dn.tickFirst(l),v,"reverse",n),_,T;if(typeof v=="number")p=iat(p,e,l,o,s),T=1+Math.floor((s-p)/v),_=p+T*v;else for(l.dtick.charAt(0)==="M"&&(p=aat(p,e,v,o,n)),_=p,T=0;_<=s;)_=Dn.tickIncrement(_,v,!1,n),T++;return{start:t.c2r(p,0,n),end:t.c2r(_,0,n),size:v,_dataSpan:s-o}};function iat(e,t,r,i,n){var a=0,o=0,s=0,l=0;function u(v){return(1+(v-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1===0?s++:$u(t[f])||l++,u(t[f])&&a++,u(t[f]+r.dtick/2)&&o++;var c=t.length-l;if(s===c&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(o<c*.1&&(a>c*.3||u(i)||u(n))){var h=r.dtick/2;e+=e+h<i?h:-h}return e}function aat(e,t,r,i,n){var a=Ia.findExactDates(t,n),o=.8;if(a.exactDays>o){var s=Number(r.substr(1));a.exactYears>o&&s%12===0?e=Dn.tickIncrement(e,"M6","reverse")+yv*1.5:a.exactMonths>o?e=Dn.tickIncrement(e,"M1","reverse")+yv*15.5:e-=mx;var l=Dn.tickIncrement(e,r);if(l<=i)return l}return e}Dn.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&$u(t._tmin),n;if(i){var a=Dn.tickIncrement(t._tmin,t.dtick,!0);n=[t._tmin,a*.99+t._tmin*.01]}else{var o=Ia.simpleMap(t.range,t.r2l);n=[o[0],.8*o[0]+.2*o[1]]}if(e.range=Ia.simpleMap(n,t.l2r),e._isMinor=!0,Dn.prepTicks(e,r),i){var s=$u(t.dtick),l=$u(e.dtick),u=s?t.dtick:+t.dtick.substring(1),f=l?e.dtick:+e.dtick.substring(1);s&&l?Yz(u,f)?u===2*tp&&f===2*yv&&(e.dtick=tp):u===2*tp&&f===3*yv?e.dtick=tp:u===tp&&!(t._input.minor||{}).nticks?e.dtick=yv:Bie(u/f,2.5)?e.dtick=u/2:e.dtick=u:String(t.dtick).charAt(0)==="M"?l?e.dtick="M1":Yz(u,f)?u>=12&&f===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?Yz(u,f)||(e.dtick=Bie(u/f,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function Yz(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function Bie(e,t){return Math.abs(e/t-1)<.001}Dn.prepTicks=function(e,t){var r=Ia.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,n;i||(e.type==="category"||e.type==="multicategory"?(n=e.tickfont?Ia.bigFont(e.tickfont.size||12):15,i=e._length/n):(n=e._id.charAt(0)==="y"?40:80,i=Ia.constrain(e._length/n,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,Dn.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&oat(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),jie(e)};function Wz(e){return+e.substring(1)}function oat(e){var t;function r(){return!($u(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),n=Dn.getTickFormat(e);if(n){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(n)||(/%[HI]/.test(n)?(t=Og,a&&!i&&e.dtick<Og&&(e.dtick=Og)):/%p/.test(n)?(t=mx,a&&!i&&e.dtick<mx&&(e.dtick=mx)):/%[Aadejuwx]/.test(n)?(t=yv,a&&!i&&e.dtick<yv&&(e.dtick=yv)):/%[UVW]/.test(n)?(t=tp,a&&!i&&e.dtick<tp&&(e.dtick=tp)):/%[Bbm]/.test(n)?(t=T2,a&&(i?Wz(e.dtick)<1:e.dtick<Jz)&&(e.dtick="M1")):/%[q]/.test(n)?(t=jz,a&&(i?Wz(e.dtick)<3:e.dtick<Kz)&&(e.dtick="M3")):/%[Yy]/.test(n)&&(t=zC,a&&(i?Wz(e.dtick)<12:e.dtick<Zz)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function sat(e,t,r){for(var i=0;i<e.length;i++){var n=e[i].value,a=i,o=i+1;i<e.length-1?(a=i,o=i+1):i>0?(a=i-1,o=i):(a=i,o=i);var s=e[a].value,l=e[o].value,u=Math.abs(l-s),f=r||u,c=0;f>=Zz?u>=Zz&&u<=jit?c=u:c=zC:r===jz&&f>=Kz?u>=Kz&&u<=Kit?c=u:c=jz:f>=Jz?u>=Jz&&u<=Jit?c=u:c=T2:r===tp&&f>=tp?c=tp:f>=yv?c=yv:r===mx&&f>=mx?c=mx:r===Og&&f>=Og&&(c=Og);var h;c>=u&&(c=u,h=!0);var v=n+c;if(t.rangebreaks&&c>0){for(var p=84,_=0,T=0;T<p;T++){var g=(T+.5)/p;t.maskBreaks(n*(1-g)+g*v)!==VC&&_++}c*=_/p,c||(e[i].drop=!0),h&&u>tp&&(c=u)}(c>0||i===0)&&(e[i].periodX=n+c/2)}}Dn.calcTicks=function(t,r){for(var i=t.type,n=t.calendar,a=t.ticklabelstep,o=t.ticklabelmode==="period",s=Ia.simpleMap(t.range,t.r2l,void 0,void 0,r),l=s[1]<s[0],u=Math.min(s[0],s[1]),f=Math.max(s[0],s[1]),c=Math.max(1e3,t._length||0),h=[],v=[],p=[],_=[],T=t.minor&&(t.minor.ticks||t.minor.showgrid),g=1;g>=(T?0:1);g--){var A=!g;g?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var b=g?t:Ia.extendFlat({},t,t.minor);if(A?Dn.prepMinorTicks(b,t,r):Dn.prepTicks(b,r),b.tickmode==="array"){g?(p=[],h=Nie(t,!A)):(_=[],v=Nie(t,!A));continue}if(b.tickmode==="sync"){p=[],h=lat(t);continue}var w=oO(s),k=w[0],x=w[1],E=$u(b.dtick),M=i==="log"&&!(E||b.dtick.charAt(0)==="L"),d=Dn.tickFirst(b,r);if(g){if(t._tmin=d,d<k!==l)break;(i==="category"||i==="multicategory")&&(x=l?Math.max(-.5,x):Math.min(t._categories.length-.5,x))}var C=null,S=d,P;if(g){var D;E?D=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(D=T2*t.dtick.substring(1)):D=t._roughDTick,P=Math.round((t.r2l(S)-t.r2l(t.tick0))/D)-1}var z=b.dtick;for(b.rangebreaks&&b._tick0Init!==b.tick0&&(S=Xz(S,t),l||(S=Dn.tickIncrement(S,z,!l,n))),g&&o&&(S=Dn.tickIncrement(S,z,!l,n),P--);l?S>=x:S<=x;S=Dn.tickIncrement(S,z,l,n)){if(g&&P++,b.rangebreaks&&!l){if(S<k)continue;if(b.maskBreaks(S)===VC&&Xz(S,b)>=f)break}if(p.length>c||S===C)break;C=S;var O={value:S};g?(M&&S!==(S|0)&&(O.simpleLabel=!0),a>1&&P%a&&(O.skipLabel=!0),p.push(O)):(O.minor=!0,_.push(O))}}if(T){var V=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!V){for(var B=p.map(function(Ae){return Ae.value}),F=[],N=0;N<_.length;N++){var Z=_[N],J=Z.value;if(B.indexOf(J)===-1){for(var re=!1,le=0;!re&&le<p.length;le++)1e7+p[le].value===1e7+J&&(re=!0);re||F.push(Z)}}_=F}}o&&sat(p,t,t._definedDelta);var fe;if(t.rangebreaks){var K=t._id.charAt(0)==="y",X=1;t.tickmode==="auto"&&(X=t.tickfont?t.tickfont.size:12);var ae=NaN;for(fe=p.length-1;fe>-1;fe--){if(p[fe].drop){p.splice(fe,1);continue}p[fe].value=Xz(p[fe].value,t);var oe=t.c2p(p[fe].value);(K?ae>oe-X:ae<oe+X)?p.splice(l?fe+1:fe,1):ae=oe}}uO(t)&&Math.abs(s[1]-s[0])===360&&p.pop(),t._tmax=(p[p.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var _e,be=function(Ae){Ae.text="",t._prevDateHead=_e};p=p.concat(_);var he,ie;for(fe=0;fe<p.length;fe++){var ye=p[fe].minor,ue=p[fe].value;ye?v.push({x:ue,minor:!0}):(_e=t._prevDateHead,he=Dn.tickText(t,ue,!1,p[fe].simpleLabel),ie=p[fe].periodX,ie!==void 0&&(he.periodX=ie,(ie>f||ie<u)&&(ie>f&&(he.periodX=f),ie<u&&(he.periodX=u),be(he))),p[fe].skipLabel&&be(he),h.push(he))}return h=h.concat(v),t._inCalcTicks=!1,o&&h.length&&(h[0].noTick=!0),h};function Wie(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==VC})),t}function lat(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var n=t.l2p(t._vals[i].x),a=e.p2l(n),o=Dn.tickText(e,a);t._vals[i].minor&&(o.minor=!0,o.text=""),r.push(o)}}return r=Wie(e,r),r}function Nie(e,t){var r=Ia.simpleMap(e.range,e.r2l),i=oO(r),n=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]),o=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var s=[],l=0;l<=1;l++)if(!(t!==void 0&&(t&&l||t===!1&&!l))&&!(l&&!e.minor)){var u=l?e.minor.tickvals:e.tickvals,f=l?[]:e.ticktext;if(u){Ia.isArrayOrTypedArray(f)||(f=[]);for(var c=0;c<u.length;c++){var h=o(u[c]);if(h>n&&h<a){var v=Dn.tickText(e,h,!1,String(f[c]));l&&(v.minor=!0,v.text=""),s.push(v)}}}}return s=Wie(e,s),s}var FC=[2,5,10],Uie=[1,2,3,6,12],Vie=[1,2,5,10,15,30],uat=[1,2,3,7,14],Xie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Zie=[-.301,0,.301,.699,1],fat=[15,30,45,90,180];function N0(e,t,r){return t*Ia.roundUp(e/t,r)}Dn.autoTicks=function(e,t,r){var i;function n(c){return Math.pow(c,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=Ia.dateTick0(e.calendar,0);var a=2*t;if(a>zC)t/=zC,i=n(10),e.dtick="M"+12*N0(t,i,FC);else if(a>T2)t/=T2,e.dtick="M"+N0(t,1,Uie);else if(a>yv){if(e.dtick=N0(t,yv,e._hasDayOfWeekBreaks?[1,2,7,14]:uat),!r){var o=Dn.getTickFormat(e),s=e.ticklabelmode==="period";s&&(e._rawTick0=e.tick0),/%[uVW]/.test(o)?e.tick0=Ia.dateTick0(e.calendar,2):e.tick0=Ia.dateTick0(e.calendar,1),s&&(e._dowTick0=e.tick0)}}else a>Og?e.dtick=N0(t,Og,Uie):a>OC?e.dtick=N0(t,OC,Vie):a>Qz?e.dtick=N0(t,Qz,Vie):(i=n(10),e.dtick=N0(t,i,FC))}else if(e.type==="log"){e.tick0=0;var l=Ia.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(l[1]-l[0])<1){var u=1.5*Math.abs((l[1]-l[0])/t);t=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/u,i=n(10),e.dtick="L"+N0(t,i,FC)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):uO(e)?(e.tick0=0,i=1,e.dtick=N0(t,i,fat)):(e.tick0=0,i=n(10),e.dtick=N0(t,i,FC));if(e.dtick===0&&(e.dtick=1),!$u(e.dtick)&&typeof e.dtick!="string"){var f=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(f)}};function jie(e){var t=e.dtick;if(e._tickexponent=0,!$u(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),n=i.length;if(String(t).charAt(0)==="M")n>10||i.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=yv&&n<=10||t>=yv*15)e._tickround="d";else if(t>=OC&&n<=16||t>=Og)e._tickround="M";else if(t>=Qz&&n<=19||t>=OC)e._tickround="S";else{var a=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,a)-20,e._tickround<0&&(e._tickround=4)}}else if($u(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);$u(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),u=e.minexponent===void 0?3:e.minexponent;Math.abs(l)>u&&(UC(e.exponentformat)&&!sO(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}Dn.tickIncrement=function(e,t,r,i){var n=r?-1:1;if($u(t))return Ia.increment(e,n*t);var a=t.charAt(0),o=n*Number(t.substr(1));if(a==="M")return Ia.incrementMonth(e,o,i);if(a==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(a==="D"){var s=t==="D2"?Zie:Xie,l=e+n*.01,u=Ia.roundUp(Ia.mod(l,1),s,r);return Math.floor(l)+Math.log(ep.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Dn.tickFirst=function(e,t){var r=e.r2l||Number,i=Ia.simpleMap(e.range,r,void 0,void 0,t),n=i[1]<i[0],a=n?Math.floor:Math.ceil,o=oO(i)[0],s=e.dtick,l=r(e.tick0);if($u(s)){var u=a((o-l)/s)*s+l;return(e.type==="category"||e.type==="multicategory")&&(u=Ia.constrain(u,0,e._categories.length-1)),u}var f=s.charAt(0),c=Number(s.substr(1));if(f==="M"){for(var h=0,v=l,p,_,T;h<10;){if(p=Dn.tickIncrement(v,s,n,e.calendar),(p-o)*(v-o)<=0)return n?Math.min(v,p):Math.max(v,p);_=(o-(v+p)/2)/(p-v),T=f+(Math.abs(Math.round(_))||1)*c,v=Dn.tickIncrement(v,T,_<0?!n:n,e.calendar),h++}return Ia.error("tickFirst did not converge",e),v}else{if(f==="L")return Math.log(a((Math.pow(10,o)-l)/c)*c+l)/Math.LN10;if(f==="D"){var g=s==="D2"?Zie:Xie,A=Ia.roundUp(Ia.mod(o,1),g,n);return Math.floor(o)+Math.log(ep.round(Math.pow(10,A),1))/Math.LN10}else throw"unrecognized dtick "+String(s)}};Dn.tickText=function(e,t,r,i){var n=Kie(e,t),a=e.tickmode==="array",o=r||a,s=e.type,l=s==="category"?e.d2l_noadd:e.d2l,u,f=function(T){var g=e.l2p(T);return g>=0&&g<=e._length?T:null};if(a&&Ia.isArrayOrTypedArray(e.ticktext)){var c=Ia.simpleMap(e.range,e.r2l),h=(Math.abs(c[1]-c[0])-(e._lBreaks||0))/1e4;for(u=0;u<e.ticktext.length&&!(Math.abs(t-l(e.tickvals[u]))<h);u++);if(u<e.ticktext.length)return n.text=String(e.ticktext[u]),n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)],n}function v(T){if(T===void 0)return!0;if(r)return T==="none";var g={first:e._tmin,last:e._tmax}[T];return T!=="all"&&t!==g}var p=r?"never":e.exponentformat!=="none"&&v(e.showexponent)?"hide":"";if(s==="date"?cat(e,n,r,o):s==="log"?hat(e,n,r,o,p):s==="category"?vat(e,n):s==="multicategory"?dat(e,n,r):uO(e)?gat(e,n,r,o,p):pat(e,n,r,o,p),i||(e.tickprefix&&!v(e.showtickprefix)&&(n.text=e.tickprefix+n.text),e.ticksuffix&&!v(e.showticksuffix)&&(n.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(n.text)){var _=e.labelalias[n.text];typeof _=="string"&&(n.text=_)}return(e.tickson==="boundaries"||e.showdividers)&&(n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)]),n};Dn.hoverLabelText=function(e,t,r){r&&(e=Ia.extendFlat({},e,{hoverformat:r}));var i=Ia.isArrayOrTypedArray(t)?t[0]:t,n=Ia.isArrayOrTypedArray(t)?t[1]:void 0;if(n!==void 0&&n!==i)return Dn.hoverLabelText(e,i,r)+" - "+Dn.hoverLabelText(e,n,r);var a=e.type==="log"&&i<=0,o=Dn.tickText(e,e.c2l(a?-i:i),"hover").text;return a?i===0?"0":xx+o:o};function Kie(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontColor:i.color}}function cat(e,t,r,i){var n=e._tickround,a=r&&e.hoverformat||Dn.getTickFormat(e);i=!a&&i,i&&($u(n)?n=4:n={y:"m",m:"d",d:"M",M:"S",S:4}[n]);var o=Ia.formatDate(t.x,a,n,e._dateFormat,e.calendar,e._extraFormat),s,l=o.indexOf(`
`);if(l!==-1&&(s=o.substr(l+1),o=o.substr(0,l)),i&&(s!==void 0&&(o==="00:00:00"||o==="00:00")?(o=s,s=""):o.length===8&&(o=o.replace(/:00$/,""))),s)if(r)n==="d"?o+=", "+s:o=s+(o?", "+o:"");else if(!e._inCalcTicks||e._prevDateHead!==s)e._prevDateHead=s,o+="<br>"+s;else{var u=qA(e),f=e._trueSide||e.side;(!u&&f==="top"||u&&f==="bottom")&&(o+="<br> ")}t.text=o}function hat(e,t,r,i,n){var a=e.dtick,o=t.x,s=e.tickformat,l=typeof a=="string"&&a.charAt(0);if(n==="never"&&(n=""),i&&l!=="L"&&(a="L3",l="L"),s||l==="L")t.text=FA(Math.pow(10,o),e,n,i);else if($u(a)||l==="D"&&Ia.mod(o+.01,1)<.1){var u=Math.round(o),f=Math.abs(u),c=e.exponentformat;c==="power"||UC(c)&&sO(u)?(u===0?t.text=1:u===1?t.text="10":t.text="10<sup>"+(u>1?"":xx)+f+"</sup>",t.fontSize*=1.25):(c==="e"||c==="E")&&f>2?t.text="1"+c+(u>0?"+":xx)+f:(t.text=FA(Math.pow(10,o),e,"","fakehover"),a==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(l==="D")t.text=String(Math.round(Math.pow(10,Ia.mod(o,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(a);if(e.dtick==="D1"){var h=String(t.text).charAt(0);(h==="0"||h==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function vat(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function dat(e,t,r){var i=Math.round(t.x),n=e._categories[i]||[],a=n[1]===void 0?"":String(n[1]),o=n[0]===void 0?"":String(n[0]);r?t.text=o+" - "+a:(t.text=a,t.text2=o)}function pat(e,t,r,i,n){n==="never"?n="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(n="hide"),t.text=FA(t.x,e,n,i)}function gat(e,t,r,i,n){if(e.thetaunit==="radians"&&!r){var a=t.x/180;if(a===0)t.text="0";else{var o=yat(a);if(o[1]>=100)t.text=FA(Ia.deg2rad(t.x),e,n,i);else{var s=t.x<0;o[1]===1?o[0]===1?t.text="\u03C0":t.text=o[0]+"\u03C0":t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03C0"].join(""),s&&(t.text=xx+t.text)}}}else t.text=FA(t.x,e,n,i)}function yat(e){function t(s,l){return Math.abs(s-l)<=1e-6}function r(s,l){return t(l,0)?s:r(l,s%l)}function i(s){for(var l=1;!t(Math.round(s*l)/l,s);)l*=10;return l}var n=i(e),a=e*n,o=Math.abs(r(a,n));return[Math.round(a/o),Math.round(n/o)]}var mat=["f","p","n","\u03BC","m","","k","M","G","T"];function UC(e){return e==="SI"||e==="B"}function sO(e){return e>14||e<-15}function FA(e,t,r,i){var n=e<0,a=t._tickround,o=r||t.exponentformat||"B",s=t._tickexponent,l=Dn.getTickFormat(t),u=t.separatethousands;if(i){var f={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:$u(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};jie(f),a=(Number(f._tickround)||0)+4,s=f._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,xx);var c=Math.pow(10,-a)/2;if(o==="none"&&(s=0),e=Math.abs(e),e<c)e="0",n=!1;else{if(e+=c,s&&(e*=Math.pow(10,-s),a+=s),a===0)e=String(Math.floor(e));else if(a<0){e=String(Math.round(e)),e=e.substr(0,e.length+a);for(var h=a;h<0;h++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;v&&(e=e.substr(0,v+a).replace(/\.?0+$/,""))}e=Ia.numSeparate(e,t._separators,u)}if(s&&o!=="hide"){UC(o)&&sO(s)&&(o="power");var p;s<0?p=xx+-s:o!=="power"?p="+"+s:p=String(s),o==="e"||o==="E"?e+=o+p:o==="power"?e+="\xD710<sup>"+p+"</sup>":o==="B"&&s===9?e+="B":UC(o)&&(e+=mat[s/3+5])}return n?xx+e:e}Dn.getTickFormat=function(e){var t;function r(l){return typeof l!="string"?l:Number(l.replace("M",""))*T2}function i(l,u){var f=["L","D"];if(typeof l==typeof u){if(typeof l=="number")return l-u;var c=f.indexOf(l.charAt(0)),h=f.indexOf(u.charAt(0));return c===h?Number(l.replace(/(L|D)/g,""))-Number(u.replace(/(L|D)/g,"")):c-h}else return typeof l=="number"?1:-1}function n(l,u,f){var c=f||function(p){return p},h=u[0],v=u[1];return(!h&&typeof h!="number"||c(h)<=c(l))&&(!v&&typeof v!="number"||c(v)>=c(l))}function a(l,u){var f=u[0]===null,c=u[1]===null,h=i(l,u[0])>=0,v=i(l,u[1])<=0;return(f||h)&&(c||v)}var o,s;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&n(e.dtick,s.dtickrange,r)){o=s;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&a(e.dtick,s.dtickrange)){o=s;break}break}default:}return o?o.value:e.tickformat};Dn.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),n=t?Dn.findSubplotsWithAxis(i,t):i;return n.sort(function(a,o){var s=a.substr(1).split("y"),l=o.substr(1).split("y");return s[0]===l[0]?+s[1]-+l[1]:+s[0]-+l[0]}),n};Dn.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],n=0;n<e.length;n++){var a=e[n];r.test(a)&&i.push(a)}return i};Dn.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},n=Dn.list(e,"x",!0),a=Dn.list(e,"y",!0),o=[],s,l;for(s=0;s<n.length;s++)for(o.push({x:n[s],y:i}),l=0;l<a.length;l++)s===0&&o.push({x:r,y:a[l]}),o.push({x:n[s],y:a[l]});var u=t._clips.selectAll(".axesclip").data(o,function(f){return f.x._id+f.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(f){return"clip"+t._uid+f.x._id+f.y._id}).append("rect"),u.exit().remove(),u.each(function(f){ep.select(this).select("rect").attr({x:f.x._offset||0,y:f.y._offset||0,width:f.x._length||1,height:f.y._length||1})})}};Dn.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(l){var u=l[0],f=i._plots[u];if(f){var c=f.xaxis,h=f.yaxis;f.xaxislayer.selectAll("."+c._id+"tick").remove(),f.yaxislayer.selectAll("."+h._id+"tick").remove(),f.xaxislayer.selectAll("."+c._id+"tick2").remove(),f.yaxislayer.selectAll("."+h._id+"tick2").remove(),f.xaxislayer.selectAll("."+c._id+"divider").remove(),f.yaxislayer.selectAll("."+h._id+"divider").remove(),f.minorGridlayer&&f.minorGridlayer.selectAll("path").remove(),f.gridlayer&&f.gridlayer.selectAll("path").remove(),f.zerolinelayer&&f.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+c._id+"title").remove(),i._infolayer.select(".g-"+h._id+"title").remove()}});var n=!t||t==="redraw"?Dn.listIds(e):t,a=Dn.list(e),o=a.filter(function(l){return l.autoshift}).map(function(l){return l.overlaying});n.map(function(l){var u=Dn.getFromId(e,l);if(u.tickmode==="sync"&&u.overlaying){var f=n.findIndex(function(c){return c===u.overlaying});f>=0&&n.unshift(n.splice(f,1).shift())}});var s={false:{left:0,right:0}};return Ia.syncOrAsync(n.map(function(l){return function(){if(l){var u=Dn.getFromId(e,l);r||(r={}),r.axShifts=s,r.overlayingShiftedAx=o;var f=Dn.drawOne(e,u,r);return u._shiftPusher&&aO(u,u._fullDepth||0,s,!0),u._r=u.range.slice(),u._rl=Ia.simpleMap(u._r,u.r2l),f}}}))};Dn.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},n=r.overlayingShiftedAx||[],a,o,s;t.setScale();var l=e._fullLayout,u=t._id,f=u.charAt(0),c=Dn.counterLetter(u),h=l._plots[t._mainSubplot];if(!h)return;if(t._shiftPusher=t.autoshift||n.indexOf(t._id)!==-1||n.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var v=t.linewidth/2||0;t.ticks==="inside"&&(v+=t.ticklen),aO(t,v,i,!0),aO(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=Pat(t,i));var p=h[f+"axislayer"],_=t._mainLinePosition,T=_+=t._shift,g=t._mainMirrorPosition,A=t._vals=Dn.calcTicks(t),b=[t.mirror,T,g].join("_");for(a=0;a<A.length;a++)A[a].axInfo=b;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var w={};function k(Le){var Ie=u+(Le||"tick");return w[Ie]||(w[Ie]=wat(t,Ie,T)),w[Ie]}if(t.visible){var x=Dn.makeTransTickFn(t),E=Dn.makeTransTickLabelFn(t),M,d,C=t.ticks==="inside",S=t.ticks==="outside";if(t.tickson==="boundaries"){var P=xat(t,A);d=Dn.clipEnds(t,P),M=C?d:P}else d=Dn.clipEnds(t,A),M=C&&t.ticklabelmode!=="period"?d:A;var D=t._gridVals=d,z=bat(t,A);if(!l._hasOnlyLargeSploms){var O=t._subplotsWith,V={};for(a=0;a<O.length;a++){o=O[a],s=l._plots[o];var B=s[c+"axis"],F=B._mainAxis._id;if(!V[F]){V[F]=1;var N=f==="x"?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length;Dn.drawGrid(e,t,{vals:D,counterAxis:B,layer:s.gridlayer.select("."+u),minorLayer:s.minorGridlayer.select("."+u),path:N,transFn:x}),Dn.drawZeroLine(e,t,{counterAxis:B,layer:s.zerolinelayer,path:N,transFn:x})}}}var Z,J=Dn.getTickSigns(t),re=Dn.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var le=Dn.makeTickPath(t,T,J[2]),fe=Dn.makeTickPath(t,T,re[2],{minor:!0}),K,X,ae,oe;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(K=Dn.makeTickPath(t,g,J[3]),X=Dn.makeTickPath(t,g,re[3],{minor:!0}),ae=le+K,oe=fe+X):(K="",X="",ae=le,oe=fe),t.showdividers&&S&&t.tickson==="boundaries"){var _e={};for(a=0;a<z.length;a++)_e[z[a].x]=1;Z=function(Le){return _e[Le.x]?K:ae}}else Z=function(Le){return Le.minor?oe:ae}}if(Dn.drawTicks(e,t,{vals:M,layer:p,path:Z,transFn:x}),t.mirror==="allticks"){var be=Object.keys(t._linepositions||{});for(a=0;a<be.length;a++){o=be[a],s=l._plots[o];var he=t._linepositions[o]||[],ie=he[0],ye=he[1],ue=he[2],Ae=Dn.makeTickPath(t,ie,ue?J[0]:re[0],{minor:ue})+Dn.makeTickPath(t,ye,ue?J[1]:re[1],{minor:ue});Dn.drawTicks(e,t,{vals:M,layer:s[f+"axislayer"],path:Ae,transFn:x})}}var Re=[];if(Re.push(function(){return Dn.drawLabels(e,t,{vals:A,layer:p,plotinfo:s,transFn:E,labelFns:Dn.makeLabelFns(t,T)})}),t.type==="multicategory"){var ze={x:2,y:10}[f];Re.push(function(){var Le={x:"height",y:"width"}[f],Ie=k()[Le]+ze+(t._tickAngles[u+"tick"]?t.tickfont.size*BC:0);return Dn.drawLabels(e,t,{vals:_at(t,A),layer:p,cls:u+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:x,labelFns:Dn.makeLabelFns(t,T+Ie*J[4])})}),Re.push(function(){return t._depth=J[4]*(k("tick2")[t.side]-T),Aat(e,t,{vals:z,layer:p,path:Dn.makeTickPath(t,T,J[4],{len:t._depth}),transFn:x})})}else t.title.hasOwnProperty("standoff")&&Re.push(function(){t._depth=J[4]*(k()[t.side]-T)});var et=DA.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(et&&t.side==="bottom")&&Re.push(function(){return Mat(e,t)}),Re.push(function(){var Le=t.side.charAt(0),Ie=Qit[t.side].charAt(0),dt=Dn.getPxPosition(e,t),ct=S?t.ticklen:0,Ke,_t,zt,Et;(t.automargin||et||t._shiftPusher)&&(t.type==="multicategory"?Ke=k("tick2"):(Ke=k(),f==="x"&&Le==="b"&&(t._depth=Math.max(Ke.width>0?Ke.bottom-dt:0,ct))));var Se=0,je=0;if(t._shiftPusher&&(Se=Math.max(ct,Ke.height>0?Le==="l"?dt-Ke.left:Ke.right-dt:0),t.title.text!==l._dfltTitle[f]&&(je=(t._titleStandoff||0)+(t._titleScoot||0),Le==="l"&&(je+=nO(t))),t._fullDepth=Math.max(Se,je)),t.automargin){_t={x:0,y:0,r:0,l:0,t:0,b:0};var ht=[0,1],nt=typeof t._shift=="number"?t._shift:0;if(f==="x"){if(Le==="b"?_t[Le]=t._depth:(_t[Le]=t._depth=Math.max(Ke.width>0?dt-Ke.top:0,ct),ht.reverse()),Ke.width>0){var lt=Ke.right-(t._offset+t._length);lt>0&&(_t.xr=1,_t.r=lt);var rt=t._offset-Ke.left;rt>0&&(_t.xl=0,_t.l=rt)}}else if(Le==="l"?(t._depth=Math.max(Ke.height>0?dt-Ke.left:0,ct),_t[Le]=t._depth-nt):(t._depth=Math.max(Ke.height>0?Ke.right-dt:0,ct),_t[Le]=t._depth+nt,ht.reverse()),Ke.height>0){var Xe=Ke.bottom-(t._offset+t._length);Xe>0&&(_t.yb=0,_t.b=Xe);var ft=t._offset-Ke.top;ft>0&&(_t.yt=1,_t.t=ft)}_t[c]=t.anchor==="free"?t.position:t._anchorAxis.domain[ht[0]],t.title.text!==l._dfltTitle[f]&&(_t[Le]+=nO(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(zt={x:0,y:0,r:0,l:0,t:0,b:0},zt[Ie]=t.linewidth,t.mirror&&t.mirror!==!0&&(zt[Ie]+=ct),t.mirror===!0||t.mirror==="ticks"?zt[c]=t._anchorAxis.domain[ht[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(zt[c]=[t._counterDomainMin,t._counterDomainMax][ht[1]]))}et&&(Et=DA.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(Hie(_t,t.automargin),Hie(zt,t.automargin)),b2.autoMargin(e,lO(t),_t),b2.autoMargin(e,Qie(t),zt),b2.autoMargin(e,$ie(t),Et)}),Ia.syncOrAsync(Re)}};function Hie(e,t){if(e){var r=Object.keys(qie).reduce(function(i,n){return t.indexOf(n)!==-1&&qie[n].forEach(function(a){i[a]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function xat(e,t){var r=[],i,n=function(a,o){var s=a.xbnd[o];s!==null&&r.push(Ia.extendFlat({},a,{x:s}))};if(t.length){for(i=0;i<t.length;i++)n(t[i],0);n(t[i-1],1)}return r}function _at(e,t){for(var r=[],i={},n=0;n<t.length;n++){var a=t[n];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(var o in i)r.push(Kie(e,Ia.interp(i[o],.5),o));return r}function bat(e,t){var r=[],i,n,a=t.length&&t[t.length-1].x<t[0].x,o=function(l,u){var f=l.xbnd[u];f!==null&&r.push(Ia.extendFlat({},l,{x:f}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var s=t[i];s.text2!==n&&o(s,a?1:0),n=s.text2}o(t[i-1],a?0:1)}return r}function wat(e,t,r){var i,n,a,o;if(e._selections[t].size())i=1/0,n=-1/0,a=1/0,o=-1/0,e._selections[t].each(function(){var l=iO(this),u=Ld.bBox(l.node().parentNode);i=Math.min(i,u.top),n=Math.max(n,u.bottom),a=Math.min(a,u.left),o=Math.max(o,u.right)});else{var s=Dn.makeLabelFns(e,r);i=n=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:n,left:a,right:o,height:n-i,width:o-a}}Dn.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],n=e.side===i?1:-1,a=[-1,1,n,-n],o=t?(e.minor||{}).ticks:e.ticks;return o!=="inside"==(r==="x")&&(a=a.map(function(s){return-s})),e.side&&a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),a};Dn.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return w2(e._offset+e.l2p(t.x),0)}:function(t){return w2(0,e._offset+e.l2p(t.x))}};Dn.makeTransTickLabelFn=function(e){var t=Tat(e),r=t[0],i=t[1];return e._id.charAt(0)==="x"?function(n){return w2(r+e._offset+e.l2p(rO(n)),i)}:function(n){return w2(i,r+e._offset+e.l2p(rO(n)))}};function rO(e){return e.periodX!==void 0?e.periodX:e.x}function Tat(e){var t=e.ticklabelposition||"",r=function(v){return t.indexOf(v)!==-1},i=r("top"),n=r("left"),a=r("right"),o=r("bottom"),s=r("inside"),l=o||n||i||a;if(!l&&!s)return[0,0];var u=e.side,f=l?(e.tickwidth||0)/2:0,c=NC,h=e.tickfont?e.tickfont.size:12;return(o||i)&&(f+=h*_x,c+=(e.linewidth||0)/2),(n||a)&&(f+=(e.linewidth||0)/2,c+=NC),s&&u==="top"&&(c-=h*(1-_x)),(n||i)&&(f=-f),(u==="bottom"||u==="right")&&(c=-c),[l?f:0,s?c:0]}Dn.makeTickPath=function(e,t,r,i){i||(i={});var n=i.minor;if(n&&!e.minor)return"";var a=i.len!==void 0?i.len:n?e.minor.ticklen:e.ticklen,o=e._id.charAt(0),s=(e.linewidth||1)/2;return o==="x"?"M0,"+(t+s*r)+"v"+a*r:"M"+(t+s*r)+",0h"+a*r};Dn.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",n=function(P){return i.indexOf(P)!==-1},a=n("top"),o=n("left"),s=n("right"),l=n("bottom"),u=l||o||a||s,f=n("inside"),c=i==="inside"&&e.ticks==="inside"||!f&&e.ticks==="outside"&&e.tickson!=="boundaries",h=0,v=0,p=c?e.ticklen:0;if(f?p*=-1:u&&(p=0),c&&(h+=p,r)){var _=Ia.deg2rad(r);h=p*Math.cos(_)+1,v=p*Math.sin(_)}e.showticklabels&&(c||e.showline)&&(h+=.2*e.tickfont.size),h+=(e.linewidth||1)/2*(f?-1:1);var T={labelStandoff:h,labelShift:v},g,A,b,w,k=0,x=e.side,E=e._id.charAt(0),M=e.tickangle,d;if(E==="x")d=!f&&x==="bottom"||f&&x==="top",w=d?1:-1,f&&(w*=-1),g=v*w,A=t+h*w,b=d?1:-.2,Math.abs(M)===90&&(f?b+=IC:M===-90&&x==="bottom"?b=_x:M===90&&x==="top"?b=IC:b=.5,k=IC/2*(M/90)),T.xFn=function(P){return P.dx+g+k*P.fontSize},T.yFn=function(P){return P.dy+A+P.fontSize*b},T.anchorFn=function(P,D){if(u){if(o)return"end";if(s)return"start"}return!$u(D)||D===0||D===180?"middle":D*w<0!==f?"end":"start"},T.heightFn=function(P,D,z){return D<-60||D>60?-.5*z:e.side==="top"!==f?-z:0};else if(E==="y"){if(d=!f&&x==="left"||f&&x==="right",w=d?1:-1,f&&(w*=-1),g=h,A=v*w,b=0,!f&&Math.abs(M)===90&&(M===-90&&x==="left"||M===90&&x==="right"?b=_x:b=.5),f){var C=$u(M)?+M:0;if(C!==0){var S=Ia.deg2rad(C);k=Math.abs(Math.sin(S))*_x*w,b=0}}T.xFn=function(P){return P.dx+t-(g+P.fontSize*b)*w+k*P.fontSize},T.yFn=function(P){return P.dy+A+P.fontSize*IC},T.anchorFn=function(P,D){return $u(D)&&Math.abs(D)===90?"middle":d?"end":"start"},T.heightFn=function(P,D,z){return e.side==="right"&&(D*=-1),D<-30?-z:D<30?-.5*z:0}}return T};function GC(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Dn.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",n=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(o){return o.minor&&!o.noTick}):[]).concat(t.ticks?r.vals.filter(function(o){return!o.minor&&!o.noTick}):[]),a=r.layer.selectAll("path."+i).data(n,GC);a.exit().remove(),a.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(o){return IA.stroke(ep.select(this),o.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(o){return Ld.crispRound(e,o.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),YC(t,[Gie]),a.attr("transform",r.transFn)};Dn.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",n=t.minor&&t.minor.showgrid,a=n?r.vals.filter(function(g){return g.minor}):[],o=t.showgrid?r.vals.filter(function(g){return!g.minor}):[],s=r.counterAxis;if(s&&Dn.shouldShowZeroLine(e,t,s))for(var l=t.tickmode==="array",u=0;u<o.length;u++){var f=o[u].x;if(l?!f:Math.abs(f)<t.dtick/100)if(o=o.slice(0,u).concat(o.slice(u+1)),l)u--;else break}t._gw=Ld.crispRound(e,t.gridwidth,1);for(var c=n?Ld.crispRound(e,t.minor.gridwidth,1):0,h=r.layer,v=r.minorLayer,p=1;p>=0;p--){var _=p?h:v;if(_){var T=_.selectAll("path."+i).data(p?o:a,GC);T.exit().remove(),T.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),T.attr("transform",r.transFn).attr("d",r.path).each(function(g){return IA.stroke(ep.select(this),g.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(g){return Ld.dashStyle(g.minor?t.minor.griddash:t.griddash,g.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(g){return(g.minor?c:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&T.attr("d",r.path)}}YC(t,[eO,tO])}};Dn.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",n=Dn.shouldShowZeroLine(e,t,r.counterAxis),a=r.layer.selectAll("path."+i).data(n?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(o,s){return eat(o.id,s.id)})}),a.attr("transform",r.transFn).attr("d",r.path).call(IA.stroke,t.zerolinecolor||IA.defaultLine).style("stroke-width",Ld.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),YC(t,[$z])};Dn.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,n=t._id,a=r.cls||n+"tick",o=r.vals.filter(function(F){return F.text}),s=r.labelFns,l=r.secondary?0:t.tickangle,u=(t._prevTickAngles||{})[a],f=r.layer.selectAll("g."+a).data(t.showticklabels?o:[],GC),c=[];f.enter().append("g").classed(a,1).append("text").attr("text-anchor","middle").each(function(F){var N=ep.select(this),Z=e._promises.length;N.call(_2.positionText,s.xFn(F),s.yFn(F)).call(Ld.font,F.font,F.fontSize,F.fontColor).text(F.text).call(_2.convertToTspans,e),e._promises[Z]?c.push(e._promises.pop().then(function(){h(N,l)})):h(N,l)}),YC(t,[Fie]),f.exit().remove(),r.repositionOnUpdate&&f.each(function(F){ep.select(this).select("text").call(_2.positionText,s.xFn(F),s.yFn(F))});function h(F,N){F.each(function(Z){var J=ep.select(this),re=J.select(".text-math-group"),le=s.anchorFn(Z,N),fe=r.transFn.call(J.node(),Z)+($u(N)&&+N!=0?" rotate("+N+","+s.xFn(Z)+","+(s.yFn(Z)-Z.fontSize/2)+")":""),K=_2.lineCount(J),X=BC*Z.fontSize,ae=s.heightFn(Z,$u(N)?+N:0,(K-1)*X);if(ae&&(fe+=w2(0,ae)),re.empty()){var oe=J.select("text");oe.attr({transform:fe,"text-anchor":le}),oe.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var _e=Ld.bBox(re.node()).width,be=_e*{end:-.5,start:.5}[le];re.attr("transform",fe+w2(be,0))}})}t._adjustTickLabelsOverflow=function(){var F=t.ticklabeloverflow;if(!(!F||F==="allow")){var N=F.indexOf("hide")!==-1,Z=t._id.charAt(0)==="x",J=0,re=Z?e._fullLayout.width:e._fullLayout.height;if(F.indexOf("domain")!==-1){var le=Ia.simpleMap(t.range,t.r2l);J=t.l2p(le[0])+t._offset,re=t.l2p(le[1])+t._offset}var fe=Math.min(J,re),K=Math.max(J,re),X=t.side,ae=1/0,oe=-1/0;f.each(function(ie){var ye=ep.select(this),ue=ye.select(".text-math-group");if(ue.empty()){var Ae=Ld.bBox(ye.node()),Re=0;Z?(Ae.right>K||Ae.left<fe)&&(Re=1):(Ae.bottom>K||Ae.top+(t.tickangle?0:ie.fontSize/4)<fe)&&(Re=1);var ze=ye.select("text");Re?N&&ze.style("opacity",0):(ze.style("opacity",1),X==="bottom"||X==="right"?ae=Math.min(ae,Z?Ae.top:Ae.left):ae=-1/0,X==="top"||X==="left"?oe=Math.max(oe,Z?Ae.bottom:Ae.right):oe=1/0)}});for(var _e in i._plots){var be=i._plots[_e];if(!(t._id!==be.xaxis._id&&t._id!==be.yaxis._id)){var he=Z?be.yaxis:be.xaxis;he&&(he["_visibleLabelMin_"+t._id]=ae,he["_visibleLabelMax_"+t._id]=oe)}}}},t._hideCounterAxisInsideTickLabels=function(F){var N=t._id.charAt(0)==="x",Z=[];for(var J in i._plots){var re=i._plots[J];t._id!==re.xaxis._id&&t._id!==re.yaxis._id||Z.push(N?re.yaxis:re.xaxis)}Z.forEach(function(le,fe){le&&qA(le)&&(F||[$z,tO,eO,Gie,Fie]).forEach(function(K){var X=K.K==="tick"&&K.L==="text"&&t.ticklabelmode==="period",ae=i._plots[t._mainSubplot],oe;K.K===$z.K?oe=ae.zerolinelayer.selectAll("."+t._id+"zl"):K.K===tO.K?oe=ae.minorGridlayer.selectAll("."+t._id):K.K===eO.K?oe=ae.gridlayer.selectAll("."+t._id):oe=ae[t._id.charAt(0)+"axislayer"],oe.each(function(){var _e=ep.select(this);K.L&&(_e=_e.selectAll(K.L)),_e.each(function(be){var he=t.l2p(X?rO(be):be.x)+t._offset,ie=ep.select(this);he<t["_visibleLabelMax_"+le._id]&&he>t["_visibleLabelMin_"+le._id]?ie.style("display","none"):K.K==="tick"&&!fe&&ie.style("display",null)})})})})},h(f,u+1?u:l);function v(){return c.length&&Promise.all(c)}var p=null;function _(){if(h(f,l),o.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){p=t.autotickangles[0];var F=0,N=[],Z,J=1;if(f.each(function(ct){F=Math.max(F,ct.fontSize);var Ke=t.l2p(ct.x),_t=iO(this),zt=Ld.bBox(_t.node());J=Math.max(J,_2.lineCount(_t)),N.push({top:0,bottom:10,height:10,left:Ke-zt.width/2,right:Ke+zt.width/2+2,width:zt.width+2})}),(t.tickson==="boundaries"||t.showdividers)&&!r.secondary){var re=2;for(t.ticks&&(re+=t.tickwidth/2),Z=0;Z<N.length;Z++){var le=o[Z].xbnd,fe=N[Z];if(le[0]!==null&&fe.left-t.l2p(le[0])<re||le[1]!==null&&t.l2p(le[1])-fe.right<re){p=90;break}}}else{var K=o.length,X=Math.abs((o[K-1].x-o[0].x)*t._m)/(K-1),ae=t.ticklabelposition||"",oe=function(ct){return ae.indexOf(ct)!==-1},_e=oe("top"),be=oe("left"),he=oe("right"),ie=oe("bottom"),ye=ie||be||_e||he,ue=ye?(t.tickwidth||0)+2*NC:0,Ae=X,Re=F*1.25*J,ze=Math.sqrt(Math.pow(Ae,2)+Math.pow(Re,2)),et=Ae/ze,Le=t.autotickangles.map(function(ct){return ct*Math.PI/180}),Ie=Le.find(function(ct){return Math.abs(Math.cos(ct))<=et});Ie===void 0&&(Ie=Le.reduce(function(ct,Ke){return Math.abs(Math.cos(ct))<Math.abs(Math.cos(Ke))?ct:Ke},Le[0]));var dt=Ie*(180/Math.PI);for(Z=0;Z<N.length-1;Z++)if(Ia.bBoxIntersect(N[Z],N[Z+1],ue)){p=dt;break}}p&&h(f,p)}}t._selections&&(t._selections[a]=f);var T=[v];t.automargin&&i._redrawFromAutoMarginCount&&u===90?(p=u,T.push(function(){h(f,u)})):T.push(_),t._tickAngles&&T.push(function(){t._tickAngles[a]=p===null?$u(l)?l:0:p});var g=function(){var F=0,N=0;return f.each(function(Z,J){var re=iO(this),le=re.select(".text-math-group");if(le.empty()){var fe;t._vals[J]&&(fe=t._vals[J].bb||Ld.bBox(re.node()),t._vals[J].bb=fe),F=Math.max(F,fe.width),N=Math.max(N,fe.height)}}),{labelsMaxW:F,labelsMaxH:N}},A=t._anchorAxis;if(A&&(A.autorange||A.insiderange)&&qA(t)&&!tat(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),A.autorange&&(i._insideTickLabelsUpdaterange[A._name+".autorange"]=A.autorange,T.push(g)),A.insiderange)){var b=g(),w=t._id.charAt(0)==="y"?b.labelsMaxW:b.labelsMaxH;w+=2*NC,t.ticklabelposition==="inside"&&(w+=t.ticklen||0);var k=t.side==="right"||t.side==="top"?1:-1,x=k===1?1:0,E=k===1?0:1,M=[];M[E]=A.range[E];var d=A.range,C=A.r2p(d[x]),S=A.r2p(d[E]),P=i._insideTickLabelsUpdaterange[A._name+".range"];if(P){var D=A.r2p(P[x]),z=A.r2p(P[E]),O=k*(t._id.charAt(0)==="y"?1:-1);O*C<O*D&&(C=D,M[x]=d[x]=P[x]),O*S>O*z&&(S=z,M[E]=d[E]=P[E])}var V=Math.abs(S-C);V-w>0?(V-=w,w*=1+w/V):w=0,t._id.charAt(0)!=="y"&&(w=-w),M[x]=A.p2r(A.r2p(d[x])+k*w),A.autorange==="min"||A.autorange==="max reversed"?(M[0]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0):(A.autorange==="max"||A.autorange==="min reversed")&&(M[1]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[A._name+".range"]=M}var B=Ia.syncOrAsync(T);return B&&B.then&&e._promises.push(B),B};function Aat(e,t,r){var i=t._id+"divider",n=r.vals,a=r.layer.selectAll("path."+i).data(n,GC);a.exit().remove(),a.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(IA.stroke,t.dividercolor).style("stroke-width",Ld.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",r.transFn).attr("d",r.path)}Dn.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),n=t.side,a;if(t.anchor!=="free"?a=t._anchorAxis:i==="x"?a={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(a={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),n==="top"||n==="left")return a._offset;if(n==="bottom"||n==="right")return a._offset+a._length};function nO(e){var t=e.title.font.size,r=(e.title.text.match(_2.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?r?t*(_x+r*BC):t*_x:r?t*(r+1)*BC:t}function Mat(e,t){var r=e._fullLayout,i=t._id,n=i.charAt(0),a=t.title.font.size,o;if(t.title.hasOwnProperty("standoff"))o=t._depth+t.title.standoff+nO(t);else{var s=qA(t);if(t.type==="multicategory")o=t._depth;else{var l=1.5*a;s&&(l=.5*a,t.ticks==="outside"&&(l+=t.ticklen)),o=10+l+(t.linewidth?t.linewidth-1:0)}s||(n==="x"?o+=t.side==="top"?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):o+=t.side==="right"?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0))}var u=Dn.getPxPosition(e,t),f,c,h;n==="x"?(c=t._offset+t._length/2,h=t.side==="top"?u-o:u+o):(h=t._offset+t._length/2,c=t.side==="right"?u+o:u-o,f={rotate:"-90",offset:0});var v;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];if(v={selection:p,side:t.side},p&&p.node()&&p.node().parentNode){var _=Ld.getTranslate(p.node().parentNode);v.offsetLeft=_.x,v.offsetTop=_.y}t.title.hasOwnProperty("standoff")&&(v.pad=0)}return t._titleStandoff=o,Xit.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:v,transform:f,attributes:{x:c,y:h,"text-anchor":"middle"}})}Dn.shouldShowZeroLine=function(e,t,r){var i=Ia.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===VC)&&(Jie(t,0)||!Sat(e,t,r,i)||Eat(e,t))};Dn.clipEnds=function(e,t){return t.filter(function(r){return Jie(e,r.x)})};function Jie(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Sat(e,t,r,i){var n=r._mainAxis;if(!n)return;var a=e._fullLayout,o=t._id.charAt(0),s=Dn.counterLetter(t._id),l=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(o==="x")?0:t._length);function u(p){if(!p.showline||!p.linewidth)return!1;var _=Math.max((p.linewidth+t.zerolinewidth)/2,1);function T(b){return typeof b=="number"&&Math.abs(b-l)<_}if(T(p._mainLinePosition)||T(p._mainMirrorPosition))return!0;var g=p._linepositions||{};for(var A in g)if(T(g[A][0])||T(g[A][1]))return!0}var f=a._plots[r._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return u(r,l);for(var c=Dn.list(e,s),h=0;h<c.length;h++){var v=c[h];if(v._mainAxis===n&&u(v,l))return!0}}function Eat(e,t){for(var r=e._fullData,i=t._mainSubplot,n=t._id.charAt(0),a=0;a<r.length;a++){var o=r[a];if(o.visible===!0&&o.xaxis+o.yaxis===i&&(DA.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[n]||o.fill&&o.fill.charAt(o.fill.length-1)===n))return!0}return!1}function iO(e){var t=ep.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Dn.allowAutoMargin=function(e){for(var t=Dn.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(b2.allowAutoMargin(e,lO(i)),i.mirror&&b2.allowAutoMargin(e,Qie(i))),DA.getComponentMethod("rangeslider","isVisible")(i)&&b2.allowAutoMargin(e,$ie(i))}};function lO(e){return e._id+".automargin"}function Qie(e){return lO(e)+".mirror"}function $ie(e){return e._id+".rangeslider"}Dn.swap=function(e,t){for(var r=kat(e,t),i=0;i<r.length;i++)Cat(e,r[i].x,r[i].y)};function kat(e,t){var r=[],i,n;for(i=0;i<t.length;i++){var a=[],o=e._fullData[t[i]].xaxis,s=e._fullData[t[i]].yaxis;if(!(!o||!s)){for(n=0;n<r.length;n++)(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(s)!==-1)&&a.push(n);if(!a.length){r.push({x:[o],y:[s]});continue}var l=r[a[0]],u;if(a.length>1)for(n=1;n<a.length;n++)u=r[a[n]],qC(l.x,u.x),qC(l.y,u.y);qC(l.x,[o]),qC(l.y,[s])}}return r}function qC(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function Cat(e,t,r){var i=[],n=[],a=e.layout,o,s;for(o=0;o<t.length;o++)i.push(Dn.getFromId(e,t[o]));for(o=0;o<r.length;o++)n.push(Dn.getFromId(e,r[o]));var l=Object.keys(Zit),u=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(o=0;o<l.length;o++){var c=l[o],h=i[0][c],v=n[0][c],p=!0,_=!1,T=!1;if(!(c.charAt(0)==="_"||typeof h=="function"||u.indexOf(c)!==-1)){for(s=1;s<i.length&&p;s++){var g=i[s][c];c==="type"&&f.indexOf(h)!==-1&&f.indexOf(g)!==-1&&h!==g?_=!0:g!==h&&(p=!1)}for(s=1;s<n.length&&p;s++){var A=n[s][c];c==="type"&&f.indexOf(v)!==-1&&f.indexOf(A)!==-1&&v!==A?T=!0:n[s][c]!==v&&(p=!1)}p&&(_&&(a[i[0]._name].type="linear"),T&&(a[n[0]._name].type="linear"),Lat(a,c,i,n,e._fullLayout._dfltTitle))}}for(o=0;o<e._fullLayout.annotations.length;o++){var b=e._fullLayout.annotations[o];t.indexOf(b.xref)!==-1&&r.indexOf(b.yref)!==-1&&Ia.swapAttrs(a.annotations[o],["?"])}}function Lat(e,t,r,i,n){var a=Ia.nestedProperty,o=a(e[r[0]._name],t).get(),s=a(e[i[0]._name],t).get(),l;for(t==="title"&&(o&&o.text===n.x&&(o.text=n.y),s&&s.text===n.y&&(s.text=n.x)),l=0;l<r.length;l++)a(e,r[l]._name+"."+t).set(s);for(l=0;l<i.length;l++)a(e,i[l]._name+"."+t).set(o)}function uO(e){return e._id==="angularaxis"}function Xz(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var n=t._rangebreaks[i];if(e>=n.min&&e<n.max)return n.max}return e}function qA(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function YC(e,t){qA(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function aO(e,t,r,i){var n=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,a;i?a=e.side==="right"?t:-t:a=t,n in r||(r[n]={}),e.side in r[n]||(r[n][e.side]=0),r[n][e.side]+=a}function Pat(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}});var fO=ne((Atr,tae)=>{"use strict";tae.exports=function(t,r,i){var n,a;if(i){var o=r==="reversed"||r==="min reversed"||r==="max reversed";n=i[o?1:0],a=i[o?0:1]}var s=t("autorangeoptions.minallowed",a===null?n:void 0),l=t("autorangeoptions.maxallowed",n===null?a:void 0);s===void 0&&t("autorangeoptions.clipmin"),l===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var cO=ne((Mtr,rae)=>{"use strict";var Rat=fO();rae.exports=function(t,r,i,n){var a=r._template||{},o=r.type||a.type||"-";i("minallowed"),i("maxallowed");var s=i("range");if(!s){var l;!n.noInsiderange&&o!=="log"&&(l=i("insiderange"),l&&(l[0]===null||l[1]===null)&&(r.insiderange=!1,l=void 0),l&&(s=i("range",l)))}var u=r.getAutorangeDflt(s,n),f=i("autorange",u),c;s&&(s[0]===null&&s[1]===null||(s[0]===null||s[1]===null)&&(f==="reversed"||f===!0)||s[0]!==null&&(f==="min"||f==="max reversed")||s[1]!==null&&(f==="max"||f==="min reversed"))&&(s=void 0,delete r.range,r.autorange=!0,c=!0),c||(u=r.getAutorangeDflt(s,n),f=i("autorange",u)),f&&(Rat(i,f,s),(o==="linear"||o==="-")&&i("rangemode")),r.cleanRange()}});var hO=ne((Str,nae)=>{var Dat={left:0,top:0};nae.exports=Iat;function Iat(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,n=e.clientY||0,a=Fat(t);return r[0]=i-a.left,r[1]=n-a.top,r}function Fat(e){return e===window||e===document||e===document.body?Dat:e.getBoundingClientRect()}});var zA=ne((Etr,iae)=>{"use strict";var qat=Vq();function zat(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}iae.exports=qat&&zat()});var oae=ne((ktr,aae)=>{"use strict";aae.exports=function(t,r,i,n,a){var o=(t-i)/(n-i),s=o+r/(n-i),l=(o+s)/2;return a==="left"||a==="bottom"?o:a==="center"||a==="middle"?l:a==="right"||a==="top"?s:o<2/3-l?o:s>4/3-l?s:l}});var uae=ne((Ctr,lae)=>{"use strict";var sae=Wt(),Oat=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];lae.exports=function(t,r,i,n){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=sae.constrain(Math.floor(t*3),0,2),n==="bottom"?r=0:n==="middle"?r=1:n==="top"?r=2:r=sae.constrain(Math.floor(r*3),0,2),Oat[r][t]}});var cae=ne((Ltr,fae)=>{"use strict";var Bat=l2(),Nat=eC(),Uat=cA().getGraphDiv,Vat=oA(),vO=fae.exports={};vO.wrapped=function(e,t,r){e=Uat(e),e._fullLayout&&Nat.clear(e._fullLayout._uid+Vat.HOVERID),vO.raw(e,t,r)};vO.raw=function(t,r){var i=t._fullLayout,n=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&Bat.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&n&&t.emit("plotly_unhover",{event:r,points:n}))}});var Hh=ne((Ptr,dae)=>{"use strict";var Hat=hO(),dO=Gq(),Gat=zA(),Yat=Wt().removeElement,Wat=wf(),bx=dae.exports={};bx.align=oae();bx.getCursor=uae();var hae=cae();bx.unhover=hae.wrapped;bx.unhoverRaw=hae.raw;bx.init=function(t){var r=t.gd,i=1,n=r._context.doubleClickDelay,a=t.element,o,s,l,u,f,c,h,v;r._mouseDownTime||(r._mouseDownTime=0),a.style.pointerEvents="all",a.onmousedown=T,Gat?(a._ontouchstart&&a.removeEventListener("touchstart",a._ontouchstart),a._ontouchstart=T,a.addEventListener("touchstart",T,{passive:!1})):a.ontouchstart=T;function p(b,w,k){return Math.abs(b)<k&&(b=0),Math.abs(w)<k&&(w=0),[b,w]}var _=t.clampFn||p;function T(b){r._dragged=!1,r._dragging=!0;var w=pO(b);o=w[0],s=w[1],h=b.target,c=b,v=b.buttons===2||b.ctrlKey,typeof b.clientX=="undefined"&&typeof b.clientY=="undefined"&&(b.clientX=o,b.clientY=s),l=new Date().getTime(),l-r._mouseDownTime<n?i+=1:(i=1,r._mouseDownTime=l),t.prepFn&&t.prepFn(b,o,s),dO&&!v?(f=vae(),f.style.cursor=window.getComputedStyle(a).cursor):dO||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(a).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),t.dragmode!==!1&&(b.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(b){b.preventDefault();var w=pO(b),k=t.minDrag||Wat.MINDRAG,x=_(w[0]-o,w[1]-s,k),E=x[0],M=x[1];(E||M)&&(r._dragged=!0,bx.unhover(r,b)),r._dragged&&t.moveFn&&!v&&(r._dragdata={element:a,dx:E,dy:M},t.moveFn(E,M))}function A(b){if(delete r._dragdata,t.dragmode!==!1&&(b.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),dO?Yat(f):u&&(f.documentElement.style.cursor=u,u=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>n&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(i,c),!v){var w;try{w=new MouseEvent("click",b)}catch(x){var k=pO(b);w=document.createEvent("MouseEvents"),w.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,k[0],k[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}h.dispatchEvent(w)}r._dragging=!1,r._dragged=!1}};function vae(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}bx.coverSlip=vae;function pO(e){return Hat(e.changedTouches?e.changedTouches[0]:e,document.body)}});var e0=ne((Rtr,pae)=>{"use strict";pae.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var mae=ne((Dtr,yae)=>{"use strict";var gO=e0(),OA="data-savedcursor",gae="!!";yae.exports=function(t,r){var i=t.attr(OA);if(r){if(!i){for(var n=(t.attr("class")||"").split(" "),a=0;a<n.length;a++){var o=n[a];o.indexOf("cursor-")===0&&t.attr(OA,o.substr(7)).classed(o,!1)}t.attr(OA)||t.attr(OA,gae)}gO(t,r)}else i&&(t.attr(OA,null),i===gae?gO(t):gO(t,i))}});var mO=ne((Itr,xae)=>{"use strict";var yO=ll(),Xat=Ku();xae.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:Xat.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:yO({editType:"legend"}),grouptitlefont:yO({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:yO({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var XC=ne(WC=>{"use strict";WC.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};WC.isVertical=function(t){return t.orientation!=="h"};WC.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}});var bO=ne((qtr,_ae)=>{"use strict";var xO=wi(),rd=Wt(),Zat=So(),jat=es(),Kat=mO(),Jat=tx(),_O=XC();function Qat(e,t,r,i){var n=t[e]||{},a=Zat.newContainer(r,e);function o(B,F){return rd.coerce(n,a,Kat,B,F)}var s=rd.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor),o("bordercolor");var l=o("visible");if(l){for(var u,f=function(B,F){var N=u._input,Z=u;return rd.coerce(N,Z,jat,B,F)},c=r.font||{},h=rd.coerceFont(o,"grouptitlefont",rd.extendFlat({},c,{size:Math.round(c.size*1.1)})),v=0,p=!1,_="normal",T=(r.shapes||[]).filter(function(B){return B.showlegend}),g=i.concat(T).filter(function(B){return e===(B.legend||"legend")}),A=0;A<g.length;A++)if(u=g[A],!!u.visible){var b=u._isShape;(u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===!1))&&(v++,u.showlegend&&(p=!0,(!b&&xO.traceIs(u,"pie-like")||u._input.showlegend===!0)&&v++),rd.coerceFont(f,"legendgrouptitle.font",h)),(!b&&xO.traceIs(u,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1)&&(_=_O.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),u.legendgroup!==void 0&&u.legendgroup!==""&&(_=_O.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var w=rd.coerce(t,r,Jat,"showlegend",p&&v>(e==="legend"?1:0));if(w===!1&&(r[e]=void 0),!(w===!1&&!n.uirevision)&&(o("uirevision",r.uirevision),w!==!1)){o("borderwidth");var k=o("orientation"),x=o("yref"),E=o("xref"),M=k==="h",d=x==="paper",C=E==="paper",S,P,D,z="left";M?(S=0,xO.getComponentMethod("rangeslider","isVisible")(t.xaxis)?d?(P=1.1,D="bottom"):(P=1,D="top"):d?(P=-.1,D="top"):(P=0,D="bottom")):(P=1,D="auto",C?S=1.02:(S=1,z="right")),rd.coerce(n,a,{x:{valType:"number",editType:"legend",min:C?-2:0,max:C?3:1,dflt:S}},"x"),rd.coerce(n,a,{y:{valType:"number",editType:"legend",min:d?-2:0,max:d?3:1,dflt:P}},"y"),o("traceorder",_),_O.isGrouped(r[e])&&o("tracegroupgap"),o("entrywidth"),o("entrywidthmode"),o("indentation"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("xanchor",z),o("yanchor",D),o("valign"),rd.noneOrAll(n,a,["x","y"]);var O=o("title.text");if(O){o("title.side",M?"left":"top");var V=rd.extendFlat({},s,{size:rd.bigFont(s.size)});rd.coerceFont(o,"title.font",V)}}}}_ae.exports=function(t,r,i){var n,a=i.slice(),o=r.shapes;if(o)for(n=0;n<o.length;n++){var s=o[n];if(s.showlegend){var l={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};a.push(l)}}var u=["legend"];for(n=0;n<a.length;n++)rd.pushUnique(u,a[n].legend);for(r._legends=[],n=0;n<u.length;n++){var f=u[n];Qat(f,t,r,a),r[f]&&r[f].visible&&(r[f]._id=f),r._legends.push(f)}}});var wae=ne((ztr,bae)=>{"use strict";var cm=wi(),ZC=Wt(),$at=ZC.pushUnique,wO=!0;bae.exports=function(t,r,i){var n=r._fullLayout;if(r._dragged||r._editing)return;var a=n.legend.itemclick,o=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&a==="toggle"&&o==="toggleothers"&&wO&&r.data&&r._context.showTips&&ZC.notifier(ZC._(r,"Double-click on legend to isolate one trace"),"long"),wO=!1;var l;if(i===1?l=a:i===2&&(l=o),!l)return;var u=s==="togglegroup",f=n.hiddenlabels?n.hiddenlabels.slice():[],c=t.data()[0][0];if(c.groupTitle&&c.noClick)return;var h=r._fullData,v=(n.shapes||[]).filter(function(dt){return dt.showlegend}),p=h.concat(v),_=c.trace;_._isShape&&(_=_._fullInput);var T=_.legendgroup,g,A,b,w,k,x,E={},M=[],d=[],C=[];function S(dt,ct){var Ke=M.indexOf(dt),_t=E.visible;return _t||(_t=E.visible=[]),M.indexOf(dt)===-1&&(M.push(dt),Ke=M.length-1),_t[Ke]=ct,Ke}var P=(n.shapes||[]).map(function(dt){return dt._input}),D=!1;function z(dt,ct){P[dt].visible=ct,D=!0}function O(dt,ct){if(!(c.groupTitle&&!u)){var Ke=dt._fullInput||dt,_t=Ke._isShape,zt=Ke.index;if(zt===void 0&&(zt=Ke._index),cm.hasTransform(Ke,"groupby")){var Et=d[zt];if(!Et){var Se=cm.getTransformIndices(Ke,"groupby"),je=Se[Se.length-1];Et=ZC.keyedContainer(Ke,"transforms["+je+"].styles","target","value.visible"),d[zt]=Et}var ht=Et.get(dt._group);ht===void 0&&(ht=!0),ht!==!1&&Et.set(dt._group,ct),C[zt]=S(zt,Ke.visible!==!1)}else{var nt=Ke.visible===!1?!1:ct;_t?z(zt,nt):S(zt,nt)}}}var V=_.legend,B=_._fullInput,F=B&&B._isShape;if(!F&&cm.traceIs(_,"pie-like")){var N=c.label,Z=f.indexOf(N);if(l==="toggle")Z===-1?f.push(N):f.splice(Z,1);else if(l==="toggleothers"){var J=Z!==-1,re=[];for(g=0;g<r.calcdata.length;g++){var le=r.calcdata[g];for(A=0;A<le.length;A++){var fe=le[A],K=fe.label;V===le[0].trace.legend&&N!==K&&(f.indexOf(K)===-1&&(J=!0),$at(f,K),re.push(K))}}if(!J)for(var X=0;X<re.length;X++){var ae=f.indexOf(re[X]);ae!==-1&&f.splice(ae,1)}}cm.call("_guiRelayout",r,"hiddenlabels",f)}else{var oe=T&&T.length,_e=[],be;if(oe)for(g=0;g<p.length;g++)be=p[g],be.visible&&be.legendgroup===T&&_e.push(g);if(l==="toggle"){var he;switch(_.visible){case!0:he="legendonly";break;case!1:he=!1;break;case"legendonly":he=!0;break}if(oe)if(u)for(g=0;g<p.length;g++){var ie=p[g];ie.visible!==!1&&ie.legendgroup===T&&O(ie,he)}else O(_,he);else O(_,he)}else if(l==="toggleothers"){var ye,ue,Ae,Re,ze,et=!0;for(g=0;g<p.length;g++)if(ze=p[g],ye=ze===_,Ae=ze.showlegend!==!0,!(ye||Ae)&&(ue=oe&&ze.legendgroup===T,!ue&&ze.legend===V&&ze.visible===!0&&!cm.traceIs(ze,"notLegendIsolatable"))){et=!1;break}for(g=0;g<p.length;g++)if(ze=p[g],!(ze.visible===!1||ze.legend!==V)&&!cm.traceIs(ze,"notLegendIsolatable"))switch(_.visible){case"legendonly":O(ze,!0);break;case!0:Re=et?!0:"legendonly",ye=ze===_,Ae=ze.showlegend!==!0&&!ze.legendgroup,ue=ye||oe&&ze.legendgroup===T,O(ze,ue||Ae?!0:Re);break}}for(g=0;g<d.length;g++)if(b=d[g],!!b){var Le=b.constructUpdate(),Ie=Object.keys(Le);for(A=0;A<Ie.length;A++)w=Ie[A],x=E[w]=E[w]||[],x[C[g]]=Le[w]}for(k=Object.keys(E),g=0;g<k.length;g++)for(w=k[g],A=0;A<M.length;A++)E[w].hasOwnProperty(A)||(E[w][A]=void 0);D?cm.call("_guiUpdate",r,E,{shapes:P},M):cm.call("_guiRestyle",r,E,M)}}});var TO=ne((Otr,Tae)=>{"use strict";Tae.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var Sae=ne((Btr,Mae)=>{"use strict";var Aae=wi(),AO=XC();Mae.exports=function(t,r,i){var n=r._inHover,a=AO.isGrouped(r),o=AO.isReversed(r),s={},l=[],u=!1,f={},c=0,h=0,v,p;function _(B,F,N){if(r.visible!==!1&&!(i&&B!==r._id))if(F===""||!AO.isGrouped(r)){var Z="~~i"+c;l.push(Z),s[Z]=[N],c++}else l.indexOf(F)===-1?(l.push(F),u=!0,s[F]=[N]):s[F].push(N)}for(v=0;v<t.length;v++){var T=t[v],g=T[0],A=g.trace,b=A.legend,w=A.legendgroup;if(!(!n&&(!A.visible||!A.showlegend)))if(Aae.traceIs(A,"pie-like"))for(f[w]||(f[w]={}),p=0;p<T.length;p++){var k=T[p].label;f[w][k]||(_(b,w,{label:k,color:T[p].color,i:T[p].i,trace:A,pts:T[p].pts}),f[w][k]=!0,h=Math.max(h,(k||"").length))}else _(b,w,g),h=Math.max(h,(A.name||"").length)}if(!l.length)return[];var x=!u||!a,E=[];for(v=0;v<l.length;v++){var M=s[l[v]];x?E.push(M[0]):E.push(M)}for(x&&(E=[E]),v=0;v<E.length;v++){var d=1/0;for(p=0;p<E[v].length;p++){var C=E[v][p].trace.legendrank;d>C&&(d=C)}E[v][0]._groupMinRank=d,E[v][0]._preGroupSort=v}var S=function(B,F){return B[0]._groupMinRank-F[0]._groupMinRank||B[0]._preGroupSort-F[0]._preGroupSort},P=function(B,F){return B.trace.legendrank-F.trace.legendrank||B._preSort-F._preSort};for(E.forEach(function(B,F){B[0]._preGroupSort=F}),E.sort(S),v=0;v<E.length;v++){E[v].forEach(function(B,F){B._preSort=F}),E[v].sort(P);var D=E[v][0].trace,z=null;for(p=0;p<E[v].length;p++){var O=E[v][p].trace.legendgrouptitle;if(O&&O.text){z=O,n&&(O.font=r._groupTitleFont);break}}if(o&&E[v].reverse(),z){var V=!1;for(p=0;p<E[v].length;p++)if(Aae.traceIs(E[v][p].trace,"pie-like")){V=!0;break}E[v].unshift({i:-1,groupTitle:z,noClick:V,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:r.groupclick==="toggleitem"?!0:D.visible}})}for(p=0;p<E[v].length;p++)E[v][p]=[E[v][p]]}return r._lgroupsLength=E.length,r._maxNameLength=h,E}});var hm=ne(wx=>{"use strict";var jC=Wt();function Eae(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}wx.formatPiePercent=function(t,r){var i=Eae((t*100).toPrecision(3));return jC.numSeparate(i,r)+"%"};wx.formatPieValue=function(t,r){var i=Eae(t.toPrecision(10));return jC.numSeparate(i,r)};wx.getFirstFilled=function(t,r){if(jC.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var n=t[r[i]];if(n||n===0||n==="")return n}};wx.castOption=function(t,r){if(jC.isArrayOrTypedArray(t))return wx.getFirstFilled(t,r);if(t)return t};wx.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var Cae=ne((Utr,kae)=>{"use strict";var eot=aa(),tot=_i();kae.exports=function(t,r,i,n){var a=i.marker.pattern;a&&a.shape?eot.pointStyle(t,i,n,r):tot.fill(t,r.color)}});var A2=ne((Vtr,Rae)=>{"use strict";var Lae=_i(),Pae=hm().castOption,rot=Cae();Rae.exports=function(t,r,i,n){var a=i.marker.line,o=Pae(a.color,r.pts)||Lae.defaultLine,s=Pae(a.width,r.pts)||0;t.call(rot,r,i,n).style("stroke-width",s).call(Lae.stroke,o)}});var kO=ne((Htr,Oae)=>{"use strict";var Gh=Ai(),MO=wi(),dh=Wt(),Dae=dh.strTranslate,mv=aa(),rp=_i(),SO=Uh().extractOpts,KC=js(),not=A2(),iot=hm().castOption,aot=TO(),Iae=12,Fae=5,Tx=2,oot=10,M2=5;Oae.exports=function(t,r,i){var n=r._fullLayout;i||(i=n.legend);var a=i.itemsizing==="constant",o=i.itemwidth,s=(o+aot.itemGap*2)/2,l=Dae(s,0),u=function(E,M,d,C){var S;if(E+1)S=E;else if(M&&M.width>0)S=M.width;else return 0;return a?C:Math.min(S,d)};t.each(function(E){var M=Gh.select(this),d=dh.ensureSingle(M,"g","layers");d.style("opacity",E[0].trace.opacity);var C=i.indentation,S=i.valign,P=E[0].lineHeight,D=E[0].height;if(S==="middle"&&C===0||!P||!D)d.attr("transform",null);else{var z={top:1,bottom:-1}[S],O=z*(.5*(P-D+3))||0,V=i.indentation;d.attr("transform",Dae(V,O))}var B=d.selectAll("g.legendfill").data([E]);B.enter().append("g").classed("legendfill",!0);var F=d.selectAll("g.legendlines").data([E]);F.enter().append("g").classed("legendlines",!0);var N=d.selectAll("g.legendsymbols").data([E]);N.enter().append("g").classed("legendsymbols",!0),N.selectAll("g.legendpoints").data([E]).enter().append("g").classed("legendpoints",!0)}).each(x).each(h).each(p).each(v).each(T).each(w).each(b).each(f).each(c).each(g).each(A);function f(E){var M=qae(E),d=M.showFill,C=M.showLine,S=M.showGradientLine,P=M.showGradientFill,D=M.anyFill,z=M.anyLine,O=E[0],V=O.trace,B,F,N=SO(V),Z=N.colorscale,J=N.reversescale,re=function(_e){if(_e.size())if(d)mv.fillGroupStyle(_e,r,!0);else{var be="legendfill-"+V.uid;mv.gradient(_e,r,be,EO(J),Z,"fill")}},le=function(_e){if(_e.size()){var be="legendline-"+V.uid;mv.lineGroupStyle(_e),mv.gradient(_e,r,be,EO(J),Z,"stroke")}},fe=KC.hasMarkers(V)||!D?"M5,0":z?"M5,-2":"M5,-3",K=Gh.select(this),X=K.select(".legendfill").selectAll("path").data(d||P?[E]:[]);if(X.enter().append("path").classed("js-fill",!0),X.exit().remove(),X.attr("d",fe+"h"+o+"v6h-"+o+"z").call(re),C||S){var ae=u(void 0,V.line,oot,Fae);F=dh.minExtend(V,{line:{width:ae}}),B=[dh.minExtend(O,{trace:F})]}var oe=K.select(".legendlines").selectAll("path").data(C||S?[B]:[]);oe.enter().append("path").classed("js-line",!0),oe.exit().remove(),oe.attr("d",fe+(S?"l"+o+",0.0001":"h"+o)).call(C?mv.lineGroupStyle:le)}function c(E){var M=qae(E),d=M.anyFill,C=M.anyLine,S=M.showLine,P=M.showMarker,D=E[0],z=D.trace,O=!P&&!C&&!d&&KC.hasText(z),V,B;function F(X,ae,oe,_e){var be=dh.nestedProperty(z,X).get(),he=dh.isArrayOrTypedArray(be)&&ae?ae(be):be;if(a&&he&&_e!==void 0&&(he=_e),oe){if(he<oe[0])return oe[0];if(he>oe[1])return oe[1]}return he}function N(X){return D._distinct&&D.index&&X[D.index]?X[D.index]:X[0]}if(P||O||S){var Z={},J={};if(P){Z.mc=F("marker.color",N),Z.mx=F("marker.symbol",N),Z.mo=F("marker.opacity",dh.mean,[.2,1]),Z.mlc=F("marker.line.color",N),Z.mlw=F("marker.line.width",dh.mean,[0,5],Tx),J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var re=F("marker.size",dh.mean,[2,16],Iae);Z.ms=re,J.marker.size=re}S&&(J.line={width:F("line.width",N,[0,10],Fae)}),O&&(Z.tx="Aa",Z.tp=F("textposition",N),Z.ts=10,Z.tc=F("textfont.color",N),Z.tf=F("textfont.family",N)),V=[dh.minExtend(D,Z)],B=dh.minExtend(z,J),B.selectedpoints=null,B.texttemplate=null}var le=Gh.select(this).select("g.legendpoints"),fe=le.selectAll("path.scatterpts").data(P?V:[]);fe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",l),fe.exit().remove(),fe.call(mv.pointStyle,B,r),P&&(V[0].mrc=3);var K=le.selectAll("g.pointtext").data(O?V:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",l),K.exit().remove(),K.selectAll("text").call(mv.textPointStyle,B,r)}function h(E){var M=E[0].trace,d=M.type==="waterfall";if(E[0]._distinct&&d){var C=E[0].trace[E[0].dir].marker;return E[0].mc=C.color,E[0].mlw=C.line.width,E[0].mlc=C.line.color,_(E,this,"waterfall")}var S=[];M.visible&&d&&(S=E[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var P=Gh.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(S);P.enter().append("path").classed("legendwaterfall",!0).attr("transform",l).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D){var z=Gh.select(this),O=M[D[0]].marker,V=u(void 0,O.line,M2,Tx);z.attr("d",D[1]).style("stroke-width",V+"px").call(rp.fill,O.color),V&&z.call(rp.stroke,O.line.color)})}function v(E){_(E,this)}function p(E){_(E,this,"funnel")}function _(E,M,d){var C=E[0].trace,S=C.marker||{},P=S.line||{},D=S.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",z=d?C.visible&&C.type===d:MO.traceIs(C,"bar"),O=Gh.select(M).select("g.legendpoints").selectAll("path.legend"+d).data(z?[E]:[]);O.enter().append("path").classed("legend"+d,!0).attr("d",D).attr("transform",l),O.exit().remove(),O.each(function(V){var B=Gh.select(this),F=V[0],N=u(F.mlw,S.line,M2,Tx);B.style("stroke-width",N+"px");var Z=F.mcc;if(!i._inHover&&"mc"in F){var J=SO(S),re=J.mid;re===void 0&&(re=(J.max+J.min)/2),Z=mv.tryColorscale(S,"")(re)}var le=Z||F.mc||S.color,fe=S.pattern,K=fe&&mv.getPatternAttr(fe.shape,0,"");if(K){var X=mv.getPatternAttr(fe.bgcolor,0,null),ae=mv.getPatternAttr(fe.fgcolor,0,null),oe=fe.fgopacity,_e=zae(fe.size,8,10),be=zae(fe.solidity,.5,1),he="legend-"+C.uid;B.call(mv.pattern,"legend",r,he,K,_e,be,Z,fe.fillmode,X,ae,oe)}else B.call(rp.fill,le);N&&rp.stroke(B,F.mlc||P.color)})}function T(E){var M=E[0].trace,d=Gh.select(this).select("g.legendpoints").selectAll("path.legendbox").data(M.visible&&MO.traceIs(M,"box-violin")?[E]:[]);d.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),d.exit().remove(),d.each(function(){var C=Gh.select(this);if((M.boxpoints==="all"||M.points==="all")&&rp.opacity(M.fillcolor)===0&&rp.opacity((M.line||{}).color)===0){var S=dh.minExtend(M,{marker:{size:a?Iae:dh.constrain(M.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});d.call(mv.pointStyle,S,r)}else{var P=u(void 0,M.line,M2,Tx);C.style("stroke-width",P+"px").call(rp.fill,M.fillcolor),P&&rp.stroke(C,M.line.color)}})}function g(E){var M=E[0].trace,d=Gh.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(M.visible&&M.type==="candlestick"?[E,E]:[]);d.enter().append("path").classed("legendcandle",!0).attr("d",function(C,S){return S?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",l).style("stroke-miterlimit",1),d.exit().remove(),d.each(function(C,S){var P=Gh.select(this),D=M[S?"increasing":"decreasing"],z=u(void 0,D.line,M2,Tx);P.style("stroke-width",z+"px").call(rp.fill,D.fillcolor),z&&rp.stroke(P,D.line.color)})}function A(E){var M=E[0].trace,d=Gh.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(M.visible&&M.type==="ohlc"?[E,E]:[]);d.enter().append("path").classed("legendohlc",!0).attr("d",function(C,S){return S?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",l).style("stroke-miterlimit",1),d.exit().remove(),d.each(function(C,S){var P=Gh.select(this),D=M[S?"increasing":"decreasing"],z=u(void 0,D.line,M2,Tx);P.style("fill","none").call(mv.dashLine,D.line.dash,z),z&&rp.stroke(P,D.line.color)})}function b(E){k(E,this,"pie")}function w(E){k(E,this,"funnelarea")}function k(E,M,d){var C=E[0],S=C.trace,P=d?S.visible&&S.type===d:MO.traceIs(S,d),D=Gh.select(M).select("g.legendpoints").selectAll("path.legend"+d).data(P?[E]:[]);if(D.enter().append("path").classed("legend"+d,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),D.exit().remove(),D.size()){var z=S.marker||{},O=u(iot(z.line.width,C.pts),z.line,M2,Tx),V="pieLike",B=dh.minExtend(S,{marker:{line:{width:O}}},V),F=dh.minExtend(C,{trace:B},V);not(D,F,B,r)}}function x(E){var M=E[0].trace,d,C=[];if(M.visible)switch(M.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],d=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],d=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],d="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],d=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],d=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],d=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],d=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],d=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],d=!1;break}var S=Gh.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);S.enter().append("path").classed("legend3dandfriends",!0).attr("transform",l).style("stroke-miterlimit",1),S.exit().remove(),S.each(function(P,D){var z=Gh.select(this),O=SO(M),V=O.colorscale,B=O.reversescale,F=function(re){if(re.size()){var le="legendfill-"+M.uid;mv.gradient(re,r,le,EO(B,d==="radial"),V,"fill")}},N;if(V){if(!d){var J=V.length;N=D===0?V[B?J-1:0][1]:D===1?V[B?0:J-1][1]:V[Math.floor((J-1)/2)][1]}}else{var Z=M.vertexcolor||M.facecolor||M.color;N=dh.isArrayOrTypedArray(Z)?Z[D]||Z[0]:Z}z.attr("d",P[0]),N?z.call(rp.fill,N):z.call(F)})}};function EO(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function qae(e){var t=e[0].trace,r=t.contours,i=KC.hasLines(t),n=KC.hasMarkers(t),a=t.visible&&t.fill&&t.fill!=="none",o=!1,s=!1;if(r){var l=r.coloring;l==="lines"?o=!0:i=l==="none"||l==="heatmap"||r.showlines,r.type==="constraint"?a=r._operation!=="=":(l==="fill"||l==="heatmap")&&(s=!0)}return{showMarker:n,showLine:i,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:i||o,anyFill:a||s}}function zae(e,t,r){return e&&dh.isArrayOrTypedArray(e)?t:e>r?r:e}});var RO=ne((Gtr,Zae)=>{"use strict";var nd=Ai(),Iu=Wt(),LO=Zs(),vm=wi(),Bae=l2(),CO=Hh(),ef=aa(),QC=_i(),Ax=Es(),Nae=wae(),Af=TO(),PO=Tf(),Wae=PO.LINE_SPACING,E2=PO.FROM_TL,Uae=PO.FROM_BR,Vae=Sae(),sot=kO(),Hae=XC(),S2=1,lot=/^legend[0-9]*$/;Zae.exports=function(t,r){if(r)Gae(t,r);else{var i=t._fullLayout,n=i._legends,a=i._infolayer.selectAll('[class^="legend"]');a.each(function(){var u=nd.select(this),f=u.attr("class"),c=f.split(" ")[0];c.match(lot)&&n.indexOf(c)===-1&&u.remove()});for(var o=0;o<n.length;o++){var s=n[o],l=t._fullLayout[s];Gae(t,l)}}};function uot(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,n=i.size*Wae,a=0,o=e.node(),s=ef.bBox(o).width;t.title.side==="top center"?a=.5*(t._width-2*r-2*Af.titlePad-s):t.title.side==="top right"&&(a=t._width-2*r-2*Af.titlePad-s),Ax.positionText(e,r+Af.titlePad+a,r+n)}}function Gae(e,t){var r=t||{},i=e._fullLayout,n=r4(r),a,o,s=r._inHover;if(s?(o=r.layer,a="hover"):(o=i._infolayer,a=n),!!o){a+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var l;if(s){if(!r.entries)return;l=Vae(r.entries,r)}else{for(var u=(e.calcdata||[]).slice(),f=i.shapes,c=0;c<f.length;c++){var h=f[c];if(h.showlegend){var v={_isShape:!0,_fullInput:h,index:h._index,name:h.name||h.label.text||"shape "+h._index,legend:h.legend,legendgroup:h.legendgroup,legendgrouptitle:h.legendgrouptitle,legendrank:h.legendrank,legendwidth:h.legendwidth,showlegend:h.showlegend,visible:h.visible,opacity:h.opacity,mode:h.type==="line"?"lines":"markers",line:h.line,marker:{line:h.line,color:h.fillcolor,size:12,symbol:h.type==="rect"?"square":h.type==="circle"?"circle":"hexagon2"}};u.push([{trace:v}])}}l=i.showlegend&&Vae(u,r,i._legends.length>1)}var p=i.hiddenlabels||[];if(!s&&(!i.showlegend||!l.length))return o.selectAll("."+n).remove(),i._topdefs.select("#"+a).remove(),LO.autoMargin(e,n);var _=Iu.ensureSingle(o,"g",n,function(M){s||M.attr("pointer-events","all")}),T=Iu.ensureSingleById(i._topdefs,"clipPath",a,function(M){M.append("rect")}),g=Iu.ensureSingle(_,"rect","bg",function(M){M.attr("shape-rendering","crispEdges")});g.call(QC.stroke,r.bordercolor).call(QC.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var A=Iu.ensureSingle(_,"g","scrollbox"),b=r.title;r._titleWidth=0,r._titleHeight=0;var w;b.text?(w=Iu.ensureSingle(A,"text",n+"titletext"),w.attr("text-anchor","start").call(ef.font,b.font).text(b.text),$C(w,A,e,r,S2)):A.selectAll("."+n+"titletext").remove();var k=Iu.ensureSingle(_,"rect","scrollbar",function(M){M.attr(Af.scrollBarEnterAttrs).call(QC.fill,Af.scrollBarColor)}),x=A.selectAll("g.groups").data(l);x.enter().append("g").attr("class","groups"),x.exit().remove();var E=x.selectAll("g.traces").data(Iu.identity);E.enter().append("g").attr("class","traces"),E.exit().remove(),E.style("opacity",function(M){var d=M[0].trace;return vm.traceIs(d,"pie-like")?p.indexOf(M[0].label)!==-1?.5:1:d.visible==="legendonly"?.5:1}).each(function(){nd.select(this).call(fot,e,r)}).call(sot,e,r).each(function(){s||nd.select(this).call(cot,e,n)}),Iu.syncOrAsync([LO.previousPromises,function(){return dot(e,x,E,r)},function(){var M=i._size,d=r.borderwidth,C=r.xref==="paper",S=r.yref==="paper";if(b.text&&uot(w,r,d),!s){var P,D;C?P=M.l+M.w*r.x-E2[e4(r)]*r._width:P=i.width*r.x-E2[e4(r)]*r._width,S?D=M.t+M.h*(1-r.y)-E2[t4(r)]*r._effHeight:D=i.height*(1-r.y)-E2[t4(r)]*r._effHeight;var z=pot(e,n,P,D);if(z)return;if(i.margin.autoexpand){var O=P,V=D;P=C?Iu.constrain(P,0,i.width-r._width):O,D=S?Iu.constrain(D,0,i.height-r._effHeight):V,P!==O&&Iu.log("Constrain "+n+".x to make legend fit inside graph"),D!==V&&Iu.log("Constrain "+n+".y to make legend fit inside graph")}ef.setTranslate(_,P,D)}if(k.on(".drag",null),_.on("wheel",null),s||r._height<=r._maxHeight||e._context.staticPlot){var B=r._effHeight;s&&(B=r._height),g.attr({width:r._width-d,height:B-d,x:d/2,y:d/2}),ef.setTranslate(A,0,0),T.select("rect").attr({width:r._width-2*d,height:B-2*d,x:d,y:d}),ef.setClipUrl(A,a,e),ef.setRect(k,0,0,0,0),delete r._scrollY}else{var F=Math.max(Af.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),N=r._effHeight-F-2*Af.scrollBarMargin,Z=r._height-r._effHeight,J=N/Z,re=Math.min(r._scrollY||0,Z);g.attr({width:r._width-2*d+Af.scrollBarWidth+Af.scrollBarMargin,height:r._effHeight-d,x:d/2,y:d/2}),T.select("rect").attr({width:r._width-2*d+Af.scrollBarWidth+Af.scrollBarMargin,height:r._effHeight-2*d,x:d,y:d+re}),ef.setClipUrl(A,a,e),be(re,F,J),_.on("wheel",function(){re=Iu.constrain(r._scrollY+nd.event.deltaY/N*Z,0,Z),be(re,F,J),re!==0&&re!==Z&&nd.event.preventDefault()});var le,fe,K,X=function(Ae,Re,ze){var et=(ze-Re)/J+Ae;return Iu.constrain(et,0,Z)},ae=function(Ae,Re,ze){var et=(Re-ze)/J+Ae;return Iu.constrain(et,0,Z)},oe=nd.behavior.drag().on("dragstart",function(){var Ae=nd.event.sourceEvent;Ae.type==="touchstart"?le=Ae.changedTouches[0].clientY:le=Ae.clientY,K=re}).on("drag",function(){var Ae=nd.event.sourceEvent;Ae.buttons===2||Ae.ctrlKey||(Ae.type==="touchmove"?fe=Ae.changedTouches[0].clientY:fe=Ae.clientY,re=X(K,le,fe),be(re,F,J))});k.call(oe);var _e=nd.behavior.drag().on("dragstart",function(){var Ae=nd.event.sourceEvent;Ae.type==="touchstart"&&(le=Ae.changedTouches[0].clientY,K=re)}).on("drag",function(){var Ae=nd.event.sourceEvent;Ae.type==="touchmove"&&(fe=Ae.changedTouches[0].clientY,re=ae(K,le,fe),be(re,F,J))});A.call(_e)}function be(Ae,Re,ze){r._scrollY=e._fullLayout[n]._scrollY=Ae,ef.setTranslate(A,0,-Ae),ef.setRect(k,r._width,Af.scrollBarMargin+Ae*ze,Af.scrollBarWidth,Re),T.select("rect").attr("y",d+Ae)}if(e._context.edits.legendPosition){var he,ie,ye,ue;_.classed("cursor-move",!0),CO.init({element:_.node(),gd:e,prepFn:function(){var Ae=ef.getTranslate(_);ye=Ae.x,ue=Ae.y},moveFn:function(Ae,Re){var ze=ye+Ae,et=ue+Re;ef.setTranslate(_,ze,et),he=CO.align(ze,r._width,M.l,M.l+M.w,r.xanchor),ie=CO.align(et+r._height,-r._height,M.t+M.h,M.t,r.yanchor)},doneFn:function(){if(he!==void 0&&ie!==void 0){var Ae={};Ae[n+".x"]=he,Ae[n+".y"]=ie,vm.call("_guiRelayout",e,Ae)}},clickFn:function(Ae,Re){var ze=o.selectAll("g.traces").filter(function(){var et=this.getBoundingClientRect();return Re.clientX>=et.left&&Re.clientX<=et.right&&Re.clientY>=et.top&&Re.clientY<=et.bottom});ze.size()>0&&Xae(e,_,ze,Ae,Re)}})}}],e)}}function JC(e,t,r){var i=e[0],n=i.width,a=t.entrywidthmode,o=i.trace.legendwidth||t.entrywidth;return a==="fraction"?t._maxWidth*o:r+(o||n)}function Xae(e,t,r,i,n){var a=r.data()[0][0].trace,o={event:n,node:r.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(o.group=a._group),vm.traceIs(a,"pie-like")&&(o.label=r.datum()[0].label);var s=Bae.triggerHandler(e,"plotly_legendclick",o);if(i===1){if(s===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&Nae(r,e,i)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var l=Bae.triggerHandler(e,"plotly_legenddoubleclick",o);l!==!1&&s!==!1&&Nae(r,e,i)}}function fot(e,t,r){var i=r4(r),n=e.data()[0][0],a=n.trace,o=vm.traceIs(a,"pie-like"),s=!r._inHover&&t._context.edits.legendText&&!o,l=r._maxNameLength,u,f;n.groupTitle?(u=n.groupTitle.text,f=n.groupTitle.font):(f=r.font,r.entries?u=n.text:(u=o?n.label:a.name,a._meta&&(u=Iu.templateString(u,a._meta))));var c=Iu.ensureSingle(e,"text",i+"text");c.attr("text-anchor","start").call(ef.font,f).text(s?Yae(u,l):u);var h=r.indentation+r.itemwidth+Af.itemGap*2;Ax.positionText(c,h,0),s?c.call(Ax.makeEditable,{gd:t,text:u}).call($C,e,t,r).on("edit",function(v){this.text(Yae(v,l)).call($C,e,t,r);var p=n.trace._fullInput||{},_={};if(vm.hasTransform(p,"groupby")){var T=vm.getTransformIndices(p,"groupby"),g=T[T.length-1],A=Iu.keyedContainer(p,"transforms["+g+"].styles","target","value.name");A.set(n.trace._group,v),_=A.constructUpdate()}else _.name=v;return p._isShape?vm.call("_guiRelayout",t,"shapes["+a.index+"].name",_.name):vm.call("_guiRestyle",t,_,a.index)}):$C(c,e,t,r)}function Yae(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function cot(e,t,r){var i=t._context.doubleClickDelay,n,a=1,o=Iu.ensureSingle(e,"rect",r+"toggle",function(s){t._context.staticPlot||s.style("cursor","pointer").attr("pointer-events","all"),s.call(QC.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(o.on("mousedown",function(){n=new Date().getTime(),n-t._legendMouseDownTime<i?a+=1:(a=1,t._legendMouseDownTime=n)}),o.on("mouseup",function(){if(!(t._dragged||t._editing)){var s=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(a=Math.max(a-1,1)),Xae(t,s,e,a,nd.event)}}))}function $C(e,t,r,i,n){i._inHover&&e.attr("data-notex",!0),Ax.convertToTspans(e,r,function(){hot(t,r,i,n)})}function hot(e,t,r,i){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var a=e.select("g[class*=math-group]"),o=a.node(),s=r4(r);r||(r=t._fullLayout[s]);var l=r.borderwidth,u;i===S2?u=r.title.font:n.groupTitle?u=n.groupTitle.font:u=r.font;var f=u.size*Wae,c,h;if(o){var v=ef.bBox(o);c=v.height,h=v.width,i===S2?ef.setTranslate(a,l,l+c*.75):ef.setTranslate(a,0,c*.25)}else{var p="."+s+(i===S2?"title":"")+"text",_=e.select(p),T=Ax.lineCount(_),g=_.node();if(c=f*T,h=g?ef.bBox(g).width:0,i===S2)r.title.side==="left"&&(h+=Af.itemGap*2),Ax.positionText(_,l+Af.titlePad,l+f);else{var A=Af.itemGap*2+r.indentation+r.itemwidth;n.groupTitle&&(A=Af.itemGap,h-=r.indentation+r.itemwidth),Ax.positionText(_,A,-f*((T-1)/2-.3))}}i===S2?(r._titleWidth=h,r._titleHeight=c):(n.lineHeight=f,n.height=Math.max(c,16)+3,n.width=h)}function vot(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function dot(e,t,r,i){var n=e._fullLayout,a=r4(i);i||(i=n[a]);var o=n._size,s=Hae.isVertical(i),l=Hae.isGrouped(i),u=i.entrywidthmode==="fraction",f=i.borderwidth,c=2*f,h=Af.itemGap,v=i.indentation+i.itemwidth+h*2,p=2*(f+h),_=t4(i),T=i.y<0||i.y===0&&_==="top",g=i.y>1||i.y===1&&_==="bottom",A=i.tracegroupgap,b={};i._maxHeight=Math.max(T||g?n.height/2:o.h,30);var w=0;i._width=0,i._height=0;var k=vot(i);if(s)r.each(function(K){var X=K[0].height;ef.setTranslate(this,f+k[0],f+k[1]+i._height+X/2+h),i._height+=X,i._width=Math.max(i._width,K[0].width)}),w=v+i._width,i._width+=h+v+c,i._height+=p,l&&(t.each(function(K,X){ef.setTranslate(this,0,X*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var x=e4(i),E=i.x<0||i.x===0&&x==="right",M=i.x>1||i.x===1&&x==="left",d=g||T,C=n.width/2;i._maxWidth=Math.max(E?d&&x==="left"?o.l+o.w:C:M?d&&x==="right"?o.r+o.w:C:o.w,2*v);var S=0,P=0;r.each(function(K){var X=JC(K,i,v);S=Math.max(S,X),P+=X}),w=null;var D=0;if(l){var z=0,O=0,V=0;t.each(function(){var K=0,X=0;nd.select(this).selectAll("g.traces").each(function(oe){var _e=JC(oe,i,v),be=oe[0].height;ef.setTranslate(this,k[0],k[1]+f+h+be/2+X),X+=be,K=Math.max(K,_e),b[oe[0].trace.legendgroup]=K});var ae=K+h;O>0&&ae+f+O>i._maxWidth?(D=Math.max(D,O),O=0,V+=z+A,z=X):z=Math.max(z,X),ef.setTranslate(this,O,V),O+=ae}),i._width=Math.max(D,O)+f,i._height=V+z+p}else{var B=r.size(),F=P+c+(B-1)*h<i._maxWidth,N=0,Z=0,J=0,re=0;r.each(function(K){var X=K[0].height,ae=JC(K,i,v,l),oe=F?ae:S;u||(oe+=h),oe+f+Z-h>=i._maxWidth&&(D=Math.max(D,re),Z=0,J+=N,i._height+=N,N=0),ef.setTranslate(this,k[0]+f+Z,k[1]+f+J+X/2+h),re=Z+ae+h,Z+=oe,N=Math.max(N,X)}),F?(i._width=Z+c,i._height=N+p):(i._width=Math.max(D,re)+c,i._height+=N+p)}}i._width=Math.ceil(Math.max(i._width+k[0],i._titleWidth+2*(f+Af.titlePad))),i._height=Math.ceil(Math.max(i._height+k[1],i._titleHeight+2*(f+Af.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var le=e._context.edits,fe=le.legendText||le.legendPosition;r.each(function(K){var X=nd.select(this).select("."+a+"toggle"),ae=K[0].height,oe=K[0].trace.legendgroup,_e=JC(K,i,v);l&&oe!==""&&(_e=b[oe]);var be=fe?v:w||_e;!s&&!u&&(be+=h/2),ef.setRect(X,0,-ae/2,be,ae)})}function pot(e,t,r,i){var n=e._fullLayout,a=n[t],o=e4(a),s=t4(a),l=a.xref==="paper",u=a.yref==="paper";e._fullLayout._reservedMargin[t]={};var f=a.y<.5?"b":"t",c=a.x<.5?"l":"r",h={r:n.width-r,l:r+a._width,b:n.height-i,t:i+a._effHeight};if(l&&u)return LO.autoMargin(e,t,{x:a.x,y:a.y,l:a._width*E2[o],r:a._width*Uae[o],b:a._effHeight*Uae[s],t:a._effHeight*E2[s]});l?e._fullLayout._reservedMargin[t][f]=h[f]:u||a.orientation==="v"?e._fullLayout._reservedMargin[t][c]=h[c]:e._fullLayout._reservedMargin[t][f]=h[f]}function e4(e){return Iu.isRightAnchor(e)?"right":Iu.isCenterAnchor(e)?"center":"left"}function t4(e){return Iu.isBottomAnchor(e)?"bottom":Iu.isMiddleAnchor(e)?"middle":"top"}function r4(e){return e._id||"legend"}});var qO=ne(FO=>{"use strict";var Mx=Ai(),Ng=la(),jae=Xf(),Fu=Wt(),DO=Fu.strTranslate,got=Fu.strRotate,yot=l2(),np=Es(),mot=mae(),U0=aa(),Qf=_i(),n4=Hh(),dm=Xi(),C2=wi(),t0=td(),Sx=oA(),xot=bO(),_ot=RO(),roe=Sx.YANGLE,IO=Math.PI*roe/180,bot=1/Math.sin(IO),wot=Math.cos(IO),Tot=Math.sin(IO),Cl=Sx.HOVERARROWSIZE,bo=Sx.HOVERTEXTPAD,Kae={box:!0,ohlc:!0,violin:!0,candlestick:!0},Aot={scatter:!0,scattergl:!0,splom:!0};FO.hover=function(t,r,i,n){t=Fu.getGraphDiv(t);var a=r.target;Fu.throttle(t._fullLayout._uid+Sx.HOVERID,Sx.HOVERMINTIME,function(){Mot(t,r,i,n,a)})};FO.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var n=r.gd,a=soe(n),o=loe(n),s=t.map(function(T){var g=T._x0||T.x0||T.x||0,A=T._x1||T.x1||T.x||0,b=T._y0||T.y0||T.y||0,w=T._y1||T.y1||T.y||0,k=T.eventData;if(k){var x=Math.min(g,A),E=Math.max(g,A),M=Math.min(b,w),d=Math.max(b,w),C=T.trace;if(C2.traceIs(C,"gl3d")){var S=n._fullLayout[C.scene]._scene.container,P=S.offsetLeft,D=S.offsetTop;x+=P,E+=P,M+=D,d+=D}k.bbox={x0:x+o,x1:E+o,y0:M+a,y1:d+a},r.inOut_bbox&&r.inOut_bbox.push(k.bbox)}else k=!1;return{color:T.color||Qf.defaultLine,x0:T.x0||T.x||0,x1:T.x1||T.x||0,y0:T.y0||T.y||0,y1:T.y1||T.y||0,xLabel:T.xLabel,yLabel:T.yLabel,zLabel:T.zLabel,text:T.text,name:T.name,idealAlign:T.idealAlign,borderColor:T.borderColor,fontFamily:T.fontFamily,fontSize:T.fontSize,fontColor:T.fontColor,nameLength:T.nameLength,textAlign:T.textAlign,trace:T.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:T.hovertemplate||!1,hovertemplateLabels:T.hovertemplateLabels||!1,eventData:k}}),l=!1,u=ioe(s,{gd:n,hovermode:"closest",rotateLabels:l,bgColor:r.bgColor||Qf.background,container:Mx.select(r.container),outerContainer:r.outerContainer||r.container}),f=u.hoverLabels,c=5,h=0,v=0;f.sort(function(T,g){return T.y0-g.y0}).each(function(T,g){var A=T.y0-T.by/2;A-c<h?T.offset=h-A+c:T.offset=0,h=A+T.by+T.offset,g===r.anchorIndex&&(v=T.offset)}).each(function(T){T.offset-=v});var p=n._fullLayout._invScaleX,_=n._fullLayout._invScaleY;return ooe(f,l,p,_),i?f:f.node()};function Mot(e,t,r,i,n){r||(r="xy");var a=Array.isArray(r)?r:[r],o=e._fullLayout,s=o._plots||[],l=s[r],u=o._has("cartesian");if(l){var f=l.overlays.map(function(Ut){return Ut.id});a=a.concat(f)}for(var c=a.length,h=new Array(c),v=new Array(c),p=!1,_=0;_<c;_++){var T=a[_];if(s[T])p=!0,h[_]=s[T].xaxis,v[_]=s[T].yaxis;else if(o[T]&&o[T]._subplot){var g=o[T]._subplot;h[_]=g.xaxis,v[_]=g.yaxis}else{Fu.warn("Unrecognized subplot: "+T);return}}var A=t.hovermode||o.hovermode;if(A&&!p&&(A="closest"),["x","y","closest","x unified","y unified"].indexOf(A)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return n4.unhoverRaw(e,t);var b=o.hoverdistance;b===-1&&(b=1/0);var w=o.spikedistance;w===-1&&(w=1/0);var k=[],x=[],E,M,d,C,S,P,D,z,O,V,B,F,N,Z={hLinePoint:null,vLinePoint:null},J=!1;if(Array.isArray(t))for(A="array",d=0;d<t.length;d++)S=e.calcdata[t[d].curveNumber||0],S&&(P=S[0].trace,S[0].trace.hoverinfo!=="skip"&&(x.push(S),P.orientation==="h"&&(J=!0)));else{for(C=0;C<e.calcdata.length;C++)S=e.calcdata[C],P=S[0].trace,P.hoverinfo!=="skip"&&t0.isTraceInSubplots(P,a)&&(x.push(S),P.orientation==="h"&&(J=!0));var re=!n,le,fe;if(re)"xpx"in t?le=t.xpx:le=h[0]._length/2,"ypx"in t?fe=t.ypx:fe=v[0]._length/2;else{if(yot.triggerHandler(e,"plotly_beforehover",t)===!1)return;var K=n.getBoundingClientRect();le=t.clientX-K.left,fe=t.clientY-K.top,o._calcInverseTransform(e);var X=Fu.apply3DTransform(o._invTransform)(le,fe);if(le=X[0],fe=X[1],le<0||le>h[0]._length||fe<0||fe>v[0]._length)return n4.unhoverRaw(e,t)}if(t.pointerX=le+h[0]._offset,t.pointerY=fe+v[0]._offset,"xval"in t?E=t0.flat(a,t.xval):E=t0.p2c(h,le),"yval"in t?M=t0.flat(a,t.yval):M=t0.p2c(v,fe),!Ng(E[0])||!Ng(M[0]))return Fu.warn("Fx.hover failed",t,e),n4.unhoverRaw(e,t)}var ae=1/0;function oe(Ut,br){for(C=0;C<x.length;C++)if(S=x[C],!(!S||!S[0]||!S[0].trace)&&(P=S[0].trace,!(P.visible!==!0||P._length===0)&&["carpet","contourcarpet"].indexOf(P._module.name)===-1)){if(P.type==="splom"?(z=0,D=a[z]):(D=t0.getSubplot(P),z=a.indexOf(D)),O=A,t0.isUnifiedHover(O)&&(O=O.charAt(0)),F={cd:S,trace:P,xa:h[z],ya:v[z],maxHoverDistance:b,maxSpikeDistance:w,index:!1,distance:Math.min(ae,b),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Qf.defaultLine,name:P.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[D]&&(F.subplot=o[D]._subplot),o._splomScenes&&o._splomScenes[P.uid]&&(F.scene=o._splomScenes[P.uid]),N=k.length,O==="array"){var xr=t[C];"pointNumber"in xr?(F.index=xr.pointNumber,O="closest"):(O="","xval"in xr&&(V=xr.xval,O="x"),"yval"in xr&&(B=xr.yval,O=O?"closest":"y"))}else Ut!==void 0&&br!==void 0?(V=Ut,B=br):(V=E[z],B=M[z]);if(b!==0)if(P._module&&P._module.hoverPoints){var Or=P._module.hoverPoints(F,V,B,O,{finiteRange:!0,hoverLayer:o._hoverlayer});if(Or)for(var Hr,gr=0;gr<Or.length;gr++)Hr=Or[gr],Ng(Hr.x0)&&Ng(Hr.y0)&&k.push(Cot(Hr,A))}else Fu.log("Unrecognized trace type in hover:",P);if(A==="closest"&&k.length>N&&(k.splice(0,N),ae=k[0].distance),u&&w!==0&&k.length===0){F.distance=w,F.index=!1;var Ur=P._module.hoverPoints(F,V,B,"closest",{hoverLayer:o._hoverlayer});if(Ur&&(Ur=Ur.filter(function(oi){return oi.spikeDistance<=w})),Ur&&Ur.length){var _n,si=Ur.filter(function(oi){return oi.xa.showspikes&&oi.xa.spikesnap!=="hovered data"});if(si.length){var xn=si[0];Ng(xn.x0)&&Ng(xn.y0)&&(_n=be(xn),(!Z.vLinePoint||Z.vLinePoint.spikeDistance>_n.spikeDistance)&&(Z.vLinePoint=_n))}var ci=Ur.filter(function(oi){return oi.ya.showspikes&&oi.ya.spikesnap!=="hovered data"});if(ci.length){var Wi=ci[0];Ng(Wi.x0)&&Ng(Wi.y0)&&(_n=be(Wi),(!Z.hLinePoint||Z.hLinePoint.spikeDistance>_n.spikeDistance)&&(Z.hLinePoint=_n))}}}}}oe();function _e(Ut,br,xr){for(var Or=null,Hr=1/0,gr,Ur=0;Ur<Ut.length;Ur++)gr=Ut[Ur].spikeDistance,xr&&Ur===0&&(gr=-1/0),gr<=Hr&&gr<=br&&(Or=Ut[Ur],Hr=gr);return Or}function be(Ut){return Ut?{xa:Ut.xa,ya:Ut.ya,x:Ut.xSpike!==void 0?Ut.xSpike:(Ut.x0+Ut.x1)/2,y:Ut.ySpike!==void 0?Ut.ySpike:(Ut.y0+Ut.y1)/2,distance:Ut.distance,spikeDistance:Ut.spikeDistance,curveNumber:Ut.trace.index,color:Ut.color,pointNumber:Ut.index}:null}var he={fullLayout:o,container:o._hoverlayer,event:t},ie=e._spikepoints,ye={vLinePoint:Z.vLinePoint,hLinePoint:Z.hLinePoint};e._spikepoints=ye;var ue=function(){k.sort(function(Ut,br){return Ut.distance-br.distance}),k=Pot(k,A)};ue();var Ae=A.charAt(0),Re=(Ae==="x"||Ae==="y")&&k[0]&&Aot[k[0].trace.type];if(u&&w!==0&&k.length!==0){var ze=k.filter(function(Ut){return Ut.ya.showspikes}),et=_e(ze,w,Re);Z.hLinePoint=be(et);var Le=k.filter(function(Ut){return Ut.xa.showspikes}),Ie=_e(Le,w,Re);Z.vLinePoint=be(Ie)}if(k.length===0){var dt=n4.unhoverRaw(e,t);return u&&(Z.hLinePoint!==null||Z.vLinePoint!==null)&&$ae(ie)&&Qae(e,Z,he),dt}if(u&&$ae(ie)&&Qae(e,Z,he),t0.isXYhover(O)&&k[0].length!==0&&k[0].trace.type!=="splom"){var ct=k[0];Kae[ct.trace.type]?k=k.filter(function(Ut){return Ut.trace.index===ct.trace.index}):k=[ct];var Ke=k.length,_t=toe("x",ct,o),zt=toe("y",ct,o);oe(_t,zt);var Et=[],Se={},je=0,ht=function(Ut){var br=Kae[Ut.trace.type]?noe(Ut):Ut.trace.index;if(!Se[br])je++,Se[br]=je,Et.push(Ut);else{var xr=Se[br]-1,Or=Et[xr];xr>0&&Math.abs(Ut.distance)<Math.abs(Or.distance)&&(Et[xr]=Ut)}},nt;for(nt=0;nt<Ke;nt++)ht(k[nt]);for(nt=k.length-1;nt>Ke-1;nt--)ht(k[nt]);k=Et,ue()}var lt=e._hoverdata,rt=[],Xe=soe(e),ft=loe(e);for(d=0;d<k.length;d++){var gt=k[d],Qt=t0.makeEventData(gt,gt.trace,gt.cd);if(gt.hovertemplate!==!1){var Jt=!1;gt.cd[gt.index]&&gt.cd[gt.index].ht&&(Jt=gt.cd[gt.index].ht),gt.hovertemplate=Jt||gt.trace.hovertemplate||!1}if(gt.xa&&gt.ya){var fr=gt.x0+gt.xa._offset,nr=gt.x1+gt.xa._offset,ur=gt.y0+gt.ya._offset,qt=gt.y1+gt.ya._offset,xt=Math.min(fr,nr),At=Math.max(fr,nr),Je=Math.min(ur,qt),xe=Math.max(ur,qt);Qt.bbox={x0:xt+ft,x1:At+ft,y0:Je+Xe,y1:xe+Xe}}gt.eventData=[Qt],rt.push(Qt)}e._hoverdata=rt;var ce=A==="y"&&(x.length>1||k.length>1)||A==="closest"&&J&&k.length>1,ge=Qf.combine(o.plot_bgcolor||Qf.background,o.paper_bgcolor),qe=ioe(k,{gd:e,hovermode:A,rotateLabels:ce,bgColor:ge,container:o._hoverlayer,outerContainer:o._paper.node(),commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance}),yt=qe.hoverLabels;if(t0.isUnifiedHover(A)||(Eot(yt,ce,o,qe.commonLabelBoundingBox),ooe(yt,ce,o._invScaleX,o._invScaleY)),n&&n.tagName){var Vt=C2.getComponentMethod("annotations","hasClickToShow")(e,rt);mot(Mx.select(n),Vt?"pointer":"")}!n||i||!Lot(e,t,lt)||(lt&&e.emit("plotly_unhover",{event:t,points:lt}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:h,yaxes:v,xvals:E,yvals:M}))}function noe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var Sot=/<extra>([\s\S]*)<\/extra>/;function ioe(e,t){var r=t.gd,i=r._fullLayout,n=t.hovermode,a=t.rotateLabels,o=t.bgColor,s=t.container,l=t.outerContainer,u=t.commonLabelOpts||{};if(e.length===0)return[[]];var f=t.fontFamily||Sx.HOVERFONT,c=t.fontSize||Sx.HOVERFONTSIZE,h=e[0],v=h.xa,p=h.ya,_=n.charAt(0),T=_+"Label",g=h[T];if(g===void 0&&v.type==="multicategory")for(var A=0;A<e.length&&(g=e[A][T],g===void 0);A++);var b=k2(r,l),w=b.top,k=b.width,x=b.height,E=g!==void 0&&h.distance<=t.hoverdistance&&(n==="x"||n==="y");if(E){var M=!0,d,C;for(d=0;d<e.length;d++)if(M&&e[d].zLabel===void 0&&(M=!1),C=e[d].hoverinfo||e[d].trace.hoverinfo,C){var S=Array.isArray(C)?C:C.split("+");if(S.indexOf("all")===-1&&S.indexOf(n)===-1){E=!1;break}}M&&(E=!1)}var P=s.selectAll("g.axistext").data(E?[0]:[]);P.enter().append("g").classed("axistext",!0),P.exit().remove();var D={minX:0,maxX:0,minY:0,maxY:0};if(P.each(function(){var Ke=Mx.select(this),_t=Fu.ensureSingle(Ke,"path","",function(xe){xe.style({"stroke-width":"1px"})}),zt=Fu.ensureSingle(Ke,"text","",function(xe){xe.attr("data-notex",1)}),Et=u.bgcolor||Qf.defaultLine,Se=u.bordercolor||Qf.contrast(Et),je=Qf.contrast(Et),ht={family:u.font.family||f,size:u.font.size||c,color:u.font.color||je};_t.style({fill:Et,stroke:Se}),zt.text(g).call(U0.font,ht).call(np.positionText,0,0).call(np.convertToTspans,r),Ke.attr("transform","");var nt=k2(r,zt.node()),lt,rt;if(n==="x"){var Xe=v.side==="top"?"-":"";zt.attr("text-anchor","middle").call(np.positionText,0,v.side==="top"?w-nt.bottom-Cl-bo:w-nt.top+Cl+bo),lt=v._offset+(h.x0+h.x1)/2,rt=p._offset+(v.side==="top"?0:p._length);var ft=nt.width/2+bo,gt=lt;lt<ft?gt=ft:lt>i.width-ft&&(gt=i.width-ft),_t.attr("d","M"+(lt-gt)+",0L"+(lt-gt+Cl)+","+Xe+Cl+"H"+ft+"v"+Xe+(bo*2+nt.height)+"H"+-ft+"V"+Xe+Cl+"H"+(lt-gt-Cl)+"Z"),lt=gt,D.minX=lt-ft,D.maxX=lt+ft,v.side==="top"?(D.minY=rt-(bo*2+nt.height),D.maxY=rt-bo):(D.minY=rt+bo,D.maxY=rt+(bo*2+nt.height))}else{var Qt,Jt,fr;p.side==="right"?(Qt="start",Jt=1,fr="",lt=v._offset+v._length):(Qt="end",Jt=-1,fr="-",lt=v._offset),rt=p._offset+(h.y0+h.y1)/2,zt.attr("text-anchor",Qt),_t.attr("d","M0,0L"+fr+Cl+","+Cl+"V"+(bo+nt.height/2)+"h"+fr+(bo*2+nt.width)+"V-"+(bo+nt.height/2)+"H"+fr+Cl+"V-"+Cl+"Z"),D.minY=rt-(bo+nt.height/2),D.maxY=rt+(bo+nt.height/2),p.side==="right"?(D.minX=lt+Cl,D.maxX=lt+Cl+(bo*2+nt.width)):(D.minX=lt-Cl-(bo*2+nt.width),D.maxX=lt-Cl);var nr=nt.height/2,ur=w-nt.top-nr,qt="clip"+i._uid+"commonlabel"+p._id,xt;if(lt<nt.width+2*bo+Cl){xt="M-"+(Cl+bo)+"-"+nr+"h-"+(nt.width-bo)+"V"+nr+"h"+(nt.width-bo)+"Z";var At=nt.width-lt+bo;np.positionText(zt,At,ur),Qt==="end"&&zt.selectAll("tspan").each(function(){var xe=Mx.select(this),ce=U0.tester.append("text").text(xe.text()).call(U0.font,ht),ge=k2(r,ce.node());Math.round(ge.width)<Math.round(nt.width)&&xe.attr("x",At-ge.width),ce.remove()})}else np.positionText(zt,Jt*(bo+Cl),ur),xt=null;var Je=i._topclips.selectAll("#"+qt).data(xt?[0]:[]);Je.enter().append("clipPath").attr("id",qt).append("path"),Je.exit().remove(),Je.select("path").attr("d",xt),U0.setClipUrl(zt,xt?qt:null,r)}Ke.attr("transform",DO(lt,rt))}),t0.isUnifiedHover(n)){s.selectAll("g.hovertext").remove();var z=e.filter(function(Ke){return Ke.hoverinfo!=="none"});if(z.length===0)return[];var O=i.hoverlabel,V=O.font,B={showlegend:!0,legend:{title:{text:g,font:V},font:V,bgcolor:O.bgcolor,bordercolor:O.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},F={font:V};xot(B,F,r._fullData);var N=F.legend;N.entries=[];for(var Z=0;Z<z.length;Z++){var J=z[Z];if(J.hoverinfo!=="none"){var re=Jae(J,!0,n,i,g),le=re[0],fe=re[1];J.name=fe,fe!==""?J.text=fe+" : "+le:J.text=le;var K=J.cd[J.index];K&&(K.mc&&(J.mc=K.mc),K.mcc&&(J.mc=K.mcc),K.mlc&&(J.mlc=K.mlc),K.mlcc&&(J.mlc=K.mlcc),K.mlw&&(J.mlw=K.mlw),K.mrc&&(J.mrc=K.mrc),K.dir&&(J.dir=K.dir)),J._distinct=!0,N.entries.push([J])}}N.entries.sort(function(Ke,_t){return Ke[0].trace.index-_t[0].trace.index}),N.layer=s,N._inHover=!0,N._groupTitleFont=O.grouptitlefont,_ot(r,N);var X=s.select("g.legend"),ae=k2(r,X.node()),oe=ae.width+2*bo,_e=ae.height+2*bo,be=z[0],he=(be.x0+be.x1)/2,ie=(be.y0+be.y1)/2,ye=!(C2.traceIs(be.trace,"bar-like")||C2.traceIs(be.trace,"box-violin")),ue,Ae;_==="y"?ye?(Ae=ie-bo,ue=ie+bo):(Ae=Math.min.apply(null,z.map(function(Ke){return Math.min(Ke.y0,Ke.y1)})),ue=Math.max.apply(null,z.map(function(Ke){return Math.max(Ke.y0,Ke.y1)}))):Ae=ue=Fu.mean(z.map(function(Ke){return(Ke.y0+Ke.y1)/2}))-_e/2;var Re,ze;_==="x"?ye?(Re=he+bo,ze=he-bo):(Re=Math.max.apply(null,z.map(function(Ke){return Math.max(Ke.x0,Ke.x1)})),ze=Math.min.apply(null,z.map(function(Ke){return Math.min(Ke.x0,Ke.x1)}))):Re=ze=Fu.mean(z.map(function(Ke){return(Ke.x0+Ke.x1)/2}))-oe/2;var et=v._offset,Le=p._offset;ue+=Le,Re+=et,ze+=et-oe,Ae+=Le-_e;var Ie,dt;return Re+oe<k&&Re>=0?Ie=Re:ze+oe<k&&ze>=0?Ie=ze:et+oe<k?Ie=et:Re-he<he-ze+oe?Ie=k-oe:Ie=0,Ie+=bo,ue+_e<x&&ue>=0?dt=ue:Ae+_e<x&&Ae>=0?dt=Ae:Le+_e<x?dt=Le:ue-ie<ie-Ae+_e?dt=x-_e:dt=0,dt+=bo,X.attr("transform",DO(Ie-1,dt-1)),X}var ct=s.selectAll("g.hovertext").data(e,function(Ke){return noe(Ke)});return ct.enter().append("g").classed("hovertext",!0).each(function(){var Ke=Mx.select(this);Ke.append("rect").call(Qf.fill,Qf.addOpacity(o,.8)),Ke.append("text").classed("name",!0),Ke.append("path").style("stroke-width","1px"),Ke.append("text").classed("nums",!0).call(U0.font,f,c)}),ct.exit().remove(),ct.each(function(Ke){var _t=Mx.select(this).attr("transform",""),zt=Ke.color;Array.isArray(zt)&&(zt=zt[Ke.eventData[0].pointNumber]);var Et=Ke.bgcolor||zt,Se=Qf.combine(Qf.opacity(Et)?Et:Qf.defaultLine,o),je=Qf.combine(Qf.opacity(zt)?zt:Qf.defaultLine,o),ht=Ke.borderColor||Qf.contrast(Se),nt=Jae(Ke,E,n,i,g,_t),lt=nt[0],rt=nt[1],Xe=_t.select("text.nums").call(U0.font,Ke.fontFamily||f,Ke.fontSize||c,Ke.fontColor||ht).text(lt).attr("data-notex",1).call(np.positionText,0,0).call(np.convertToTspans,r),ft=_t.select("text.name"),gt=0,Qt=0;if(rt&&rt!==lt){ft.call(U0.font,Ke.fontFamily||f,Ke.fontSize||c,je).text(rt).attr("data-notex",1).call(np.positionText,0,0).call(np.convertToTspans,r);var Jt=k2(r,ft.node());gt=Jt.width+2*bo,Qt=Jt.height+2*bo}else ft.remove(),_t.select("rect").remove();_t.select("path").style({fill:Se,stroke:ht});var fr=Ke.xa._offset+(Ke.x0+Ke.x1)/2,nr=Ke.ya._offset+(Ke.y0+Ke.y1)/2,ur=Math.abs(Ke.x1-Ke.x0),qt=Math.abs(Ke.y1-Ke.y0),xt=k2(r,Xe.node()),At=xt.width/i._invScaleX,Je=xt.height/i._invScaleY;Ke.ty0=(w-xt.top)/i._invScaleY,Ke.bx=At+2*bo,Ke.by=Math.max(Je+2*bo,Qt),Ke.anchor="start",Ke.txwidth=At,Ke.tx2width=gt,Ke.offset=0;var xe=(At+Cl+bo+gt)*i._invScaleX,ce,ge;if(a)Ke.pos=fr,ce=nr+qt/2+xe<=x,ge=nr-qt/2-xe>=0,(Ke.idealAlign==="top"||!ce)&&ge?(nr-=qt/2,Ke.anchor="end"):ce?(nr+=qt/2,Ke.anchor="start"):Ke.anchor="middle",Ke.crossPos=nr;else{if(Ke.pos=nr,ce=fr+ur/2+xe<=k,ge=fr-ur/2-xe>=0,(Ke.idealAlign==="left"||!ce)&&ge)fr-=ur/2,Ke.anchor="end";else if(ce)fr+=ur/2,Ke.anchor="start";else{Ke.anchor="middle";var qe=xe/2,yt=fr+qe-k,Vt=fr-qe;yt>0&&(fr-=yt),Vt<0&&(fr+=-Vt)}Ke.crossPos=fr}Xe.attr("text-anchor",Ke.anchor),gt&&ft.attr("text-anchor",Ke.anchor),_t.attr("transform",DO(fr,nr)+(a?got(roe):""))}),{hoverLabels:ct,commonLabelBoundingBox:D}}function Jae(e,t,r,i,n,a){var o="",s="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=Fu.templateString(e.name,e.trace._meta)),o=eoe(e.name,e.nameLength));var l=r.charAt(0),u=l==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(s+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(s+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===n?s=e[u+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(s=e.yLabel):e.yLabel===void 0?s=e.xLabel:s="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),e.extraText!==void 0&&(s+=(s?"<br>":"")+e.extraText),a&&s===""&&!e.hovertemplate&&(o===""&&a.remove(),s=o);var f=e.hovertemplate||!1;if(f){var c=e.hovertemplateLabels||e;e[l+"Label"]!==n&&(c[l+"other"]=c[l+"Val"],c[l+"otherLabel"]=c[l+"Label"]),s=Fu.hovertemplateString(f,c,i._d3locale,e.eventData[0]||{},e.trace._meta),s=s.replace(Sot,function(h,v){return o=eoe(v,e.nameLength),""})}return[s,o]}function Eot(e,t,r,i){var n=t?"xa":"ya",a=t?"ya":"xa",o=0,s=1,l=e.size(),u=new Array(l),f=0,c=i.minX,h=i.maxX,v=i.minY,p=i.maxY,_=function(V){return V*r._invScaleX},T=function(V){return V*r._invScaleY};e.each(function(V){var B=V[n],F=V[a],N=B._id.charAt(0)==="x",Z=B.range;f===0&&Z&&Z[0]>Z[1]!==N&&(s=-1);var J=0,re=N?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var le=aoe(V,t),fe=V.anchor,K=fe==="end"?-1:1,X,ae;if(fe==="middle")X=V.crossPos+(N?T(le.y-V.by/2):_(V.bx/2+V.tx2width/2)),ae=X+(N?T(V.by):_(V.bx));else if(N)X=V.crossPos+T(Cl+le.y)-T(V.by/2-Cl),ae=X+T(V.by);else{var oe=_(K*Cl+le.x),_e=oe+_(K*V.bx);X=V.crossPos+Math.min(oe,_e),ae=V.crossPos+Math.max(oe,_e)}N?v!==void 0&&p!==void 0&&Math.min(ae,p)-Math.max(X,v)>1&&(F.side==="left"?(J=F._mainLinePosition,re=r.width):re=F._mainLinePosition):c!==void 0&&h!==void 0&&Math.min(ae,h)-Math.max(X,c)>1&&(F.side==="top"?(J=F._mainLinePosition,re=r.height):re=F._mainLinePosition)}u[f++]=[{datum:V,traceIndex:V.trace.index,dp:0,pos:V.pos,posref:V.posref,size:V.by*(N?bot:1)/2,pmin:J,pmax:re}]}),u.sort(function(V,B){return V[0].posref-B[0].posref||s*(B[0].traceIndex-V[0].traceIndex)});var g,A,b,w,k,x,E;function M(V){var B=V[0],F=V[V.length-1];if(A=B.pmin-B.pos-B.dp+B.size,b=F.pos+F.dp+F.size-B.pmax,A>.01){for(k=V.length-1;k>=0;k--)V[k].dp+=A;g=!1}if(!(b<.01)){if(A<-.01){for(k=V.length-1;k>=0;k--)V[k].dp-=b;g=!1}if(g){var N=0;for(w=0;w<V.length;w++)x=V[w],x.pos+x.dp+x.size>B.pmax&&N++;for(w=V.length-1;w>=0&&!(N<=0);w--)x=V[w],x.pos>B.pmax-1&&(x.del=!0,N--);for(w=0;w<V.length&&!(N<=0);w++)if(x=V[w],x.pos<B.pmin+1)for(x.del=!0,N--,b=x.size*2,k=V.length-1;k>=0;k--)V[k].dp-=b;for(w=V.length-1;w>=0&&!(N<=0);w--)x=V[w],x.pos+x.dp+x.size>B.pmax&&(x.del=!0,N--)}}}for(;!g&&o<=l;){for(o++,g=!0,w=0;w<u.length-1;){var d=u[w],C=u[w+1],S=d[d.length-1],P=C[0];if(A=S.pos+S.dp+S.size-P.pos-P.dp+P.size,A>.01&&S.pmin===P.pmin&&S.pmax===P.pmax){for(k=C.length-1;k>=0;k--)C[k].dp+=A;for(d.push.apply(d,C),u.splice(w+1,1),E=0,k=d.length-1;k>=0;k--)E+=d[k].dp;for(b=E/d.length,k=d.length-1;k>=0;k--)d[k].dp-=b;g=!1}else w++}u.forEach(M)}for(w=u.length-1;w>=0;w--){var D=u[w];for(k=D.length-1;k>=0;k--){var z=D[k],O=z.datum;O.offset=z.dp,O.del=z.del}}}function aoe(e,t){var r=0,i=e.offset;return t&&(i*=-Tot,r=e.offset*wot),{x:r,y:i}}function kot(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(Cl+bo),i=r+t*(e.txwidth+bo),n=e.anchor==="middle";return n&&(r-=e.tx2width/2,i+=e.txwidth/2+bo),{alignShift:t,textShiftX:r,text2ShiftX:i}}function ooe(e,t,r,i){var n=function(o){return o*r},a=function(o){return o*i};e.each(function(o){var s=Mx.select(this);if(o.del)return s.remove();var l=s.select("text.nums"),u=o.anchor,f=u==="end"?-1:1,c=kot(o),h=aoe(o,t),v=h.x,p=h.y,_=u==="middle";s.select("path").attr("d",_?"M-"+n(o.bx/2+o.tx2width/2)+","+a(p-o.by/2)+"h"+n(o.bx)+"v"+a(o.by)+"h-"+n(o.bx)+"Z":"M0,0L"+n(f*Cl+v)+","+a(Cl+p)+"v"+a(o.by/2-Cl)+"h"+n(f*o.bx)+"v-"+a(o.by)+"H"+n(f*Cl+v)+"V"+a(p-Cl)+"Z");var T=v+c.textShiftX,g=p+o.ty0-o.by/2+bo,A=o.textAlign||"auto";A!=="auto"&&(A==="left"&&u!=="start"?(l.attr("text-anchor","start"),T=_?-o.bx/2-o.tx2width/2+bo:-o.bx-bo):A==="right"&&u!=="end"&&(l.attr("text-anchor","end"),T=_?o.bx/2-o.tx2width/2-bo:o.bx+bo)),l.call(np.positionText,n(T),a(g)),o.tx2width&&(s.select("text.name").call(np.positionText,n(c.text2ShiftX+c.alignShift*bo+v),a(p+o.ty0-o.by/2+bo)),s.select("rect").call(U0.setRect,n(c.text2ShiftX+(c.alignShift-1)*o.tx2width/2+v),a(p-o.by/2-1),n(o.tx2width),a(o.by+2)))})}function Cot(e,t){var r=e.index,i=e.trace||{},n=e.cd[0],a=e.cd[r]||{};function o(h){return h||Ng(h)&&h===0}var s=Array.isArray(r)?function(h,v){var p=Fu.castOption(n,r,h);return o(p)?p:Fu.extractOption({},i,"",v)}:function(h,v){return Fu.extractOption(a,i,h,v)};function l(h,v,p){var _=s(v,p);o(_)&&(e[h]=_)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=Fu.constrain(e.x0,0,e.xa._length),e.x1=Fu.constrain(e.x1,0,e.xa._length),e.y0=Fu.constrain(e.y0,0,e.ya._length),e.y1=Fu.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:dm.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:dm.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=dm.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+u+" / -"+dm.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+u,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var f=dm.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+f+" / -"+dm.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+f,t==="y"&&(e.distance+=1)}var c=e.hoverinfo||e.trace.hoverinfo;return c&&c!=="all"&&(c=Array.isArray(c)?c:c.split("+"),c.indexOf("x")===-1&&(e.xLabel=void 0),c.indexOf("y")===-1&&(e.yLabel=void 0),c.indexOf("z")===-1&&(e.zLabel=void 0),c.indexOf("text")===-1&&(e.text=void 0),c.indexOf("name")===-1&&(e.name=void 0)),e}function Qae(e,t,r){var i=r.container,n=r.fullLayout,a=n._size,o=r.event,s=!!t.hLinePoint,l=!!t.vLinePoint,u,f;if(i.selectAll(".spikeline").remove(),!!(l||s)){var c=Qf.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var h=t.hLinePoint,v,p;u=h&&h.xa,f=h&&h.ya;var _=f.spikesnap;_==="cursor"?(v=o.pointerX,p=o.pointerY):(v=u._offset+h.x,p=f._offset+h.y);var T=jae.readability(h.color,c)<1.5?Qf.contrast(c):h.color,g=f.spikemode,A=f.spikethickness,b=f.spikecolor||T,w=dm.getPxPosition(e,f),k,x;if(g.indexOf("toaxis")!==-1||g.indexOf("across")!==-1){if(g.indexOf("toaxis")!==-1&&(k=w,x=v),g.indexOf("across")!==-1){var E=f._counterDomainMin,M=f._counterDomainMax;f.anchor==="free"&&(E=Math.min(E,f.position),M=Math.max(M,f.position)),k=a.l+E*a.w,x=a.l+M*a.w}i.insert("line",":first-child").attr({x1:k,x2:x,y1:p,y2:p,"stroke-width":A,stroke:b,"stroke-dasharray":U0.dashStyle(f.spikedash,A)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:k,x2:x,y1:p,y2:p,"stroke-width":A+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}g.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:w+(f.side!=="right"?A:-A),cy:p,r:A,fill:b}).classed("spikeline",!0)}if(l){var d=t.vLinePoint,C,S;u=d&&d.xa,f=d&&d.ya;var P=u.spikesnap;P==="cursor"?(C=o.pointerX,S=o.pointerY):(C=u._offset+d.x,S=f._offset+d.y);var D=jae.readability(d.color,c)<1.5?Qf.contrast(c):d.color,z=u.spikemode,O=u.spikethickness,V=u.spikecolor||D,B=dm.getPxPosition(e,u),F,N;if(z.indexOf("toaxis")!==-1||z.indexOf("across")!==-1){if(z.indexOf("toaxis")!==-1&&(F=B,N=S),z.indexOf("across")!==-1){var Z=u._counterDomainMin,J=u._counterDomainMax;u.anchor==="free"&&(Z=Math.min(Z,u.position),J=Math.max(J,u.position)),F=a.t+(1-J)*a.h,N=a.t+(1-Z)*a.h}i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O,stroke:V,"stroke-dasharray":U0.dashStyle(u.spikedash,O)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}z.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:C,cy:B-(u.side!=="top"?O:-O),r:O,fill:V}).classed("spikeline",!0)}}}function Lot(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var n=r[i],a=e._hoverdata[i];if(n.curveNumber!==a.curveNumber||String(n.pointNumber)!==String(a.pointNumber)||String(n.pointNumbers)!==String(a.pointNumbers))return!0}return!1}function $ae(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function eoe(e,t){return np.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function Pot(e,t){for(var r=t.charAt(0),i=[],n=[],a=[],o=0;o<e.length;o++){var s=e[o];C2.traceIs(s.trace,"bar-like")||C2.traceIs(s.trace,"box-violin")?a.push(s):s.trace[r+"period"]?n.push(s):i.push(s)}return i.concat(n).concat(a)}function toe(e,t,r){var i=t[e+"a"],n=t[e+"Val"],a=t.cd[0];if(i.type==="category"||i.type==="multicategory")n=i._categoriesMap[n];else if(i.type==="date"){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];l===void 0&&(l=s[e]);var u=s[e+"End"];u===void 0&&(u=s[e]);var f=u-l;o==="end"?n+=f:o==="middle"&&(n+=f/2)}n=i.d2c(n)}return a&&a.t&&a.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(n+=a.t.dPos),n}function soe(e){return e.offsetTop+e.clientTop}function loe(e){return e.offsetLeft+e.clientLeft}function k2(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),n=i.left,a=i.top,o=n+i.width,s=a+i.height,l=Fu.apply3DTransform(r._invTransform)(n,a),u=Fu.apply3DTransform(r._invTransform)(o,s),f=l[0],c=l[1],h=u[0],v=u[1];return{x:f,y:c,width:h-f,height:v-c,top:Math.min(c,v),left:Math.min(f,h),right:Math.max(f,h),bottom:Math.max(c,v)}}});var BA=ne((Wtr,uoe)=>{"use strict";var Rot=Wt(),Dot=_i(),Iot=td().isUnifiedHover;uoe.exports=function(t,r,i,n){n=n||{};var a=r.legend;function o(s){n.font[s]||(n.font[s]=a?r.legend.font[s]:r.font[s])}r&&Iot(r.hovermode)&&(n.font||(n.font={}),o("size"),o("family"),o("color"),a?(n.bgcolor||(n.bgcolor=Dot.combine(r.legend.bgcolor,r.paper_bgcolor)),n.bordercolor||(n.bordercolor=r.legend.bordercolor)):n.bgcolor||(n.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),Rot.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}});var coe=ne((Xtr,foe)=>{"use strict";var Fot=Wt(),qot=BA(),zot=Pg();foe.exports=function(t,r){function i(n,a){return Fot.coerce(t,r,zot,n,a)}qot(t,r,i)}});var doe=ne((Ztr,voe)=>{"use strict";var hoe=Wt(),Oot=Kb(),Bot=BA();voe.exports=function(t,r,i,n){function a(s,l){return hoe.coerce(t,r,Oot,s,l)}var o=hoe.extendFlat({},n.hoverlabel);r.hovertemplate&&(o.namelength=-1),Bot(t,r,a,o)}});var zO=ne((jtr,poe)=>{"use strict";var Not=Wt(),Uot=Pg();poe.exports=function(t,r){function i(n,a){return r[n]!==void 0?r[n]:Not.coerce(t,r,Uot,n,a)}return i("clickmode"),i("hovermode")}});var moe=ne((Ktr,yoe)=>{"use strict";var goe=Wt(),Vot=Pg(),Hot=zO(),Got=BA();yoe.exports=function(t,r){function i(u,f){return goe.coerce(t,r,Vot,u,f)}var n=Hot(t,r);n&&(i("hoverdistance"),i("spikedistance"));var a=i("dragmode");a==="select"&&i("selectdirection");var o=r._has("mapbox"),s=r._has("geo"),l=r._basePlotModules.length;r.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)&&(r.dragmode="pan"),Got(t,r,i),goe.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var boe=ne((Jtr,_oe)=>{"use strict";var OO=Wt(),xoe=wi();_oe.exports=function(t){var r=t.calcdata,i=t._fullLayout;function n(u){return function(f){return OO.coerceHoverinfo({hoverinfo:f},{_module:u._module},i)}}for(var a=0;a<r.length;a++){var o=r[a],s=o[0].trace;if(!xoe.traceIs(s,"pie-like")){var l=xoe.traceIs(s,"2dMap")?Yot:OO.fillArray;l(s.hoverinfo,o,"hi",n(s)),s.hovertemplate&&l(s.hovertemplate,o,"ht"),s.hoverlabel&&(l(s.hoverlabel.bgcolor,o,"hbg"),l(s.hoverlabel.bordercolor,o,"hbc"),l(s.hoverlabel.font.size,o,"hts"),l(s.hoverlabel.font.color,o,"htc"),l(s.hoverlabel.font.family,o,"htf"),l(s.hoverlabel.namelength,o,"hnl"),l(s.hoverlabel.align,o,"hta"))}}};function Yot(e,t,r,i){i=i||OO.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var Toe=ne((Qtr,woe)=>{"use strict";var Wot=wi(),Xot=qO().hover;woe.exports=function(t,r,i){var n=Wot.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&Xot(t,r,i,!0);function a(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(n&&n.then?n.then(a):a(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var Ol=ne(($tr,Soe)=>{"use strict";var Zot=Ai(),i4=Wt(),jot=Hh(),NA=td(),Aoe=Pg(),Moe=qO();Soe.exports={moduleType:"component",name:"fx",constants:oA(),schema:{layout:Aoe},attributes:Kb(),layoutAttributes:Aoe,supplyLayoutGlobalDefaults:coe(),supplyDefaults:doe(),supplyLayoutDefaults:moe(),calc:boe(),getDistanceFunction:NA.getDistanceFunction,getClosest:NA.getClosest,inbox:NA.inbox,quadrature:NA.quadrature,appendArrayPointValue:NA.appendArrayPointValue,castHoverOption:Jot,castHoverinfo:Qot,hover:Moe.hover,unhover:jot.unhover,loneHover:Moe.loneHover,loneUnhover:Kot,click:Toe()};function Kot(e){var t=i4.isD3Selection(e)?e:Zot.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function Jot(e,t,r){return i4.castOption(e,t,"hoverlabel."+r)}function Qot(e,t,r){function i(n){return i4.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}return i4.castOption(e,r,"hoverinfo",i)}});var r0=ne(Ug=>{"use strict";Ug.selectMode=function(e){return e==="lasso"||e==="select"};Ug.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ug.openMode=function(e){return e==="drawline"||e==="drawopenpath"};Ug.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ug.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};Ug.selectingOrDrawing=function(e){return Ug.freeMode(e)||Ug.rectMode(e)}});var UA=ne((trr,Eoe)=>{"use strict";Eoe.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var a4=ne((rrr,koe)=>{"use strict";koe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var s4=ne((nrr,Coe)=>{"use strict";var o4=32;Coe.exports={CIRCLE_SIDES:o4,i000:0,i090:o4/4,i180:o4/2,i270:o4/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var l4=ne((irr,Poe)=>{"use strict";var $ot=Wt().strTranslate;function Loe(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function est(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function tst(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return Loe(e,r[t])}}function rst(e){return $ot(e.xaxis._offset,e.yaxis._offset)}Poe.exports={p2r:Loe,r2p:est,axValue:tst,getTransform:rst}});var pm=ne(Vg=>{"use strict";var nst=CA(),Ioe=s4(),L2=Ioe.CIRCLE_SIDES,BO=Ioe.SQRT2,Foe=l4(),Roe=Foe.p2r,Doe=Foe.r2p,ist=[0,3,4,5,6,1,2],ast=[0,3,4,1,2];Vg.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var n=e[i].length,a=0;a<n;a++){var o=e[i][a][0];if(o==="Z")r+="Z";else for(var s=e[i][a].length,l=0;l<s;l++){var u=l;o==="Q"||o==="S"?u=ast[l]:o==="C"&&(u=ist[l]),r+=e[i][a][u],l>0&&l<s-1&&(r+=",")}}return r};Vg.readPaths=function(e,t,r,i){var n=nst(e),a=[],o=-1,s=function(){o++,a[o]=[]},l,u=0,f=0,c,h,v=function(){c=u,h=f};v();for(var p=0;p<n.length;p++){var _=[],T,g,A,b,w=n[p][0],k=w;switch(w){case"M":s(),u=+n[p][1],f=+n[p][2],_.push([k,u,f]),v();break;case"Q":case"S":T=+n[p][1],A=+n[p][2],u=+n[p][3],f=+n[p][4],_.push([k,u,f,T,A]);break;case"C":T=+n[p][1],A=+n[p][2],g=+n[p][3],b=+n[p][4],u=+n[p][5],f=+n[p][6],_.push([k,u,f,T,A,g,b]);break;case"T":case"L":u=+n[p][1],f=+n[p][2],_.push([k,u,f]);break;case"H":k="L",u=+n[p][1],_.push([k,u,f]);break;case"V":k="L",f=+n[p][1],_.push([k,u,f]);break;case"A":k="L";var x=+n[p][1],E=+n[p][2];+n[p][4]||(x=-x,E=-E);var M=u-x,d=f;for(l=1;l<=L2/2;l++){var C=2*Math.PI*l/L2;_.push([k,M+x*Math.cos(C),d+E*Math.sin(C)])}break;case"Z":(u!==c||f!==h)&&(u=c,f=h,_.push([k,u,f]));break}for(var S=(r||{}).domain,P=t._fullLayout._size,D=r&&r.xsizemode==="pixel",z=r&&r.ysizemode==="pixel",O=i===!1,V=0;V<_.length;V++){for(l=0;l+2<7;l+=2){var B=_[V][l+1],F=_[V][l+2];B===void 0||F===void 0||(u=B,f=F,r&&(r.xaxis&&r.xaxis.p2r?(O&&(B-=r.xaxis._offset),D?B=Doe(r.xaxis,r.xanchor)+B:B=Roe(r.xaxis,B)):(O&&(B-=P.l),S?B=S.x[0]+B/P.w:B=B/P.w),r.yaxis&&r.yaxis.p2r?(O&&(F-=r.yaxis._offset),z?F=Doe(r.yaxis,r.yanchor)-F:F=Roe(r.yaxis,F)):(O&&(F-=P.t),S?F=S.y[1]-F/P.h:F=1-F/P.h)),_[V][l+1]=B,_[V][l+2]=F)}a[o].push(_[V].slice())}}return a};function VA(e,t){return Math.abs(e-t)<=1e-6}function u4(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Vg.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],n=e[3][r]-e[2][r];if(!VA(i,n))return!1;var a=e[0][r]-e[3][r],o=e[1][r]-e[2][r];if(!VA(a,o))return!1}return!VA(e[0][1],e[1][1])&&!VA(e[0][1],e[3][1])?!1:!!(u4(e[0],e[1])*u4(e[0],e[3]))};Vg.pointsOnEllipse=function(e){var t=e.length;if(t!==L2+1)return!1;t=L2;for(var r=0;r<t;r++){var i=(t*2-r)%t,n=(t/2+i)%t,a=(t/2+r)%t;if(!VA(u4(e[r],e[a]),u4(e[i],e[n])))return!1}return!0};Vg.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Vg.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),n=(i.x1+i.x0)/2,a=(i.y1+i.y0)/2,o=(i.x1-i.x0)/2,s=(i.y1-i.y0)/2;o||(o=s=s/BO),s||(s=o=o/BO);for(var l=[],u=0;u<L2;u++){var f=u*2*Math.PI/L2;l.push([n+o*Math.cos(f),a+s*Math.sin(f)])}return l};Vg.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,n=e.y1,a=i-t,o=n-r;t-=a,r-=o;var s=(t+i)/2,l=(r+n)/2,u=BO;return a*=u,o*=u,{x0:s-a,y0:l-o,x1:s+a,y1:l+o}};Vg.fixDatesForPaths=function(e,t,r){var i=t.type==="date",n=r.type==="date";if(!i&&!n)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)i&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),n&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"));return e}});var h4=ne((orr,Hoe)=>{"use strict";var Noe=r0(),ost=Noe.drawMode,sst=Noe.openMode,P2=s4(),qoe=P2.i000,zoe=P2.i090,Ooe=P2.i180,Boe=P2.i270,lst=P2.cos45,ust=P2.sin45,Uoe=l4(),f4=Uoe.p2r,gm=Uoe.r2p,fst=nm(),cst=fst.clearOutline,c4=pm(),hst=c4.readPaths,vst=c4.writePaths,dst=c4.ellipseOver,pst=c4.fixDatesForPaths;function gst(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,n=t.isActiveShape,a=t.dragmode,o=(i.layout||{}).shapes||[];if(!ost(a)&&n!==void 0){var s=i._fullLayout._activeShapeIndex;if(s<o.length)switch(i._fullLayout.shapes[s].type){case"rect":a="drawrect";break;case"circle":a="drawcircle";break;case"line":a="drawline";break;case"path":var l=o[s].path||"";l[l.length-1]==="Z"?a="drawclosedpath":a="drawopenpath";break}}var u=Voe(e,t,a);cst(i);for(var f=t.editHelpers,c=(f||{}).modifyItem,h=[],v=0;v<o.length;v++){var p=i._fullLayout.shapes[v];if(h[v]=p._input,n!==void 0&&v===i._fullLayout._activeShapeIndex){var _=u;switch(p.type){case"line":case"rect":case"circle":c("x0",_.x0),c("x1",_.x1),c("y0",_.y0),c("y1",_.y1);break;case"path":c("path",_.path);break}}}return n===void 0?(h.push(u),h):f?f.getUpdateObj():{}}}}function Voe(e,t,r){var i=e[0][0],n=t.gd,a=i.getAttribute("d"),o=n._fullLayout.newshape,s=t.plotinfo,l=t.isActiveShape,u=s.xaxis,f=s.yaxis,c=!!s.domain||!s.xaxis,h=!!s.domain||!s.yaxis,v=sst(r),p=hst(a,n,s,l),_={editable:!0,visible:o.visible,name:o.name,showlegend:o.showlegend,legend:o.legend,legendwidth:o.legendwidth,legendgroup:o.legendgroup,legendgrouptitle:{text:o.legendgrouptitle.text,font:o.legendgrouptitle.font},legendrank:o.legendrank,label:o.label,xref:c?"paper":u._id,yref:h?"paper":f._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};v||(_.fillcolor=o.fillcolor,_.fillrule=o.fillrule);var T;if(p.length===1&&(T=p[0]),T&&T.length===5&&r==="drawrect")_.type="rect",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[2][1],_.y1=T[2][2];else if(T&&r==="drawline")_.type="line",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[1][1],_.y1=T[1][2];else if(T&&r==="drawcircle"){_.type="circle";var g=T[qoe][1],A=T[zoe][1],b=T[Ooe][1],w=T[Boe][1],k=T[qoe][2],x=T[zoe][2],E=T[Ooe][2],M=T[Boe][2],d=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log"),C=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");d&&(g=gm(s.xaxis,g),A=gm(s.xaxis,A),b=gm(s.xaxis,b),w=gm(s.xaxis,w)),C&&(k=gm(s.yaxis,k),x=gm(s.yaxis,x),E=gm(s.yaxis,E),M=gm(s.yaxis,M));var S=(A+w)/2,P=(k+E)/2,D=(w-A+b-g)/2,z=(M-x+E-k)/2,O=dst({x0:S,y0:P,x1:S+D*lst,y1:P+z*ust});d&&(O.x0=f4(s.xaxis,O.x0),O.x1=f4(s.xaxis,O.x1)),C&&(O.y0=f4(s.yaxis,O.y0),O.y1=f4(s.yaxis,O.y1)),_.x0=O.x0,_.y0=O.y0,_.x1=O.x1,_.y1=O.y1}else _.type="path",u&&f&&pst(p,u,f),_.path=vst(p),T=null;return _}Hoe.exports={newShapes:gst,createShapeObj:Voe}});var UO=ne((srr,Goe)=>{"use strict";var yst=r0(),mst=yst.selectMode,xst=nm(),_st=xst.clearOutline,NO=pm(),bst=NO.readPaths,wst=NO.writePaths,Tst=NO.fixDatesForPaths;Goe.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var n=i.getAttribute("d"),a=r.gd,o=a._fullLayout.newselection,s=r.plotinfo,l=s.xaxis,u=s.yaxis,f=r.isActiveSelection,c=r.dragmode,h=(a.layout||{}).selections||[];if(!mst(c)&&f!==void 0){var v=a._fullLayout._activeSelectionIndex;if(v<h.length)switch(a._fullLayout.selections[v].type){case"rect":c="select";break;case"path":c="lasso";break}}var p=bst(n,a,s,f),_={xref:l._id,yref:u._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}},T;p.length===1&&(T=p[0]),T&&T.length===5&&c==="select"?(_.type="rect",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[2][1],_.y1=T[2][2]):(_.type="path",l&&u&&Tst(p,l,u),_.path=wst(p),T=null),_st(a);for(var g=r.editHelpers,A=(g||{}).modifyItem,b=[],w=0;w<h.length;w++){var k=a._fullLayout.selections[w];if(!k){b[w]=k;continue}if(b[w]=k._input,f!==void 0&&w===a._fullLayout._activeSelectionIndex){var x=_;switch(k.type){case"rect":A("x0",x.x0),A("x1",x.x1),A("y0",x.y0),A("y1",x.y1);break;case"path":A("path",x.path);break}}}return f===void 0?(b.push(_),b):g?g.getUpdateObj():{}}}}});var HA=ne((lrr,Yoe)=>{"use strict";Yoe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var ym=ne(pc=>{"use strict";var Ex=HA(),Woe=Wt(),v4=Xi();pc.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};pc.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};pc.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};pc.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};pc.extractPathCoords=function(e,t,r){var i=[],n=e.match(Ex.segmentRE);return n.forEach(function(a){var o=t[a.charAt(0)].drawn;if(o!==void 0){var s=a.substr(1).match(Ex.paramRE);if(!(!s||s.length<o)){var l=s[o],u=r?l:Woe.cleanNumber(l);i.push(u)}}}),i};pc.getDataToPixel=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){return t._length*(r?1-s:s)+t._offset};else{var o=pc.shapePositionToRange(t);a=function(s){return t._offset+t.r2p(o(s,!0))},t.type==="date"&&(a=pc.decodeDate(a))}else r?a=function(s){return n.t+n.h*(1-s)}:a=function(s){return n.l+n.w*s};return a};pc.getPixelToData=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){var l=(s-t._offset)/t._length;return r?1-l:l};else{var o=pc.rangeToShapePosition(t);a=function(s){return o(t.p2r(s-t._offset))}}else r?a=function(s){return 1-(s-n.t)/n.h}:a=function(s){return(s-n.l)/n.w};return a};pc.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};pc.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};pc.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};pc.getPathString=function(e,t){var r=t.type,i=v4.getRefType(t.xref),n=v4.getRefType(t.yref),a=v4.getFromId(e,t.xref),o=v4.getFromId(e,t.yref),s=e._fullLayout._size,l,u,f,c,h,v,p,_;if(a?i==="domain"?u=function(d){return a._offset+a._length*d}:(l=pc.shapePositionToRange(a),u=function(d){return a._offset+a.r2p(l(d,!0))}):u=function(d){return s.l+s.w*d},o?n==="domain"?c=function(d){return o._offset+o._length*(1-d)}:(f=pc.shapePositionToRange(o),c=function(d){return o._offset+o.r2p(f(d,!0))}):c=function(d){return s.t+s.h*(1-d)},r==="path")return a&&a.type==="date"&&(u=pc.decodeDate(u)),o&&o.type==="date"&&(c=pc.decodeDate(c)),Ast(t,u,c);if(t.xsizemode==="pixel"){var T=u(t.xanchor);h=T+t.x0,v=T+t.x1}else h=u(t.x0),v=u(t.x1);if(t.ysizemode==="pixel"){var g=c(t.yanchor);p=g-t.y0,_=g-t.y1}else p=c(t.y0),_=c(t.y1);if(r==="line")return"M"+h+","+p+"L"+v+","+_;if(r==="rect")return"M"+h+","+p+"H"+v+"V"+_+"H"+h+"Z";var A=(h+v)/2,b=(p+_)/2,w=Math.abs(A-h),k=Math.abs(b-p),x="A"+w+","+k,E=A+w+","+b,M=A+","+(b-k);return"M"+E+x+" 0 1,1 "+M+x+" 0 0,1 "+E+"Z"};function Ast(e,t,r){var i=e.path,n=e.xsizemode,a=e.ysizemode,o=e.xanchor,s=e.yanchor;return i.replace(Ex.segmentRE,function(l){var u=0,f=l.charAt(0),c=Ex.paramIsX[f],h=Ex.paramIsY[f],v=Ex.numParams[f],p=l.substr(1).replace(Ex.paramRE,function(_){return c[u]?n==="pixel"?_=t(o)+Number(_):_=t(_):h[u]&&(a==="pixel"?_=r(s)-Number(_):_=r(_)),u++,u>v&&(_="X"),_});return u>v&&(p=p.replace(/[\s,]*X.*/,""),Woe.log("Ignoring extra params in segment "+l)),f+p})}});var HO=ne((frr,Koe)=>{"use strict";var Mst=Wt(),R2=Xi(),Xoe=Es(),Zoe=aa(),Sst=pm().readPaths,VO=ym(),Est=VO.getPathString,joe=Hk(),kst=Tf().FROM_TL;Koe.exports=function(t,r,i,n){if(n.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var a;if(i.label.texttemplate){var o={};if(i.type!=="path"){var s=R2.getFromId(t,i.xref),l=R2.getFromId(t,i.yref);for(var u in joe){var f=joe[u](i,s,l);f!==void 0&&(o[u]=f)}}a=Mst.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,o)}else a=i.label.text;var c={"data-index":r},h=i.label.font,v={"data-notex":1},p=n.append("g").attr(c).classed("shape-label",!0),_=p.append("text").attr(v).classed("shape-label-text",!0).text(a),T,g,A,b;if(i.path){var w=Est(t,i),k=Sst(w,t);T=1/0,A=1/0,g=-1/0,b=-1/0;for(var x=0;x<k.length;x++)for(var E=0;E<k[x].length;E++)for(var M=k[x][E],d=1;d<M.length;d+=2){var C=M[d],S=M[d+1];T=Math.min(T,C),g=Math.max(g,C),A=Math.min(A,S),b=Math.max(b,S)}}else{var P=R2.getFromId(t,i.xref),D=R2.getRefType(i.xref),z=R2.getFromId(t,i.yref),O=R2.getRefType(i.yref),V=VO.getDataToPixel(t,P,!1,D),B=VO.getDataToPixel(t,z,!0,O);T=V(i.x0),g=V(i.x1),A=B(i.y0),b=B(i.y1)}var F=i.label.textangle;F==="auto"&&(i.type==="line"?F=Cst(T,A,g,b):F=0),_.call(function(fe){return fe.call(Zoe.font,h).attr({}),Xoe.convertToTspans(fe,t),fe});var N=Zoe.bBox(_.node()),Z=Lst(T,A,g,b,i,F,N),J=Z.textx,re=Z.texty,le=Z.xanchor;_.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[le],y:re,x:J,transform:"rotate("+F+","+J+","+re+")"}).call(Xoe.positionText,J,re)}};function Cst(e,t,r,i){var n,a;return a=Math.abs(r-e),r>=e?n=t-i:n=i-t,-180/Math.PI*Math.atan2(n,a)}function Lst(e,t,r,i,n,a,o){var s=n.label.textposition,l=n.label.textangle,u=n.label.padding,f=n.type,c=Math.PI/180*a,h=Math.sin(c),v=Math.cos(c),p=n.label.xanchor,_=n.label.yanchor,T,g,A,b;if(f==="line"){s==="start"?(T=e,g=t):s==="end"?(T=r,g=i):(T=(e+r)/2,g=(t+i)/2),p==="auto"&&(s==="start"?l==="auto"?r>e?p="left":r<e?p="right":p="center":r>e?p="right":r<e?p="left":p="center":s==="end"?l==="auto"?r>e?p="right":r<e?p="left":p="center":r>e?p="left":r<e?p="right":p="center":p="center");var w={left:1,center:0,right:-1},k={bottom:-1,middle:0,top:1};if(l==="auto"){var x=k[_];A=-u*h*x,b=u*v*x}else{var E=w[p],M=k[_];A=u*E,b=u*M}T=T+A,g=g+b}else A=u+3,s.indexOf("right")!==-1?(T=Math.max(e,r)-A,p==="auto"&&(p="right")):s.indexOf("left")!==-1?(T=Math.min(e,r)+A,p==="auto"&&(p="left")):(T=(e+r)/2,p==="auto"&&(p="center")),s.indexOf("top")!==-1?g=Math.min(t,i):s.indexOf("bottom")!==-1?g=Math.max(t,i):g=(t+i)/2,b=u,_==="bottom"?g=g-b:_==="top"&&(g=g+b);var d=kst[_],C=n.label.font.size,S=o.height,P=(S*d-C)*h,D=-(S*d-C)*v;return{textx:T+P,texty:g+D,xanchor:p}}});var g4=ne((crr,ise)=>{"use strict";var Pst=Wt(),Rst=Pst.strTranslate,Joe=Hh(),ese=r0(),Dst=ese.drawMode,tse=ese.selectMode,rse=wi(),Qoe=_i(),p4=s4(),Ist=p4.i000,Fst=p4.i090,qst=p4.i180,zst=p4.i270,Ost=nm(),nse=Ost.clearOutlineControllers,YO=pm(),d4=YO.pointsOnRectangle,GO=YO.pointsOnEllipse,Bst=YO.writePaths,Nst=h4().newShapes,Ust=h4().createShapeObj,Vst=UO(),Hst=HO();ise.exports=function e(t,r,i,n){n||(n=0);var a=i.gd;function o(){e(t,r,i,n++),(GO(t[0])||i.hasText)&&s({redrawing:!0})}function s(B){var F={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,F=Nst(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,F=Vst(r,i),a._fullLayout._reselect=!0),Object.keys(F).length&&rse.call((B||{}).redrawing?"relayout":"_guiRelayout",a,F)}var l=a._fullLayout,u=l._zoomlayer,f=i.dragmode,c=Dst(f),h=tse(f);(c||h)&&(a._fullLayout._outlining=!0),nse(a),r.attr("d",Bst(t));var v,p,_,T,g;if(!n&&(i.isActiveShape||i.isActiveSelection)){g=Gst([],t);var A=u.append("g").attr("class","outline-controllers");C(A),V()}if(c&&i.hasText){var b=u.select(".label-temp"),w=Ust(r,i,i.dragmode);Hst(a,"label-temp",w,b)}function k(B){_=+B.srcElement.getAttribute("data-i"),T=+B.srcElement.getAttribute("data-j"),v[_][T].moveFn=x}function x(B,F){if(t.length){var N=g[_][T][1],Z=g[_][T][2],J=t[_],re=J.length;if(d4(J)){var le=B,fe=F;if(i.isActiveSelection){var K=$oe(J,T);K[1]===J[T][1]?fe=0:le=0}for(var X=0;X<re;X++)if(X!==T){var ae=J[X];ae[1]===J[T][1]&&(ae[1]=N+le),ae[2]===J[T][2]&&(ae[2]=Z+fe)}if(J[T][1]=N+le,J[T][2]=Z+fe,!d4(J))for(var oe=0;oe<re;oe++)for(var _e=0;_e<J[oe].length;_e++)J[oe][_e]=g[_][oe][_e]}else J[T][1]=N+B,J[T][2]=Z+F;o()}}function E(){s()}function M(){if(t.length&&t[_]&&t[_].length){for(var B=[],F=0;F<t[_].length;F++)F!==T&&B.push(t[_][F]);B.length>1&&!(B.length===2&&B[1][0]==="Z")&&(T===0&&(B[0][0]="M"),t[_]=B,o(),s())}}function d(B,F){if(B===2){_=+F.srcElement.getAttribute("data-i"),T=+F.srcElement.getAttribute("data-j");var N=t[_];!d4(N)&&!GO(N)&&M()}}function C(B){v=[];for(var F=0;F<t.length;F++){var N=t[F],Z=d4(N),J=!Z&&GO(N);v[F]=[];for(var re=N.length,le=0;le<re;le++)if(N[le][0]!=="Z"&&!(J&&le!==Ist&&le!==Fst&&le!==qst&&le!==zst)){var fe=Z&&i.isActiveSelection,K;fe&&(K=$oe(N,le));var X=N[le][1],ae=N[le][2],oe=B.append(fe?"rect":"circle").attr("data-i",F).attr("data-j",le).style({fill:Qoe.background,stroke:Qoe.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(fe){var _e=K[1]-X,be=K[2]-ae,he=be?5:Math.max(Math.min(25,Math.abs(_e)-5),5),ie=_e?5:Math.max(Math.min(25,Math.abs(be)-5),5);oe.classed(be?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",he).attr("height",ie).attr("x",X-he/2).attr("y",ae-ie/2).attr("transform",Rst(_e/2,be/2))}else oe.classed("cursor-grab",!0).attr("r",5).attr("cx",X).attr("cy",ae);v[F][le]={element:oe.node(),gd:a,prepFn:k,doneFn:E,clickFn:d},Joe.init(v[F][le])}}}function S(B,F){if(t.length)for(var N=0;N<t.length;N++)for(var Z=0;Z<t[N].length;Z++)for(var J=0;J+2<t[N][Z].length;J+=2)t[N][Z][J+1]=g[N][Z][J+1]+B,t[N][Z][J+2]=g[N][Z][J+2]+F}function P(B,F){S(B,F),o()}function D(B){_=+B.srcElement.getAttribute("data-i"),_||(_=0),p[_].moveFn=P}function z(){s()}function O(B){B===2&&Yst(a)}function V(){if(p=[],!!t.length){var B=0;p[B]={element:r[0][0],gd:a,prepFn:D,doneFn:z,clickFn:O},Joe.init(p[B])}}};function Gst(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var n=0;n<i.length;n++){e[r][n]=[];for(var a=0;a<i[n].length;a++)e[r][n][a]=i[n][a]}}return e}function $oe(e,t){var r=e[t][1],i=e[t][2],n=e.length,a,o,s;return a=(t+1)%n,o=e[a][1],s=e[a][2],o===r&&s===i&&(a=(t+2)%n,o=e[a][1],s=e[a][2]),[a,o,s]}function Yst(e){if(tse(e._fullLayout.dragmode)){nse(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);delete e._fullLayout._activeSelectionIndex;var a=e._fullLayout.selections[t];e._fullLayout._deselect={xref:a.xref,yref:a.yref},rse.call("_guiRelayout",e,{selections:i})}}}});var _4=ne((hrr,dse)=>{"use strict";var Wst=Ai(),fse=wi(),ase=Wt(),D2=Xi(),Xst=pm().readPaths,Zst=g4(),m4=HO(),cse=nm().clearOutlineControllers,WO=_i(),ZO=aa(),jst=So().arrayEditor,ose=Hh(),sse=e0(),kx=HA(),id=ym(),XO=id.getPathString;dse.exports={draw:jO,drawOne:hse,eraseActiveShape:Qst,drawLabel:m4};function jO(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible===!0&&hse(e,n)}function y4(e){return!!e._fullLayout._outlining}function x4(e){return!e._context.edits.shapePosition}function hse(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=id.makeShapesOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input||i.visible!==!0)return;if(i.layer!=="below")o(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")o(e._fullLayout._shapeLowerLayer);else if(n._hadPlotinfo){var a=n.mainplotinfo||n;o(a.shapelayer)}else o(e._fullLayout._shapeLowerLayer);function o(s){var l=XO(e,i),u={"data-index":t,"fill-rule":i.fillrule,d:l},f=i.opacity,c=i.fillcolor,h=i.line.width?i.line.color:"rgba(0,0,0,0)",v=i.line.width,p=i.line.dash;!v&&i.editable===!0&&(v=5,p="solid");var _=l[l.length-1]!=="Z",T=x4(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;T&&(c=_?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,f=e._fullLayout.activeshape.opacity);var g=s.append("g").classed("shape-group",!0).attr({"data-index":t}),A=g.append("path").attr(u).style("opacity",f).call(WO.stroke,h).call(WO.fill,c).call(ZO.dashLine,p,v);vse(g,e,i),m4(e,t,i,g);var b;if((T||e._context.edits.shapePosition)&&(b=jst(e.layout,"shapes",i)),T){A.style({cursor:"move"});var w={element:A.node(),plotinfo:n,gd:e,editHelpers:b,hasText:i.label.text||i.label.texttemplate,isActiveShape:!0},k=Xst(l,e);Zst(k,A,w)}else e._context.edits.shapePosition?Kst(e,A,i,t,s,b):i.editable===!0&&A.style("pointer-events",_||WO.opacity(c)*f<=.5?"stroke":"all");A.node().addEventListener("click",function(){return Jst(e,A)})}}function vse(e,t,r){var i=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ZO.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function Kst(e,t,r,i,n,a){var o=10,s=10,l=r.xsizemode==="pixel",u=r.ysizemode==="pixel",f=r.type==="line",c=r.type==="path",h=a.modifyItem,v,p,_,T,g,A,b,w,k,x,E,M,d,C,S,P=Wst.select(t.node().parentNode),D=D2.getFromId(e,r.xref),z=D2.getRefType(r.xref),O=D2.getFromId(e,r.yref),V=D2.getRefType(r.yref),B=id.getDataToPixel(e,D,!1,z),F=id.getDataToPixel(e,O,!0,V),N=id.getPixelToData(e,D,!1,z),Z=id.getPixelToData(e,O,!0,V),J=fe(),re={element:J.node(),gd:e,prepFn:ae,doneFn:oe,clickFn:_e},le;ose.init(re),J.node().onmousemove=X;function fe(){return f?K():t}function K(){var Ae=10,Re=Math.max(r.line.width,Ae),ze=n.append("g").attr("data-index",i).attr("drag-helper",!0);ze.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var et={"fill-opacity":"0"},Le=Math.max(Re/2,Ae);return ze.append("circle").attr({"data-line-point":"start-point",cx:l?B(r.xanchor)+r.x0:B(r.x0),cy:u?F(r.yanchor)-r.y0:F(r.y0),r:Le}).style(et).classed("cursor-grab",!0),ze.append("circle").attr({"data-line-point":"end-point",cx:l?B(r.xanchor)+r.x1:B(r.x1),cy:u?F(r.yanchor)-r.y1:F(r.y1),r:Le}).style(et).classed("cursor-grab",!0),ze}function X(Ae){if(y4(e)){le=null;return}if(f)Ae.target.tagName==="path"?le="move":le=Ae.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=re.element.getBoundingClientRect(),ze=Re.right-Re.left,et=Re.bottom-Re.top,Le=Ae.clientX-Re.left,Ie=Ae.clientY-Re.top,dt=!c&&ze>o&&et>s&&!Ae.shiftKey?ose.getCursor(Le/ze,1-Ie/et):"move";sse(t,dt),le=dt.split("-")[0]}}function ae(Ae){y4(e)||(l&&(g=B(r.xanchor)),u&&(A=F(r.yanchor)),r.type==="path"?S=r.path:(v=l?r.x0:B(r.x0),p=u?r.y0:F(r.y0),_=l?r.x1:B(r.x1),T=u?r.y1:F(r.y1)),v<_?(k=v,d="x0",x=_,C="x1"):(k=_,d="x1",x=v,C="x0"),!u&&p<T||u&&p>T?(b=p,E="y0",w=T,M="y1"):(b=T,E="y1",w=p,M="y0"),X(Ae),ie(n,r),ue(t,r,e),re.moveFn=le==="move"?be:he,re.altKey=Ae.altKey)}function oe(){y4(e)||(sse(t),ye(n),vse(t,e,r),fse.call("_guiRelayout",e,a.getUpdateObj()))}function _e(){y4(e)||ye(n)}function be(Ae,Re){if(r.type==="path"){var ze=function(Ie){return Ie},et=ze,Le=ze;l?h("xanchor",r.xanchor=N(g+Ae)):(et=function(dt){return N(B(dt)+Ae)},D&&D.type==="date"&&(et=id.encodeDate(et))),u?h("yanchor",r.yanchor=Z(A+Re)):(Le=function(dt){return Z(F(dt)+Re)},O&&O.type==="date"&&(Le=id.encodeDate(Le))),h("path",r.path=lse(S,et,Le))}else l?h("xanchor",r.xanchor=N(g+Ae)):(h("x0",r.x0=N(v+Ae)),h("x1",r.x1=N(_+Ae))),u?h("yanchor",r.yanchor=Z(A+Re)):(h("y0",r.y0=Z(p+Re)),h("y1",r.y1=Z(T+Re)));t.attr("d",XO(e,r)),ie(n,r),m4(e,i,r,P)}function he(Ae,Re){if(c){var ze=function(Xe){return Xe},et=ze,Le=ze;l?h("xanchor",r.xanchor=N(g+Ae)):(et=function(ft){return N(B(ft)+Ae)},D&&D.type==="date"&&(et=id.encodeDate(et))),u?h("yanchor",r.yanchor=Z(A+Re)):(Le=function(ft){return Z(F(ft)+Re)},O&&O.type==="date"&&(Le=id.encodeDate(Le))),h("path",r.path=lse(S,et,Le))}else if(f){if(le==="resize-over-start-point"){var Ie=v+Ae,dt=u?p-Re:p+Re;h("x0",r.x0=l?Ie:N(Ie)),h("y0",r.y0=u?dt:Z(dt))}else if(le==="resize-over-end-point"){var ct=_+Ae,Ke=u?T-Re:T+Re;h("x1",r.x1=l?ct:N(ct)),h("y1",r.y1=u?Ke:Z(Ke))}}else{var _t=function(Xe){return le.indexOf(Xe)!==-1},zt=_t("n"),Et=_t("s"),Se=_t("w"),je=_t("e"),ht=zt?b+Re:b,nt=Et?w+Re:w,lt=Se?k+Ae:k,rt=je?x+Ae:x;u&&(zt&&(ht=b-Re),Et&&(nt=w-Re)),(!u&&nt-ht>s||u&&ht-nt>s)&&(h(E,r[E]=u?ht:Z(ht)),h(M,r[M]=u?nt:Z(nt))),rt-lt>o&&(h(d,r[d]=l?lt:N(lt)),h(C,r[C]=l?rt:N(rt)))}t.attr("d",XO(e,r)),ie(n,r),m4(e,i,r,P)}function ie(Ae,Re){(l||u)&&ze();function ze(){var et=Re.type!=="path",Le=Ae.selectAll(".visual-cue").data([0]),Ie=1;Le.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ie}).classed("visual-cue",!0);var dt=B(l?Re.xanchor:ase.midRange(et?[Re.x0,Re.x1]:id.extractPathCoords(Re.path,kx.paramIsX))),ct=F(u?Re.yanchor:ase.midRange(et?[Re.y0,Re.y1]:id.extractPathCoords(Re.path,kx.paramIsY)));if(dt=id.roundPositionForSharpStrokeRendering(dt,Ie),ct=id.roundPositionForSharpStrokeRendering(ct,Ie),l&&u){var Ke="M"+(dt-1-Ie)+","+(ct-1-Ie)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Le.attr("d",Ke)}else if(l){var _t="M"+(dt-1-Ie)+","+(ct-9-Ie)+"v18 h2 v-18 Z";Le.attr("d",_t)}else{var zt="M"+(dt-9-Ie)+","+(ct-1-Ie)+"h18 v2 h-18 Z";Le.attr("d",zt)}}}function ye(Ae){Ae.selectAll(".visual-cue").remove()}function ue(Ae,Re,ze){var et=Re.xref,Le=Re.yref,Ie=D2.getFromId(ze,et),dt=D2.getFromId(ze,Le),ct="";et!=="paper"&&!Ie.autorange&&(ct+=et),Le!=="paper"&&!dt.autorange&&(ct+=Le),ZO.setClipUrl(Ae,ct?"clip"+ze._fullLayout._uid+ct:null,ze)}}function lse(e,t,r){return e.replace(kx.segmentRE,function(i){var n=0,a=i.charAt(0),o=kx.paramIsX[a],s=kx.paramIsY[a],l=kx.numParams[a],u=i.substr(1).replace(kx.paramRE,function(f){return n>=l||(o[n]?f=t(f):s[n]&&(f=r(f)),n++),f});return a+u})}function Jst(e,t){if(x4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){use(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=use,jO(e)}}}function use(e){if(x4(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(cse(e),delete e._fullLayout._activeShapeIndex,jO(e))}}function Qst(e){if(x4(e)){cse(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);return delete e._fullLayout._activeShapeIndex,fse.call("_guiRelayout",e,{shapes:i})}}}});var $O=ne((vrr,_se)=>{"use strict";var ip=wi(),pse=Zs(),gse=zl(),Go=a4(),$st=_4().eraseActiveShape,I2=Wt(),wo=I2._,Yo=_se.exports={};Yo.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?wo(e,"Download plot as a png"):wo(e,"Download plot")},icon:Go.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};I2.notifier(wo(e,"Taking snapshot - this may take a few seconds"),"long"),r.format!=="svg"&&I2.isIE()&&(I2.notifier(wo(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),ip.call("downloadImage",e,r).then(function(i){I2.notifier(wo(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){I2.notifier(wo(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Yo.sendDataToCloud={name:"sendDataToCloud",title:function(e){return wo(e,"Edit in Chart Studio")},icon:Go.disk,click:function(e){pse.sendDataToCloud(e)}};Yo.editInChartStudio={name:"editInChartStudio",title:function(e){return wo(e,"Edit in Chart Studio")},icon:Go.pencil,click:function(e){pse.sendDataToCloud(e)}};Yo.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return wo(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Go.zoombox,click:Yh};Yo.pan2d={name:"pan2d",_cat:"pan",title:function(e){return wo(e,"Pan")},attr:"dragmode",val:"pan",icon:Go.pan,click:Yh};Yo.select2d={name:"select2d",_cat:"select",title:function(e){return wo(e,"Box Select")},attr:"dragmode",val:"select",icon:Go.selectbox,click:Yh};Yo.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return wo(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Go.lasso,click:Yh};Yo.drawclosedpath={name:"drawclosedpath",title:function(e){return wo(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Go.drawclosedpath,click:Yh};Yo.drawopenpath={name:"drawopenpath",title:function(e){return wo(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Go.drawopenpath,click:Yh};Yo.drawline={name:"drawline",title:function(e){return wo(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Go.drawline,click:Yh};Yo.drawrect={name:"drawrect",title:function(e){return wo(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Go.drawrect,click:Yh};Yo.drawcircle={name:"drawcircle",title:function(e){return wo(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Go.drawcircle,click:Yh};Yo.eraseshape={name:"eraseshape",title:function(e){return wo(e,"Erase active shape")},icon:Go.eraseshape,click:$st};Yo.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:Yh};Yo.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:Yh};Yo.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return wo(e,"Autoscale")},attr:"zoom",val:"auto",icon:Go.autoscale,click:Yh};Yo.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return wo(e,"Reset axes")},attr:"zoom",val:"reset",icon:Go.home,click:Yh};Yo.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return wo(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Go.tooltip_basic,gravity:"ne",click:Yh};Yo.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return wo(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Go.tooltip_compare,gravity:"ne",click:Yh};function Yh(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o={},s=gse.list(e,null,!0),l=a._cartesianSpikesEnabled,u,f;if(i==="zoom"){var c=n==="in"?.5:2,h=(1+c)/2,v=(1-c)/2,p;for(f=0;f<s.length;f++)if(u=s[f],!u.fixedrange)if(p=u._name,n==="auto")o[p+".autorange"]=!0;else if(n==="reset")u._rangeInitial0===void 0&&u._rangeInitial1===void 0?o[p+".autorange"]=!0:u._rangeInitial0===void 0?(o[p+".autorange"]=u._autorangeInitial,o[p+".range"]=[null,u._rangeInitial1]):u._rangeInitial1===void 0?(o[p+".range"]=[u._rangeInitial0,null],o[p+".autorange"]=u._autorangeInitial):o[p+".range"]=[u._rangeInitial0,u._rangeInitial1],u._showSpikeInitial!==void 0&&(o[p+".showspikes"]=u._showSpikeInitial,l==="on"&&!u._showSpikeInitial&&(l="off"));else{var _=[u.r2l(u.range[0]),u.r2l(u.range[1])],T=[h*_[0]+v*_[1],h*_[1]+v*_[0]];o[p+".range[0]"]=u.l2r(T[0]),o[p+".range[1]"]=u.l2r(T[1])}}else i==="hovermode"&&(n==="x"||n==="y")&&(n=a._isHoriz?"y":"x",r.setAttribute("data-val",n)),o[i]=n;a._cartesianSpikesEnabled=l,ip.call("_guiRelayout",e,o)}Yo.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return wo(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Go.zoombox,click:w4};Yo.pan3d={name:"pan3d",_cat:"pan",title:function(e){return wo(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Go.pan,click:w4};Yo.orbitRotation={name:"orbitRotation",title:function(e){return wo(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Go["3d_rotate"],click:w4};Yo.tableRotation={name:"tableRotation",title:function(e){return wo(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Go["z-axis"],click:w4};function w4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},s=i.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=n;var u=n==="pan"?n:"zoom";o.dragmode=u,ip.call("_guiRelayout",e,o)}Yo.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return wo(e,"Reset camera to default")},attr:"resetDefault",icon:Go.home,click:KO};Yo.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return wo(e,"Reset camera to last save")},attr:"resetLastSave",icon:Go.movie,click:KO};function KO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=i==="resetLastSave",a=i==="resetDefault",o=e._fullLayout,s=o._subplots.gl3d||[],l={},u=0;u<s.length;u++){var f=s[u],c=f+".camera",h=f+".aspectratio",v=f+".aspectmode",p=o[f]._scene,_;n?(l[c+".up"]=p.viewInitial.up,l[c+".eye"]=p.viewInitial.eye,l[c+".center"]=p.viewInitial.center,_=!0):a&&(l[c+".up"]=null,l[c+".eye"]=null,l[c+".center"]=null,_=!0),_&&(l[h+".x"]=p.viewInitial.aspectratio.x,l[h+".y"]=p.viewInitial.aspectratio.y,l[h+".z"]=p.viewInitial.aspectratio.z,l[v]=p.viewInitial.aspectmode)}ip.call("_guiRelayout",e,l)}Yo.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:elt};function yse(e,t){var r=t.currentTarget,i=r._previousVal,n=e._fullLayout,a=n._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(i)l=i,r._previousVal=null;else{for(var u=0;u<a.length;u++){var f=a[u],c=n[f],h=f+".hovermode";s[h]=c.hovermode,l[h]=!1;for(var v=0;v<3;v++){var p=o[v],_=f+"."+p+".showspikes";l[_]=!1,s[_]=c[p].showspikes}}r._previousVal=s}return l}function elt(e,t){var r=yse(e,t);ip.call("_guiRelayout",e,r)}Yo.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:JO};Yo.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:JO};Yo.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return wo(e,"Reset")},attr:"reset",val:null,icon:Go.autoscale,click:JO};Yo.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:QO};function JO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],u=a[l];if(i==="zoom"){var f=u.projection.scale,c=n==="in"?2*f:.5*f;ip.call("_guiRelayout",e,l+".projection.scale",c)}}i==="reset"&&b4(e,"geo")}Yo.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:QO};Yo.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Go.tooltip_basic,gravity:"ne",click:QO};function mse(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function QO(e){var t=mse(e);ip.call("_guiRelayout",e,"hovermode",t)}Yo.resetViewSankey={name:"resetSankeyGroup",title:function(e){return wo(e,"Reset view")},icon:Go.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}ip.call("restyle",e,t)}};Yo.toggleHover={name:"toggleHover",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:function(e,t){var r=yse(e,t);r.hovermode=mse(e),ip.call("_guiRelayout",e,r)}};Yo.resetViews={name:"resetViews",title:function(e){return wo(e,"Reset views")},icon:Go.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Yh(e,t),r.setAttribute("data-attr","resetLastSave"),KO(e,t),b4(e,"geo"),b4(e,"mapbox")}};Yo.toggleSpikelines={name:"toggleSpikelines",title:function(e){return wo(e,"Toggle Spike Lines")},icon:Go.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",ip.call("_guiRelayout",e,tlt(e))}};function tlt(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=gse.list(e,null,!0),n={},a=0;a<i.length;a++){var o=i[a];n[o._name+".showspikes"]=r?!0:o._showSpikeInitial}return n}Yo.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return wo(e,"Reset view")},attr:"reset",icon:Go.home,click:function(e){b4(e,"mapbox")}};Yo.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:xse};Yo.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:xse};function xse(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-val"),n=e._fullLayout,a=n._subplots.mapbox||[],o=1.05,s={},l=0;l<a.length;l++){var u=a[l],f=n[u].zoom,c=i==="in"?o*f:f/o;s[u+".zoom"]=c}ip.call("_guiRelayout",e,s)}function b4(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],n={},a=0;a<i.length;a++)for(var o=i[a],s=r[o]._subplot,l=s.viewInitial,u=Object.keys(l),f=0;f<u.length;f++){var c=u[f];n[o+"."+c]=l[c]}ip.call("_guiRelayout",e,n)}});var e7=ne((drr,Ase)=>{"use strict";var bse=$O(),rlt=Object.keys(bse),wse=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],Tse=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(wse),F2=[],nlt=function(e){if(Tse.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();F2.indexOf(t)===-1&&F2.push(t),F2.indexOf(r)===-1&&F2.push(r)}};rlt.forEach(function(e){nlt(bse[e])});F2.sort();Ase.exports={DRAW_MODES:wse,backButtons:Tse,foreButtons:F2}});var t7=ne((grr,Mse)=>{"use strict";var prr=e7();Mse.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var Ese=ne((yrr,Sse)=>{"use strict";var ilt=Wt(),GA=_i(),alt=So(),olt=t7();Sse.exports=function(t,r){var i=t.modebar||{},n=alt.newContainer(r,"modebar");function a(s,l){return ilt.coerce(i,n,olt,s,l)}a("orientation"),a("bgcolor",GA.addOpacity(r.paper_bgcolor,.5));var o=GA.contrast(GA.rgb(r.modebar.bgcolor));a("color",GA.addOpacity(o,.3)),a("activecolor",GA.addOpacity(o,.7)),a("uirevision",r.uirevision),a("add"),a("remove")}});var Pse=ne((mrr,Lse)=>{"use strict";var r7=Ai(),slt=la(),Hg=Wt(),kse=a4(),llt=_k().version,ult=new DOMParser;function Cse(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var V0=Cse.prototype;V0.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,n="modebar-"+i._uid;this.element.setAttribute("id",n),this._uid=n,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var a=i.modebar,o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";Hg.deleteRelatedStyleRule(n),Hg.addRelatedStyleRule(n,o+"#"+n+" .modebar-group","background-color: "+a.bgcolor),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+a.color),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+a.activecolor),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==r.displaylogo,u=this.locale!==r.locale;if(this.locale=r.locale,(s||l||u)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var f=this.getLogo();r.watermark&&(f.className=f.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()};V0.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(n){var a=n.name;if(!a)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(a)!==-1)throw new Error("button name '"+a+"' is taken");t.buttonsNames.push(a);var o=t.createButton(n);t.buttonElements.push(o),i.appendChild(o)}),t.element.appendChild(i)})};V0.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};V0.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var n=e.val;n!==void 0&&(typeof n=="function"&&(n=n(this.graphInfo)),r.setAttribute("data-val",n));var a=e.click;if(typeof a!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(s){e.click(t.graphInfo,s),t.updateActiveButton(s.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&r7.select(r).classed("active",!0);var o=e.icon;return typeof o=="function"?r.appendChild(o()):r.appendChild(this.createIcon(o||kse.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};V0.createIcon=function(e){var t=slt(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):e.ascent!==void 0&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(n)}if(e.svg){var a=ult.parseFromString(e.svg,"application/xml");i=a.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};V0.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var n=i.getAttribute("data-val")||!0,a=i.getAttribute("data-attr"),o=i.getAttribute("data-toggle")==="true",s=r7.select(i);if(o)a===r&&s.classed("active",!s.classed("active"));else{var l=a===null?a:Hg.nestedProperty(t,a).get();s.classed("active",l===n)}})};V0.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function flt(e){return e+" (v"+llt+")"}V0.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",flt(Hg._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(kse.newplotlylogo)),e.appendChild(t),e};V0.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};V0.destroy=function(){Hg.removeElement(this.container.querySelector(".modebar")),Hg.deleteRelatedStyleRule(this._uid)};function clt(e,t){var r=e._fullLayout,i=new Cse({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&r7.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}Lse.exports=clt});var Ise=ne((xrr,Dse)=>{"use strict";var hlt=zl(),Rse=js(),n7=wi(),vlt=td().isUnifiedHover,dlt=Pse(),T4=$O(),plt=e7().DRAW_MODES,glt=Wt().extendDeep;Dse.exports=function(t){var r=t._fullLayout,i=t._context,n=r._modeBar;if(!i.displayModeBar&&!i.watermark){n&&(n.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=i.modeBarButtons,o;Array.isArray(a)&&a.length?o=wlt(a):!i.displayModeBar&&i.watermark?o=[]:o=ylt(t),n?n.update(t,o):r._modeBar=dlt(t,o)};function ylt(e){var t=e._fullLayout,r=e._fullData,i=e._context;function n(F,N){if(typeof N=="string"){if(N.toLowerCase()===F.toLowerCase())return!0}else{var Z=N.name,J=N._cat||N.name;if(Z===F||J===F.toLowerCase())return!0}return!1}var a=t.modebar.add;typeof a=="string"&&(a=[a]);var o=t.modebar.remove;typeof o=="string"&&(o=[o]);var s=i.modeBarButtonsToAdd.concat(a.filter(function(F){for(var N=0;N<i.modeBarButtonsToRemove.length;N++)if(n(F,i.modeBarButtonsToRemove[N]))return!1;return!0})),l=i.modeBarButtonsToRemove.concat(o.filter(function(F){for(var N=0;N<i.modeBarButtonsToAdd.length;N++)if(n(F,i.modeBarButtonsToAdd[N]))return!1;return!0})),u=t._has("cartesian"),f=t._has("gl3d"),c=t._has("geo"),h=t._has("pie"),v=t._has("funnelarea"),p=t._has("gl2d"),_=t._has("ternary"),T=t._has("mapbox"),g=t._has("polar"),A=t._has("smith"),b=t._has("sankey"),w=mlt(t),k=vlt(t.hovermode),x=[];function E(F){if(F.length){for(var N=[],Z=0;Z<F.length;Z++){for(var J=F[Z],re=T4[J],le=re.name.toLowerCase(),fe=(re._cat||re.name).toLowerCase(),K=!1,X=0;X<l.length;X++){var ae=l[X].toLowerCase();if(ae===le||ae===fe){K=!0;break}}K||N.push(T4[J])}x.push(N)}}var M=["toImage"];i.showEditInChartStudio?M.push("editInChartStudio"):i.showSendToCloud&&M.push("sendDataToCloud"),E(M);var d=[],C=[],S=[],P=[];(u||p||h||v||_)+c+f+T+g+A>1?(C=["toggleHover"],S=["resetViews"]):c?(d=["zoomInGeo","zoomOutGeo"],C=["hoverClosestGeo"],S=["resetGeo"]):f?(C=["hoverClosest3d"],S=["resetCameraDefault3d","resetCameraLastSave3d"]):T?(d=["zoomInMapbox","zoomOutMapbox"],C=["toggleHover"],S=["resetViewMapbox"]):p?C=["hoverClosestGl2d"]:h?C=["hoverClosestPie"]:b?(C=["hoverClosestCartesian","hoverCompareCartesian"],S=["resetViewSankey"]):C=["toggleHover"],u&&(C=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(_lt(r)||k)&&(C=[]),(u||p)&&!w&&(d=["zoomIn2d","zoomOut2d","autoScale2d"],S[0]!=="resetViews"&&(S=["resetScale2d"])),f?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||p)&&!w||_?P=["zoom2d","pan2d"]:T||c?P=["pan2d"]:g&&(P=["zoom2d"]),xlt(r)&&P.push("select2d","lasso2d");var D=[],z=function(F){D.indexOf(F)===-1&&C.indexOf(F)!==-1&&D.push(F)};if(Array.isArray(s)){for(var O=[],V=0;V<s.length;V++){var B=s[V];typeof B=="string"?(B=B.toLowerCase(),plt.indexOf(B)!==-1?(t._has("mapbox")||t._has("cartesian"))&&P.push(B):B==="togglespikelines"?z("toggleSpikelines"):B==="togglehover"?z("toggleHover"):B==="hovercompare"?z("hoverCompareCartesian"):B==="hoverclosest"?(z("hoverClosestCartesian"),z("hoverClosestGeo"),z("hoverClosest3d"),z("hoverClosestGl2d"),z("hoverClosestPie")):B==="v1hovermode"&&(z("toggleHover"),z("hoverClosestCartesian"),z("hoverCompareCartesian"),z("hoverClosestGeo"),z("hoverClosest3d"),z("hoverClosestGl2d"),z("hoverClosestPie"))):O.push(B)}s=O}return E(P),E(d.concat(S)),E(D),blt(x,s)}function mlt(e){for(var t=hlt.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function xlt(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(n7.traceIs(i,"scatter-like")?(Rse.hasMarkers(i)||Rse.hasText(i))&&(t=!0):n7.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function _lt(e){for(var t=0;t<e.length;t++)if(!n7.traceIs(e[t],"noHover"))return!1;return!0}function blt(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function wlt(e){for(var t=glt([],e),r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];if(typeof a=="string")if(T4[a]!==void 0)t[r][n]=T4[a];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var i7=ne((_rr,Fse)=>{"use strict";Fse.exports={moduleType:"component",name:"modebar",layoutAttributes:t7(),supplyLayoutDefaults:Ese(),manage:Ise()}});var a7=ne((brr,qse)=>{"use strict";var Tlt=Tf().FROM_BL;qse.exports=function(t,r,i){i===void 0&&(i=Tlt[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=n[0]+(n[1]-n[0])*i;t.range=t._input.range=[t.l2r(a+(n[0]-a)*r),t.l2r(a+(n[1]-a)*r)],t.setScale()}});var mm=ne(YA=>{"use strict";var Cx=Wt(),o7=Cd(),n0=zl().id2name,Alt=dc(),zse=a7(),Mlt=B0(),Slt=$a().ALMOST_EQUAL,Elt=Tf().FROM_BL;YA.handleDefaults=function(e,t,r){var i=r.axIds,n=r.axHasImage,a=t._axisConstraintGroups=[],o=t._axisMatchGroups=[],s,l,u,f,c,h,v,p;for(s=0;s<i.length;s++)f=n0(i[s]),c=e[f],h=t[f],klt(c,h,{axIds:i,layoutOut:t,hasImage:n[f]});function _(M,d){for(s=0;s<M.length;s++){l=M[s];for(u in l)t[n0(u)][d]=l}}for(_(o,"_matchGroup"),s=0;s<a.length;s++){l=a[s];for(u in l)if(h=t[n0(u)],h.fixedrange){for(var T in l){var g=n0(T);(e[g]||{}).fixedrange===!1&&Cx.warn("fixedrange was specified as false for axis "+g+" but was overridden because another axis in its constraint group has fixedrange true"),t[g].fixedrange=!0}break}}for(s=0;s<a.length;){l=a[s];for(u in l){h=t[n0(u)],h._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(l).length&&(a.splice(s,1),s--);break}s++}_(a,"_constraintGroup");var A=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],b=!1,w=!1;function k(){p=h[v],v==="rangebreaks"&&(w=h._hasDayOfWeekBreaks)}for(s=0;s<o.length;s++){l=o[s];for(var x=0;x<A.length;x++){v=A[x],p=null;var E;for(u in l)if(f=n0(u),c=e[f],h=t[f],v in h){if(!h.matches&&(E=h,v in c)){k();break}p===null&&v in c&&k()}if(v==="range"&&p&&c.range&&c.range.length===2&&c.range[0]!==null&&c.range[1]!==null&&(b=!0),v==="autorange"&&p===null&&b&&(p=!1),p===null&&v in E&&(p=E[v]),p!==null)for(u in l)h=t[n0(u)],h[v]=v==="range"?p.slice():p,v==="rangebreaks"&&(h._hasDayOfWeekBreaks=w,Mlt(h,t))}}};function klt(e,t,r){var i=r.axIds,n=r.layoutOut,a=r.hasImage,o=n._axisConstraintGroups,s=n._axisMatchGroups,l=t._id,u=l.charAt(0),f=((n._splomAxes||{})[u]||{})[l]||{},c=t._id,h=c.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function v(P,D){return Cx.coerce(e,t,Alt,P,D)}v("constrain",a?"domain":"range"),Cx.coerce(e,t,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var p=t.type,_,T,g=[];for(_=0;_<i.length;_++)if(T=i[_],T!==c){var A=n[n0(T)];A.type===p&&g.push(T)}var b=Nse(o,c);if(b){var w=[];for(_=0;_<g.length;_++)T=g[_],b[T]||w.push(T);g=w}var k=g.length,x,E;k&&(e.matches||f.matches)&&(x=Cx.coerce(e,t,{matches:{valType:"enumerated",values:g,dflt:g.indexOf(f.matches)!==-1?f.matches:void 0}},"matches"));var M=a&&!h?t.anchor:void 0;if(k&&!x&&(e.scaleanchor||M)&&(E=Cx.coerce(e,t,{scaleanchor:{valType:"enumerated",values:g.concat([!1])}},"scaleanchor",M)),x){t._matchGroup=s7(s,c,x,1);var d=n[n0(x)],C=Ose(n,t)/Ose(n,d);h!==(x.charAt(0)==="x")&&(C=(h?"x":"y")+C),s7(o,c,x,C)}else e.matches&&i.indexOf(e.matches)!==-1&&Cx.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(E){var S=v("scaleratio");S||(S=t.scaleratio=1),s7(o,c,E,S)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Cx.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function Ose(e,t){var r=t.domain;return r||(r=e[n0(t.overlaying)].domain),r[1]-r[0]}function Nse(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function s7(e,t,r,i){var n,a,o,s,l,u=Nse(e,t);u===null?(u={},u[t]=1,l=e.length,e.push(u)):l=e.indexOf(u);var f=Object.keys(u);for(n=0;n<e.length;n++)if(o=e[n],n!==l&&o[r]){var c=o[r];for(a=0;a<f.length;a++)s=f[a],o[s]=l7(c,l7(i,u[s]));e.splice(l,1);return}if(i!==1)for(a=0;a<f.length;a++){var h=f[a];u[h]=l7(i,u[h])}u[r]=1}function l7(e,t){var r="",i="",n,a;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],n=r.length,e=+e.substr(n)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],a=i.length,t=+t.substr(a));var o=e*t;return!n&&!a?o:!n||!a||r.charAt(0)===i.charAt(0)?r+i+e*t:n===a?o:(n>a?r.substr(a):i.substr(n))+o}function Clt(e,t){for(var r=t._size,i=r.h/r.w,n={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if(typeof l=="string"){var u=l.match(/^[xy]*/)[0],f=u.length;l=+l.substr(f);for(var c=u.charAt(0)==="y"?i:1/i,h=0;h<f;h++)l*=c}n[s]=l}return n}YA.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],n,a,o,s,l,u,f,c;for(n=0;n<i.length;n++){o=Clt(i[n],r);var h=Object.keys(o),v=1/0,p=0,_=1/0,T={},g={},A=!1;for(a=0;a<h.length;a++)s=h[a],g[s]=l=r[n0(s)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),T[s]=u=Math.abs(l._m)/o[s],v=Math.min(v,u),(l.constrain==="domain"||!l._constraintShrinkable)&&(_=Math.min(_,u)),delete l._constraintShrinkable,p=Math.max(p,u),l.constrain==="domain"&&(A=!0);if(!(v>Slt*p&&!A)){for(a=0;a<h.length;a++)if(s=h[a],u=T[s],l=g[s],f=l.constrain,u!==_||f==="domain")if(c=u/_,f==="range")zse(l,c);else{var b=l._inputDomain,w=(l.domain[1]-l.domain[0])/(b[1]-b[0]),k=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if(c/=w,c*k<1){l.domain=l._input.domain=b.slice(),zse(l,c);continue}if(k<1&&(l.range=l._input.range=l._inputRange.slice(),c*=k),l.autorange){var x=l.r2l(l.range[0]),E=l.r2l(l.range[1]),M=(x+E)/2,d=M,C=M,S=Math.abs(E-M),P=M-S*c*1.0001,D=M+S*c*1.0001,z=o7.makePadFn(r,l,0),O=o7.makePadFn(r,l,1);Bse(l,c);var V=Math.abs(l._m),B=o7.concatExtremes(t,l),F=B.min,N=B.max,Z,J;for(J=0;J<F.length;J++)Z=F[J].val-z(F[J])/V,Z>P&&Z<d&&(d=Z);for(J=0;J<N.length;J++)Z=N[J].val+O(N[J])/V,Z<D&&Z>C&&(C=Z);var re=(C-d)/(2*S);c/=re,d=l.l2r(d),C=l.l2r(C),l.range=l._input.range=x<E?[d,C]:[C,d]}Bse(l,c)}}}};YA.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,n=0;n<i.length;n++){var a=i[n];if(a[r])return"g"+n}return r};YA.clean=function(t,r){if(r._inputDomain){for(var i=!1,n=r._id,a=t._fullLayout._axisConstraintGroups,o=0;o<a.length;o++)if(a[o][n]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function Bse(e,t){var r=e._inputDomain,i=Elt[e.constraintoward],n=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t],e.setScale()}});var ZA=ne($f=>{"use strict";var Yse=Ai(),Wh=wi(),Pd=Zs(),ap=Wt(),Use=Es(),u7=UA(),WA=_i(),q2=aa(),Llt=yx(),Wse=i7(),XA=Xi(),Gg=Tf(),Xse=mm(),Plt=Xse.enforce,Rlt=Xse.clean,Vse=Cd().doAutoRange,Zse="start",Dlt="middle",jse="end";$f.layoutStyles=function(e){return ap.syncOrAsync([Pd.doAutoMargin,Flt],e)};function Ilt(e,t,r){for(var i=0;i<r.length;i++){var n=r[i][0],a=r[i][1];if(!(n[0]>=e[1]||n[1]<=e[0])&&a[0]<t[1]&&a[1]>t[0])return!0}return!1}function Flt(e){var t=e._fullLayout,r=t._size,i=r.p,n=XA.list(e,"",!0),a,o,s,l,u,f;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(q2.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),$f.drawMainTitle(e),Wse.manage(e),!t._has("cartesian"))return Pd.previousPromises(e);function c(he,ie,ye){var ue=he._lw/2;if(he._id.charAt(0)==="x"){if(ie){if(ye==="top")return ie._offset-i-ue}else return r.t+r.h*(1-(he.position||0))+ue%1;return ie._offset+ie._length+i+ue}if(ie){if(ye==="right")return ie._offset+ie._length+i+ue}else return r.l+r.w*(he.position||0)+ue%1;return ie._offset-i-ue}for(a=0;a<n.length;a++){l=n[a];var h=l._anchorAxis;l._linepositions={},l._lw=q2.crispRound(e,l.linewidth,1),l._mainLinePosition=c(l,h,l.side),l._mainMirrorPosition=l.mirror&&h?c(l,h,Gg.OPPOSITE_SIDE[l.side]):null}var v=[],p=[],_=[],T=WA.opacity(t.paper_bgcolor)===1&&WA.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots)if(s=t._plots[o],s.mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var g=s.xaxis.domain,A=s.yaxis.domain,b=s.plotgroup;if(Ilt(g,A,_)){var w=b.node(),k=s.bg=ap.ensureSingle(b,"rect","bg");w.insertBefore(k.node(),w.childNodes[0]),p.push(o)}else b.select("rect.bg").remove(),_.push([g,A]),T||(v.push(o),p.push(o))}var x=t._bgLayer.selectAll(".bg").data(v);for(x.enter().append("rect").classed("bg",!0),x.exit().remove(),x.each(function(he){t._plots[he].bg=Yse.select(this)}),a=0;a<p.length;a++)s=t._plots[p[a]],u=s.xaxis,f=s.yaxis,s.bg&&u._offset!==void 0&&f._offset!==void 0&&s.bg.call(q2.setRect,u._offset-i,f._offset-i,u._length+2*i,f._length+2*i).call(WA.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var E=s.clipId="clip"+t._uid+o+"plot",M=ap.ensureSingleById(t._clips,"clipPath",E,function(he){he.classed("plotclip",!0).append("rect")});s.clipRect=M.select("rect").attr({width:u._length,height:f._length}),q2.setTranslate(s.plot,u._offset,f._offset);var d,C;s._hasClipOnAxisFalse?(d=null,C=E):(d=E,C=null),q2.setClipUrl(s.plot,d,e),s.layerClipId=C}var S,P,D,z,O,V,B,F,N,Z,J,re,le;function fe(he){return"M"+S+","+he+"H"+P}function K(he){return"M"+u._offset+","+he+"h"+u._length}function X(he){return"M"+he+","+F+"V"+B}function ae(he){return f._shift!==void 0&&(he+=f._shift),"M"+he+","+f._offset+"v"+f._length}function oe(he,ie,ye){if(!he.showline||o!==he._mainSubplot)return"";if(!he._anchorAxis)return ye(he._mainLinePosition);var ue=ie(he._mainLinePosition);return he.mirror&&(ue+=ie(he._mainMirrorPosition)),ue}for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var _e="M0,0";Hse(u,o)&&(O=A4(u,"left",f,n),S=u._offset-(O?i+O:0),V=A4(u,"right",f,n),P=u._offset+u._length+(V?i+V:0),D=c(u,f,"bottom"),z=c(u,f,"top"),le=!u._anchorAxis||o!==u._mainSubplot,le&&(u.mirror==="allticks"||u.mirror==="all")&&(u._linepositions[o]=[D,z]),_e=oe(u,fe,K),le&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")&&(_e+=fe(D)+fe(z)),s.xlines.style("stroke-width",u._lw+"px").call(WA.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",_e);var be="M0,0";Hse(f,o)&&(J=A4(f,"bottom",u,n),B=f._offset+f._length+(J?i:0),re=A4(f,"top",u,n),F=f._offset-(re?i:0),N=c(f,u,"left"),Z=c(f,u,"right"),le=!f._anchorAxis||o!==f._mainSubplot,le&&(f.mirror==="allticks"||f.mirror==="all")&&(f._linepositions[o]=[N,Z]),be=oe(f,X,ae),le&&f.showline&&(f.mirror==="all"||f.mirror==="allticks")&&(be+=X(N)+X(Z)),s.ylines.style("stroke-width",f._lw+"px").call(WA.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",be)}return XA.makeClipPaths(e),Pd.previousPromises(e)}function Hse(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function Gse(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var n=Gg.FROM_BL[t];return r.side===t?i.domain[n]===e.domain[n]:r.mirror&&i.domain[1-n]===e.domain[1-n]}function A4(e,t,r,i){if(Gse(e,t,r))return r._lw;for(var n=0;n<i.length;n++){var a=i[n];if(a._mainAxis===r._mainAxis&&Gse(e,t,a))return a._lw}return 0}$f.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=Hlt(r),n=Glt(r),a=Ult(r,n),o=Nlt(r,i);if(Llt.draw(e,"gtitle",{propContainer:r,propName:"title.text",placeholder:r._dfltTitle.plot,attributes:{x:o,y:a,"text-anchor":i,dy:n}}),t.text&&t.automargin){var s=Yse.selectAll(".gtitle"),l=q2.bBox(s.node()).height,u=Olt(e,t,l);if(u>0){Blt(e,a,u,l),s.attr({x:o,y:a,"text-anchor":i,dy:Vlt(t.yanchor)}).call(Use.positionText,o,a);var f=(t.text.match(Use.BR_TAG_ALL)||[]).length;if(f){var c=Gg.LINE_SPACING*f+Gg.MID_SHIFT;t.y===0&&(c=-c),s.selectAll(".line").each(function(){var h=+this.getAttribute("dy").slice(0,-2)-c+"em";this.setAttribute("dy",h)})}}}};function qlt(e,t,r,i,n){var a=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,o=ap.isTopAnchor(t)?i:i-n,s=r==="b"?a-o:o;return ap.isTopAnchor(t)&&r==="t"||ap.isBottomAnchor(t)&&r==="b"?!1:s<n}function zlt(e,t,r,i,n){var a=0;return r==="middle"&&(a+=n/2),e==="t"?(r==="top"&&(a+=n),a+=i-t*i):(r==="bottom"&&(a+=n),a+=t*i),a}function Olt(e,t,r){var i=t.y,n=t.yanchor,a=i>.5?"t":"b",o=e._fullLayout.margin[a],s=0;return t.yref==="paper"?s=r+t.pad.t+t.pad.b:t.yref==="container"&&(s=zlt(a,i,n,e._fullLayout.height,r)+t.pad.t+t.pad.b),s>o?s:0}function Blt(e,t,r,i){var n="title.automargin",a=e._fullLayout.title,o=a.y>.5?"t":"b",s={x:a.x,y:a.y,t:0,b:0},l={};a.yref==="paper"&&qlt(e,a,o,t,i)?s[o]=r:a.yref==="container"&&(l[o]=r,e._fullLayout._reservedMargin[n]=l),Pd.allowAutoMargin(e,n),Pd.autoMargin(e,n,s)}function Nlt(e,t){var r=e.title,i=e._size,n=0;switch(t===Zse?n=r.pad.l:t===jse&&(n=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+n;case"container":default:return e.width*r.x+n}}function Ult(e,t){var r=e.title,i=e._size,n=0;if(t==="0em"||!t?n=-r.pad.b:t===Gg.CAP_SHIFT+"em"&&(n=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+n;case"container":default:return e.height-e.height*r.y+n}}function Vlt(e){return e==="top"?Gg.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Gg.MID_SHIFT+"em"}function Hlt(e){var t=e.title,r=Dlt;return ap.isRightAnchor(t)?r=jse:ap.isLeftAnchor(t)&&(r=Zse),r}function Glt(e){var t=e.title,r="0em";return ap.isTopAnchor(t)?r=Gg.CAP_SHIFT+"em":ap.isMiddleAnchor(t)&&(r=Gg.MID_SHIFT+"em"),r}$f.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var n=t[i],a=n[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(n,o);var u=s.editStyle;u&&r.push({fn:u,cd0:a})}if(r.length){for(i=0;i<r.length;i++){var f=r[i];f.fn(e,f.cd0)}u7(e),$f.redrawReglTraces(e)}return Pd.style(e),Wh.getComponentMethod("legend","draw")(e),Pd.previousPromises(e)};$f.doColorBars=function(e){return Wh.getComponentMethod("colorbar","draw")(e),Pd.previousPromises(e)};$f.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,Wh.call("_doPlot",e,"",t)};$f.doLegend=function(e){return Wh.getComponentMethod("legend","draw")(e),Pd.previousPromises(e)};$f.doTicksRelayout=function(e){return XA.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(Wh.subplotsRegistry.splom.updateGrid(e),u7(e),$f.redrawReglTraces(e)),$f.drawMainTitle(e),Pd.previousPromises(e)};$f.doModeBar=function(e){var t=e._fullLayout;Wse.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return Pd.previousPromises(e)};$f.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var n=t[r[i]],a=n._scene;a.setViewport(n)}};$f.drawData=function(e){var t=e._fullLayout;u7(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return $f.redrawReglTraces(e),Pd.style(e),Wh.getComponentMethod("selections","draw")(e),Wh.getComponentMethod("shapes","draw")(e),Wh.getComponentMethod("annotations","draw")(e),Wh.getComponentMethod("images","draw")(e),t._replotting=!1,Pd.previousPromises(e)};$f.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],n=[],a,o;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),a=0;a<r.length;a++){var s=r[a];s.visible===!0&&s._length!==0&&(s.type==="splom"?t._splomScenes[s.uid].draw():s.type==="scattergl"?ap.pushUnique(i,s.xaxis+s.yaxis):s.type==="scatterpolargl"&&ap.pushUnique(n,s.subplot))}for(a=0;a<i.length;a++)o=t._plots[i[a]],o._scene&&o._scene.draw();for(a=0;a<n.length;a++)o=t[n[a]]._subplot,o._scene&&o._scene.draw()}};$f.doAutoRangeAndConstraints=function(e){for(var t=XA.list(e,"",!0),r,i={},n=0;n<t.length;n++)if(r=t[n],!i[r._id]){i[r._id]=1,Rlt(e,r),Vse(e,r);var a=r._matchGroup;if(a)for(var o in a){var s=XA.getFromId(e,o);Vse(e,s,r.range),i[o]=1}}Plt(e)};$f.finalDraw=function(e){Wh.getComponentMethod("rangeslider","draw")(e),Wh.getComponentMethod("rangeselector","draw")(e)};$f.drawMarginPushers=function(e){Wh.getComponentMethod("legend","draw")(e),Wh.getComponentMethod("rangeselector","draw")(e),Wh.getComponentMethod("sliders","draw")(e),Wh.getComponentMethod("updatemenus","draw")(e),Wh.getComponentMethod("colorbar","draw")(e)}});var h7=ne((Arr,ele)=>{"use strict";var Ylt=pm().readPaths,Wlt=g4(),Kse=nm().clearOutlineControllers,f7=_i(),Jse=aa(),Xlt=So().arrayEditor,Qse=ym(),Zlt=Qse.getPathString;ele.exports={draw:M4,drawOne:$se,activateLastSelection:Jlt};function M4(e){var t=e._fullLayout;Kse(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var n=0;n<t.selections.length;n++)$se(e,n)}function S4(e){return e._context.editSelection}function $se(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=Qse.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input)return;a(e._fullLayout._selectionLayer);function a(o){var s=Zlt(e,i),l={"data-index":t,"fill-rule":"evenodd",d:s},u=i.opacity,f="rgba(0,0,0,0)",c=i.line.color||f7.contrast(e._fullLayout.plot_bgcolor),h=i.line.width,v=i.line.dash;h||(h=5,v="solid");var p=S4(e)&&e._fullLayout._activeSelectionIndex===t;p&&(f=e._fullLayout.activeselection.fillcolor,u=e._fullLayout.activeselection.opacity);for(var _=[],T=1;T>=0;T--){var g=o.append("path").attr(l).style("opacity",T?.1:u).call(f7.stroke,c).call(f7.fill,f).call(Jse.dashLine,T?"solid":v,T?4+h:h);if(jlt(g,e,i),p){var A=Xlt(e.layout,"selections",i);g.style({cursor:"move"});var b={element:g.node(),plotinfo:n,gd:e,editHelpers:A,isActiveSelection:!0},w=Ylt(s,e);Wlt(w,g,b)}else g.style("pointer-events",T?"all":"none");_[T]=g}var k=_[0],x=_[1];x.node().addEventListener("click",function(){return Klt(e,k)})}}function jlt(e,t,r){var i=r.xref+r.yref;Jse.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function Klt(e,t){if(S4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){c7(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=c7,M4(e)}}}function Jlt(e){if(S4(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=c7,M4(e)}}function c7(e){if(S4(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(Kse(e),delete e._fullLayout._activeSelectionIndex,M4(e))}}});var rle=ne((Mrr,tle)=>{function Qlt(){var e,t=0,r=!1;function i(n,a){return e.list.push({type:n,data:a?JSON.parse(JSON.stringify(a)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(n,a){return i("check",{seg1:n,seg2:a})},segmentChop:function(n,a){return i("div_seg",{seg:n,pt:a}),i("chop",{seg:n,pt:a})},statusRemove:function(n){return i("pop_seg",{seg:n})},segmentUpdate:function(n){return i("seg_update",{seg:n})},segmentNew:function(n,a){return i("new_seg",{seg:n,primary:a})},segmentRemove:function(n){return i("rem_seg",{seg:n})},tempStatus:function(n,a,o){return i("temp_status",{seg:n,above:a,below:o})},rewind:function(n){return i("rewind",{seg:n})},status:function(n,a,o){return i("status",{seg:n,above:a,below:o})},vert:function(n){return n===r?e:(r=n,i("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),i("log",{txt:n})},reset:function(){return i("reset")},selected:function(n){return i("selected",{segs:n})},chainStart:function(n){return i("chain_start",{seg:n})},chainRemoveHead:function(n,a){return i("chain_rem_head",{index:n,pt:a})},chainRemoveTail:function(n,a){return i("chain_rem_tail",{index:n,pt:a})},chainNew:function(n,a){return i("chain_new",{pt1:n,pt2:a})},chainMatch:function(n){return i("chain_match",{index:n})},chainClose:function(n){return i("chain_close",{index:n})},chainAddHead:function(n,a){return i("chain_add_head",{index:n,pt:a})},chainAddTail:function(n,a){return i("chain_add_tail",{index:n,pt:a})},chainConnect:function(n,a){return i("chain_con",{index1:n,index2:a})},chainReverse:function(n){return i("chain_rev",{index:n})},chainJoin:function(n,a){return i("chain_join",{index1:n,index2:a})},done:function(){return i("done")}},e}tle.exports=Qlt});var ile=ne((Srr,nle)=>{function $lt(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,n){var a=i[0],o=i[1],s=n[0],l=n[1],u=r[0],f=r[1];return(s-a)*(f-o)-(l-o)*(u-a)>=-e},pointBetween:function(r,i,n){var a=r[1]-i[1],o=n[0]-i[0],s=r[0]-i[0],l=n[1]-i[1],u=s*o+a*l;if(u<e)return!1;var f=o*o+l*l;return!(u-f>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,n){var a=r[0]-i[0],o=r[1]-i[1],s=i[0]-n[0],l=i[1]-n[1];return Math.abs(a*l-s*o)<e},linesIntersect:function(r,i,n,a){var o=i[0]-r[0],s=i[1]-r[1],l=a[0]-n[0],u=a[1]-n[1],f=o*u-s*l;if(Math.abs(f)<e)return!1;var c=r[0]-n[0],h=r[1]-n[1],v=(l*h-u*c)/f,p=(o*h-s*c)/f,_={alongA:0,alongB:0,pt:[r[0]+v*o,r[1]+v*s]};return v<=-e?_.alongA=-2:v<e?_.alongA=-1:v-1<=-e?_.alongA=0:v-1<e?_.alongA=1:_.alongA=2,p<=-e?_.alongB=-2:p<e?_.alongB=-1:p-1<=-e?_.alongB=0:p-1<e?_.alongB=1:_.alongB=2,_},pointInsideRegion:function(r,i){for(var n=r[0],a=r[1],o=i[i.length-1][0],s=i[i.length-1][1],l=!1,u=0;u<i.length;u++){var f=i[u][0],c=i[u][1];c-a>e!=s-a>e&&(o-f)*(a-c)/(s-c)+f-n>e&&(l=!l),o=f,s=c}return l}};return t}nle.exports=$lt});var ole=ne((Err,ale)=>{var eut={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,n=e.root.next;n!==null;){if(r(n)){t.prev=n.prev,t.next=n,n.prev.next=t,n.prev=t;return}i=n,n=n.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(n){return n.prev=r,n.next=i,r.next=n,i!==null&&(i.prev=n),n}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};ale.exports=eut});var lle=ne((krr,sle)=>{var jA=ole();function tut(e,t,r){function i(p,_){return{id:r?r.segmentId():-1,start:p,end:_,myFill:{above:null,below:null},otherFill:null}}function n(p,_,T){return{id:r?r.segmentId():-1,start:p,end:_,myFill:{above:T.myFill.above,below:T.myFill.below},otherFill:null}}var a=jA.create();function o(p,_,T,g,A,b){var w=t.pointsCompare(_,A);return w!==0?w:t.pointsSame(T,b)?0:p!==g?p?1:-1:t.pointAboveOrOnLine(T,g?A:b,g?b:A)?1:-1}function s(p,_){a.insertBefore(p,function(T){var g=o(p.isStart,p.pt,_,T.isStart,T.pt,T.other.pt);return g<0})}function l(p,_){var T=jA.node({isStart:!0,pt:p.start,seg:p,primary:_,other:null,status:null});return s(T,p.end),T}function u(p,_,T){var g=jA.node({isStart:!1,pt:_.end,seg:_,primary:T,other:p,status:null});p.other=g,s(g,p.pt)}function f(p,_){var T=l(p,_);return u(T,p,_),T}function c(p,_){r&&r.segmentChop(p.seg,_),p.other.remove(),p.seg.end=_,p.other.pt=_,s(p.other,p.pt)}function h(p,_){var T=n(_,p.seg.end,p.seg);return c(p,_),f(T,p.primary)}function v(p,_){var T=jA.create();function g(O,V){var B=O.seg.start,F=O.seg.end,N=V.seg.start,Z=V.seg.end;return t.pointsCollinear(B,N,Z)?t.pointsCollinear(F,N,Z)||t.pointAboveOrOnLine(F,N,Z)?1:-1:t.pointAboveOrOnLine(B,N,Z)?1:-1}function A(O){return T.findTransition(function(V){var B=g(O,V.ev);return B>0})}function b(O,V){var B=O.seg,F=V.seg,N=B.start,Z=B.end,J=F.start,re=F.end;r&&r.checkIntersection(B,F);var le=t.linesIntersect(N,Z,J,re);if(le===!1){if(!t.pointsCollinear(N,Z,J)||t.pointsSame(N,re)||t.pointsSame(Z,J))return!1;var fe=t.pointsSame(N,J),K=t.pointsSame(Z,re);if(fe&&K)return V;var X=!fe&&t.pointBetween(N,J,re),ae=!K&&t.pointBetween(Z,J,re);if(fe)return ae?h(V,Z):h(O,re),V;X&&(K||(ae?h(V,Z):h(O,re)),h(V,N))}else le.alongA===0&&(le.alongB===-1?h(O,J):le.alongB===0?h(O,le.pt):le.alongB===1&&h(O,re)),le.alongB===0&&(le.alongA===-1?h(V,N):le.alongA===0?h(V,le.pt):le.alongA===1&&h(V,Z));return!1}for(var w=[];!a.isEmpty();){var k=a.getHead();if(r&&r.vert(k.pt[0]),k.isStart){let O=function(){if(E){var V=b(k,E);if(V)return V}return M?b(k,M):!1};var z=O;r&&r.segmentNew(k.seg,k.primary);var x=A(k),E=x.before?x.before.ev:null,M=x.after?x.after.ev:null;r&&r.tempStatus(k.seg,E?E.seg:!1,M?M.seg:!1);var d=O();if(d){if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,C&&(d.seg.myFill.above=!d.seg.myFill.above)}else d.seg.otherFill=k.seg.myFill;r&&r.segmentUpdate(d.seg),k.other.remove(),k.remove()}if(a.getHead()!==k){r&&r.rewind(k.seg);continue}if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,M?k.seg.myFill.below=M.seg.myFill.above:k.seg.myFill.below=p,C?k.seg.myFill.above=!k.seg.myFill.below:k.seg.myFill.above=k.seg.myFill.below}else if(k.seg.otherFill===null){var S;M?k.primary===M.primary?S=M.seg.otherFill.above:S=M.seg.myFill.above:S=k.primary?_:p,k.seg.otherFill={above:S,below:S}}r&&r.status(k.seg,E?E.seg:!1,M?M.seg:!1),k.other.status=x.insert(jA.node({ev:k}))}else{var P=k.status;if(P===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(T.exists(P.prev)&&T.exists(P.next)&&b(P.prev.ev,P.next.ev),r&&r.statusRemove(P.ev.seg),P.remove(),!k.primary){var D=k.seg.myFill;k.seg.myFill=k.seg.otherFill,k.seg.otherFill=D}w.push(k.seg)}a.getHead().remove()}return r&&r.done(),w}return e?{addRegion:function(p){for(var _,T=p[p.length-1],g=0;g<p.length;g++){_=T,T=p[g];var A=t.pointsCompare(_,T);A!==0&&f(i(A<0?_:T,A<0?T:_),!0)}},calculate:function(p){return v(p,!1)}}:{calculate:function(p,_,T,g){return p.forEach(function(A){f(n(A.start,A.end,A),!0)}),T.forEach(function(A){f(n(A.start,A.end,A),!1)}),v(_,g)}}}sle.exports=tut});var fle=ne((Crr,ule)=>{function rut(e,t,r){var i=[],n=[];return e.forEach(function(a){var o=a.start,s=a.end;if(t.pointsSame(o,s)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(a);var l={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},f=l;function c(z,O,V){return f.index=z,f.matches_head=O,f.matches_pt1=V,f===l?(f=u,!1):(f=null,!0)}for(var h=0;h<i.length;h++){var v=i[h],p=v[0],_=v[1],T=v[v.length-1],g=v[v.length-2];if(t.pointsSame(p,o)){if(c(h,!0,!0))break}else if(t.pointsSame(p,s)){if(c(h,!0,!1))break}else if(t.pointsSame(T,o)){if(c(h,!1,!0))break}else if(t.pointsSame(T,s)&&c(h,!1,!1))break}if(f===l){i.push([o,s]),r&&r.chainNew(o,s);return}if(f===u){r&&r.chainMatch(l.index);var A=l.index,b=l.matches_pt1?s:o,w=l.matches_head,v=i[A],k=w?v[0]:v[v.length-1],x=w?v[1]:v[v.length-2],E=w?v[v.length-1]:v[0],M=w?v[v.length-2]:v[1];if(t.pointsCollinear(x,k,b)&&(w?(r&&r.chainRemoveHead(l.index,b),v.shift()):(r&&r.chainRemoveTail(l.index,b),v.pop()),k=x),t.pointsSame(E,b)){i.splice(A,1),t.pointsCollinear(M,E,k)&&(w?(r&&r.chainRemoveTail(l.index,k),v.pop()):(r&&r.chainRemoveHead(l.index,k),v.shift())),r&&r.chainClose(l.index),n.push(v);return}w?(r&&r.chainAddHead(l.index,b),v.unshift(b)):(r&&r.chainAddTail(l.index,b),v.push(b));return}function d(z){r&&r.chainReverse(z),i[z].reverse()}function C(z,O){var V=i[z],B=i[O],F=V[V.length-1],N=V[V.length-2],Z=B[0],J=B[1];t.pointsCollinear(N,F,Z)&&(r&&r.chainRemoveTail(z,F),V.pop(),F=N),t.pointsCollinear(F,Z,J)&&(r&&r.chainRemoveHead(O,Z),B.shift()),r&&r.chainJoin(z,O),i[z]=V.concat(B),i.splice(O,1)}var S=l.index,P=u.index;r&&r.chainConnect(S,P);var D=i[S].length<i[P].length;l.matches_head?u.matches_head?D?(d(S),C(S,P)):(d(P),C(P,S)):C(P,S):u.matches_head?C(S,P):D?(d(S),C(P,S)):(d(P),C(S,P))}),n}ule.exports=rut});var hle=ne((Lrr,cle)=>{function KA(e,t,r){var i=[];return e.forEach(function(n){var a=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);t[a]!==0&&i.push({id:r?r.segmentId():-1,start:n.start,end:n.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}),r&&r.selected(i),i}var nut={union:function(e,t){return KA(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return KA(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return KA(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return KA(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return KA(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};cle.exports=nut});var dle=ne((Prr,vle)=>{var iut={toPolygon:function(e,t){function r(a){if(a.length<=0)return e.segments({inverted:!1,regions:[]});function o(u){var f=u.slice(0,u.length-1);return e.segments({inverted:!1,regions:[f]})}for(var s=o(a[0]),l=1;l<a.length;l++)s=e.selectDifference(e.combine(s,o(a[l])));return s}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),n=0;n<t.coordinates.length;n++)i=e.selectUnion(e.combine(i,r(t.coordinates[n])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(v,p){return t.pointInsideRegion([(v[0][0]+v[1][0])*.5,(v[0][1]+v[1][1])*.5],p)}function n(v){return{region:v,children:[]}}var a=n(null);function o(v,p){for(var _=0;_<v.children.length;_++){var T=v.children[_];if(i(p,T.region)){o(T,p);return}}for(var g=n(p),_=0;_<v.children.length;_++){var T=v.children[_];i(T.region,p)&&(g.children.push(T),v.children.splice(_,1),_--)}v.children.push(g)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function u(v,p){for(var _=0,T=v[v.length-1][0],g=v[v.length-1][1],A=[],b=0;b<v.length;b++){var w=v[b][0],k=v[b][1];A.push([w,k]),_+=k*T-w*g,T=w,g=k}var x=_<0;return x!==p&&A.reverse(),A.push([A[0][0],A[0][1]]),A}var f=[];function c(v){var p=[u(v.region,!1)];f.push(p);for(var _=0;_<v.children.length;_++)p.push(h(v.children[_]))}function h(v){for(var p=0;p<v.children.length;p++)c(v.children[p]);return u(v.region,!0)}for(var s=0;s<a.children.length;s++)c(a.children[s]);return f.length<=0?{type:"Polygon",coordinates:[]}:f.length==1?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}};vle.exports=iut});var mle=ne((Rrr,yle)=>{var aut=rle(),out=ile(),ple=lle(),sut=fle(),JA=hle(),gle=dle(),op=!1,QA=out(),ad;ad={buildLog:function(e){return e===!0?op=aut():e===!1&&(op=!1),op===!1?!1:op.list},epsilon:function(e){return QA.epsilon(e)},segments:function(e){var t=ple(!0,QA,op);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=ple(!1,QA,op);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:JA.union(e.combined,op),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:JA.intersect(e.combined,op),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:JA.difference(e.combined,op),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:JA.differenceRev(e.combined,op),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:JA.xor(e.combined,op),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:sut(e.segments,QA,op),inverted:e.inverted}},polygonFromGeoJSON:function(e){return gle.toPolygon(ad,e)},polygonToGeoJSON:function(e){return gle.fromPolygon(ad,QA,e)},union:function(e,t){return $A(e,t,ad.selectUnion)},intersect:function(e,t){return $A(e,t,ad.selectIntersect)},difference:function(e,t){return $A(e,t,ad.selectDifference)},differenceRev:function(e,t){return $A(e,t,ad.selectDifferenceRev)},xor:function(e,t){return $A(e,t,ad.selectXor)}};function $A(e,t,r){var i=ad.segments(e),n=ad.segments(t),a=ad.combine(i,n),o=r(a);return ad.polygon(o)}typeof window=="object"&&(window.PolyBool=ad);yle.exports=ad});var _le=ne((Drr,xle)=>{xle.exports=function(t,r,i,n){var a=t[0],o=t[1],s=!1;i===void 0&&(i=0),n===void 0&&(n=r.length);for(var l=n-i,u=0,f=l-1;u<l;f=u++){var c=r[u+i][0],h=r[u+i][1],v=r[f+i][0],p=r[f+i][1],_=h>o!=p>o&&a<(v-c)*(o-h)/(p-h)+c;_&&(s=!s)}return s}});var eM=ne((Irr,ble)=>{"use strict";var v7=Bk().dot,E4=$a().BADNUM,k4=ble.exports={};k4.tester=function(t){var r=t.slice(),i=r[0][0],n=i,a=r[0][1],o=a,s;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),s=1;s<r.length;s++)i=Math.min(i,r[s][0]),n=Math.max(n,r[s][0]),a=Math.min(a,r[s][1]),o=Math.max(o,r[s][1]);var l=!1,u;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,u=function(p){return p[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,u=function(p){return p[1]===r[0][1]}));function f(p,_){var T=p[0],g=p[1];return!(T===E4||T<i||T>n||g===E4||g<a||g>o||_&&u(p))}function c(p,_){var T=p[0],g=p[1];if(T===E4||T<i||T>n||g===E4||g<a||g>o)return!1;var A=r.length,b=r[0][0],w=r[0][1],k=0,x,E,M,d,C;for(x=1;x<A;x++)if(E=b,M=w,b=r[x][0],w=r[x][1],d=Math.min(E,b),!(T<d||T>Math.max(E,b)||g>Math.max(M,w)))if(g<Math.min(M,w))T!==d&&k++;else{if(b===E?C=g:C=M+(T-E)*(w-M)/(b-E),g===C)return!(x===1&&_);g<=C&&T!==d&&k++}return k%2===1}var h=!0,v=r[0];for(s=1;s<r.length;s++)if(v[0]!==r[s][0]||v[1]!==r[s][1]){h=!1;break}return{xmin:i,xmax:n,ymin:a,ymax:o,pts:r,contains:l?f:c,isRect:l,degenerate:h}};k4.isSegmentBent=function(t,r,i,n){var a=t[r],o=[t[i][0]-a[0],t[i][1]-a[1]],s=v7(o,o),l=Math.sqrt(s),u=[-o[1]/l,o[0]/l],f,c,h;for(f=r+1;f<i;f++)if(c=[t[f][0]-a[0],t[f][1]-a[1]],h=v7(c,o),h<0||h>s||Math.abs(v7(c,u))>n)return!0;return!1};k4.filter=function(t,r){var i=[t[0]],n=0,a=0;function o(l){t.push(l);var u=i.length,f=n;i.splice(a+1);for(var c=f+1;c<t.length;c++)(c===t.length-1||k4.isSegmentBent(t,f,c+1,r))&&(i.push(t[c]),i.length<u-2&&(n=c,a=i.length-1),f=c)}if(t.length>1){var s=t.pop();o(s)}return{addPt:o,raw:t,filtered:i}}});var Tle=ne((Frr,wle)=>{"use strict";wle.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var Yle=ne((qrr,Gle)=>{"use strict";var Ale=mle(),lut=_le(),nM=wi(),uut=aa().dashStyle,tM=_i(),fut=Ol(),cut=td().makeEventData,lM=r0(),hut=lM.freeMode,vut=lM.rectMode,iM=lM.drawMode,y7=lM.openMode,m7=lM.selectMode,Mle=ym(),Sle=HA(),Ple=g4(),Rle=nm().clearOutline,Dle=pm(),d7=Dle.handleEllipse,dut=Dle.readPaths,put=h4().newShapes,gut=UO(),yut=h7().activateLastSelection,L4=Wt(),mut=L4.sorterAsc,Ile=eM(),rM=eC(),sp=zl().getFromId,xut=UA(),_ut=ZA().redrawReglTraces,P4=Tle(),H0=P4.MINSELECT,but=Ile.filter,x7=Ile.tester,_7=l4(),Ele=_7.p2r,wut=_7.axValue,Tut=_7.getTransform;function b7(e){return e.subplot!==void 0}function Aut(e,t,r,i,n){var a=!b7(i),o=hut(n),s=vut(n),l=y7(n),u=iM(n),f=m7(n),c=n==="drawline",h=n==="drawcircle",v=c||h,p=i.gd,_=p._fullLayout,T=f&&_.newselection.mode==="immediate"&&a,g=_._zoomlayer,A=i.element.getBoundingClientRect(),b=i.plotinfo,w=Tut(b),k=t-A.left,x=r-A.top;_._calcInverseTransform(p);var E=L4.apply3DTransform(_._invTransform)(k,x);k=E[0],x=E[1];var M=_._invScaleX,d=_._invScaleY,C=k,S=x,P="M"+k+","+x,D=i.xaxes[0],z=i.yaxes[0],O=D._length,V=z._length,B=e.altKey&&!(iM(n)&&l),F,N,Z,J,re,le,fe;qle(e,p,i),o&&(F=but([[k,x]],P4.BENDPX));var K=g.selectAll("path.select-outline-"+b.id).data([1]),X=u?_.newshape:_.newselection;u&&(i.hasText=X.label.text||X.label.texttemplate);var ae=u&&!l?X.fillcolor:"rgba(0,0,0,0)",oe=X.line.color||(a?tM.contrast(p._fullLayout.plot_bgcolor):"#7f7f7f");K.enter().append("path").attr("class","select-outline select-outline-"+b.id).style({opacity:u?X.opacity/2:1,"stroke-dasharray":uut(X.line.dash,X.line.width),"stroke-width":X.line.width+"px","shape-rendering":"crispEdges"}).call(tM.stroke,oe).call(tM.fill,ae).attr("fill-rule","evenodd").classed("cursor-move",!!u).attr("transform",w).attr("d",P+"Z");var _e=g.append("path").attr("class","zoombox-corners").style({fill:tM.background,stroke:tM.defaultLine,"stroke-width":1}).attr("transform",w).attr("d","M0,0Z");if(u&&i.hasText){var be=g.select(".label-temp");be.empty()&&(be=g.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var he=_._uid+P4.SELECTID,ie=[],ye=R4(p,i.xaxes,i.yaxes,i.subplot);T&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(a){var Ae=D._id,Re=z._id;Ule(p,Ae,Re,ye);for(var ze=(p.layout||{}).selections||[],et=[],Le=!1,Ie=0;Ie<ze.length;Ie++){var dt=_.selections[Ie];dt.xref!==Ae||dt.yref!==Re?et.push(ze[Ie]):Le=!0}Le&&(p._fullLayout._noEmitSelectedAtStart=!0,nM.call("_guiRelayout",p,{selections:et}))}});var ue=Out(i);i.moveFn=function(Ae,Re){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),C=Math.max(0,Math.min(O,M*Ae+k)),S=Math.max(0,Math.min(V,d*Re+x));var ze=Math.abs(C-k),et=Math.abs(S-x);if(s){var Le,Ie,dt;if(f){var ct=_.selectdirection;switch(ct==="any"?et<Math.min(ze*.6,H0)?Le="h":ze<Math.min(et*.6,H0)?Le="v":Le="d":Le=ct,Le){case"h":Ie=h?V/2:0,dt=V;break;case"v":Ie=h?O/2:0,dt=O;break}}if(u)switch(_.newshape.drawdirection){case"vertical":Le="h",Ie=h?V/2:0,dt=V;break;case"horizontal":Le="v",Ie=h?O/2:0,dt=O;break;case"ortho":ze<et?(Le="h",Ie=x,dt=S):(Le="v",Ie=k,dt=C);break;default:Le="d"}Le==="h"?(J=v?d7(h,[C,Ie],[C,dt]):[[k,Ie],[k,dt],[C,dt],[C,Ie]],J.xmin=v?C:Math.min(k,C),J.xmax=v?C:Math.max(k,C),J.ymin=Math.min(Ie,dt),J.ymax=Math.max(Ie,dt),_e.attr("d","M"+J.xmin+","+(x-H0)+"h-4v"+2*H0+"h4ZM"+(J.xmax-1)+","+(x-H0)+"h4v"+2*H0+"h-4Z")):Le==="v"?(J=v?d7(h,[Ie,S],[dt,S]):[[Ie,x],[Ie,S],[dt,S],[dt,x]],J.xmin=Math.min(Ie,dt),J.xmax=Math.max(Ie,dt),J.ymin=v?S:Math.min(x,S),J.ymax=v?S:Math.max(x,S),_e.attr("d","M"+(k-H0)+","+J.ymin+"v-4h"+2*H0+"v4ZM"+(k-H0)+","+(J.ymax-1)+"v4h"+2*H0+"v-4Z")):Le==="d"&&(J=v?d7(h,[k,x],[C,S]):[[k,x],[k,S],[C,S],[C,x]],J.xmin=Math.min(k,C),J.xmax=Math.max(k,C),J.ymin=Math.min(x,S),J.ymax=Math.max(x,S),_e.attr("d","M0,0Z"))}else o&&(F.addPt([C,S]),J=F.filtered);if(i.selectionDefs&&i.selectionDefs.length?(Z=zle(i.mergedPolygons,J,B),J.subtract=B,N=w7(i.selectionDefs.concat([J]))):(Z=[J],N=x7(J)),Ple(Ble(Z,l),K,i),f){var Ke=g7(p,!1),_t=Ke.eventData?Ke.eventData.points.slice():[];Ke=g7(p,!1,N,ye,i),N=Ke.selectionTesters,fe=Ke.eventData;var zt;F?zt=F.filtered:zt=Vle(Z),rM.throttle(he,P4.SELECTDELAY,function(){ie=Nle(N,ye);for(var Et=ie.slice(),Se=0;Se<_t.length;Se++){for(var je=_t[Se],ht=!1,nt=0;nt<Et.length;nt++)if(Et[nt].curveNumber===je.curveNumber&&Et[nt].pointNumber===je.pointNumber){ht=!0;break}ht||Et.push(je)}Et.length&&(fe||(fe={}),fe.points=Et),ue(fe,zt),But(p,fe)})}},i.clickFn=function(Ae,Re){if(_e.remove(),p._fullLayout._activeShapeIndex>=0){p._fullLayout._deactivateShape(p);return}if(!u){var ze=_.clickmode;rM.done(he).then(function(){if(rM.clear(he),Ae===2){for(K.remove(),re=0;re<ye.length;re++)le=ye[re],le._module.selectPoints(le,!1);if(oM(p,ye),aM(i),A7(p),ye.length){var et=ye[0].xaxis,Le=ye[0].yaxis;if(et&&Le){for(var Ie=[],dt=p._fullLayout.selections,ct=0;ct<dt.length;ct++){var Ke=dt[ct];Ke&&(Ke.xref!==et._id||Ke.yref!==Le._id)&&Ie.push(Ke)}Ie.length<dt.length&&(p._fullLayout._noEmitSelectedAtStart=!0,nM.call("_guiRelayout",p,{selections:Ie}))}}}else ze.indexOf("select")>-1&&Fle(Re,p,i.xaxes,i.yaxes,i.subplot,i,K),ze==="event"&&sM(p,void 0);fut.click(p,Re,b.id)}).catch(L4.error)}},i.doneFn=function(){_e.remove(),rM.done(he).then(function(){rM.clear(he),!T&&J&&i.selectionDefs&&(J.subtract=B,i.selectionDefs.push(J),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,Z)),(T||u)&&aM(i,T),i.doneFnCompleted&&i.doneFnCompleted(ie),f&&sM(p,fe)}).catch(L4.error)}}function Fle(e,t,r,i,n,a,o){var s=t._hoverdata,l=t._fullLayout,u=l.clickmode,f=u.indexOf("event")>-1,c=[],h,v,p,_,T,g,A,b,w,k;if(Cut(s)){qle(e,t,a),h=R4(t,r,i,n);var x=Lut(s,h),E=x.pointNumbers.length>0;if(E?Put(h,x):Rut(h)&&(A=Cle(x))){for(o&&o.remove(),k=0;k<h.length;k++)v=h[k],v._module.selectPoints(v,!1);oM(t,h),aM(a),f&&A7(t)}else{b=e.shiftKey&&(A!==void 0?A:Cle(x)),p=Mut(x.pointNumber,x.searchInfo,b);var M=a.selectionDefs.concat([p]);for(_=w7(M,_),k=0;k<h.length;k++)if(T=h[k]._module.selectPoints(h[k],_),g=Ole(T,h[k]),c.length)for(var d=0;d<g.length;d++)c.push(g[d]);else c=g;if(w={points:c},oM(t,h,w),p&&a&&a.selectionDefs.push(p),o){var C=a.mergedPolygons,S=y7(a.dragmode);Ple(Ble(C,S),o,a)}f&&sM(t,w)}}}function Mut(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function p7(e){return"pointNumber"in e&&"searchInfo"in e}function Sut(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,n){var a=e.searchInfo.cd[0].trace._expandedIndex,o=n.cd[0].trace._expandedIndex;return o===a&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function w7(e){if(!e.length)return;for(var t=[],r=p7(e[0])?0:e[0][0][0],i=r,n=p7(e[0])?0:e[0][0][1],a=n,o=0;o<e.length;o++)if(p7(e[o]))t.push(Sut(e[o]));else{var s=x7(e[o]);s.subtract=!!e[o].subtract,t.push(s),r=Math.min(r,s.xmin),i=Math.max(i,s.xmax),n=Math.min(n,s.ymin),a=Math.max(a,s.ymax)}function l(u,f,c,h){for(var v=!1,p=0;p<t.length;p++)t[p].contains(u,f,c,h)&&(v=!t[p].subtract);return v}return{xmin:r,xmax:i,ymin:n,ymax:a,pts:[],contains:l,isRect:!1,degenerate:!1}}function qle(e,t,r){var i=t._fullLayout,n=r.plotinfo,a=r.dragmode,o=i._lastSelectedSubplot&&i._lastSelectedSubplot===n.id,s=(e.shiftKey||e.altKey)&&!(iM(a)&&y7(a));o&&s&&n.selection&&n.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=n.selection.selectionDefs,r.mergedPolygons=n.selection.mergedPolygons):(!s||!n.selection)&&aM(r),o||(Rle(t),i._lastSelectedSubplot=n.id)}function Eut(e){return e._fullLayout._activeShapeIndex>=0}function kut(e){return e._fullLayout._activeSelectionIndex>=0}function aM(e,t){var r=e.dragmode,i=e.plotinfo,n=e.gd;Eut(n)&&n._fullLayout._deactivateShape(n),kut(n)&&n._fullLayout._deactivateSelection(n);var a=n._fullLayout,o=a._zoomlayer,s=iM(r),l=m7(r);if(s||l){var u=o.selectAll(".select-outline-"+i.id);if(u&&n._fullLayout._outlining){var f;s&&(f=put(u,e)),f&&nM.call("_guiRelayout",n,{shapes:f});var c;l&&!b7(e)&&(c=gut(u,e)),c&&(n._fullLayout._noEmitSelectedAtStart=!0,nM.call("_guiRelayout",n,{selections:c}).then(function(){t&&yut(n)})),n._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function kle(e){return e._id}function R4(e,t,r,i){if(!e.calcdata)return[];var n=[],a=t.map(kle),o=r.map(kle),s,l,u;for(u=0;u<e.calcdata.length;u++)if(s=e.calcdata[u],l=s[0].trace,!(l.visible!==!0||!l._module||!l._module.selectPoints))if(b7({subplot:i})&&(l.subplot===i||l.geo===i))n.push(C4(l._module,s,t[0],r[0]));else if(l.type==="splom"){if(l._xaxes[a[0]]&&l._yaxes[o[0]]){var f=C4(l._module,s,t[0],r[0]);f.scene=e._fullLayout._splomScenes[l.uid],n.push(f)}}else if(l.type==="sankey"){var c=C4(l._module,s,t[0],r[0]);n.push(c)}else{if(a.indexOf(l.xaxis)===-1&&(!l._xA||!l._xA.overlaying)||o.indexOf(l.yaxis)===-1&&(!l._yA||!l._yA.overlaying))continue;n.push(C4(l._module,s,sp(e,l.xaxis),sp(e,l.yaxis)))}return n}function C4(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function Cut(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function Lut(e,t){var r=e[0],i=-1,n=[],a,o;for(o=0;o<t.length;o++)if(a=t[o],r.fullData._expandedIndex===a.cd[0].trace._expandedIndex){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,n=r.pointNumbers);break}return{pointNumber:i,pointNumbers:n,searchInfo:a}}function Cle(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,n=i.length>0,a=n?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(a)>-1:!1}function Put(e,t){var r=[],i,n,a,o;for(o=0;o<e.length;o++)i=e[o],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(a=r[0]===t.searchInfo,a&&(n=t.searchInfo.cd[0].trace,n.selectedpoints.length===t.pointNumbers.length))){for(o=0;o<t.pointNumbers.length;o++)if(n.selectedpoints.indexOf(t.pointNumbers[o])<0)return!1;return!0}return!1}function Rut(e){var t=0,r,i,n;for(n=0;n<e.length;n++)if(r=e[n],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function oM(e,t,r){var i;for(i=0;i<t.length;i++){var n=t[i].cd[0].trace._fullInput,a=e._fullLayout._tracePreGUI[n.uid]||{};a.selectedpoints===void 0&&(a.selectedpoints=n._input.selectedpoints||null)}var o;if(r){var s=r.points||[];for(i=0;i<t.length;i++)o=t[i].cd[0].trace,o._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(var l=0;l<s.length;l++){var u=s[l],f=u.data,c=u.fullData,h=u.pointIndex,v=u.pointIndices;v?([].push.apply(f.selectedpoints,v),o._fullInput!==o&&[].push.apply(c.selectedpoints,v)):(f.selectedpoints.push(h),o._fullInput!==o&&c.selectedpoints.push(h))}}else for(i=0;i<t.length;i++)o=t[i].cd[0].trace,delete o.selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;Dut(e,t)}function Dut(e,t){for(var r=!1,i=0;i<t.length;i++){var n=t[i],a=n.cd;nM.traceIs(a[0].trace,"regl")&&(r=!0);var o=n._module,s=o.styleOnSelect||o.style;s&&(s(e,a,a[0].node3),a[0].nodeRangePlot3&&s(e,a,a[0].nodeRangePlot3))}r&&(xut(e),_ut(e))}function zle(e,t,r){for(var i=r?Ale.difference:Ale.union,n=i({regions:e},{regions:[t]}),a=n.regions.reverse(),o=0;o<a.length;o++){var s=a[o];s.subtract=T7(s,a.slice(0,o))}return a}function Ole(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,n=0;n<e.length;n++)e[n]=cut(e[n],i,r);return e}function Ble(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var n=0;n<e[i].length;n++){r[i][n]=[],r[i][n][0]=n?"L":"M";for(var a=0;a<e[i][n].length;a++)r[i][n].push(e[i][n][a])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function Nle(e,t){for(var r=[],i,n=[],a,o=0;o<t.length;o++){var s=t[o];a=s._module.selectPoints(s,e),n.push(a),i=Ole(a,s),r=r.concat(i)}return r}function g7(e,t,r,i,n){var a=!!i,o,s,l;n&&(o=n.plotinfo,s=n.xaxes[0]._id,l=n.yaxes[0]._id);var u=[],f=[],c=Lle(e),h=e._fullLayout;if(o){var v=h._zoomlayer,p=h.dragmode,_=iM(p),T=m7(p);if(_||T){var g=sp(e,s,"x"),A=sp(e,l,"y");if(g&&A){var b=v.selectAll(".select-outline-"+o.id);if(b&&e._fullLayout._outlining&&b.length){for(var w=b[0][0],k=w.getAttribute("d"),x=dut(k,e,o),E=[],M=0;M<x.length;M++){for(var d=x[M],C=[],S=0;S<d.length;S++)C.push([xm(g,d[S][1]),xm(A,d[S][2])]);C.xref=s,C.yref=l,C.subtract=T7(C,E),E.push(C)}c=c.concat(E)}}}}var P=s&&l?[s+l]:h._subplots.cartesian;Iut(e);for(var D={},z=0;z<P.length;z++){var O=P[z],V=O.indexOf("y"),B=O.slice(0,V),F=O.slice(V),N=s&&l?r:void 0;if(N=qut(c,B,F,N),N){var Z=i;if(!a){var J=sp(e,B,"x"),re=sp(e,F,"y");Z=R4(e,[J],[re],O);for(var le=0;le<Z.length;le++){var fe=Z[le],K=fe.cd[0],X=K.trace;if(fe._module.name==="scattergl"&&!K.t.xpx){var ae=X.x,oe=X.y,_e=X._length;K.t.xpx=[],K.t.ypx=[];for(var be=0;be<_e;be++)K.t.xpx[be]=J.c2p(ae[be]),K.t.ypx[be]=re.c2p(oe[be])}fe._module.name==="splom"&&(D[X.uid]||(D[X.uid]=!0))}}var he=Nle(N,Z);u=u.concat(he),f=f.concat(Z)}}var ie={points:u};oM(e,f,ie);var ye=h.clickmode,ue=ye.indexOf("event")>-1&&t;if(!o&&t){var Ae=Lle(e,!0);if(Ae.length){var Re=Ae[0].xref,ze=Ae[0].yref;if(Re&&ze){var et=Vle(Ae),Le=Hle([sp(e,Re,"x"),sp(e,ze,"y")]);Le(ie,et)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:ue&&sM(e,ie),h._reselect=!1}if(!o&&h._deselect){var Ie=h._deselect;s=Ie.xref,l=Ie.yref,Fut(s,l,f)||Ule(e,s,l,i),ue&&(ie.points.length?sM(e,ie):A7(e)),h._deselect=!1}return{eventData:ie,selectionTesters:r}}function Iut(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],n=i.trace,a=e._fullLayout._splomScenes;if(a){var o=a[n.uid];o&&(o.selectBatch=[])}}}function Fut(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];if(n.xaxis&&n.xaxis._id===e&&n.yaxis&&n.yaxis._id===t)return!0}return!1}function Ule(e,t,r,i){i=R4(e,[sp(e,t,"x")],[sp(e,r,"y")],t+r);for(var n=0;n<i.length;n++){var a=i[n];a._module.selectPoints(a,!1)}oM(e,i)}function qut(e,t,r,i){for(var n,a=0;a<e.length;a++){var o=e[a];if(!(t!==o.xref||r!==o.yref))if(n){var s=!!o.subtract;n=zle(n,o,s),i=w7(n)}else n=[o],i=x7(o)}return i}function Lle(e,t){for(var r=[],i=e._fullLayout,n=i.selections,a=n.length,o=0;o<a;o++)if(!(t&&o!==i._activeSelectionIndex)){var s=n[o];if(s){var l=s.xref,u=s.yref,f=sp(e,l,"x"),c=sp(e,u,"y"),h,v,p,_,T;if(s.type==="rect"){T=[];var g=xm(f,s.x0),A=xm(f,s.x1),b=xm(c,s.y0),w=xm(c,s.y1);T=[[g,b],[g,w],[A,w],[A,b]],h=Math.min(g,A),v=Math.max(g,A),p=Math.min(b,w),_=Math.max(b,w),T.xmin=h,T.xmax=v,T.ymin=p,T.ymax=_,T.xref=l,T.yref=u,T.subtract=!1,T.isRect=!0,r.push(T)}else if(s.type==="path")for(var k=s.path.split("Z"),x=[],E=0;E<k.length;E++){var M=k[E];if(M){M+="Z";var d=Mle.extractPathCoords(M,Sle.paramIsX,"raw"),C=Mle.extractPathCoords(M,Sle.paramIsY,"raw");h=1/0,v=-1/0,p=1/0,_=-1/0,T=[];for(var S=0;S<d.length;S++){var P=xm(f,d[S]),D=xm(c,C[S]);T.push([P,D]),h=Math.min(P,h),v=Math.max(P,v),p=Math.min(D,p),_=Math.max(D,_)}T.xmin=h,T.xmax=v,T.ymin=p,T.ymax=_,T.xref=l,T.yref=u,T.subtract=T7(T,x),x.push(T),r.push(T)}}}}return r}function T7(e,t){for(var r=!1,i=0;i<t.length;i++)for(var n=t[i],a=0;a<e.length;a++)if(lut(e[a],n)){r=!r;break}return r}function xm(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function Vle(e){for(var t=e.length,r=[],i=0;i<t;i++){var n=e[i];r=r.concat(n),r=r.concat([n[0]])}return zut(r)}function zut(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function Hle(e){return function(t,r){for(var i,n,a=0;a<e.length;a++){var o=e[a],s=o._id,l=s.charAt(0);if(r.isRect){i||(i={});var u=r[l+"min"],f=r[l+"max"];u!==void 0&&f!==void 0&&(i[s]=[Ele(o,u),Ele(o,f)].sort(mut))}else n||(n={}),n[s]=r.map(wut(o))}i&&(t.range=i),n&&(t.lassoPoints=n)}}function Out(e){var t=e.plotinfo;return t.fillRangeItems||Hle(e.xaxes.concat(e.yaxes))}function But(e,t){e.emit("plotly_selecting",t)}function sM(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function A7(e){e.emit("plotly_deselect",null)}Gle.exports={reselect:g7,prepSelect:Aut,clearOutline:Rle,clearSelectionsCache:aM,selectOnClick:Fle}});var M7=ne((zrr,Wle)=>{"use strict";Wle.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var uM=ne((Orr,Xle)=>{"use strict";Xle.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var Lx=ne((Nrr,Kle)=>{"use strict";var Zle=M7(),jle=ll(),D4=wf(),Nut=So().templatedArray,Brr=uM();Kle.exports=Nut("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:jle({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:Zle.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:Zle.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",D4.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",D4.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",D4.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",D4.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:jle({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})});var G0=ne((Urr,Jle)=>{"use strict";Jle.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var Y0=ne((Vrr,Qle)=>{"use strict";Qle.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var cu=ne((Hrr,iue)=>{"use strict";var $le=kl().axisHoverFormat,Uut=Ba().texttemplateAttrs,Vut=Ba().hovertemplateAttrs,eue=Ps(),Hut=ll(),Gut=hc().dash,Yut=hc().pattern,Wut=aa(),Xut=G0(),I4=oa().extendFlat,Zut=Y0();function tue(e){return{valType:"any",dflt:0,editType:"calc"}}function rue(e){return{valType:"any",editType:"calc"}}function nue(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}iue.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:tue("x"),yperiod:tue("y"),xperiod0:rue("x0"),yperiod0:rue("y0"),xperiodalignment:nue("x"),yperiodalignment:nue("y"),xhoverformat:$le("x"),yhoverformat:$le("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:Uut({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:Vut({},{keys:Xut.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:I4({},Gut,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:Zut(!0),fillgradient:I4({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:Yut,marker:I4({symbol:{valType:"enumerated",values:Wut.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:I4({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},eue("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},eue("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Hut({editType:"calc",colorEditType:"style",arrayOk:!0})}});var S7=ne((Yrr,sue)=>{"use strict";var aue=Lx(),oue=cu().line,jut=hc().dash,F4=oa().extendFlat,Kut=Xs().overrideAll,Jut=So().templatedArray,Grr=uM();sue.exports=Kut(Jut("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:F4({},aue.xref,{}),yref:F4({},aue.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:oue.color,width:F4({},oue.width,{min:1,dflt:1}),dash:F4({},jut,{dflt:"dot"})}}),"arraydraw","from-root")});var cue=ne((Wrr,fue)=>{"use strict";var lue=Wt(),q4=Xi(),Qut=ch(),$ut=S7(),uue=ym();fue.exports=function(t,r){Qut(t,r,{name:"selections",handleItemDefaults:eft});for(var i=r.selections,n=0;n<i.length;n++){var a=i[n];a&&a.path===void 0&&(a.x0===void 0||a.x1===void 0||a.y0===void 0||a.y1===void 0)&&(r.selections[n]=null)}};function eft(e,t,r){function i(x,E){return lue.coerce(e,t,$ut,x,E)}var n=i("path"),a=n?"path":"rect",o=i("type",a),s=o!=="path";s&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var l=["x","y"],u=0;u<2;u++){var f=l[u],c={_fullLayout:r},h,v,p,_=q4.coerceRef(e,t,c,f);if(h=q4.getFromId(c,_),h._selectionIndices.push(t._index),p=uue.rangeToShapePosition(h),v=uue.shapePositionToRange(h),s){var T=f+"0",g=f+"1",A=e[T],b=e[g];e[T]=v(e[T],!0),e[g]=v(e[g],!0),q4.coercePosition(t,c,i,_,T),q4.coercePosition(t,c,i,_,g);var w=t[T],k=t[g];w!==void 0&&k!==void 0&&(t[T]=p(w),t[g]=p(k),e[T]=A,e[g]=b)}}s&&lue.noneOrAll(e,t,["x0","x1","y0","y1"])}});var vue=ne((Xrr,hue)=>{"use strict";hue.exports=function(t,r,i){i("newselection.mode");var n=i("newselection.line.width");n&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var fM=ne((Zrr,gue)=>{"use strict";var tft=wi(),due=Wt(),pue=zl();gue.exports=function(t){return function(i,n){var a=i[t];if(Array.isArray(a))for(var o=tft.subplotsRegistry.cartesian,s=o.idRegex,l=n._subplots,u=l.xaxis,f=l.yaxis,c=l.cartesian,h=n._has("cartesian")||n._has("gl2d"),v=0;v<a.length;v++){var p=a[v];if(due.isPlainObject(p)){var _=pue.cleanId(p.xref,"x",!1),T=pue.cleanId(p.yref,"y",!1),g=s.x.test(_),A=s.y.test(T);if(g||A){h||due.pushUnique(n._basePlotModules,o);var b=!1;g&&u.indexOf(_)===-1&&(u.push(_),b=!0),A&&f.indexOf(T)===-1&&(f.push(T),b=!0),b&&g&&A&&c.push(_+T)}}}}}});var Mf=ne((jrr,mue)=>{"use strict";var yue=h7(),cM=Yle();mue.exports={moduleType:"component",name:"selections",layoutAttributes:S7(),supplyLayoutDefaults:cue(),supplyDrawNewSelectionDefaults:vue(),includeBasePlot:fM()("selections"),draw:yue.draw,drawOne:yue.drawOne,reselect:cM.reselect,prepSelect:cM.prepSelect,clearOutline:cM.clearOutline,clearSelectionsCache:cM.clearSelectionsCache,selectOnClick:cM.selectOnClick}});var D7=ne((Krr,Oue)=>{"use strict";var P7=Ai(),lp=Wt(),xue=lp.numberFormat,rft=Xf(),nft=zA(),z4=wi(),kue=lp.strTranslate,ift=Es(),_ue=_i(),_m=aa(),aft=Ol(),bue=Xi(),oft=e0(),sft=Hh(),Cue=r0(),O4=Cue.selectingOrDrawing,lft=Cue.freeMode,uft=Tf().FROM_TL,fft=UA(),cft=ZA().redrawReglTraces,hft=Zs(),k7=zl().getFromId,vft=Mf().prepSelect,dft=Mf().clearOutline,pft=Mf().selectOnClick,E7=a7(),R7=wf(),wue=R7.MINDRAG,xv=R7.MINZOOM,Tue=!0;function gft(e,t,r,i,n,a,o,s){var l=e._fullLayout._zoomlayer,u=o+s==="nsew",f=(o+s).length===1,c,h,v,p,_,T,g,A,b,w,k,x,E,M,d,C,S,P,D,z,O,V,B;r+=t.yaxis._shift;function F(){if(c=t.xaxis,h=t.yaxis,b=c._length,w=h._length,g=c._offset,A=h._offset,v={},v[c._id]=c,p={},p[h._id]=h,o&&s)for(var rt=t.overlays,Xe=0;Xe<rt.length;Xe++){var ft=rt[Xe].xaxis;v[ft._id]=ft;var gt=rt[Xe].yaxis;p[gt._id]=gt}_=Eue(v),T=Eue(p),E=Aue(_,s),M=Aue(T,o),d=!M&&!E,x=Sue(e,e._fullLayout._axisMatchGroups,v,p),k=Sue(e,e._fullLayout._axisConstraintGroups,v,p,x);var Qt=k.isSubplotConstrained||x.isSubplotConstrained;C=s||Qt,S=o||Qt;var Jt=e._fullLayout;P=Jt._has("scattergl"),D=Jt._has("splom"),z=Jt._has("svg")}F();var N=xft(M+E,e._fullLayout.dragmode,u),Z=Pue(t,o+s+"drag",N,r,i,n,a);if(d&&!u)return Z.onmousedown=null,Z.style.pointerEvents="none",Z;var J={element:Z,gd:e,plotinfo:t};J.prepFn=function(rt,Xe,ft){var gt=J.dragmode,Qt=e._fullLayout.dragmode;Qt!==gt&&(J.dragmode=Qt),F(),V=e._fullLayout._invScaleX,B=e._fullLayout._invScaleY,d||(u?rt.shiftKey?Qt==="pan"?Qt="zoom":O4(Qt)||(Qt="pan"):rt.ctrlKey&&(Qt="pan"):Qt="pan"),lft(Qt)?J.minDrag=1:J.minDrag=void 0,O4(Qt)?(J.xaxes=_,J.yaxes=T,vft(rt,Xe,ft,J,Qt)):(J.clickFn=le,O4(gt)&&re(),d||(Qt==="zoom"?(J.moveFn=Ae,J.doneFn=ze,J.minDrag=1,ue(rt,Xe,ft)):Qt==="pan"&&(J.moveFn=Ke,J.doneFn=Se))),e._fullLayout._redrag=function(){var Jt=e._dragdata;if(Jt&&Jt.element===Z){var fr=e._fullLayout.dragmode;O4(fr)||(F(),je([0,0,b,w]),J.moveFn(Jt.dx,Jt.dy))}}};function re(){J.plotinfo.selection=!1,dft(e)}function le(rt,Xe){var ft=J.gd;if(ft._fullLayout._activeShapeIndex>=0){ft._fullLayout._deactivateShape(ft);return}var gt=ft._fullLayout.clickmode;if(L7(ft),rt===2&&!f&&Et(),u)gt.indexOf("select")>-1&&pft(Xe,ft,_,T,t.id,J),gt.indexOf("event")>-1&&aft.click(ft,Xe,t.id);else if(rt===1&&f){var Qt=o?h:c,Jt=o==="s"||s==="w"?0:1,fr=Qt._name+".range["+Jt+"]",nr=yft(Qt,Jt),ur="left",qt="middle";if(Qt.fixedrange)return;o?(qt=o==="n"?"top":"bottom",Qt.side==="right"&&(ur="right")):s==="e"&&(ur="right"),ft._context.showAxisRangeEntryBoxes&&P7.select(Z).call(ift.makeEditable,{gd:ft,immediate:!0,background:ft._fullLayout.paper_bgcolor,text:String(nr),fill:Qt.tickfont?Qt.tickfont.color:"#444",horizontalAlign:ur,verticalAlign:qt}).on("edit",function(xt){var At=Qt.d2r(xt);At!==void 0&&z4.call("_guiRelayout",ft,fr,At)})}}sft.init(J);var fe,K,X,ae,oe,_e,be,he,ie,ye;function ue(rt,Xe,ft){var gt=Z.getBoundingClientRect();fe=Xe-gt.left,K=ft-gt.top,e._fullLayout._calcInverseTransform(e);var Qt=lp.apply3DTransform(e._fullLayout._invTransform)(fe,K);fe=Qt[0],K=Qt[1],X={l:fe,r:fe,w:0,t:K,b:K,h:0},ae=e._hmpixcount?e._hmlumcount/e._hmpixcount:rft(e._fullLayout.plot_bgcolor).getLuminance(),oe="M0,0H"+b+"V"+w+"H0V0",_e=!1,be="xy",ye=!1,he=Rue(l,ae,g,A,oe),ie=Due(l,g,A)}function Ae(rt,Xe){if(e._transitioningWithDuration)return!1;var ft=Math.max(0,Math.min(b,V*rt+fe)),gt=Math.max(0,Math.min(w,B*Xe+K)),Qt=Math.abs(ft-fe),Jt=Math.abs(gt-K);X.l=Math.min(fe,ft),X.r=Math.max(fe,ft),X.t=Math.min(K,gt),X.b=Math.max(K,gt);function fr(){be="",X.r=X.l,X.t=X.b,ie.attr("d","M0,0Z")}if(k.isSubplotConstrained)Qt>xv||Jt>xv?(be="xy",Qt/b>Jt/w?(Jt=Qt*w/b,K>gt?X.t=K-Jt:X.b=K+Jt):(Qt=Jt*b/w,fe>ft?X.l=fe-Qt:X.r=fe+Qt),ie.attr("d",B4(X))):fr();else if(x.isSubplotConstrained)if(Qt>xv||Jt>xv){be="xy";var nr=Math.min(X.l/b,(w-X.b)/w),ur=Math.max(X.r/b,(w-X.t)/w);X.l=nr*b,X.r=ur*b,X.b=(1-nr)*w,X.t=(1-ur)*w,ie.attr("d",B4(X))}else fr();else!M||Jt<Math.min(Math.max(Qt*.6,wue),xv)?Qt<wue||!E?fr():(X.t=0,X.b=w,be="x",ie.attr("d",_ft(X,K))):!E||Qt<Math.min(Jt*.6,xv)?(X.l=0,X.r=b,be="y",ie.attr("d",bft(X,fe))):(be="xy",ie.attr("d",B4(X)));X.w=X.r-X.l,X.h=X.b-X.t,be&&(ye=!0),e._dragged=ye,Iue(he,ie,X,oe,_e,ae),Re(),e.emit("plotly_relayouting",O),_e=!0}function Re(){O={},(be==="xy"||be==="x")&&(C7(_,X.l/b,X.r/b,O,k.xaxes),_t("x",O)),(be==="xy"||be==="y")&&(C7(T,(w-X.b)/w,(w-X.t)/w,O,k.yaxes),_t("y",O))}function ze(){Re(),L7(e),Se(),que(e)}var et=[0,0,b,w],Le=null,Ie=R7.REDRAWDELAY,dt=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ct(rt){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(re(),e._transitioningWithDuration){rt.preventDefault(),rt.stopPropagation();return}F(),clearTimeout(Le);var Xe=-rt.deltaY;if(isFinite(Xe)||(Xe=rt.wheelDelta/10),!isFinite(Xe)){lp.log("Did not find wheel motion attributes: ",rt);return}var ft=Math.exp(-Math.min(Math.max(Xe,-20),20)/200),gt=dt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Qt=(rt.clientX-gt.left)/gt.width,Jt=(gt.bottom-rt.clientY)/gt.height,fr;function nr(ur,qt,xt){if(ur.fixedrange)return;var At=lp.simpleMap(ur.range,ur.r2l),Je=At[0]+(At[1]-At[0])*qt;function xe(ce){return ur.l2r(Je+(ce-Je)*xt)}ur.range=At.map(xe)}if(C){for(s||(Qt=.5),fr=0;fr<_.length;fr++)nr(_[fr],Qt,ft);_t("x"),et[2]*=ft,et[0]+=et[2]*Qt*(1/ft-1)}if(S){for(o||(Jt=.5),fr=0;fr<T.length;fr++)nr(T[fr],Jt,ft);_t("y"),et[3]*=ft,et[1]+=et[3]*(1-Jt)*(1/ft-1)}je(et),zt(),e.emit("plotly_relayouting",O),Le=setTimeout(function(){e._fullLayout&&(et=[0,0,b,w],Se())},Ie),rt.preventDefault()}o.length*s.length!==1&&zue(Z,ct);function Ke(rt,Xe){if(rt=rt*V,Xe=Xe*B,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,E==="ew"||M==="ns"){var ft=E?-rt:0,gt=M?-Xe:0;if(x.isSubplotConstrained){if(E&&M){var Qt=(rt/b-Xe/w)/2;rt=Qt*b,Xe=-Qt*w,ft=-rt,gt=-Xe}M?ft=-gt*b/w:gt=-ft*w/b}E&&(Mue(_,rt),_t("x")),M&&(Mue(T,Xe),_t("y")),je([ft,gt,b,w]),zt(),e.emit("plotly_relayouting",O);return}function Jt(xe,ce,ge){for(var qe=1-ce,yt,Vt,Ut=0;Ut<xe.length;Ut++){var br=xe[Ut];if(!br.fixedrange){yt=br,Vt=br._rl[qe]+(br._rl[ce]-br._rl[qe])/mft(ge/br._length);var xr=br.l2r(Vt);xr!==!1&&xr!==void 0&&(br.range[ce]=xr)}}return yt._length*(yt._rl[ce]-Vt)/(yt._rl[ce]-yt._rl[qe])}var fr=E==="w"==(M==="n")?1:-1;if(E&&M&&(k.isSubplotConstrained||x.isSubplotConstrained)){var nr=(rt/b+fr*Xe/w)/2;rt=nr*b,Xe=fr*nr*w}var ur,qt;if(E==="w"?rt=Jt(_,0,rt):E==="e"?rt=Jt(_,1,-rt):E||(rt=0),M==="n"?Xe=Jt(T,1,Xe):M==="s"?Xe=Jt(T,0,-Xe):M||(Xe=0),ur=E==="w"?rt:0,qt=M==="n"?Xe:0,k.isSubplotConstrained&&!x.isSubplotConstrained||x.isSubplotConstrained&&E&&M&&fr>0){var xt;if(x.isSubplotConstrained||!E&&M.length===1){for(xt=0;xt<_.length;xt++)_[xt].range=_[xt]._r.slice(),E7(_[xt],1-Xe/w);rt=Xe*b/w,ur=rt/2}if(x.isSubplotConstrained||!M&&E.length===1){for(xt=0;xt<T.length;xt++)T[xt].range=T[xt]._r.slice(),E7(T[xt],1-rt/b);Xe=rt*w/b,qt=Xe/2}}(!x.isSubplotConstrained||!M)&&_t("x"),(!x.isSubplotConstrained||!E)&&_t("y");var At=b-rt,Je=w-Xe;x.isSubplotConstrained&&!(E&&M)&&(E?(qt=ur?0:rt*w/b,Je=At*w/b):(ur=qt?0:Xe*b/w,At=Je*b/w)),je([ur,qt,At,Je]),zt(),e.emit("plotly_relayouting",O)}function _t(rt,Xe){for(var ft=x.isSubplotConstrained?{x:T,y:_}[rt]:x[rt+"axes"],gt=x.isSubplotConstrained?{x:_,y:T}[rt]:[],Qt=0;Qt<ft.length;Qt++){var Jt=ft[Qt],fr=Jt._id,nr=x.xLinks[fr]||x.yLinks[fr],ur=gt[0]||v[nr]||p[nr];ur&&(Xe?(Xe[Jt._name+".range[0]"]=Xe[ur._name+".range[0]"],Xe[Jt._name+".range[1]"]=Xe[ur._name+".range[1]"]):Jt.range=ur.range.slice())}}function zt(){var rt=[],Xe;function ft(fr){for(Xe=0;Xe<fr.length;Xe++)fr[Xe].fixedrange||rt.push(fr[Xe]._id)}function gt(fr,nr){for(Xe=0;Xe<fr.length;Xe++){var ur=fr[Xe],qt=ur[nr];!ur.fixedrange&&qt.tickmode==="sync"&&rt.push(qt._id)}}for(C&&(ft(_),ft(k.xaxes),ft(x.xaxes),gt(t.overlays,"xaxis")),S&&(ft(T),ft(k.yaxes),ft(x.yaxes),gt(t.overlays,"yaxis")),O={},Xe=0;Xe<rt.length;Xe++){var Qt=rt[Xe],Jt=k7(e,Qt);bue.drawOne(e,Jt,{skipTitle:!0}),O[Jt._name+".range[0]"]=Jt.range[0],O[Jt._name+".range[1]"]=Jt.range[1]}bue.redrawComponents(e,rt)}function Et(){if(!e._transitioningWithDuration){var rt=e._context.doubleClick,Xe=[];E&&(Xe=Xe.concat(_)),M&&(Xe=Xe.concat(T)),x.xaxes&&(Xe=Xe.concat(x.xaxes)),x.yaxes&&(Xe=Xe.concat(x.yaxes));var ft={},gt,Qt;if(rt==="reset+autosize")for(rt="autosize",Qt=0;Qt<Xe.length;Qt++){gt=Xe[Qt];var Jt=gt._rangeInitial0,fr=gt._rangeInitial1,nr=Jt!==void 0||fr!==void 0;if(nr&&(Jt!==void 0&&Jt!==gt.range[0]||fr!==void 0&&fr!==gt.range[1])||!nr&&gt.autorange!==!0){rt="reset";break}}if(rt==="autosize")for(Qt=0;Qt<Xe.length;Qt++)gt=Xe[Qt],gt.fixedrange||(ft[gt._name+".autorange"]=!0);else if(rt==="reset"){for((E||k.isSubplotConstrained)&&(Xe=Xe.concat(k.xaxes)),M&&!k.isSubplotConstrained&&(Xe=Xe.concat(k.yaxes)),k.isSubplotConstrained&&(E?M||(Xe=Xe.concat(T)):Xe=Xe.concat(_)),Qt=0;Qt<Xe.length;Qt++)if(gt=Xe[Qt],!gt.fixedrange){var ur=gt._name,qt=gt._autorangeInitial;gt._rangeInitial0===void 0&&gt._rangeInitial1===void 0?ft[ur+".autorange"]=!0:gt._rangeInitial0===void 0?(ft[ur+".autorange"]=qt,ft[ur+".range"]=[null,gt._rangeInitial1]):gt._rangeInitial1===void 0?(ft[ur+".range"]=[gt._rangeInitial0,null],ft[ur+".autorange"]=qt):ft[ur+".range"]=[gt._rangeInitial0,gt._rangeInitial1]}}e.emit("plotly_doubleclick",null),z4.call("_guiRelayout",e,ft)}}function Se(){je([0,0,b,w]),lp.syncOrAsync([hft.previousPromises,function(){e._fullLayout._replotting=!1,z4.call("_guiRelayout",e,O)}],e)}function je(rt){var Xe=e._fullLayout,ft=Xe._plots,gt=Xe._subplots.cartesian,Qt,Jt,fr,nr;if(D&&z4.subplotsRegistry.splom.drag(e),P){for(Qt=0;Qt<gt.length;Qt++)if(Jt=ft[gt[Qt]],fr=Jt.xaxis,nr=Jt.yaxis,Jt._scene){var ur=lp.simpleMap(fr.range,fr.r2l),qt=lp.simpleMap(nr.range,nr.r2l);fr.limitRange&&fr.limitRange(),nr.limitRange&&nr.limitRange(),ur=fr.range,qt=nr.range,Jt._scene.update({range:[ur[0],qt[0],ur[1],qt[1]]})}}if((D||P)&&(fft(e),cft(e)),z){var xt=rt[2]/c._length,At=rt[3]/h._length;for(Qt=0;Qt<gt.length;Qt++){Jt=ft[gt[Qt]],fr=Jt.xaxis,nr=Jt.yaxis;var Je=(C||x.isSubplotConstrained)&&!fr.fixedrange&&v[fr._id],xe=(S||x.isSubplotConstrained)&&!nr.fixedrange&&p[nr._id],ce,ge,qe,yt;if(Je?(ce=xt,qe=s||x.isSubplotConstrained?rt[0]:lt(fr,ce)):x.xaHash[fr._id]?(ce=xt,qe=rt[0]*fr._length/c._length):x.yaHash[fr._id]?(ce=At,qe=M==="ns"?-rt[1]*fr._length/h._length:lt(fr,ce,{n:"top",s:"bottom"}[M])):(ce=ht(fr,xt,At),qe=nt(fr,ce)),ce>1&&(fr.maxallowed!==void 0&&C===(fr.range[0]<fr.range[1]?"e":"w")||fr.minallowed!==void 0&&C===(fr.range[0]<fr.range[1]?"w":"e"))&&(ce=1,qe=0),xe?(ge=At,yt=o||x.isSubplotConstrained?rt[1]:lt(nr,ge)):x.yaHash[nr._id]?(ge=At,yt=rt[1]*nr._length/h._length):x.xaHash[nr._id]?(ge=xt,yt=E==="ew"?-rt[0]*nr._length/c._length:lt(nr,ge,{e:"right",w:"left"}[E])):(ge=ht(nr,xt,At),yt=nt(nr,ge)),ge>1&&(nr.maxallowed!==void 0&&S===(nr.range[0]<nr.range[1]?"n":"s")||nr.minallowed!==void 0&&S===(nr.range[0]<nr.range[1]?"s":"n"))&&(ge=1,yt=0),!(!ce&&!ge)){ce||(ce=1),ge||(ge=1);var Vt=fr._offset-qe/ce,Ut=nr._offset-yt/ge;Jt.clipRect.call(_m.setTranslate,qe,yt).call(_m.setScale,ce,ge),Jt.plot.call(_m.setTranslate,Vt,Ut).call(_m.setScale,1/ce,1/ge),(ce!==Jt.xScaleFactor||ge!==Jt.yScaleFactor)&&(_m.setPointGroupScale(Jt.zoomScalePts,ce,ge),_m.setTextPointsScale(Jt.zoomScaleTxt,ce,ge)),_m.hideOutsideRangePoints(Jt.clipOnAxisFalseTraces,Jt),Jt.xScaleFactor=ce,Jt.yScaleFactor=ge}}}}function ht(rt,Xe,ft){return rt.fixedrange?0:C&&k.xaHash[rt._id]?Xe:S&&(k.isSubplotConstrained?k.xaHash:k.yaHash)[rt._id]?ft:0}function nt(rt,Xe){return Xe?(rt.range=rt._r.slice(),E7(rt,Xe),lt(rt,Xe)):0}function lt(rt,Xe,ft){return rt._length*(1-Xe)*uft[ft||rt.constraintoward||"middle"]}return Z}function Lue(e,t,r,i){var n=lp.ensureSingle(e.draglayer,t,r,function(a){a.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return n.call(oft,i),n.node()}function Pue(e,t,r,i,n,a,o){var s=Lue(e,"rect",t,r);return P7.select(s).call(_m.setRect,i,n,a,o),s}function Aue(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function yft(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),n;return e.type==="date"?r:e.type==="log"?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,xue("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,xue("."+String(n)+"g")(r))}function C7(e,t,r,i,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s=o._id.charAt(0)==="y",l=s?1-t:t,u=s?1-r:r;i[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),i[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var f=o._rl[0],c=o._rl[1]-f;i[o._name+".range[0]"]=o.l2r(f+c*t),i[o._name+".range[1]"]=o.l2r(f+c*r)}}if(n&&n.length){var h=(t+(1-r))/2;C7(n,h,1-h,i,[])}}function Mue(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var n=0,a=i._length,o=i.p2l(n+t)-i.p2l(n),s=i.p2l(a+t)-i.p2l(a),l=(o+s)/2;i.range=[i.l2r(i._rl[0]-l),i.l2r(i._rl[1]-l)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function mft(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function xft(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function Rue(e,t,r,i,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",kue(r,i)).attr("d",n+"Z")}function Due(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:_ue.background,stroke:_ue.defaultLine,"stroke-width":1,opacity:0}).attr("transform",kue(t,r)).attr("d","M0,0Z")}function Iue(e,t,r,i,n,a){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),Fue(e,t,n,a)}function Fue(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function L7(e){P7.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function que(e){Tue&&e.data&&e._context.showTips&&(lp.notifier(lp._(e,"Double-click to zoom back out"),"long"),Tue=!1)}function _ft(e,t){return"M"+(e.l-.5)+","+(t-xv-.5)+"h-3v"+(2*xv+1)+"h3ZM"+(e.r+.5)+","+(t-xv-.5)+"h3v"+(2*xv+1)+"h-3Z"}function bft(e,t){return"M"+(t-xv-.5)+","+(e.t-.5)+"v-3h"+(2*xv+1)+"v3ZM"+(t-xv-.5)+","+(e.b+.5)+"v3h"+(2*xv+1)+"v-3Z"}function B4(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,xv)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Sue(e,t,r,i,n){for(var a=!1,o={},s={},l,u,f,c,h=(n||{}).xaHash,v=(n||{}).yaHash,p=0;p<t.length;p++){var _=t[p];for(l in r)if(_[l]){for(f in _)!(n&&(h[f]||v[f]))&&!(f.charAt(0)==="x"?r:i)[f]&&(o[f]=l);for(u in i)!(n&&(h[u]||v[u]))&&_[u]&&(a=!0)}for(u in i)if(_[u])for(c in _)!(n&&(h[c]||v[c]))&&!(c.charAt(0)==="x"?r:i)[c]&&(s[c]=u)}a&&(lp.extendFlat(o,s),s={});var T={},g=[];for(f in o){var A=k7(e,f);g.push(A),T[A._id]=A}var b={},w=[];for(c in s){var k=k7(e,c);w.push(k),b[k._id]=k}return{xaHash:T,yaHash:b,xaxes:g,yaxes:w,xLinks:o,yLinks:s,isSubplotConstrained:a}}function zue(e,t){if(!nft)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function Eue(e){var t=[];for(var r in e)t.push(e[r]);return t}Oue.exports={makeDragBox:gft,makeDragger:Lue,makeRectDragger:Pue,makeZoombox:Rue,makeCorners:Due,updateZoombox:Iue,xyCorners:B4,transitionZoombox:Fue,removeZoombox:L7,showDoubleClickNotifier:que,attachWheelEventHandler:zue}});var I7=ne(U4=>{"use strict";var wft=Ai(),N4=Ol(),Tft=Hh(),Aft=e0(),i0=D7().makeDragBox,ec=wf().DRAGGERSIZE;U4.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){wft.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(a,o){if((r._plots[a].mainplot&&!0)===(r._plots[o].mainplot&&!0)){var s=a.split("y"),l=o.split("y");return s[0]===l[0]?Number(s[1]||1)-Number(l[1]||1):Number(s[0]||1)-Number(l[0]||1)}return r._plots[a].mainplot?1:-1});i.forEach(function(a){var o=r._plots[a],s=o.xaxis,l=o.yaxis;if(!o.mainplot){var u=i0(t,o,s._offset,l._offset,s._length,l._length,"ns","ew");u.onmousemove=function(h){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===a&&t._fullLayout._plots[a]&&N4.hover(t,h,a)},N4.hover(t,h,a),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=a},u.onmouseout=function(h){t._dragging||(t._fullLayout._hoversubplot=null,Tft.unhover(t,h))},t._context.showAxisDragHandles&&(i0(t,o,s._offset-ec,l._offset-ec,ec,ec,"n","w"),i0(t,o,s._offset+s._length,l._offset-ec,ec,ec,"n","e"),i0(t,o,s._offset-ec,l._offset+l._length,ec,ec,"s","w"),i0(t,o,s._offset+s._length,l._offset+l._length,ec,ec,"s","e"))}if(t._context.showAxisDragHandles){if(a===s._mainSubplot){var f=s._mainLinePosition;s.side==="top"&&(f-=ec),i0(t,o,s._offset+s._length*.1,f,s._length*.8,ec,"","ew"),i0(t,o,s._offset,f,s._length*.1,ec,"","w"),i0(t,o,s._offset+s._length*.9,f,s._length*.1,ec,"","e")}if(a===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=ec),i0(t,o,c,l._offset+l._length*.1,ec,l._length*.8,"ns",""),i0(t,o,c,l._offset+l._length*.9,ec,l._length*.1,"s",""),i0(t,o,c,l._offset,ec,l._length*.1,"n","")}}});var n=r._hoverlayer.node();n.onmousemove=function(a){a.target=t._fullLayout._lasthover,N4.hover(t,a,r._hoversubplot)},n.onclick=function(a){a.target=t._fullLayout._lasthover,N4.click(t,a)},n.onmousedown=function(a){t._fullLayout._lasthover.onmousedown(a)},U4.updateFx(t)}};U4.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";Aft(t._draggers,r)}});var Uue=ne((Qrr,Nue)=>{"use strict";var Bue=wi();Nue.exports=function(t){for(var r=Bue.layoutArrayContainers,i=Bue.layoutArrayRegexes,n=t.split("[")[0],a,o,s=0;s<i.length;s++)if(o=t.match(i[s]),o&&o.index===0){a=o[0];break}if(a||(a=r[r.indexOf(n)]),!a)return!1;var l=t.substr(a.length);return l?(o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:a,index:Number(o[1]),property:o[3]||""}:!1):{array:a,index:"",property:""}}});var Hue=ne(vM=>{"use strict";var Mft=Lg(),F7=Ok(),hM=Wy(),Sft=Jk().sorterAsc,q7=wi();vM.containerArrayMatch=Uue();var Eft=vM.isAddVal=function(t){return t==="add"||Mft(t)},Vue=vM.isRemoveVal=function(t){return t===null||t==="remove"};vM.applyContainerArrayChanges=function(t,r,i,n,a){var o=r.astr,s=q7.getComponentMethod(o,"supplyLayoutDefaults"),l=q7.getComponentMethod(o,"draw"),u=q7.getComponentMethod(o,"drawOne"),f=n.replot||n.recalc||s===F7||l===F7,c=t.layout,h=t._fullLayout;if(i[""]){Object.keys(i).length>1&&hM.warn("Full array edits are incompatible with other edits",o);var v=i[""][""];if(Vue(v))r.set(null);else if(Array.isArray(v))r.set(v);else return hM.warn("Unrecognized full array edit value",o,v),!0;return f?!1:(s(c,h),l(t),!0)}var p=Object.keys(i).map(Number).sort(Sft),_=r.get(),T=_||[],g=a(h,o).get(),A=[],b=-1,w=T.length,k,x,E,M,d,C,S,P;for(k=0;k<p.length;k++){if(E=p[k],M=i[E],d=Object.keys(M),C=M[""],S=Eft(C),E<0||E>T.length-(S?0:1)){hM.warn("index out of range",o,E);continue}if(C!==void 0)d.length>1&&hM.warn("Insertion & removal are incompatible with edits to the same index.",o,E),Vue(C)?A.push(E):S?(C==="add"&&(C={}),T.splice(E,0,C),g&&g.splice(E,0,{})):hM.warn("Unrecognized full object edit value",o,E,C),b===-1&&(b=E);else for(x=0;x<d.length;x++)P=o+"["+E+"].",a(T[E],d[x],P).set(M[d[x]])}for(k=A.length-1;k>=0;k--)T.splice(A[k],1),g&&g.splice(A[k],1);if(T.length?_||r.set(T):r.set(null),f)return!1;if(s(c,h),u!==F7){var D;if(b===-1)D=p;else{for(w=Math.max(T.length,w),D=[],k=0;k<p.length&&(E=p[k],!(E>=b));k++)D.push(E);for(k=b;k<w;k++)D.push(k)}for(k=0;k<D.length;k++)u(t,D[k])}else l(t);return!0}});var Kue=ne(up=>{"use strict";var Xue=la(),kft=Tq(),Zue=wi(),bv=Wt(),pM=Zs(),jue=zl(),Px=_i(),gM=jue.cleanId,Cft=jue.getFromTrace,dM=Zue.traceIs;up.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&bv.log("Clearing previous rejected promises from queue."),e._promises=[]};up.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(pM.subplotsRegistry.cartesian||{}).attrRegex,n=(pM.subplotsRegistry.polar||{}).attrRegex,a=(pM.subplotsRegistry.ternary||{}).attrRegex,o=(pM.subplotsRegistry.gl3d||{}).attrRegex,s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(i&&i.test(l)){var u=e[l];u.anchor&&u.anchor!=="free"&&(u.anchor=gM(u.anchor)),u.overlaying&&(u.overlaying=gM(u.overlaying)),u.type||(u.isdate?u.type="date":u.islog?u.type="log":u.isdate===!1&&u.islog===!1&&(u.type="linear")),(u.autorange==="withzero"||u.autorange==="tozero")&&(u.autorange=!0,u.rangemode="tozero"),u.insiderange&&delete u.range,delete u.islog,delete u.isdate,delete u.categories,V4(u,"domain")&&delete u.domain,u.autotick!==void 0&&(u.tickmode===void 0&&(u.tickmode=u.autotick?"auto":"linear"),delete u.autotick),_v(u)}else if(n&&n.test(l)){var f=e[l];_v(f.radialaxis)}else if(a&&a.test(l)){var c=e[l];_v(c.aaxis),_v(c.baxis),_v(c.caxis)}else if(o&&o.test(l)){var h=e[l],v=h.cameraposition;if(Array.isArray(v)&&v[0].length===4){var p=v[0],_=v[1],T=v[2],g=kft([],p),A=[];for(r=0;r<3;++r)A[r]=_[r]+T*g[2+4*r];h.camera={eye:{x:A[0],y:A[1],z:A[2]},center:{x:_[0],y:_[1],z:_[2]},up:{x:0,y:0,z:1}},delete h.cameraposition}_v(h.xaxis),_v(h.yaxis),_v(h.zaxis)}}var b=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<b;t++){var w=e.annotations[t];bv.isPlainObject(w)&&(w.ref&&(w.ref==="paper"?(w.xref="paper",w.yref="paper"):w.ref==="data"&&(w.xref="x",w.yref="y"),delete w.ref),z2(w,"xref"),z2(w,"yref"))}var k=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<k;t++){var x=e.shapes[t];bv.isPlainObject(x)&&(z2(x,"xref"),z2(x,"yref"))}var E=Array.isArray(e.images)?e.images.length:0;for(t=0;t<E;t++){var M=e.images[t];bv.isPlainObject(M)&&(z2(M,"xref"),z2(M,"yref"))}var d=e.legend;return d&&(d.x>3?(d.x=1.02,d.xanchor="left"):d.x<-2&&(d.x=-.02,d.xanchor="right"),d.y>3?(d.y=1.02,d.yanchor="bottom"):d.y<-2&&(d.y=-.02,d.yanchor="top")),_v(e),e.dragmode==="rotate"&&(e.dragmode="orbit"),Px.clean(e),e.template&&e.template.layout&&up.cleanLayout(e.template.layout),e};function z2(e,t){var r=e[t],i=t.charAt(0);r&&r!=="paper"&&(e[t]=gM(r,i,!0))}function _v(e){e&&((typeof e.title=="string"||typeof e.title=="number")&&(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"));function t(r,i){var n=e[r],a=e.title&&e.title[i];n&&!a&&(e.title||(e.title={}),e.title[i]=e[r],delete e[r])}}up.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.error_y&&"opacity"in r.error_y){var n=Px.defaults,a=r.error_y.color||(dM(r,"bar")?Px.defaultLine:n[t%n.length]);r.error_y.color=Px.addOpacity(Px.rgb(a),Px.opacity(a)*r.error_y.opacity),delete r.error_y.opacity}if("bardir"in r&&(r.bardir==="h"&&(dM(r,"bar")||r.type.substr(0,9)==="histogram")&&(r.orientation="h",up.swapXYData(r)),delete r.bardir),r.type==="histogramy"&&up.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=gM(r.xaxis,"x")),r.yaxis&&(r.yaxis=gM(r.yaxis,"y")),dM(r,"gl3d")&&r.scene&&(r.scene=pM.subplotsRegistry.gl3d.cleanId(r.scene)),!dM(r,"pie-like")&&!dM(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=Yue(r.textposition[i]);else r.textposition&&(r.textposition=Yue(r.textposition));var o=Zue.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container,l=s?r[s]:r;l&&l.colorscale&&(l.colorscale==="YIGnBu"&&(l.colorscale="YlGnBu"),l.colorscale==="YIOrRd"&&(l.colorscale="YlOrRd"))}if(r.type==="surface"&&bv.isPlainObject(r.contours)){var u=["x","y","z"];for(i=0;i<u.length;i++){var f=r.contours[u[i]];bv.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var c=(r.increasing||{}).showlegend!==!1,h=(r.decreasing||{}).showlegend!==!1,v=Gue(r.increasing),p=Gue(r.decreasing);if(v!==!1&&p!==!1){var _=Lft(v,p,c,h);_&&(r.name=_)}else(v||p)&&!r.name&&(r.name=v||p)}if(Array.isArray(r.transforms)){var T=r.transforms;for(i=0;i<T.length;i++){var g=T[i];if(bv.isPlainObject(g))switch(g.type){case"filter":g.filtersrc&&(g.target=g.filtersrc,delete g.filtersrc),g.calendar&&(g.valuecalendar||(g.valuecalendar=g.calendar),delete g.calendar);break;case"groupby":if(g.styles=g.styles||g.style,g.styles&&!Array.isArray(g.styles)){var A=g.styles,b=Object.keys(A);g.styles=[];for(var w=0;w<b.length;w++)g.styles.push({target:b[w],value:A[b[w]]})}break}}}V4(r,"line")&&delete r.line,"marker"in r&&(V4(r.marker,"line")&&delete r.marker.line,V4(r,"marker")&&delete r.marker),Px.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins),_v(r),r.colorbar&&_v(r.colorbar),r.marker&&r.marker.colorbar&&_v(r.marker.colorbar),r.line&&r.line.colorbar&&_v(r.line.colorbar),r.aaxis&&_v(r.aaxis),r.baxis&&_v(r.baxis)}};function Gue(e){if(!bv.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function Lft(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length),a;for(a=0;a<n&&e.charAt(a)===t.charAt(a);a++);var o=e.substr(0,a);return o.trim()}function Yue(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function V4(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}up.swapXYData=function(e){var t;if(bv.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);bv.swapAttrs(e,["error_?.copy_ystyle"]),i&&bv.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++)n[t]==="x"?n[t]="y":n[t]==="y"&&(n[t]="x");e.hoverinfo=n.join("+")}};up.coerceTraceIndices=function(e,t){if(Xue(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(n,a){return a});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)bv.isIndex(t[i],e.data.length)?r.push(t[i]):bv.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};up.manageArrayContainers=function(e,t,r){var i=e.obj,n=e.parts,a=n.length,o=n[a-1],s=Xue(o);if(s&&t===null){var l=n.slice(0,a-1).join("."),u=bv.nestedProperty(i,l).get();u.splice(o,1)}else s&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var Pft=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function Wue(e){var t=e.search(Pft);if(t>0)return e.substr(0,t)}up.hasParent=function(e,t){for(var r=Wue(t);r;){if(r in e)return!0;r=Wue(r)}return!1};var Rft=["x","y","z"];up.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var n=e._fullData[i],a=0;a<3;a++){var o=Cft(e,n,Rft[a]);if(o&&o.type!=="log"){var s=o._name,l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==void 0)continue;s=l+"."+s}var u=s+".type";r[s]===void 0&&r[u]===void 0&&bv.nestedProperty(e.layout,u).set(null)}}}});var eL=ne(No=>{"use strict";var Y4=Ai(),Dft=la(),Ift=Gq(),fi=Wt(),Js=fi.nestedProperty,B7=l2(),wv=Ote(),fp=wi(),Q4=tm(),Ta=Zs(),Xh=Xi(),Fft=cO(),qft=dc(),z7=aa(),zft=_i(),Oft=I7().initInteractions,Bft=kd(),Nft=Mf().clearOutline,tfe=$1().dfltConfig,H4=Hue(),tf=Kue(),gs=ZA(),bm=Xs(),Uft=wf().AX_NAME_PATTERN,O7=0,Jue=5;function Vft(e,t,r,i){var n;if(e=fi.getGraphDiv(e),B7.init(e),fi.isPlainObject(t)){var a=t;t=a.data,r=a.layout,i=a.config,n=a.frames}var o=B7.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(o===!1)return Promise.reject();!t&&!r&&!fi.isPlotDiv(e)&&fi.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function s(){if(n)return No.addFrames(e,n)}nfe(e,i),r||(r={}),Y4.select(e).classed("js-plotly-plot",!0),z7.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var l=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(tf.cleanData(t),l?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||l)&&(e.layout=tf.cleanLayout(r)),Ta.supplyDefaults(e);var u=e._fullLayout,f=u._has("cartesian");u._replotting=!0,(l||u._shouldCreateBgLayer)&&(fct(e),u._shouldCreateBgLayer&&delete u._shouldCreateBgLayer),z7.initGradients(e),z7.initPatterns(e),l&&Xh.saveShowSpikeInitial(e);var c=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;c&&Ta.doCalcdata(e);for(var h=0;h<e.calcdata.length;h++)e.calcdata[h][0].trace=e._fullData[h];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){fi.isHidden(e)||Ta.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):fi.clearResponsive(e);var v=fi.extendFlat({},u._size),p=0;function _(){for(var E=u._basePlotModules,M=0;M<E.length;M++)E[M].drawFramework&&E[M].drawFramework(e);!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(P){return P.key}),u._glcanvas.enter().append("canvas").attr("class",function(P){return"gl-canvas gl-canvas-"+P.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var d=e._context.plotGlPixelRatio;if(u._glcanvas){u._glcanvas.attr("width",u.width*d).attr("height",u.height*d).style("width",u.width+"px").style("height",u.height+"px");var C=u._glcanvas.data()[0].regl;if(C&&(Math.floor(u.width*d)!==C._gl.drawingBufferWidth||Math.floor(u.height*d)!==C._gl.drawingBufferHeight)){var S="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(p)fi.error(S);else return fi.log(S+" Clearing graph and plotting again."),Ta.cleanPlot([],{},e._fullData,u),Ta.supplyDefaults(e),u=e._fullLayout,Ta.doCalcdata(e),p++,_()}}return u.modebar.orientation==="h"?u._modebardiv.style("height",null).style("width","100%"):u._modebardiv.style("width",null).style("height",u.height+"px"),Ta.previousPromises(e)}function T(){if(Ta.clearAutoMarginIds(e),gs.drawMarginPushers(e),Xh.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&Ta.allowAutoMargin(e,"title.automargin"),u._has("pie"))for(var E=e._fullData,M=0;M<E.length;M++){var d=E[M];d.type==="pie"&&d.automargin&&Ta.allowAutoMargin(e,"pie."+d.uid+".automargin")}return Ta.doAutoMargin(e),Ta.previousPromises(e)}function g(){if(Ta.didMarginChange(v,u._size))return fi.syncOrAsync([T,gs.layoutStyles],e)}function A(){if(!c){b();return}return fi.syncOrAsync([fp.getComponentMethod("shapes","calcAutorange"),fp.getComponentMethod("annotations","calcAutorange"),b],e)}function b(){e._transitioning||(gs.doAutoRangeAndConstraints(e),l&&Xh.saveRangeInitial(e),fp.getComponentMethod("rangeslider","calcAutorange")(e))}function w(){return Xh.draw(e,l?"":"redraw")}var k=[Ta.previousPromises,s,_,T,g];f&&k.push(A),k.push(gs.layoutStyles),f&&k.push(w,function(M){var d=M._fullLayout._insideTickLabelsUpdaterange;if(d)return M._fullLayout._insideTickLabelsUpdaterange=void 0,yM(M,d).then(function(){Xh.saveRangeInitial(M,!0)})}),k.push(gs.drawData,gs.finalDraw,Oft,Ta.addLinks,Ta.rehover,Ta.redrag,Ta.reselect,Ta.doAutoMargin,Ta.previousPromises);var x=fi.syncOrAsync(k,e);return(!x||!x.then)&&(x=Promise.resolve()),x.then(function(){return mM(e),e})}function mM(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function Hft(e){return fi.extendFlat(tfe,e)}function rfe(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){fi.error(r)}}function Gft(e,t){var r=zft.combine(t,"white");rfe(e,r)}function nfe(e,t){if(!e._context){e._context=fi.extendDeep({},tfe);var r=Y4.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,n,a,o;if(t){for(a=Object.keys(t),n=0;n<a.length;n++)o=a[n],!(o==="editable"||o==="edits")&&o in i&&(o==="setBackground"&&t[o]==="opaque"?i[o]=Gft:i[o]=t[o]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var s=t.editable;if(s!==void 0)for(i.editable=s,a=Object.keys(i.edits),n=0;n<a.length;n++)i.edits[a[n]]=s;if(t.edits)for(a=Object.keys(t.edits),n=0;n<a.length;n++)o=a[n],o in i.edits&&(i.edits[o]=t.edits[o]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Ift&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=rfe),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var l=i.scrollZoom,u=i._scrollZoom={};if(l===!0)u.cartesian=1,u.gl3d=1,u.geo=1,u.mapbox=1;else if(typeof l=="string"){var f=l.split("+");for(n=0;n<f.length;n++)u[f[n]]=1}else l!==!1&&(u.gl3d=1,u.geo=1,u.mapbox=1)}function Yft(e){if(e=fi.getGraphDiv(e),!fi.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return tf.cleanData(e.data),tf.cleanLayout(e.layout),e.calcdata=void 0,No._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function Wft(e,t,r,i){return e=fi.getGraphDiv(e),Ta.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),Ta.purge(e),No._doPlot(e,t,r,i)}function W4(e,t){var r=t+1,i=[],n,a;for(n=0;n<e.length;n++)a=e[n],a<0?i.push(r+a):i.push(a);return i}function X4(e,t,r){var i,n;for(i=0;i<t.length;i++){if(n=t[i],n!==parseInt(n,10))throw new Error("all values in "+r+" must be integers");if(n>=e.data.length||n<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(n,i+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1)throw new Error("each index in "+r+" must be unique.")}}function ife(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),X4(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&X4(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function Xft(e,t,r){var i,n;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(n=t[i],typeof n!="object"||Array.isArray(n)||n===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Zft(e,t,r,i){var n=fi.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!fi.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");X4(e,r,"indices");for(var a in t){if(!Array.isArray(t[a])||t[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(n&&(!(a in i)||!Array.isArray(i[a])||i[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function jft(e,t,r,i){var n=fi.isPlainObject(i),a=[],o,s,l,u,f;Array.isArray(r)||(r=[r]),r=W4(r,e.data.length-1);for(var c in t)for(var h=0;h<r.length;h++){if(o=e.data[r[h]],l=Js(o,c),s=l.get(),u=t[c][h],!fi.isArrayOrTypedArray(u))throw new Error("attribute: "+c+" index: "+h+" must be an array");if(!fi.isArrayOrTypedArray(s))throw new Error("cannot extend missing or non-array attribute: "+c);if(s.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+c);f=n?i[c][h]:i,Dft(f)||(f=-1),a.push({prop:l,target:s,insert:u,maxp:Math.floor(f)})}return a}function afe(e,t,r,i,n){Zft(e,t,r,i);for(var a=jft(e,t,r,i),o={},s={},l=0;l<a.length;l++){var u=a[l].prop,f=a[l].maxp,c=n(a[l].target,a[l].insert,f);u.set(c[0]),Array.isArray(o[u.astr])||(o[u.astr]=[]),o[u.astr].push(c[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function ofe(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function sfe(e,t,r,i){e=fi.getGraphDiv(e);function n(l,u,f){var c,h;if(fi.isTypedArray(l))if(f<0){var v=new l.constructor(0),p=ofe(l,u);f<0?(c=p,h=v):(c=v,h=p)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var _=u.length-f;c.set(u.subarray(_)),h.set(l),h.set(u.subarray(0,_),l.length)}else{var T=f-u.length,g=l.length-T;c.set(l.subarray(g)),c.set(u,T),h.set(l.subarray(0,g))}else c=l.concat(u),h=f>=0&&f<c.length?c.splice(0,c.length-f):[];return[c,h]}var a=afe(e,t,r,i,n),o=No.redraw(e),s=[e,a.update,r,a.maxPoints];return wv.add(e,No.prependTraces,s,sfe,arguments),o}function lfe(e,t,r,i){e=fi.getGraphDiv(e);function n(l,u,f){var c,h;if(fi.isTypedArray(l))if(f<=0){var v=new l.constructor(0),p=ofe(u,l);f<0?(c=p,h=v):(c=v,h=p)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var _=u.length-f;c.set(u.subarray(0,_)),h.set(u.subarray(_)),h.set(l,_)}else{var T=f-u.length;c.set(u),c.set(l.subarray(0,T),u.length),h.set(l.subarray(T))}else c=u.concat(l),h=f>=0&&f<c.length?c.splice(f,c.length):[];return[c,h]}var a=afe(e,t,r,i,n),o=No.redraw(e),s=[e,a.update,r,a.maxPoints];return wv.add(e,No.extendTraces,s,lfe,arguments),o}function ufe(e,t,r){e=fi.getGraphDiv(e);var i=[],n=No.deleteTraces,a=ufe,o=[e,i],s=[e,t],l,u;for(Xft(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(f){return fi.extendFlat({},f)}),tf.cleanData(t),l=0;l<t.length;l++)e.data.push(t[l]);for(l=0;l<t.length;l++)i.push(-t.length+l);if(typeof r=="undefined")return u=No.redraw(e),wv.add(e,n,o,a,s),u;Array.isArray(r)||(r=[r]);try{ife(e,i,r)}catch(f){throw e.data.splice(e.data.length-t.length,t.length),f}return wv.startSequence(e),wv.add(e,n,o,a,s),u=No.moveTraces(e,i,r),wv.stopSequence(e),u}function ffe(e,t){e=fi.getGraphDiv(e);var r=[],i=No.addTraces,n=ffe,a=[e,r,t],o=[e,t],s,l;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),X4(e,t,"indices"),t=W4(t,e.data.length-1),t.sort(fi.sorterDes),s=0;s<t.length;s+=1)l=e.data.splice(t[s],1)[0],r.push(l);var u=No.redraw(e);return wv.add(e,i,a,n,o),u}function N7(e,t,r){e=fi.getGraphDiv(e);var i=[],n=[],a=N7,o=N7,s=[e,r,t],l=[e,t,r],u;if(ife(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],u=0;u<t.length;u++)r.push(-t.length+u);for(r=Array.isArray(r)?r:[r],t=W4(t,e.data.length-1),r=W4(r,e.data.length-1),u=0;u<e.data.length;u++)t.indexOf(u)===-1&&i.push(e.data[u]);for(u=0;u<t.length;u++)n.push({newIndex:r[u],trace:e.data[t[u]]});for(n.sort(function(c,h){return c.newIndex-h.newIndex}),u=0;u<n.length;u+=1)i.splice(n[u].newIndex,0,n[u].trace);e.data=i;var f=No.redraw(e);return wv.add(e,a,s,o,l),f}function Z4(e,t,r,i){e=fi.getGraphDiv(e),tf.clearPromiseQueue(e);var n={};if(typeof t=="string")n[t]=r;else if(fi.isPlainObject(t))n=fi.extendFlat({},t),i===void 0&&(i=r);else return fi.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(n).length&&(e.changed=!0);var a=tf.coerceTraceIndices(e,i),o=cfe(e,n,a),s=o.flags;s.calc&&(e.calcdata=void 0),s.clearAxisTypes&&tf.clearAxisTypes(e,a,{});var l=[];s.fullReplot?l.push(No._doPlot):(l.push(Ta.previousPromises),Ta.supplyDefaults(e),s.markerSize&&(Ta.doCalcdata(e),$4(l)),s.style&&l.push(gs.doTraceStyle),s.colorbars&&l.push(gs.doColorBars),l.push(mM)),l.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,Z4,[e,o.undoit,o.traces],Z4,[e,o.redoit,o.traces]);var u=fi.syncOrAsync(l,e);return(!u||!u.then)&&(u=Promise.resolve()),u.then(function(){return e.emit("plotly_restyle",o.eventData),e})}function Yg(e){return e===void 0?null:e}function G4(e,t){return t?function(r,i,n){var a=Js(r,i),o=a.set;return a.set=function(s){var l=(n||"")+i;j4(l,a.get(),s,e),o(s)},a}:Js}function j4(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var n=Array.isArray(t)?t:[],a=Array.isArray(r)?r:[],o=Math.max(n.length,a.length),s=0;s<o;s++)j4(e+"["+s+"]",n[s],a[s],i);else if(fi.isPlainObject(t)||fi.isPlainObject(r)){var l=fi.isPlainObject(t)?t:{},u=fi.isPlainObject(r)?r:{},f=fi.extendFlat({},l,u);for(var c in f)j4(e+"."+c,l[c],u[c],i)}else i[e]===void 0&&(i[e]=Yg(t))}function Kft(e,t,r){for(var i in r){var n=Js(e,i);j4(i,n.get(),r[i],t)}}function cfe(e,t,r){var i=e._fullLayout,n=e._fullData,a=e.data,o=i._guiEditing,s=G4(i._preGUI,o),l=fi.extendDeepAll({},t),u;hfe(t);var f=bm.traceFlags(),c={},h={},v;function p(){return r.map(function(){})}function _(ie){var ye=Xh.id2name(ie);v.indexOf(ye)===-1&&v.push(ye)}function T(ie){return"LAYOUT"+ie+".autorange"}function g(ie){return"LAYOUT"+ie+".range"}function A(ie){for(var ye=ie;ye<n.length;ye++)if(n[ye]._input===a[ie])return n[ye]}function b(ie,ye,ue){if(Array.isArray(ie)){ie.forEach(function(et){b(et,ye,ue)});return}if(!(ie in t||tf.hasParent(t,ie))){var Ae;if(ie.substr(0,6)==="LAYOUT")Ae=s(e.layout,ie.replace("LAYOUT",""));else{var Re=r[ue],ze=i._tracePreGUI[A(Re)._fullInput.uid];Ae=G4(ze,o)(a[Re],ie)}ie in h||(h[ie]=p()),h[ie][ue]===void 0&&(h[ie][ue]=Yg(Ae.get())),ye!==void 0&&Ae.set(ye)}}function w(ie){return function(ye){return n[ye][ie]}}function k(ie){return function(ye,ue){return ye===!1?n[r[ue]][ie]:null}}for(var x in t){if(tf.hasParent(t,x))throw new Error("cannot set "+x+" and a parent attribute simultaneously");var E=t[x],M,d,C,S,P,D;if((x==="autobinx"||x==="autobiny")&&(x=x.charAt(x.length-1)+"bins",Array.isArray(E)?E=E.map(k(x)):E===!1?E=r.map(w(x)):E=null),c[x]=E,x.substr(0,6)==="LAYOUT"){C=s(e.layout,x.replace("LAYOUT","")),h[x]=[Yg(C.get())],C.set(Array.isArray(E)?E[0]:E),f.calc=!0;continue}for(h[x]=p(),u=0;u<r.length;u++){M=a[r[u]],d=A(r[u]);var z=i._tracePreGUI[d._fullInput.uid];if(C=G4(z,o)(M,x),S=C.get(),P=Array.isArray(E)?E[u%E.length]:E,P!==void 0){var O=C.parts[C.parts.length-1],V=x.substr(0,x.length-O.length-1),B=V?V+".":"",F=V?Js(d,V).get():d;if(D=Q4.getTraceValObject(d,C.parts),D&&D.impliedEdits&&P!==null)for(var N in D.impliedEdits)b(fi.relativeAttr(x,N),D.impliedEdits[N],u);else if((O==="thicknessmode"||O==="lenmode")&&S!==P&&(P==="fraction"||P==="pixels")&&F){var Z=i._size,J=F.orient,re=J==="top"||J==="bottom";if(O==="thicknessmode"){var le=re?Z.h:Z.w;b(B+"thickness",F.thickness*(P==="fraction"?1/le:le),u)}else{var fe=re?Z.w:Z.h;b(B+"len",F.len*(P==="fraction"?1/fe:fe),u)}}else if(x==="type"&&(P==="pie"!=(S==="pie")||P==="funnelarea"!=(S==="funnelarea"))){var K="x",X="y";(P==="bar"||S==="bar")&&M.orientation==="h"&&(K="y",X="x"),fi.swapAttrs(M,["?","?src"],"labels",K),fi.swapAttrs(M,["d?","?0"],"label",K),fi.swapAttrs(M,["?","?src"],"values",X),S==="pie"||S==="funnelarea"?(Js(M,"marker.color").set(Js(M,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):fp.traceIs(M,"cartesian")&&Js(M,"marker.colors").set(Js(M,"marker.color").get())}h[x][u]=Yg(S);var ae=["swapxy","swapxyaxes","orientation","orientationaxes"];if(ae.indexOf(x)!==-1){if(x==="orientation"){C.set(P);var oe=M.x&&!M.y?"h":"v";if((C.get()||oe)===d.orientation)continue}else x==="orientationaxes"&&(M.orientation={v:"h",h:"v"}[d.orientation]);tf.swapXYData(M),f.calc=f.clearAxisTypes=!0}else Ta.dataArrayContainers.indexOf(C.parts[0])!==-1?(tf.manageArrayContainers(C,P,h),f.calc=!0):(D?D.arrayOk&&!fp.traceIs(d,"regl")&&(fi.isArrayOrTypedArray(P)||fi.isArrayOrTypedArray(S))?f.calc=!0:bm.update(f,D):f.calc=!0,C.set(P))}}if(["swapxyaxes","orientationaxes"].indexOf(x)!==-1&&Xh.swap(e,r),x==="orientationaxes"){var _e=Js(e.layout,"hovermode"),be=_e.get();be==="x"?_e.set("y"):be==="y"?_e.set("x"):be==="x unified"?_e.set("y unified"):be==="y unified"&&_e.set("x unified")}if(["orientation","type"].indexOf(x)!==-1){for(v=[],u=0;u<r.length;u++){var he=a[r[u]];fp.traceIs(he,"cartesian")&&(_(he.xaxis||"x"),_(he.yaxis||"y"))}b(v.map(T),!0,0),b(v.map(g),[0,1],0)}}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:c,traces:r,eventData:fi.extendDeepNoArrays([],[l,r])}}function hfe(e){var t=fi.counterRegex("axis",".title",!1,!1),r=/colorbar\.title$/,i=Object.keys(e),n,a,o;for(n=0;n<i.length;n++)a=i[n],o=e[a],(a==="title"||t.test(a)||r.test(a))&&(typeof o=="string"||typeof o=="number")?s(a,a.replace("title","title.text")):a.indexOf("titlefont")>-1&&a.indexOf("grouptitlefont")===-1?s(a,a.replace("titlefont","title.font")):a.indexOf("titleposition")>-1?s(a,a.replace("titleposition","title.position")):a.indexOf("titleside")>-1?s(a,a.replace("titleside","title.side")):a.indexOf("titleoffset")>-1&&s(a,a.replace("titleoffset","title.offset"));function s(l,u){e[u]=e[l],delete e[l]}}function yM(e,t,r){e=fi.getGraphDiv(e),tf.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(fi.isPlainObject(t))i=fi.extendFlat({},t);else return fi.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var n=yfe(e,i),a=n.flags;a.calc&&(e.calcdata=void 0);var o=[Ta.previousPromises];a.layoutReplot?o.push(gs.layoutReplot):Object.keys(i).length&&(vfe(e,a,n)||Ta.supplyDefaults(e),a.legend&&o.push(gs.doLegend),a.layoutstyle&&o.push(gs.layoutStyles),a.axrange&&$4(o,n.rangesAltered),a.ticks&&o.push(gs.doTicksRelayout),a.modebar&&o.push(gs.doModeBar),a.camera&&o.push(gs.doCamera),a.colorbars&&o.push(gs.doColorBars),o.push(mM)),o.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,yM,[e,n.undoit],yM,[e,n.redoit]);var s=fi.syncOrAsync(o,e);return(!s||!s.then)&&(s=Promise.resolve(e)),s.then(function(){return e.emit("plotly_relayout",n.eventData),e})}function vfe(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var n in t)if(n!=="axrange"&&t[n])return!1;var a,o,s=function(v,p){return fi.coerce(a,o,qft,v,p)},l={};for(var u in r.rangesAltered){var f=Xh.id2name(u);if(a=e.layout[f],o=i[f],Fft(a,o,s,l),o._matchGroup){for(var c in o._matchGroup)if(c!==u){var h=i[Xh.id2name(c)];h.autorange=o.autorange,h.range=o.range.slice(),h._input.range=o.range.slice()}}}return!0}function $4(e,t){var r=t?function(i){var n=[],a=!0;for(var o in t){var s=Xh.getFromId(i,o);if(n.push(o),(s.ticklabelposition||"").indexOf("inside")!==-1&&s._anchorAxis&&n.push(s._anchorAxis._id),s._matchGroup)for(var l in s._matchGroup)t[l]||n.push(l)}return Xh.draw(i,n,{skipTitle:a})}:function(i){return Xh.draw(i,"redraw")};e.push(Nft,gs.doAutoRangeAndConstraints,r,gs.drawData,gs.finalDraw)}var dfe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,pfe=/^[xyz]axis[0-9]*\.autorange$/,gfe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function yfe(e,t){var r=e.layout,i=e._fullLayout,n=i._guiEditing,a=G4(i._preGUI,n),o=Object.keys(t),s=Xh.list(e),l=fi.extendDeepAll({},t),u={},f,c,h;for(hfe(t),o=Object.keys(t),c=0;c<o.length;c++)if(o[c].indexOf("allaxes")===0){for(h=0;h<s.length;h++){var v=s[h]._id.substr(1),p=v.indexOf("scene")!==-1?v+".":"",_=o[c].replace("allaxes",p+s[h]._name);t[_]||(t[_]=t[o[c]])}delete t[o[c]]}var T=bm.layoutFlags(),g={},A={};function b(ze,et){if(Array.isArray(ze)){ze.forEach(function(Ie){b(Ie,et)});return}if(!(ze in t||tf.hasParent(t,ze))){var Le=a(r,ze);ze in A||(A[ze]=Yg(Le.get())),et!==void 0&&Le.set(et)}}var w={},k;function x(ze){var et=Xh.name2id(ze.split(".")[0]);return w[et]=1,et}for(var E in t){if(tf.hasParent(t,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");for(var M=a(r,E),d=t[E],C=M.parts.length,S=C-1;S>0&&typeof M.parts[S]!="string";)S--;var P=M.parts[S],D=M.parts[S-1]+"."+P,z=M.parts.slice(0,S).join("."),O=Js(e.layout,z).get(),V=Js(i,z).get(),B=M.get();if(d!==void 0){g[E]=d,A[E]=P==="reverse"?d:Yg(B);var F=Q4.getLayoutValObject(i,M.parts);if(F&&F.impliedEdits&&d!==null)for(var N in F.impliedEdits)b(fi.relativeAttr(E,N),F.impliedEdits[N]);if(["width","height"].indexOf(E)!==-1)if(d){b("autosize",null);var Z=E==="height"?"width":"height";b(Z,i[Z])}else i[E]=e._initialAutoSize[E];else if(E==="autosize")b("width",d?null:i.width),b("height",d?null:i.height);else if(D.match(dfe))x(D),Js(i,z+"._inputRange").set(null);else if(D.match(pfe)){x(D),Js(i,z+"._inputRange").set(null);var J=Js(i,z).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else D.match(gfe)&&Js(i,z+"._inputDomain").set(null);if(P==="type"){k=O;var re=V.type==="linear"&&d==="log",le=V.type==="log"&&d==="linear";if(re||le){if(!k||!k.range)b(z+".autorange",!0);else if(V.autorange)re&&(k.range=k.range[1]>k.range[0]?[1,2]:[2,1]);else{var fe=k.range[0],K=k.range[1];re?(fe<=0&&K<=0&&b(z+".autorange",!0),fe<=0?fe=K/1e6:K<=0&&(K=fe/1e6),b(z+".range[0]",Math.log(fe)/Math.LN10),b(z+".range[1]",Math.log(K)/Math.LN10)):(b(z+".range[0]",Math.pow(10,fe)),b(z+".range[1]",Math.pow(10,K)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[M.parts[0]]&&M.parts[1]==="radialaxis"&&delete i[M.parts[0]]._subplot.viewInitial["radialaxis.range"],fp.getComponentMethod("annotations","convertCoords")(e,V,d,b),fp.getComponentMethod("images","convertCoords")(e,V,d,b)}else b(z+".autorange",!0),b(z+".range",null);Js(i,z+"._inputRange").set(null)}else if(P.match(Uft)){var X=Js(i,E).get(),ae=(d||{}).type;(!ae||ae==="-")&&(ae="linear"),fp.getComponentMethod("annotations","convertCoords")(e,X,ae,b),fp.getComponentMethod("images","convertCoords")(e,X,ae,b)}var oe=H4.containerArrayMatch(E);if(oe){f=oe.array,c=oe.index;var _e=oe.property,be=F||{editType:"calc"};c!==""&&_e===""&&(H4.isAddVal(d)?A[E]=null:H4.isRemoveVal(d)?A[E]=(Js(r,f).get()||[])[c]:fi.warn("unrecognized full object value",t)),bm.update(T,be),u[f]||(u[f]={});var he=u[f][c];he||(he=u[f][c]={}),he[_e]=d,delete t[E]}else P==="reverse"?(O.range?O.range.reverse():(b(z+".autorange",!0),O.range=[1,0]),V.autorange?T.calc=!0:T.plot=!0):(E==="dragmode"&&(d===!1&&B!==!1||d!==!1&&B===!1)||i._has("scatter-like")&&i._has("regl")&&E==="dragmode"&&(d==="lasso"||d==="select")&&!(B==="lasso"||B==="select")||i._has("gl2d")?T.plot=!0:F?bm.update(T,F):T.calc=!0,M.set(d))}}for(f in u){var ie=H4.applyContainerArrayChanges(e,a(r,f),u[f],T,a);ie||(T.plot=!0)}for(var ye in w){k=Xh.getFromId(e,ye);var ue=k&&k._constraintGroup;if(ue){T.calc=!0;for(var Ae in ue)w[Ae]||(Xh.getFromId(e,Ae)._constraintShrinkable=!0)}}(mfe(e)||t.height||t.width)&&(T.plot=!0);var Re=i.shapes;for(c=0;c<Re.length;c++)if(Re[c].showlegend){T.calc=!0;break}return(T.plot||T.calc)&&(T.layoutReplot=!0),{flags:T,rangesAltered:w,undoit:A,redoit:g,eventData:l}}function mfe(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&Ta.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function K4(e,t,r,i){e=fi.getGraphDiv(e),tf.clearPromiseQueue(e),fi.isPlainObject(t)||(t={}),fi.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var n=tf.coerceTraceIndices(e,i),a=cfe(e,fi.extendFlat({},t),n),o=a.flags,s=yfe(e,fi.extendFlat({},r)),l=s.flags;(o.calc||l.calc)&&(e.calcdata=void 0),o.clearAxisTypes&&tf.clearAxisTypes(e,n,r);var u=[];l.layoutReplot?u.push(gs.layoutReplot):o.fullReplot?u.push(No._doPlot):(u.push(Ta.previousPromises),vfe(e,l,s)||Ta.supplyDefaults(e),o.style&&u.push(gs.doTraceStyle),(o.colorbars||l.colorbars)&&u.push(gs.doColorBars),l.legend&&u.push(gs.doLegend),l.layoutstyle&&u.push(gs.layoutStyles),l.axrange&&$4(u,s.rangesAltered),l.ticks&&u.push(gs.doTicksRelayout),l.modebar&&u.push(gs.doModeBar),l.camera&&u.push(gs.doCamera),u.push(mM)),u.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,K4,[e,a.undoit,s.undoit,a.traces],K4,[e,a.redoit,s.redoit,a.traces]);var f=fi.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve(e)),f.then(function(){return e.emit("plotly_update",{data:a.eventData,layout:s.eventData}),e})}function V7(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var Jft=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Qft=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Que(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=e.match(i.pattern);if(n){var a=n[1]||"";return{head:a,tail:e.substr(a.length+1),attr:i.attr}}}}function $ue(e,t){var r=Js(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=Js(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function $ft(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function ect(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function efe(e,t){var r=fi.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&fi.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function tct(e,t,r,i){var n=i._preGUI,a,o,s,l,u,f,c,h,v,p,_=[],T={},g={};for(a in n){if(u=Que(a,Jft),u){if(v=u.head,p=u.tail,o=u.attr||v+".uirevision",s=Js(i,o).get(),l=s&&$ue(o,t),l&&l===s){if(f=n[a],f===null&&(f=void 0),c=Js(t,a),h=c.get(),efe(h,f)){h===void 0&&p==="autorange"&&_.push(v),c.set(Yg(Js(i,a).get()));continue}else if(p==="autorange"||p.substr(0,6)==="range["){var A=n[v+".range[0]"],b=n[v+".range[1]"],w=n[v+".autorange"];if(w||w===null&&A===null&&b===null){if(!(v in T)){var k=Js(t,v).get();T[v]=k&&(k.autorange||k.autorange!==!1&&(!k.range||k.range.length!==2))}if(T[v]){c.set(Yg(Js(i,a).get()));continue}}}}}else fi.warn("unrecognized GUI edit: "+a);delete n[a],u&&u.tail.substr(0,6)==="range["&&(g[u.head]=1)}for(var x=0;x<_.length;x++){var E=_[x];if(g[E]){var M=Js(t,E).get();M&&delete M.autorange}}var d=i._tracePreGUI;for(var C in d){var S=d[C],P=null,D;for(a in S){if(!P){var z=$ft(C,r);if(z<0){delete d[C];break}var O=r[z];D=O._fullInput;var V=ect(C,e,D.index);if(V<0){delete d[C];break}P=e[V]}if(u=Que(a,Qft),u){if(u.attr?(s=Js(i,u.attr).get(),l=s&&$ue(u.attr,t)):(s=D.uirevision,l=P.uirevision,l===void 0&&(l=t.uirevision)),l&&l===s&&(f=S[a],f===null&&(f=void 0),c=Js(P,a),h=c.get(),efe(h,f))){c.set(Yg(Js(D,a).get()));continue}}else fi.warn("unrecognized GUI edit: "+a+" in trace uid "+C);delete S[a]}}}function rct(e,t,r,i){var n,a;function o(){return No.addFrames(e,n)}e=fi.getGraphDiv(e),tf.clearPromiseQueue(e);var s=e._fullData,l=e._fullLayout;if(!fi.isPlotDiv(e)||!s||!l)a=No.newPlot(e,t,r,i);else{if(fi.isPlainObject(t)){var u=t;t=u.data,r=u.layout,i=u.config,n=u.frames}var f=!1;if(i){var c=fi.extendDeep({},e._context);e._context=void 0,nfe(e,i),f=U7(c,e._context)}e.data=t||[],tf.cleanData(e.data),e.layout=r||{},tf.cleanLayout(e.layout),tct(e.data,e.layout,s,l),Ta.supplyDefaults(e,{skipUpdateCalc:!0});var h=e._fullData,v=e._fullLayout,p=v.datarevision===void 0,_=v.transition,T=ict(e,l,v,p,_),g=T.newDataRevision,A=nct(e,s,h,p,_,g);if(mfe(e)&&(T.layoutReplot=!0),A.calc||T.calc){e.calcdata=void 0;for(var b=Object.getOwnPropertyNames(v),w=0;w<b.length;w++){var k=b[w],x=k.substring(0,5);if(x==="xaxis"||x==="yaxis"){var E=v[k]._emptyCategories;E&&E()}}}else Ta.supplyDefaultsUpdateCalc(e.calcdata,h);var M=[];if(n&&(e._transitionData={},Ta.createTransitionData(e),M.push(o)),v.transition&&!f&&(A.anim||T.anim))T.ticks&&M.push(gs.doTicksRelayout),Ta.doCalcdata(e),gs.doAutoRangeAndConstraints(e),M.push(function(){return Ta.transitionFromReact(e,A,T,l)});else if(A.fullReplot||T.layoutReplot||f)e._fullLayout._skipDefaults=!0,M.push(No._doPlot);else{for(var d in T.arrays){var C=T.arrays[d];if(C.length){var S=fp.getComponentMethod(d,"drawOne");if(S!==fi.noop)for(var P=0;P<C.length;P++)S(e,C[P]);else{var D=fp.getComponentMethod(d,"draw");if(D===fi.noop)throw new Error("cannot draw components: "+d);D(e)}}}M.push(Ta.previousPromises),A.style&&M.push(gs.doTraceStyle),(A.colorbars||T.colorbars)&&M.push(gs.doColorBars),T.legend&&M.push(gs.doLegend),T.layoutstyle&&M.push(gs.layoutStyles),T.axrange&&$4(M),T.ticks&&M.push(gs.doTicksRelayout),T.modebar&&M.push(gs.doModeBar),T.camera&&M.push(gs.doCamera),M.push(mM)}M.push(Ta.rehover,Ta.redrag,Ta.reselect),a=fi.syncOrAsync(M,e),(!a||!a.then)&&(a=Promise.resolve(e))}return a.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})}function nct(e,t,r,i,n,a){var o=t.length===r.length;if(!n&&!o)return{fullReplot:!0,calc:!0};var s=bm.traceFlags();s.arrays={},s.nChanges=0,s.nChangesAnim=0;var l,u;function f(v){var p=Q4.getTraceValObject(u,v);return!u._module.animatable&&p.anim&&(p.anim=!1),p}var c={getValObject:f,flags:s,immutable:i,transition:n,newDataRevision:a,gd:e},h={};for(l=0;l<t.length;l++)if(r[l]){if(u=r[l]._fullInput,Ta.hasMakesDataTransform(u)&&(u=r[l]),h[u.uid])continue;h[u.uid]=1,J4(t[l]._fullInput,u,[],c)}return(s.calc||s.plot)&&(s.fullReplot=!0),n&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"),s}function ict(e,t,r,i,n){var a=bm.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0;function o(l){return Q4.getLayoutValObject(r,l)}var s={getValObject:o,flags:a,immutable:i,transition:n,gd:e};return J4(t,r,[],s),(a.plot||a.calc)&&(a.layoutReplot=!0),n&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}function J4(e,t,r,i){var n,a,o,s=i.getValObject,l=i.flags,u=i.immutable,f=i.inArray,c=i.arrayIndex;function h(){var z=n.editType;if(f&&z.indexOf("arraydraw")!==-1){fi.pushUnique(l.arrays[f],c);return}bm.update(l,n),z!=="none"&&l.nChanges++,i.transition&&n.anim&&l.nChangesAnim++,(dfe.test(o)||pfe.test(o))&&(l.rangesAltered[r[0]]=1),gfe.test(o)&&Js(t,"_inputDomain").set(null),a==="datarevision"&&(l.newDataRevision=1)}function v(z){return z.valType==="data_array"||z.arrayOk}for(a in e){if(l.calc&&!i.transition)return;var p=e[a],_=t[a],T=r.concat(a);if(o=T.join("."),!(a.charAt(0)==="_"||typeof p=="function"||p===_)){if((a==="tick0"||a==="dtick")&&r[0]!=="geo"){var g=t.tickmode;if(g==="auto"||g==="array"||!g)continue}if(!(a==="range"&&t.autorange)&&!((a==="zmin"||a==="zmax")&&t.type==="contourcarpet")&&(n=s(T),!!n&&!(n._compareAsJSON&&JSON.stringify(p)===JSON.stringify(_)))){var A=n.valType,b,w=v(n),k=Array.isArray(p),x=Array.isArray(_);if(k&&x){var E="_input_"+a,M=e[E],d=t[E];if(Array.isArray(M)&&M===d)continue}if(_===void 0)w&&k?l.calc=!0:h();else if(n._isLinkedToArray){var C=[],S=!1;f||(l.arrays[a]=C);var P=Math.min(p.length,_.length),D=Math.max(p.length,_.length);if(P!==D)if(n.editType==="arraydraw")S=!0;else{h();continue}for(b=0;b<P;b++)J4(p[b],_[b],T.concat(b),fi.extendFlat({inArray:a,arrayIndex:b},i));if(S)for(b=P;b<D;b++)C.push(b)}else!A&&fi.isPlainObject(p)?J4(p,_,T,i):w?k&&x?(u&&(l.calc=!0),(u||i.newDataRevision)&&h()):k!==x?l.calc=!0:h():k&&x?(p.length!==_.length||String(p)!==String(_))&&h():h()}}}for(a in t)if(!(a in e||a.charAt(0)==="_"||typeof t[a]=="function"))if(n=s(r.concat(a)),v(n)&&Array.isArray(t[a])){l.calc=!0;return}else h()}function U7(e,t){var r;for(r in e)if(r.charAt(0)!=="_"){var i=e[r],n=t[r];if(i!==n)if(fi.isPlainObject(i)&&fi.isPlainObject(n)){if(U7(i,n))return!0}else if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!0;for(var a=0;a<i.length;a++)if(i[a]!==n[a])if(fi.isPlainObject(i[a])&&fi.isPlainObject(n[a])){if(U7(i[a],n[a]))return!0}else return!0}else return!0}}function act(e,t,r){if(e=fi.getGraphDiv(e),!fi.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=Ta.supplyAnimationDefaults(r);var n=r.transition,a=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function o(u){return Array.isArray(n)?u>=n.length?n[0]:n[u]:n}function s(u){return Array.isArray(a)?u>=a.length?a[0]:a[u]:a}function l(u,f){var c=0;return function(){if(u&&++c===f)return u()}}return new Promise(function(u,f){function c(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var P=i._frameQueue.pop();P.onInterrupt&&P.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function h(P){if(P.length!==0){for(var D=0;D<P.length;D++){var z;P[D].type==="byname"?z=Ta.computeFrame(e,P[D].name):z=P[D].data;var O=s(D),V=o(D);V.duration=Math.min(V.duration,O.duration);var B={frame:z,name:P[D].name,frameOpts:O,transitionOpts:V};D===P.length-1&&(B.onComplete=l(u,2),B.onInterrupt=f),i._frameQueue.push(B)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||_()}}function v(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function p(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var P=i._currentFrame=i._frameQueue.shift();if(P){var D=P.name?P.name.toString():null;e._fullLayout._currentFrame=D,i._lastFrameAt=Date.now(),i._timeToNext=P.frameOpts.duration,Ta.transition(e,P.frame.data,P.frame.layout,tf.coerceTraceIndices(e,P.frame.traces),P.frameOpts,P.transitionOpts).then(function(){P.onComplete&&P.onComplete()}),e.emit("plotly_animatingframe",{name:D,frame:P.frame,animation:{frame:P.frameOpts,transition:P.transitionOpts}})}else v()}function _(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var P=function(){i._animationRaf=window.requestAnimationFrame(P),Date.now()-i._lastFrameAt>i._timeToNext&&p()};P()}var T=0;function g(P){return Array.isArray(n)?T>=n.length?P.transitionOpts=n[T]:P.transitionOpts=n[0]:P.transitionOpts=n,T++,P}var A,b,w=[],k=t==null,x=Array.isArray(t),E=!k&&!x&&fi.isPlainObject(t);if(E)w.push({type:"object",data:g(fi.extendFlat({},t))});else if(k||["string","number"].indexOf(typeof t)!==-1)for(A=0;A<i._frames.length;A++)b=i._frames[A],b&&(k||String(b.group)===String(t))&&w.push({type:"byname",name:String(b.name),data:g({name:b.name})});else if(x)for(A=0;A<t.length;A++){var M=t[A];["number","string"].indexOf(typeof M)!==-1?(M=String(M),w.push({type:"byname",name:M,data:g({name:M})})):fi.isPlainObject(M)&&w.push({type:"object",data:g(fi.extendFlat({},M))})}for(A=0;A<w.length;A++)if(b=w[A],b.type==="byname"&&!i._frameHash[b.data.name]){fi.warn('animate failure: frame not found: "'+b.data.name+'"'),f();return}["next","immediate"].indexOf(r.mode)!==-1&&c(),r.direction==="reverse"&&w.reverse();var d=e._fullLayout._currentFrame;if(d&&r.fromcurrent){var C=-1;for(A=0;A<w.length;A++)if(b=w[A],b.type==="byname"&&b.name===d){C=A;break}if(C>0&&C<w.length-1){var S=[];for(A=0;A<w.length;A++)b=w[A],(w[A].type!=="byname"||A>C)&&S.push(b);w=S}}w.length>0?h(w):(e.emit("plotly_animated"),u())})}function oct(e,t,r){if(e=fi.getGraphDiv(e),t==null)return Promise.resolve();if(!fi.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,n,a,o,s=e._transitionData._frames,l=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var u=s.length+t.length*2,f=[],c={};for(i=t.length-1;i>=0;i--)if(fi.isPlainObject(t[i])){var h=t[i].name,v=(l[h]||c[h]||{}).name,p=t[i].name,_=l[v]||c[v];v&&p&&typeof p=="number"&&_&&O7<Jue&&(O7++,fi.warn('addFrames: overwriting frame "'+(l[v]||c[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),O7===Jue&&fi.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),c[h]={name:h},f.push({frame:Ta.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:u+i})}f.sort(function(E,M){return E.index>M.index?-1:E.index<M.index?1:0});var T=[],g=[],A=s.length;for(i=f.length-1;i>=0;i--){if(n=f[i].frame,typeof n.name=="number"&&fi.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!n.name)for(;l[n.name="frame "+e._transitionData._counter++];);if(l[n.name]){for(a=0;a<s.length&&(s[a]||{}).name!==n.name;a++);T.push({type:"replace",index:a,value:n}),g.unshift({type:"replace",index:a,value:s[a]})}else o=Math.max(0,Math.min(f[i].index,A)),T.push({type:"insert",index:o,value:n}),g.unshift({type:"delete",index:o}),A++}var b=Ta.modifyFrames,w=Ta.modifyFrames,k=[e,g],x=[e,T];return wv&&wv.add(e,b,k,w,x),Ta.modifyFrames(e,T)}function sct(e,t){if(e=fi.getGraphDiv(e),!fi.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,n=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],r=0;r<n.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],a.push({type:"delete",index:i}),o.unshift({type:"insert",index:i,value:n[i]});var s=Ta.modifyFrames,l=Ta.modifyFrames,u=[e,o],f=[e,a];return wv&&wv.add(e,s,u,l,f),Ta.modifyFrames(e,a)}function lct(e){e=fi.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return Ta.cleanPlot([],{},r,t),Ta.purge(e),B7.purge(e),t._container&&t._container.remove(),delete e._context,e}function uct(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!fi.equalDomRects(r,t._lastBBox)){var i=t._invTransform=fi.inverseTransformMatrix(fi.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function fct(e){var t=Y4.select(e),r=e._fullLayout;if(r._calcInverseTransform=uct,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};Y4.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=fi.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(Bft.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var n=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=n.append("g").classed("imagelayer",!0),r._shapeLowerLayer=n.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var a=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=a.append("g").classed("imagelayer",!0),r._shapeUpperLayer=a.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}No.animate=act;No.addFrames=oct;No.deleteFrames=sct;No.addTraces=ufe;No.deleteTraces=ffe;No.extendTraces=sfe;No.moveTraces=N7;No.prependTraces=lfe;No.newPlot=Wft;No._doPlot=Vft;No.purge=lct;No.react=rct;No.redraw=Yft;No.relayout=yM;No.restyle=Z4;No.setPlotConfig=Hft;No.update=K4;No._guiRelayout=V7(yM);No._guiRestyle=V7(Z4);No._guiUpdate=V7(K4);No._storeDirectGUIEdit=Kft});var Wg=ne(a0=>{"use strict";var cct=wi();a0.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0};a0.getRedrawFunc=function(e){return function(){cct.getComponentMethod("colorbar","draw")(e)}};a0.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};a0.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var xfe=window.URL||window.webkitURL;a0.createObjectURL=function(e){return xfe.createObjectURL(e)};a0.revokeObjectURL=function(e){return xfe.revokeObjectURL(e)};a0.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=hct(window.atob(e));return new window.Blob([r],{type:"image/"+t})};a0.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function hct(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),n=0;n<t;n++)i[n]=e.charCodeAt(n);return r}a0.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;a0.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."});var rL=ne((nnr,_fe)=>{"use strict";var G7=Ai(),vct=Wt(),dct=aa(),pct=_i(),tL=kd(),H7=/"/g,xM="TOBESTRIPPED",gct=new RegExp('("'+xM+")|("+xM+'")',"g");function yct(e){var t=G7.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function mct(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}_fe.exports=function(t,r,i){var n=t._fullLayout,a=n._paper,o=n._toppaper,s=n.width,l=n.height,u;a.insert("rect",":first-child").call(dct.setRect,0,0,s,l).call(pct.fill,n.paper_bgcolor);var f=n._basePlotModules||[];for(u=0;u<f.length;u++){var c=f[u];c.toSVG&&c.toSVG(t)}if(o){var h=o.node().childNodes,v=Array.prototype.slice.call(h);for(u=0;u<v.length;u++){var p=v[u];p.childNodes.length&&a.node().appendChild(p)}}n._draggers&&n._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var T=G7.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){T.remove();return}else T.style({visibility:null,display:null});var g=this.style.fontFamily;g&&g.indexOf('"')!==-1&&T.style("font-family",g.replace(H7,xM))}),a.selectAll(".gradient_filled,.pattern_filled").each(function(){var T=G7.select(this),g=this.style.fill;g&&g.indexOf("url(")!==-1&&T.style("fill",g.replace(H7,xM));var A=this.style.stroke;A&&A.indexOf("url(")!==-1&&T.style("stroke",A.replace(H7,xM))}),(r==="pdf"||r==="eps")&&a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(tL.xmlns,"xmlns",tL.svg),a.node().setAttributeNS(tL.xmlns,"xmlns:xlink",tL.xlink),r==="svg"&&i&&(a.attr("width",i*s),a.attr("height",i*l),a.attr("viewBox","0 0 "+s+" "+l));var _=new window.XMLSerializer().serializeToString(a.node());return _=yct(_),_=mct(_),_=_.replace(gct,"'"),vct.isIE()&&(_=_.replace(/"/gi,"'"),_=_.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),_=_.replace(/(\\')/gi,'"')),_}});var nL=ne((inr,wfe)=>{"use strict";var bfe=Wt(),xct=ox().EventEmitter,O2=Wg();function _ct(e){var t=e.emitter||new xct,r=new Promise(function(i,n){var a=window.Image,o=e.svg,s=e.format||"png";if(bfe.isIE()&&s!=="svg"){var l=new Error(O2.MSG_IE_BAD_FORMAT);return n(l),e.promise?r:t.emit("error",l)}var u=e.canvas,f=e.scale||1,c=e.width||300,h=e.height||150,v=f*c,p=f*h,_=u.getContext("2d",{willReadFrequently:!0}),T=new a,g,A;s==="svg"||bfe.isSafari()?A=O2.encodeSVG(o):(g=O2.createBlob(o,"svg"),A=O2.createObjectURL(g)),u.width=v,u.height=p,T.onload=function(){var b;switch(g=null,O2.revokeObjectURL(A),s!=="svg"&&_.drawImage(T,0,0,v,p),s){case"jpeg":b=u.toDataURL("image/jpeg");break;case"png":b=u.toDataURL("image/png");break;case"webp":b=u.toDataURL("image/webp");break;case"svg":b=A;break;default:var w="Image format is not jpeg, png, svg or webp.";if(n(new Error(w)),!e.promise)return t.emit("error",w)}i(b),e.promise||t.emit("success",b)},T.onerror=function(b){if(g=null,O2.revokeObjectURL(A),n(b),!e.promise)return t.emit("error",b)},T.src=A});return e.promise?r:t}wfe.exports=_ct});var W7=ne((anr,Mfe)=>{"use strict";var Tfe=la(),Afe=eL(),bct=Zs(),W0=Wt(),_M=Wg(),wct=rL(),Tct=nL(),Act=_k().version,Y7={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Mct(e,t){t=t||{};var r,i,n,a;W0.isPlainObject(e)?(r=e.data||[],i=e.layout||{},n=e.config||{},a={}):(e=W0.getGraphDiv(e),r=W0.extendDeep([],e.data),i=W0.extendDeep({},e.layout),n=e._context,a=e._fullLayout||{});function o(x){return!(x in t)||W0.validate(t[x],Y7[x])}if(!o("width")&&t.width!==null||!o("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+W0.join2(Y7.format.values,", "," or ")+".");var s={};function l(x,E){return W0.coerce(t,s,Y7,x,E)}var u=l("format"),f=l("width"),c=l("height"),h=l("scale"),v=l("setBackground"),p=l("imageDataOnly"),_=document.createElement("div");_.style.position="absolute",_.style.left="-5000px",document.body.appendChild(_);var T=W0.extendFlat({},i);f?T.width=f:t.width===null&&Tfe(a.width)&&(T.width=a.width),c?T.height=c:t.height===null&&Tfe(a.height)&&(T.height=a.height);var g=W0.extendFlat({},n,{_exportedPlot:!0,staticPlot:!0,setBackground:v}),A=_M.getRedrawFunc(_);function b(){return new Promise(function(x){setTimeout(x,_M.getDelay(_._fullLayout))})}function w(){return new Promise(function(x,E){var M=wct(_,u,h),d=_._fullLayout.width,C=_._fullLayout.height;function S(){Afe.purge(_),document.body.removeChild(_)}if(u==="full-json"){var P=bct.graphJson(_,!1,"keepdata","object",!0,!0);return P.version=Act,P=JSON.stringify(P),S(),x(p?P:_M.encodeJSON(P))}if(S(),u==="svg")return x(p?M:_M.encodeSVG(M));var D=document.createElement("canvas");D.id=W0.randstr(),Tct({format:u,width:d,height:C,scale:h,canvas:D,svg:M,promise:!0}).then(x).catch(E)})}function k(x){return p?x.replace(_M.IMAGE_URL_PREFIX,""):x}return new Promise(function(x,E){Afe.newPlot(_,r,T,g).then(A).then(b).then(w).then(function(M){x(k(M))}).catch(function(M){E(M)})})}Mfe.exports=Mct});var Cfe=ne((onr,kfe)=>{"use strict";var hp=Wt(),Sct=Zs(),Ect=tm(),kct=$1().dfltConfig,cp=hp.isPlainObject,wm=Array.isArray,Sfe=hp.isArrayOrTypedArray;kfe.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=Ect.get(),n=[],a={_context:hp.extendFlat({},kct)},o,s;wm(t)?(a.data=hp.extendDeep([],t),o=t):(a.data=[],o=[],n.push(rf("array","data"))),cp(r)?(a.layout=hp.extendDeep({},r),s=r):(a.layout={},s={},arguments.length>1&&n.push(rf("object","layout"))),Sct.supplyDefaults(a);for(var l=a._fullData,u=o.length,f=0;f<u;f++){var c=o[f],h=["data",f];if(!cp(c)){n.push(rf("object",h));continue}var v=l[f],p=v.type,_=i.traces[p].attributes;_.type={valType:"enumerated",values:[p]},v.visible===!1&&c.visible!==!1&&n.push(rf("invisible",h)),bM(c,v,_,n,h);var T=c.transforms,g=v.transforms;if(T){wm(T)||n.push(rf("array",h,["transforms"])),h.push("transforms");for(var A=0;A<T.length;A++){var b=["transforms",A],w=T[A].type;if(!cp(T[A])){n.push(rf("object",h,b));continue}var k=i.transforms[w]?i.transforms[w].attributes:{};k.type={valType:"enumerated",values:Object.keys(i.transforms)},bM(T[A],g[A],k,n,h,b)}}}var x=a._fullLayout,E=Cct(i,l);return bM(s,x,E,n,"layout"),n.length===0?void 0:n};function bM(e,t,r,i,n,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if(l!=="transforms"){var u=a.slice();u.push(l);var f=e[l],c=t[l],h=Rct(r,l),v=(h||{}).valType,p=v==="info_array",_=v==="colorscale",T=(h||{}).items;if(!Pct(r,l))i.push(rf("schema",n,u));else if(cp(f)&&cp(c)&&v!=="any")bM(f,c,h,i,n,u);else if(p&&wm(f)){f.length>c.length&&i.push(rf("unused",n,u.concat(c.length)));var g=c.length,A=Array.isArray(T);A&&(g=Math.min(g,T.length));var b,w,k,x,E;if(h.dimensions===2)for(w=0;w<g;w++)if(wm(f[w])){f[w].length>c[w].length&&i.push(rf("unused",n,u.concat(w,c[w].length)));var M=c[w].length;for(b=0;b<(A?Math.min(M,T[w].length):M);b++)k=A?T[w][b]:T,x=f[w][b],E=c[w][b],hp.validate(x,k)?E!==x&&E!==+x&&i.push(rf("dynamic",n,u.concat(w,b),x,E)):i.push(rf("value",n,u.concat(w,b),x))}else i.push(rf("array",n,u.concat(w),f[w]));else for(w=0;w<g;w++)k=A?T[w]:T,x=f[w],E=c[w],hp.validate(x,k)?E!==x&&E!==+x&&i.push(rf("dynamic",n,u.concat(w),x,E)):i.push(rf("value",n,u.concat(w),x))}else if(h.items&&!p&&wm(f)){var d=T[Object.keys(T)[0]],C=[],S,P;for(S=0;S<c.length;S++){var D=c[S]._index||S;if(P=u.slice(),P.push(D),cp(f[D])&&cp(c[S])){C.push(D);var z=f[D],O=c[S];cp(z)&&z.visible!==!1&&O.visible===!1?i.push(rf("invisible",n,P)):bM(z,O,d,i,n,P)}}for(S=0;S<f.length;S++)P=u.slice(),P.push(S),cp(f[S])?C.indexOf(S)===-1&&i.push(rf("unused",n,P)):i.push(rf("object",n,P,f[S]))}else!cp(f)&&cp(c)?i.push(rf("object",n,u,f)):!Sfe(f)&&Sfe(c)&&!p&&!_?i.push(rf("array",n,u,f)):l in t?hp.validate(f,h)?h.valType==="enumerated"&&(h.coerceNumber&&f!==+c||f!==c)&&i.push(rf("dynamic",n,u,f,c)):i.push(rf("value",n,u,f)):i.push(rf("unused",n,u,f))}}return i}function Cct(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var n=t[i],a=e.traces[n.type],o=a.layoutAttributes;o&&(n.subplot?hp.extendFlat(r[a.attributes.subplot.dflt],o):hp.extendFlat(r,o))}return r}var Lct={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Rx(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Rx(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Rx(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=cp(r)?"container":"key";return Rx(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Rx(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Rx(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Rx(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Rx(e){return wm(e)?"In data trace "+e[1]+", ":"In "+e+", "}function rf(e,t,r,i,n){r=r||"";var a,o;wm(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=Ict(r),l=Lct[e](t,s,i,n);return hp.log(l),{code:e,container:a,trace:o,path:r,astr:s,msg:l}}function Pct(e,t){var r=Efe(t),i=r.keyMinusId,n=r.id;return i in e&&e[i]._isSubplotObj&&n?!0:t in e}function Rct(e,t){if(t in e)return e[t];var r=Efe(t);return e[r.keyMinusId]}var Dct=hp.counterRegex("([a-z]+)");function Efe(e){var t=e.match(Dct);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Ict(e){if(!wm(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var Rfe=ne((snr,Pfe)=>{"use strict";var Lfe=Wt(),wM=Wg();function Fct(e,t,r){var i=document.createElement("a"),n="download"in i,a=new Promise(function(o,s){var l,u;if(Lfe.isIE())return l=wM.createBlob(e,"svg"),window.navigator.msSaveBlob(l,t),l=null,o(t);if(n)return l=wM.createBlob(e,r),u=wM.createObjectURL(l),i.href=u,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),wM.revokeObjectURL(u),l=null,o(t);if(Lfe.isSafari()){var f=r==="svg"?",":";base64,";return wM.octetStream(f+encodeURIComponent(e)),o(t)}s(new Error("download error"))});return a}Pfe.exports=Fct});var Z7=ne((lnr,Dfe)=>{"use strict";var X7=Wt(),qct=W7(),zct=Rfe(),Oct=Wg();function Bct(e,t){var r;return X7.isPlainObject(e)||(r=X7.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),X7.isIE()&&t.format!=="svg"&&n(new Error(Oct.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var a=qct(e,t),o=t.filename||e.fn||"newplot";o+="."+t.format.replace("-","."),a.then(function(s){return r&&(r._snapshotInProgress=!1),zct(s,o,t.format)}).then(function(s){i(s)}).catch(function(s){r&&(r._snapshotInProgress=!1),n(s)})})}Dfe.exports=Bct});var Ofe=ne(j7=>{"use strict";var od=Wt(),sd=od.isPlainObject,Ife=tm(),Ffe=Zs(),Nct=es(),qfe=So(),zfe=$1().dfltConfig;j7.makeTemplate=function(e){e=od.isPlainObject(e)?e:od.getGraphDiv(e),e=od.extendDeep({_context:zfe},{data:e.data,layout:e.layout}),Ffe.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(v){var p={};TM(v,p,Vct.bind(null,v));var _=od.coerce(v,{},Nct,"type"),T=i.data[_];T||(T=i.data[_]=[]),T.push(p)}),TM(r,i.layout,Uct.bind(null,r)),delete i.layout.template;var n=r.template;if(sd(n)){var a=n.layout,o,s,l,u,f,c;sd(a)&&iL(a,i.layout);var h=n.data;if(sd(h)){for(s in i.data)if(l=h[s],Array.isArray(l)){for(f=i.data[s],c=f.length,u=l.length,o=0;o<c;o++)iL(l[o%u],f[o]);for(o=c;o<u;o++)f.push(od.extendDeep({},l[o]))}for(s in h)s in i.data||(i.data[s]=od.extendDeep([],h[s]))}}return i};function iL(e,t){e=od.extendDeep({},e);var r=Object.keys(e).sort(),i,n;function a(f,c,h){if(sd(c)&&sd(f))iL(f,c);else if(Array.isArray(c)&&Array.isArray(f)){var v=qfe.arrayTemplater({_template:e},h);for(n=0;n<c.length;n++){var p=c[n],_=v.newItem(p)._template;_&&iL(_,p)}var T=v.defaultItems();for(n=0;n<T.length;n++)c.push(T[n]._template);for(n=0;n<c.length;n++)delete c[n].templateitemname}}for(i=0;i<r.length;i++){var o=r[i],s=e[o];if(o in t?a(s,t[o],o):t[o]=s,aL(o)===o)for(var l in t){var u=aL(l);l!==u&&u===o&&!(l in e)&&a(s,t[l],o)}}}function aL(e){return e.replace(/[0-9]+$/,"")}function TM(e,t,r,i,n){var a=n&&r(n);for(var o in e){var s=e[o],l=vp(e,o,i),u=vp(e,o,n),f=r(u);if(!f){var c=aL(o);c!==o&&(u=vp(e,c,n),f=r(u))}if(!(a&&a===f)&&!(!f||f._noTemplating||f.valType==="data_array"||f.arrayOk&&Array.isArray(s)))if(!f.valType&&sd(s))TM(s,t,r,l,u);else if(f._isLinkedToArray&&Array.isArray(s))for(var h=!1,v=0,p={},_=0;_<s.length;_++){var T=s[_];if(sd(T)){var g=T.name;if(g)p[g]||(TM(T,t,r,vp(s,v,l),vp(s,v,u)),v++,p[g]=1);else if(!h){var A=qfe.arrayDefaultKey(o),b=vp(e,A,i),w=vp(s,v,l);TM(T,t,r,w,vp(s,v,u));var k=od.nestedProperty(t,w),x=od.nestedProperty(t,b);x.set(k.get()),k.set(null),h=!0}}}else{var E=od.nestedProperty(t,l);E.set(s)}}}function Uct(e,t){return Ife.getLayoutValObject(e,od.nestedProperty({},t).parts)}function Vct(e,t){return Ife.getTraceValObject(e,od.nestedProperty({},t).parts)}function vp(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}j7.validateTemplate=function(e,t){var r=od.extendDeep({},{_context:zfe,data:e.data,layout:e.layout}),i=r.layout||{};sd(t)||(t=i.template||{});var n=t.layout,a=t.data,o=[];r.layout=i,r.layout.template=t,Ffe.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,u={};function f(b,w){for(var k in b)if(k.charAt(0)!=="_"&&sd(b[k])){var x=aL(k),E=[],M;for(M=0;M<w.length;M++)E.push(vp(b,k,w[M])),x!==k&&E.push(vp(b,x,w[M]));for(M=0;M<E.length;M++)u[E[M]]=1;f(b[k],E)}}function c(b,w){for(var k in b)if(k.indexOf("defaults")===-1&&sd(b[k])){var x=vp(b,k,w);u[x]?c(b[k],x):o.push({code:"unused",path:x})}}if(sd(n)?(f(s,["layout"]),c(n,"layout")):o.push({code:"layout"}),!sd(a))o.push({code:"data"});else{for(var h={},v,p=0;p<l.length;p++){var _=l[p];v=_.type,h[v]=(h[v]||0)+1,_._fullInput._template||o.push({code:"missing",index:_._fullInput.index,traceType:v})}for(v in a){var T=a[v].length,g=h[v]||0;T>g?o.push({code:"unused",traceType:v,templateCount:T,dataCount:g}):g>T&&o.push({code:"reused",traceType:v,templateCount:T,dataCount:g})}}function A(b,w){for(var k in b)if(k.charAt(0)!=="_"){var x=b[k],E=vp(b,k,w);sd(x)?(Array.isArray(b)&&x._template===!1&&x.templateitemname&&o.push({code:"missing",path:E,templateitemname:x.templateitemname}),A(x,E)):Array.isArray(x)&&Hct(x)&&A(x,E)}}if(A({data:l,layout:s},""),o.length)return o.map(Gct)};function Hct(e){for(var t=0;t<e.length;t++)if(sd(e[t]))return!0}function Gct(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var Nfe=ne(bl=>{"use strict";var Sf=eL();bl._doPlot=Sf._doPlot;bl.newPlot=Sf.newPlot;bl.restyle=Sf.restyle;bl.relayout=Sf.relayout;bl.redraw=Sf.redraw;bl.update=Sf.update;bl._guiRestyle=Sf._guiRestyle;bl._guiRelayout=Sf._guiRelayout;bl._guiUpdate=Sf._guiUpdate;bl._storeDirectGUIEdit=Sf._storeDirectGUIEdit;bl.react=Sf.react;bl.extendTraces=Sf.extendTraces;bl.prependTraces=Sf.prependTraces;bl.addTraces=Sf.addTraces;bl.deleteTraces=Sf.deleteTraces;bl.moveTraces=Sf.moveTraces;bl.purge=Sf.purge;bl.addFrames=Sf.addFrames;bl.deleteFrames=Sf.deleteFrames;bl.animate=Sf.animate;bl.setPlotConfig=Sf.setPlotConfig;var Yct=cA().getGraphDiv,Wct=_4().eraseActiveShape;bl.deleteActiveShape=function(e){return Wct(Yct(e))};bl.toImage=W7();bl.validate=Cfe();bl.downloadImage=Z7();var Bfe=Ofe();bl.makeTemplate=Bfe.makeTemplate;bl.validateTemplate=Bfe.validateTemplate});var B2=ne((cnr,Ufe)=>{"use strict";var K7=Wt(),Xct=wi();Ufe.exports=function(t,r,i,n){var a=n("x"),o=n("y"),s,l=Xct.getComponentMethod("calendars","handleTraceDefaults");if(l(t,r,["x","y"],i),a){var u=K7.minRowLength(a);o?s=Math.min(u,K7.minRowLength(o)):(s=u,n("y0"),n("dy"))}else{if(!o)return 0;s=K7.minRowLength(o),n("x0"),n("dx")}return r._length=s,s}});var o0=ne((hnr,Gfe)=>{"use strict";var Vfe=Wt().dateTick0,Zct=$a(),jct=Zct.ONEWEEK;function Hfe(e,t){return e%jct===0?Vfe(t,1):Vfe(t,0)}Gfe.exports=function(t,r,i,n,a){if(a||(a={x:!0,y:!0}),a.x){var o=n("xperiod");o&&(n("xperiod0",Hfe(o,r.xcalendar)),n("xperiodalignment"))}if(a.y){var s=n("yperiod");s&&(n("yperiod0",Hfe(s,r.ycalendar)),n("yperiodalignment"))}}});var Xfe=ne((vnr,Wfe)=>{"use strict";var Yfe=["orientation","groupnorm","stackgaps"];Wfe.exports=function(t,r,i,n){var a=i._scatterStackOpts,o=n("stackgroup");if(o){var s=r.xaxis+r.yaxis,l=a[s];l||(l=a[s]={});var u=l[o],f=!1;u?u.traces.push(r):(u=l[o]={traceIndices:[],traces:[r]},f=!0);for(var c={orientation:r.x&&!r.y?"h":"v"},h=0;h<Yfe.length;h++){var v=Yfe[h],p=v+"Found";if(!u[p]){var _=t[v]!==void 0,T=v==="orientation";if((_||f)&&(u[v]=n(v,c[v]),T&&(u.fillDflt=u[v]==="h"?"tonextx":"tonexty"),_&&(u[p]=!0,!f&&(delete u.traces[0][v],T))))for(var g=0;g<u.traces.length-1;g++){var A=u.traces[g];A._input.fill!==A.fill&&(A.fill=u.fillDflt)}}}return u}}});var dp=ne((dnr,Jfe)=>{"use strict";var Zfe=_i(),jfe=Uh().hasColorscale,Kfe=Kf(),Kct=js();Jfe.exports=function(t,r,i,n,a,o){var s=Kct.isBubble(t),l=(t.line||{}).color,u;if(o=o||{},l&&(i=l),a("marker.symbol"),a("marker.opacity",s?.7:1),a("marker.size"),o.noAngle||(a("marker.angle"),o.noAngleRef||a("marker.angleref"),o.noStandOff||a("marker.standoff")),a("marker.color",i),jfe(t,"marker")&&Kfe(t,r,n,a,{prefix:"marker.",cLetter:"c"}),o.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),o.noLine||(l&&!Array.isArray(l)&&r.marker.color!==l?u=l:s?u=Zfe.background:u=Zfe.defaultLine,a("marker.line.color",u),jfe(t,"marker.line")&&Kfe(t,r,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",s?1:0)),s&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),o.gradient){var f=a("marker.gradient.type");f!=="none"&&a("marker.gradient.color")}}});var s0=ne((pnr,Qfe)=>{"use strict";var Jct=Wt().isArrayOrTypedArray,Qct=Uh().hasColorscale,$ct=Kf();Qfe.exports=function(t,r,i,n,a,o){o||(o={});var s=(t.marker||{}).color;if(s&&s._inputArray&&(s=s._inputArray),a("line.color",i),Qct(t,"line"))$ct(t,r,n,a,{prefix:"line.",cLetter:"c"});else{var l=(Jct(s)?!1:s)||i;a("line.color",l)}a("line.width"),o.noDash||a("line.dash"),o.backoff&&a("line.backoff")}});var N2=ne((gnr,$fe)=>{"use strict";$fe.exports=function(t,r,i){var n=i("line.shape");n==="spline"&&i("line.smoothing")}});var l0=ne((ynr,ece)=>{"use strict";var eht=Wt();ece.exports=function(e,t,r,i,n){n=n||{},i("textposition"),eht.coerceFont(i,"textfont",n.font||r.font),n.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var X0=ne((mnr,rce)=>{"use strict";var oL=_i(),tce=Wt().isArrayOrTypedArray;function tht(e){for(var t=oL.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=oL.interpolate(e[r-1][1],e[r][1],.5);t=oL.interpolate(t,i,e[r-1][0]/e[r][0])}return t}rce.exports=function(t,r,i,n,a){a||(a={});var o=!1;if(r.marker){var s=r.marker.color,l=(r.marker.line||{}).color;s&&!tce(s)?o=s:l&&!tce(l)&&(o=l)}var u;if(a.moduleHasFillgradient){var f=n("fillgradient.type");if(f!=="none"){n("fillgradient.start"),n("fillgradient.stop");var c=n("fillgradient.colorscale");c&&(u=tht(c))}}n("fillcolor",oL.addOpacity((r.line||{}).color||o||u||i,.5))}});var oce=ne((xnr,ace)=>{"use strict";var nce=Wt(),rht=wi(),nht=cu(),iht=G0(),U2=js(),aht=B2(),oht=o0(),sht=Xfe(),lht=dp(),uht=s0(),ice=N2(),fht=l0(),cht=X0(),hht=Wt().coercePattern;ace.exports=function(t,r,i,n){function a(v,p){return nce.coerce(t,r,nht,v,p)}var o=aht(t,r,n,a);if(o||(r.visible=!1),!!r.visible){oht(t,r,n,a),a("xhoverformat"),a("yhoverformat");var s=sht(t,r,n,a);n.scattermode==="group"&&r.orientation===void 0&&a("orientation","v");var l=!s&&o<iht.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("mode",l),U2.hasMarkers(r)&&lht(t,r,i,n,a,{gradient:!0}),U2.hasLines(r)&&(uht(t,r,i,n,a,{backoff:!0}),ice(t,r,a),a("connectgaps"),a("line.simplify")),U2.hasText(r)&&(a("texttemplate"),fht(t,r,n,a));var u=[];(U2.hasMarkers(r)||U2.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),u.push("points")),a("fill",s?s.fillDflt:"none"),r.fill!=="none"&&(cht(t,r,i,a,{moduleHasFillgradient:!0}),U2.hasLines(r)||ice(t,r,a),hht(a,"fillpattern",r.fillcolor,!1));var f=(r.line||{}).color,c=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&u.push("fills"),a("hoveron",u.join("+")||"points"),r.hoveron!=="fills"&&a("hovertemplate");var h=rht.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),nce.coerceSelectionMarkerOpacity(r,a)}}});var Dx=ne((_nr,sce)=>{"use strict";var vht=mm().getAxisGroup;sce.exports=function(t,r,i,n){var a=r.orientation,o=r[{v:"x",h:"y"}[a]+"axis"],s=vht(i,o)+a,l=i._alignmentOpts||{},u=n("alignmentgroup"),f=l[s];f||(f=l[s]={});var c=f[u];c?c.traces.push(r):c=f[u]={traces:[r],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var h=n("offsetgroup"),v=c.offsetGroups,p=v[h];h&&(p||(p=v[h]={offsetIndex:Object.keys(v).length}),r._offsetIndex=p.offsetIndex)}});var J7=ne((bnr,lce)=>{"use strict";var dht=Wt(),pht=Dx(),ght=cu();lce.exports=function(t,r){var i,n,a;function o(c){return dht.coerce(n._input,n,ght,c)}if(r.scattermode==="group")for(a=0;a<t.length;a++)n=t[a],n.type==="scatter"&&(i=n._input,pht(i,n,r,o));for(a=0;a<t.length;a++){var s=t[a];if(s.type==="scatter"){var l=s.fill;if(!(l==="none"||l==="toself")&&(s.opacity=void 0,l==="tonexty"||l==="tonextx"))for(var u=a-1;u>=0;u--){var f=t[u];if(f.type==="scatter"&&f.xaxis===s.xaxis&&f.yaxis===s.yaxis){f.opacity=void 0;break}}}}}});var fce=ne((wnr,uce)=>{"use strict";var yht=Wt(),mht=uC();uce.exports=function(e,t){function r(n,a){return yht.coerce(e,t,mht,n,a)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var u0=ne((Tnr,hce)=>{"use strict";var xht=la(),cce=Wt(),_ht=cce.dateTime2ms,sL=cce.incrementMonth,bht=$a(),wht=bht.ONEAVGMONTH;hce.exports=function(t,r,i,n){if(r.type!=="date")return{vals:n};var a=t[i+"periodalignment"];if(!a)return{vals:n};var o=t[i+"period"],s;if(xht(o)){if(o=+o,o<=0)return{vals:n}}else if(typeof o=="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l)s=l;else return{vals:n}}for(var u=r.calendar,f=a==="start",c=a==="end",h=t[i+"period0"],v=_ht(h,u)||0,p=[],_=[],T=[],g=n.length,A=0;A<g;A++){var b=n[A],w,k,x;if(s){for(w=Math.round((b-v)/(s*wht)),x=sL(v,s*w,u);x>b;)x=sL(x,-s,u);for(;x<=b;)x=sL(x,s,u);k=sL(x,-s,u)}else{for(w=Math.round((b-v)/o),x=v+w*o;x>b;)x-=o;for(;x<=b;)x+=o;k=x-o}p[A]=f?k:c?x:(k+x)/2,_[A]=k,T[A]=x}return{vals:p,starts:_,ends:T}}});var pp=ne((Anr,dce)=>{"use strict";var Q7=Uh().hasColorscale,$7=gv(),vce=js();dce.exports=function(t,r){vce.hasLines(r)&&Q7(r,"line")&&$7(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),vce.hasMarkers(r)&&(Q7(r,"marker")&&$7(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),Q7(r,"marker.line")&&$7(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var Z0=ne((Mnr,pce)=>{"use strict";var zc=Wt();pce.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;zc.mergeArray(r.text,t,"tx"),zc.mergeArray(r.texttemplate,t,"txt"),zc.mergeArray(r.hovertext,t,"htx"),zc.mergeArray(r.customdata,t,"data"),zc.mergeArray(r.textposition,t,"tp"),r.textfont&&(zc.mergeArrayCastPositive(r.textfont.size,t,"ts"),zc.mergeArray(r.textfont.color,t,"tc"),zc.mergeArray(r.textfont.family,t,"tf"));var n=r.marker;if(n){zc.mergeArrayCastPositive(n.size,t,"ms"),zc.mergeArrayCastPositive(n.opacity,t,"mo"),zc.mergeArray(n.symbol,t,"mx"),zc.mergeArray(n.angle,t,"ma"),zc.mergeArray(n.standoff,t,"mf"),zc.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(zc.mergeArray(a.color,t,"mlc"),zc.mergeArrayCastPositive(a.width,t,"mlw"));var o=n.gradient;o&&o.type!=="none"&&(zc.mergeArray(o.type,t,"mgt"),zc.mergeArray(o.color,t,"mgc"))}}});var gp=ne((Snr,yce)=>{"use strict";var gce=Wt();yce.exports=function(t,r){gce.isArrayOrTypedArray(r.selectedpoints)&&gce.tagSelected(t,r)}});var yp=ne((Enr,Ace)=>{"use strict";var mce=la(),tB=Wt(),AM=Xi(),xce=u0(),eB=$a().BADNUM,rB=js(),Tht=pp(),Aht=Z0(),Mht=gp();function Sht(e,t){var r=e._fullLayout,i=t._xA=AM.getFromId(e,t.xaxis||"x","x"),n=t._yA=AM.getFromId(e,t.yaxis||"y","y"),a=i.makeCalcdata(t,"x"),o=n.makeCalcdata(t,"y"),s=xce(t,i,"x",a),l=xce(t,n,"y",o),u=s.vals,f=l.vals,c=t._length,h=new Array(c),v=t.ids,p=nB(t,r,i,n),_=!1,T,g,A,b,w,k;wce(r,t);var x="x",E="y",M;if(p)tB.pushUnique(p.traceIndices,t._expandedIndex),T=p.orientation==="v",T?(E="s",M="x"):(x="s",M="y"),w=p.stackgaps==="interpolate";else{var d=bce(t,c);_ce(e,t,i,n,u,f,d)}var C=!!t.xperiodalignment,S=!!t.yperiodalignment;for(g=0;g<c;g++){var P=h[g]={},D=mce(u[g]),z=mce(f[g]);D&&z?(P[x]=u[g],P[E]=f[g],C&&(P.orig_x=a[g],P.xEnd=s.ends[g],P.xStart=s.starts[g]),S&&(P.orig_y=o[g],P.yEnd=l.ends[g],P.yStart=l.starts[g])):p&&(T?D:z)?(P[M]=T?u[g]:f[g],P.gap=!0,w?(P.s=eB,_=!0):P.s=0):P[x]=P[E]=eB,v&&(P.id=String(v[g]))}if(Aht(h,t),Tht(e,t),Mht(h,t),p){for(g=0;g<h.length;)h[g][M]===eB?h.splice(g,1):g++;if(tB.sort(h,function(F,N){return F[M]-N[M]||F.i-N.i}),_){for(g=0;g<h.length-1&&h[g].gap;)g++;for(k=h[g].s,k||(k=h[g].s=0),A=0;A<g;A++)h[A].s=k;for(b=h.length-1;b>g&&h[b].gap;)b--;for(k=h[b].s,A=h.length-1;A>b;A--)h[A].s=k;for(;g<b;)if(g++,h[g].gap){for(A=g+1;h[A].gap;)A++;for(var O=h[g-1][M],V=h[g-1].s,B=(h[A].s-V)/(h[A][M]-O);g<A;)h[g].s=V+(h[g][M]-O)*B,g++}}}return h}function _ce(e,t,r,i,n,a,o){var s=t._length,l=e._fullLayout,u=r._id,f=i._id,c=l._firstScatter[Tce(t)]===t.uid,h=(nB(t,l,r,i)||{}).orientation,v=t.fill;r._minDtick=0,i._minDtick=0;var p={padded:!0},_={padded:!0};o&&(p.ppad=_.ppad=o);var T=s<2||n[0]!==n[s-1]||a[0]!==a[s-1];T&&(v==="tozerox"||v==="tonextx"&&(c||h==="h"))?p.tozero=!0:!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!rB.hasMarkers(t)&&!rB.hasText(t))&&(p.padded=!1,p.ppad=0),T&&(v==="tozeroy"||v==="tonexty"&&(c||h==="v"))?_.tozero=!0:(v==="tonextx"||v==="tozerox")&&(_.padded=!1),u&&(t._extremes[u]=AM.findExtremes(r,n,p)),f&&(t._extremes[f]=AM.findExtremes(i,a,_))}function bce(e,t){if(rB.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),n;if(e.marker.sizemode==="area"?n=function(u){return Math.max(Math.sqrt((u||0)/i),3)}:n=function(u){return Math.max((u||0)/i,3)},tB.isArrayOrTypedArray(r.size)){var a={type:"linear"};AM.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(o[l]);return s}else return n(r.size)}}function wce(e,t){var r=Tce(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function Tce(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function nB(e,t,r,i){var n=e.stackgroup;if(n){var a=t._scatterStackOpts[r._id+i._id][n],o=a.orientation==="v"?i:r;if(o.type==="linear"||o.type==="log")return a}}Ace.exports={calc:Sht,calcMarkerSize:bce,calcAxisExpansion:_ce,setFirstScatter:wce,getStackOpts:nB}});var Sce=ne((knr,Mce)=>{"use strict";Mce.exports=lL;var Eht=Wt().distinctVals;function lL(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),n=[],a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l.p;u===void 0&&(u=l[i]),u!==void 0&&n.push(u)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=n;var f=Eht(n);this.distinctPositions=f.vals,f.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(f.minDiff,r);var c=(t.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}lL.prototype.put=function(t,r){var i=this.getLabel(t,r),n=this.bins[i]||0;return this.bins[i]=n+r,n};lL.prototype.get=function(t,r){var i=this.getLabel(t,r);return this.bins[i]||0};lL.prototype.getLabel=function(t,r){var i=r<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+n}});var Ix=ne((Cnr,Dce)=>{"use strict";var mp=la(),Tm=Wt().isArrayOrTypedArray,V2=$a().BADNUM,kht=wi(),MM=Xi(),Cht=mm().getAxisGroup,uL=Sce();function Lht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];if(f.visible===!0&&kht.traceIs(f,"bar")&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):l.push(o[u]),f._computePh))for(var c=e.calcdata[u],h=0;h<c.length;h++)typeof c[h].ph0=="function"&&(c[h].ph0=c[h].ph0()),typeof c[h].ph1=="function"&&(c[h].ph1=c[h].ph1())}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};aB(e,r,i,l,v),aB(e,i,r,s,v)}function aB(e,t,r,i,n){if(i.length){var a,o,s,l,u;switch(Dht(r,i),n.mode){case"overlay":iB(t,r,i,n);break;case"group":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.offset===void 0?o.push(l):a.push(l);o.length&&Iht(e,t,r,o,n),a.length&&iB(t,r,a,n);break;case"stack":case"relative":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.base===void 0?o.push(l):a.push(l);Rht(o),o.length&&Fht(e,t,r,o,n),a.length&&iB(t,r,a,n);break}Pht(i),Nht(i,t)}}function Pht(e){var t,r,i,n,a,o,s;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,n=r[0].t,n.cornerradiusvalue===void 0&&(a=i.marker?i.marker.cornerradius:void 0,a!==void 0&&(o=mp(a)?+a:+a.slice(0,-1),s=mp(a)?"px":"%",n.cornerradiusvalue=o,n.cornerradiusform=s))}function Rht(e){if(!(e.length<2)){var t,r,i,n,a,o,s;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,a=i.marker?i.marker.cornerradius:void 0,a===void 0);t++);if(a!==void 0)for(o=mp(a)?+a:+a.slice(0,-1),s=mp(a)?"px":"%",t=0;t<e.length;t++)r=e[t],n=r[0].t,n.cornerradiusvalue=o,n.cornerradiusform=s}}function Dht(e,t){var r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0].trace,o=a.type==="funnel"?a._base:a.base,s,l=a.orientation==="h"?a.xcalendar:a.ycalendar,u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(Tm(o)){for(i=0;i<Math.min(o.length,n.length);i++)s=u(o[i],0,l),mp(s)?(n[i].b=+s,n[i].hasB=1):n[i].b=0;for(;i<n.length;i++)n[i].b=0}else{s=u(o,0,l);var f=mp(s);for(s=f?s:0,i=0;i<n.length;i++)n[i].b=s,f&&(n[i].hasB=1)}}}function iB(e,t,r,i){for(var n=0;n<r.length;n++){var a=r[n],o=new uL([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});Ece(e,o,i),i.norm?(Rce(o),oB(t,o,i)):Pce(t,o)}}function Iht(e,t,r,i,n){var a=new uL(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!n.norm});qht(e,t,a,n),Oht(a,t),n.norm?(Rce(a),oB(r,a,n)):Pce(r,a)}function Fht(e,t,r,i,n){var a=new uL(i,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});Ece(t,a,n),zht(r,a,n);for(var o=0;o<i.length;o++)for(var s=i[o],l=0;l<s.length;l++){var u=s[l];if(u.s!==V2){var f=u.b+u.s===a.get(u.p,u.s);f&&(u._outmost=!0)}}n.norm&&oB(r,a,n)}function Ece(e,t,r){for(var i=t.minDiff,n=t.traces,a=i*(1-r.gap),o=a,s=o*(1-(r.groupgap||0)),l=-s/2,u=0;u<n.length;u++){var f=n[u],c=f[0].t;c.barwidth=s,c.poffset=l,c.bargroupwidth=a,c.bardelta=i}t.binWidth=n[0][0].t.barwidth/100,kce(t),Cce(e,t),Lce(e,t)}function qht(e,t,r,i){for(var n=e._fullLayout,a=r.positions,o=r.distinctPositions,s=r.minDiff,l=r.traces,u=l.length,f=a.length!==o.length,c=s*(1-i.gap),h=Cht(n,t._id)+l[0][0].trace.orientation,v=n._alignmentOpts[h]||{},p=0;p<u;p++){var _=l[p],T=_[0].trace,g=v[T.alignmentgroup]||{},A=Object.keys(g.offsetGroups||{}).length,b;A?b=c/A:b=f?c/u:c;var w=b*(1-(i.groupgap||0)),k;A?k=((2*T._offsetIndex+1-A)*b-w)/2:k=f?((2*p+1-u)*b-w)/2:-w/2;var x=_[0].t;x.barwidth=w,x.poffset=k,x.bargroupwidth=c,x.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,kce(r),Cce(t,r),Lce(t,r,f)}function kce(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0],o=a.trace,s=a.t,l=o._offset||o.offset,u=s.poffset,f;if(Tm(l)){for(f=Array.prototype.slice.call(l,0,n.length),i=0;i<f.length;i++)mp(f[i])||(f[i]=u);for(i=f.length;i<n.length;i++)f.push(u);s.poffset=f}else l!==void 0&&(s.poffset=l);var c=o._width||o.width,h=s.barwidth;if(Tm(c)){var v=Array.prototype.slice.call(c,0,n.length);for(i=0;i<v.length;i++)mp(v[i])||(v[i]=h);for(i=v.length;i<n.length;i++)v.push(h);if(s.barwidth=v,l===void 0){for(f=[],i=0;i<n.length;i++)f.push(u+(h-v[i])/2);s.poffset=f}}else c!==void 0&&(s.barwidth=c,l===void 0&&(s.poffset=u+(h-c)/2))}}function Cce(e,t){for(var r=t.traces,i=H2(e),n=0;n<r.length;n++)for(var a=r[n],o=a[0].t,s=o.poffset,l=Tm(s),u=o.barwidth,f=Tm(u),c=0;c<a.length;c++){var h=a[c],v=h.w=f?u[c]:u;h.p===void 0&&(h.p=h[i],h["orig_"+i]=h[i]);var p=(l?s[c]:s)+v/2;h[i]=h.p+p}}function Lce(e,t,r){var i=t.traces,n=t.minDiff,a=n/2;MM.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<i.length;o++){var s=i[o],l=s[0],u=l.trace,f=[],c,h,v,p;for(p=0;p<s.length;p++)c=s[p],h=c.p-a,v=c.p+a,f.push(h,v);if(u.width||u.offset){var _=l.t,T=_.poffset,g=_.barwidth,A=Tm(T),b=Tm(g);for(p=0;p<s.length;p++){c=s[p];var w=A?T[p]:T,k=b?g[p]:g;h=c.p+w,v=h+k,f.push(h,v)}}u._extremes[e._id]=MM.findExtremes(e,f,{padded:!1})}}function Pce(e,t){for(var r=t.traces,i=H2(e),n=0;n<r.length;n++){for(var a=r[n],o=a[0].trace,s=o.type==="scatter",l=o.orientation==="v",u=[],f=!1,c=0;c<a.length;c++){var h=a[c],v=s?0:h.b,p=s?l?h.y:h.x:v+h.s;h[i]=p,u.push(p),h.hasB&&u.push(v),(!h.hasB||!h.b)&&(f=!0)}o._extremes[e._id]=MM.findExtremes(e,u,{tozero:f,padded:!0})}}function zht(e,t,r){var i=H2(e),n=t.traces,a,o,s,l,u,f;for(l=0;l<n.length;l++)if(a=n[l],o=a[0].trace,o.type==="funnel")for(u=0;u<a.length;u++)f=a[u],f.s!==V2&&t.put(f.p,-.5*f.s);for(l=0;l<n.length;l++){a=n[l],o=a[0].trace,s=o.type==="funnel";var c=[];for(u=0;u<a.length;u++)if(f=a[u],f.s!==V2){var h;s?h=f.s:h=f.s+f.b;var v=t.put(f.p,h),p=v+h;f.b=v,f[i]=p,r.norm||(c.push(p),f.hasB&&c.push(v))}r.norm||(o._extremes[e._id]=MM.findExtremes(e,c,{tozero:!0,padded:!0}))}}function Rce(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];a.s!==V2&&e.put(a.p,a.b+a.s)}}function Oht(e,t){for(var r=e.traces,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.base===void 0)for(var o=new uL([n],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<n.length;s++){var l=n[s];if(l.p!==V2){var u=o.put(l.p,l.b+l.s);u&&(l.b=u)}}}}function oB(e,t,r){var i=t.traces,n=H2(e),a=r.norm==="fraction"?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l=r.mode==="stack"?a:s;function u(k){return mp(e.c2l(k))&&(k<s-o||k>l+o||!mp(s))}for(var f=0;f<i.length;f++){for(var c=i[f],h=c[0].trace,v=[],p=!1,_=!1,T=0;T<c.length;T++){var g=c[T];if(g.s!==V2){var A=Math.abs(a/t.get(g.p,g.s));g.b*=A,g.s*=A;var b=g.b,w=b+g.s;g[n]=w,v.push(w),_=_||u(w),g.hasB&&(v.push(b),_=_||u(b)),(!g.hasB||!g.b)&&(p=!0)}}h._extremes[e._id]=MM.findExtremes(e,v,{tozero:p,padded:_})}}function Bht(e,t,r,i){for(var n=H2(i),a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l[n];l._sMin=t[u],l._sMax=r[u]}}function Nht(e,t){var r=H2(t),i={},n,a,o,s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(o=e[n],a=0;a<o.length;a++){var u=o[a].p;mp(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var f=1e4/(l-s),c=i.round=function(M){return String(Math.round(f*(M-s)))},h={},v={},p=e.some(function(M){var d=M[0].trace;return"marker"in d&&d.marker.cornerradius});for(n=0;n<e.length;n++){o=e[n],o[0].t.extents=i;var _=o[0].t.poffset,T=Tm(_);for(a=0;a<o.length;a++){var g=o[a],A=g[r]-g.w/2;if(mp(A)){var b=g[r]+g.w/2,w=c(g.p);i[w]?i[w]=[Math.min(A,i[w][0]),Math.max(b,i[w][1])]:i[w]=[A,b]}if(g.p0=g.p+(T?_[a]:_),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s,p){var k=Math.min(g.s0,g.s1)||0,x=Math.max(g.s0,g.s1)||0,E=g[r];h[E]=E in h?Math.min(h[E],k):k,v[E]=E in v?Math.max(v[E],x):x}}}p&&Bht(e,h,v,t)}function H2(e){return e._id.charAt(0)}Dce.exports={crossTraceCalc:Lht,setGroupPositions:aB}});var zce=ne((Lnr,qce)=>{"use strict";var Ice=yp(),Fce=Ix().setGroupPositions;function Uht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];f.visible===!0&&f.type==="scatter"&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):f.orientation==="v"&&l.push(o[u]))}var c={mode:n.scattermode,gap:n.scattergap};Fce(e,r,i,l,c),Fce(e,i,r,s,c)}qce.exports=function(t,r){t._fullLayout.scattermode==="group"&&Uht(t,r);var i=r.xaxis,n=r.yaxis,a=i._id+n._id,o=t._fullLayout._scatterStackOpts[a];if(o){var s=t.calcdata,l,u,f,c,h,v,p,_,T,g,A,b,w,k,x;for(var E in o){g=o[E];var M=g.traceIndices;if(M.length){for(A=g.stackgaps==="interpolate",b=g.groupnorm,g.orientation==="v"?(w="x",k="y"):(w="y",k="x"),x=new Array(M.length),l=0;l<x.length;l++)x[l]=!1;v=s[M[0]];var d=new Array(v.length);for(l=0;l<v.length;l++)d[l]=v[l][w];for(l=1;l<M.length;l++){for(h=s[M[l]],u=f=0;u<h.length;u++){for(p=h[u][w];p>d[f]&&f<d.length;f++)sB(h,u,d[f],l,x,A,w),u++;if(p!==d[f]){for(c=0;c<l;c++)sB(s[M[c]],f,p,c,x,A,w);d.splice(f,0,p)}f++}for(;f<d.length;f++)sB(h,u,d[f],l,x,A,w),u++}var C=d.length;for(u=0;u<v.length;u++){for(_=v[u][k]=v[u].s,l=1;l<M.length;l++)h=s[M[l]],h[0].trace._rawLength=h[0].trace._length,h[0].trace._length=C,_+=h[u].s,h[u][k]=_;if(b)for(T=(b==="fraction"?_:_/100)||1,l=0;l<M.length;l++){var S=s[M[l]][u];S[k]/=T,S.sNorm=S.s/T}}for(l=0;l<M.length;l++){h=s[M[l]];var P=h[0].trace,D=Ice.calcMarkerSize(P,P._rawLength),z=Array.isArray(D);if(D&&x[l]||z){var O=D;for(D=new Array(C),u=0;u<C;u++)D[u]=h[u].gap?0:z?O[h[u].i]:O}var V=new Array(C),B=new Array(C);for(u=0;u<C;u++)V[u]=h[u].x,B[u]=h[u].y;Ice.calcAxisExpansion(t,P,i,n,V,B,D),h[0].t.orientation=g.orientation}}}}};function sB(e,t,r,i,n,a,o){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,e.splice(t,0,s),t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=Vht(e,t,r,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function Vht(e,t,r,i){var n=e[t-1],a=e[t+1];return a?n?n.s+(a.s-n.s)*(r-n[i])/(a[i]-n[i]):a.s:n.s}});var uB=ne((Pnr,Hce)=>{"use strict";var Hht=aa(),Uce=$a(),SM=Uce.BADNUM,Vce=Uce.LOG_CLIP,Oce=Vce+.5,Bce=Vce-.5,fL=Wt(),Ght=fL.segmentsIntersect,Nce=fL.constrain,lB=G0();Hce.exports=function(t,r){var i=r.trace||{},n=r.xaxis,a=r.yaxis,o=n.type==="log",s=a.type==="log",l=n._length,u=a._length,f=r.backoff,c=i.marker,h=r.connectGaps,v=r.baseTolerance,p=r.shape,_=p==="linear",T=i.fill&&i.fill!=="none",g=[],A=lB.minTolerance,b=t.length,w=new Array(b),k=0,x,E,M,d,C,S,P,D,z,O,V,B,F,N,Z,J;function re(qt){var xt=t[qt];if(!xt)return!1;var At=r.linearized?n.l2p(xt.x):n.c2p(xt.x),Je=r.linearized?a.l2p(xt.y):a.c2p(xt.y);if(At===SM){if(o&&(At=n.c2p(xt.x,!0)),At===SM)return!1;s&&Je===SM&&(At*=Math.abs(n._m*u*(n._m>0?Oce:Bce)/(a._m*l*(a._m>0?Oce:Bce)))),At*=1e3}if(Je===SM){if(s&&(Je=a.c2p(xt.y,!0)),Je===SM)return!1;Je*=1e3}return[At,Je]}function le(qt,xt,At,Je){var xe=At-qt,ce=Je-xt,ge=.5-qt,qe=.5-xt,yt=xe*xe+ce*ce,Vt=xe*ge+ce*qe;if(Vt>0&&Vt<yt){var Ut=ge*ce-qe*xe;if(Ut*Ut<yt)return!0}}var fe,K;function X(qt,xt){var At=qt[0]/l,Je=qt[1]/u,xe=Math.max(0,-At,At-1,-Je,Je-1);return xe&&fe!==void 0&&le(At,Je,fe,K)&&(xe=0),xe&&xt&&le(At,Je,xt[0]/l,xt[1]/u)&&(xe=0),(1+lB.toleranceGrowth*xe)*v}function ae(qt,xt){var At=qt[0]-xt[0],Je=qt[1]-xt[1];return Math.sqrt(At*At+Je*Je)}var oe=lB.maxScreensAway,_e=-l*oe,be=l*(1+oe),he=-u*oe,ie=u*(1+oe),ye=[[_e,he,be,he],[be,he,be,ie],[be,ie,_e,ie],[_e,ie,_e,he]],ue,Ae,Re,ze,et,Le;function Ie(qt,xt){for(var At=[],Je=0,xe=0;xe<4;xe++){var ce=ye[xe],ge=Ght(qt[0],qt[1],xt[0],xt[1],ce[0],ce[1],ce[2],ce[3]);ge&&(!Je||Math.abs(ge.x-At[0][0])>1||Math.abs(ge.y-At[0][1])>1)&&(ge=[ge.x,ge.y],Je&&ae(ge,qt)<ae(At[0],qt)?At.unshift(ge):At.push(ge),Je++)}return At}function dt(qt){if(qt[0]<_e||qt[0]>be||qt[1]<he||qt[1]>ie)return[Nce(qt[0],_e,be),Nce(qt[1],he,ie)]}function ct(qt,xt){if(qt[0]===xt[0]&&(qt[0]===_e||qt[0]===be)||qt[1]===xt[1]&&(qt[1]===he||qt[1]===ie))return!0}function Ke(qt,xt){var At=[],Je=dt(qt),xe=dt(xt);return Je&&xe&&ct(Je,xe)||(Je&&At.push(Je),xe&&At.push(xe)),At}function _t(qt,xt,At){return function(Je,xe){var ce=dt(Je),ge=dt(xe),qe=[];if(ce&&ge&&ct(ce,ge))return qe;ce&&qe.push(ce),ge&&qe.push(ge);var yt=2*fL.constrain((Je[qt]+xe[qt])/2,xt,At)-((ce||Je)[qt]+(ge||xe)[qt]);if(yt){var Vt;ce&&ge?Vt=yt>0==ce[qt]>ge[qt]?ce:ge:Vt=ce||ge,Vt[qt]+=yt}return qe}}var zt;p==="linear"||p==="spline"?zt=Ie:p==="hv"||p==="vh"?zt=Ke:p==="hvh"?zt=_t(0,_e,be):p==="vhv"&&(zt=_t(1,he,ie));function Et(qt,xt){var At=xt[0]-qt[0],Je=(xt[1]-qt[1])/At,xe=(qt[1]*xt[0]-xt[1]*qt[0])/At;return xe>0?[Je>0?_e:be,ie]:[Je>0?be:_e,he]}function Se(qt){var xt=qt[0],At=qt[1],Je=xt===w[k-1][0],xe=At===w[k-1][1];if(!(Je&&xe))if(k>1){var ce=xt===w[k-2][0],ge=At===w[k-2][1];Je&&(xt===_e||xt===be)&&ce?ge?k--:w[k-1]=qt:xe&&(At===he||At===ie)&&ge?ce?k--:w[k-1]=qt:w[k++]=qt}else w[k++]=qt}function je(qt){w[k-1][0]!==qt[0]&&w[k-1][1]!==qt[1]&&Se([Re,ze]),Se(qt),et=null,Re=ze=0}var ht=fL.isArrayOrTypedArray(c);function nt(qt){if(qt&&f&&(qt.i=x,qt.d=t,qt.trace=i,qt.marker=ht?c[qt.i]:c,qt.backoff=f),fe=qt[0]/l,K=qt[1]/u,ue=qt[0]<_e?_e:qt[0]>be?be:0,Ae=qt[1]<he?he:qt[1]>ie?ie:0,ue||Ae){if(!k)w[k++]=[ue||qt[0],Ae||qt[1]];else if(et){var xt=zt(et,qt);xt.length>1&&(je(xt[0]),w[k++]=xt[1])}else Le=zt(w[k-1],qt)[0],w[k++]=Le;var At=w[k-1];ue&&Ae&&(At[0]!==ue||At[1]!==Ae)?(et&&(Re!==ue&&ze!==Ae?Se(Re&&ze?Et(et,qt):[Re||ue,ze||Ae]):Re&&ze&&Se([Re,ze])),Se([ue,Ae])):Re-ue&&ze-Ae&&Se([ue||Re,Ae||ze]),et=qt,Re=ue,ze=Ae}else et&&je(zt(et,qt)[0]),w[k++]=qt}for(x=0;x<b;x++)if(E=re(x),!!E){for(k=0,et=null,nt(E),x++;x<b;x++){if(d=re(x),!d){if(h)continue;break}if(!_||!r.simplify){nt(d);continue}var lt=re(x+1);if(O=ae(d,E),!(!(T&&(k===0||k===b-1))&&O<X(d,lt)*A)){for(D=[(d[0]-E[0])/O,(d[1]-E[1])/O],C=E,V=O,B=N=Z=0,P=!1,M=d,x++;x<t.length;x++){if(S=lt,lt=re(x+1),!S){if(h)continue;break}if(z=[S[0]-E[0],S[1]-E[1]],J=z[0]*D[1]-z[1]*D[0],N=Math.min(N,J),Z=Math.max(Z,J),Z-N>X(S,lt))break;M=S,F=z[0]*D[0]+z[1]*D[1],F>V?(V=F,d=S,P=!1):F<B&&(B=F,C=S,P=!0)}if(P?(nt(d),M!==C&&nt(C)):(C!==E&&nt(C),M!==d&&nt(d)),nt(M),x>=t.length||!S)break;nt(S),E=S}}et&&Se([Re||et[0],ze||et[1]]),g.push(w.slice(0,k))}var rt=p.slice(p.length-1);if(f&&rt!=="h"&&rt!=="v"){for(var Xe=!1,ft=-1,gt=[],Qt=0;Qt<g.length;Qt++)for(var Jt=0;Jt<g[Qt].length-1;Jt++){var fr=g[Qt][Jt],nr=g[Qt][Jt+1],ur=Hht.applyBackoff(nr,fr);(ur[0]!==nr[0]||ur[1]!==nr[1])&&(Xe=!0),gt[ft+1]||(ft++,gt[ft]=[fr,[ur[0],ur[1]]])}return Xe?gt:g}return g}});var fB=ne((Rnr,Yce)=>{"use strict";var Gce={tonextx:1,tonexty:1,tonext:1};Yce.exports=function(t,r,i){var n,a,o,s,l,u={},f=!1,c=-1,h=0,v=-1;for(a=0;a<i.length;a++)n=i[a][0].trace,o=n.stackgroup||"",o?o in u?l=u[o]:(l=u[o]=h,h++):n.fill in Gce&&v>=0?l=v:(l=v=h,h++),l<c&&(f=!0),n._groupIndex=c=l;var p=i.slice();f&&p.sort(function(T,g){var A=T[0].trace,b=g[0].trace;return A._groupIndex-b._groupIndex||A.index-b.index});var _={};for(a=0;a<p.length;a++)n=p[a][0].trace,o=n.stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in Gce&&(s=_[o],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),_[o]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return p}});var W2=ne((Dnr,Zce)=>{"use strict";var f0=Ai(),Yht=wi(),EM=Wt(),G2=EM.ensureSingle,Xce=EM.identity,hu=aa(),Y2=js(),Wht=uB(),Xht=fB(),cL=eM().tester;Zce.exports=function(t,r,i,n,a,o){var s,l,u=!a,f=!!a&&a.duration>0,c=Xht(t,r,i);if(s=n.selectAll("g.trace").data(c,function(v){return v[0].trace.uid}),s.enter().append("g").attr("class",function(v){return"trace scatter trace"+v[0].trace.uid}).style("stroke-miterlimit",2),s.order(),Zht(t,s,r),f){o&&(l=o());var h=f0.transition().duration(a.duration).ease(a.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});h.each(function(){n.selectAll("g.trace").each(function(v,p){Wce(t,p,r,v,c,this,a)})})}else s.each(function(v,p){Wce(t,p,r,v,c,this,a)});u&&s.exit().remove(),n.selectAll("path:not([d])").remove()};function Zht(e,t,r){t.each(function(i){var n=G2(f0.select(this),"g","fills");hu.setClipUrl(n,r.layerClipId,e);var a=i[0].trace,o=[];a._ownfill&&o.push("_ownFill"),a._nexttrace&&o.push("_nextFill");var s=n.selectAll("g").data(o,Xce);s.enter().append("g"),s.exit().each(function(l){a[l]=null}).remove(),s.order().each(function(l){a[l]=G2(f0.select(this),"path","js-fill")})})}function Wce(e,t,r,i,n,a,o){var s=e._context.staticPlot,l;jht(e,t,r,i,n);var u=!!o&&o.duration>0;function f(_t){return u?_t.transition():_t}var c=r.xaxis,h=r.yaxis,v=i[0].trace,p=v.line,_=f0.select(a),T=G2(_,"g","errorbars"),g=G2(_,"g","lines"),A=G2(_,"g","points"),b=G2(_,"g","text");if(Yht.getComponentMethod("errorbars","plot")(e,T,r,o),v.visible!==!0)return;f(_).style("opacity",v.opacity);var w,k,x=v.fill.charAt(v.fill.length-1);x!=="x"&&x!=="y"&&(x="");var E,M;x==="y"?(E=1,M=h.c2p(0,!0)):x==="x"&&(E=0,M=c.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=_;var d="",C=[],S=v._prevtrace,P=null,D=null;S&&(d=S._prevRevpath||"",k=S._nextFill,C=S._ownPolygons,P=S._fillsegments,D=S._fillElement);var z,O,V="",B="",F,N,Z,J,re,le,fe=[];v._polygons=[];var K=[],X=[],ae=EM.noop;if(w=v._ownFill,Y2.hasLines(v)||v.fill!=="none"){k&&k.datum(i),["hv","vh","hvh","vhv"].indexOf(p.shape)!==-1?(F=hu.steps(p.shape),N=hu.steps(p.shape.split("").reverse().join(""))):p.shape==="spline"?F=N=function(_t){var zt=_t[_t.length-1];return _t.length>1&&_t[0][0]===zt[0]&&_t[0][1]===zt[1]?hu.smoothclosed(_t.slice(1),p.smoothing):hu.smoothopen(_t,p.smoothing)}:F=N=function(_t){return"M"+_t.join("L")},Z=function(_t){return N(_t.reverse())},X=Wht(i,{xaxis:c,yaxis:h,trace:v,connectGaps:v.connectgaps,baseTolerance:Math.max(p.width||1,3)/4,shape:p.shape,backoff:p.backoff,simplify:p.simplify,fill:v.fill}),K=new Array(X.length);var oe=0;for(l=0;l<X.length;l++){var _e,be=X[l];!_e||!x?(_e=be.slice(),K[oe]=_e,oe++):_e.push.apply(_e,be)}v._fillElement=null,v._fillExclusionElement=D,v._fillsegments=K.slice(0,oe),K=v._fillsegments,X.length&&(J=X[0][0].slice(),re=X[X.length-1],le=re[re.length-1].slice()),ae=function(_t){return function(zt){if(z=F(zt),O=Z(zt),V?x?(V+="L"+z.substr(1),B=O+("L"+B.substr(1))):(V+="Z"+z,B=O+"Z"+B):(V=z,B=O),Y2.hasLines(v)){var Et=f0.select(this);if(Et.datum(i),_t)f(Et.style("opacity",0).attr("d",z).call(hu.lineGroupStyle)).style("opacity",1);else{var Se=f(Et);Se.attr("d",z),hu.singleLineStyle(i,Se)}}}}}var he=g.selectAll(".js-line").data(X);f(he.exit()).style("opacity",0).remove(),he.each(ae(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect",s?"none":"non-scaling-stroke").call(hu.lineGroupStyle).each(ae(!0)),hu.setClipUrl(he,r.layerClipId,e);function ie(_t){f(_t).attr("d","M0,0Z")}var ye=function(){var _t=new Array(K.length);for(l=0;l<K.length;l++)_t[l]=cL(K[l]);return _t},ue=function(_t){var zt,Et;if(!_t||_t.length===0)for(zt=new Array(K.length),Et=0;Et<K.length;Et++){var Se=K[Et][0].slice(),je=K[Et][K[Et].length-1].slice();Se[E]=je[E]=M;var ht=[je,Se],nt=ht.concat(K[Et]);zt[Et]=cL(nt)}else{for(zt=new Array(_t.length-1+K.length),Et=0;Et<_t.length-1;Et++)zt[Et]=cL(_t[Et]);var lt=_t[_t.length-1].slice();for(lt.reverse(),Et=0;Et<K.length;Et++)zt[_t.length-1+Et]=cL(K[Et].concat(lt))}return zt};X.length?(w?(w.datum(i),J&&le&&(x?(J[E]=le[E]=M,f(w).attr("d","M"+le+"L"+J+"L"+V.substr(1)).call(hu.singleFillStyle,e),fe=ue(null)):(f(w).attr("d",V+"Z").call(hu.singleFillStyle,e),fe=ye())),v._polygons=fe,v._fillElement=w):k&&(v.fill.substr(0,6)==="tonext"&&V&&d?(v.fill==="tonext"?(f(k).attr("d",V+"Z"+d+"Z").call(hu.singleFillStyle,e),fe=ye(),v._polygons=fe.concat(C)):(f(k).attr("d",V+"L"+d.substr(1)+"Z").call(hu.singleFillStyle,e),fe=ue(P),v._polygons=fe),v._fillElement=k):ie(k)),v._prevRevpath=B):(w?ie(w):k&&ie(k),v._prevRevpath=null),v._ownPolygons=fe;function Ae(_t){return _t.filter(function(zt){return!zt.gap&&zt.vis})}function Re(_t){return _t.filter(function(zt){return zt.vis})}function ze(_t){return _t.filter(function(zt){return!zt.gap})}function et(_t){return _t.id}function Le(_t){if(_t.ids)return et}function Ie(){return!1}function dt(_t,zt,Et){var Se,je,ht,nt=Et[0].trace,lt=Y2.hasMarkers(nt),rt=Y2.hasText(nt),Xe=Le(nt),ft=Ie,gt=Ie;if(lt||rt){var Qt=Xce,Jt=nt.stackgroup,fr=Jt&&e._fullLayout._scatterStackOpts[c._id+h._id][Jt].stackgaps==="infer zero";nt.marker.maxdisplayed||nt._needsCull?Qt=fr?Re:Ae:Jt&&!fr&&(Qt=ze),lt&&(ft=Qt),rt&&(gt=Qt)}je=_t.selectAll("path.point"),Se=je.data(ft,Xe);var nr=Se.enter().append("path").classed("point",!0);u&&nr.call(hu.pointStyle,nt,e).call(hu.translatePoints,c,h).style("opacity",0).transition().style("opacity",1),Se.order();var ur;lt&&(ur=hu.makePointStyleFns(nt)),Se.each(function(qt){var xt=f0.select(this),At=f(xt);ht=hu.translatePoint(qt,At,c,h),ht?(hu.singlePointStyle(qt,At,nt,ur,e),r.layerClipId&&hu.hideOutsideRangePoint(qt,At,c,h,nt.xcalendar,nt.ycalendar),nt.customdata&&xt.classed("plotly-customdata",qt.data!==null&&qt.data!==void 0)):At.remove()}),u?Se.exit().transition().style("opacity",0).remove():Se.exit().remove(),je=zt.selectAll("g"),Se=je.data(gt,Xe),Se.enter().append("g").classed("textpoint",!0).append("text"),Se.order(),Se.each(function(qt){var xt=f0.select(this),At=f(xt.select("text"));ht=hu.translatePoint(qt,At,c,h),ht?r.layerClipId&&hu.hideOutsideRangePoint(qt,xt,c,h,nt.xcalendar,nt.ycalendar):xt.remove()}),Se.selectAll("text").call(hu.textPointStyle,nt,e).each(function(qt){var xt=c.c2p(qt.x),At=h.c2p(qt.y);f0.select(this).selectAll("tspan.line").each(function(){f(f0.select(this)).attr({x:xt,y:At})})}),Se.exit().remove()}A.datum(i),b.datum(i),dt(A,b,i);var ct=v.cliponaxis===!1,Ke=ct?null:r.layerClipId;hu.setClipUrl(A,Ke,e),hu.setClipUrl(b,Ke,e)}function jht(e,t,r,i,n){var a=r.xaxis,o=r.yaxis,s=f0.extent(EM.simpleMap(a.range,a.r2c)),l=f0.extent(EM.simpleMap(o.range,o.r2c)),u=i[0].trace;if(Y2.hasMarkers(u)){var f=u.marker.maxdisplayed;if(f!==0){var c=i.filter(function(_){return _.x>=s[0]&&_.x<=s[1]&&_.y>=l[0]&&_.y<=l[1]}),h=Math.ceil(c.length/f),v=0;n.forEach(function(_,T){var g=_[0].trace;Y2.hasMarkers(g)&&g.marker.maxdisplayed>0&&T<t&&v++});var p=Math.round(v*h/3+Math.floor(v/3)*h/7.1);i.forEach(function(_){delete _.vis}),c.forEach(function(_,T){Math.round((T+p)%h)===0&&(_.vis=!0)})}}}});var ph=ne((Inr,jce)=>{"use strict";jce.exports={container:"marker",min:"cmin",max:"cmax"}});var vL=ne((Fnr,Kce)=>{"use strict";var hL=Xi();Kce.exports=function(t,r,i){var n={},a={_fullLayout:i},o=hL.getFromTrace(a,r,"x"),s=hL.getFromTrace(a,r,"y"),l=t.orig_x;l===void 0&&(l=t.x);var u=t.orig_y;return u===void 0&&(u=t.y),n.xLabel=hL.tickText(o,o.c2l(l),!0).text,n.yLabel=hL.tickText(s,s.c2l(u),!0).text,n}});var Tv=ne((qnr,Jce)=>{"use strict";var cB=Ai(),X2=aa(),Kht=wi();function Jht(e){var t=cB.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=cB.select(this),n=r.trace||r[0].trace;hB(i,n,e)}),t.selectAll("g.text").each(function(r){var i=cB.select(this),n=r.trace||r[0].trace;vB(i,n,e)}),t.selectAll("g.trace path.js-line").call(X2.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(X2.fillGroupStyle,e,!1),Kht.getComponentMethod("errorbars","style")(t)}function hB(e,t,r){X2.pointStyle(e.selectAll("path.point"),t,r)}function vB(e,t,r){X2.textPointStyle(e.selectAll("text"),t,r)}function Qht(e,t,r){var i=t[0].trace;i.selectedpoints?(X2.selectedPointStyle(r.selectAll("path.point"),i),X2.selectedTextStyle(r.selectAll("text"),i)):(hB(r,i,e),vB(r,i,e))}Jce.exports={style:Jht,stylePoints:hB,styleText:vB,styleOnSelect:Qht}});var j2=ne((znr,Qce)=>{"use strict";var Z2=_i(),$ht=js();Qce.exports=function(t,r){var i,n;if(t.mode==="lines")return i=t.line.color,i&&Z2.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var a=r.mcc||(t.marker||{}).color,o=r.mlcc||((t.marker||{}).line||{}).color;return n=a&&Z2.opacity(a)?a:o&&Z2.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"",n?Z2.opacity(n)<.3?Z2.addOpacity(n,.3):n:(i=(t.line||{}).color,i&&Z2.opacity(i)&&$ht.hasLines(t)&&t.line.width?i:t.fillcolor)}});var K2=ne((Onr,ehe)=>{"use strict";var dL=Wt(),$ce=Ol(),evt=wi(),tvt=j2(),dB=_i(),rvt=dL.fillText;ehe.exports=function(t,r,i,n){var a=t.cd,o=a[0].trace,s=t.xa,l=t.ya,u=s.c2p(r),f=l.c2p(i),c=[u,f],h=o.hoveron||"",v=o.mode.indexOf("markers")!==-1?3:.5,p=!!o.xperiodalignment,_=!!o.yperiodalignment;if(h.indexOf("points")!==-1){var T=function(B){if(p){var F=s.c2p(B.xStart),N=s.c2p(B.xEnd);return u>=Math.min(F,N)&&u<=Math.max(F,N)?0:1/0}var Z=Math.max(3,B.mrc||0),J=1-1/Z,re=Math.abs(s.c2p(B.x)-u);return re<Z?J*re/Z:re-Z+J},g=function(B){if(_){var F=l.c2p(B.yStart),N=l.c2p(B.yEnd);return f>=Math.min(F,N)&&f<=Math.max(F,N)?0:1/0}var Z=Math.max(3,B.mrc||0),J=1-1/Z,re=Math.abs(l.c2p(B.y)-f);return re<Z?J*re/Z:re-Z+J},A=function(B){var F=Math.max(v,B.mrc||0),N=s.c2p(B.x)-u,Z=l.c2p(B.y)-f;return Math.max(Math.sqrt(N*N+Z*Z)-F,1-v/F)},b=$ce.getDistanceFunction(n,T,g,A);if($ce.getClosest(a,b,t),t.index!==!1){var w=a[t.index],k=s.c2p(w.x,!0),x=l.c2p(w.y,!0),E=w.mrc||1;t.index=w.i;var M=a[0].t.orientation,d=M&&(w.sNorm||w.s),C=M==="h"?d:w.orig_x!==void 0?w.orig_x:w.x,S=M==="v"?d:w.orig_y!==void 0?w.orig_y:w.y;return dL.extendFlat(t,{color:tvt(o,w),x0:k-E,x1:k+E,xLabelVal:C,y0:x-E,y1:x+E,yLabelVal:S,spikeDistance:A(w),hovertemplate:o.hovertemplate}),rvt(w,o,t),evt.getComponentMethod("errorbars","hoverInfo")(w,o,t),[t]}}function P(B){if(!B)return!1;var F=B.node();try{var N=new DOMPoint(c[0],c[1]);return F.isPointInFill(N)}catch(J){var Z=F.ownerSVGElement.createSVGPoint();return Z.x=c[0],Z.y=c[1],F.isPointInFill(Z)}}function D(B){var F,N=[],Z=1/0,J=-1/0,re=1/0,le=-1/0,fe;for(F=0;F<B.length;F++){var K=B[F];K.contains(c)&&(N.push(K),re=Math.min(re,K.ymin),le=Math.max(le,K.ymax))}if(N.length===0)return null;re=Math.max(re,0),le=Math.min(le,l._length),fe=(re+le)/2;var X,ae,oe,_e,be,he,ie;for(F=0;F<N.length;F++)for(ae=N[F].pts,X=1;X<ae.length;X++)he=ae[X-1][1],ie=ae[X][1],he>fe!=ie>=fe&&(_e=ae[X-1][0],be=ae[X][0],ie-he&&(oe=_e+(be-_e)*(fe-he)/(ie-he),Z=Math.min(Z,oe),J=Math.max(J,oe)));return Z=Math.max(Z,0),J=Math.min(J,s._length),{x0:Z,x1:J,y0:fe,y1:fe}}if(h.indexOf("fills")!==-1&&o._fillElement){var z=P(o._fillElement)&&!P(o._fillExclusionElement);if(z){var O=D(o._polygons);O===null&&(O={x0:c[0],x1:c[0],y0:c[1],y1:c[1]});var V=dB.defaultLine;return dB.opacity(o.fillcolor)?V=o.fillcolor:dB.opacity((o.line||{}).color)&&(V=o.line.color),dL.extendFlat(t,{distance:t.maxHoverDistance,x0:O.x0,x1:O.x1,y0:O.y0,y1:O.y1,color:V,hovertemplate:!1}),delete t.index,o.text&&!dL.isArrayOrTypedArray(o.text)?t.text=String(o.text):t.text=o.name,[t]}}}});var J2=ne((Bnr,rhe)=>{"use strict";var the=js();rhe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h=!the.hasMarkers(s)&&!the.hasText(s);if(h)return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++)u=i[l],f=n.c2p(u.x),c=a.c2p(u.y),u.i!==null&&r.contains([f,c],!1,l,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0;return o}});var pB=ne((Nnr,nhe)=>{"use strict";nhe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var yB=ne((Unr,ohe)=>{"use strict";var kM=wi().traceIs,gB=x2();ohe.exports=function(t,r,i,n){i("autotypenumbers",n.autotypenumbersDflt);var a=i("type",(n.splomStash||{}).type);a==="-"&&(nvt(r,n.data),r.type==="-"?r.type="linear":t.type=r.type)};function nvt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n;r.indexOf("scene")!==-1&&(r=i);var a=ivt(t,r,i);if(a){if(a.type==="histogram"&&i==={v:"y",h:"x"}[a.orientation||"v"]){e.type="linear";return}var o=i+"calendar",s=a[o],l={noMultiCategory:!kM(a,"cartesian")||kM(a,"noMultiCategory")};if(a.type==="box"&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(l.noMultiCategory=!0),l.autotypenumbers=e.autotypenumbers,ahe(a,i)){var u=ihe(a),f=[];for(n=0;n<t.length;n++){var c=t[n];!kM(c,"box-violin")||(c[i+"axis"]||i)!==r||(c[u]!==void 0?f.push(c[u][0]):c.name!==void 0?f.push(c.name):f.push("text"),c[o]!==s&&(s=void 0))}e.type=gB(f,s,l)}else if(a.type==="splom"){var h=a.dimensions,v=h[a._axesDim[r]];v.visible&&(e.type=gB(v.values,s,l))}else e.type=gB(a[i]||[a[i+"0"]],s,l)}}}function ivt(e,t,r){for(var i=0;i<e.length;i++){var n=e[i];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t])return n;if((n[r+"axis"]||r)===t){if(ahe(n,r))return n;if((n[r]||[]).length||n[r+"0"])return n}}}function ihe(e){return{v:"x",h:"y"}[e.orientation||"v"]}function ahe(e,t){var r=ihe(e),i=kM(e,"box-violin"),n=kM(e._fullInput||{},"candlestick");return i&&!n&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var pL=ne((Vnr,she)=>{"use strict";var avt=uh().isTypedArraySpec;function ovt(e,t){var r=t.dataAttr||e._id.charAt(0),i={},n,a,o;if(t.axData)n=t.axData;else for(n=[],a=0;a<t.data.length;a++){var s=t.data[a];s[r+"axis"]===e._id&&n.push(s)}for(a=0;a<n.length;a++){var l=n[a][r];for(o=0;o<l.length;o++){var u=l[o];u!=null&&(i[u]=1)}}return Object.keys(i)}she.exports=function(t,r,i,n){if(r.type==="category"){var a=t.categoryarray,o=Array.isArray(a)&&a.length>0||avt(a),s;o&&(s="array");var l=i("categoryorder",s),u;l==="array"&&(u=i("categoryarray")),!o&&l==="array"&&(l=r.categoryorder="trace"),l==="trace"?r._initialCategories=[]:l==="array"?r._initialCategories=u.slice():(u=ovt(r,n).sort(),l==="category ascending"?r._initialCategories=u:l==="category descending"&&(r._initialCategories=u.reverse()))}}});var CM=ne((Hnr,uhe)=>{"use strict";var lhe=Xf().mix,svt=Ku(),lvt=Wt();uhe.exports=function(t,r,i,n){n=n||{};var a=n.dfltColor;function o(E,M){return lvt.coerce2(t,r,n.attributes,E,M)}var s=o("linecolor",a),l=o("linewidth"),u=i("showline",n.showLine||!!s||!!l);u||(delete r.linecolor,delete r.linewidth);var f=lhe(a,n.bgColor,n.blend||svt.lightFraction).toRgbString(),c=o("gridcolor",f),h=o("gridwidth"),v=o("griddash"),p=i("showgrid",n.showGrid||!!c||!!h||!!v);if(p||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),n.hasMinor){var _=lhe(r.gridcolor,n.bgColor,67).toRgbString(),T=o("minor.gridcolor",_),g=o("minor.gridwidth",r.gridwidth||1),A=o("minor.griddash",r.griddash||"solid"),b=i("minor.showgrid",!!T||!!g||!!A);b||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!n.noZeroLine){var w=o("zerolinecolor",a),k=o("zerolinewidth"),x=i("zeroline",n.showGrid||!!w||!!k);x||(delete r.zerolinecolor,delete r.zerolinewidth)}}});var PM=ne((Gnr,phe)=>{"use strict";var fhe=la(),uvt=wi(),LM=Wt(),fvt=So(),cvt=ch(),mB=dc(),che=hx(),hhe=d2(),hvt=im(),vvt=am(),dvt=pL(),pvt=CM(),gvt=cO(),vhe=B0(),gL=wf().WEEKDAY_PATTERN,yvt=wf().HOUR_PATTERN;phe.exports=function(t,r,i,n,a){var o=n.letter,s=n.font||{},l=n.splomStash||{},u=i("visible",!n.visibleDflt),f=r._template||{},c=r.type||f.type||"-",h;if(c==="date"){var v=uvt.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar),n.noTicklabelmode||(h=i("ticklabelmode"))}var p="";(!n.noTicklabelposition||c==="multicategory")&&(p=LM.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||i("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":c==="category"||c==="multicategory"?"allow":"hide past div"),vhe(r,a),gvt(t,r,i,n),dvt(t,r,i,n),c!=="category"&&!n.noHover&&i("hoverformat");var _=i("color"),T=_!==mB.color.dflt?_:s.color,g=l.label||a._dfltTitle[o];if(vvt(t,r,i,c,n),!u)return r;i("title.text",g),LM.coerceFont(i,"title.font",{family:s.family,size:LM.bigFont(s.size),color:T}),che(t,r,i,c);var A=n.hasMinor;if(A&&(fvt.newContainer(r,"minor"),che(t,r,i,c,{isMinor:!0})),hvt(t,r,i,c,n),hhe(t,r,i,n),A){var b=n.isMinor;n.isMinor=!0,hhe(t,r,i,n),n.isMinor=b}pvt(t,r,i,{dfltColor:_,bgColor:n.bgColor,showGrid:n.showGrid,hasMinor:A,attributes:mB}),A&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var w=c==="multicategory";if(!n.noTickson&&(c==="category"||w)&&(r.ticks||r.showgrid)){var k;w&&(k="boundaries");var x=i("tickson",k);x==="boundaries"&&delete r.ticklabelposition}if(w){var E=i("showdividers");E&&(i("dividercolor"),i("dividerwidth"))}if(c==="date")if(cvt(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:mvt}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var M=0;M<r.rangebreaks.length;M++)if(r.rangebreaks[M].pattern===gL){r._hasDayOfWeekBreaks=!0;break}if(vhe(r,a),a._has("scattergl")||a._has("splom"))for(var d=0;d<n.data.length;d++){var C=n.data[d];(C.type==="scattergl"||C.type==="splom")&&(C.visible=!1,LM.warn(C.type+" traces do not work on axes with rangebreaks. Setting trace "+C.index+" to `visible: false`."))}}return r};function mvt(e,t,r){function i(h,v){return LM.coerce(e,t,mB.rangebreaks,h,v)}var n=i("enabled");if(n){var a=i("bounds");if(a&&a.length>=2){var o="",s,l;if(a.length===2){for(s=0;s<2;s++)if(l=dhe(a[s]),l){o=gL;break}}var u=i("pattern",o);if(u===gL)for(s=0;s<2;s++)l=dhe(a[s]),l&&(t.bounds[s]=a[s]=l-1);if(u)for(s=0;s<2;s++)switch(l=a[s],u){case gL:if(!fhe(l)){t.enabled=!1;return}if(l=+l,l!==Math.floor(l)||l<0||l>=7){t.enabled=!1;return}t.bounds[s]=a[s]=l;break;case yvt:if(!fhe(l)){t.enabled=!1;return}if(l=+l,l<0||l>24){t.enabled=!1;return}t.bounds[s]=a[s]=l;break}if(r.autorange===!1){var f=r.range;if(f[0]<f[1]){if(a[0]<f[0]&&a[1]>f[1]){t.enabled=!1;return}}else if(a[0]>f[0]&&a[1]<f[1]){t.enabled=!1;return}}}else{var c=i("values");if(c&&c.length)i("dvalue");else{t.enabled=!1;return}}}}var xvt={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function dhe(e){if(typeof e=="string")return xvt[e.substr(0,3).toLowerCase()]}});var mL=ne((Ynr,ghe)=>{"use strict";var _vt=la(),yL=Wt();ghe.exports=function(t,r,i,n){var a=n.counterAxes||[],o=n.overlayableAxes||[],s=n.letter,l=n.grid,u=n.overlayingDomain,f,c,h,v,p,_;l&&(c=l._domains[s][l._axisMap[r._id]],f=l._anchors[r._id],c&&(h=l[s+"side"].split(" ")[0],v=l.domain[s][h==="right"||h==="top"?1:0])),c=c||[0,1],f=f||(_vt(t.position)?"free":a[0]||"free"),h=h||(s==="x"?"bottom":"left"),v=v||0,p=0,_=!1;var T=yL.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:f}},"anchor"),g=yL.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");if(T==="free"){if(s==="y"){var A=i("autoshift");A&&(v=g==="left"?u[0]:u[1],_=r.automargin?r.automargin:!0,p=g==="left"?-3:3),i("shift",p)}i("position",v)}i("automargin",_);var b=!1;if(o.length&&(b=yL.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!b){var w=i("domain",c);w[0]>w[1]-1/4096&&(r.domain=c),yL.noneOrAll(t.domain,r.domain,c),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var Mhe=ne((Wnr,Ahe)=>{"use strict";var Fx=Wt(),yhe=_i(),bvt=td().isUnifiedHover,wvt=zO(),mhe=So(),Tvt=tx(),xhe=dc(),Avt=yB(),_he=PM(),Mvt=mm(),bhe=mL(),_B=zl(),j0=_B.id2name,whe=_B.name2id,Svt=wf().AX_ID_PATTERN,The=wi(),RM=The.traceIs,xB=The.getComponentMethod;function xL(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}Ahe.exports=function(t,r,i){var n=r.autotypenumbers,a={},o={},s={},l={},u={},f={},c={},h={},v={},p={},_,T;for(_=0;_<i.length;_++){var g=i[_];if(!(!RM(g,"cartesian")&&!RM(g,"gl2d"))){var A;if(g.xaxis)A=j0(g.xaxis),xL(a,A,g);else if(g.xaxes)for(T=0;T<g.xaxes.length;T++)xL(a,j0(g.xaxes[T]),g);var b;if(g.yaxis)b=j0(g.yaxis),xL(a,b,g);else if(g.yaxes)for(T=0;T<g.yaxes.length;T++)xL(a,j0(g.yaxes[T]),g);if(g.type==="funnel"?g.orientation==="h"?(A&&(o[A]=!0),b&&(c[b]=!0)):b&&(s[b]=!0):g.type==="image"?(b&&(h[b]=!0),A&&(h[A]=!0)):(b&&(u[b]=!0,f[b]=!0),(!RM(g,"carpet")||g.type==="carpet"&&!g._cheater)&&A&&(l[A]=!0)),g.type==="carpet"&&g._cheater&&A&&(o[A]=!0),RM(g,"2dMap")&&(v[A]=!0,v[b]=!0),RM(g,"oriented")){var w=g.orientation==="h"?b:A;p[w]=!0}}}var k=r._subplots,x=k.xaxis,E=k.yaxis,M=Fx.simpleMap(x,j0),d=Fx.simpleMap(E,j0),C=M.concat(d),S=yhe.background;x.length&&E.length&&(S=Fx.coerce(t,r,Tvt,"plot_bgcolor"));var P=yhe.combine(S,r.paper_bgcolor),D,z,O,V,B;function F(){var je=a[D]||[];B._traceIndices=je.map(function(ht){return ht._expandedIndex}),B._annIndices=[],B._shapeIndices=[],B._selectionIndices=[],B._imgIndices=[],B._subplotsWith=[],B._counterAxes=[],B._name=B._attr=D,B._id=z}function N(je,ht){return Fx.coerce(V,B,xhe,je,ht)}function Z(je,ht){return Fx.coerce2(V,B,xhe,je,ht)}function J(je){return je==="x"?E:x}function re(je,ht){for(var nt=je==="x"?M:d,lt=[],rt=0;rt<nt.length;rt++){var Xe=nt[rt];Xe!==ht&&!(t[Xe]||{}).overlaying&&lt.push(whe(Xe))}return lt}var le={x:J("x"),y:J("y")},fe=le.x.concat(le.y),K={},X=[];function ae(){var je=V.matches;Svt.test(je)&&fe.indexOf(je)===-1&&(K[je]=V.type,X=Object.keys(K))}var oe=wvt(t,r),_e=bvt(oe);for(_=0;_<C.length;_++){D=C[_],z=whe(D),O=D.charAt(0),Fx.isPlainObject(t[D])||(t[D]={}),V=t[D],B=mhe.newContainer(r,D,O+"axis"),F();var be=O==="x"&&!l[D]&&o[D]||O==="y"&&!u[D]&&s[D],he=O==="y"&&(!f[D]&&c[D]||h[D]),ie={hasMinor:!0,letter:O,font:r.font,outerTicks:v[D],showGrid:!p[D],data:a[D]||[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:be,reverseDflt:he,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[z],noAutotickangles:O==="y"};N("uirevision",r.uirevision),Avt(V,B,N,ie),_he(V,B,N,ie,r);var ye=_e&&O===oe.charAt(0),ue=Z("spikecolor",_e?B.color:void 0),Ae=Z("spikethickness",_e?1.5:void 0),Re=Z("spikedash",_e?"dot":void 0),ze=Z("spikemode",_e?"across":void 0),et=Z("spikesnap"),Le=N("showspikes",!!ye||!!ue||!!Ae||!!Re||!!ze||!!et);Le||(delete B.spikecolor,delete B.spikethickness,delete B.spikedash,delete B.spikemode,delete B.spikesnap);var Ie=j0(V.overlaying),dt=[0,1];if(r[Ie]!==void 0){var ct=j0(r[Ie].anchor);r[ct]!==void 0&&(dt=r[ct].domain)}bhe(V,B,N,{letter:O,counterAxes:le[O],overlayableAxes:re(O,D),grid:r.grid,overlayingDomain:dt}),N("title.standoff"),ae(),B._input=V}for(_=0;_<X.length;){z=X[_++],D=j0(z),O=D.charAt(0),Fx.isPlainObject(t[D])||(t[D]={}),V=t[D],B=mhe.newContainer(r,D,O+"axis"),F();var Ke={letter:O,font:r.font,outerTicks:v[D],showGrid:!p[D],data:[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[z]};N("uirevision",r.uirevision),B.type=K[z]||"linear",_he(V,B,N,Ke,r),bhe(V,B,N,{letter:O,counterAxes:le[O],overlayableAxes:re(O,D),grid:r.grid}),N("fixedrange"),ae(),B._input=V}var _t=xB("rangeslider","handleDefaults"),zt=xB("rangeselector","handleDefaults");for(_=0;_<M.length;_++)D=M[_],V=t[D],B=r[D],_t(t,r,D),B.type==="date"&&zt(V,B,r,d,B.calendar),N("fixedrange");for(_=0;_<d.length;_++){D=d[_],V=t[D],B=r[D];var Et=r[j0(B.anchor)],Se=xB("rangeslider","isVisible")(Et);N("fixedrange",Se)}Mvt.handleDefaults(t,r,{axIds:fe.concat(X).sort(_B.idSort),axHasImage:h})}});var khe=ne((Xnr,Ehe)=>{"use strict";var Evt=Ai(),She=wi(),_L=Wt(),Rd=aa(),bL=Xi();Ehe.exports=function(t,r,i,n){var a=t._fullLayout;if(r.length===0){bL.redrawComponents(t);return}function o(T){var g=T.xaxis,A=T.yaxis;a._defs.select("#"+T.clipId+"> rect").call(Rd.setTranslate,0,0).call(Rd.setScale,1,1),T.plot.call(Rd.setTranslate,g._offset,A._offset).call(Rd.setScale,1,1);var b=T.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(Rd.setPointGroupScale,1,1),b.selectAll(".textpoint").call(Rd.setTextPointsScale,1,1),b.call(Rd.hideOutsideRangePoints,T)}function s(T,g){var A=T.plotinfo,b=A.xaxis,w=A.yaxis,k=b._length,x=w._length,E=!!T.xr1,M=!!T.yr1,d=[];if(E){var C=_L.simpleMap(T.xr0,b.r2l),S=_L.simpleMap(T.xr1,b.r2l),P=C[1]-C[0],D=S[1]-S[0];d[0]=(C[0]*(1-g)+g*S[0]-C[0])/(C[1]-C[0])*k,d[2]=k*(1-g+g*D/P),b.range[0]=b.l2r(C[0]*(1-g)+g*S[0]),b.range[1]=b.l2r(C[1]*(1-g)+g*S[1])}else d[0]=0,d[2]=k;if(M){var z=_L.simpleMap(T.yr0,w.r2l),O=_L.simpleMap(T.yr1,w.r2l),V=z[1]-z[0],B=O[1]-O[0];d[1]=(z[1]*(1-g)+g*O[1]-z[1])/(z[0]-z[1])*x,d[3]=x*(1-g+g*B/V),w.range[0]=b.l2r(z[0]*(1-g)+g*O[0]),w.range[1]=w.l2r(z[1]*(1-g)+g*O[1])}else d[1]=0,d[3]=x;bL.drawOne(t,b,{skipTitle:!0}),bL.drawOne(t,w,{skipTitle:!0}),bL.redrawComponents(t,[b._id,w._id]);var F=E?k/d[2]:1,N=M?x/d[3]:1,Z=E?d[0]:0,J=M?d[1]:0,re=E?d[0]/d[2]*k:0,le=M?d[1]/d[3]*x:0,fe=b._offset-re,K=w._offset-le;A.clipRect.call(Rd.setTranslate,Z,J).call(Rd.setScale,1/F,1/N),A.plot.call(Rd.setTranslate,fe,K).call(Rd.setScale,F,N),Rd.setPointGroupScale(A.zoomScalePts,1/F,1/N),Rd.setTextPointsScale(A.zoomScaleTxt,1/F,1/N)}var l;n&&(l=n());function u(){for(var T={},g=0;g<r.length;g++){var A=r[g],b=A.plotinfo.xaxis,w=A.plotinfo.yaxis;A.xr1&&(T[b._name+".range"]=A.xr1.slice()),A.yr1&&(T[w._name+".range"]=A.yr1.slice())}return l&&l(),She.call("relayout",t,T).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}function f(){for(var T={},g=0;g<r.length;g++){var A=r[g],b=A.plotinfo.xaxis,w=A.plotinfo.yaxis;A.xr0&&(T[b._name+".range"]=A.xr0.slice()),A.yr0&&(T[w._name+".range"]=A.yr0.slice())}return She.call("relayout",t,T).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}var c,h,v,p=Evt.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,f()});function _(){h=Date.now();for(var T=Math.min(1,(h-c)/i.duration),g=p(T),A=0;A<r.length;A++)s(r[A],g);h-c>i.duration?(u(),v=window.cancelAnimationFrame(_)):v=window.requestAnimationFrame(_)}return c=Date.now(),v=window.requestAnimationFrame(_),Promise.resolve()}});var vu=ne(gh=>{"use strict";var AL=Ai(),Che=wi(),TL=Wt(),kvt=Zs(),Cvt=aa(),Lhe=vc().getModuleCalcData,Am=zl(),K0=wf(),Lvt=kd(),Cs=TL.ensureSingle;function wL(e,t,r){return TL.ensureSingle(e,t,r,function(i){i.datum(r)})}gh.name="cartesian";gh.attr=["xaxis","yaxis"];gh.idRoot=["x","y"];gh.idRegex=K0.idRegex;gh.attrRegex=K0.attrRegex;gh.attributes=pB();gh.layoutAttributes=dc();gh.supplyLayoutDefaults=Mhe();gh.transitionAxes=khe();gh.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,n=r.yaxis,a=r.cartesian,o=a.concat(r.gl2d||[]),s={},l={},u,f,c;for(u=0;u<o.length;u++){var h=o[u].split("y");s[h[0]]=1,l["y"+h[1]]=1}for(u=0;u<i.length;u++)f=i[u],s[f]||(c=(e[Am.id2name(f)]||{}).anchor,K0.idRegex.y.test(c)||(c="y"),a.push(f+c),o.push(f+c),l[c]||(l[c]=1,TL.pushUnique(n,c)));for(u=0;u<n.length;u++)c=n[u],l[c]||(f=(e[Am.id2name(c)]||{}).anchor,K0.idRegex.x.test(f)||(f="x"),a.push(f+c),o.push(f+c),s[f]||(s[f]=1,TL.pushUnique(i,f)));if(!o.length){f="",c="";for(var v in e)if(K0.attrRegex.test(v)){var p=v.charAt(0);p==="x"?(!f||+v.substr(5)<+f.substr(5))&&(f=v):(!c||+v.substr(5)<+c.substr(5))&&(c=v)}f=f?Am.name2id(f):"x",c=c?Am.name2id(c):"y",i.push(f),n.push(c),a.push(f+c)}};gh.plot=function(e,t,r,i){var n=e._fullLayout,a=n._subplots.cartesian,o=e.calcdata,s;if(!Array.isArray(t))for(t=[],s=0;s<o.length;s++)t.push(s);for(s=0;s<a.length;s++){for(var l=a[s],u=n._plots[l],f=[],c,h=0;h<o.length;h++){var v=o[h],p=v[0].trace;p.xaxis+p.yaxis===l&&((t.indexOf(p.index)!==-1||p.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&f.indexOf(c)===-1&&f.push(c),f.push(v)),c=v)}Phe(e,u,f,r,i)}};function Phe(e,t,r,i,n){for(var a=K0.traceLayerClasses,o=e._fullLayout,s=o._modules,l,u,f,c=[],h=[],v=0;v<s.length;v++){l=s[v];var p=l.name,_=Che.modules[p].categories;if(_.svg){var T=l.layerName||p+"layer",g=l.plot;u=Lhe(r,g),f=u[0],r=u[1],f.length&&c.push({i:a.indexOf(T),className:T,plotMethod:g,cdModule:f}),_.zoomScale&&h.push("."+T)}}c.sort(function(w,k){return w.i-k.i});var A=t.plot.selectAll("g.mlayer").data(c,function(w){return w.className});if(A.enter().append("g").attr("class",function(w){return w.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),A.exit().remove(),A.order(),A.each(function(w){var k=AL.select(this),x=w.className;w.plotMethod(e,t,w.cdModule,k,i,n),K0.clipOnAxisFalseQuery.indexOf("."+x)===-1&&Cvt.setClipUrl(k,t.layerClipId,e)}),o._has("scattergl")&&(l=Che.getModule("scattergl"),f=Lhe(r,l)[0],l.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(K0.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var b=t.plot.selectAll(h.join(",")).selectAll(".trace");t.zoomScalePts=b.selectAll("path.point"),t.zoomScaleTxt=b.selectAll(".textpoint")}}gh.clean=function(e,t,r,i){var n=i._plots||{},a=t._plots||{},o=i._subplots||{},s,l,u;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(u in n)s=n[u],s.plotgroup&&s.plotgroup.remove();var f=i._has&&i._has("gl"),c=t._has&&t._has("gl");if(f&&!c)for(u in n)s=n[u],s._scene&&s._scene.destroy();if(o.xaxis&&o.yaxis){var h=Am.listIds({_fullLayout:i});for(l=0;l<h.length;l++){var v=h[l];t[Am.id2name(v)]||i._infolayer.selectAll(".g-"+v+"title").remove()}}var p=i._has&&i._has("cartesian"),_=t._has&&t._has("cartesian");if(p&&!_)Dhe(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(o.cartesian)for(l=0;l<o.cartesian.length;l++){var T=o.cartesian[l];if(!a[T]){var g="."+T+",."+T+"-x,."+T+"-y";i._cartesianlayer.selectAll(g).remove(),Ihe(T,i)}}};gh.drawFramework=function(e){var t=e._fullLayout,r=Pvt(e),i=t._cartesianlayer.selectAll(".subplot").data(r,String);i.enter().append("g").attr("class",function(n){return"subplot "+n[0]}),i.order(),i.exit().call(Dhe,t),i.each(function(n){var a=n[0],o=t._plots[a];o.plotgroup=AL.select(this),Rhe(e,o),o.draglayer=Cs(t._draggers,"g",a)})};gh.rangePlot=function(e,t,r){Rhe(e,t),Phe(e,t,r),kvt.style(e)};function Pvt(e){var t=e._fullLayout,r=t._subplots.cartesian,i=r.length,n,a,o,s,l,u,f=[],c=[];for(n=0;n<i;n++){o=r[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var h=l._mainAxis,v=u._mainAxis,p=h._id+v._id,_=t._plots[p];s.overlays=[],p!==o&&_?(s.mainplot=p,s.mainplotinfo=_,c.push(o)):(s.mainplot=void 0,s.mainplotinfo=void 0,f.push(o))}for(n=0;n<c.length;n++)o=c[n],s=t._plots[o],s.mainplotinfo.overlays.push(s);var T=f.concat(c),g=new Array(i);for(n=0;n<i;n++){o=T[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var A=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(a=0;a<s.overlays.length;a++)A.push(s.overlays[a].id);g[n]=A}return g}function Rhe(e,t){var r=t.plotgroup,i=t.id,n=K0.layerValue2layerClass[t.xaxis.layer],a=K0.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var l=t.mainplotinfo,u=l.plotgroup,f=i+"-x",c=i+"-y";t.minorGridlayer=l.minorGridlayer,t.gridlayer=l.gridlayer,t.zerolinelayer=l.zerolinelayer,Cs(l.overlinesBelow,"path",f),Cs(l.overlinesBelow,"path",c),Cs(l.overaxesBelow,"g",f),Cs(l.overaxesBelow,"g",c),t.plot=Cs(l.overplot,"g",i),Cs(l.overlinesAbove,"path",f),Cs(l.overlinesAbove,"path",c),Cs(l.overaxesAbove,"g",f),Cs(l.overaxesAbove,"g",c),t.xlines=u.select(".overlines-"+n).select("."+f),t.ylines=u.select(".overlines-"+a).select("."+c),t.xaxislayer=u.select(".overaxes-"+n).select("."+f),t.yaxislayer=u.select(".overaxes-"+a).select("."+c)}else if(o)t.xlines=Cs(r,"path","xlines-above"),t.ylines=Cs(r,"path","ylines-above"),t.xaxislayer=Cs(r,"g","xaxislayer-above"),t.yaxislayer=Cs(r,"g","yaxislayer-above");else{var s=Cs(r,"g","layer-subplot");t.shapelayer=Cs(s,"g","shapelayer"),t.imagelayer=Cs(s,"g","imagelayer"),t.minorGridlayer=Cs(r,"g","minor-gridlayer"),t.gridlayer=Cs(r,"g","gridlayer"),t.zerolinelayer=Cs(r,"g","zerolinelayer"),Cs(r,"path","xlines-below"),Cs(r,"path","ylines-below"),t.overlinesBelow=Cs(r,"g","overlines-below"),Cs(r,"g","xaxislayer-below"),Cs(r,"g","yaxislayer-below"),t.overaxesBelow=Cs(r,"g","overaxes-below"),t.plot=Cs(r,"g","plot"),t.overplot=Cs(r,"g","overplot"),t.xlines=Cs(r,"path","xlines-above"),t.ylines=Cs(r,"path","ylines-above"),t.overlinesAbove=Cs(r,"g","overlines-above"),Cs(r,"g","xaxislayer-above"),Cs(r,"g","yaxislayer-above"),t.overaxesAbove=Cs(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+n),t.ylines=r.select(".ylines-"+a),t.xaxislayer=r.select(".xaxislayer-"+n),t.yaxislayer=r.select(".yaxislayer-"+a)}o||(wL(t.minorGridlayer,"g",t.xaxis._id),wL(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(h){return h[0]}).sort(Am.idSort),wL(t.gridlayer,"g",t.xaxis._id),wL(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(h){return h[0]}).sort(Am.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function Dhe(e,t){if(e){var r={};e.each(function(l){var u=l[0],f=AL.select(this);f.remove(),Ihe(u,t),r[u]=!0});for(var i in t._plots)for(var n=t._plots[i],a=n.overlays||[],o=0;o<a.length;o++){var s=a[o];r[s.id]&&s.plot.selectAll(".trace").remove()}}}function Ihe(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}gh.toSVG=function(e){var t=e._fullLayout._glimages,r=AL.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:Lvt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n)};gh.updateFx=I7().updateFx});var qhe=ne((jnr,Fhe)=>{"use strict";var ML=js();Fhe.exports={hasLines:ML.hasLines,hasMarkers:ML.hasMarkers,hasText:ML.hasText,isBubble:ML.isBubble,attributes:cu(),layoutAttributes:uC(),supplyDefaults:oce(),crossTraceDefaults:J7(),supplyLayoutDefaults:fce(),calc:yp().calc,crossTraceCalc:zce(),arraysToCalcdata:Z0(),plot:W2(),colorbar:ph(),formatLabels:vL(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:K2(),selectPoints:J2(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:vu(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var Bhe=ne((Knr,Ohe)=>{"use strict";var Rvt=Ai(),Dvt=_i(),zhe=M7(),bB=Wt(),Ivt=bB.strScale,Fvt=bB.strRotate,qvt=bB.strTranslate;Ohe.exports=function(t,r,i){var n=t.node(),a=zhe[i.arrowhead||0],o=zhe[i.startarrowhead||0],s=(i.arrowwidth||1)*(i.arrowsize||1),l=(i.arrowwidth||1)*(i.startarrowsize||1),u=r.indexOf("start")>=0,f=r.indexOf("end")>=0,c=a.backoff*s+i.standoff,h=o.backoff*l+i.startstandoff,v,p,_,T;if(n.nodeName==="line"){v={x:+t.attr("x1"),y:+t.attr("y1")},p={x:+t.attr("x2"),y:+t.attr("y2")};var g=v.x-p.x,A=v.y-p.y;if(_=Math.atan2(A,g),T=_+Math.PI,c&&h&&c+h>Math.sqrt(g*g+A*A)){z();return}if(c){if(c*c>g*g+A*A){z();return}var b=c*Math.cos(_),w=c*Math.sin(_);p.x+=b,p.y+=w,t.attr({x2:p.x,y2:p.y})}if(h){if(h*h>g*g+A*A){z();return}var k=h*Math.cos(_),x=h*Math.sin(_);v.x-=k,v.y-=x,t.attr({x1:v.x,y1:v.y})}}else if(n.nodeName==="path"){var E=n.getTotalLength(),M="";if(E<c+h){z();return}var d=n.getPointAtLength(0),C=n.getPointAtLength(.1);_=Math.atan2(d.y-C.y,d.x-C.x),v=n.getPointAtLength(Math.min(h,E)),M="0px,"+h+"px,";var S=n.getPointAtLength(E),P=n.getPointAtLength(E-.1);T=Math.atan2(S.y-P.y,S.x-P.x),p=n.getPointAtLength(Math.max(0,E-c));var D=M?h+c:c;M+=E-D+"px,"+E+"px",t.style("stroke-dasharray",M)}function z(){t.style("stroke-dasharray","0px,100px")}function O(V,B,F,N){V.path&&(V.noRotate&&(F=0),Rvt.select(n.parentNode).append("path").attr({class:t.attr("class"),d:V.path,transform:qvt(B.x,B.y)+Fvt(F*180/Math.PI)+Ivt(N)}).style({fill:Dvt.rgb(i.arrowcolor),"stroke-width":0}))}u&&O(o,v,_,l),f&&O(a,p,T,s)}});var SL=ne((Jnr,Ghe)=>{"use strict";var Nhe=Ai(),wB=wi(),zvt=Zs(),Sm=Wt(),TB=Sm.strTranslate,IM=Xi(),qx=_i(),Xg=aa(),Uhe=Ol(),AB=Es(),MB=e0(),DM=Hh(),Ovt=So().arrayEditor,Bvt=Bhe();Ghe.exports={draw:Nvt,drawOne:Vhe,drawRaw:Hhe};function Nvt(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&Vhe(e,r);return zvt.previousPromises(e)}function Vhe(e,t){var r=e._fullLayout,i=r.annotations[t]||{},n=IM.getFromId(e,i.xref),a=IM.getFromId(e,i.yref);n&&n.setScale(),a&&a.setScale(),Hhe(e,i,t,!1,n,a)}function Mm(e,t,r,i,n){var a=n[r],o=n[r+"ref"],s=r.indexOf("y")!==-1,l=IM.getRefType(o)==="domain",u=s?i.h:i.w;return e?l?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/u}function Hhe(e,t,r,i,n,a){var o=e._fullLayout,s=e._fullLayout._size,l=e._context.edits,u,f;i?(u="annotation-"+i,f=i+".annotations"):(u="annotation",f="annotations");var c=Ovt(e.layout,f,t),h=c.modifyBase,v=c.modifyItem,p=c.getUpdateObj;o._infolayer.selectAll("."+u+'[data-index="'+r+'"]').remove();var _="clip"+o._uid+"_ann"+r;if(!t._input||t.visible===!1){Nhe.selectAll("#"+_).remove();return}var T={x:{},y:{}},g=+t.textangle||0,A=o._infolayer.append("g").classed(u,!0).attr("data-index",String(r)).style("opacity",t.opacity),b=A.append("g").classed("annotation-text-g",!0),w=l[t.showarrow?"annotationTail":"annotationPosition"],k=t.captureevents||l.annotationText||w;function x(N){var Z={index:r,annotation:t._input,fullAnnotation:t,event:N};return i&&(Z.subplotId=i),Z}var E=b.append("g").style("pointer-events",k?"all":null).call(MB,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",x(Nhe.event))});t.hovertext&&E.on("mouseover",function(){var N=t.hoverlabel,Z=N.font,J=this.getBoundingClientRect(),re=e.getBoundingClientRect();Uhe.loneHover({x0:J.left-re.left,x1:J.right-re.left,y:(J.top+J.bottom)/2-re.top,text:t.hovertext,color:N.bgcolor,borderColor:N.bordercolor,fontFamily:Z.family,fontSize:Z.size,fontColor:Z.color},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:e})}).on("mouseout",function(){Uhe.loneUnhover(o._hoverlayer.node())});var M=t.borderwidth,d=t.borderpad,C=M+d,S=E.append("rect").attr("class","bg").style("stroke-width",M+"px").call(qx.stroke,t.bordercolor).call(qx.fill,t.bgcolor),P=t.width||t.height,D=o._topclips.selectAll("#"+_).data(P?[0]:[]);D.enter().append("clipPath").classed("annclip",!0).attr("id",_).append("rect"),D.exit().remove();var z=t.font,O=o._meta?Sm.templateString(t.text,o._meta):t.text,V=E.append("text").classed("annotation-text",!0).text(O);function B(N){return N.call(Xg.font,z).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),AB.convertToTspans(N,e,F),N}function F(){var N=V.selectAll("a");if(N.size()===1&&N.text()===V.text()){var Z=E.insert("a",":first-child").attr({"xlink:xlink:href":N.attr("xlink:href"),"xlink:xlink:show":N.attr("xlink:show")}).style({cursor:"pointer"});Z.node().appendChild(S.node())}var J=E.select(".annotation-text-math-group"),re=!J.empty(),le=Xg.bBox((re?J:V).node()),fe=le.width,K=le.height,X=t.width||fe,ae=t.height||K,oe=Math.round(X+2*C),_e=Math.round(ae+2*C);function be(Je,xe){return xe==="auto"&&(Je<1/3?xe="left":Je>2/3?xe="right":xe="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[xe]}for(var he=!1,ie=["x","y"],ye=0;ye<ie.length;ye++){var ue=ie[ye],Ae=t[ue+"ref"]||ue,Re=t["a"+ue+"ref"],ze={x:n,y:a}[ue],et=(g+(ue==="x"?0:-90))*Math.PI/180,Le=oe*Math.cos(et),Ie=_e*Math.sin(et),dt=Math.abs(Le)+Math.abs(Ie),ct=t[ue+"anchor"],Ke=t[ue+"shift"]*(ue==="x"?1:-1),_t=T[ue],zt,Et,Se,je,ht,nt=IM.getRefType(Ae);if(ze&&nt!=="domain"){var lt=ze.r2fraction(t[ue]);(lt<0||lt>1)&&(Re===Ae?(lt=ze.r2fraction(t["a"+ue]),(lt<0||lt>1)&&(he=!0)):he=!0),zt=ze._offset+ze.r2p(t[ue]),je=.5}else{var rt=nt==="domain";ue==="x"?(Se=t[ue],zt=rt?ze._offset+ze._length*Se:zt=s.l+s.w*Se):(Se=1-t[ue],zt=rt?ze._offset+ze._length*Se:zt=s.t+s.h*Se),je=t.showarrow?.5:Se}if(t.showarrow){_t.head=zt;var Xe=t["a"+ue];if(ht=Le*be(.5,t.xanchor)-Ie*be(.5,t.yanchor),Re===Ae){var ft=IM.getRefType(Re);ft==="domain"?(ue==="y"&&(Xe=1-Xe),_t.tail=ze._offset+ze._length*Xe):ft==="paper"?ue==="y"?(Xe=1-Xe,_t.tail=s.t+s.h*Xe):_t.tail=s.l+s.w*Xe:_t.tail=ze._offset+ze.r2p(Xe),Et=ht}else _t.tail=zt+Xe,Et=ht+Xe;_t.text=_t.tail+ht;var gt=o[ue==="x"?"width":"height"];if(Ae==="paper"&&(_t.head=Sm.constrain(_t.head,1,gt-1)),Re==="pixel"){var Qt=-Math.max(_t.tail-3,_t.text),Jt=Math.min(_t.tail+3,_t.text)-gt;Qt>0?(_t.tail+=Qt,_t.text+=Qt):Jt>0&&(_t.tail-=Jt,_t.text-=Jt)}_t.tail+=Ke,_t.head+=Ke}else ht=dt*be(je,ct),Et=ht,_t.text=zt+ht;_t.text+=Ke,ht+=Ke,Et+=Ke,t["_"+ue+"padplus"]=dt/2+Et,t["_"+ue+"padminus"]=dt/2-Et,t["_"+ue+"size"]=dt,t["_"+ue+"shift"]=ht}if(he){E.remove();return}var fr=0,nr=0;if(t.align!=="left"&&(fr=(X-fe)*(t.align==="center"?.5:1)),t.valign!=="top"&&(nr=(ae-K)*(t.valign==="middle"?.5:1)),re)J.select("svg").attr({x:C+fr-1,y:C+nr}).call(Xg.setClipUrl,P?_:null,e);else{var ur=C+nr-le.top,qt=C+fr-le.left;V.call(AB.positionText,qt,ur).call(Xg.setClipUrl,P?_:null,e)}D.select("rect").call(Xg.setRect,C,C,X,ae),S.call(Xg.setRect,M/2,M/2,oe-M,_e-M),E.call(Xg.setTranslate,Math.round(T.x.text-oe/2),Math.round(T.y.text-_e/2)),b.attr({transform:"rotate("+g+","+T.x.text+","+T.y.text+")"});var xt=function(Je,xe){A.selectAll(".annotation-arrow-g").remove();var ce=T.x.head,ge=T.y.head,qe=T.x.tail+Je,yt=T.y.tail+xe,Vt=T.x.text+Je,Ut=T.y.text+xe,br=Sm.rotationXYMatrix(g,Vt,Ut),xr=Sm.apply2DTransform(br),Or=Sm.apply2DTransform2(br),Hr=+S.attr("width"),gr=+S.attr("height"),Ur=Vt-.5*Hr,_n=Ur+Hr,si=Ut-.5*gr,xn=si+gr,ci=[[Ur,si,Ur,xn],[Ur,xn,_n,xn],[_n,xn,_n,si],[_n,si,Ur,si]].map(Or);if(!ci.reduce(function(hr,Rr){return hr^!!Sm.segmentsIntersect(ce,ge,ce+1e6,ge+1e6,Rr[0],Rr[1],Rr[2],Rr[3])},!1)){ci.forEach(function(hr){var Rr=Sm.segmentsIntersect(qe,yt,ce,ge,hr[0],hr[1],hr[2],hr[3]);Rr&&(qe=Rr.x,yt=Rr.y)});var Wi=t.arrowwidth,oi=t.arrowcolor,Zi=t.arrowside,Ei=A.append("g").style({opacity:qx.opacity(oi)}).classed("annotation-arrow-g",!0),at=Ei.append("path").attr("d","M"+qe+","+yt+"L"+ce+","+ge).style("stroke-width",Wi+"px").call(qx.stroke,qx.rgb(oi));if(Bvt(at,Zi,t),l.annotationPosition&&at.node().parentNode&&!i){var Ne=ce,st=ge;if(t.standoff){var mt=Math.sqrt(Math.pow(ce-qe,2)+Math.pow(ge-yt,2));Ne+=t.standoff*(qe-ce)/mt,st+=t.standoff*(yt-ge)/mt}var Ot=Ei.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(qe-Ne)+","+(yt-st),transform:TB(Ne,st)}).style("stroke-width",Wi+6+"px").call(qx.stroke,"rgba(0,0,0,0)").call(qx.fill,"rgba(0,0,0,0)"),tr,pr;DM.init({element:Ot.node(),gd:e,prepFn:function(){var hr=Xg.getTranslate(E);tr=hr.x,pr=hr.y,n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0)},moveFn:function(hr,Rr){var Gr=xr(tr,pr),Yr=Gr[0]+hr,vn=Gr[1]+Rr;E.call(Xg.setTranslate,Yr,vn),v("x",Mm(n,hr,"x",s,t)),v("y",Mm(a,Rr,"y",s,t)),t.axref===t.xref&&v("ax",Mm(n,hr,"ax",s,t)),t.ayref===t.yref&&v("ay",Mm(a,Rr,"ay",s,t)),Ei.attr("transform",TB(hr,Rr)),b.attr({transform:"rotate("+g+","+Yr+","+vn+")"})},doneFn:function(){wB.call("_guiRelayout",e,p());var hr=document.querySelector(".js-notes-box-panel");hr&&hr.redraw(hr.selectedObj)}})}}};if(t.showarrow&&xt(0,0),w){var At;DM.init({element:E.node(),gd:e,prepFn:function(){At=b.attr("transform")},moveFn:function(Je,xe){var ce="pointer";if(t.showarrow)t.axref===t.xref?v("ax",Mm(n,Je,"ax",s,t)):v("ax",t.ax+Je),t.ayref===t.yref?v("ay",Mm(a,xe,"ay",s.w,t)):v("ay",t.ay+xe),xt(Je,xe);else{if(i)return;var ge,qe;if(n)ge=Mm(n,Je,"x",s,t);else{var yt=t._xsize/s.w,Vt=t.x+(t._xshift-t.xshift)/s.w-yt/2;ge=DM.align(Vt+Je/s.w,yt,0,1,t.xanchor)}if(a)qe=Mm(a,xe,"y",s,t);else{var Ut=t._ysize/s.h,br=t.y-(t._yshift+t.yshift)/s.h-Ut/2;qe=DM.align(br-xe/s.h,Ut,0,1,t.yanchor)}v("x",ge),v("y",qe),(!n||!a)&&(ce=DM.getCursor(n?.5:ge,a?.5:qe,t.xanchor,t.yanchor))}b.attr({transform:TB(Je,xe)+At}),MB(E,ce)},clickFn:function(Je,xe){t.captureevents&&e.emit("plotly_clickannotation",x(xe))},doneFn:function(){MB(E),wB.call("_guiRelayout",e,p());var Je=document.querySelector(".js-notes-box-panel");Je&&Je.redraw(Je.selectedObj)}})}}l.annotationText?V.call(AB.makeEditable,{delegate:E,gd:e}).call(B).on("edit",function(N){t.text=N,this.call(B),v("text",N),n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0),wB.call("_guiRelayout",e,p())}):V.call(B)}});var Khe=ne((Qnr,jhe)=>{"use strict";var Yhe=Wt(),Uvt=wi(),Whe=So().arrayEditor;jhe.exports={hasClickToShow:Vvt,onClick:Hvt};function Vvt(e,t){var r=Zhe(e,t);return r.on.length>0||r.explicitOff.length>0}function Hvt(e,t){var r=Zhe(e,t),i=r.on,n=r.off.concat(r.explicitOff),a={},o=e._fullLayout.annotations,s,l;if(i.length||n.length){for(s=0;s<i.length;s++)l=Whe(e.layout,"annotations",o[i[s]]),l.modifyItem("visible",!0),Yhe.extendFlat(a,l.getUpdateObj());for(s=0;s<n.length;s++)l=Whe(e.layout,"annotations",o[n[s]]),l.modifyItem("visible",!1),Yhe.extendFlat(a,l.getUpdateObj());return Uvt.call("update",e,{},a)}}function Zhe(e,t){var r=e._fullLayout.annotations,i=[],n=[],a=[],o=(t||[]).length,s,l,u,f,c,h,v,p;for(s=0;s<r.length;s++)if(u=r[s],f=u.clicktoshow,f){for(l=0;l<o;l++)if(c=t[l],h=c.xaxis,v=c.yaxis,h._id===u.xref&&v._id===u.yref&&h.d2r(c.x)===Xhe(u._xclick,h)&&v.d2r(c.y)===Xhe(u._yclick,v)){u.visible?f==="onout"?p=n:p=a:p=i,p.push(s);break}l===o&&u.visible&&f==="onout"&&n.push(s)}return{on:i,off:n,explicitOff:a}}function Xhe(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var SB=ne(($nr,Qhe)=>{"use strict";var Jhe=Wt(),Q2=_i();Qhe.exports=function(t,r,i,n){n("opacity");var a=n("bgcolor"),o=n("bordercolor"),s=Q2.opacity(o);n("borderpad");var l=n("borderwidth"),u=n("showarrow");n("text",u?" ":i._dfltTitle.annotation),n("textangle"),Jhe.coerceFont(n,"font",i.font),n("width"),n("align");var f=n("height");if(f&&n("valign"),u){var c=n("arrowside"),h,v;c.indexOf("end")!==-1&&(h=n("arrowhead"),v=n("arrowsize")),c.indexOf("start")!==-1&&(n("startarrowhead",h),n("startarrowsize",v)),n("arrowcolor",s?r.bordercolor:Q2.defaultLine),n("arrowwidth",(s&&l||1)*2),n("standoff"),n("startstandoff")}var p=n("hovertext"),_=i.hoverlabel||{};if(p){var T=n("hoverlabel.bgcolor",_.bgcolor||(Q2.opacity(a)?Q2.rgb(a):Q2.defaultLine)),g=n("hoverlabel.bordercolor",_.bordercolor||Q2.contrast(T));Jhe.coerceFont(n,"hoverlabel.font",{family:_.font.family,size:_.font.size,color:_.font.color||g})}n("captureevents",!!p)}});var eve=ne((eir,$he)=>{"use strict";var EB=Wt(),zx=Xi(),Gvt=ch(),Yvt=SB(),Wvt=Lx();$he.exports=function(t,r){Gvt(t,r,{name:"annotations",handleItemDefaults:Xvt})};function Xvt(e,t,r){function i(b,w){return EB.coerce(e,t,Wvt,b,w)}var n=i("visible"),a=i("clicktoshow");if(n||a){Yvt(e,t,r,i);for(var o=t.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:r},f=0;f<2;f++){var c=s[f],h=zx.coerceRef(e,t,u,c,"","paper");if(h!=="paper"){var v=zx.getFromId(u,h);v._annIndices.push(t._index)}if(zx.coercePosition(t,u,i,h,c,.5),o){var p="a"+c,_=zx.coerceRef(e,t,u,p,"pixel",["pixel","paper"]);_!=="pixel"&&_!==h&&(_=t[p]="pixel");var T=_==="pixel"?l[f]:.4;zx.coercePosition(t,u,i,_,p,T)}i(c+"anchor"),i(c+"shift")}if(EB.noneOrAll(e,t,["x","y"]),o&&EB.noneOrAll(e,t,["ax","ay"]),a){var g=i("xclick"),A=i("yclick");t._xclick=g===void 0?t.x:zx.cleanPosition(g,u,t.xref),t._yclick=A===void 0?t.y:zx.cleanPosition(A,u,t.yref)}}}});var nve=ne((tir,rve)=>{"use strict";var kB=Wt(),Ox=Xi(),Zvt=SL().draw;rve.exports=function(t){var r=t._fullLayout,i=kB.filterVisible(r.annotations);if(i.length&&t._fullData.length)return kB.syncOrAsync([Zvt,jvt],t)};function jvt(e){var t=e._fullLayout;kB.filterVisible(t.annotations).forEach(function(r){var i=Ox.getFromId(e,r.xref),n=Ox.getFromId(e,r.yref),a=Ox.getRefType(r.xref),o=Ox.getRefType(r.yref);r._extremes={},a==="range"&&tve(r,i),o==="range"&&tve(r,n)})}function tve(e,t){var r=t._id,i=r.charAt(0),n=e[i],a=e["a"+i],o=e[i+"ref"],s=e["a"+i+"ref"],l=e["_"+i+"padplus"],u=e["_"+i+"padminus"],f={x:1,y:-1}[i]*e[i+"shift"],c=3*e.arrowsize*e.arrowwidth||0,h=c+f,v=c-f,p=3*e.startarrowsize*e.arrowwidth||0,_=p+f,T=p-f,g;if(s===o){var A=Ox.findExtremes(t,[t.r2c(n)],{ppadplus:h,ppadminus:v}),b=Ox.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,_),ppadminus:Math.max(u,T)});g={min:[A.min[0],b.min[0]],max:[A.max[0],b.max[0]]}}else _=a?_+a:_,T=a?T-a:T,g=Ox.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,h,_),ppadminus:Math.max(u,v,T)});e._extremes[r]=g}});var ave=ne((rir,ive)=>{"use strict";var Kvt=la(),Jvt=Ck();ive.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(!(a||o))return;var s=t._fullLayout.annotations,l=r._id.charAt(0),u,f;function c(v){var p=u[v],_=null;a?_=Jvt(p,r.range):_=Math.pow(10,p),Kvt(_)||(_=null),n(f+v,_)}for(var h=0;h<s.length;h++)u=s[h],f="annotations["+h+"].",u[l+"ref"]===r._id&&c(l),u["a"+l+"ref"]===r._id&&c("a"+l)}});var lve=ne((nir,sve)=>{"use strict";var CB=SL(),ove=Khe();sve.exports={moduleType:"component",name:"annotations",layoutAttributes:Lx(),supplyLayoutDefaults:eve(),includeBasePlot:fM()("annotations"),calcAutorange:nve(),draw:CB.draw,drawOne:CB.drawOne,drawRaw:CB.drawRaw,hasClickToShow:ove.hasClickToShow,onClick:ove.onClick,convertCoords:ave()}});var EL=ne((iir,uve)=>{"use strict";var tl=Lx(),Qvt=Xs().overrideAll,$vt=So().templatedArray;uve.exports=Qvt($vt("annotation",{visible:tl.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:tl.xanchor,xshift:tl.xshift,yanchor:tl.yanchor,yshift:tl.yshift,text:tl.text,textangle:tl.textangle,font:tl.font,width:tl.width,height:tl.height,opacity:tl.opacity,align:tl.align,valign:tl.valign,bgcolor:tl.bgcolor,bordercolor:tl.bordercolor,borderpad:tl.borderpad,borderwidth:tl.borderwidth,showarrow:tl.showarrow,arrowcolor:tl.arrowcolor,arrowhead:tl.arrowhead,startarrowhead:tl.startarrowhead,arrowside:tl.arrowside,arrowsize:tl.arrowsize,startarrowsize:tl.startarrowsize,arrowwidth:tl.arrowwidth,standoff:tl.standoff,startstandoff:tl.startstandoff,hovertext:tl.hovertext,hoverlabel:tl.hoverlabel,captureevents:tl.captureevents}),"calc","from-root")});var cve=ne((air,fve)=>{"use strict";var LB=Wt(),edt=Xi(),tdt=ch(),rdt=SB(),ndt=EL();fve.exports=function(t,r,i){tdt(t,r,{name:"annotations",handleItemDefaults:idt,fullLayout:i.fullLayout})};function idt(e,t,r,i){function n(s,l){return LB.coerce(e,t,ndt,s,l)}function a(s){var l=s+"axis",u={_fullLayout:{}};return u._fullLayout[l]=r[l],edt.coercePosition(t,u,n,s,s,.5)}var o=n("visible");o&&(rdt(e,t,i.fullLayout,n),a("x"),a("y"),a("z"),LB.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),LB.noneOrAll(e,t,["ax","ay"])))}});var pve=ne((oir,dve)=>{"use strict";var hve=Wt(),vve=Xi();dve.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,n=0;n<i.length;n++)adt(i[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function adt(e,t){var r=t.fullSceneLayout,i=r.domain,n=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},hve.extendFlat(e._xa,a),vve.setConvert(e._xa),e._xa._offset=n.l+i.x[0]*n.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*n.w*(i.x[1]-i.x[0])},e._ya={},hve.extendFlat(e._ya,a),vve.setConvert(e._ya),e._ya._offset=n.t+(1-i.y[1])*n.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*n.h*(i.y[1]-i.y[0])}}});var RB=ne((sir,gve)=>{"use strict";function PB(e,t){var r=[0,0,0,0],i,n;for(i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}function odt(e,t){var r=PB(e.projection,PB(e.view,PB(e.model,[t[0],t[1],t[2],1])));return r}gve.exports=odt});var mve=ne((lir,yve)=>{"use strict";var sdt=SL().drawRaw,ldt=RB(),udt=["x","y","z"];yve.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,n=r.annotations,a=0;a<n.length;a++){for(var o=n[a],s=!1,l=0;l<3;l++){var u=udt[l],f=o[u],c=r[u+"axis"],h=c.r2fraction(f);if(h<0||h>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+a+'"]').remove():(o._pdata=ldt(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*i[0],r.yaxis.r2l(o.y)*i[1],r.zaxis.r2l(o.z)*i[2]]),sdt(t.graphDiv,o,a,t.id,o._xa,o._ya))}}});var bve=ne((uir,_ve)=>{"use strict";var fdt=wi(),xve=Wt();_ve.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:EL()}}},layoutAttributes:EL(),handleDefaults:cve(),includeBasePlot:cdt,convert:pve(),draw:mve()};function cdt(e,t){var r=fdt.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,n=Object.keys(e),a=0;a<n.length;a++){var o=n[a];i.test(o)&&(e[o].annotations||[]).length&&(xve.pushUnique(t._basePlotModules,r),xve.pushUnique(t._subplots.gl3d,o))}}});var DB=ne((cir,Mve)=>{"use strict";var wve=Lx(),Tve=ll(),Ave=cu().line,hdt=hc().dash,c0=oa().extendFlat,vdt=So().templatedArray,fir=uM(),$2=es(),ddt=Ba().shapeTexttemplateAttrs,pdt=Hk();Mve.exports=vdt("shape",{visible:c0({},$2.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:c0({},$2.legend,{editType:"calc+arraydraw"}),legendgroup:c0({},$2.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:c0({},$2.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:Tve({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:c0({},$2.legendrank,{editType:"calc+arraydraw"}),legendwidth:c0({},$2.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:c0({},wve.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:c0({},wve.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c0({},Ave.color,{editType:"arraydraw"}),width:c0({},Ave.width,{editType:"calc+arraydraw"}),dash:c0({},hdt,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:ddt({},{keys:Object.keys(pdt)}),font:Tve({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var kve=ne((hir,Eve)=>{"use strict";var FM=Wt(),ew=Xi(),gdt=ch(),ydt=DB(),Sve=ym();Eve.exports=function(t,r){gdt(t,r,{name:"shapes",handleItemDefaults:xdt})};function mdt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function xdt(e,t,r){function i(N,Z){return FM.coerce(e,t,ydt,N,Z)}t._isShape=!0;var n=i("visible");if(n){var a=i("showlegend");a&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),FM.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var o=i("path"),s=o?"path":"rect",l=i("type",s),u=l!=="path";u&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var f=i("line.width");f&&(i("line.color"),i("line.dash"));for(var c=i("xsizemode"),h=i("ysizemode"),v=["x","y"],p=0;p<2;p++){var _=v[p],T=_+"anchor",g=_==="x"?c:h,A={_fullLayout:r},b,w,k,x=ew.coerceRef(e,t,A,_,void 0,"paper"),E=ew.getRefType(x);if(E==="range"?(b=ew.getFromId(A,x),b._shapeIndices.push(t._index),k=Sve.rangeToShapePosition(b),w=Sve.shapePositionToRange(b)):w=k=FM.identity,u){var M=.25,d=.75,C=_+"0",S=_+"1",P=e[C],D=e[S];e[C]=w(e[C],!0),e[S]=w(e[S],!0),g==="pixel"?(i(C,0),i(S,10)):(ew.coercePosition(t,A,i,x,C,M),ew.coercePosition(t,A,i,x,S,d)),t[C]=k(t[C]),t[S]=k(t[S]),e[C]=P,e[S]=D}if(g==="pixel"){var z=e[T];e[T]=w(e[T],!0),ew.coercePosition(t,A,i,x,T,.25),t[T]=k(t[T]),e[T]=z}}u&&FM.noneOrAll(e,t,["x0","x1","y0","y1"]);var O=l==="line",V,B;if(u&&(V=i("label.texttemplate")),V||(B=i("label.text")),B||V){i("label.textangle");var F=i("label.textposition",O?"middle":"middle center");i("label.xanchor"),i("label.yanchor",mdt(O,F)),i("label.padding"),FM.coerceFont(i,"label.font",r.font)}}}});var Pve=ne((vir,Lve)=>{"use strict";var _dt=_i(),Cve=Wt();function bdt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}Lve.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),Cve.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var n=i("newshape.line.width");if(n){var a=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",_dt.contrast(a)),i("newshape.line.dash")}var o=t.dragmode==="drawline",s=i("newshape.label.text"),l=i("newshape.label.texttemplate");if(s||l){i("newshape.label.textangle");var u=i("newshape.label.textposition",o?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",bdt(o,u)),i("newshape.label.padding"),Cve.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var qve=ne((dir,Fve)=>{"use strict";var IB=Wt(),tw=Xi(),rw=HA(),Dve=ym();Fve.exports=function(t){var r=t._fullLayout,i=IB.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var n=0;n<i.length;n++){var a=i[n];a._extremes={};var o,s,l=tw.getRefType(a.xref),u=tw.getRefType(a.yref);if(a.xref!=="paper"&&l!=="domain"){var f=a.xsizemode==="pixel"?a.xanchor:a.x0,c=a.xsizemode==="pixel"?a.xanchor:a.x1;o=tw.getFromId(t,a.xref),s=Rve(o,f,c,a.path,rw.paramIsX),s&&(a._extremes[o._id]=tw.findExtremes(o,s,wdt(a)))}if(a.yref!=="paper"&&u!=="domain"){var h=a.ysizemode==="pixel"?a.yanchor:a.y0,v=a.ysizemode==="pixel"?a.yanchor:a.y1;o=tw.getFromId(t,a.yref),s=Rve(o,h,v,a.path,rw.paramIsY),s&&(a._extremes[o._id]=tw.findExtremes(o,s,Tdt(a)))}}};function wdt(e){return Ive(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function Tdt(e){return Ive(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function Ive(e,t,r,i,n,a){var o=e/2,s=a;if(t==="pixel"){var l=n?Dve.extractPathCoords(n,a?rw.paramIsY:rw.paramIsX):[r,i],u=IB.aggNums(Math.max,null,l),f=IB.aggNums(Math.min,null,l),c=f<0?Math.abs(f)+o:o,h=u>0?u+o:o;return{ppad:o,ppadplus:s?c:h,ppadminus:s?h:c}}else return{ppad:o}}function Rve(e,t,r,i,n){var a=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==void 0)return[a(t),a(r)];if(i){var o=1/0,s=-1/0,l=i.match(rw.segmentRE),u,f,c,h,v;for(e.type==="date"&&(a=Dve.decodeDate(a)),u=0;u<l.length;u++)f=l[u],c=n[f.charAt(0)].drawn,c!==void 0&&(h=l[u].substr(1).match(rw.paramRE),!(!h||h.length<c)&&(v=a(h[c]),v<o&&(o=v),v>s&&(s=v)));if(s>=o)return[o,s]}}});var Bve=ne((pir,Ove)=>{"use strict";var zve=_4();Ove.exports={moduleType:"component",name:"shapes",layoutAttributes:DB(),supplyLayoutDefaults:kve(),supplyDrawNewShapeDefaults:Pve(),includeBasePlot:fM()("shapes"),calcAutorange:qve(),draw:zve.draw,drawOne:zve.drawOne}});var FB=ne((yir,Uve)=>{"use strict";var Nve=wf(),Adt=So().templatedArray,gir=uM();Uve.exports=Adt("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",Nve.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",Nve.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var Hve=ne((mir,Vve)=>{"use strict";var Mdt=Wt(),qB=Xi(),Sdt=ch(),Edt=FB(),kdt="images";Vve.exports=function(t,r){var i={name:kdt,handleItemDefaults:Cdt};Sdt(t,r,i)};function Cdt(e,t,r){function i(h,v){return Mdt.coerce(e,t,Edt,h,v)}var n=i("source"),a=i("visible",!!n);if(!a)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var o={_fullLayout:r},s=["x","y"],l=0;l<2;l++){var u=s[l],f=qB.coerceRef(e,t,o,u,"paper",void 0);if(f!=="paper"){var c=qB.getFromId(o,f);c._imgIndices.push(t._index)}qB.coercePosition(t,o,i,f,u,0)}return t}});var Xve=ne((xir,Wve)=>{"use strict";var Gve=Ai(),Ldt=aa(),nw=Xi(),Yve=zl(),Pdt=kd();Wve.exports=function(t){var r=t._fullLayout,i=[],n={},a=[],o,s;for(s=0;s<r.images.length;s++){var l=r.images[s];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=Yve.ref2id(l.xref)+Yve.ref2id(l.yref);var u=r._plots[o];if(!u){a.push(l);continue}u.mainplot&&(o=u.mainplot.id),n[o]||(n[o]=[]),n[o].push(l)}else l.layer==="above"?i.push(l):a.push(l)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function c(A){var b=Gve.select(this);if(this._imgSrc!==A.source)if(b.attr("xmlns",Pdt.svg),A.source&&A.source.slice(0,5)==="data:")b.attr("xlink:href",A.source),this._imgSrc=A.source;else{var w=new Promise(function(k){var x=new Image;this.img=x,x.setAttribute("crossOrigin","anonymous"),x.onerror=E,x.onload=function(){var M=document.createElement("canvas");M.width=this.width,M.height=this.height;var d=M.getContext("2d",{willReadFrequently:!0});d.drawImage(this,0,0);var C=M.toDataURL("image/png");b.attr("xlink:href",C),k()},b.on("error",E),x.src=A.source,this._imgSrc=A.source;function E(){b.remove(),k()}}.bind(this));t._promises.push(w)}}function h(A){var b=Gve.select(this),w=nw.getFromId(t,A.xref),k=nw.getFromId(t,A.yref),x=nw.getRefType(A.xref)==="domain",E=nw.getRefType(A.yref)==="domain",M=r._size,d,C;w!==void 0?d=typeof A.xref=="string"&&x?w._length*A.sizex:Math.abs(w.l2p(A.sizex)-w.l2p(0)):d=A.sizex*M.w,k!==void 0?C=typeof A.yref=="string"&&E?k._length*A.sizey:Math.abs(k.l2p(A.sizey)-k.l2p(0)):C=A.sizey*M.h;var S=d*f.x[A.xanchor].offset,P=C*f.y[A.yanchor].offset,D=f.x[A.xanchor].sizing+f.y[A.yanchor].sizing,z,O;switch(w!==void 0?z=typeof A.xref=="string"&&x?w._length*A.x+w._offset:w.r2p(A.x)+w._offset:z=A.x*M.w+M.l,z+=S,k!==void 0?O=typeof A.yref=="string"&&E?k._length*(1-A.y)+k._offset:k.r2p(A.y)+k._offset:O=M.h-A.y*M.h+M.t,O+=P,A.sizing){case"fill":D+=" slice";break;case"stretch":D="none";break}b.attr({x:z,y:O,width:d,height:C,preserveAspectRatio:D,opacity:A.opacity});var V=w&&nw.getRefType(A.xref)!=="domain"?w._id:"",B=k&&nw.getRefType(A.yref)!=="domain"?k._id:"",F=V+B;Ldt.setClipUrl(b,F?"clip"+r._uid+F:null,t)}var v=r._imageLowerLayer.selectAll("image").data(a),p=r._imageUpperLayer.selectAll("image").data(i);v.enter().append("image"),p.enter().append("image"),v.exit().remove(),p.exit().remove(),v.each(function(A){c.bind(this)(A),h.bind(this)(A)}),p.each(function(A){c.bind(this)(A),h.bind(this)(A)});var _=Object.keys(r._plots);for(s=0;s<_.length;s++){o=_[s];var T=r._plots[o];if(T.imagelayer){var g=T.imagelayer.selectAll("image").data(n[o]||[]);g.enter().append("image"),g.exit().remove(),g.each(function(A){c.bind(this)(A),h.bind(this)(A)})}}}});var Kve=ne((_ir,jve)=>{"use strict";var Zve=la(),Rdt=Ck();jve.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(a||o){for(var s=t._fullLayout.images,l=r._id.charAt(0),u,f,c=0;c<s.length;c++)if(u=s[c],f="images["+c+"].",u[l+"ref"]===r._id){var h=u[l],v=u["size"+l],p=null,_=null;if(a){p=Rdt(h,r.range);var T=v/Math.pow(10,p)/2;_=2*Math.log(T+Math.sqrt(1+T*T))/Math.LN10}else p=Math.pow(10,h),_=p*(Math.pow(10,v/2)-Math.pow(10,-v/2));Zve(p)?Zve(_)||(_=null):(p=null,_=null),n(f+l,p),n(f+"size"+l,_)}}}});var Qve=ne((bir,Jve)=>{"use strict";Jve.exports={moduleType:"component",name:"images",layoutAttributes:FB(),supplyLayoutDefaults:Hve(),includeBasePlot:fM()("images"),draw:Xve(),convertCoords:Kve()}});var kL=ne((wir,$ve)=>{"use strict";$ve.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var zB=ne((Tir,tde)=>{"use strict";var Ddt=ll(),Idt=Ku(),Fdt=oa().extendFlat,qdt=Xs().overrideAll,zdt=Gk(),ede=So().templatedArray,Odt=ede("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});tde.exports=qdt(ede("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Odt,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Fdt(zdt({editType:"arraydraw"}),{}),font:Ddt({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:Idt.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var ade=ne((Air,ide)=>{"use strict";var CL=Wt(),rde=ch(),nde=zB(),Bdt=kL(),Ndt=Bdt.name,Udt=nde.buttons;ide.exports=function(t,r){var i={name:Ndt,handleItemDefaults:Vdt};rde(t,r,i)};function Vdt(e,t,r){function i(o,s){return CL.coerce(e,t,nde,o,s)}var n=rde(e,t,{name:"buttons",handleItemDefaults:Hdt}),a=i("visible",n.length>0);a&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),CL.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),CL.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function Hdt(e,t){function r(n,a){return CL.coerce(e,t,Udt,n,a)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var lde=ne((Mir,sde)=>{"use strict";sde.exports=Bl;var h0=Ai(),ode=_i(),iw=aa(),LL=Wt();function Bl(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}Bl.barWidth=2;Bl.barLength=20;Bl.barRadius=2;Bl.barPad=1;Bl.barColor="#808BA4";Bl.prototype.enable=function(t,r,i){var n=this.gd._fullLayout,a=n.width,o=n.height;this.position=t;var s=this.position.l,l=this.position.w,u=this.position.t,f=this.position.h,c=this.position.direction,h=c==="down",v=c==="left",p=c==="right",_=c==="up",T=l,g=f,A,b,w,k;!h&&!v&&!p&&!_&&(this.position.direction="down",h=!0);var x=h||_;x?(A=s,b=A+T,h?(w=u,k=Math.min(w+g,o),g=k-w):(k=u+g,w=Math.max(k-g,0),g=k-w)):(w=u,k=w+g,v?(b=s+T,A=Math.max(b-T,0),T=b-A):(A=s,b=Math.min(A+T,a),T=b-A)),this._box={l:A,t:w,w:T,h:g};var E=l>T,M=Bl.barLength+2*Bl.barPad,d=Bl.barWidth+2*Bl.barPad,C=s,S=u+f;S+d>o&&(S=o-d);var P=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(ode.fill,Bl.barColor),E?(this.hbar=P.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:C,y:S,width:M,height:d}),this._hbarXMin=C+M/2,this._hbarTranslateMax=T-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=f>g,z=Bl.barWidth+2*Bl.barPad,O=Bl.barLength+2*Bl.barPad,V=s+l,B=u;V+z>a&&(V=a-z);var F=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-vertical",!0).call(ode.fill,Bl.barColor),D?(this.vbar=F.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:V,y:B,width:z,height:O}),this._vbarYMin=B+O/2,this._vbarTranslateMax=g-O):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,Z=A-.5,J=D?b+z+.5:b+.5,re=w-.5,le=E?k+d+.5:k+.5,fe=n._topdefs.selectAll("#"+N).data(E||D?[0]:[]);if(fe.exit().remove(),fe.enter().append("clipPath").attr("id",N).append("rect"),E||D?(this._clipRect=fe.select("rect").attr({x:Math.floor(Z),y:Math.floor(re),width:Math.ceil(J)-Math.floor(Z),height:Math.ceil(le)-Math.floor(re)}),this.container.call(iw.setClipUrl,N,this.gd),this.bg.attr({x:s,y:u,width:l,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(iw.setClipUrl,null),delete this._clipRect),E||D){var K=h0.behavior.drag().on("dragstart",function(){h0.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(K);var X=h0.behavior.drag().on("dragstart",function(){h0.event.sourceEvent.preventDefault(),h0.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));E&&this.hbar.on(".drag",null).call(X),D&&this.vbar.on(".drag",null).call(X)}this.setTranslate(r,i)};Bl.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(iw.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};Bl.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=h0.event.dx),this.vbar&&(r-=h0.event.dy),this.setTranslate(t,r)};Bl.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=h0.event.deltaY),this.vbar&&(r+=h0.event.deltaY),this.setTranslate(t,r)};Bl.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,n=i+this._hbarTranslateMax,a=LL.constrain(h0.event.x,i,n),o=(a-i)/(n-i),s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin,u=l+this._vbarTranslateMax,f=LL.constrain(h0.event.y,l,u),c=(f-l)/(u-l),h=this.position.h-this._box.h;r=c*h}this.setTranslate(t,r)};Bl.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=LL.constrain(t||0,0,i),r=LL.constrain(r||0,0,n),this.translateX=t,this.translateY=r,this.container.call(iw.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var a=t/i;this.hbar.call(iw.setTranslate,t+a*this._hbarTranslateMax,r)}if(this.vbar){var o=r/n;this.vbar.call(iw.setTranslate,t,r+o*this._vbarTranslateMax)}}});var mde=ne((Sir,yde)=>{"use strict";var aw=Ai(),qM=Zs(),zM=_i(),ow=aa(),Dd=Wt(),PL=Es(),Gdt=So().arrayEditor,fde=Tf().LINE_SPACING,ka=kL(),Ydt=lde();yde.exports=function(t){var r=t._fullLayout,i=Dd.filterVisible(r[ka.name]);function n(h){qM.autoMargin(t,pde(h))}var a=r._menulayer.selectAll("g."+ka.containerClassName).data(i.length>0?[0]:[]);if(a.enter().append("g").classed(ka.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){aw.select(this).selectAll("g."+ka.headerGroupClassName).each(n)}).remove(),i.length!==0){var o=a.selectAll("g."+ka.headerGroupClassName).data(i,Wdt);o.enter().append("g").classed(ka.headerGroupClassName,!0);for(var s=Dd.ensureSingle(a,"g",ka.dropdownButtonGroupClassName,function(h){h.style("pointer-events","all")}),l=0;l<i.length;l++){var u=i[l];Qdt(t,u)}var f="updatemenus"+r._uid,c=new Ydt(t,s,f);o.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call(BB)),o.exit().each(function(h){s.call(BB),n(h)}).remove(),o.each(function(h){var v=aw.select(this),p=h.type==="dropdown"?s:null;qM.manageCommandObserver(t,h,h.buttons,function(_){OB(t,h,h.buttons[_.index],v,p,c,_.index,!0)}),h.type==="dropdown"?(hde(t,v,s,c,h),cde(s,h)&&OM(t,v,s,c,h)):OM(t,v,null,null,h)})}};function Wdt(e){return e._index}function Xdt(e){return+e.attr(ka.menuIndexAttrName)==-1}function cde(e,t){return+e.attr(ka.menuIndexAttrName)===t._index}function OB(e,t,r,i,n,a,o,s){t.active=o,Gdt(e.layout,ka.name,t).applyUpdate("active",o),t.type==="buttons"?OM(e,i,null,null,t):t.type==="dropdown"&&(n.attr(ka.menuIndexAttrName,"-1"),hde(e,i,n,a,t),s||OM(e,i,n,a,t))}function hde(e,t,r,i,n){var a=Dd.ensureSingle(t,"g",ka.headerClassName,function(h){h.style("pointer-events","all")}),o=n._dims,s=n.active,l=n.buttons[s]||ka.blankHeaderOpts,u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0},f={width:o.headerWidth,height:o.headerHeight};a.call(NB,n,l,e).call(gde,n,u,f);var c=Dd.ensureSingle(t,"text",ka.headerArrowClassName,function(h){h.attr("text-anchor","end").call(ow.font,n.font).text(ka.arrowSymbol[n.direction])});c.attr({x:o.headerWidth-ka.arrowOffsetX+n.pad.l,y:o.headerHeight/2+ka.textOffsetY+n.pad.t}),a.on("click",function(){r.call(BB,String(cde(r,n)?-1:n._index)),OM(e,t,r,i,n)}),a.on("mouseover",function(){a.call(vde)}),a.on("mouseout",function(){a.call(dde,n)}),ow.setTranslate(t,o.lx,o.ly)}function OM(e,t,r,i,n){r||(r=t,r.attr("pointer-events","all"));var a=!Xdt(r)||n.type==="buttons"?n.buttons:[],o=n.type==="dropdown"?ka.dropdownButtonClassName:ka.buttonClassName,s=r.selectAll("g."+o).data(Dd.filterVisible(a)),l=s.enter().append("g").classed(o,!0),u=s.exit();n.type==="dropdown"?(l.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();var f=0,c=0,h=n._dims,v=["up","down"].indexOf(n.direction)!==-1;n.type==="dropdown"&&(v?c=h.headerHeight+ka.gapButtonHeader:f=h.headerWidth+ka.gapButtonHeader),n.type==="dropdown"&&n.direction==="up"&&(c=-ka.gapButtonHeader+ka.gapButton-h.openHeight),n.type==="dropdown"&&n.direction==="left"&&(f=-ka.gapButtonHeader+ka.gapButton-h.openWidth);var p={x:h.lx+f+n.pad.l,y:h.ly+c+n.pad.t,yPad:ka.gapButton,xPad:ka.gapButton,index:0},_={l:p.x+n.borderwidth,t:p.y+n.borderwidth};s.each(function(T,g){var A=aw.select(this);A.call(NB,n,T,e).call(gde,n,p),A.on("click",function(){aw.event.defaultPrevented||(T.execute&&(T.args2&&n.active===g?(OB(e,n,T,t,r,i,-1),qM.executeAPICommand(e,T.method,T.args2)):(OB(e,n,T,t,r,i,g),qM.executeAPICommand(e,T.method,T.args))),e.emit("plotly_buttonclicked",{menu:n,button:T,active:n.active}))}),A.on("mouseover",function(){A.call(vde)}),A.on("mouseout",function(){A.call(dde,n),s.call(ude,n)})}),s.call(ude,n),v?(_.w=Math.max(h.openWidth,h.headerWidth),_.h=p.y-_.t):(_.w=p.x-_.l,_.h=Math.max(h.openHeight,h.headerHeight)),_.direction=n.direction,i&&(s.size()?Zdt(e,t,r,i,n,_):jdt(i))}function Zdt(e,t,r,i,n,a){var o=n.direction,s=o==="up"||o==="down",l=n._dims,u=n.active,f,c,h;if(s)for(c=0,h=0;h<u;h++)c+=l.heights[h]+ka.gapButton;else for(f=0,h=0;h<u;h++)f+=l.widths[h]+ka.gapButton;i.enable(a,f,c),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function jdt(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function NB(e,t,r,i){e.call(Kdt,t).call(Jdt,t,r,i)}function Kdt(e,t){var r=Dd.ensureSingle(e,"rect",ka.itemRectClassName,function(i){i.attr({rx:ka.rx,ry:ka.ry,"shape-rendering":"crispEdges"})});r.call(zM.stroke,t.bordercolor).call(zM.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function Jdt(e,t,r,i){var n=Dd.ensureSingle(e,"text",ka.itemTextClassName,function(s){s.attr({"text-anchor":"start","data-notex":1})}),a=r.label,o=i._fullLayout._meta;o&&(a=Dd.templateString(a,o)),n.call(ow.font,t.font).text(a).call(PL.convertToTspans,i)}function ude(e,t){var r=t.active;e.each(function(i,n){var a=aw.select(this);n===r&&t.showactive&&a.select("rect."+ka.itemRectClassName).call(zM.fill,ka.activeColor)})}function vde(e){e.select("rect."+ka.itemRectClassName).call(zM.fill,ka.hoverColor)}function dde(e,t){e.select("rect."+ka.itemRectClassName).call(zM.fill,t.bgcolor)}function Qdt(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=ow.tester.selectAll("g."+ka.dropdownButtonClassName).data(Dd.filterVisible(t.buttons));i.enter().append("g").classed(ka.dropdownButtonClassName,!0);var n=["up","down"].indexOf(t.direction)!==-1;i.each(function(f,c){var h=aw.select(this);h.call(NB,t,f,e);var v=h.select("."+ka.itemTextClassName),p=v.node()&&ow.bBox(v.node()).width,_=Math.max(p+ka.textPadX,ka.minWidth),T=t.font.size*fde,g=PL.lineCount(v),A=Math.max(T*g,ka.minHeight)+ka.textOffsetY;A=Math.ceil(A),_=Math.ceil(_),r.widths[c]=_,r.heights[c]=A,r.height1=Math.max(r.height1,A),r.width1=Math.max(r.width1,_),n?(r.totalWidth=Math.max(r.totalWidth,_),r.openWidth=r.totalWidth,r.totalHeight+=A+ka.gapButton,r.openHeight+=A+ka.gapButton):(r.totalWidth+=_+ka.gapButton,r.openWidth+=_+ka.gapButton,r.totalHeight=Math.max(r.totalHeight,A),r.openHeight=r.totalHeight)}),n?r.totalHeight-=ka.gapButton:r.totalWidth-=ka.gapButton,r.headerWidth=r.width1+ka.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(n?(r.width1+=ka.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=ka.arrowPadX),i.remove();var a=r.totalWidth+t.pad.l+t.pad.r,o=r.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;r.lx=s.l+s.w*t.x,r.ly=s.t+s.h*(1-t.y);var l="left";Dd.isRightAnchor(t)&&(r.lx-=a,l="right"),Dd.isCenterAnchor(t)&&(r.lx-=a/2,l="center");var u="top";Dd.isBottomAnchor(t)&&(r.ly-=o,u="bottom"),Dd.isMiddleAnchor(t)&&(r.ly-=o/2,u="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),qM.autoMargin(e,pde(t),{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[u]||0),t:o*({bottom:1,middle:.5}[u]||0)})}function pde(e){return ka.autoMarginIdRoot+e._index}function gde(e,t,r,i){i=i||{};var n=e.select("."+ka.itemRectClassName),a=e.select("."+ka.itemTextClassName),o=t.borderwidth,s=r.index,l=t._dims;ow.setTranslate(e,o+r.x,o+r.y);var u=["up","down"].indexOf(t.direction)!==-1,f=i.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:i.width||(u?l.width1:l.widths[s]),height:f});var c=t.font.size*fde,h=PL.lineCount(a),v=(h-1)*c/2;PL.positionText(a,ka.textOffsetX,f/2-v+ka.textOffsetY),u?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function BB(e,t){e.attr(ka.menuIndexAttrName,t||"-1").selectAll("g."+ka.dropdownButtonClassName).remove()}});var _de=ne((Eir,xde)=>{"use strict";var $dt=kL();xde.exports={moduleType:"component",name:$dt.name,layoutAttributes:zB(),supplyLayoutDefaults:ade(),draw:mde()}});var BM=ne((kir,bde)=>{"use strict";bde.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var UB=ne((Cir,Ade)=>{"use strict";var wde=ll(),ept=Gk(),tpt=oa().extendDeepAll,rpt=Xs().overrideAll,npt=hA(),Tde=So().templatedArray,Bx=BM(),ipt=Tde("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Ade.exports=rpt(Tde("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:ipt,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:tpt(ept({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:npt.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:wde({})},font:wde({}),activebgcolor:{valType:"color",dflt:Bx.gripBgActiveColor},bgcolor:{valType:"color",dflt:Bx.railBgColor},bordercolor:{valType:"color",dflt:Bx.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Bx.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Bx.tickLength},tickcolor:{valType:"color",dflt:Bx.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Bx.minorTickLength}}),"arraydraw","from-root")});var kde=ne((Lir,Ede)=>{"use strict";var sw=Wt(),Mde=ch(),Sde=UB(),apt=BM(),opt=apt.name,spt=Sde.steps;Ede.exports=function(t,r){Mde(t,r,{name:opt,handleItemDefaults:lpt})};function lpt(e,t,r){function i(c,h){return sw.coerce(e,t,Sde,c,h)}for(var n=Mde(e,t,{name:"steps",handleItemDefaults:upt}),a=0,o=0;o<n.length;o++)n[o].visible&&a++;var s;if(a<2?s=t.visible=!1:s=i("visible"),!!s){t._stepCount=a;var l=t._visibleSteps=sw.filterVisible(n),u=i("active");(n[u]||{}).visible||(t.active=l[0]._index),i("x"),i("y"),sw.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),sw.coerceFont(i,"font",r.font);var f=i("currentvalue.visible");f&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),sw.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function upt(e,t){function r(a,o){return sw.coerce(e,t,spt,a,o)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var n=r("label","step-"+t._index);r("value",n),r("execute")}}});var Ode=ne((Pir,zde)=>{"use strict";var v0=Ai(),RL=Zs(),Em=_i(),d0=aa(),Id=Wt(),fpt=Id.strTranslate,NM=Es(),cpt=So().arrayEditor,ao=BM(),GB=Tf(),Pde=GB.LINE_SPACING,VB=GB.FROM_TL,HB=GB.FROM_BR;zde.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,n=hpt(i,t),a=i._infolayer.selectAll("g."+ao.containerClassName).data(n.length>0?[0]:[]);a.enter().append("g").classed(ao.containerClassName,!0).style("cursor",r?null:"ew-resize");function o(f){f._commandObserver&&(f._commandObserver.remove(),delete f._commandObserver),RL.autoMargin(t,Rde(f))}if(a.exit().each(function(){v0.select(this).selectAll("g."+ao.groupClassName).each(o)}).remove(),n.length!==0){var s=a.selectAll("g."+ao.groupClassName).data(n,vpt);s.enter().append("g").classed(ao.groupClassName,!0),s.exit().each(o).remove();for(var l=0;l<n.length;l++){var u=n[l];dpt(t,u)}s.each(function(f){var c=v0.select(this);xpt(f),RL.manageCommandObserver(t,f,f._visibleSteps,function(h){var v=c.data()[0];v.active!==h.index&&(v._dragging||Ide(t,c,v,h.index,!1,!0))}),ppt(t,v0.select(this),f)})}};function Rde(e){return ao.autoMarginIdRoot+e._index}function hpt(e,t){for(var r=e[ao.name],i=[],n=0;n<r.length;n++){var a=r[n];a.visible&&(a._gd=t,i.push(a))}return i}function vpt(e){return e._index}function dpt(e,t){var r=d0.tester.selectAll("g."+ao.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(ao.labelGroupClass,!0);var i=0,n=0;r.each(function(p){var _=v0.select(this),T=Dde(_,{step:p},t),g=T.node();if(g){var A=d0.bBox(g);n=Math.max(n,A.height),i=Math.max(i,A.width)}}),r.remove();var a=t._dims={};a.inputAreaWidth=Math.max(ao.railWidth,ao.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),t.lenmode==="fraction"?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=a.inputAreaLength-2*ao.stepInset,l=s/(t._stepCount-1),u=i+ao.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(u/l)),a.labelHeight=n,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var f=d0.tester.append("g");r.each(function(p){var _=DL(f,t,p.label),T=_.node()&&d0.bBox(_.node())||{width:0,height:0},g=NM.lineCount(_);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(T.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(T.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,g)}),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,f.remove()}a.height=a.currentValueTotalHeight+ao.tickOffset+t.ticklen+ao.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var c="left";Id.isRightAnchor(t)&&(a.lx-=a.outerLength,c="right"),Id.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,c="center");var h="top";Id.isBottomAnchor(t)&&(a.ly-=a.height,h="bottom"),Id.isMiddleAnchor(t)&&(a.ly-=a.height/2,h="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var v={y:t.y,b:a.height*HB[h],t:a.height*VB[h]};t.lenmode==="fraction"?(v.l=0,v.xl=t.x-t.len*VB[c],v.r=0,v.xr=t.x+t.len*HB[c]):(v.x=t.x,v.l=a.outerLength*VB[c],v.r=a.outerLength*HB[c]),RL.autoMargin(e,Rde(t),v)}function ppt(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(DL,r).call(bpt,r).call(ypt,r).call(mpt,r).call(_pt,e,r).call(gpt,e,r);var i=r._dims;d0.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(qde,r,!1),t.call(DL,r)}function DL(e,t,r){if(t.currentvalue.visible){var i=t._dims,n,a;switch(t.currentvalue.xanchor){case"right":n=i.inputAreaLength-ao.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":n=i.inputAreaLength*.5,a="middle";break;default:n=ao.currentValueInset,a="left"}var o=Id.ensureSingle(e,"text",ao.labelClass,function(h){h.attr({"text-anchor":a,"data-notex":1})}),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")s+=r;else{var l=t.steps[t.active].label,u=t._gd._fullLayout._meta;u&&(l=Id.templateString(l,u)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d0.font,t.currentvalue.font).text(s).call(NM.convertToTspans,t._gd);var f=NM.lineCount(o),c=(i.currentValueMaxLines+1-f)*t.currentvalue.font.size*Pde;return NM.positionText(o,n,c),o}}function gpt(e,t,r){var i=Id.ensureSingle(e,"rect",ao.gripRectClass,function(n){n.call(Fde,t,e,r).style("pointer-events","all")});i.attr({width:ao.gripWidth,height:ao.gripHeight,rx:ao.gripRadius,ry:ao.gripRadius}).call(Em.stroke,r.bordercolor).call(Em.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function Dde(e,t,r){var i=Id.ensureSingle(e,"text",ao.labelClass,function(o){o.attr({"text-anchor":"middle","data-notex":1})}),n=t.step.label,a=r._gd._fullLayout._meta;return a&&(n=Id.templateString(n,a)),i.call(d0.font,r.font).text(n).call(NM.convertToTspans,r._gd),i}function ypt(e,t){var r=Id.ensureSingle(e,"g",ao.labelsClass),i=t._dims,n=r.selectAll("g."+ao.labelGroupClass).data(i.labelSteps);n.enter().append("g").classed(ao.labelGroupClass,!0),n.exit().remove(),n.each(function(a){var o=v0.select(this);o.call(Dde,a,t),d0.setTranslate(o,YB(t,a.fraction),ao.tickOffset+t.ticklen+t.font.size*Pde+ao.labelOffset+i.currentValueTotalHeight)})}function Cde(e,t,r,i,n){var a=Math.round(i*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&Ide(e,t,r,o,!0,n)}function Ide(e,t,r,i,n,a){var o=r.active;r.active=i,cpt(e.layout,ao.name,r).applyUpdate("active",i);var s=r.steps[r.active];t.call(qde,r,a),t.call(DL,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:n,previousActive:o}),s&&s.method&&n&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=n,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:n,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var l=t._nextMethod.step;l.method&&(l.execute&&RL.executeAPICommand(e,l.method,l.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function Fde(e,t,r){if(t._context.staticPlot)return;var i=r.node(),n=v0.select(t);function a(){return r.data()[0]}function o(){var s=a();t.emit("plotly_sliderstart",{slider:s});var l=r.select("."+ao.gripRectClass);v0.event.stopPropagation(),v0.event.preventDefault(),l.call(Em.fill,s.activebgcolor);var u=Lde(s,v0.mouse(i)[0]);Cde(t,r,s,u,!0),s._dragging=!0;function f(){var h=a(),v=Lde(h,v0.mouse(i)[0]);Cde(t,r,h,v,!1)}n.on("mousemove",f),n.on("touchmove",f);function c(){var h=a();h._dragging=!1,l.call(Em.fill,h.bgcolor),n.on("mouseup",null),n.on("mousemove",null),n.on("touchend",null),n.on("touchmove",null),t.emit("plotly_sliderend",{slider:h,step:h.steps[h.active]})}n.on("mouseup",c),n.on("touchend",c)}e.on("mousedown",o),e.on("touchstart",o)}function mpt(e,t){var r=e.selectAll("rect."+ao.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(ao.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(n,a){var o=a%i.labelStride===0,s=v0.select(this);s.attr({height:o?t.ticklen:t.minorticklen}).call(Em.fill,t.tickcolor),d0.setTranslate(s,YB(t,a/(t._stepCount-1))-.5*t.tickwidth,(o?ao.tickOffset:ao.minorTickOffset)+i.currentValueTotalHeight)})}function xpt(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function qde(e,t,r){for(var i=e.select("rect."+ao.gripRectClass),n=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){n=a;break}var o=YB(t,n/(t._stepCount-1));if(!t._invokingCommand){var s=i;r&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",fpt(o-ao.gripWidth*.5,t._dims.currentValueTotalHeight))}}function YB(e,t){var r=e._dims;return r.inputAreaStart+ao.stepInset+(r.inputAreaLength-2*ao.stepInset)*Math.min(1,Math.max(0,t))}function Lde(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-ao.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*ao.stepInset-2*r.inputAreaStart)))}function _pt(e,t,r){var i=r._dims,n=Id.ensureSingle(e,"rect",ao.railTouchRectClass,function(a){a.call(Fde,t,e,r).style("pointer-events","all")});n.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,ao.tickOffset+r.ticklen+i.labelHeight)}).call(Em.fill,r.bgcolor).attr("opacity",0),d0.setTranslate(n,0,i.currentValueTotalHeight)}function bpt(e,t){var r=t._dims,i=r.inputAreaLength-ao.railInset*2,n=Id.ensureSingle(e,"rect",ao.railRectClass);n.attr({width:i,height:ao.railWidth,rx:ao.railRadius,ry:ao.railRadius,"shape-rendering":"crispEdges"}).call(Em.stroke,t.bordercolor).call(Em.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d0.setTranslate(n,ao.railInset,(r.inputAreaWidth-ao.railWidth)*.5+r.currentValueTotalHeight)}});var Nde=ne((Rir,Bde)=>{"use strict";var wpt=BM();Bde.exports={moduleType:"component",name:wpt.name,layoutAttributes:UB(),supplyLayoutDefaults:kde(),draw:Ode()}});var IL=ne((Dir,Vde)=>{"use strict";var Ude=Ku();Vde.exports={bgcolor:{valType:"color",dflt:Ude.background,editType:"plot"},bordercolor:{valType:"color",dflt:Ude.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var WB=ne((Iir,Hde)=>{"use strict";Hde.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var FL=ne((Fir,Gde)=>{"use strict";Gde.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var Xde=ne(zL=>{"use strict";var Tpt=zl(),Apt=Es(),Yde=FL(),Mpt=Tf().LINE_SPACING,qL=Yde.name;function Wde(e){var t=e&&e[qL];return t&&t.visible}zL.isVisible=Wde;zL.makeData=function(e){var t=Tpt.list({_fullLayout:e},"x",!0),r=e.margin,i=[];if(!e._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(Wde(a)){i.push(a);var o=a[qL];o._id=qL+a._id,o._height=(e.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}e._rangeSliderData=i};zL.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[qL],n=t._id.charAt(0),a=0,o=0;if(t.side==="bottom"&&(a=t._depth,t.title.text!==r._dfltTitle[n])){o=1.5*t.title.font.size+10+i._offsetShift;var s=(t.title.text.match(Apt.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*Mpt}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+a+Math.max(r.margin.b,o),pad:Yde.extraPad+i._offsetShift*2}}});var Jde=ne((zir,Kde)=>{"use strict";var OL=Wt(),Zde=So(),jde=zl(),Spt=IL(),Ept=WB();Kde.exports=function(t,r,i){var n=t[i],a=r[i];if(!(n.rangeslider||r._requestRangeslider[a._id]))return;OL.isPlainObject(n.rangeslider)||(n.rangeslider={});var o=n.rangeslider,s=Zde.newContainer(a,"rangeslider");function l(k,x){return OL.coerce(o,s,Spt,k,x)}var u,f;function c(k,x){return OL.coerce(u,f,Ept,k,x)}var h=l("visible");if(h){l("bgcolor",r.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!a.isValidRange(o.range)),l("range");var v=r._subplots;if(v)for(var p=v.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===jde.name2id(i)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),_=OL.simpleMap(p,jde.id2name),T=0;T<_.length;T++){var g=_[T];u=o[g]||{},f=Zde.newContainer(s,g,"yaxis");var A=r[g],b;u.range&&A.isValidRange(u.range)&&(b="fixed");var w=c("rangemode",b);w!=="match"&&c("range",A.range.slice())}s._input=o}}});var $de=ne((Oir,Qde)=>{"use strict";var kpt=zl().list,Cpt=Cd().getAutoRange,Lpt=FL();Qde.exports=function(t){for(var r=kpt(t,"x",!0),i=0;i<r.length;i++){var n=r[i],a=n[Lpt.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=Cpt(t,n))}}});var npe=ne((Bir,rpe)=>{"use strict";var BL=Ai(),Ppt=wi(),Rpt=Zs(),du=Wt(),NL=du.strTranslate,tpe=aa(),km=_i(),Dpt=yx(),Ipt=vu(),XB=zl(),Fpt=Hh(),qpt=e0(),yo=FL();rpe.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var n=r[i][yo.name];n._clipId=n._id+"-"+t._uid}function a(s){return s._name}var o=t._infolayer.selectAll("g."+yo.containerClassName).data(r,a);o.exit().each(function(s){var l=s[yo.name];t._topdefs.select("#"+l._clipId).remove()}).remove(),r.length!==0&&(o.enter().append("g").classed(yo.containerClassName,!0).attr("pointer-events","all"),o.each(function(s){var l=BL.select(this),u=s[yo.name],f=t[XB.id2name(s.anchor)],c=u[XB.id2name(s.anchor)];if(u.range){var h=du.simpleMap(u.range,s.r2l),v=du.simpleMap(s.range,s.r2l),p;v[0]<v[1]?p=[Math.min(h[0],v[0]),Math.max(h[1],v[1])]:p=[Math.max(h[0],v[0]),Math.min(h[1],v[1])],u.range=u._input.range=du.simpleMap(p,s.l2r)}s.cleanRange("rangeslider.range");var _=t._size,T=s.domain;u._width=_.w*(T[1]-T[0]);var g=Math.round(_.l+_.w*T[0]),A=Math.round(_.t+_.h*(1-s._counterDomainMin)+(s.side==="bottom"?s._depth:0)+u._offsetShift+yo.extraPad);l.attr("transform",NL(g,A)),u._rl=du.simpleMap(u.range,s.r2l);var b=u._rl[0],w=u._rl[1],k=w-b;if(u.p2d=function(O){return O/u._width*k+b},u.d2p=function(O){return(O-b)/k*u._width},s.rangebreaks){var x=s.locateBreaks(b,w);if(x.length){var E,M,d=0;for(E=0;E<x.length;E++)M=x[E],d+=M.max-M.min;var C=u._width/(w-b-d),S=[-C*b];for(E=0;E<x.length;E++)M=x[E],S.push(S[S.length-1]-C*(M.max-M.min));for(u.d2p=function(O){for(var V=S[0],B=0;B<x.length;B++){var F=x[B];if(O>=F.max)V=S[B+1];else if(O<F.min)break}return V+C*O},E=0;E<x.length;E++)M=x[E],M.pmin=u.d2p(M.min),M.pmax=u.d2p(M.max);u.p2d=function(O){for(var V=S[0],B=0;B<x.length;B++){var F=x[B];if(O>=F.pmax)V=S[B+1];else if(O<F.pmin)break}return(O-V)/C}}}if(c.rangemode!=="match"){var P=f.r2l(c.range[0]),D=f.r2l(c.range[1]),z=D-P;u.d2pOppAxis=function(O){return(O-P)/z*u._height}}l.call(Npt,e,s,u).call(Upt,e,s,u).call(Vpt,e,s,u).call(Gpt,e,s,u,c).call(Ypt,e,s,u).call(Wpt,e,s,u),zpt(l,e,s,u),Bpt(l,e,s,u,f,c),s.side==="bottom"&&Dpt.draw(e,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:t._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:A+u._height+u._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))};function epe(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function zpt(e,t,r,i){if(t._context.staticPlot)return;var n=e.select("rect."+yo.slideBoxClassName).node(),a=e.select("rect."+yo.grabAreaMinClassName).node(),o=e.select("rect."+yo.grabAreaMaxClassName).node();function s(){var l=BL.event,u=l.target,f=epe(l),c=f-e.node().getBoundingClientRect().left,h=i.d2p(r._rl[0]),v=i.d2p(r._rl[1]),p=Fpt.coverSlip();this.addEventListener("touchmove",_),this.addEventListener("touchend",T),p.addEventListener("mousemove",_),p.addEventListener("mouseup",T);function _(g){var A=epe(g),b=+A-f,w,k,x;switch(u){case n:if(x="ew-resize",h+b>r._length||v+b<0)return;w=h+b,k=v+b;break;case a:if(x="col-resize",h+b>r._length)return;w=h+b,k=v;break;case o:if(x="col-resize",v+b<0)return;w=h,k=v+b;break;default:x="ew-resize",w=c,k=c+b;break}if(k<w){var E=k;k=w,w=E}i._pixelMin=w,i._pixelMax=k,qpt(BL.select(p),x),Opt(e,t,r,i)}function T(){p.removeEventListener("mousemove",_),p.removeEventListener("mouseup",T),this.removeEventListener("touchmove",_),this.removeEventListener("touchend",T),du.removeElement(p)}}e.on("mousedown",s),e.on("touchstart",s)}function Opt(e,t,r,i){function n(s){return r.l2r(du.constrain(s,i._rl[0],i._rl[1]))}var a=n(i.p2d(i._pixelMin)),o=n(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Ppt.call("_guiRelayout",t,r._name+".range",[a,o])})}function Bpt(e,t,r,i,n,a){var o=yo.handleWidth/2;function s(g){return du.constrain(g,0,i._width)}function l(g){return du.constrain(g,0,i._height)}function u(g){return du.constrain(g,-o,i._width+o)}var f=s(i.d2p(r._rl[0])),c=s(i.d2p(r._rl[1]));if(e.select("rect."+yo.slideBoxClassName).attr("x",f).attr("width",c-f),e.select("rect."+yo.maskMinClassName).attr("width",f),e.select("rect."+yo.maskMaxClassName).attr("x",c).attr("width",i._width-c),a.rangemode!=="match"){var h=i._height-l(i.d2pOppAxis(n._rl[1])),v=i._height-l(i.d2pOppAxis(n._rl[0]));e.select("rect."+yo.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",c-f),e.select("rect."+yo.maskMaxOppAxisClassName).attr("x",f).attr("y",v).attr("height",i._height-v).attr("width",c-f),e.select("rect."+yo.slideBoxClassName).attr("y",h).attr("height",v-h)}var p=.5,_=Math.round(u(f-o))-p,T=Math.round(u(c-o))+p;e.select("g."+yo.grabberMinClassName).attr("transform",NL(_,p)),e.select("g."+yo.grabberMaxClassName).attr("transform",NL(T,p))}function Npt(e,t,r,i){var n=du.ensureSingle(e,"rect",yo.bgClassName,function(l){l.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,o=-i._offsetShift,s=tpe.crispRound(t,i.borderwidth);n.attr({width:i._width+a,height:i._height+a,transform:NL(o,o),"stroke-width":s}).call(km.stroke,i.bordercolor).call(km.fill,i.bgcolor)}function Upt(e,t,r,i){var n=t._fullLayout,a=du.ensureSingleById(n._topdefs,"clipPath",i._clipId,function(o){o.append("rect").attr({x:0,y:0})});a.select("rect").attr({width:i._width,height:i._height})}function Vpt(e,t,r,i){var n=t.calcdata,a=e.selectAll("g."+yo.rangePlotClassName).data(r._subplotsWith,du.identity);a.enter().append("g").attr("class",function(s){return yo.rangePlotClassName+" "+s}).call(tpe.setClipUrl,i._clipId,t),a.order(),a.exit().remove();var o;a.each(function(s,l){var u=BL.select(this),f=l===0,c=XB.getFromId(t,s,"y"),h=c._name,v=i[h],p={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(p.layout.xaxis.rangebreaks=r.rangebreaks),p.layout[h]={type:c.type,domain:[0,1],range:v.rangemode!=="match"?v.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(p.layout[h].rangebreaks=c.rangebreaks),Rpt.supplyDefaults(p);var _=p._fullLayout.xaxis,T=p._fullLayout[h];_.clearCalc(),_.setScale(),T.clearCalc(),T.setScale();var g={id:s,plotgroup:u,xaxis:_,yaxis:T,isRangePlot:!0};f?o=g:(g.mainplot="xy",g.mainplotinfo=o),Ipt.rangePlot(t,g,Hpt(n,s))})}function Hpt(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i],a=n[0].trace;a.xaxis+a.yaxis===t&&r.push(n)}return r}function Gpt(e,t,r,i,n){var a=du.ensureSingle(e,"rect",yo.maskMinClassName,function(u){u.attr({x:0,y:0,"shape-rendering":"crispEdges"})});a.attr("height",i._height).call(km.fill,yo.maskColor);var o=du.ensureSingle(e,"rect",yo.maskMaxClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});if(o.attr("height",i._height).call(km.fill,yo.maskColor),n.rangemode!=="match"){var s=du.ensureSingle(e,"rect",yo.maskMinOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",i._width).call(km.fill,yo.maskOppAxisColor);var l=du.ensureSingle(e,"rect",yo.maskMaxOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",i._width).style("border-top",yo.maskOppBorder).call(km.fill,yo.maskOppAxisColor)}}function Ypt(e,t,r,i){if(!t._context.staticPlot){var n=du.ensureSingle(e,"rect",yo.slideBoxClassName,function(a){a.attr({y:0,cursor:yo.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:i._height,fill:yo.slideBoxFill})}}function Wpt(e,t,r,i){var n=du.ensureSingle(e,"g",yo.grabberMinClassName),a=du.ensureSingle(e,"g",yo.grabberMaxClassName),o={x:0,width:yo.handleWidth,rx:yo.handleRadius,fill:km.background,stroke:km.defaultLine,"stroke-width":yo.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(i._height/4),height:Math.round(i._height/2)},l=du.ensureSingle(n,"rect",yo.handleMinClassName,function(v){v.attr(o)});l.attr(s);var u=du.ensureSingle(a,"rect",yo.handleMaxClassName,function(v){v.attr(o)});u.attr(s);var f={width:yo.grabAreaWidth,x:0,y:0,fill:yo.grabAreaFill,cursor:t._context.staticPlot?void 0:yo.grabAreaCursor},c=du.ensureSingle(n,"rect",yo.grabAreaMinClassName,function(v){v.attr(f)});c.attr("height",i._height);var h=du.ensureSingle(a,"rect",yo.grabAreaMaxClassName,function(v){v.attr(f)});h.attr("height",i._height)}});var ape=ne((Nir,ipe)=>{"use strict";var Xpt=Wt(),Zpt=IL(),jpt=WB(),ZB=Xde();ipe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:Xpt.extendFlat({},Zpt,{yaxis:jpt})}}},layoutAttributes:IL(),handleDefaults:Jde(),calcAutorange:$de(),draw:npe(),isVisible:ZB.isVisible,makeData:ZB.makeData,autoMarginOpts:ZB.autoMarginOpts}});var UL=ne((Uir,spe)=>{"use strict";var Kpt=ll(),ope=Ku(),Jpt=So().templatedArray,Qpt=Jpt("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});spe.exports={visible:{valType:"boolean",editType:"plot"},buttons:Qpt,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:Kpt({editType:"plot"}),bgcolor:{valType:"color",dflt:ope.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:ope.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var jB=ne((Vir,lpe)=>{"use strict";lpe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var cpe=ne((Hir,fpe)=>{"use strict";var VL=Wt(),$pt=_i(),e0t=So(),t0t=ch(),upe=UL(),KB=jB();fpe.exports=function(t,r,i,n,a){var o=t.rangeselector||{},s=e0t.newContainer(r,"rangeselector");function l(v,p){return VL.coerce(o,s,upe,v,p)}var u=t0t(o,s,{name:"buttons",handleItemDefaults:r0t,calendar:a}),f=l("visible",u.length>0);if(f){var c=n0t(r,i,n);l("x",c[0]),l("y",c[1]),VL.noneOrAll(t,r,["x","y"]),l("xanchor"),l("yanchor"),VL.coerceFont(l,"font",i.font);var h=l("bgcolor");l("activecolor",$pt.contrast(h,KB.lightAmount,KB.darkAmount)),l("bordercolor"),l("borderwidth")}};function r0t(e,t,r,i){var n=i.calendar;function a(l,u){return VL.coerce(e,t,upe.buttons,l,u)}var o=a("visible");if(o){var s=a("step");s!=="all"&&(n&&n!=="gregorian"&&(s==="month"||s==="year")?t.stepmode="backward":a("stepmode"),a("count")),a("label")}}function n0t(e,t,r){for(var i=r.filter(function(s){return t[s].anchor===e._id}),n=0,a=0;a<i.length;a++){var o=t[i[a]].domain;o&&(n=Math.max(o[1],n))}return[e.domain[0],n+KB.yPad]}});var vpe=ne((Gir,hpe)=>{"use strict";var i0t=oq(),a0t=Wt().titleCase;hpe.exports=function(t,r){var i=t._name,n={};if(r.step==="all")n[i+".autorange"]=!0;else{var a=o0t(t,r);n[i+".range[0]"]=a[0],n[i+".range[1]"]=a[1]}return n};function o0t(e,t){var r=e.range,i=new Date(e.r2l(r[1])),n=t.step,a=i0t["utc"+a0t(n)],o=t.count,s;switch(t.stepmode){case"backward":s=e.l2r(+a.offset(i,-o));break;case"todate":var l=a.offset(i,-o);s=e.l2r(+a.ceil(l));break}var u=r[1];return[s,u]}});var bpe=ne((Yir,_pe)=>{"use strict";var GL=Ai(),s0t=wi(),l0t=Zs(),dpe=_i(),xpe=aa(),Zg=Wt(),ppe=Zg.strTranslate,HL=Es(),u0t=zl(),$B=Tf(),gpe=$B.LINE_SPACING,ype=$B.FROM_TL,mpe=$B.FROM_BR,QB=jB(),f0t=vpe();_pe.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(c0t(t),h0t);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(n){var a=GL.select(this),o=n,s=o.rangeselector,l=a.selectAll("g.button").data(Zg.filterVisible(s.buttons));l.enter().append("g").classed("button",!0),l.exit().remove(),l.each(function(u){var f=GL.select(this),c=f0t(o,u);u._isActive=v0t(o,u,c),f.call(JB,s,u),f.call(p0t,s,u,t),f.on("click",function(){t._dragged||s0t.call("_guiRelayout",t,c)}),f.on("mouseover",function(){u._isHovered=!0,f.call(JB,s,u)}),f.on("mouseout",function(){u._isHovered=!1,f.call(JB,s,u)})}),y0t(t,l,s,o._name,a)})};function c0t(e){for(var t=u0t.list(e,"x",!0),r=[],i=0;i<t.length;i++){var n=t[i];n.rangeselector&&n.rangeselector.visible&&r.push(n)}return r}function h0t(e){return e._id}function v0t(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function JB(e,t,r){var i=Zg.ensureSingle(e,"rect","selector-rect",function(n){n.attr("shape-rendering","crispEdges")});i.attr({rx:QB.rx,ry:QB.ry}),i.call(dpe.stroke,t.bordercolor).call(dpe.fill,d0t(t,r)).style("stroke-width",t.borderwidth+"px")}function d0t(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function p0t(e,t,r,i){function n(o){HL.convertToTspans(o,i)}var a=Zg.ensureSingle(e,"text","selector-text",function(o){o.attr("text-anchor","middle")});a.call(xpe.font,t.font).text(g0t(r,i._fullLayout._meta)).call(n)}function g0t(e,t){return e.label?t?Zg.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function y0t(e,t,r,i,n){var a=0,o=0,s=r.borderwidth;t.each(function(){var v=GL.select(this),p=v.select(".selector-text"),_=r.font.size*gpe,T=Math.max(_*HL.lineCount(p),16)+3;o=Math.max(o,T)}),t.each(function(){var v=GL.select(this),p=v.select(".selector-rect"),_=v.select(".selector-text"),T=_.node()&&xpe.bBox(_.node()).width,g=r.font.size*gpe,A=HL.lineCount(_),b=Math.max(T+10,QB.minButtonWidth);v.attr("transform",ppe(s+a,s)),p.attr({x:0,y:0,width:b,height:o}),HL.positionText(_,b/2,o/2-(A-1)*g/2+3),a+=b+5});var l=e._fullLayout._size,u=l.l+l.w*r.x,f=l.t+l.h*(1-r.y),c="left";Zg.isRightAnchor(r)&&(u-=a,c="right"),Zg.isCenterAnchor(r)&&(u-=a/2,c="center");var h="top";Zg.isBottomAnchor(r)&&(f-=o,h="bottom"),Zg.isMiddleAnchor(r)&&(f-=o/2,h="middle"),a=Math.ceil(a),o=Math.ceil(o),u=Math.round(u),f=Math.round(f),l0t.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:a*ype[c],r:a*mpe[c],b:o*mpe[h],t:o*ype[h]}),n.attr("transform",ppe(u,f))}});var Tpe=ne((Wir,wpe)=>{"use strict";wpe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:UL()}}},layoutAttributes:UL(),handleDefaults:cpe(),draw:bpe()}});var fl=ne(e9=>{"use strict";var Ape=oa().extendFlat;e9.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",n=e.trace?"trace ":"subplot ",a=t.description?" "+t.description:"",o={x:Ape({},r,{}),y:Ape({},r,{}),editType:e.editType};return e.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:e.editType},o.column={valType:"integer",min:0,dflt:0,editType:e.editType}),o};e9.defaults=function(e,t,r,i){var n=i&&i.x||[0,1],a=i&&i.y||[0,1],o=t.grid;if(o){var s=r("domain.column");s!==void 0&&(s<o.columns?n=o._domains.x[s]:delete e.domain.column);var l=r("domain.row");l!==void 0&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var u=r("domain.x",n),f=r("domain.y",a);u[0]<u[1]||(e.domain.x=n.slice()),f[0]<f[1]||(e.domain.y=a.slice())}});var r9=ne((Zir,kpe)=>{"use strict";var m0t=Wt(),x0t=Jb().counter,_0t=fl().attributes,Mpe=wf().idRegex,b0t=So(),t9={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[x0t("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Mpe.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Mpe.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:_0t({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function YL(e,t,r){var i=t[r+"axes"],n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(n.length)return n}function w0t(e,t){var r=e.grid||{},i=YL(t,r,"x"),n=YL(t,r,"y");if(!e.grid&&!i&&!n)return;var a=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),o=Array.isArray(i),s=Array.isArray(n),l=o&&i!==r.xaxes&&s&&n!==r.yaxes,u,f;a?(u=r.subplots.length,f=r.subplots[0].length):(s&&(u=n.length),o&&(f=i.length));var c=b0t.newContainer(t,"grid");function h(x,E){return m0t.coerce(r,c,t9,x,E)}var v=h("rows",u),p=h("columns",f);if(!(v*p>1)){delete t.grid;return}if(!a&&!o&&!s){var _=h("pattern")==="independent";_&&(a=!0)}c._hasSubplotGrid=a;var T=h("roworder"),g=T==="top to bottom",A=a?.2:.1,b=a?.3:.1,w,k;l&&t._splomGridDflt&&(w=t._splomGridDflt.xside,k=t._splomGridDflt.yside),c._domains={x:Spe("x",h,A,w,p),y:Spe("y",h,b,k,v,g)}}function Spe(e,t,r,i,n,a){var o=t(e+"gap",r),s=t("domain."+e);t(e+"side",i);for(var l=new Array(n),u=s[0],f=(s[1]-u)/(n-o),c=f*(1-o),h=0;h<n;h++){var v=u+f*h;l[a?n-1-h:h]=[v,v+c]}return l}function T0t(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},n=t._subplots,a=r._hasSubplotGrid,o=r.rows,s=r.columns,l=r.pattern==="independent",u,f,c,h,v,p,_,T=r._axisMap={};if(a){var g=i.subplots||[];p=r.subplots=new Array(o);var A=1;for(u=0;u<o;u++){var b=p[u]=new Array(s),w=g[u]||[];for(f=0;f<s;f++)if(l?(v=A===1?"xy":"x"+A+"y"+A,A++):v=w[f],b[f]="",n.cartesian.indexOf(v)!==-1){if(_=v.indexOf("y"),c=v.slice(0,_),h=v.slice(_),T[c]!==void 0&&T[c]!==f||T[h]!==void 0&&T[h]!==u)continue;b[f]=v,T[c]=f,T[h]=u}}}else{var k=YL(t,i,"x"),x=YL(t,i,"y");r.xaxes=Epe(k,n.xaxis,s,T,"x"),r.yaxes=Epe(x,n.yaxis,o,T,"y")}var E=r._anchors={},M=r.roworder==="top to bottom";for(var d in T){var C=d.charAt(0),S=r[C+"side"],P,D,z;if(S.length<8)E[d]="free";else if(C==="x"){if(S.charAt(0)==="t"===M?(P=0,D=1,z=o):(P=o-1,D=-1,z=-1),a){var O=T[d];for(u=P;u!==z;u+=D)if(v=p[u][O],!!v&&(_=v.indexOf("y"),v.slice(0,_)===d)){E[d]=v.slice(_);break}}else for(u=P;u!==z;u+=D)if(h=r.yaxes[u],n.cartesian.indexOf(d+h)!==-1){E[d]=h;break}}else if(S.charAt(0)==="l"?(P=0,D=1,z=s):(P=s-1,D=-1,z=-1),a){var V=T[d];for(u=P;u!==z;u+=D)if(v=p[V][u],!!v&&(_=v.indexOf("y"),v.slice(_)===d)){E[d]=v.slice(0,_);break}}else for(u=P;u!==z;u+=D)if(c=r.xaxes[u],n.cartesian.indexOf(c+d)!==-1){E[d]=c;break}}}}function Epe(e,t,r,i,n){var a=new Array(r),o;function s(l,u){t.indexOf(u)!==-1&&i[u]===void 0?(a[l]=u,i[u]=l):a[l]=""}if(Array.isArray(e))for(o=0;o<r;o++)s(o,e[o]);else for(s(0,n),o=1;o<r;o++)s(o,n+(o+1));return a}kpe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:t9}},layoutAttributes:t9,sizeDefaults:w0t,contentDefaults:T0t}});var n9=ne((jir,Cpe)=>{"use strict";Cpe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}});var Rpe=ne((Kir,Ppe)=>{"use strict";var Lpe=la(),A0t=wi(),M0t=Wt(),S0t=So(),E0t=n9();Ppe.exports=function(e,t,r,i){var n="error_"+i.axis,a=S0t.newContainer(t,n),o=e[n]||{};function s(p,_){return M0t.coerce(o,a,E0t,p,_)}var l=o.array!==void 0||o.value!==void 0||o.type==="sqrt",u=s("visible",l);if(u!==!1){var f=s("type","array"in o?"data":"percent"),c=!0;f!=="sqrt"&&(c=s("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):(f==="percent"||f==="constant")&&(s("value"),c||s("valueminus"));var h="copy_"+i.inherit+"style";if(i.inherit){var v=t["error_"+i.inherit];(v||{}).visible&&s(h,!(o.color||Lpe(o.thickness)||Lpe(o.width)))}(!i.inherit||!a[h])&&(s("color",r),s("thickness"),s("width",A0t.traceIs(t,"gl3d")?0:4))}}});var i9=ne((Jir,Ipe)=>{"use strict";Ipe.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var n=t.array||[];if(i)return function(u,f){var c=+n[f];return[c,c]};var a=t.arrayminus||[];return function(u,f){var c=+n[f],h=+a[f];return!isNaN(c)||!isNaN(h)?[h||0,c||0]:[NaN,NaN]}}else{var o=Dpe(r,t.value),s=Dpe(r,t.valueminus);return i||t.valueminus===void 0?function(u){var f=o(u);return[f,f]}:function(u){return[s(u),o(u)]}}};function Dpe(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var zpe=ne((Qir,qpe)=>{"use strict";var a9=la(),k0t=wi(),o9=Xi(),C0t=Wt(),L0t=i9();qpe.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.visible===!0&&k0t.traceIs(a,"errorBarsOK")){var o=o9.getFromId(t,a.xaxis),s=o9.getFromId(t,a.yaxis);Fpe(n,a,o,"x"),Fpe(n,a,s,"y")}}};function Fpe(e,t,r,i){var n=t["error_"+i]||{},a=n.visible&&["linear","log"].indexOf(r.type)!==-1,o=[];if(a){for(var s=L0t(n),l=0;l<e.length;l++){var u=e[l],f=u.i;if(f===void 0)f=l;else if(f===null)continue;var c=u[i];if(a9(r.c2l(c))){var h=s(c,f);if(a9(h[0])&&a9(h[1])){var v=u[i+"s"]=c-h[0],p=u[i+"h"]=c+h[1];o.push(v,p)}}}var _=r._id,T=t._extremes[_],g=o9.findExtremes(r,o,C0t.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(g.min),T.max=T.max.concat(g.max)}}});var Npe=ne(($ir,Bpe)=>{"use strict";var Ope=Ai(),Cm=la(),P0t=aa(),R0t=js();Bpe.exports=function(t,r,i,n){var a,o=i.xaxis,s=i.yaxis,l=n&&n.duration>0,u=t._context.staticPlot;r.each(function(f){var c=f[0].trace,h=c.error_x||{},v=c.error_y||{},p;c.ids&&(p=function(A){return A.id});var _=R0t.hasMarkers(c)&&c.marker.maxdisplayed>0;!v.visible&&!h.visible&&(f=[]);var T=Ope.select(this).selectAll("g.errorbar").data(f,p);if(T.exit().remove(),!!f.length){h.visible||T.selectAll("path.xerror").remove(),v.visible||T.selectAll("path.yerror").remove(),T.style("opacity",1);var g=T.enter().append("g").classed("errorbar",!0);l&&g.style("opacity",0).transition().duration(n.duration).style("opacity",1),P0t.setClipUrl(T,i.layerClipId,t),T.each(function(A){var b=Ope.select(this),w=D0t(A,o,s);if(!(_&&!A.vis)){var k,x=b.select("path.yerror");if(v.visible&&Cm(w.x)&&Cm(w.yh)&&Cm(w.ys)){var E=v.width;k="M"+(w.x-E)+","+w.yh+"h"+2*E+"m-"+E+",0V"+w.ys,w.noYS||(k+="m-"+E+",0h"+2*E),a=!x.size(),a?x=b.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("yerror",!0):l&&(x=x.transition().duration(n.duration).ease(n.easing)),x.attr("d",k)}else x.remove();var M=b.select("path.xerror");if(h.visible&&Cm(w.y)&&Cm(w.xh)&&Cm(w.xs)){var d=(h.copy_ystyle?v:h).width;k="M"+w.xh+","+(w.y-d)+"v"+2*d+"m0,-"+d+"H"+w.xs,w.noXS||(k+="m0,-"+d+"v"+2*d),a=!M.size(),a?M=b.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("xerror",!0):l&&(M=M.transition().duration(n.duration).ease(n.easing)),M.attr("d",k)}else M.remove()}})}})};function D0t(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),Cm(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),Cm(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var Hpe=ne((ear,Vpe)=>{"use strict";var I0t=Ai(),Upe=_i();Vpe.exports=function(t){t.each(function(r){var i=r[0].trace,n=i.error_y||{},a=i.error_x||{},o=I0t.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(Upe.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(Upe.stroke,a.color)})}});var Wpe=ne((tar,Ype)=>{"use strict";var UM=Wt(),Gpe=Xs().overrideAll,VM=n9(),Nx={error_x:UM.extendFlat({},VM),error_y:UM.extendFlat({},VM)};delete Nx.error_x.copy_zstyle;delete Nx.error_y.copy_zstyle;delete Nx.error_y.copy_ystyle;var HM={error_x:UM.extendFlat({},VM),error_y:UM.extendFlat({},VM),error_z:UM.extendFlat({},VM)};delete HM.error_x.copy_ystyle;delete HM.error_y.copy_ystyle;delete HM.error_z.copy_ystyle;delete HM.error_z.copy_zstyle;Ype.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Nx,bar:Nx,histogram:Nx,scatter3d:Gpe(HM,"calc","nested"),scattergl:Gpe(Nx,"calc","nested")}},supplyDefaults:Rpe(),calc:zpe(),makeComputeError:i9(),plot:Npe(),style:Hpe(),hoverInfo:F0t};function F0t(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var Zpe=ne((rar,Xpe)=>{"use strict";Xpe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var t0e=ne((nar,e0e)=>{"use strict";var Lm=Ai(),s9=Xf(),XL=Zs(),jpe=wi(),jg=Xi(),WL=Hh(),xp=Wt(),g0=xp.strTranslate,$pe=oa().extendFlat,l9=e0(),p0=aa(),u9=_i(),q0t=yx(),z0t=Es(),O0t=Uh().flipScale,B0t=PM(),N0t=mL(),U0t=dc(),f9=Tf(),Kpe=f9.LINE_SPACING,Jpe=f9.FROM_TL,Qpe=f9.FROM_BR,Ll=Zpe().cn;function V0t(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Ll.colorbar).data(H0t(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Ll.colorbar,!0),r.each(function(i){var n=Lm.select(this);xp.ensureSingle(n,"rect",Ll.cbbg),xp.ensureSingle(n,"g",Ll.cbfills),xp.ensureSingle(n,"g",Ll.cblines),xp.ensureSingle(n,"g",Ll.cbaxis,function(o){o.classed(Ll.crisp,!0)}),xp.ensureSingle(n,"g",Ll.cbtitleunshift,function(o){o.append("g").classed(Ll.cbtitle,!0)}),xp.ensureSingle(n,"rect",Ll.cboutline);var a=G0t(n,i,e);a&&a.then&&(e._promises||[]).push(a),e._context.edits.colorbarPosition&&Y0t(n,i,e)}),r.exit().each(function(i){XL.autoMargin(e,i._id)}).remove(),r.order()}function H0t(e){var t=e._fullLayout,r=e.calcdata,i=[],n,a,o,s;function l(b){return $pe(b,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){typeof s.calc=="function"?s.calc(e,o,n):(n._fillgradient=a.reversescale?O0t(a.colorscale):a.colorscale,n._zrange=[a[s.min],a[s.max]])}for(var f=0;f<r.length;f++){var c=r[f];if(o=c[0].trace,!!o._module){var h=o._module.colorbar;if(o.visible===!0&&h)for(var v=Array.isArray(h),p=v?h:[h],_=0;_<p.length;_++){s=p[_];var T=s.container;a=T?o[T]:o,a&&a.showscale&&(n=l(a.colorbar),n._id="cb"+o.uid+(v&&T?"-"+T:""),n._traceIndex=o.index,n._propPrefix=(T?T+".":"")+"colorbar.",n._meta=o._meta,u(),i.push(n))}}}for(var g in t._colorAxes)if(a=t[g],a.showscale){var A=t._colorAxes[g];n=l(a.colorbar),n._id="cb"+g,n._propPrefix=g+".colorbar.",n._meta=t._meta,s={min:"cmin",max:"cmax"},A[0]!=="heatmap"&&(o=A[1],s.calc=o._module.colorbar.calc),u(),i.push(n)}return i}function G0t(e,t,r){var i=t.orientation==="v",n=t.len,a=t.lenmode,o=t.thickness,s=t.thicknessmode,l=t.outlinewidth,u=t.borderwidth,f=t.bgcolor,c=t.xanchor,h=t.yanchor,v=t.xpad,p=t.ypad,_=t.x,T=i?t.y:1-t.y,g=t.yref==="paper",A=t.xref==="paper",b=r._fullLayout,w=b._size,k=t._fillcolor,x=t._line,E=t.title,M=E.side,d=t._zrange||Lm.extent((typeof k=="function"?k:x.color).domain()),C=typeof x.color=="function"?x.color:function(){return x.color},S=typeof k=="function"?k:function(){return k},P=t._levels,D=W0t(r,t,d),z=D.fill,O=D.line,V=Math.round(o*(s==="fraction"?i?w.w:w.h:1)),B=V/(i?w.w:w.h),F=Math.round(n*(a==="fraction"?i?w.h:w.w:1)),N=F/(i?w.h:w.w),Z=A?w.w:r._fullLayout.width,J=g?w.h:r._fullLayout.height,re=Math.round(i?_*Z+v:T*J+p),le={center:.5,right:1}[c]||0,fe={top:1,middle:.5}[h]||0,K=i?_-le*B:T-fe*B,X=i?T-fe*N:_-le*N,ae=Math.round(i?J*(1-X):Z*X);t._lenFrac=N,t._thickFrac=B,t._uFrac=K,t._vFrac=X;var oe=t._axis=X0t(r,t,d);oe.position=B+(i?_+v/w.w:T+p/w.h);var _e=["top","bottom"].indexOf(M)!==-1;if(i&&_e&&(oe.title.side=M,oe.titlex=_+v/w.w,oe.titley=X+(E.side==="top"?N-p/w.h:p/w.h)),!i&&!_e&&(oe.title.side=M,oe.titley=T+p/w.h,oe.titlex=X+v/w.w),x.color&&t.tickmode==="auto"){oe.tickmode="linear",oe.tick0=P.start;var be=P.size,he=xp.constrain(F/50,4,15)+1,ie=(d[1]-d[0])/((t.nticks||he)*be);if(ie>1){var ye=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));be*=ye*xp.roundUp(ie/ye,[2,5,10]),(Math.abs(P.start)/P.size+1e-6)%1<2e-6&&(oe.tick0=0)}oe.dtick=be}oe.domain=i?[X+p/w.h,X+N-p/w.h]:[X+v/w.w,X+N-v/w.w],oe.setScale(),e.attr("transform",g0(Math.round(w.l),Math.round(w.t)));var ue=e.select("."+Ll.cbtitleunshift).attr("transform",g0(-Math.round(w.l),-Math.round(w.t))),Ae=oe.ticklabelposition,Re=oe.title.font.size,ze=e.select("."+Ll.cbaxis),et,Le=0,Ie=0;function dt(Et,Se){var je={propContainer:oe,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:b._dfltTitle.colorbar,containerGroup:e.select("."+Ll.cbtitle)},ht=Et.charAt(0)==="h"?Et.substr(1):"h"+Et;e.selectAll("."+ht+",."+ht+"-math-group").remove(),q0t.draw(r,Et,$pe(je,Se||{}))}function ct(){if(i&&_e||!i&&!_e){var Et,Se;M==="top"&&(Et=v+w.l+Z*_,Se=p+w.t+J*(1-X-N)+3+Re*.75),M==="bottom"&&(Et=v+w.l+Z*_,Se=p+w.t+J*(1-X)-3-Re*.25),M==="right"&&(Se=p+w.t+J*T+3+Re*.75,Et=v+w.l+Z*X),dt(oe._id+"title",{attributes:{x:Et,y:Se,"text-anchor":i?"start":"middle"}})}}function Ke(){if(i&&!_e||!i&&_e){var Et=oe.position||0,Se=oe._offset+oe._length/2,je,ht;if(M==="right")ht=Se,je=w.l+Z*Et+10+Re*(oe.showticklabels?1:.5);else if(je=Se,M==="bottom"&&(ht=w.t+J*Et+10+(Ae.indexOf("inside")===-1?oe.tickfont.size:0)+(oe.ticks!=="intside"&&t.ticklen||0)),M==="top"){var nt=E.text.split("<br>").length;ht=w.t+J*Et+10-V-Kpe*Re*nt}dt((i?"h":"v")+oe._id+"title",{avoid:{selection:Lm.select(r).selectAll("g."+oe._id+"tick"),side:M,offsetTop:i?0:w.t,offsetLeft:i?w.l:0,maxShift:i?b.width:b.height},attributes:{x:je,y:ht,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function _t(){if(!i&&!_e||i&&_e){var Et=e.select("."+Ll.cbtitle),Se=Et.select("text"),je=[-l/2,l/2],ht=Et.select(".h"+oe._id+"title-math-group").node(),nt=15.6;Se.node()&&(nt=parseInt(Se.node().style.fontSize,10)*Kpe);var lt;if(ht?(lt=p0.bBox(ht),Ie=lt.width,Le=lt.height,Le>nt&&(je[1]-=(Le-nt)/2)):Se.node()&&!Se.classed(Ll.jsPlaceholder)&&(lt=p0.bBox(Se.node()),Ie=lt.width,Le=lt.height),i){if(Le){if(Le+=5,M==="top")oe.domain[1]-=Le/w.h,je[1]*=-1;else{oe.domain[0]+=Le/w.h;var rt=z0t.lineCount(Se);je[1]+=(1-rt)*nt}Et.attr("transform",g0(je[0],je[1])),oe.setScale()}}else Ie&&(M==="right"&&(oe.domain[0]+=(Ie+Re/2)/w.w),Et.attr("transform",g0(je[0],je[1])),oe.setScale())}e.selectAll("."+Ll.cbfills+",."+Ll.cblines).attr("transform",i?g0(0,Math.round(w.h*(1-oe.domain[1]))):g0(Math.round(w.w*oe.domain[0]),0)),ze.attr("transform",i?g0(0,Math.round(-w.t)):g0(Math.round(-w.l),0));var Xe=e.select("."+Ll.cbfills).selectAll("rect."+Ll.cbfill).attr("style","").data(z);Xe.enter().append("rect").classed(Ll.cbfill,!0).attr("style",""),Xe.exit().remove();var ft=d.map(oe.c2p).map(Math.round).sort(function(nr,ur){return nr-ur});Xe.each(function(nr,ur){var qt=[ur===0?d[0]:(z[ur]+z[ur-1])/2,ur===z.length-1?d[1]:(z[ur]+z[ur+1])/2].map(oe.c2p).map(Math.round);i&&(qt[1]=xp.constrain(qt[1]+(qt[1]>qt[0])?1:-1,ft[0],ft[1]));var xt=Lm.select(this).attr(i?"x":"y",re).attr(i?"y":"x",Lm.min(qt)).attr(i?"width":"height",Math.max(V,2)).attr(i?"height":"width",Math.max(Lm.max(qt)-Lm.min(qt),2));if(t._fillgradient)p0.gradient(xt,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var At=S(nr).replace("e-","");xt.attr("fill",s9(At).toHexString())}});var gt=e.select("."+Ll.cblines).selectAll("path."+Ll.cbline).data(x.color&&x.width?O:[]);gt.enter().append("path").classed(Ll.cbline,!0),gt.exit().remove(),gt.each(function(nr){var ur=re,qt=Math.round(oe.c2p(nr))+x.width/2%1;Lm.select(this).attr("d","M"+(i?ur+","+qt:qt+","+ur)+(i?"h":"v")+V).call(p0.lineGroupStyle,x.width,C(nr),x.dash)}),ze.selectAll("g."+oe._id+"tick,path").remove();var Qt=re+V+(l||0)/2-(t.ticks==="outside"?1:0),Jt=jg.calcTicks(oe),fr=jg.getTickSigns(oe)[2];return jg.drawTicks(r,oe,{vals:oe.ticks==="inside"?jg.clipEnds(oe,Jt):Jt,layer:ze,path:jg.makeTickPath(oe,Qt,fr),transFn:jg.makeTransTickFn(oe)}),jg.drawLabels(r,oe,{vals:Jt,layer:ze,transFn:jg.makeTransTickLabelFn(oe),labelFns:jg.makeLabelFns(oe,Qt)})}function zt(){var Et,Se=V+l/2;Ae.indexOf("inside")===-1&&(Et=p0.bBox(ze.node()),Se+=i?Et.width:Et.height),et=ue.select("text");var je=0,ht=i&&M==="top",nt=!i&&M==="right",lt=0;if(et.node()&&!et.classed(Ll.jsPlaceholder)){var rt,Xe=ue.select(".h"+oe._id+"title-math-group").node();Xe&&(i&&_e||!i&&!_e)?(Et=p0.bBox(Xe),je=Et.width,rt=Et.height):(Et=p0.bBox(ue.node()),je=Et.right-w.l-(i?re:ae),rt=Et.bottom-w.t-(i?ae:re),!i&&M==="top"&&(Se+=Et.height,lt=Et.height)),nt&&(et.attr("transform",g0(je/2+Re/2,0)),je*=2),Se=Math.max(Se,i?je:rt)}var ft=(i?v:p)*2+Se+u+l/2,gt=0;!i&&E.text&&h==="bottom"&&T<=0&&(gt=ft/2,ft+=gt,lt+=gt),b._hColorbarMoveTitle=gt,b._hColorbarMoveCBTitle=lt;var Qt=u+l,Jt=(i?re:ae)-Qt/2-(i?v:0),fr=(i?ae:re)-(i?F:p+lt-gt);e.select("."+Ll.cbbg).attr("x",Jt).attr("y",fr).attr(i?"width":"height",Math.max(ft-gt,2)).attr(i?"height":"width",Math.max(F+Qt,2)).call(u9.fill,f).call(u9.stroke,t.bordercolor).style("stroke-width",u);var nr=nt?Math.max(je-10,0):0;e.selectAll("."+Ll.cboutline).attr("x",(i?re:ae+v)+nr).attr("y",(i?ae+p-F:re)+(ht?Le:0)).attr(i?"width":"height",Math.max(V,2)).attr(i?"height":"width",Math.max(F-(i?2*p+Le:2*v+nr),2)).call(u9.stroke,t.outlinecolor).style({fill:"none","stroke-width":l});var ur=i?le*ft:0,qt=i?0:(1-fe)*ft-lt;if(ur=A?w.l-ur:-ur,qt=g?w.t-qt:-qt,e.attr("transform",g0(ur,qt)),!i&&(u||s9(f).getAlpha()&&!s9.equals(b.paper_bgcolor,f))){var xt=ze.selectAll("text"),At=xt[0].length,Je=e.select("."+Ll.cbbg).node(),xe=p0.bBox(Je),ce=p0.getTranslate(e),ge=2;xt.each(function(Ur,_n){var si=0,xn=At-1;if(_n===si||_n===xn){var ci=p0.bBox(this),Wi=p0.getTranslate(this),oi;if(_n===xn){var Zi=ci.right+Wi.x,Ei=xe.right+ce.x+ae-u-ge+_;oi=Ei-Zi,oi>0&&(oi=0)}else if(_n===si){var at=ci.left+Wi.x,Ne=xe.left+ce.x+ae+u+ge;oi=Ne-at,oi<0&&(oi=0)}oi&&(At<3?this.setAttribute("transform","translate("+oi+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var qe={},yt=Jpe[c],Vt=Qpe[c],Ut=Jpe[h],br=Qpe[h],xr=ft-V;i?(a==="pixels"?(qe.y=T,qe.t=F*Ut,qe.b=F*br):(qe.t=qe.b=0,qe.yt=T+n*Ut,qe.yb=T-n*br),s==="pixels"?(qe.x=_,qe.l=ft*yt,qe.r=ft*Vt):(qe.l=xr*yt,qe.r=xr*Vt,qe.xl=_-o*yt,qe.xr=_+o*Vt)):(a==="pixels"?(qe.x=_,qe.l=F*yt,qe.r=F*Vt):(qe.l=qe.r=0,qe.xl=_+n*yt,qe.xr=_-n*Vt),s==="pixels"?(qe.y=1-T,qe.t=ft*Ut,qe.b=ft*br):(qe.t=xr*Ut,qe.b=xr*br,qe.yt=T-o*Ut,qe.yb=T+o*br));var Or=t.y<.5?"b":"t",Hr=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var gr={r:b.width-Jt-ur,l:Jt+qe.r,b:b.height-fr-qt,t:fr+qe.b};A&&g?XL.autoMargin(r,t._id,qe):A?r._fullLayout._reservedMargin[t._id][Or]=gr[Or]:g||i?r._fullLayout._reservedMargin[t._id][Hr]=gr[Hr]:r._fullLayout._reservedMargin[t._id][Or]=gr[Or]}return xp.syncOrAsync([XL.previousPromises,ct,_t,Ke,XL.previousPromises,zt],r)}function Y0t(e,t,r){var i=t.orientation==="v",n=r._fullLayout,a=n._size,o,s,l;WL.init({element:e.node(),gd:r,prepFn:function(){o=e.attr("transform"),l9(e)},moveFn:function(u,f){e.attr("transform",o+g0(u,f)),s=WL.align((i?t._uFrac:t._vFrac)+u/a.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),l=WL.align((i?t._vFrac:1-t._uFrac)-f/a.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=WL.getCursor(s,l,t.xanchor,t.yanchor);l9(e,c)},doneFn:function(){if(l9(e),s!==void 0&&l!==void 0){var u={};u[t._propPrefix+"x"]=s,u[t._propPrefix+"y"]=l,t._traceIndex!==void 0?jpe.call("_guiRestyle",r,u,t._traceIndex):jpe.call("_guiRelayout",r,u)}}})}function W0t(e,t,r){var i=t._levels,n=[],a=[],o,s,l=i.end+i.size/100,u=i.size,f=1.001*r[0]-.001*r[1],c=1.001*r[1]-.001*r[0];for(s=0;s<1e5&&(o=i.start+s*u,!(u>0?o>=l:o<=l));s++)o>f&&o<c&&n.push(o);if(t._fillgradient)a=[0];else if(typeof t._fillcolor=="function"){var h=t._filllevels;if(h)for(l=h.end+h.size/100,u=h.size,s=0;s<1e5&&(o=h.start+s*u,!(u>0?o>=l:o<=l));s++)o>r[0]&&o<r[1]&&a.push(o);else a=n.map(function(v){return v-i.size/2}),a.push(a[a.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(a=[0]);return i.size<0&&(n.reverse(),a.reverse()),{line:n,fill:a}}function X0t(e,t,r){var i=e._fullLayout,n=t.orientation==="v",a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:n?"right":"bottom",position:1},o=n?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:i.font,noAutotickangles:o==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function u(f,c){return xp.coerce(a,s,U0t,f,c)}return B0t(a,s,u,l,i),N0t(a,s,u,l),s}e0e.exports={draw:V0t}});var n0e=ne((iar,r0e)=>{"use strict";r0e.exports={moduleType:"component",name:"colorbar",attributes:yC(),supplyDefaults:_z(),draw:t0e().draw,hasColorbar:vz()}});var a0e=ne((aar,i0e)=>{"use strict";i0e.exports={moduleType:"component",name:"legend",layoutAttributes:mO(),supplyLayoutDefaults:bO(),draw:RO(),style:kO()}});var s0e=ne((oar,o0e)=>{"use strict";o0e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var u0e=ne((sar,l0e)=>{"use strict";l0e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var h9=ne((lar,v0e)=>{"use strict";var Z0t=wi(),h0e=Wt(),c9=h0e.extendFlat,f0e=h0e.extendDeep;function c0e(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function j0t(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}v0e.exports=function(t,r){var i,n=t.data,a=t.layout,o=f0e([],n),s=f0e({},a,c0e(r.tileClass)),l=t._context||{};if(r.width&&(s.width=r.width),r.height&&(s.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(i=0;i<u.length;i++)j0t(u[i])&&(s[u[i]].title={text:""});for(i=0;i<o.length;i++){var f=o[i];f.showscale=!1,f.marker&&(f.marker.showscale=!1),Z0t.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)s.annotations.push(r.annotations[i]);var c=Object.keys(s).filter(function(T){return T.match(/^scene\d*$/)});if(c.length){var h={};for(r.tileClass==="thumbnail"&&(h={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<c.length;i++){var v=s[c[i]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),c9(v.xaxis,h),c9(v.yaxis,h),c9(v.zaxis,h),v._scene=null}}var p=document.createElement("div");r.tileClass&&(p.className=r.tileClass);var _={gd:p,td:p,layout:s,data:o,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return r.setBackground!=="transparent"&&(_.config.setBackground=r.setBackground||"opaque"),_.gd.defaultLayout=c0e(r.tileClass),_}});var g0e=ne((uar,p0e)=>{"use strict";var K0t=ox().EventEmitter,J0t=wi(),Q0t=Wt(),d0e=Wg(),$0t=h9(),egt=rL(),tgt=nL();function rgt(e,t){var r=new K0t,i=$0t(e,{format:"png"}),n=i.gd;n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n);function a(){var s=d0e.getDelay(n._fullLayout);setTimeout(function(){var l=egt(n),u=document.createElement("canvas");u.id=Q0t.randstr(),r=tgt({format:t.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:u,emitter:r,svg:l}),r.clean=function(){n&&document.body.removeChild(n)}},s)}var o=d0e.getRedrawFunc(n);return J0t.call("_doPlot",n,i.data,i.layout,i.config).then(o).then(a).catch(function(s){r.emit("error",s)}),r}p0e.exports=rgt});var x0e=ne((far,m0e)=>{"use strict";var y0e=Wg(),ngt={getDelay:y0e.getDelay,getRedrawFunc:y0e.getRedrawFunc,clone:h9(),toSVG:rL(),svgToImg:nL(),toImage:g0e(),downloadImage:Z7()};m0e.exports=ngt});var b0e=ne(Kg=>{"use strict";Kg.version=_k().version;NJ();wte();var igt=wi(),GM=Kg.register=igt.register,d9=Nfe(),_0e=Object.keys(d9);for(ZL=0;ZL<_0e.length;ZL++)lw=_0e[ZL],lw.charAt(0)!=="_"&&(Kg[lw]=d9[lw]),GM({moduleType:"apiMethod",name:lw,fn:d9[lw]});var lw,ZL;GM(qhe());GM([lve(),bve(),Mf(),Bve(),Qve(),_de(),Nde(),ape(),Tpe(),r9(),Wpe(),ul(),n0e(),a0e(),Ol(),i7()]);GM([s0e(),u0e()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(GM(window.PlotlyLocales),delete window.PlotlyLocales);Kg.Icons=a4();var jL=Ol(),v9=Zs();Kg.Plots={resize:v9.resize,graphJson:v9.graphJson,sendDataToCloud:v9.sendDataToCloud};Kg.Fx={hover:jL.hover,unhover:jL.unhover,loneHover:jL.loneHover,loneUnhover:jL.loneUnhover};Kg.Snapshot=x0e();Kg.PlotSchema=tm()});var T0e=ne((har,w0e)=>{"use strict";w0e.exports=b0e()});var Ux=ne((dar,A0e)=>{"use strict";A0e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}});var J0=ne((par,k0e)=>{"use strict";var pu=cu(),M0e=kl().axisHoverFormat,agt=Ba().hovertemplateAttrs,ogt=Ba().texttemplateAttrs,E0e=Ps(),sgt=ll(),S0e=Ux(),lgt=hc().pattern,Vx=oa().extendFlat,p9=sgt({editType:"calc",arrayOk:!0,colorEditType:"style"}),ugt=pu.marker,fgt=ugt.line,cgt=Vx({},fgt.width,{dflt:0}),hgt=Vx({width:cgt,editType:"calc"},E0e("marker.line")),vgt=Vx({line:hgt,editType:"calc"},E0e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:lgt,cornerradius:{valType:"any",editType:"calc"}});k0e.exports={x:pu.x,x0:pu.x0,dx:pu.dx,y:pu.y,y0:pu.y0,dy:pu.dy,xperiod:pu.xperiod,yperiod:pu.yperiod,xperiod0:pu.xperiod0,yperiod0:pu.yperiod0,xperiodalignment:pu.xperiodalignment,yperiodalignment:pu.yperiodalignment,xhoverformat:M0e("x"),yhoverformat:M0e("y"),text:pu.text,texttemplate:ogt({editType:"plot"},{keys:S0e.eventDataKeys}),hovertext:pu.hovertext,hovertemplate:agt({},{keys:S0e.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:Vx({},p9,{}),insidetextfont:Vx({},p9,{}),outsidetextfont:Vx({},p9,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:Vx({},pu.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:vgt,offsetgroup:pu.offsetgroup,alignmentgroup:pu.alignmentgroup,selected:{marker:{opacity:pu.selected.marker.opacity,color:pu.selected.marker.color,editType:"style"},textfont:pu.selected.textfont,editType:"style"},unselected:{marker:{opacity:pu.unselected.marker.opacity,color:pu.unselected.marker.color,editType:"style"},textfont:pu.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}});var KL=ne((gar,C0e)=>{"use strict";C0e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}});var JL=ne((yar,R0e)=>{"use strict";var dgt=_i(),L0e=Uh().hasColorscale,P0e=Kf(),pgt=Wt().coercePattern;R0e.exports=function(t,r,i,n,a){var o=i("marker.color",n),s=L0e(t,"marker");s&&P0e(t,r,a,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",dgt.defaultLine),L0e(t,"marker.line")&&P0e(t,r,a,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),pgt(i,"marker.pattern",o,s),i("selected.marker.color"),i("unselected.marker.color")}});var Fd=ne((mar,O0e)=>{"use strict";var D0e=la(),uw=Wt(),I0e=_i(),ggt=wi(),ygt=B2(),mgt=o0(),xgt=JL(),_gt=Dx(),F0e=J0(),QL=uw.coerceFont;function bgt(e,t,r,i){function n(u,f){return uw.coerce(e,t,F0e,u,f)}var a=ygt(e,t,i,n);if(!a){t.visible=!1;return}mgt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");z0e(e,t,i,n,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),xgt(e,t,n,r,i);var s=(t.marker.line||{}).color,l=ggt.getComponentMethod("errorbars","supplyDefaults");l(e,t,s||I0e.defaultLine,{axis:"y"}),l(e,t,s||I0e.defaultLine,{axis:"x",inherit:"y"}),uw.coerceSelectionMarkerOpacity(t,n)}function wgt(e,t){var r,i;function n(s,l){return uw.coerce(i._input,i,F0e,s,l)}for(var a=0;a<e.length;a++)if(i=e[a],i.type==="bar"){r=i._input;var o=n("marker.cornerradius",t.barcornerradius);i.marker&&(i.marker.cornerradius=q0e(o)),t.barmode==="group"&&_gt(r,i,t,n)}}function q0e(e){if(D0e(e)){if(e=+e,e>=0)return e}else if(typeof e=="string"&&(e=e.trim(),e.slice(-1)==="%"&&D0e(e.slice(0,-1))&&(e=+e.slice(0,-1),e>=0)))return e+"%"}function z0e(e,t,r,i,n,a){a=a||{};var o=a.moduleHasSelected!==!1,s=a.moduleHasUnselected!==!1,l=a.moduleHasConstrain!==!1,u=a.moduleHasCliponaxis!==!1,f=a.moduleHasTextangle!==!1,c=a.moduleHasInsideanchor!==!1,h=!!a.hasPathbar,v=Array.isArray(n)||n==="auto",p=v||n==="inside",_=v||n==="outside";if(p||_){var T=QL(i,"textfont",r.font),g=uw.extendFlat({},T),A=e.textfont&&e.textfont.color,b=!A;if(b&&delete g.color,QL(i,"insidetextfont",g),h){var w=uw.extendFlat({},T);b&&delete w.color,QL(i,"pathbar.textfont",w)}_&&QL(i,"outsidetextfont",T),o&&i("selected.textfont.color"),s&&i("unselected.textfont.color"),l&&i("constraintext"),u&&i("cliponaxis"),f&&i("textangle"),i("texttemplate")}p&&c&&i("insidetextanchor")}O0e.exports={supplyDefaults:bgt,crossTraceDefaults:wgt,handleText:z0e,validateCornerradius:q0e}});var g9=ne((xar,B0e)=>{"use strict";var Tgt=wi(),Agt=Xi(),Mgt=Wt(),Sgt=KL(),Egt=Fd().validateCornerradius;B0e.exports=function(e,t,r){function i(p,_){return Mgt.coerce(e,t,Sgt,p,_)}for(var n=!1,a=!1,o=!1,s={},l=i("barmode"),u=0;u<r.length;u++){var f=r[u];if(Tgt.traceIs(f,"bar")&&f.visible)n=!0;else continue;if(l==="group"){var c=f.xaxis+f.yaxis;s[c]&&(o=!0),s[c]=!0}if(f.visible&&f.type==="histogram"){var h=Agt.getFromId({_fullLayout:t},f[f.orientation==="v"?"xaxis":"yaxis"]);h.type!=="category"&&(a=!0)}}if(!n){delete t.barmode;return}l!=="overlay"&&i("barnorm"),i("bargap",a&&!o?0:.2),i("bargroupgap");var v=i("barcornerradius");t.barcornerradius=Egt(v)}});var YM=ne((_ar,N0e)=>{"use strict";var fw=Wt();N0e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;fw.mergeArray(r.text,t,"tx"),fw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){fw.mergeArray(n.opacity,t,"mo",!0),fw.mergeArray(n.color,t,"mc");var a=n.line;a&&(fw.mergeArray(a.color,t,"mlc"),fw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var W0e=ne((bar,Y0e)=>{"use strict";var U0e=Xi(),V0e=u0(),H0e=Uh().hasColorscale,G0e=gv(),kgt=YM(),Cgt=gp();Y0e.exports=function(t,r){var i=U0e.getFromId(t,r.xaxis||"x"),n=U0e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(a=i.makeCalcdata(r,"x",c),s=n.makeCalcdata(r,"y"),l=V0e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y",c),s=i.makeCalcdata(r,"x"),l=V0e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var h=Math.min(o.length,a.length),v=new Array(h),p=0;p<h;p++)v[p]={p:o[p],s:a[p]},u&&(v[p].orig_p=s[p],v[p][f+"End"]=l.ends[p],v[p][f+"Start"]=l.starts[p]),r.ids&&(v[p].id=String(r.ids[p]));return H0e(r,"marker")&&G0e(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),H0e(r,"marker.line")&&G0e(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),kgt(v,r),Cgt(v,r),v}});var yh=ne((war,Z0e)=>{"use strict";var Lgt=Ai(),Pgt=Wt();function Rgt(e,t,r){var i=e._fullLayout,n=i["_"+r+"Text_minsize"];if(n){var a=i.uniformtext.mode==="hide",o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(s){var l=s.transform;if(l){l.scale=a&&l.hide?0:n/l.fontSize;var u=Lgt.select(this).select("text");Pgt.setTransormAndDisplay(u,l)}})}}function Dgt(e,t,r){if(r.uniformtext.mode){var i=X0e(e),n=r.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<n,r[i]=r[i]||1/0,t.hide||(r[i]=Math.min(r[i],Math.max(a,n)))}}function Igt(e,t){var r=X0e(e);t[r]=void 0}function X0e(e){return"_"+e+"Text_minsize"}Z0e.exports={recordMinTextSize:Dgt,clearMinTextSize:Igt,resizeText:Rgt}});var $L=ne(Hx=>{"use strict";var Fgt=la(),qgt=Xf(),j0e=Wt().isArrayOrTypedArray;Hx.coerceString=function(e,t,r){if(typeof t=="string"){if(t||!e.noBlank)return t}else if((typeof t=="number"||t===!0)&&!e.strict)return String(t);return r!==void 0?r:e.dflt};Hx.coerceNumber=function(e,t,r){if(Fgt(t)){t=+t;var i=e.min,n=e.max,a=i!==void 0&&t<i||n!==void 0&&t>n;if(!a)return t}return r!==void 0?r:e.dflt};Hx.coerceColor=function(e,t,r){return qgt(t).isValid()?t:r!==void 0?r:e.dflt};Hx.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),e.values.indexOf(t)!==-1?t:r!==void 0?r:e.dflt};Hx.getValue=function(e,t){var r;return j0e(e)?t<e.length&&(r=e[t]):r=e,r};Hx.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:j0e(e.marker.line.width)?0:e.marker.line.width;return r}});var _p=ne((Aar,oge)=>{"use strict";var WM=Ai(),zgt=_i(),XM=aa(),K0e=Wt(),J0e=wi(),Q0e=yh().resizeText,y9=J0(),Ogt=y9.textfont,Bgt=y9.insidetextfont,Ngt=y9.outsidetextfont,cw=$L();function Ugt(e){var t=WM.select(e).selectAll("g.barlayer").selectAll("g.trace");Q0e(e,t,"bar");var r=t.size(),i=e._fullLayout;t.style("opacity",function(n){return n[0].trace.opacity}).each(function(n){(i.barmode==="stack"&&r>1||i.bargap===0&&i.bargroupgap===0&&!n[0].trace.marker.line.width)&&WM.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(n){var a=WM.select(this),o=n[0].trace;$0e(a,o,e)}),J0e.getComponentMethod("errorbars","style")(t)}function $0e(e,t,r){XM.pointStyle(e.selectAll("path"),t,r),ege(e,t,r)}function ege(e,t,r){e.selectAll("text").each(function(i){var n=WM.select(this),a=K0e.ensureUniformFontSize(r,tge(n,i,t,r));XM.font(n,a)})}function Vgt(e,t,r){var i=t[0].trace;i.selectedpoints?Hgt(r,i,e):($0e(r,i,e),J0e.getComponentMethod("errorbars","style")(r))}function Hgt(e,t,r){XM.selectedPointStyle(e.selectAll("path"),t),Ggt(e.selectAll("text"),t,r)}function Ggt(e,t,r){e.each(function(i){var n=WM.select(this),a;if(i.selected){a=K0e.ensureUniformFontSize(r,tge(n,i,t,r));var o=t.selected.textfont&&t.selected.textfont.color;o&&(a.color=o),XM.font(n,a)}else XM.selectedTextStyle(n,t)})}function tge(e,t,r,i){var n=i._fullLayout.font,a=r.textfont;if(e.classed("bartext-inside")){var o=age(t,r);a=nge(r,t.i,n,o)}else e.classed("bartext-outside")&&(a=ige(r,t.i,n));return a}function rge(e,t,r){return m9(Ogt,e.textfont,t,r)}function nge(e,t,r,i){var n=rge(e,t,r),a=e._input.textfont===void 0||e._input.textfont.color===void 0||Array.isArray(e.textfont.color)&&e.textfont.color[t]===void 0;return a&&(n={color:zgt.contrast(i),family:n.family,size:n.size}),m9(Bgt,e.insidetextfont,t,n)}function ige(e,t,r){var i=rge(e,t,r);return m9(Ngt,e.outsidetextfont,t,i)}function m9(e,t,r,i){t=t||{};var n=cw.getValue(t.family,r),a=cw.getValue(t.size,r),o=cw.getValue(t.color,r);return{family:cw.coerceString(e.family,n,i.family),size:cw.coerceNumber(e.size,a,i.size),color:cw.coerceColor(e.color,o,i.color)}}function age(e,t){return t.type==="waterfall"?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}oge.exports={style:Ugt,styleTextPoints:ege,styleOnSelect:Vgt,getInsideTextFont:nge,getOutsideTextFont:ige,getBarColor:age,resizeText:Q0e}});var Yx=ne((Mar,dge)=>{"use strict";var eP=Ai(),tP=la(),gc=Wt(),Ygt=Es(),Wgt=_i(),Pm=aa(),Xgt=wi(),rP=Xi().tickText,sge=yh(),Zgt=sge.recordMinTextSize,jgt=sge.clearMinTextSize,x9=_p(),hw=$L(),Kgt=Ux(),lge=J0(),Jgt=lge.text,Qgt=lge.textposition,$gt=td().appendArrayPointValue,Zh=Kgt.TEXTPAD;function eyt(e){return e.id}function tyt(e){if(e.ids)return eyt}function _9(e){return(e>0)-(e<0)}function Q0(e,t){return e<t?1:-1}function ryt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),i?[n,a]:[a,n]}function uge(e,t,r,i){if(!t.uniformtext.mode&&fge(r)){var n;return i&&(n=i()),e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else return e}function fge(e){return e&&e.duration>0}function nyt(e,t,r,i,n,a){var o=t.xaxis,s=t.yaxis,l=e._fullLayout,u=e._context.staticPlot;n||(n={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},jgt("bar",l));var f=gc.makeTraceGroups(i,r,"trace bars").each(function(c){var h=eP.select(this),v=c[0].trace,p=c[0].t,_=v.type==="waterfall",T=v.type==="funnel",g=v.type==="histogram",A=v.type==="bar",b=A||T,w=0;_&&v.connector.visible&&v.connector.mode==="between"&&(w=v.connector.line.width/2);var k=v.orientation==="h",x=fge(n),E=gc.ensureSingle(h,"g","points"),M=tyt(v),d=E.selectAll("g.point").data(gc.identity,M);d.enter().append("g").classed("point",!0),d.exit().remove(),d.each(function(S,P){var D=eP.select(this),z=ryt(S,o,s,k),O=z[0][0],V=z[0][1],B=z[1][0],F=z[1][1],N=(k?V-O:F-B)===0;N&&b&&hw.getLineWidth(v,S)&&(N=!1),N||(N=!tP(O)||!tP(V)||!tP(B)||!tP(F)),S.isBlank=N,N&&(k?V=O:F=B),w&&!N&&(k?(O-=Q0(O,V)*w,V+=Q0(O,V)*w):(B-=Q0(B,F)*w,F+=Q0(B,F)*w));var Z,J;if(v.type==="waterfall"){if(!N){var re=v[S.dir].marker;Z=re.line.width,J=re.color}}else Z=hw.getLineWidth(v,S),J=S.mc||v.marker.color;function le(Se){var je=eP.round(Z/2%1,2);return n.gap===0&&n.groupgap===0?eP.round(Math.round(Se)-je,2):Se}function fe(Se,je,ht){return ht&&Se===je?Se:Math.abs(Se-je)>=2?le(Se):Se>je?Math.ceil(Se):Math.floor(Se)}var K=Wgt.opacity(J),X=K<1||Z>.01?le:fe;e._context.staticPlot||(O=X(O,V,k),V=X(V,O,k),B=X(B,F,!k),F=X(F,B,!k));var ae=k?o.c2p:s.c2p,oe;S.s0>0?oe=S._sMax:S.s0<0?oe=S._sMin:oe=S.s1>0?S._sMax:S._sMin;function _e(Se,je){if(!Se)return 0;var ht=Math.abs(k?F-B:V-O),nt=Math.abs(k?V-O:F-B),lt=X(Math.abs(ae(oe,!0)-ae(0,!0))),rt=S.hasB?Math.min(ht/2,nt/2):Math.min(ht/2,lt),Xe;if(je==="%"){var ft=Math.min(50,Se);Xe=ht*(ft/100)}else Xe=Se;return X(Math.max(Math.min(Xe,rt),0))}var be=A||g?_e(p.cornerradiusvalue,p.cornerradiusform):0,he,ie,ye="M"+O+","+B+"V"+F+"H"+V+"V"+B+"Z",ue=0;if(be&&S.s){var Ae=_9(S.s0)===0||_9(S.s)===_9(S.s0)?S.s1:S.s0;if(ue=X(S.hasB?0:Math.abs(ae(oe,!0)-ae(Ae,!0))),ue<be){var Re=Q0(O,V),ze=Q0(B,F),et=Re===-ze?1:0;if(k)if(S.hasB)he="M"+(O+be*Re)+","+B+"A "+be+","+be+" 0 0 "+et+" "+O+","+(B+be*ze)+"V"+(F-be*ze)+"A "+be+","+be+" 0 0 "+et+" "+(O+be*Re)+","+F+"H"+(V-be*Re)+"A "+be+","+be+" 0 0 "+et+" "+V+","+(F-be*ze)+"V"+(B+be*ze)+"A "+be+","+be+" 0 0 "+et+" "+(V-be*Re)+","+B+"Z";else{ie=Math.abs(V-O)+ue;var Le=ie<be?be-Math.sqrt(ie*(2*be-ie)):0,Ie=ue>0?Math.sqrt(ue*(2*be-ue)):0,dt=Re>0?Math.max:Math.min;he="M"+O+","+B+"V"+(F-Le*ze)+"H"+dt(V-(be-ue)*Re,O)+"A "+be+","+be+" 0 0 "+et+" "+V+","+(F-be*ze-Ie)+"V"+(B+be*ze+Ie)+"A "+be+","+be+" 0 0 "+et+" "+dt(V-(be-ue)*Re,O)+","+(B+Le*ze)+"Z"}else if(S.hasB)he="M"+(O+be*Re)+","+B+"A "+be+","+be+" 0 0 "+et+" "+O+","+(B+be*ze)+"V"+(F-be*ze)+"A "+be+","+be+" 0 0 "+et+" "+(O+be*Re)+","+F+"H"+(V-be*Re)+"A "+be+","+be+" 0 0 "+et+" "+V+","+(F-be*ze)+"V"+(B+be*ze)+"A "+be+","+be+" 0 0 "+et+" "+(V-be*Re)+","+B+"Z";else{ie=Math.abs(F-B)+ue;var ct=ie<be?be-Math.sqrt(ie*(2*be-ie)):0,Ke=ue>0?Math.sqrt(ue*(2*be-ue)):0,_t=ze>0?Math.max:Math.min;he="M"+(O+ct*Re)+","+B+"V"+_t(F-(be-ue)*ze,B)+"A "+be+","+be+" 0 0 "+et+" "+(O+be*Re-Ke)+","+F+"H"+(V-be*Re+Ke)+"A "+be+","+be+" 0 0 "+et+" "+(V-ct*Re)+","+_t(F-(be-ue)*ze,B)+"V"+B+"Z"}}else he=ye}else he=ye;var zt=uge(gc.ensureSingle(D,"path"),l,n,a);if(zt.style("vector-effect",u?"none":"non-scaling-stroke").attr("d",isNaN((V-O)*(F-B))||N&&e._context.staticPlot?"M0,0Z":he).call(Pm.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&x){var Et=Pm.makePointStyleFns(v);Pm.singlePointStyle(S,zt,v,Et,e)}iyt(e,t,D,c,P,O,V,B,F,be,ue,n,a),t.layerClipId&&Pm.hideOutsideRangePoint(S,D.select("text"),o,s,v.xcalendar,v.ycalendar)});var C=v.cliponaxis===!1;Pm.setClipUrl(h,C?null:t.layerClipId,e)});Xgt.getComponentMethod("errorbars","plot")(e,f,t,n)}function iyt(e,t,r,i,n,a,o,s,l,u,f,c,h){var v=t.xaxis,p=t.yaxis,_=e._fullLayout,T;function g(ie,ye,ue){var Ae=gc.ensureSingle(ie,"text").text(ye).attr({class:"bartext bartext-"+T,"text-anchor":"middle","data-notex":1}).call(Pm.font,ue).call(Ygt.convertToTspans,e);return Ae}var A=i[0].trace,b=A.orientation==="h",w=syt(_,i,n,v,p);T=lyt(A,n);var k=c.mode==="stack"||c.mode==="relative",x=i[n],E=!k||x._outmost,M=x.hasB,d=u&&u-f>Zh;if(!w||T==="none"||(x.isBlank||a===o||s===l)&&(T==="auto"||T==="inside")){r.select("text").remove();return}var C=_.font,S=x9.getBarColor(i[n],A),P=x9.getInsideTextFont(A,n,C,S),D=x9.getOutsideTextFont(A,n,C),z=A.insidetextanchor||"end",O=r.datum();b?v.type==="log"&&O.s0<=0&&(v.range[0]<v.range[1]?a=0:a=v._length):p.type==="log"&&O.s0<=0&&(p.range[0]<p.range[1]?s=p._length:s=0);var V=Math.abs(o-a),B=Math.abs(l-s),F=V-2*Zh,N=B-2*Zh,Z,J,re,le,fe;if(T==="outside"&&!E&&!x.hasB&&(T="inside"),T==="auto")if(E){T="inside",fe=gc.ensureUniformFontSize(e,P),Z=g(r,w,fe),J=Pm.bBox(Z.node()),re=J.width,le=J.height;var K=re>0&&le>0,X;d?M?X=Gx(F-2*u,N,re,le,b)||Gx(F,N-2*u,re,le,b):b?X=Gx(F-(u-f),N,re,le,b)||Gx(F,N-2*(u-f),re,le,b):X=Gx(F,N-(u-f),re,le,b)||Gx(F-2*(u-f),N,re,le,b):X=Gx(F,N,re,le,b),K&&X?T="inside":(T="outside",Z.remove(),Z=null)}else T="inside";if(!Z){fe=gc.ensureUniformFontSize(e,T==="outside"?D:P),Z=g(r,w,fe);var ae=Z.attr("transform");if(Z.attr("transform",""),J=Pm.bBox(Z.node()),re=J.width,le=J.height,Z.attr("transform",ae),re<=0||le<=0){Z.remove();return}}var oe=A.textangle,_e,be;T==="outside"?(be=A.constraintext==="both"||A.constraintext==="outside",_e=oyt(a,o,s,l,J,{isHorizontal:b,constrained:be,angle:oe})):(be=A.constraintext==="both"||A.constraintext==="inside",_e=vge(a,o,s,l,J,{isHorizontal:b,constrained:be,angle:oe,anchor:z,hasB:M,r:u,overhead:f})),_e.fontSize=fe.size,Zgt(A.type==="histogram"?"bar":A.type,_e,_),x.transform=_e;var he=uge(Z,_,c,h);gc.setTransormAndDisplay(he,_e)}function Gx(e,t,r,i,n){if(e<0||t<0)return!1;var a=r<=e&&i<=t,o=r<=t&&i<=e,s=n?e>=r*(t/i):t>=i*(e/r);return a||o||s}function cge(e){return e==="auto"?0:e}function hge(e,t){var r=Math.PI/180*t,i=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*i,y:e.width*i+e.height*n}}function vge(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=a.anchor,f=u==="end",c=u==="start",h=a.leftToRight||0,v=(h+1)/2,p=1-v,_=a.hasB,T=a.r,g=a.overhead,A=n.width,b=n.height,w=Math.abs(t-e),k=Math.abs(i-r),x=w>2*Zh&&k>2*Zh?Zh:0;w-=2*x,k-=2*x;var E=cge(l);l==="auto"&&!(A<=w&&b<=k)&&(A>w||b>k)&&(!(A>k||b>w)||A<b!=w<k)&&(E+=90);var M=hge(n,E),d,C;if(T&&T-g>Zh){var S=ayt(e,t,r,i,M,T,g,o,_);d=S.scale,C=S.pad}else d=1,s&&(d=Math.min(1,w/M.x,k/M.y)),C=0;var P=n.left*p+n.right*v,D=(n.top+n.bottom)/2,z=(e+Zh)*p+(t-Zh)*v,O=(r+i)/2,V=0,B=0;if(c||f){var F=(o?M.x:M.y)/2;T&&(f||_)&&(x+=C);var N=o?Q0(e,t):Q0(r,i);o?c?(z=e+N*x,V=-N*F):(z=t-N*x,V=N*F):c?(O=r+N*x,B=-N*F):(O=i-N*x,B=N*F)}return{textX:P,textY:D,targetX:z,targetY:O,anchorX:V,anchorY:B,scale:d,rotate:E}}function ayt(e,t,r,i,n,a,o,s,l){var u=Math.max(0,Math.abs(t-e)-2*Zh),f=Math.max(0,Math.abs(i-r)-2*Zh),c=a-Zh,h=o?c-Math.sqrt(c*c-(c-o)*(c-o)):c,v=l?c*2:s?c-o:2*h,p=l?c*2:s?2*h:c-o,_,T,g,A,b;return n.y/n.x>=f/(u-v)?A=f/n.y:n.y/n.x<=(f-p)/u?A=u/n.x:!l&&s?(_=n.x*n.x+n.y*n.y/4,T=-2*n.x*(u-c)-n.y*(f/2-c),g=(u-c)*(u-c)+(f/2-c)*(f/2-c)-c*c,A=(-T+Math.sqrt(T*T-4*_*g))/(2*_)):l?(_=(n.x*n.x+n.y*n.y)/4,T=-n.x*(u/2-c)-n.y*(f/2-c),g=(u/2-c)*(u/2-c)+(f/2-c)*(f/2-c)-c*c,A=(-T+Math.sqrt(T*T-4*_*g))/(2*_)):(_=n.x*n.x/4+n.y*n.y,T=-n.x*(u/2-c)-2*n.y*(f-c),g=(u/2-c)*(u/2-c)+(f-c)*(f-c)-c*c,A=(-T+Math.sqrt(T*T-4*_*g))/(2*_)),A=Math.min(1,A),s?b=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(f-n.y*A)/2)*(c-(f-n.y*A)/2)))-o):b=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(u-n.x*A)/2)*(c-(u-n.x*A)/2)))-o),{scale:A,pad:b}}function oyt(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=n.width,f=n.height,c=Math.abs(t-e),h=Math.abs(i-r),v;o?v=h>2*Zh?Zh:0:v=c>2*Zh?Zh:0;var p=1;s&&(p=o?Math.min(1,h/f):Math.min(1,c/u));var _=cge(l),T=hge(n,_),g=(o?T.x:T.y)/2,A=(n.left+n.right)/2,b=(n.top+n.bottom)/2,w=(e+t)/2,k=(r+i)/2,x=0,E=0,M=o?Q0(t,e):Q0(r,i);return o?(w=t-M*v,x=M*g):(k=i+M*v,E=-M*g),{textX:A,textY:b,targetX:w,targetY:k,anchorX:x,anchorY:E,scale:p,rotate:_}}function syt(e,t,r,i,n){var a=t[0].trace,o=a.texttemplate,s;return o?s=uyt(e,t,r,i,n):a.textinfo?s=fyt(t,r,i,n):s=hw.getValue(a.text,r),hw.coerceString(Jgt,s)}function lyt(e,t){var r=hw.getValue(e.textposition,t);return hw.coerceEnumerated(Qgt,r)}function uyt(e,t,r,i,n){var a=t[0].trace,o=gc.castOption(a,r,"texttemplate");if(!o)return"";var s=a.type==="histogram",l=a.type==="waterfall",u=a.type==="funnel",f=a.orientation==="h",c,h,v,p;f?(c="y",h=n,v="x",p=i):(c="x",h=i,v="y",p=n);function _(x){return rP(h,h.c2l(x),!0).text}function T(x){return rP(p,p.c2l(x),!0).text}var g=t[r],A={};A.label=g.p,A.labelLabel=A[c+"Label"]=_(g.p);var b=gc.castOption(a,g.i,"text");(b===0||b)&&(A.text=b),A.value=g.s,A.valueLabel=A[v+"Label"]=T(g.s);var w={};$gt(w,a,g.i),(s||w.x===void 0)&&(w.x=f?A.value:A.label),(s||w.y===void 0)&&(w.y=f?A.label:A.value),(s||w.xLabel===void 0)&&(w.xLabel=f?A.valueLabel:A.labelLabel),(s||w.yLabel===void 0)&&(w.yLabel=f?A.labelLabel:A.valueLabel),l&&(A.delta=+g.rawS||g.s,A.deltaLabel=T(A.delta),A.final=g.v,A.finalLabel=T(A.final),A.initial=A.final-A.delta,A.initialLabel=T(A.initial)),u&&(A.value=g.s,A.valueLabel=T(A.value),A.percentInitial=g.begR,A.percentInitialLabel=gc.formatPercent(g.begR),A.percentPrevious=g.difR,A.percentPreviousLabel=gc.formatPercent(g.difR),A.percentTotal=g.sumR,A.percenTotalLabel=gc.formatPercent(g.sumR));var k=gc.castOption(a,g.i,"customdata");return k&&(A.customdata=k),gc.texttemplateString(o,A,e._d3locale,w,A,a._meta||{})}function fyt(e,t,r,i){var n=e[0].trace,a=n.orientation==="h",o=n.type==="waterfall",s=n.type==="funnel";function l(k){var x=a?i:r;return rP(x,k,!0).text}function u(k){var x=a?r:i;return rP(x,+k,!0).text}var f=n.textinfo,c=e[t],h=f.split("+"),v=[],p,_=function(k){return h.indexOf(k)!==-1};if(_("label")&&v.push(l(e[t].p)),_("text")&&(p=gc.castOption(n,c.i,"text"),(p===0||p)&&v.push(p)),o){var T=+c.rawS||c.s,g=c.v,A=g-T;_("initial")&&v.push(u(A)),_("delta")&&v.push(u(T)),_("final")&&v.push(u(g))}if(s){_("value")&&v.push(u(c.s));var b=0;_("percent initial")&&b++,_("percent previous")&&b++,_("percent total")&&b++;var w=b>1;_("percent initial")&&(p=gc.formatPercent(c.begR),w&&(p+=" of initial"),v.push(p)),_("percent previous")&&(p=gc.formatPercent(c.difR),w&&(p+=" of previous"),v.push(p)),_("percent total")&&(p=gc.formatPercent(c.sumR),w&&(p+=" of total"),v.push(p))}return v.join("<br>")}dge.exports={plot:nyt,toMoveInsideBar:vge}});var vw=ne((Sar,mge)=>{"use strict";var ZM=Ol(),cyt=wi(),pge=_i(),hyt=Wt().fillText,vyt=$L().getLineWidth,b9=Xi().hoverLabelText,dyt=$a().BADNUM;function pyt(e,t,r,i,n){var a=gge(e,t,r,i,n);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=yge(s,l),cyt.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}}function gge(e,t,r,i,n){var a=e.cd,o=a[0].trace,s=a[0].t,l=i==="closest",u=o.type==="waterfall",f=e.maxHoverDistance,c=e.maxSpikeDistance,h,v,p,_,T,g,A;o.orientation==="h"?(h=r,v=t,p="y",_="x",T=O,g=P):(h=t,v=r,p="x",_="y",g=O,T=P);var b=o[p+"period"],w=l||b;function k(X){return E(X,-1)}function x(X){return E(X,1)}function E(X,ae){var oe=X.w;return X[p]+ae*oe/2}function M(X){return X[p+"End"]-X[p+"Start"]}var d=l?k:b?function(X){return X.p-M(X)/2}:function(X){return Math.min(k(X),X.p-s.bardelta/2)},C=l?x:b?function(X){return X.p+M(X)/2}:function(X){return Math.max(x(X),X.p+s.bardelta/2)};function S(X,ae,oe){return n.finiteRange&&(oe=0),ZM.inbox(X-h,ae-h,oe+Math.min(1,Math.abs(ae-X)/A)-1)}function P(X){return S(d(X),C(X),f)}function D(X){return S(k(X),x(X),c)}function z(X){var ae=X[_];if(u){var oe=Math.abs(X.rawS)||0;v>0?ae+=oe:v<0&&(ae-=oe)}return ae}function O(X){var ae=v,oe=X.b,_e=z(X);return ZM.inbox(oe-ae,_e-ae,f+(_e-ae)/(_e-oe)-1)}function V(X){var ae=v,oe=X.b,_e=z(X);return ZM.inbox(oe-ae,_e-ae,c+(_e-ae)/(_e-oe)-1)}var B=e[p+"a"],F=e[_+"a"];A=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function N(X){return(T(X)+g(X))/2}var Z=ZM.getDistanceFunction(i,T,g,N);if(ZM.getClosest(a,Z,e),e.index!==!1&&a[e.index].p!==dyt){w||(d=function(X){return Math.min(k(X),X.p-s.bargroupwidth/2)},C=function(X){return Math.max(x(X),X.p+s.bargroupwidth/2)});var J=e.index,re=a[J],le=o.base?re.b+re.s:re.s;e[_+"0"]=e[_+"1"]=F.c2p(re[_],!0),e[_+"LabelVal"]=le;var fe=s.extents[s.extents.round(re.p)];e[p+"0"]=B.c2p(l?d(re):fe[0],!0),e[p+"1"]=B.c2p(l?C(re):fe[1],!0);var K=re.orig_p!==void 0;return e[p+"LabelVal"]=K?re.orig_p:re.p,e.labelLabel=b9(B,e[p+"LabelVal"],o[p+"hoverformat"]),e.valueLabel=b9(F,e[_+"LabelVal"],o[_+"hoverformat"]),e.baseLabel=b9(F,re.b,o[_+"hoverformat"]),e.spikeDistance=(V(re)+D(re))/2,e[p+"Spike"]=B.c2p(re.p,!0),hyt(re,o,e),e.hovertemplate=o.hovertemplate,e}}function yge(e,t){var r=t.mcc||e.marker.color,i=t.mlcc||e.marker.line.color,n=vyt(e,t);if(pge.opacity(r))return r;if(pge.opacity(i)&&n)return i}mge.exports={hoverPoints:pyt,hoverOnBars:gge,getTraceColor:yge}});var _ge=ne((Ear,xge)=>{"use strict";xge.exports=function(t,r,i){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),i.orientation==="h"?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}});var dw=ne((kar,bge)=>{"use strict";bge.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=i[0].trace,s=o.type==="funnel",l=o.orientation==="h",u=[],f;if(r===!1)for(f=0;f<i.length;f++)i[f].selected=0;else for(f=0;f<i.length;f++){var c=i[f],h="ct"in c?c.ct:gyt(c,n,a,l,s);r.contains(h,!1,f,t)?(u.push({pointNumber:f,x:n.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return u};function gyt(e,t,r,i,n){var a=t.c2p(i?e.s0:e.p0,!0),o=t.c2p(i?e.s1:e.p1,!0),s=r.c2p(i?e.p0:e.s0,!0),l=r.c2p(i?e.p1:e.s1,!0);return n?[(a+o)/2,(s+l)/2]:i?[o,(s+l)/2]:[(a+o)/2,l]}});var Tge=ne((Car,wge)=>{"use strict";wge.exports={attributes:J0(),layoutAttributes:KL(),supplyDefaults:Fd().supplyDefaults,crossTraceDefaults:Fd().crossTraceDefaults,supplyLayoutDefaults:g9(),calc:W0e(),crossTraceCalc:Ix().crossTraceCalc,colorbar:ph(),arraysToCalcdata:YM(),plot:Yx().plot,style:_p().style,styleOnSelect:_p().styleOnSelect,hoverPoints:vw().hoverPoints,eventData:_ge(),selectPoints:dw(),moduleType:"trace",name:"bar",basePlotModule:vu(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}});var Mge=ne((Lar,Age)=>{"use strict";Age.exports=Tge()});var jM=ne((Par,Cge)=>{"use strict";var yyt=Y0(),y0=cu(),Sge=J0(),myt=Ku(),Ege=kl().axisHoverFormat,xyt=Ba().hovertemplateAttrs,Jg=oa().extendFlat,pw=y0.marker,kge=pw.line;Cge.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:y0.xperiod,yperiod:y0.yperiod,xperiod0:y0.xperiod0,yperiod0:y0.yperiod0,xperiodalignment:y0.xperiodalignment,yperiodalignment:y0.yperiodalignment,xhoverformat:Ege("x"),yhoverformat:Ege("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:Jg({},pw.symbol,{arrayOk:!1,editType:"plot"}),opacity:Jg({},pw.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:Jg({},pw.angle,{arrayOk:!1,editType:"calc"}),size:Jg({},pw.size,{arrayOk:!1,editType:"calc"}),color:Jg({},pw.color,{arrayOk:!1,editType:"style"}),line:{color:Jg({},kge.color,{arrayOk:!1,dflt:myt.defaultLine,editType:"style"}),width:Jg({},kge.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:yyt(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:Sge.offsetgroup,alignmentgroup:Sge.alignmentgroup,selected:{marker:y0.selected.marker,editType:"style"},unselected:{marker:y0.unselected.marker,editType:"style"},text:Jg({},y0.text,{}),hovertext:Jg({},y0.hovertext,{}),hovertemplate:xyt({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}});var KM=ne((Rar,Lge)=>{"use strict";Lge.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}});var QM=ne((Dar,Ige)=>{"use strict";var bp=Wt(),_yt=wi(),byt=_i(),wyt=o0(),Tyt=Dx(),Pge=x2(),JM=jM();function Ayt(e,t,r,i){function n(p,_){return bp.coerce(e,t,JM,p,_)}if(Rge(e,t,n,i),t.visible!==!1){wyt(e,t,i,n),n("xhoverformat"),n("yhoverformat");var a=t._hasPreCompStats;a&&(n("lowerfence"),n("upperfence")),n("line.color",(e.marker||{}).color||r),n("line.width"),n("fillcolor",byt.addOpacity(t.line.color,.5));var o=!1;if(a){var s=n("mean"),l=n("sd");s&&s.length&&(o=!0,l&&l.length&&(o="sd"))}n("whiskerwidth");var u=n("sizemode"),f;u==="quartiles"&&(f=n("boxmean",o)),n("showwhiskers",u==="quartiles"),(u==="sd"||f==="sd")&&n("sdmultiple"),n("width"),n("quartilemethod");var c=!1;if(a){var h=n("notchspan");h&&h.length&&(c=!0)}else bp.validate(e.notchwidth,JM.notchwidth)&&(c=!0);var v=n("notched",c);v&&n("notchwidth"),Dge(e,t,n,{prefix:"box"})}}function Rge(e,t,r,i){function n(C){var S=0;return C&&C.length&&(S+=1,bp.isArrayOrTypedArray(C[0])&&C[0].length&&(S+=1)),S}function a(C){return bp.validate(e[C],JM[C])}var o=r("y"),s=r("x"),l;if(t.type==="box"){var u=r("q1"),f=r("median"),c=r("q3");t._hasPreCompStats=u&&u.length&&f&&f.length&&c&&c.length,l=Math.min(bp.minRowLength(u),bp.minRowLength(f),bp.minRowLength(c))}var h=n(o),v=n(s),p=h&&bp.minRowLength(o),_=v&&bp.minRowLength(s),T=i.calendar,g={autotypenumbers:i.autotypenumbers},A,b;if(t._hasPreCompStats)switch(String(v)+String(h)){case"00":var w=a("x0")||a("dx"),k=a("y0")||a("dy");k&&!w?A="h":A="v",b=l;break;case"10":A="v",b=Math.min(l,_);break;case"20":A="h",b=Math.min(l,s.length);break;case"01":A="h",b=Math.min(l,p);break;case"02":A="v",b=Math.min(l,o.length);break;case"12":A="v",b=Math.min(l,_,o.length);break;case"21":A="h",b=Math.min(l,s.length,p);break;case"11":b=0;break;case"22":var x=!1,E;for(E=0;E<s.length;E++)if(Pge(s[E],T,g)==="category"){x=!0;break}if(x)A="v",b=Math.min(l,_,o.length);else{for(E=0;E<o.length;E++)if(Pge(o[E],T,g)==="category"){x=!0;break}x?(A="h",b=Math.min(l,s.length,p)):(A="v",b=Math.min(l,_,o.length))}break}else h>0?(A="v",v>0?b=Math.min(_,p):b=Math.min(p)):v>0?(A="h",b=Math.min(_)):b=0;if(!b){t.visible=!1;return}t._length=b;var M=r("orientation",A);t._hasPreCompStats?M==="v"&&v===0?(r("x0",0),r("dx",1)):M==="h"&&h===0&&(r("y0",0),r("dy",1)):M==="v"&&v===0?r("x0"):M==="h"&&h===0&&r("y0");var d=_yt.getComponentMethod("calendars","handleTraceDefaults");d(e,t,["x","y"],i)}function Dge(e,t,r,i){var n=i.prefix,a=bp.coerce2(e,t,JM,"marker.outliercolor"),o=r("marker.line.outliercolor"),s="outliers";t._hasPreCompStats?s="all":(a||o)&&(s="suspectedoutliers");var l=r(n+"points",s);l?(r("jitter",l==="all"?.3:0),r("pointpos",l==="all"?-1.5:0),r("marker.symbol"),r("marker.opacity"),r("marker.size"),r("marker.angle"),r("marker.color",t.line.color),r("marker.line.color"),r("marker.line.width"),l==="suspectedoutliers"&&(r("marker.line.outliercolor",t.marker.color),r("marker.line.outlierwidth")),r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size"),r("text"),r("hovertext")):delete t.marker;var u=r("hoveron");(u==="all"||u.indexOf("points")!==-1)&&r("hovertemplate"),bp.coerceSelectionMarkerOpacity(t,r)}function Myt(e,t){var r,i;function n(s){return bp.coerce(i._input,i,JM,s)}for(var a=0;a<e.length;a++){i=e[a];var o=i.type;(o==="box"||o==="violin")&&(r=i._input,t[o+"mode"]==="group"&&Tyt(r,i,t,n))}}Ige.exports={supplyDefaults:Ayt,crossTraceDefaults:Myt,handleSampleDefaults:Rge,handlePointsDefaults:Dge}});var nP=ne((Iar,qge)=>{"use strict";var Syt=wi(),Eyt=Wt(),kyt=KM();function Fge(e,t,r,i,n){for(var a=n+"Layout",o=!1,s=0;s<r.length;s++){var l=r[s];if(Syt.traceIs(l,a)){o=!0;break}}o&&(i(n+"mode"),i(n+"gap"),i(n+"groupgap"))}function Cyt(e,t,r){function i(n,a){return Eyt.coerce(e,t,kyt,n,a)}Fge(e,t,r,i,"box")}qge.exports={supplyLayoutDefaults:Cyt,_supply:Fge}});var A9=ne((Far,Yge)=>{"use strict";var T9=la(),iP=Xi(),Lyt=u0(),qu=Wt(),qd=$a().BADNUM,Qg=qu._;Yge.exports=function(t,r){var i=t._fullLayout,n=iP.getFromId(t,r.xaxis||"x"),a=iP.getFromId(t,r.yaxis||"y"),o=[],s=r.type==="violin"?"_numViolins":"_numBoxes",l,u,f,c,h,v,p;r.orientation==="h"?(f=n,c="x",h=a,v="y",p=!!r.yperiodalignment):(f=a,c="y",h=n,v="x",p=!!r.xperiodalignment);var _=Pyt(r,v,h,i[s]),T=_[0],g=_[1],A=qu.distinctVals(T,h),b=A.vals,w=A.minDiff/2,k,x,E,M,d,C,S=(r.boxpoints||r.points)==="all"?qu.identity:function(et){return et.v<k.lf||et.v>k.uf};if(r._hasPreCompStats){var P=r[c],D=function(et){return f.d2c((r[et]||[])[l])},z=1/0,O=-1/0;for(l=0;l<r._length;l++){var V=T[l];if(T9(V)){if(k={},k.pos=k[v]=V,p&&g&&(k.orig_p=g[l]),k.q1=D("q1"),k.med=D("median"),k.q3=D("q3"),x=[],P&&qu.isArrayOrTypedArray(P[l]))for(u=0;u<P[l].length;u++)C=f.d2c(P[l][u]),C!==qd&&(d={v:C,i:[l,u]},zge(d,r,[l,u]),x.push(d));if(k.pts=x.sort(Oge),E=k[c]=x.map(Bge),M=E.length,k.med!==qd&&k.q1!==qd&&k.q3!==qd&&k.med>=k.q1&&k.q3>=k.med){var B=D("lowerfence");k.lf=B!==qd&&B<=k.q1?B:Nge(k,E,M);var F=D("upperfence");k.uf=F!==qd&&F>=k.q3?F:Uge(k,E,M);var N=D("mean");k.mean=N!==qd?N:M?qu.mean(E,M):(k.q1+k.q3)/2;var Z=D("sd");k.sd=N!==qd&&Z>=0?Z:M?qu.stdev(E,M,k.mean):k.q3-k.q1,k.lo=Vge(k),k.uo=Hge(k);var J=D("notchspan");J=J!==qd&&J>0?J:Gge(k,M),k.ln=k.med-J,k.un=k.med+J;var re=k.lf,le=k.uf;r.boxpoints&&E.length&&(re=Math.min(re,E[0]),le=Math.max(le,E[M-1])),r.notched&&(re=Math.min(re,k.ln),le=Math.max(le,k.un)),k.min=re,k.max=le}else{qu.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+k.q1,"median = "+k.med,"q3 = "+k.q3].join(`
`));var fe;k.med!==qd?fe=k.med:k.q1!==qd?k.q3!==qd?fe=(k.q1+k.q3)/2:fe=k.q1:k.q3!==qd?fe=k.q3:fe=0,k.med=fe,k.q1=k.q3=fe,k.lf=k.uf=fe,k.mean=k.sd=fe,k.ln=k.un=fe,k.min=k.max=fe}z=Math.min(z,k.min),O=Math.max(O,k.max),k.pts2=x.filter(S),o.push(k)}}r._extremes[f._id]=iP.findExtremes(f,[z,O],{padded:!0})}else{var K=f.makeCalcdata(r,c),X=Ryt(b,w),ae=b.length,oe=Dyt(ae);for(l=0;l<r._length;l++)if(C=K[l],!!T9(C)){var _e=qu.findBin(T[l],X);_e>=0&&_e<ae&&(d={v:C,i:l},zge(d,r,l),oe[_e].push(d))}var be=1/0,he=-1/0,ie=r.quartilemethod,ye=ie==="exclusive",ue=ie==="inclusive";for(l=0;l<ae;l++)if(oe[l].length>0){if(k={},k.pos=k[v]=b[l],x=k.pts=oe[l].sort(Oge),E=k[c]=x.map(Bge),M=E.length,k.min=E[0],k.max=E[M-1],k.mean=qu.mean(E,M),k.sd=qu.stdev(E,M,k.mean)*r.sdmultiple,k.med=qu.interp(E,.5),M%2&&(ye||ue)){var Ae,Re;ye?(Ae=E.slice(0,M/2),Re=E.slice(M/2+1)):ue&&(Ae=E.slice(0,M/2+1),Re=E.slice(M/2)),k.q1=qu.interp(Ae,.5),k.q3=qu.interp(Re,.5)}else k.q1=qu.interp(E,.25),k.q3=qu.interp(E,.75);k.lf=Nge(k,E,M),k.uf=Uge(k,E,M),k.lo=Vge(k),k.uo=Hge(k);var ze=Gge(k,M);k.ln=k.med-ze,k.un=k.med+ze,be=Math.min(be,k.ln),he=Math.max(he,k.un),k.pts2=x.filter(S),o.push(k)}r.notched&&qu.isTypedArray(K)&&(K=Array.from(K)),r._extremes[f._id]=iP.findExtremes(f,r.notched?K.concat([be,he]):K,{padded:!0})}return Iyt(o,r),o.length>0?(o[0].t={num:i[s],dPos:w,posLetter:v,valLetter:c,labels:{med:Qg(t,"median:"),min:Qg(t,"min:"),q1:Qg(t,"q1:"),q3:Qg(t,"q3:"),max:Qg(t,"max:"),mean:r.boxmean==="sd"||r.sizemode==="sd"?Qg(t,"mean \xB1 \u03C3:").replace("\u03C3",r.sdmultiple===1?"\u03C3":r.sdmultiple+"\u03C3"):Qg(t,"mean:"),lf:Qg(t,"lower fence:"),uf:Qg(t,"upper fence:")}},i[s]++,o):[{t:{empty:!0}}]};function Pyt(e,t,r,i){var n=t in e,a=t+"0"in e,o="d"+t in e;if(n||a&&o){var s=r.makeCalcdata(e,t),l=Lyt(e,r,t,s).vals;return[l,s]}var u;a?u=e[t+"0"]:"name"in e&&(r.type==="category"||T9(e.name)&&["linear","log"].indexOf(r.type)!==-1||qu.isDateTime(e.name)&&r.type==="date")?u=e.name:u=i;for(var f=r.type==="multicategory"?r.r2c_just_indices(u):r.d2c(u,0,e[t+"calendar"]),c=e._length,h=new Array(c),v=0;v<c;v++)h[v]=f;return[h]}function Ryt(e,t){for(var r=e.length,i=new Array(r+1),n=0;n<r;n++)i[n]=e[n]-t;return i[r]=e[r-1]+t,i}function Dyt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[];return t}var w9={text:"tx",hovertext:"htx"};function zge(e,t,r){for(var i in w9)qu.isArrayOrTypedArray(t[i])&&(Array.isArray(r)?qu.isArrayOrTypedArray(t[i][r[0]])&&(e[w9[i]]=t[i][r[0]][r[1]]):e[w9[i]]=t[i][r])}function Iyt(e,t){if(qu.isArrayOrTypedArray(t.selectedpoints))for(var r=0;r<e.length;r++){for(var i=e[r].pts||[],n={},a=0;a<i.length;a++)n[i[a].i]=a;qu.tagSelected(i,t,n)}}function Oge(e,t){return e.v-t.v}function Bge(e){return e.v}function Nge(e,t,r){return r===0?e.q1:Math.min(e.q1,t[Math.min(qu.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,r-1)])}function Uge(e,t,r){return r===0?e.q3:Math.max(e.q3,t[Math.max(qu.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function Vge(e){return 4*e.q1-3*e.q3}function Hge(e){return 4*e.q3-3*e.q1}function Gge(e,t){return t===0?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}});var aP=ne((qar,jge)=>{"use strict";var Wge=Xi(),Fyt=Wt(),qyt=mm().getAxisGroup,Xge=["v","h"];function zyt(e,t){for(var r=e.calcdata,i=t.xaxis,n=t.yaxis,a=0;a<Xge.length;a++){for(var o=Xge[a],s=o==="h"?n:i,l=[],u=0;u<r.length;u++){var f=r[u],c=f[0].t,h=f[0].trace;h.visible===!0&&(h.type==="box"||h.type==="candlestick")&&!c.empty&&(h.orientation||"v")===o&&h.xaxis===i._id&&h.yaxis===n._id&&l.push(u)}Zge("box",e,l,s)}}function Zge(e,t,r,i){var n=t.calcdata,a=t._fullLayout,o=i._id,s=o.charAt(0),l,u,f,c=[],h=0;for(l=0;l<r.length;l++)for(f=n[r[l]],u=0;u<f.length;u++)c.push(i.c2l(f[u].pos,!0)),h+=(f[u].pts2||[]).length;if(c.length){var v=Fyt.distinctVals(c);(i.type==="category"||i.type==="multicategory")&&(v.minDiff=1);var p=v.minDiff/2;Wge.minDtick(i,v.minDiff,v.vals[0],!0);var _=e==="violin"?"_numViolins":"_numBoxes",T=a[_],g=a[e+"mode"]==="group"&&T>1,A=1-a[e+"gap"],b=1-a[e+"groupgap"];for(l=0;l<r.length;l++){f=n[r[l]];var w=f[0].trace,k=f[0].t,x=w.width,E=w.side,M,d,C,S;if(x)M=d=S=x/2,C=0;else if(M=p,g){var P=qyt(a,i._id)+w.orientation,D=a._alignmentOpts[P]||{},z=D[w.alignmentgroup]||{},O=Object.keys(z.offsetGroups||{}).length,V=O||T,B=O?w._offsetIndex:k.num;d=M*A*b/V,C=2*M*(-.5+(B+.5)/V)*A,S=M*A/V}else d=M*A*b,C=0,S=M;k.dPos=M,k.bPos=C,k.bdPos=d,k.wHover=S;var F,N,Z=C+d,J,re,le,fe,K,X,ae=!!x,oe=(w.boxpoints||w.points)&&h>0;if(E==="positive"?(F=M*(x?1:.5),J=Z,N=J=C):E==="negative"?(F=J=C,N=M*(x?1:.5),re=Z):(F=N=M,J=re=Z),oe){var _e=w.pointpos,be=w.jitter,he=w.marker.size/2,ie=0;_e+be>=0&&(ie=Z*(_e+be),ie>F?(ae=!0,K=he,le=ie):ie>J&&(K=he,le=F)),ie<=F&&(le=F);var ye=0;_e-be<=0&&(ye=-Z*(_e-be),ye>N?(ae=!0,X=he,fe=ye):ye>re&&(X=he,fe=N)),ye<=N&&(fe=N)}else le=F,fe=N;var ue=new Array(f.length);for(u=0;u<f.length;u++)ue[u]=f[u].pos;w._extremes[o]=Wge.findExtremes(i,ue,{padded:ae,vpadminus:fe,vpadplus:le,vpadLinearized:!0,ppadminus:{x:X,y:K}[s],ppadplus:{x:K,y:X}[s]})}}}jge.exports={crossTraceCalc:zyt,setPositionOffset:Zge}});var oP=ne((zar,eye)=>{"use strict";var gw=Ai(),Wx=Wt(),Oyt=aa(),Kge=5,Byt=.01;function Nyt(e,t,r,i){var n=e._context.staticPlot,a=t.xaxis,o=t.yaxis;Wx.makeTraceGroups(i,r,"trace boxes").each(function(s){var l=gw.select(this),u=s[0],f=u.t,c=u.trace;if(f.wdPos=f.bdPos*c.whiskerwidth,c.visible!==!0||f.empty){l.remove();return}var h,v;c.orientation==="h"?(h=o,v=a):(h=a,v=o),Jge(l,{pos:h,val:v},c,f,n),Qge(l,{x:a,y:o},c,f),$ge(l,{pos:h,val:v},c,f)})}function Jge(e,t,r,i,n){var a=r.orientation==="h",o=t.val,s=t.pos,l=!!s.rangebreaks,u=i.bPos,f=i.wdPos||0,c=i.bPosPxOffset||0,h=r.whiskerwidth||0,v=r.showwhiskers!==!1,p=r.notched||!1,_=p?1-2*r.notchwidth:1,T,g;Array.isArray(i.bdPos)?(T=i.bdPos[0],g=i.bdPos[1]):(T=i.bdPos,g=i.bdPos);var A=e.selectAll("path.box").data(r.type!=="violin"||r.box.visible?Wx.identity:[]);A.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),A.exit().remove(),A.each(function(b){if(b.empty)return gw.select(this).attr("d","M0,0Z");var w=s.c2l(b.pos+u,!0),k=s.l2p(w-T)+c,x=s.l2p(w+g)+c,E=l?(k+x)/2:s.l2p(w)+c,M=r.whiskerwidth,d=l?k*M+(1-M)*E:s.l2p(w-f)+c,C=l?x*M+(1-M)*E:s.l2p(w+f)+c,S=s.l2p(w-T*_)+c,P=s.l2p(w+g*_)+c,D=r.sizemode==="sd",z=o.c2p(D?b.mean-b.sd:b.q1,!0),O=D?o.c2p(b.mean+b.sd,!0):o.c2p(b.q3,!0),V=Wx.constrain(D?o.c2p(b.mean,!0):o.c2p(b.med,!0),Math.min(z,O)+1,Math.max(z,O)-1),B=b.lf===void 0||r.boxpoints===!1||D,F=o.c2p(B?b.min:b.lf,!0),N=o.c2p(B?b.max:b.uf,!0),Z=o.c2p(b.ln,!0),J=o.c2p(b.un,!0);a?gw.select(this).attr("d","M"+V+","+S+"V"+P+"M"+z+","+k+"V"+x+(p?"H"+Z+"L"+V+","+P+"L"+J+","+x:"")+"H"+O+"V"+k+(p?"H"+J+"L"+V+","+S+"L"+Z+","+k:"")+"Z"+(v?"M"+z+","+E+"H"+F+"M"+O+","+E+"H"+N+(h===0?"":"M"+F+","+d+"V"+C+"M"+N+","+d+"V"+C):"")):gw.select(this).attr("d","M"+S+","+V+"H"+P+"M"+k+","+z+"H"+x+(p?"V"+Z+"L"+P+","+V+"L"+x+","+J:"")+"V"+O+"H"+k+(p?"V"+J+"L"+S+","+V+"L"+k+","+Z:"")+"Z"+(v?"M"+E+","+z+"V"+F+"M"+E+","+O+"V"+N+(h===0?"":"M"+d+","+F+"H"+C+"M"+d+","+N+"H"+C):""))})}function Qge(e,t,r,i){var n=t.x,a=t.y,o=i.bdPos,s=i.bPos,l=r.boxpoints||r.points;Wx.seedPseudoRandom();var u=function(h){return h.forEach(function(v){v.t=i,v.trace=r}),h},f=e.selectAll("g.points").data(l?u:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var c=f.selectAll("path").data(function(h){var v,p=h.pts2,_=Math.max((h.max-h.min)/10,h.q3-h.q1),T=_*1e-9,g=_*Byt,A=[],b=0,w;if(r.jitter){if(_===0)for(b=1,A=new Array(p.length),v=0;v<p.length;v++)A[v]=1;else for(v=0;v<p.length;v++){var k=Math.max(0,v-Kge),x=p[k].v,E=Math.min(p.length-1,v+Kge),M=p[E].v;l!=="all"&&(p[v].v<h.lf?M=Math.min(M,h.lf):x=Math.max(x,h.uf));var d=Math.sqrt(g*(E-k)/(M-x+T))||0;d=Wx.constrain(Math.abs(d),0,1),A.push(d),b=Math.max(d,b)}w=r.jitter*2/(b||1)}for(v=0;v<p.length;v++){var C=p[v],S=C.v,P=r.jitter?w*A[v]*(Wx.pseudoRandom()-.5):0,D=h.pos+s+o*(r.pointpos+P);r.orientation==="h"?(C.y=D,C.x=S):(C.x=D,C.y=S),l==="suspectedoutliers"&&S<h.uo&&S>h.lo&&(C.so=!0)}return p});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(Oyt.translatePoints,n,a)}function $ge(e,t,r,i){var n=t.val,a=t.pos,o=!!a.rangebreaks,s=i.bPos,l=i.bPosPxOffset||0,u=r.boxmean||(r.meanline||{}).visible,f,c;Array.isArray(i.bdPos)?(f=i.bdPos[0],c=i.bdPos[1]):(f=i.bdPos,c=i.bdPos);var h=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box.visible&&r.meanline.visible?Wx.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(v){var p=a.c2l(v.pos+s,!0),_=a.l2p(p-f)+l,T=a.l2p(p+c)+l,g=o?(_+T)/2:a.l2p(p)+l,A=n.c2p(v.mean,!0),b=n.c2p(v.mean-v.sd,!0),w=n.c2p(v.mean+v.sd,!0);r.orientation==="h"?gw.select(this).attr("d","M"+A+","+_+"V"+T+(u==="sd"?"m0,0L"+b+","+g+"L"+A+","+_+"L"+w+","+g+"Z":"")):gw.select(this).attr("d","M"+_+","+A+"H"+T+(u==="sd"?"m0,0L"+g+","+b+"L"+_+","+A+"L"+g+","+w+"Z":""))})}eye.exports={plot:Nyt,plotBoxAndWhiskers:Jge,plotPoints:Qge,plotBoxMean:$ge}});var sP=ne((Oar,tye)=>{"use strict";var M9=Ai(),S9=_i(),E9=aa();function Uyt(e,t,r){var i=r||M9.select(e).selectAll("g.trace.boxes");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=M9.select(this),o=n[0].trace,s=o.line.width;function l(c,h,v,p){c.style("stroke-width",h+"px").call(S9.stroke,v).call(S9.fill,p)}var u=a.selectAll("path.box");if(o.type==="candlestick")u.each(function(c){if(!c.empty){var h=M9.select(this),v=o[c.dir];l(h,v.line.width,v.line.color,v.fillcolor),h.style("opacity",o.selectedpoints&&!c.selected?.3:1)}});else{l(u,s,o.line.color,o.fillcolor),a.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(S9.stroke,o.line.color);var f=a.selectAll("path.point");E9.pointStyle(f,o,e)}})}function Vyt(e,t,r){var i=t[0].trace,n=r.selectAll("path.point");i.selectedpoints?E9.selectedPointStyle(n,i):E9.pointStyle(n,i,e)}tye.exports={style:Uyt,styleOnSelect:Vyt}});var C9=ne((Bar,aye)=>{"use strict";var Hyt=Xi(),k9=Wt(),Rm=Ol(),rye=_i(),Gyt=k9.fillText;function Yyt(e,t,r,i){var n=e.cd,a=n[0].trace,o=a.hoveron,s=[],l;return o.indexOf("boxes")!==-1&&(s=s.concat(nye(e,t,r,i))),o.indexOf("points")!==-1&&(l=iye(e,t,r)),i==="closest"?l?[l]:s:(l&&s.push(l),s)}function nye(e,t,r,i){var n=e.cd,a=e.xa,o=e.ya,s=n[0].trace,l=n[0].t,u=s.type==="violin",f,c,h,v,p,_,T,g,A,b,w,k=l.bdPos,x,E,M=l.wHover,d=function(he){return h.c2l(he.pos)+l.bPos-h.c2l(_)};u&&s.side!=="both"?(s.side==="positive"&&(A=function(he){var ie=d(he);return Rm.inbox(ie,ie+M,b)},x=k,E=0),s.side==="negative"&&(A=function(he){var ie=d(he);return Rm.inbox(ie-M,ie,b)},x=0,E=k)):(A=function(he){var ie=d(he);return Rm.inbox(ie-M,ie+M,b)},x=E=k);var C;u?C=function(he){return Rm.inbox(he.span[0]-p,he.span[1]-p,b)}:C=function(he){return Rm.inbox(he.min-p,he.max-p,b)},s.orientation==="h"?(p=t,_=r,T=C,g=A,f="y",h=o,c="x",v=a):(p=r,_=t,T=A,g=C,f="x",h=a,c="y",v=o);var S=Math.min(1,k/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));b=e.maxHoverDistance-S,w=e.maxSpikeDistance-S;function P(he){return(T(he)+g(he))/2}var D=Rm.getDistanceFunction(i,T,g,P);if(Rm.getClosest(n,D,e),e.index===!1)return[];var z=n[e.index],O=s.line.color,V=(s.marker||{}).color;rye.opacity(O)&&s.line.width?e.color=O:rye.opacity(V)&&s.boxpoints?e.color=V:e.color=s.fillcolor,e[f+"0"]=h.c2p(z.pos+l.bPos-E,!0),e[f+"1"]=h.c2p(z.pos+l.bPos+x,!0),e[f+"LabelVal"]=z.orig_p!==void 0?z.orig_p:z.pos;var B=f+"Spike";e.spikeDistance=P(z)*w/b,e[B]=h.c2p(z.pos,!0);var F=s.boxmean||s.sizemode==="sd"||(s.meanline||{}).visible,N=s.boxpoints||s.points,Z=N&&F?["max","uf","q3","med","mean","q1","lf","min"]:N&&!F?["max","uf","q3","med","q1","lf","min"]:!N&&F?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],J=v.range[1]<v.range[0];s.orientation===(J?"v":"h")&&Z.reverse();for(var re=e.spikeDistance,le=e[B],fe=[],K=0;K<Z.length;K++){var X=Z[K];if(X in z){var ae=z[X],oe=v.c2p(ae,!0),_e=k9.extendFlat({},e);_e.attr=X,_e[c+"0"]=_e[c+"1"]=oe,_e[c+"LabelVal"]=ae,_e[c+"Label"]=(l.labels?l.labels[X]+" ":"")+Hyt.hoverLabelText(v,ae,s[c+"hoverformat"]),_e.hoverOnBox=!0,X==="mean"&&"sd"in z&&(s.boxmean==="sd"||s.sizemode==="sd")&&(_e[c+"err"]=z.sd),_e.hovertemplate=!1,fe.push(_e)}}e.name="",e.spikeDistance=void 0,e[B]=void 0;for(var be=0;be<fe.length;be++)fe[be].attr!=="med"?(fe[be].name="",fe[be].spikeDistance=void 0,fe[be][B]=void 0):(fe[be].spikeDistance=re,fe[be][B]=le);return fe}function iye(e,t,r){for(var i=e.cd,n=e.xa,a=e.ya,o=i[0].trace,s=n.c2p(t),l=a.c2p(r),u,f=function(C){var S=Math.max(3,C.mrc||0);return Math.max(Math.abs(n.c2p(C.x)-s)-S,1-3/S)},c=function(C){var S=Math.max(3,C.mrc||0);return Math.max(Math.abs(a.c2p(C.y)-l)-S,1-3/S)},h=Rm.quadrature(f,c),v=!1,p,_,T=0;T<i.length;T++){p=i[T];for(var g=0;g<(p.pts||[]).length;g++){_=p.pts[g];var A=h(_);A<=e.distance&&(e.distance=A,v=[T,g])}}if(!v)return!1;p=i[v[0]],_=p.pts[v[1]];var b=n.c2p(_.x,!0),w=a.c2p(_.y,!0),k=_.mrc||1;u=k9.extendFlat({},e,{index:_.i,color:(o.marker||{}).color,name:o.name,x0:b-k,x1:b+k,y0:w-k,y1:w+k,spikeDistance:e.distance,hovertemplate:o.hovertemplate});var x=p.orig_p,E=x!==void 0?x:p.pos,M;o.orientation==="h"?(M=a,u.xLabelVal=_.x,u.yLabelVal=E):(M=n,u.xLabelVal=E,u.yLabelVal=_.y);var d=M._id.charAt(0);return u[d+"Spike"]=M.c2p(p.pos,!0),Gyt(_,o,u),u}aye.exports={hoverPoints:Yyt,hoverOnBoxes:nye,hoverOnPoints:iye}});var sye=ne((Nar,oye)=>{"use strict";oye.exports=function(t,r){return r.hoverOnBox&&(t.hoverOnBox=r.hoverOnBox),"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var L9=ne((Uar,lye)=>{"use strict";lye.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l;if(r===!1)for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++)i[s].pts[l].selected=0;else for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++){var u=i[s].pts[l],f=n.c2p(u.x),c=a.c2p(u.y);r.contains([f,c],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return o}});var fye=ne((Var,uye)=>{"use strict";uye.exports={attributes:jM(),layoutAttributes:KM(),supplyDefaults:QM().supplyDefaults,crossTraceDefaults:QM().crossTraceDefaults,supplyLayoutDefaults:nP().supplyLayoutDefaults,calc:A9(),crossTraceCalc:aP().crossTraceCalc,plot:oP().plot,style:sP().style,styleOnSelect:sP().styleOnSelect,hoverPoints:C9().hoverPoints,eventData:sye(),selectPoints:L9(),moduleType:"trace",name:"box",basePlotModule:vu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}});var hye=ne((Har,cye)=>{"use strict";cye.exports=fye()});var Xx=ne((Gar,vye)=>{"use strict";var wp=cu(),Wyt=es(),Xyt=ll(),P9=kl().axisHoverFormat,Zyt=Ba().hovertemplateAttrs,jyt=Ba().texttemplateAttrs,Kyt=Ps(),ld=oa().extendFlat;vye.exports=ld({z:{valType:"data_array",editType:"calc"},x:ld({},wp.x,{impliedEdits:{xtype:"array"}}),x0:ld({},wp.x0,{impliedEdits:{xtype:"scaled"}}),dx:ld({},wp.dx,{impliedEdits:{xtype:"scaled"}}),y:ld({},wp.y,{impliedEdits:{ytype:"array"}}),y0:ld({},wp.y0,{impliedEdits:{ytype:"scaled"}}),dy:ld({},wp.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:ld({},wp.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:ld({},wp.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:ld({},wp.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:ld({},wp.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:ld({},wp.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:ld({},wp.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:P9("x"),yhoverformat:P9("y"),zhoverformat:P9("z",1),hovertemplate:Zyt(),texttemplate:jyt({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:Xyt({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:ld({},Wyt.showlegend,{dflt:!1})},{transforms:void 0},Kyt("",{cLetter:"z",autoColorDflt:!1}))});var $M=ne((Yar,pye)=>{"use strict";var Jyt=la(),lP=Wt(),Qyt=wi();pye.exports=function(t,r,i,n,a,o){var s=i("z");a=a||"x",o=o||"y";var l,u;if(s===void 0||!s.length)return 0;if(lP.isArray1D(s)){l=i(a),u=i(o);var f=lP.minRowLength(l),c=lP.minRowLength(u);if(f===0||c===0)return 0;r._length=Math.min(f,c,s.length)}else{if(l=dye(a,i),u=dye(o,i),!$yt(s))return 0;i("transpose"),r._length=null}if(t.type==="heatmapgl")return!0;var h=Qyt.getComponentMethod("calendars","handleTraceDefaults");return h(t,r,[a,o],n),!0};function dye(e,t){var r=t(e),i=r?t(e+"type","array"):"scaled";return i==="scaled"&&(t(e+"0"),t("d"+e)),r}function $yt(e){for(var t=!0,r=!1,i=!1,n,a=0;a<e.length;a++){if(n=e[a],!lP.isArrayOrTypedArray(n)){t=!1;break}n.length>0&&(r=!0);for(var o=0;o<n.length;o++)if(Jyt(n[o])){i=!0;break}}return t&&r&&i}});var eS=ne((War,yye)=>{"use strict";var gye=Wt();yye.exports=function(t,r){t("texttemplate");var i=gye.extendFlat({},r.font,{color:"auto",size:"auto"});gye.coerceFont(t,"textfont",i)}});var R9=ne((Xar,mye)=>{"use strict";mye.exports=function(t,r,i){var n=i("zsmooth");n===!1&&(i("xgap"),i("ygap")),i("zhoverformat")}});var bye=ne((Zar,_ye)=>{"use strict";var xye=Wt(),emt=$M(),tmt=eS(),rmt=o0(),nmt=R9(),imt=Kf(),amt=Xx();_ye.exports=function(t,r,i,n){function a(s,l){return xye.coerce(t,r,amt,s,l)}var o=emt(t,r,a,n);if(!o){r.visible=!1;return}rmt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),tmt(a,n),nmt(t,r,a,n),a("hoverongaps"),a("connectgaps",xye.isArray1D(r.z)&&r.zsmooth!==!1),imt(t,r,n,a,{prefix:"",cLetter:"z"})}});var D9=ne((jar,wye)=>{"use strict";var yw=la();wye.exports={count:function(e,t,r){return r[e]++,1},sum:function(e,t,r,i){var n=i[t];return yw(n)?(n=Number(n),r[e]+=n,n):0},avg:function(e,t,r,i,n){var a=i[t];return yw(a)&&(a=Number(a),r[e]+=a,n[e]++),0},min:function(e,t,r,i){var n=i[t];if(yw(n))if(n=Number(n),yw(r[e])){if(r[e]>n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0},max:function(e,t,r,i){var n=i[t];if(yw(n))if(n=Number(n),yw(r[e])){if(r[e]<n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0}}});var I9=ne((Kar,Tye)=>{"use strict";Tye.exports={percent:function(e,t){for(var r=e.length,i=100/t,n=0;n<r;n++)e[n]*=i},probability:function(e,t){for(var r=e.length,i=0;i<r;i++)e[i]/=t},density:function(e,t,r,i){var n=e.length;i=i||1;for(var a=0;a<n;a++)e[a]*=r[a]*i},"probability density":function(e,t,r,i){var n=e.length;i&&(t/=i);for(var a=0;a<n;a++)e[a]*=r[a]/t}}});var F9=ne((Jar,Aye)=>{"use strict";Aye.exports=function(t,r){for(var i=t.length,n=0,a=0;a<i;a++)r[a]?(t[a]/=r[a],n+=t[a]):t[a]=null;return n}});var q9=ne((Qar,Rye)=>{"use strict";var mw=$a(),Zx=mw.ONEAVGYEAR,Mye=mw.ONEAVGMONTH,fP=mw.ONEDAY,Sye=mw.ONEHOUR,Eye=mw.ONEMIN,kye=mw.ONESEC,Cye=Xi().tickIncrement;Rye.exports=function(t,r,i,n,a){var o=-1.1*r,s=-.1*r,l=t-s,u=i[0],f=i[1],c=Math.min(uP(u+s,u+l,n,a),uP(f+s,f+l,n,a)),h=Math.min(uP(u+o,u+s,n,a),uP(f+o,f+s,n,a)),v,p;if(c>h&&h<Math.abs(f-u)/4e3?(v=c,p=!1):(v=Math.min(c,h),p=!0),n.type==="date"&&v>fP){var _=v===Zx?1:6,T=v===Zx?"M12":"M1";return function(g,A){var b=n.c2d(g,Zx,a),w=b.indexOf("-",_);w>0&&(b=b.substr(0,w));var k=n.d2c(b,0,a);if(k<g){var x=Cye(k,T,!1,a);(k+x)/2<g+t&&(k=x)}return A&&p?Cye(k,T,!0,a):k}}return function(g,A){var b=v*Math.round(g/v);return b+v/10<g&&b+v*.9<g+t&&(b+=v),A&&p&&(b-=v),b}};function uP(e,t,r,i){if(e*t<=0)return 1/0;for(var n=Math.abs(t-e),a=r.type==="date",o=Lye(n,a),s=0;s<10;s++){var l=Lye(o*80,a);if(o===l)break;if(omt(l,e,t,a,r,i))o=l;else break}return o}function Lye(e,t){return t&&e>kye?e>fP?e>Zx*1.1?Zx:e>Mye*1.1?Mye:fP:e>Sye?Sye:e>Eye?Eye:kye:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function omt(e,t,r,i,n,a){if(i&&e>fP){var o=Pye(t,n,a),s=Pye(r,n,a),l=e===Zx?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function Pye(e,t,r){var i=t.c2d(e,Zx,r).split("-");return i[0]===""&&(i.unshift(),i[0]="-"+i[0]),i}});var B9=ne(($ar,Fye)=>{"use strict";var z9=la(),jh=Wt(),Dye=wi(),Tp=Xi(),smt=YM(),Iye=D9(),lmt=I9(),umt=F9(),fmt=q9();function cmt(e,t){var r=[],i=[],n=t.orientation==="h",a=Tp.getFromId(e,n?t.yaxis:t.xaxis),o=n?"y":"x",s={x:"y",y:"x"}[o],l=t[o+"calendar"],u=t.cumulative,f,c=O9(e,t,a,o),h=c[0],v=c[1],p=typeof h.size=="string",_=[],T=p?_:h,g=[],A=[],b=[],w=0,k=t.histnorm,x=t.histfunc,E=k.indexOf("density")!==-1,M,d,C;u.enabled&&E&&(k=k.replace(/ ?density$/,""),E=!1);var S=x==="max"||x==="min",P=S?null:0,D=Iye.count,z=lmt[k],O=!1,V=function(ie){return a.r2c(ie,0,l)},B;for(jh.isArrayOrTypedArray(t[s])&&x!=="count"&&(B=t[s],O=x==="avg",D=Iye[x]),f=V(h.start),d=V(h.end)+(f-Tp.tickIncrement(f,h.size,!1,l))/1e6;f<d&&r.length<1e6&&(M=Tp.tickIncrement(f,h.size,!1,l),r.push((f+M)/2),i.push(P),b.push([]),_.push(f),E&&g.push(1/(M-f)),O&&A.push(0),!(M<=f));)f=M;_.push(f),!p&&a.type==="date"&&(T={start:V(T.start),end:V(T.end),size:T.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var F=t["_"+o+"bingroup"],N={leftGap:1/0,rightGap:1/0};F&&(e._fullLayout._roundFnOpts[F]||(e._fullLayout._roundFnOpts[F]=N),N=e._fullLayout._roundFnOpts[F]);var Z=i.length,J=!0,re=N.leftGap,le=N.rightGap,fe={};for(f=0;f<v.length;f++){var K=v[f];C=jh.findBin(K,T),C>=0&&C<Z&&(w+=D(C,f,i,B,A),J&&b[C].length&&K!==v[b[C][0]]&&(J=!1),b[C].push(f),fe[f]=C,re=Math.min(re,K-_[C]),le=Math.min(le,_[C+1]-K))}N.leftGap=re,N.rightGap=le;var X;J||(X=function(ie,ye){return function(){var ue=e._fullLayout._roundFnOpts[F];return fmt(ue.leftGap,ue.rightGap,_,a,l)(ie,ye)}}),O&&(w=umt(i,A)),z&&z(i,w,g),u.enabled&&dmt(i,u.direction,u.currentbin);var ae=Math.min(r.length,i.length),oe=[],_e=0,be=ae-1;for(f=0;f<ae;f++)if(i[f]){_e=f;break}for(f=ae-1;f>=_e;f--)if(i[f]){be=f;break}for(f=_e;f<=be;f++)if(z9(r[f])&&z9(i[f])){var he={p:r[f],s:i[f],b:0};u.enabled||(he.pts=b[f],J?he.ph0=he.ph1=b[f].length?v[b[f][0]]:r[f]:(t._computePh=!0,he.ph0=X(_[f]),he.ph1=X(_[f+1],!0))),oe.push(he)}return oe.length===1&&(oe[0].width1=Tp.tickIncrement(oe[0].p,h.size,!1,l)-oe[0].p),smt(oe,t),jh.isArrayOrTypedArray(t.selectedpoints)&&jh.tagSelected(oe,t,fe),oe}function O9(e,t,r,i,n){var a=i+"bins",o=e._fullLayout,s=t["_"+i+"bingroup"],l=o._histogramBinOpts[s],u=o.barmode==="overlay",f,c,h,v,p,_,T,g=function(K){return r.r2c(K,0,v)},A=function(K){return r.c2r(K,0,v)},b=r.type==="date"?function(K){return K||K===0?jh.cleanDate(K,null,v):null}:function(K){return z9(K)?Number(K):null};function w(K,X,ae){X[K+"Found"]?(X[K]=b(X[K]),X[K]===null&&(X[K]=ae[K])):(_[K]=X[K]=ae[K],jh.nestedProperty(c[0],a+"."+K).set(ae[K]))}if(t["_"+i+"autoBinFinished"])delete t["_"+i+"autoBinFinished"];else{c=l.traces;var k=[],x=!0,E=!1,M=!1;for(f=0;f<c.length;f++)if(h=c[f],h.visible){var d=l.dirs[f];p=h["_"+d+"pos0"]=r.makeCalcdata(h,d),k=jh.concat(k,p),delete h["_"+i+"autoBinFinished"],t.visible===!0&&(x?x=!1:(delete h._autoBin,h["_"+i+"autoBinFinished"]=1),Dye.traceIs(h,"2dMap")&&(E=!0),h.type==="histogram2dcontour"&&(M=!0))}v=c[0][i+"calendar"];var C=Tp.autoBin(k,r,l.nbins,E,v,l.sizeFound&&l.size),S=c[0]._autoBin={};if(_=S[l.dirs[0]]={},M&&(l.size||(C.start=A(Tp.tickIncrement(g(C.start),C.size,!0,v))),l.end===void 0&&(C.end=A(Tp.tickIncrement(g(C.end),C.size,!1,v)))),u&&!Dye.traceIs(t,"2dMap")&&C._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"&&t.bingroup===""&&typeof t.xbins=="undefined"){if(n)return[C,p,!0];C=hmt(e,t,r,i,a)}T=h.cumulative||{},T.enabled&&T.currentbin!=="include"&&(T.direction==="decreasing"?C.start=A(Tp.tickIncrement(g(C.start),C.size,!0,v)):C.end=A(Tp.tickIncrement(g(C.end),C.size,!1,v))),l.size=C.size,l.sizeFound||(_.size=C.size,jh.nestedProperty(c[0],a+".size").set(C.size)),w("start",l,C),w("end",l,C)}p=t["_"+i+"pos0"],delete t["_"+i+"pos0"];var P=t._input[a]||{},D=jh.extendFlat({},l),z=l.start,O=r.r2l(P.start),V=O!==void 0;if((l.startFound||V)&&O!==r.r2l(z)){var B=V?O:jh.aggNums(Math.min,null,p),F={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:z,calendar:v,range:[B,Tp.tickIncrement(B,l.size,!1,v)].map(r.l2r)},N=Tp.tickFirst(F);N>r.r2l(B)&&(N=Tp.tickIncrement(N,l.size,!0,v)),D.start=r.l2r(N),V||jh.nestedProperty(t,a+".start").set(D.start)}var Z=l.end,J=r.r2l(P.end),re=J!==void 0;if((l.endFound||re)&&J!==r.r2l(Z)){var le=re?J:jh.aggNums(Math.max,null,p);D.end=r.l2r(le),re||jh.nestedProperty(t,a+".start").set(D.end)}var fe="autobin"+i;return t._input[fe]===!1&&(t._input[a]=jh.extendFlat({},t[a]||{}),delete t._input[fe],delete t[fe]),[D,p]}function hmt(e,t,r,i,n){var a=e._fullLayout,o=vmt(e,t),s=!1,l=1/0,u=[t],f,c,h;for(f=0;f<o.length;f++)if(c=o[f],c===t)s=!0;else if(!s)h=a._histogramBinOpts[c["_"+i+"bingroup"]],l=Math.min(l,h.size||c[n].size);else{var v=O9(e,c,r,i,!0),p=v[0],_=v[2];c["_"+i+"autoBinFinished"]=1,c["_"+i+"pos0"]=v[1],_?u.push(c):l=Math.min(l,p.size)}var T=new Array(u.length);for(f=0;f<u.length;f++)for(var g=u[f]["_"+i+"pos0"],A=0;A<g.length;A++)if(g[A]!==void 0){T[f]=g[A];break}for(isFinite(l)||(l=jh.distinctVals(T).minDiff),f=0;f<u.length;f++){c=u[f];var b=c[i+"calendar"],w={start:r.c2r(T[f]-l/2,0,b),end:r.c2r(T[f]+l/2,0,b),size:l};c._input[n]=c[n]=w,h=a._histogramBinOpts[c["_"+i+"bingroup"]],h&&jh.extendFlat(h,w)}return t[n]}function vmt(e,t){for(var r=t.xaxis,i=t.yaxis,n=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];l.type==="histogram"&&l.visible===!0&&l.orientation===n&&l.xaxis===r&&l.yaxis===i&&a.push(l)}return a}function dmt(e,t,r){var i,n,a;function o(l){a=e[l],e[l]/=2}function s(l){n=e[l],e[l]=a+n/2,a+=n}if(r==="half")if(t==="increasing")for(o(0),i=1;i<e.length;i++)s(i);else for(o(e.length-1),i=e.length-2;i>=0;i--)s(i);else if(t==="increasing"){for(i=1;i<e.length;i++)e[i]+=e[i-1];r==="exclude"&&(e.unshift(0),e.pop())}else{for(i=e.length-2;i>=0;i--)e[i]+=e[i+1];r==="exclude"&&(e.push(0),e.shift())}}Fye.exports={calc:cmt,calcAllAutoBins:O9}});var Hye=ne((eor,Vye)=>{"use strict";var qye=Wt(),xw=Xi(),zye=D9(),pmt=I9(),gmt=F9(),ymt=q9(),Oye=B9().calcAllAutoBins;Vye.exports=function(t,r){var i=xw.getFromId(t,r.xaxis),n=xw.getFromId(t,r.yaxis),a=r.xcalendar,o=r.ycalendar,s=function(rt){return i.r2c(rt,0,a)},l=function(rt){return n.r2c(rt,0,o)},u=function(rt){return i.c2r(rt,0,a)},f=function(rt){return n.c2r(rt,0,o)},c,h,v,p,_=Oye(t,r,i,"x"),T=_[0],g=_[1],A=Oye(t,r,n,"y"),b=A[0],w=A[1],k=r._length;g.length>k&&g.splice(k,g.length-k),w.length>k&&w.splice(k,w.length-k);var x=[],E=[],M=[],d=typeof T.size=="string",C=typeof b.size=="string",S=[],P=[],D=d?S:T,z=C?P:b,O=0,V=[],B=[],F=r.histnorm,N=r.histfunc,Z=F.indexOf("density")!==-1,J=N==="max"||N==="min",re=J?null:0,le=zye.count,fe=pmt[F],K=!1,X=[],ae=[],oe="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";oe&&N!=="count"&&(K=N==="avg",le=zye[N]);var _e=T.size,be=s(T.start),he=s(T.end)+(be-xw.tickIncrement(be,_e,!1,a))/1e6;for(c=be;c<he;c=xw.tickIncrement(c,_e,!1,a))E.push(re),S.push(c),K&&M.push(0);S.push(c);var ie=E.length,ye=(c-be)/ie,ue=u(be+ye/2),Ae=b.size,Re=l(b.start),ze=l(b.end)+(Re-xw.tickIncrement(Re,Ae,!1,o))/1e6;for(c=Re;c<ze;c=xw.tickIncrement(c,Ae,!1,o)){x.push(E.slice()),P.push(c);var et=new Array(ie);for(h=0;h<ie;h++)et[h]=[];B.push(et),K&&V.push(M.slice())}P.push(c);var Le=x.length,Ie=(c-Re)/Le,dt=f(Re+Ie/2);Z&&(X=Bye(E.length,D,ye,d),ae=Bye(x.length,z,Ie,C)),!d&&i.type==="date"&&(D=Nye(s,D)),!C&&n.type==="date"&&(z=Nye(l,z));var ct=!0,Ke=!0,_t=new Array(ie),zt=new Array(Le),Et=1/0,Se=1/0,je=1/0,ht=1/0;for(c=0;c<k;c++){var nt=g[c],lt=w[c];v=qye.findBin(nt,D),p=qye.findBin(lt,z),v>=0&&v<ie&&p>=0&&p<Le&&(O+=le(v,c,x[p],oe,V[p]),B[p][v].push(c),ct&&(_t[v]===void 0?_t[v]=nt:_t[v]!==nt&&(ct=!1)),Ke&&(zt[p]===void 0?zt[p]=lt:zt[p]!==lt&&(Ke=!1)),Et=Math.min(Et,nt-S[v]),Se=Math.min(Se,S[v+1]-nt),je=Math.min(je,lt-P[p]),ht=Math.min(ht,P[p+1]-lt))}if(K)for(p=0;p<Le;p++)O+=gmt(x[p],V[p]);if(fe)for(p=0;p<Le;p++)fe(x[p],O,X,ae[p]);return{x:g,xRanges:Uye(S,ct&&_t,Et,Se,i,a),x0:ue,dx:ye,y:w,yRanges:Uye(P,Ke&&zt,je,ht,n,o),y0:dt,dy:Ie,z:x,pts:B}};function Bye(e,t,r,i){var n=new Array(e),a;if(i)for(a=0;a<e;a++)n[a]=1/(t[a+1]-t[a]);else{var o=1/r;for(a=0;a<e;a++)n[a]=o}return n}function Nye(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function Uye(e,t,r,i,n,a){var o,s=e.length-1,l=new Array(s),u=ymt(r,i,e,n,a);for(o=0;o<s;o++){var f=(t||[])[o];l[o]=f===void 0?[u(e[o]),u(e[o+1],!0)]:[f,f]}return l}});var cP=ne((tor,Wye)=>{"use strict";var $0=Wt(),Gye=$a().BADNUM,Yye=u0();Wye.exports=function(t,r,i,n,a,o){var s=t._length,l=r.makeCalcdata(t,n),u=i.makeCalcdata(t,a);l=Yye(t,r,n,l).vals,u=Yye(t,i,a,u).vals;var f=t.text,c=f!==void 0&&$0.isArray1D(f),h=t.hovertext,v=h!==void 0&&$0.isArray1D(h),p,_,T=$0.distinctVals(l),g=T.vals,A=$0.distinctVals(u),b=A.vals,w=[],k,x,E=b.length,M=g.length;for(p=0;p<o.length;p++)w[p]=$0.init2dArray(E,M);c&&(k=$0.init2dArray(E,M)),v&&(x=$0.init2dArray(E,M));var d=$0.init2dArray(E,M);for(p=0;p<s;p++)if(l[p]!==Gye&&u[p]!==Gye){var C=$0.findBin(l[p]+T.minDiff/2,g),S=$0.findBin(u[p]+A.minDiff/2,b);for(_=0;_<o.length;_++){var P=o[_],D=t[P],z=w[_];z[S][C]=D[p],d[S][C]=p}c&&(k[S][C]=f[p]),v&&(x[S][C]=h[p])}for(t["_"+n]=g,t["_"+a]=b,_=0;_<o.length;_++)t["_"+o[_]]=w[_];c&&(t._text=k),v&&(t._hovertext=x),r&&r.type==="category"&&(t["_"+n+"CategoryMap"]=g.map(function(O){return r._categories[O]})),i&&i.type==="category"&&(t["_"+a+"CategoryMap"]=b.map(function(O){return i._categories[O]})),t._after2before=d}});var vP=ne((ror,Xye)=>{"use strict";var mmt=la(),xmt=Wt(),hP=$a().BADNUM;Xye.exports=function(t,r,i,n){var a,o,s,l,u,f;function c(g){if(mmt(g))return+g}if(r&&r.transpose){for(a=0,u=0;u<t.length;u++)a=Math.max(a,t[u].length);if(a===0)return!1;s=function(g){return g.length},l=function(g,A,b){return(g[b]||[])[A]}}else a=t.length,s=function(g,A){return g[A].length},l=function(g,A,b){return(g[A]||[])[b]};var h=function(g,A,b){return A===hP||b===hP?hP:l(g,A,b)};function v(g){if(r&&r.type!=="carpet"&&r.type!=="contourcarpet"&&g&&g.type==="category"&&r["_"+g._id.charAt(0)].length){var A=g._id.charAt(0),b={},w=r["_"+A+"CategoryMap"]||r[A];for(u=0;u<w.length;u++)b[w[u]]=u;return function(k){var x=b[g._categories[k]];return x+1?x:hP}}else return xmt.identity}var p=v(i),_=v(n);n&&n.type==="category"&&(a=n._categories.length);var T=new Array(a);for(u=0;u<a;u++)for(i&&i.type==="category"?o=i._categories.length:o=s(t,u),T[u]=new Array(o),f=0;f<o;f++)T[u][f]=c(h(t,_(u),p(f)));return T}});var dP=ne((nor,Kye)=>{"use strict";var _mt=Wt(),Zye=.01,bmt=[[-1,0],[1,0],[0,-1],[0,1]];function wmt(e){return .5-.25*Math.min(1,e*.5)}Kye.exports=function(t,r){var i=1,n;for(jye(t,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&i>Zye;n++)i=jye(t,r,wmt(i));return i>Zye&&_mt.log("interp2d didn't converge quickly",i),t};function jye(e,t,r){var i=0,n,a,o,s,l,u,f,c,h,v,p,_,T;for(s=0;s<t.length;s++){for(n=t[s],a=n[0],o=n[1],p=e[a][o],v=0,h=0,l=0;l<4;l++)u=bmt[l],f=e[a+u[0]],f&&(c=f[o+u[1]],c!==void 0&&(v===0?_=T=c:(_=Math.min(_,c),T=Math.max(T,c)),h++,v+=c));if(h===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[a][o]=v/h,p===void 0?h<4&&(i=1):(e[a][o]=(1+r)*e[a][o]-r*p,T>_&&(i=Math.max(i,Math.abs(e[a][o]-p)/(T-_))))}return i}});var pP=ne((ior,Jye)=>{"use strict";var Tmt=Wt().maxRowLength;Jye.exports=function(t){var r=[],i={},n=[],a=t[0],o=[],s=[0,0,0],l=Tmt(t),u,f,c,h,v,p,_,T;for(f=0;f<t.length;f++)for(u=o,o=a,a=t[f+1]||[],c=0;c<l;c++)o[c]===void 0&&(p=(o[c-1]!==void 0?1:0)+(o[c+1]!==void 0?1:0)+(u[c]!==void 0?1:0)+(a[c]!==void 0?1:0),p?(f===0&&p++,c===0&&p++,f===t.length-1&&p++,c===o.length-1&&p++,p<4&&(i[[f,c]]=[f,c,p]),r.push([f,c,p])):n.push([f,c]));for(;n.length;){for(_={},T=!1,v=n.length-1;v>=0;v--)h=n[v],f=h[0],c=h[1],p=((i[[f-1,c]]||s)[2]+(i[[f+1,c]]||s)[2]+(i[[f,c-1]]||s)[2]+(i[[f,c+1]]||s)[2])/20,p&&(_[h]=[f,c,p],n.splice(v,1),T=!0);if(!T)throw"findEmpties iterated with no new neighbors";for(h in _)i[h]=_[h],r.push(_[h])}return r.sort(function(g,A){return A[2]-g[2]})}});var U9=ne((aor,$ye)=>{"use strict";var N9=wi(),Qye=Wt().isArrayOrTypedArray;$ye.exports=function(t,r,i,n,a,o){var s=[],l=N9.traceIs(t,"contour"),u=N9.traceIs(t,"histogram"),f=N9.traceIs(t,"gl2d"),c,h,v,p=Qye(r)&&r.length>1;if(p&&!u&&o.type!=="category"){var _=r.length;if(_<=a){if(l||f)s=Array.from(r).slice(0,a);else if(a===1)o.type==="log"?s=[.5*r[0],2*r[0]]:s=[r[0]-.5,r[0]+.5];else if(o.type==="log"){for(s=[Math.pow(r[0],1.5)/Math.pow(r[1],.5)],v=1;v<_;v++)s.push(Math.sqrt(r[v-1]*r[v]));s.push(Math.pow(r[_-1],1.5)/Math.pow(r[_-2],.5))}else{for(s=[1.5*r[0]-.5*r[1]],v=1;v<_;v++)s.push((r[v-1]+r[v])*.5);s.push(1.5*r[_-1]-.5*r[_-2])}if(_<a){var T=s[s.length-1],g;if(o.type==="log")for(g=T/s[s.length-2],v=_;v<a;v++)T*=g,s.push(T);else for(g=T-s[s.length-2],v=_;v<a;v++)T+=g,s.push(T)}}else return l?r.slice(0,a):r.slice(0,a+1)}else{var A=t[o._id.charAt(0)+"calendar"];if(u)c=o.r2c(i,0,A);else if(Qye(r)&&r.length===1)c=r[0];else if(i===void 0)c=0;else{var b=o.type==="log"?o.d2c:o.r2c;c=b(i,0,A)}for(h=n||1,v=l||f?0:-.5;v<a;v++)s.push(c+h*v)}return s}});var tS=ne((oor,rme)=>{"use strict";var V9=wi(),H9=Wt(),gP=Xi(),eme=u0(),Amt=Hye(),Mmt=gv(),Smt=cP(),Emt=vP(),kmt=dP(),Cmt=pP(),yP=U9(),G9=$a().BADNUM;rme.exports=function(t,r){var i=gP.getFromId(t,r.xaxis||"x"),n=gP.getFromId(t,r.yaxis||"y"),a=V9.traceIs(r,"contour"),o=V9.traceIs(r,"histogram"),s=V9.traceIs(r,"gl2d"),l=a?"best":r.zsmooth,u,f,c,h,v,p,_,T,g,A,b;if(i._minDtick=0,n._minDtick=0,o)b=Amt(t,r),h=b.orig_x,u=b.x,f=b.x0,c=b.dx,T=b.orig_y,v=b.y,p=b.y0,_=b.dy,g=b.z;else{var w=r.z;H9.isArray1D(w)?(Smt(r,i,n,"x","y",["z"]),u=r._x,v=r._y,w=r._z):(h=r.x?i.makeCalcdata(r,"x"):[],T=r.y?n.makeCalcdata(r,"y"):[],u=eme(r,i,"x",h).vals,v=eme(r,n,"y",T).vals,r._x=u,r._y=v),f=r.x0,c=r.dx,p=r.y0,_=r.dy,g=Emt(w,r,i,n)}(i.rangebreaks||n.rangebreaks)&&(g=Lmt(u,v,g),o||(u=tme(u),v=tme(v),r._x=u,r._y=v)),!o&&(a||r.connectgaps)&&(r._emptypoints=Cmt(g),kmt(g,r._emptypoints));function k(z){l=r._input.zsmooth=r.zsmooth=!1,H9.warn('cannot use zsmooth: "fast": '+z)}function x(z){if(z.length>1){var O=(z[z.length-1]-z[0])/(z.length-1),V=Math.abs(O/100);for(A=0;A<z.length-1;A++)if(Math.abs(z[A+1]-z[A]-O)>V)return!1}return!0}r._islinear=!1,i.type==="log"||n.type==="log"?l==="fast"&&k("log axis found"):x(u)?x(v)?r._islinear=!0:l==="fast"&&k("y scale is not linear"):l==="fast"&&k("x scale is not linear");var E=H9.maxRowLength(g),M=r.xtype==="scaled"?"":u,d=yP(r,M,f,c,E,i),C=r.ytype==="scaled"?"":v,S=yP(r,C,p,_,g.length,n);s||(r._extremes[i._id]=gP.findExtremes(i,d),r._extremes[n._id]=gP.findExtremes(n,S));var P={x:d,y:S,z:g,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&h&&(P.orig_x=h),r.yperiodalignment&&T&&(P.orig_y=T),M&&M.length===d.length-1&&(P.xCenter=M),C&&C.length===S.length-1&&(P.yCenter=C),o&&(P.xRanges=b.xRanges,P.yRanges=b.yRanges,P.pts=b.pts),a||Mmt(t,r,{vals:g,cLetter:"z"}),a&&r.contours&&r.contours.coloring==="heatmap"){var D={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};P.xfill=yP(D,M,f,c,E,i),P.yfill=yP(D,C,p,_,g.length,n)}return[P]};function tme(e){for(var t=[],r=e.length,i=0;i<r;i++){var n=e[i];n!==G9&&t.push(n)}return t}function Lmt(e,t,r){for(var i=[],n=-1,a=0;a<r.length;a++)if(t[a]!==G9){n++,i[n]=[];for(var o=0;o<r[a].length;o++)e[o]!==G9&&i[n].push(r[a][o])}return i}});var xP=ne(mP=>{"use strict";mP.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]];mP.STYLE=mP.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")});var W9=ne((lor,ime)=>{"use strict";var nme=xP(),Pmt=aa(),Y9=Wt(),_w=null;function Rmt(){if(_w!==null)return _w;_w=!1;var e=Y9.isIE()||Y9.isSafari()||Y9.isIOS();if(window.navigator.userAgent&&!e){var t=Array.from(nme.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")_w=t.some(function(o){return r.apply(null,o)});else{var i=Pmt.tester.append("image").attr("style",nme.STYLE),n=window.getComputedStyle(i.node()),a=n.imageRendering;_w=t.some(function(o){var s=o[1];return a===s||a===s.toLowerCase()}),i.remove()}}return _w}ime.exports=Rmt});var _P=ne((uor,vme)=>{"use strict";var ame=Ai(),Dmt=Xf(),Imt=wi(),Fmt=aa(),qmt=Xi(),Ap=Wt(),ome=Es(),zmt=vL(),Omt=_i(),Bmt=ul().extractOpts,Nmt=ul().makeColorScaleFuncFromTrace,Umt=kd(),Vmt=Tf(),X9=Vmt.LINE_SPACING,Hmt=W9(),Gmt=xP().STYLE,cme="heatmap-label";function hme(e){return e.selectAll("g."+cme)}function sme(e){hme(e).remove()}vme.exports=function(e,t,r,i){var n=t.xaxis,a=t.yaxis;Ap.makeTraceGroups(i,r,"hm").each(function(o){var s=ame.select(this),l=o[0],u=l.trace,f=u.xgap||0,c=u.ygap||0,h=l.z,v=l.x,p=l.y,_=l.xCenter,T=l.yCenter,g=Imt.traceIs(u,"contour"),A=g?"best":u.zsmooth,b=h.length,w=Ap.maxRowLength(h),k=!1,x=!1,E,M,d,C,S,P,D,z;for(P=0;E===void 0&&P<v.length-1;)E=n.c2p(v[P]),P++;for(P=v.length-1;M===void 0&&P>0;)M=n.c2p(v[P]),P--;for(M<E&&(d=M,M=E,E=d,k=!0),P=0;C===void 0&&P<p.length-1;)C=a.c2p(p[P]),P++;for(P=p.length-1;S===void 0&&P>0;)S=a.c2p(p[P]),P--;S<C&&(d=C,C=S,S=d,x=!0),g&&(_=v,T=p,v=l.xfill,p=l.yfill);var O="default";if(A?O=A==="best"?"smooth":"fast":u._islinear&&f===0&&c===0&&Hmt()&&(O="fast"),O!=="fast"){var V=A==="best"?0:.5;E=Math.max(-V*n._length,E),M=Math.min((1+V)*n._length,M),C=Math.max(-V*a._length,C),S=Math.min((1+V)*a._length,S)}var B=Math.round(M-E),F=Math.round(S-C),N=E>=n._length||M<=0||C>=a._length||S<=0;if(N){var Z=s.selectAll("image").data([]);Z.exit().remove(),sme(s);return}var J,re;O==="fast"?(J=w,re=b):(J=B,re=F);var le=document.createElement("canvas");le.width=J,le.height=re;var fe=le.getContext("2d",{willReadFrequently:!0}),K=Nmt(u,{noNumericCheck:!0,returnArray:!0}),X,ae;O==="fast"?(X=k?function(Wr){return w-1-Wr}:Ap.identity,ae=x?function(Wr){return b-1-Wr}:Ap.identity):(X=function(Wr){return Ap.constrain(Math.round(n.c2p(v[Wr])-E),0,B)},ae=function(Wr){return Ap.constrain(Math.round(a.c2p(p[Wr])-C),0,F)});var oe=ae(0),_e=[oe,oe],be=k?0:1,he=x?0:1,ie=0,ye=0,ue=0,Ae=0,Re,ze,et,Le,Ie;function dt(Wr,qn){if(Wr!==void 0){var vi=K(Wr);return vi[0]=Math.round(vi[0]),vi[1]=Math.round(vi[1]),vi[2]=Math.round(vi[2]),ie+=qn,ye+=vi[0]*qn,ue+=vi[1]*qn,Ae+=vi[2]*qn,vi}return[0,0,0,0]}function ct(Wr,qn,vi,Mi){var Ui=Wr[vi.bin0];if(Ui===void 0)return dt(void 0,1);var ji=Wr[vi.bin1],ea=qn[vi.bin0],Ra=qn[vi.bin1],Li=ji-Ui||0,Yn=ea-Ui||0,zi;return ji===void 0?Ra===void 0?zi=0:ea===void 0?zi=2*(Ra-Ui):zi=(2*Ra-ea-Ui)*2/3:Ra===void 0?ea===void 0?zi=0:zi=(2*Ui-ji-ea)*2/3:ea===void 0?zi=(2*Ra-ji-Ui)*2/3:zi=Ra+Ui-ji-ea,dt(Ui+vi.frac*Li+Mi.frac*(Yn+vi.frac*zi))}if(O!=="default"){var Ke=0,_t;try{_t=new Uint8Array(J*re*4)}catch(Wr){_t=new Array(J*re*4)}if(O==="smooth"){var zt=_||v,Et=T||p,Se=new Array(zt.length),je=new Array(Et.length),ht=new Array(B),nt=_?ume:lme,lt=T?ume:lme,rt,Xe,ft;for(P=0;P<zt.length;P++)Se[P]=Math.round(n.c2p(zt[P])-E);for(P=0;P<Et.length;P++)je[P]=Math.round(a.c2p(Et[P])-C);for(P=0;P<B;P++)ht[P]=nt(P,Se);for(D=0;D<F;D++)for(rt=lt(D,je),Xe=h[rt.bin0],ft=h[rt.bin1],P=0;P<B;P++,Ke+=4)Ie=ct(Xe,ft,ht[P],rt),fme(_t,Ke,Ie)}else for(D=0;D<b;D++)for(Le=h[D],_e=ae(D),P=0;P<w;P++)Ie=dt(Le[P],1),Ke=(_e*w+X(P))*4,fme(_t,Ke,Ie);var gt=fe.createImageData(J,re);try{gt.data.set(_t)}catch(Wr){var Qt=gt.data,Jt=Qt.length;for(D=0;D<Jt;D++)Qt[D]=_t[D]}fe.putImageData(gt,0,0)}else{var fr=Math.floor(f/2),nr=Math.floor(c/2);for(D=0;D<b;D++)if(Le=h[D],_e.reverse(),_e[he]=ae(D+1),!(_e[0]===_e[1]||_e[0]===void 0||_e[1]===void 0))for(ze=X(0),Re=[ze,ze],P=0;P<w;P++)Re.reverse(),Re[be]=X(P+1),!(Re[0]===Re[1]||Re[0]===void 0||Re[1]===void 0)&&(et=Le[P],Ie=dt(et,(Re[1]-Re[0])*(_e[1]-_e[0])),fe.fillStyle="rgba("+Ie.join(",")+")",fe.fillRect(Re[0]+fr,_e[0]+nr,Re[1]-Re[0]-f,_e[1]-_e[0]-c))}ye=Math.round(ye/ie),ue=Math.round(ue/ie),Ae=Math.round(Ae/ie);var ur=Dmt("rgb("+ye+","+ue+","+Ae+")");e._hmpixcount=(e._hmpixcount||0)+ie,e._hmlumcount=(e._hmlumcount||0)+ie*ur.getLuminance();var qt=s.selectAll("image").data(o);qt.enter().append("svg:image").attr({xmlns:Umt.svg,preserveAspectRatio:"none"}),qt.attr({height:F,width:B,x:E,y:C,"xlink:href":le.toDataURL("image/png")}),O==="fast"&&!A&&qt.attr("style",Gmt),sme(s);var xt=u.texttemplate;if(xt){var At=Bmt(u),Je={type:"linear",range:[At.min,At.max],_separators:n._separators,_numFormat:n._numFormat},xe=u.type==="histogram2dcontour",ce=u.type==="contour",ge=ce?1:0,qe=ce?b-1:b,yt=ce?1:0,Vt=ce?w-1:w,Ut=[];for(P=ge;P<qe;P++){var br;if(ce)br=l.y[P];else if(xe){if(P===0||P===b-1)continue;br=l.y[P]}else if(l.yCenter)br=l.yCenter[P];else{if(P+1===b&&l.y[P+1]===void 0)continue;br=(l.y[P]+l.y[P+1])/2}var xr=Math.round(a.c2p(br));if(!(0>xr||xr>a._length))for(D=yt;D<Vt;D++){var Or;if(ce)Or=l.x[D];else if(xe){if(D===0||D===w-1)continue;Or=l.x[D]}else if(l.xCenter)Or=l.xCenter[D];else{if(D+1===w&&l.x[D+1]===void 0)continue;Or=(l.x[D]+l.x[D+1])/2}var Hr=Math.round(n.c2p(Or));if(!(0>Hr||Hr>n._length)){var gr=zmt({x:Or,y:br},u,e._fullLayout);gr.x=Or,gr.y=br;var Ur=l.z[P][D];Ur===void 0?(gr.z="",gr.zLabel=""):(gr.z=Ur,gr.zLabel=qmt.tickText(Je,Ur,"hover").text);var _n=l.text&&l.text[P]&&l.text[P][D];(_n===void 0||_n===!1)&&(_n=""),gr.text=_n;var si=Ap.texttemplateString(xt,gr,e._fullLayout._d3locale,gr,u._meta||{});if(si){var xn=si.split("<br>"),ci=xn.length,Wi=0;for(z=0;z<ci;z++)Wi=Math.max(Wi,xn[z].length);Ut.push({l:ci,c:Wi,t:si,x:Hr,y:xr,z:Ur})}}}}var oi=u.textfont,Zi=oi.family,Ei=oi.size,at=e._fullLayout.font.size;if(!Ei||Ei==="auto"){var Ne=1/0,st=1/0,mt=0,Ot=0;for(z=0;z<Ut.length;z++){var tr=Ut[z];if(mt=Math.max(mt,tr.l),Ot=Math.max(Ot,tr.c),z<Ut.length-1){var pr=Ut[z+1],hr=Math.abs(pr.x-tr.x),Rr=Math.abs(pr.y-tr.y);hr&&(Ne=Math.min(Ne,hr)),Rr&&(st=Math.min(st,Rr))}}!isFinite(Ne)||!isFinite(st)?Ei=at:(Ne-=f,st-=c,Ne/=Ot,st/=mt,Ne/=X9/2,st/=X9,Ei=Math.min(Math.floor(Ne),Math.floor(st),at))}if(Ei<=0||!isFinite(Ei))return;var Gr=function(Wr){return Wr.x},Yr=function(Wr){return Wr.y-Ei*(Wr.l*X9/2-1)},vn=hme(s).data(Ut);vn.enter().append("g").classed(cme,1).append("text").attr("text-anchor","middle").each(function(Wr){var qn=ame.select(this),vi=oi.color;(!vi||vi==="auto")&&(vi=Omt.contrast("rgba("+K(Wr.z).join()+")")),qn.attr("data-notex",1).call(ome.positionText,Gr(Wr),Yr(Wr)).call(Fmt.font,Zi,Ei,vi).text(Wr.t).call(ome.convertToTspans,e)})}})};function lme(e,t){var r=t.length-2,i=Ap.constrain(Ap.findBin(e,t),0,r),n=t[i],a=t[i+1],o=Ap.constrain(i+(e-n)/(a-n)-.5,0,r),s=Math.round(o),l=Math.abs(o-s);return!o||o===r||!l?{bin0:s,bin1:s,frac:0}:{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}}function ume(e,t){var r=t.length-1,i=Ap.constrain(Ap.findBin(e,t),0,r),n=t[i],a=t[i+1],o=(e-n)/(a-n)||0;return o<=0?{bin0:i,bin1:i,frac:0}:o<.5?{bin0:i,bin1:i+1,frac:o}:{bin0:i+1,bin1:i,frac:1-o}}function fme(e,t,r){e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=Math.round(r[3]*255)}});var jx=ne((cor,dme)=>{"use strict";dme.exports={min:"zmin",max:"zmax"}});var bP=ne((hor,pme)=>{"use strict";var Ymt=Ai();pme.exports=function(t){Ymt.select(t).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}});var TP=ne((vor,yme)=>{"use strict";var gme=Ol(),rS=Wt(),wP=rS.isArrayOrTypedArray,Wmt=Xi(),Xmt=ul().extractOpts;yme.exports=function(t,r,i,n,a){a||(a={});var o=a.isContour,s=t.cd[0],l=s.trace,u=t.xa,f=t.ya,c=s.x,h=s.y,v=s.z,p=s.xCenter,_=s.yCenter,T=s.zmask,g=l.zhoverformat,A=c,b=h,w,k,x,E;if(t.index!==!1){try{x=Math.round(t.index[1]),E=Math.round(t.index[0])}catch(Z){rS.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index);return}if(x<0||x>=v[0].length||E<0||E>v.length)return}else{if(gme.inbox(r-c[0],r-c[c.length-1],0)>0||gme.inbox(i-h[0],i-h[h.length-1],0)>0)return;if(o){var M;for(A=[2*c[0]-c[1]],M=1;M<c.length;M++)A.push((c[M]+c[M-1])/2);for(A.push([2*c[c.length-1]-c[c.length-2]]),b=[2*h[0]-h[1]],M=1;M<h.length;M++)b.push((h[M]+h[M-1])/2);b.push([2*h[h.length-1]-h[h.length-2]])}x=Math.max(0,Math.min(A.length-2,rS.findBin(r,A))),E=Math.max(0,Math.min(b.length-2,rS.findBin(i,b)))}var d=u.c2p(c[x]),C=u.c2p(c[x+1]),S=f.c2p(h[E]),P=f.c2p(h[E+1]),D,z;o?(D=s.orig_x||c,z=s.orig_y||h,C=d,w=D[x],P=S,k=z[E]):(D=s.orig_x||p||c,z=s.orig_y||_||h,w=p?D[x]:(D[x]+D[x+1])/2,k=_?z[E]:(z[E]+z[E+1])/2,u&&u.type==="category"&&(w=c[x]),f&&f.type==="category"&&(k=h[E]),l.zsmooth&&(d=C=u.c2p(w),S=P=f.c2p(k)));var O=v[E][x];if(T&&!T[E][x]&&(O=void 0),!(O===void 0&&!l.hoverongaps)){var V;wP(s.hovertext)&&wP(s.hovertext[E])?V=s.hovertext[E][x]:wP(s.text)&&wP(s.text[E])&&(V=s.text[E][x]);var B=Xmt(l),F={type:"linear",range:[B.min,B.max],hoverformat:g,_separators:u._separators,_numFormat:u._numFormat},N=Wmt.tickText(F,O,"hover").text;return[rS.extendFlat(t,{index:l._after2before?l._after2before[E][x]:[E,x],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:d,x1:C,y0:S,y1:P,xLabelVal:w,yLabelVal:k,zLabelVal:O,zLabel:N,text:V})]}}});var xme=ne((dor,mme)=>{"use strict";mme.exports={attributes:Xx(),supplyDefaults:bye(),calc:tS(),plot:_P(),colorbar:jx(),style:bP(),hoverPoints:TP(),moduleType:"trace",name:"heatmap",basePlotModule:vu(),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}});var bme=ne((por,_me)=>{"use strict";_me.exports=xme()});var Z9=ne((gor,wme)=>{"use strict";wme.exports=function(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}});var Ame=ne((yor,Tme)=>{"use strict";Tme.exports={eventDataKeys:["binNumber"]}});var AP=ne((mor,Eme)=>{"use strict";var ud=J0(),Mme=kl().axisHoverFormat,Zmt=Ba().hovertemplateAttrs,jmt=Ba().texttemplateAttrs,j9=ll(),Sme=Z9(),Kmt=Ame(),K9=oa().extendFlat;Eme.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:Mme("x"),yhoverformat:Mme("y"),text:K9({},ud.text,{}),hovertext:K9({},ud.hovertext,{}),orientation:ud.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:Sme("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:Sme("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:Zmt({},{keys:Kmt.eventDataKeys}),texttemplate:jmt({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:K9({},ud.textposition,{arrayOk:!1}),textfont:j9({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:j9({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:j9({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:ud.insidetextanchor,textangle:ud.textangle,cliponaxis:ud.cliponaxis,constraintext:ud.constraintext,marker:ud.marker,offsetgroup:ud.offsetgroup,alignmentgroup:ud.alignmentgroup,selected:ud.selected,unselected:ud.unselected,_deprecated:{bardir:ud._deprecated.bardir}}});var Pme=ne((xor,Lme)=>{"use strict";var kme=wi(),nS=Wt(),Cme=_i(),Jmt=Fd().handleText,Qmt=JL(),$mt=AP();Lme.exports=function(t,r,i,n){function a(A,b){return nS.coerce(t,r,$mt,A,b)}var o=a("x"),s=a("y"),l=a("cumulative.enabled");l&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text");var u=a("textposition");Jmt(t,r,n,a,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var f=a("orientation",s&&!o?"h":"v"),c=f==="v"?"x":"y",h=f==="v"?"y":"x",v=o&&s?Math.min(nS.minRowLength(o)&&nS.minRowLength(s)):nS.minRowLength(r[c]||[]);if(!v){r.visible=!1;return}r._length=v;var p=kme.getComponentMethod("calendars","handleTraceDefaults");p(t,r,["x","y"],n);var _=r[h];_&&a("histfunc"),a("histnorm"),a("autobin"+c),Qmt(t,r,a,i,n),nS.coerceSelectionMarkerOpacity(r,a);var T=(r.marker.line||{}).color,g=kme.getComponentMethod("errorbars","supplyDefaults");g(t,r,T||Cme.defaultLine,{axis:"y"}),g(t,r,T||Cme.defaultLine,{axis:"x",inherit:"y"})}});var SP=ne((_or,Ime)=>{"use strict";var iS=Wt(),e1t=zl(),MP=wi().traceIs,t1t=Dx(),r1t=Fd().validateCornerradius,Rme=iS.nestedProperty,J9=mm().getAxisGroup,Dme=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n1t=["x","y"];Ime.exports=function(t,r){var i=r._histogramBinOpts={},n=[],a={},o=[],s,l,u,f,c,h,v;function p(O,V){return iS.coerce(s._input,s,s._module.attributes,O,V)}function _(O){return O.orientation==="v"?"x":"y"}function T(O,V){var B=e1t.getFromTrace({_fullLayout:r},O,V);return B.type}function g(O,V,B){var F=O.uid+"__"+B;V||(V=F);var N=T(O,B),Z=O[B+"calendar"]||"",J=i[V],re=!0;J&&(N===J.axType&&Z===J.calendar?(re=!1,J.traces.push(O),J.dirs.push(B)):(V=F,N!==J.axType&&iS.warn(["Attempted to group the bins of trace",O.index,"set on a","type:"+N,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),Z!==J.calendar&&iS.warn(["Attempted to group the bins of trace",O.index,"set with a",Z,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),re&&(i[V]={traces:[O],dirs:[B],axType:N,calendar:O[B+"calendar"]||""}),O["_"+B+"bingroup"]=V}for(c=0;c<t.length;c++)if(s=t[c],MP(s,"histogram")){if(n.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,s.type==="histogram"){var A=p("marker.cornerradius",r.barcornerradius);s.marker&&(s.marker.cornerradius=r1t(A))}MP(s,"2dMap")||t1t(s._input,s,r,p)}var b=r._alignmentOpts||{};for(c=0;c<n.length;c++){if(s=n[c],u="",!MP(s,"2dMap")){if(f=_(s),r.barmode==="group"&&s.alignmentgroup){var w=s[f+"axis"],k=J9(r,w)+s.orientation;(b[k]||{})[s.alignmentgroup]&&(u=k)}!u&&r.barmode!=="overlay"&&(u=J9(r,s.xaxis)+J9(r,s.yaxis)+_(s))}u?(a[u]||(a[u]=[]),a[u].push(s)):o.push(s)}for(u in a){if(l=a[u],l.length===1){o.push(l[0]);continue}var x=!1;for(l.length&&(s=l[0],x=p("bingroup")),u=x||u,c=0;c<l.length;c++){s=l[c];var E=s._input.bingroup;E&&E!==u&&iS.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",E,"setting."].join(" ")),s.bingroup=u,g(s,u,_(s))}}for(c=0;c<o.length;c++){s=o[c];var M=p("bingroup");if(MP(s,"2dMap"))for(v=0;v<2;v++){f=n1t[v];var d=p(f+"bingroup",M?M+"__"+f:null);g(s,d,f)}else g(s,M,_(s))}for(u in i){var C=i[u];for(l=C.traces,h=0;h<Dme.length;h++){var S=Dme[h],P=S.name,D,z;if(!(P==="nbins"&&C.sizeFound)){for(c=0;c<l.length;c++){if(s=l[c],f=C.dirs[c],D=S.aStr[f],Rme(s._input,D).get()!==void 0){C[P]=p(D),C[P+"Found"]=!0;break}z=(s._autoBin||{})[f]||{},z[P]&&Rme(s,D).set(z[P])}if(P==="start"||P==="end")for(;c<l.length;c++)s=l[c],s["_"+f+"bingroup"]&&(z=(s._autoBin||{})[f]||{},p(D,z[P]));P==="nbins"&&!C.sizeFound&&!C.nbinsFound&&(s=l[0],C[P]=p(D))}}}}});var qme=ne((bor,Fme)=>{"use strict";var i1t=vw().hoverPoints,a1t=Xi().hoverLabelText;Fme.exports=function(t,r,i,n,a){var o=i1t(t,r,i,n,a);if(o){t=o[0];var s=t.cd[t.index],l=t.cd[0].trace;if(!l.cumulative.enabled){var u=l.orientation==="h"?"y":"x";t[u+"Label"]=a1t(t[u+"a"],[s.ph0,s.ph1],l[u+"hoverformat"])}return o}}});var Q9=ne((wor,zme)=>{"use strict";zme.exports=function(t,r,i,n,a){if(t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"zLabelVal"in r&&(t.z=r.zLabelVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),!(i.cumulative||{}).enabled){var o=Array.isArray(a)?n[0].pts[a[0]][a[1]]:n[a].pts;t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex;var s;if(i._indexToPoints){s=[];for(var l=0;l<o.length;l++)s=s.concat(i._indexToPoints[o[l]])}else s=o;t.pointIndices=s}return t}});var Bme=ne((Tor,Ome)=>{"use strict";Ome.exports={attributes:AP(),layoutAttributes:KL(),supplyDefaults:Pme(),crossTraceDefaults:SP(),supplyLayoutDefaults:g9(),calc:B9().calc,crossTraceCalc:Ix().crossTraceCalc,plot:Yx().plot,layerName:"barlayer",style:_p().style,styleOnSelect:_p().styleOnSelect,colorbar:ph(),hoverPoints:qme(),selectPoints:dw(),eventData:Q9(),moduleType:"trace",name:"histogram",basePlotModule:vu(),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}});var Ume=ne((Aor,Nme)=>{"use strict";Nme.exports=Bme()});var kP=ne((Mor,Hme)=>{"use strict";var m0=AP(),Vme=Z9(),EP=Xx(),o1t=es(),$9=kl().axisHoverFormat,s1t=Ba().hovertemplateAttrs,l1t=Ba().texttemplateAttrs,u1t=Ps(),aS=oa().extendFlat;Hme.exports=aS({x:m0.x,y:m0.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m0.histnorm,histfunc:m0.histfunc,nbinsx:m0.nbinsx,xbins:Vme("x"),nbinsy:m0.nbinsy,ybins:Vme("y"),autobinx:m0.autobinx,autobiny:m0.autobiny,bingroup:aS({},m0.bingroup,{}),xbingroup:aS({},m0.bingroup,{}),ybingroup:aS({},m0.bingroup,{}),xgap:EP.xgap,ygap:EP.ygap,zsmooth:EP.zsmooth,xhoverformat:$9("x"),yhoverformat:$9("y"),zhoverformat:$9("z",1),hovertemplate:s1t({},{keys:"z"}),texttemplate:l1t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:EP.textfont,showlegend:aS({},o1t.showlegend,{dflt:!1})},u1t("",{cLetter:"z",autoColorDflt:!1}))});var eN=ne((Sor,Yme)=>{"use strict";var f1t=wi(),Gme=Wt();Yme.exports=function(t,r,i,n){var a=i("x"),o=i("y"),s=Gme.minRowLength(a),l=Gme.minRowLength(o);if(!s||!l){r.visible=!1;return}r._length=Math.min(s,l);var u=f1t.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);var f=i("z")||i("marker.color");f&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")}});var Xme=ne((Eor,Wme)=>{"use strict";var c1t=Wt(),h1t=eN(),v1t=R9(),d1t=Kf(),p1t=eS(),g1t=kP();Wme.exports=function(t,r,i,n){function a(o,s){return c1t.coerce(t,r,g1t,o,s)}h1t(t,r,a,n),r.visible!==!1&&(v1t(t,r,a,n),d1t(t,r,n,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),p1t(a,n),a("xhoverformat"),a("yhoverformat"))}});var Kme=ne((kor,jme)=>{"use strict";var y1t=TP(),Zme=Xi().hoverLabelText;jme.exports=function(t,r,i,n,a){var o=y1t(t,r,i,n,a);if(o){t=o[0];var s=t.index,l=s[0],u=s[1],f=t.cd[0],c=f.trace,h=f.xRanges[u],v=f.yRanges[l];return t.xLabel=Zme(t.xa,[h[0],h[1]],c.xhoverformat),t.yLabel=Zme(t.ya,[v[0],v[1]],c.yhoverformat),o}}});var Qme=ne((Cor,Jme)=>{"use strict";Jme.exports={attributes:kP(),supplyDefaults:Xme(),crossTraceDefaults:SP(),calc:tS(),plot:_P(),layerName:"heatmaplayer",colorbar:jx(),style:bP(),hoverPoints:Kme(),eventData:Q9(),moduleType:"trace",name:"histogram2d",basePlotModule:vu(),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}});var e1e=ne((Lor,$me)=>{"use strict";$me.exports=Qme()});var oS=ne((Por,t1e)=>{"use strict";t1e.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}});var sS=ne((Ror,a1e)=>{"use strict";var Ef=Xx(),rN=cu(),n1e=kl(),tN=n1e.axisHoverFormat,m1t=n1e.descriptionOnlyNumbers,x1t=Ps(),_1t=hc().dash,b1t=ll(),bw=oa().extendFlat,i1e=oS(),w1t=i1e.COMPARISON_OPS2,T1t=i1e.INTERVAL_OPS,r1e=rN.line;a1e.exports=bw({z:Ef.z,x:Ef.x,x0:Ef.x0,dx:Ef.dx,y:Ef.y,y0:Ef.y0,dy:Ef.dy,xperiod:Ef.xperiod,yperiod:Ef.yperiod,xperiod0:rN.xperiod0,yperiod0:rN.yperiod0,xperiodalignment:Ef.xperiodalignment,yperiodalignment:Ef.yperiodalignment,text:Ef.text,hovertext:Ef.hovertext,transpose:Ef.transpose,xtype:Ef.xtype,ytype:Ef.ytype,xhoverformat:tN("x"),yhoverformat:tN("y"),zhoverformat:tN("z",1),hovertemplate:Ef.hovertemplate,texttemplate:bw({},Ef.texttemplate,{}),textfont:bw({},Ef.textfont,{}),hoverongaps:Ef.hoverongaps,connectgaps:bw({},Ef.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:b1t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:m1t("contour label")},operation:{valType:"enumerated",values:[].concat(w1t).concat(T1t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:bw({},r1e.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:_1t,smoothing:bw({},r1e.smoothing,{}),editType:"plot"}},x1t("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))});var iN=ne((Dor,s1e)=>{"use strict";var Kh=kP(),$g=sS(),A1t=Ps(),nN=kl().axisHoverFormat,o1e=oa().extendFlat;s1e.exports=o1e({x:Kh.x,y:Kh.y,z:Kh.z,marker:Kh.marker,histnorm:Kh.histnorm,histfunc:Kh.histfunc,nbinsx:Kh.nbinsx,xbins:Kh.xbins,nbinsy:Kh.nbinsy,ybins:Kh.ybins,autobinx:Kh.autobinx,autobiny:Kh.autobiny,bingroup:Kh.bingroup,xbingroup:Kh.xbingroup,ybingroup:Kh.ybingroup,autocontour:$g.autocontour,ncontours:$g.ncontours,contours:$g.contours,line:{color:$g.line.color,width:o1e({},$g.line.width,{dflt:.5}),dash:$g.line.dash,smoothing:$g.line.smoothing,editType:"plot"},xhoverformat:nN("x"),yhoverformat:nN("y"),zhoverformat:nN("z",1),hovertemplate:Kh.hovertemplate,texttemplate:$g.texttemplate,textfont:$g.textfont},A1t("",{cLetter:"z",editTypeOverride:"calc"}))});var CP=ne((Ior,l1e)=>{"use strict";l1e.exports=function(t,r,i,n){var a=n("contours.start"),o=n("contours.end"),s=a===!1||o===!1,l=i("contours.size"),u;s?u=r.autocontour=!0:u=i("autocontour",!1),(u||!l)&&i("ncontours")}});var aN=ne((For,u1e)=>{"use strict";var M1t=Wt();u1e.exports=function(t,r,i,n){n||(n={});var a=t("contours.showlabels");if(a){var o=r.font;M1t.coerceFont(t,"contours.labelfont",{family:o.family,size:o.size,color:i}),t("contours.labelformat")}n.hasHover!==!1&&t("zhoverformat")}});var LP=ne((qor,f1e)=>{"use strict";var S1t=Kf(),E1t=aN();f1e.exports=function(t,r,i,n,a){var o=i("contours.coloring"),s,l="";o==="fill"&&(s=i("contours.showlines")),s!==!1&&(o!=="lines"&&(l=i("line.color","#000")),i("line.width",.5),i("line.dash")),o!=="none"&&(t.showlegend!==!0&&(r.showlegend=!1),r._dfltShowLegend=!1,S1t(t,r,n,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),E1t(i,n,l,a)}});var d1e=ne((zor,v1e)=>{"use strict";var c1e=Wt(),k1t=eN(),C1t=CP(),L1t=LP(),P1t=eS(),h1e=iN();v1e.exports=function(t,r,i,n){function a(s,l){return c1e.coerce(t,r,h1e,s,l)}function o(s){return c1e.coerce2(t,r,h1e,s)}k1t(t,r,a,n),r.visible!==!1&&(C1t(t,r,a,o),L1t(t,r,a,n),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&P1t(a,n))}});var lN=ne((Oor,g1e)=>{"use strict";var sN=Xi(),oN=Wt();g1e.exports=function(t,r){var i=t.contours;if(t.autocontour){var n=t.zmin,a=t.zmax;(t.zauto||n===void 0)&&(n=oN.aggNums(Math.min,null,r)),(t.zauto||a===void 0)&&(a=oN.aggNums(Math.max,null,r));var o=p1e(n,a,t.ncontours);i.size=o.dtick,i.start=sN.tickFirst(o),o.range.reverse(),i.end=sN.tickFirst(o),i.start===n&&(i.start+=i.size),i.end===a&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),oN.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,l=i.end,u=t._input.contours;if(s>l&&(i.start=u.start=l,l=i.end=u.end=s,s=i.start),!(i.size>0)){var f;s===l?f=1:f=p1e(s,l,t.ncontours).dtick,u.size=i.size=f}}};function p1e(e,t,r){var i={type:"linear",range:[e,t]};return sN.autoTicks(i,(t-e)/(r||15)),i}});var lS=ne((Bor,y1e)=>{"use strict";y1e.exports=function(t){return t.end+t.size/1e6}});var uN=ne((Nor,x1e)=>{"use strict";var m1e=ul(),R1t=tS(),D1t=lN(),I1t=lS();x1e.exports=function(t,r){var i=R1t(t,r),n=i[0].z;D1t(r,n);var a=r.contours,o=m1e.extractOpts(r),s;if(a.coloring==="heatmap"&&o.auto&&r.autocontour===!1){var l=a.start,u=I1t(a),f=a.size||1,c=Math.floor((u-l)/f)+1;isFinite(f)||(f=1,c=1);var h=l-f/2,v=h+c*f;s=[h,v]}else s=n;return m1e.calc(t,r,{vals:s,cLetter:"z"}),i}});var uS=ne((Uor,_1e)=>{"use strict";_1e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}});var fN=ne((Vor,b1e)=>{"use strict";var PP=uS();b1e.exports=function(t){var r=t[0].z,i=r.length,n=r[0].length,a=i===2||n===2,o,s,l,u,f,c,h,v,p;for(s=0;s<i-1;s++)for(u=[],s===0&&(u=u.concat(PP.BOTTOMSTART)),s===i-2&&(u=u.concat(PP.TOPSTART)),o=0;o<n-1;o++)for(l=u.slice(),o===0&&(l=l.concat(PP.LEFTSTART)),o===n-2&&(l=l.concat(PP.RIGHTSTART)),f=o+","+s,c=[[r[s][o],r[s][o+1]],[r[s+1][o],r[s+1][o+1]]],p=0;p<t.length;p++)v=t[p],h=F1t(v.level,c),h&&(v.crossings[f]=h,l.indexOf(h)!==-1&&(v.starts.push([o,s]),a&&l.indexOf(h,l.indexOf(h)+1)!==-1&&v.starts.push([o,s])))};function F1t(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var i=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>i?r===5?713:1114:r===5?104:208}return r===15?0:r}});var cN=ne((Hor,A1e)=>{"use strict";var RP=Wt(),ww=uS();A1e.exports=function(t,r,i){var n,a,o,s,l;for(r=r||.01,i=i||.01,o=0;o<t.length;o++){for(s=t[o],l=0;l<s.starts.length;l++)a=s.starts[l],w1e(s,a,"edge",r,i);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,a=Object.keys(s.crossings)[0].split(",").map(Number),w1e(s,a,void 0,r,i);n===1e4&&RP.log("Infinite loop in contour?")}};function fS(e,t,r,i){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<i}function q1t(e,t){var r=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+i*i)}function w1e(e,t,r,i,n){var a=t.join(","),o=e.crossings[a],s=z1t(o,r,t),l=[T1e(e,t,[-s[0],-s[1]])],u=e.z.length,f=e.z[0].length,c=t.slice(),h=s.slice(),v;for(v=0;v<1e4;v++){if(o>20?(o=ww.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[a]=ww.SADDLEREMAINDER[o]):delete e.crossings[a],s=ww.NEWDELTA[o],!s){RP.log("Found bad marching index:",o,t,e.level);break}l.push(T1e(e,t,s)),t[0]+=s[0],t[1]+=s[1],a=t.join(","),fS(l[l.length-1],l[l.length-2],i,n)&&l.pop();var p=s[0]&&(t[0]<0||t[0]>f-2)||s[1]&&(t[1]<0||t[1]>u-2),_=t[0]===c[0]&&t[1]===c[1]&&s[0]===h[0]&&s[1]===h[1];if(_||r&&p)break;o=e.crossings[a]}v===1e4&&RP.log("Infinite loop in contour?");var T=fS(l[0],l[l.length-1],i,n),g=0,A=.2*e.smoothing,b=[],w=0,k,x,E,M,d,C,S,P,D,z,O;for(v=1;v<l.length;v++)S=q1t(l[v],l[v-1]),g+=S,b.push(S);var V=g/b.length*A;function B(Z){return l[Z%l.length]}for(v=l.length-2;v>=w;v--)if(k=b[v],k<V){for(E=0,x=v-1;x>=w&&k+b[x]<V;x--)k+=b[x];if(T&&v===l.length-2)for(E=0;E<x&&k+b[E]<V;E++)k+=b[E];d=v-x+E+1,C=Math.floor((v+x+E+2)/2),!T&&v===l.length-2?M=l[l.length-1]:!T&&x===-1?M=l[0]:d%2?M=B(C):M=[(B(C)[0]+B(C+1)[0])/2,(B(C)[1]+B(C+1)[1])/2],l.splice(x+1,v-x+1,M),v=x+1,E&&(w=E),T&&(v===l.length-2?l[E]=l[l.length-1]:v===0&&(l[l.length-1]=l[0]))}for(l.splice(0,w),v=0;v<l.length;v++)l[v].length=2;if(!(l.length<2))if(T)l.pop(),e.paths.push(l);else{r||RP.log("Unclosed interior contour?",e.level,c.join(","),l.join("L"));var F=!1;for(P=0;P<e.edgepaths.length;P++)if(z=e.edgepaths[P],!F&&fS(z[0],l[l.length-1],i,n)){l.pop(),F=!0;var N=!1;for(D=0;D<e.edgepaths.length;D++)if(O=e.edgepaths[D],fS(O[O.length-1],l[0],i,n)){N=!0,l.shift(),e.edgepaths.splice(P,1),D===P?e.paths.push(l.concat(O)):(D>P&&D--,e.edgepaths[D]=O.concat(l,z));break}N||(e.edgepaths[P]=l.concat(z))}for(P=0;P<e.edgepaths.length&&!F;P++)z=e.edgepaths[P],fS(z[z.length-1],l[0],i,n)&&(l.shift(),e.edgepaths[P]=z.concat(l),F=!0);F||e.edgepaths.push(l)}}function z1t(e,t,r){var i=0,n=0;return e>20&&t?e===208||e===1114?i=r[0]===0?1:-1:n=r[1]===0?1:-1:ww.BOTTOMSTART.indexOf(e)!==-1?n=1:ww.LEFTSTART.indexOf(e)!==-1?i=1:ww.TOPSTART.indexOf(e)!==-1?n=-1:i=-1,[i,n]}function T1e(e,t,r){var i=t[0]+Math.max(r[0],0),n=t[1]+Math.max(r[1],0),a=e.z[n][i],o=e.xaxis,s=e.yaxis;if(r[1]){var l=(e.level-a)/(e.z[n][i+1]-a),u=(l!==1?(1-l)*o.c2l(e.x[i]):0)+(l!==0?l*o.c2l(e.x[i+1]):0);return[o.c2p(o.l2c(u),!0),s.c2p(e.y[n],!0),i+l,n]}else{var f=(e.level-a)/(e.z[n+1][i]-a),c=(f!==1?(1-f)*s.c2l(e.y[n]):0)+(f!==0?f*s.c2l(e.y[n+1]):0);return[o.c2p(e.x[i],!0),s.c2p(s.l2c(c),!0),i,n+f]}}});var k1e=ne((Gor,E1e)=>{"use strict";var hN=oS(),O1t=la();E1e.exports={"[]":M1e("[]"),"][":M1e("]["),">":vN(">"),"<":vN("<"),"=":vN("=")};function S1e(e,t){var r=Array.isArray(t),i;function n(a){return O1t(a)?+a:null}return hN.COMPARISON_OPS2.indexOf(e)!==-1?i=n(r?t[0]:t):hN.INTERVAL_OPS.indexOf(e)!==-1?i=r?[n(t[0]),n(t[1])]:[n(t),n(t)]:hN.SET_OPS.indexOf(e)!==-1&&(i=r?t.map(n):[n(t)]),i}function M1e(e){return function(t){t=S1e(e,t);var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return{start:r,end:i,size:i-r}}}function vN(e){return function(t){return t=S1e(e,t),{start:t,end:1/0,size:1/0}}}});var dN=ne((Yor,L1e)=>{"use strict";var C1e=Wt(),B1t=k1e(),N1t=lS();L1e.exports=function(t,r,i){for(var n=t.type==="constraint"?B1t[t._operation](t.value):t,a=n.size,o=[],s=N1t(n),l=i.trace._carpetTrace,u=l?{xaxis:l.aaxis,yaxis:l.baxis,x:i.a,y:i.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:i.x,y:i.y},f=n.start;f<s;f+=a)if(o.push(C1e.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},u)),o.length>1e3){C1e.warn("Too many contours, clipping at 1000",t);break}return o}});var pN=ne((Wor,R1e)=>{"use strict";var Tw=Wt();R1e.exports=function(e,t){var r,i,n,a=function(l){return l.reverse()},o=function(l){return l};switch(t){case"=":case"<":return e;case">":for(e.length!==1&&Tw.warn("Contour data invalid for the specified inequality operation."),i=e[0],r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);return e;case"][":var s=a;a=o,o=s;case"[]":for(e.length!==2&&Tw.warn("Contour data invalid for the specified inequality range operation."),i=P1e(e[0]),n=P1e(e[1]),r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);for(;n.edgepaths.length;)i.edgepaths.push(o(n.edgepaths.shift()));for(;n.paths.length;)i.paths.push(o(n.paths.shift()));for(;n.starts.length;)i.starts.push(o(n.starts.shift()));return[i]}};function P1e(e){return Tw.extendFlat({},e,{edgepaths:Tw.extendDeep([],e.edgepaths),paths:Tw.extendDeep([],e.paths),starts:Tw.extendDeep([],e.starts)})}});var gN=ne((Xor,D1e)=>{"use strict";D1e.exports=function(e,t){var r=e[0],i=r.z,n;switch(t.type){case"levels":var a=Math.min(i[0][0],i[0][1]);for(n=0;n<e.length;n++){var o=e[n];o.prefixBoundary=!o.edgepaths.length&&(a>o.level||o.starts.length&&a===o.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,u=-1/0,f=1/0;for(n=0;n<l;n++)f=Math.min(f,i[n][0]),f=Math.min(f,i[n][s-1]),u=Math.max(u,i[n][0]),u=Math.max(u,i[n][s-1]);for(n=1;n<s-1;n++)f=Math.min(f,i[0][n]),f=Math.min(f,i[l-1][n]),u=Math.max(u,i[0][n]),u=Math.max(u,i[l-1][n]);var c=t.value,h,v;switch(t._operation){case">":c>u&&(r.prefixBoundary=!0);break;case"<":(c<f||r.starts.length&&c===f)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),(v<f||h>u||r.starts.length&&v===f)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),h<f&&v>u&&(r.prefixBoundary=!0);break}break}}});var DP=ne(Jh=>{"use strict";var hS=Ai(),yc=Wt(),ey=aa(),U1t=ul(),q1e=Es(),I1e=Xi(),F1e=B0(),V1t=_P(),z1e=fN(),O1e=cN(),H1t=dN(),G1t=pN(),B1e=gN(),cS=uS(),eg=cS.LABELOPTIMIZER;Jh.plot=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;yc.makeTraceGroups(n,i,"contour").each(function(s){var l=hS.select(this),u=s[0],f=u.trace,c=u.x,h=u.y,v=f.contours,p=H1t(v,r,u),_=yc.ensureSingle(l,"g","heatmapcoloring"),T=[];v.coloring==="heatmap"&&(T=[s]),V1t(t,r,T,_),z1e(p),O1e(p);var g=a.c2p(c[0],!0),A=a.c2p(c[c.length-1],!0),b=o.c2p(h[0],!0),w=o.c2p(h[h.length-1],!0),k=[[g,w],[A,w],[A,b],[g,b]],x=p;v.type==="constraint"&&(x=G1t(p,v._operation)),Y1t(l,k,v),W1t(l,x,k,v),X1t(l,p,t,u,v),j1t(l,r,t,u,k)})};function Y1t(e,t,r){var i=yc.ensureSingle(e,"g","contourbg"),n=i.selectAll("path").data(r.coloring==="fill"?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function W1t(e,t,r,i){var n=i.coloring==="fill"||i.type==="constraint"&&i._operation!=="=",a="M"+r.join("L")+"Z";n&&B1e(t,i);var o=yc.ensureSingle(e,"g","contourfill"),s=o.selectAll("path").data(n?t:[]);s.enter().append("path"),s.exit().remove(),s.each(function(l){var u=(l.prefixBoundary?a:"")+N1e(l,r);u?hS.select(this).attr("d",u).style("stroke","none"):hS.select(this).remove()})}function N1e(e,t){var r="",i=0,n=e.edgepaths.map(function(g,A){return A}),a=!0,o,s,l,u,f,c;function h(g){return Math.abs(g[1]-t[0][1])<.01}function v(g){return Math.abs(g[1]-t[2][1])<.01}function p(g){return Math.abs(g[0]-t[0][0])<.01}function _(g){return Math.abs(g[0]-t[2][0])<.01}for(;n.length;){for(c=ey.smoothopen(e.edgepaths[i],e.smoothing),r+=a?c:c.replace(/^M/,"L"),n.splice(n.indexOf(i),1),o=e.edgepaths[i][e.edgepaths[i].length-1],u=-1,l=0;l<4;l++){if(!o){yc.log("Missing end?",i,e);break}for(h(o)&&!_(o)?s=t[1]:p(o)?s=t[0]:v(o)?s=t[3]:_(o)&&(s=t[2]),f=0;f<e.edgepaths.length;f++){var T=e.edgepaths[f][0];Math.abs(o[0]-s[0])<.01?Math.abs(o[0]-T[0])<.01&&(T[1]-o[1])*(s[1]-T[1])>=0&&(s=T,u=f):Math.abs(o[1]-s[1])<.01?Math.abs(o[1]-T[1])<.01&&(T[0]-o[0])*(s[0]-T[0])>=0&&(s=T,u=f):yc.log("endpt to newendpt is not vert. or horz.",o,s,T)}if(o=s,u>=0)break;r+="L"+s}if(u===e.edgepaths.length){yc.log("unclosed perimeter path");break}i=u,a=n.indexOf(i)===-1,a&&(i=n[0],r+="Z")}for(i=0;i<e.paths.length;i++)r+=ey.smoothclosed(e.paths[i],e.smoothing);return r}function X1t(e,t,r,i,n){var a=r._context.staticPlot,o=yc.ensureSingle(e,"g","contourlines"),s=n.showlines!==!1,l=n.showlabels,u=s&&l,f=Jh.createLines(o,s||l,t,a),c=Jh.createLineClip(o,u,r,i.trace.uid),h=e.selectAll("g.contourlabels").data(l?[0]:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlabels",!0),l){var v=[],p=[];yc.clearLocationCache();var _=Jh.labelFormatter(r,i),T=ey.tester.append("text").attr("data-notex",1).call(ey.font,n.labelfont),g=t[0].xaxis,A=t[0].yaxis,b=g._length,w=A._length,k=g.range,x=A.range,E=yc.aggNums(Math.min,null,i.x),M=yc.aggNums(Math.max,null,i.x),d=yc.aggNums(Math.min,null,i.y),C=yc.aggNums(Math.max,null,i.y),S=Math.max(g.c2p(E,!0),0),P=Math.min(g.c2p(M,!0),b),D=Math.max(A.c2p(C,!0),0),z=Math.min(A.c2p(d,!0),w),O={};k[0]<k[1]?(O.left=S,O.right=P):(O.left=P,O.right=S),x[0]<x[1]?(O.top=D,O.bottom=z):(O.top=z,O.bottom=D),O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2,v.push([[O.left,O.top],[O.right,O.top],[O.right,O.bottom],[O.left,O.bottom]]);var V=Math.sqrt(b*b+w*w),B=cS.LABELDISTANCE*V/Math.max(1,t.length/cS.LABELINCREASE);f.each(function(F){var N=Jh.calcTextOpts(F.level,_,T,r);hS.select(this).selectAll("path").each(function(){var Z=this,J=yc.getVisibleSegment(Z,O,N.height/2);if(J&&!(J.len<(N.width+N.height)*cS.LABELMIN))for(var re=Math.min(Math.ceil(J.len/B),cS.LABELMAX),le=0;le<re;le++){var fe=Jh.findBestTextLocation(Z,J,N,p,O);if(!fe)break;Jh.addLabelData(fe,N,p,v)}})}),T.remove(),Jh.drawLabels(h,p,r,c,u?v:null)}l&&!s&&f.remove()}Jh.createLines=function(e,t,r,i){var n=r[0].smoothing,a=e.selectAll("g.contourlevel").data(t?r:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var o=a.selectAll("path.openline").data(function(l){return l.pedgepaths||l.edgepaths});o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",function(l){return ey.smoothopen(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke");var s=a.selectAll("path.closedline").data(function(l){return l.ppaths||l.paths});s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",function(l){return ey.smoothclosed(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke")}return a};Jh.createLineClip=function(e,t,r,i){var n=r._fullLayout._clips,a=t?"clipline"+i:null,o=n.selectAll("#"+a).data(t?[0]:[]);return o.exit().remove(),o.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),ey.setClipUrl(e,a,r),o};Jh.labelFormatter=function(e,t){var r=e._fullLayout,i=t.trace,n=i.contours,a={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(n.labelformat)a.tickformat=n.labelformat,F1e(a,r);else{var o=U1t.extractOpts(i);if(o&&o.colorbar&&o.colorbar._axis)a=o.colorbar._axis;else{if(n.type==="constraint"){var s=n.value;yc.isArrayOrTypedArray(s)?a.range=[s[0],s[s.length-1]]:a.range=[s,s]}else a.range=[n.start,n.end],a.nticks=(n.end-n.start)/n.size;a.range[0]===a.range[1]&&(a.range[1]+=a.range[0]||1),a.nticks||(a.nticks=1e3),F1e(a,r),I1e.prepTicks(a),a._tmin=null,a._tmax=null}}return function(l){return I1e.tickText(a,l).text}};Jh.calcTextOpts=function(e,t,r,i){var n=t(e);r.text(n).call(q1e.convertToTspans,i);var a=r.node(),o=ey.bBox(a,!0);return{text:n,width:o.width,height:o.height,fontSize:+a.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}};Jh.findBestTextLocation=function(e,t,r,i,n){var a=r.width,o,s,l,u,f;t.isClosed?(s=t.len/eg.INITIALSEARCHPOINTS,o=t.min+s/2,l=t.max):(s=(t.len-a)/(eg.INITIALSEARCHPOINTS+1),o=t.min+s+a/2,l=t.max-(s+a)/2);for(var c=1/0,h=0;h<eg.ITERATIONS;h++){for(var v=o;v<l;v+=s){var p=yc.getTextLocation(e,t.total,v,a),_=Z1t(p,r,i,n);_<c&&(c=_,f=p,u=v)}if(c>eg.MAXCOST*2)break;h&&(s/=2),o=u-s/2,l=o+s*1.5}if(c<=eg.MAXCOST)return f};function Z1t(e,t,r,i){var n=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.cos(l)*n,f=Math.sin(l)*n,c=(o>i.center?i.right-o:o-i.left)/(u+Math.abs(Math.sin(l)*a)),h=(s>i.middle?i.bottom-s:s-i.top)/(Math.abs(f)+Math.cos(l)*a);if(c<1||h<1)return 1/0;var v=eg.EDGECOST*(1/(c-1)+1/(h-1));v+=eg.ANGLECOST*l*l;for(var p=o-u,_=s-f,T=o+u,g=s+f,A=0;A<r.length;A++){var b=r[A],w=Math.cos(b.theta)*b.width/2,k=Math.sin(b.theta)*b.width/2,x=yc.segmentDistance(p,_,T,g,b.x-w,b.y-k,b.x+w,b.y+k)*2/(t.height+b.height),E=b.level===t.level,M=E?eg.SAMELEVELDISTANCE:1;if(x<=M)return 1/0;var d=eg.NEIGHBORCOST*(E?eg.SAMELEVELFACTOR:1);v+=d/(x-M)}return v}Jh.addLabelData=function(e,t,r,i){var n=t.fontSize,a=t.width+n/3,o=Math.max(0,t.height-n/3),s=e.x,l=e.y,u=e.theta,f=Math.sin(u),c=Math.cos(u),h=function(p,_){return[s+p*c-_*f,l+p*f+_*c]},v=[h(-a/2,-o/2),h(-a/2,o/2),h(a/2,o/2),h(a/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:u,level:t.level,width:a,height:o}),i.push(v)};Jh.drawLabels=function(e,t,r,i,n){var a=e.selectAll("text").data(t,function(u){return u.text+","+u.x+","+u.y+","+u.theta});if(a.exit().remove(),a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(u){var f=u.x+Math.sin(u.theta)*u.dy,c=u.y-Math.cos(u.theta)*u.dy;hS.select(this).text(u.text).attr({x:f,y:c,transform:"rotate("+180*u.theta/Math.PI+" "+f+" "+c+")"}).call(q1e.convertToTspans,r)}),n){for(var o="",s=0;s<n.length;s++)o+="M"+n[s].join("L")+"Z";var l=yc.ensureSingle(i,"path","");l.attr("d",o)}};function j1t(e,t,r,i,n){var a=i.trace,o=r._fullLayout._clips,s="clip"+a.uid,l=o.selectAll("#"+s).data(a.connectgaps?[]:[0]);if(l.enter().append("clipPath").classed("contourclip",!0).attr("id",s),l.exit().remove(),a.connectgaps===!1){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:i.x,y:i.y,z:K1t(i),smoothing:0};z1e([u]),O1e([u]),B1e([u],{type:"levels"});var f=yc.ensureSingle(l,"path","");f.attr("d",(u.prefixBoundary?"M"+n.join("L")+"Z":"")+N1e(u,n))}else s=null;ey.setClipUrl(e,s,r)}function K1t(e){var t=e.trace._emptypoints,r=[],i=e.z.length,n=e.z[0].length,a,o=[],s;for(a=0;a<n;a++)o.push(1);for(a=0;a<i;a++)r.push(o.slice());for(a=0;a<t.length;a++)s=t[a],r[s[0]][s[1]]=0;return e.zmask=r,r}});var mN=ne((jor,U1e)=>{"use strict";var J1t=Ai(),yN=ul(),Q1t=lS();U1e.exports=function(t){var r=t.contours,i=r.start,n=Q1t(r),a=r.size||1,o=Math.floor((n-i)/a)+1,s=r.coloring==="lines"?0:1,l=yN.extractOpts(t);isFinite(a)||(a=1,o=1);var u=l.reversescale?yN.flipScale(l.colorscale):l.colorscale,f=u.length,c=new Array(f),h=new Array(f),v,p,_=l.min,T=l.max;if(r.coloring==="heatmap"){for(p=0;p<f;p++)v=u[p],c[p]=v[0]*(T-_)+_,h[p]=v[1];var g=J1t.extent([_,T,r.start,r.start+a*(o-1)]),A=g[_<T?0:1],b=g[_<T?1:0];A!==_&&(c.splice(0,0,A),h.splice(0,0,h[0])),b!==T&&(c.push(b),h.push(h[h.length-1]))}else{var w=t._input&&typeof t._input.zmin=="number"&&typeof t._input.zmax=="number";for(w&&(i<=_||n>=T)&&(i<=_&&(i=_),n>=T&&(n=T),o=Math.floor((n-i)/a)+1,s=0),p=0;p<f;p++)v=u[p],c[p]=(v[0]*(o+s-1)-s/2)*a+i,h[p]=v[1];(w||t.autocontour)&&(c[0]>_&&(c.unshift(_),h.unshift(h[0])),c[c.length-1]<T&&(c.push(T),h.push(h[h.length-1])))}return yN.makeColorScaleFunc({domain:c,range:h},{noNumericCheck:!0})}});var FP=ne((Kor,H1e)=>{"use strict";var IP=Ai(),V1e=aa(),$1t=bP(),ext=mN();H1e.exports=function(t){var r=IP.select(t).selectAll("g.contour");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=IP.select(this),a=i[0].trace,o=a.contours,s=a.line,l=o.size||1,u=o.start,f=o.type==="constraint",c=!f&&o.coloring==="lines",h=!f&&o.coloring==="fill",v=c||h?ext(a):null;n.selectAll("g.contourlevel").each(function(T){IP.select(this).selectAll("path").call(V1e.lineGroupStyle,s.width,c?v(T.level):s.color,s.dash)});var p=o.labelfont;if(n.selectAll("g.contourlabels text").each(function(T){V1e.font(IP.select(this),{family:p.family,size:p.size,color:p.color||(c?v(T.level):s.color)})}),f)n.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(h){var _;n.selectAll("g.contourfill path").style("fill",function(T){return _===void 0&&(_=T.level),v(T.level+.5*l)}),_===void 0&&(_=u),n.selectAll("g.contourbg path").style("fill",v(_-.5*l))}}),$1t(t)}});var qP=ne((Jor,Y1e)=>{"use strict";var G1e=ul(),txt=mN(),rxt=lS();function nxt(e,t,r){var i=t.contours,n=t.line,a=i.size||1,o=i.coloring,s=txt(t,{isColorbar:!0});if(o==="heatmap"){var l=G1e.extractOpts(t);r._fillgradient=l.reversescale?G1e.flipScale(l.colorscale):l.colorscale,r._zrange=[l.min,l.max]}else o==="fill"&&(r._fillcolor=s);r._line={color:o==="lines"?s:n.color,width:i.showlines!==!1?n.width:0,dash:n.dash},r._levels={start:i.start,end:rxt(i),size:a}}Y1e.exports={min:"zmin",max:"zmax",calc:nxt}});var xN=ne((Qor,W1e)=>{"use strict";var zP=_i(),ixt=TP();W1e.exports=function(t,r,i,n,a){a||(a={}),a.isContour=!0;var o=ixt(t,r,i,n,a);return o&&o.forEach(function(s){var l=s.trace;l.contours.type==="constraint"&&(l.fillcolor&&zP.opacity(l.fillcolor)?s.color=zP.addOpacity(l.fillcolor,1):l.contours.showlines&&zP.opacity(l.line.color)&&(s.color=zP.addOpacity(l.line.color,1)))}),o}});var Z1e=ne(($or,X1e)=>{"use strict";X1e.exports={attributes:iN(),supplyDefaults:d1e(),crossTraceDefaults:SP(),calc:uN(),plot:DP().plot,layerName:"contourlayer",style:FP(),colorbar:qP(),hoverPoints:xN(),moduleType:"trace",name:"histogram2dcontour",basePlotModule:vu(),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}});var K1e=ne((esr,j1e)=>{"use strict";j1e.exports=Z1e()});var _N=ne((tsr,rxe)=>{"use strict";var J1e=la(),axt=aN(),exe=_i(),Q1e=exe.addOpacity,oxt=exe.opacity,txe=oS(),$1e=Wt().isArrayOrTypedArray,sxt=txe.CONSTRAINT_REDUCTION,lxt=txe.COMPARISON_OPS2;rxe.exports=function(t,r,i,n,a,o){var s=r.contours,l,u,f,c=i("contours.operation");if(s._operation=sxt[c],uxt(i,s),c==="="?l=s.showlines=!0:(l=i("contours.showlines"),f=i("fillcolor",Q1e((t.line||{}).color||a,.5))),l){var h=f&&oxt(f)?Q1e(r.fillcolor,1):a;u=i("line.color",h),i("line.width",2),i("line.dash")}i("line.smoothing"),axt(i,n,u,o)};function uxt(e,t){var r;lxt.indexOf(t.operation)===-1?(e("contours.value",[0,1]),$1e(t.value)?t.value.length>2?t.value=t.value.slice(2):t.length===0?t.value=[0,1]:t.length<2?(r=parseFloat(t.value[0]),t.value=[r,r+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:J1e(t.value)&&(r=parseFloat(t.value),t.value=[r,r+1])):(e("contours.value",0),J1e(t.value)||($1e(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}});var axe=ne((rsr,ixe)=>{"use strict";var bN=Wt(),fxt=$M(),cxt=o0(),hxt=_N(),vxt=CP(),dxt=LP(),pxt=eS(),nxe=sS();ixe.exports=function(t,r,i,n){function a(u,f){return bN.coerce(t,r,nxe,u,f)}function o(u){return bN.coerce2(t,r,nxe,u)}var s=fxt(t,r,a,n);if(!s){r.visible=!1;return}cxt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate");var l=a("contours.type")==="constraint";a("connectgaps",bN.isArray1D(r.z)),l?hxt(t,r,a,n,i):(vxt(t,r,a,o),dxt(t,r,a,n)),r.contours&&r.contours.coloring==="heatmap"&&pxt(a,n)}});var sxe=ne((nsr,oxe)=>{"use strict";oxe.exports={attributes:sS(),supplyDefaults:axe(),calc:uN(),plot:DP().plot,style:FP(),colorbar:qP(),hoverPoints:xN(),moduleType:"trace",name:"contour",basePlotModule:vu(),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}});var uxe=ne((isr,lxe)=>{"use strict";lxe.exports=sxe()});var wN=ne((asr,cxe)=>{"use strict";var gxt=Ba().hovertemplateAttrs,yxt=Ba().texttemplateAttrs,mxt=Y0(),zd=cu(),xxt=es(),fxe=Ps(),_xt=hc().dash,Dm=oa().extendFlat,Mp=zd.marker,vS=zd.line,bxt=Mp.line;cxe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:Dm({},zd.mode,{dflt:"markers"}),text:Dm({},zd.text,{}),texttemplate:yxt({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:Dm({},zd.hovertext,{}),line:{color:vS.color,width:vS.width,dash:_xt,backoff:vS.backoff,shape:Dm({},vS.shape,{values:["linear","spline"]}),smoothing:vS.smoothing,editType:"calc"},connectgaps:zd.connectgaps,cliponaxis:zd.cliponaxis,fill:Dm({},zd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:mxt(),marker:Dm({symbol:Mp.symbol,opacity:Mp.opacity,angle:Mp.angle,angleref:Mp.angleref,standoff:Mp.standoff,maxdisplayed:Mp.maxdisplayed,size:Mp.size,sizeref:Mp.sizeref,sizemin:Mp.sizemin,sizemode:Mp.sizemode,line:Dm({width:bxt.width,editType:"calc"},fxe("marker.line")),gradient:Mp.gradient,editType:"calc"},fxe("marker")),textfont:zd.textfont,textposition:zd.textposition,selected:zd.selected,unselected:zd.unselected,hoverinfo:Dm({},xxt.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:zd.hoveron,hovertemplate:gxt()}});var pxe=ne((osr,dxe)=>{"use strict";var hxe=Wt(),wxt=G0(),Aw=js(),Txt=dp(),Axt=s0(),vxe=N2(),Mxt=l0(),Sxt=X0(),Ext=wN();dxe.exports=function(t,r,i,n){function a(h,v){return hxe.coerce(t,r,Ext,h,v)}var o=a("a"),s=a("b"),l=a("c"),u;if(o?(u=o.length,s?(u=Math.min(u,s.length),l&&(u=Math.min(u,l.length))):l?u=Math.min(u,l.length):u=0):s&&l&&(u=Math.min(s.length,l.length)),!u){r.visible=!1;return}r._length=u,a("sum"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate");var f=u<wxt.PTS_LINESONLY?"lines+markers":"lines";a("mode",f),Aw.hasMarkers(r)&&Txt(t,r,i,n,a,{gradient:!0}),Aw.hasLines(r)&&(Axt(t,r,i,n,a,{backoff:!0}),vxe(t,r,a),a("connectgaps")),Aw.hasText(r)&&(a("texttemplate"),Mxt(t,r,n,a));var c=[];(Aw.hasMarkers(r)||Aw.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),c.push("points")),a("fill"),r.fill!=="none"&&(Sxt(t,r,i,a),Aw.hasLines(r)||vxe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&c.push("fills"),a("hoveron",c.join("+")||"points"),hxe.coerceSelectionMarkerOpacity(r,a)}});var yxe=ne((ssr,gxe)=>{"use strict";var TN=Xi();gxe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.aLabel=TN.tickText(a.aaxis,t.a,!0).text,n.bLabel=TN.tickText(a.baxis,t.b,!0).text,n.cLabel=TN.tickText(a.caxis,t.c,!0).text,n}});var bxe=ne((lsr,_xe)=>{"use strict";var AN=la(),kxt=pp(),Cxt=Z0(),Lxt=gp(),Pxt=yp().calcMarkerSize,mxe=["a","b","c"],xxe={a:["b","c"],b:["a","c"],c:["a","b"]};_xe.exports=function(t,r){var i=t._fullLayout[r.subplot],n=i.sum,a=r.sum||n,o={a:r.a,b:r.b,c:r.c},s,l,u,f,c,h;for(s=0;s<mxe.length;s++)if(u=mxe[s],!o[u]){for(c=o[xxe[u][0]],h=o[xxe[u][1]],f=new Array(c.length),l=0;l<c.length;l++)f[l]=a-c[l]-h[l];o[u]=f}var v=r._length,p=new Array(v),_,T,g,A,b,w;for(s=0;s<v;s++)_=o.a[s],T=o.b[s],g=o.c[s],AN(_)&&AN(T)&&AN(g)?(_=+_,T=+T,g=+g,A=n/(_+T+g),A!==1&&(_*=A,T*=A,g*=A),w=_,b=g-T,p[s]={x:b,y:w,a:_,b:T,c:g}):p[s]={x:!1,y:!1};return Pxt(r,v),kxt(t,r),Cxt(p,r),Lxt(p,r),p}});var Txe=ne((usr,wxe)=>{"use strict";var Rxt=W2();wxe.exports=function(t,r,i){var n=r.plotContainer;n.select(".scatterlayer").selectAll("*").remove();for(var a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:n,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},l=r.layers.frontplot.select("g.scatterlayer"),u=0;u<i.length;u++){var f=i[u];f.length&&(f[0].trace._xA=a,f[0].trace._yA=o)}Rxt(t,s,i,l)}});var Mxe=ne((fsr,Axe)=>{"use strict";var Dxt=K2();Axe.exports=function(t,r,i,n){var a=Dxt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index],h=o.trace,v=o.subplot;o.a=c.a,o.b=c.b,o.c=c.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var p={};p[h.subplot]={_subplot:v};var _=h._module.formatLabels(c,h,p);o.aLabel=_.aLabel,o.bLabel=_.bLabel,o.cLabel=_.cLabel;var T=c.hi||h.hoverinfo,g=[];function A(w,k){g.push(w._hovertitle+": "+k)}if(!h.hovertemplate){var b=T.split("+");b.indexOf("all")!==-1&&(b=["a","b","c"]),b.indexOf("a")!==-1&&A(v.aaxis,o.aLabel),b.indexOf("b")!==-1&&A(v.baxis,o.bLabel),b.indexOf("c")!==-1&&A(v.caxis,o.cLabel)}return o.extraText=g.join("<br>"),o.hovertemplate=h.hovertemplate,a}});var Exe=ne((csr,Sxe)=>{"use strict";Sxe.exports=function(t,r,i,n,a){if(r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),n[a]){var o=n[a];t.a=o.a,t.b=o.b,t.c=o.c}else t.a=r.a,t.b=r.b,t.c=r.c;return t}});var Oxe=ne((hsr,zxe)=>{"use strict";var Dxe=Ai(),Ixt=Xf(),MN=wi(),ty=Wt(),tg=ty.strTranslate,OP=ty._,Sw=_i(),BP=aa(),dS=B0(),SN=oa().extendFlat,Fxt=Zs(),Im=Xi(),kxe=Hh(),Cxe=Ol(),Ixe=r0(),Lxe=Ixe.freeMode,qxt=Ixe.rectMode,EN=yx(),zxt=Mf().prepSelect,Oxt=Mf().selectOnClick,Bxt=Mf().clearOutline,Nxt=Mf().clearSelectionsCache,Fxe=wf();function qxe(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}zxe.exports=qxe;var ry=qxe.prototype;ry.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}};ry.plot=function(e,t){var r=this,i=t[r.id],n=t._size;r._hasClipOnAxisFalse=!1;for(var a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){r._hasClipOnAxisFalse=!0;break}}r.updateLayers(i),r.adjustLayout(i,n),Fxt.generalUpdatePerTraceModule(r.graphDiv,r,e,i),r.layers.plotbg.select("path").call(Sw.fill,i.bgcolor)};ry.makeFramework=function(e){var t=this,r=t.graphDiv,i=e[t.id],n=t.clipId="clip"+t.layoutId+t.id,a=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=ty.ensureSingleById(e._clips,"clipPath",n,function(o){o.append("path").attr("d","M0,0Z")}),t.clipDefRelative=ty.ensureSingleById(e._clips,"clipPath",a,function(o){o.append("path").attr("d","M0,0Z")}),t.plotContainer=ty.ensureSingle(t.container,"g",t.id),t.updateLayers(i),BP.setClipUrl(t.layers.backplot,n,r),BP.setClipUrl(t.layers.grids,n,r)};ry.updateLayers=function(e){var t=this,r=t.layers,i=["draglayer","plotbg","backplot","grids"];e.aaxis.layer==="below traces"&&i.push("aaxis","aline"),e.baxis.layer==="below traces"&&i.push("baxis","bline"),e.caxis.layer==="below traces"&&i.push("caxis","cline"),i.push("frontplot"),e.aaxis.layer==="above traces"&&i.push("aaxis","aline"),e.baxis.layer==="above traces"&&i.push("baxis","bline"),e.caxis.layer==="above traces"&&i.push("caxis","cline");var n=t.plotContainer.selectAll("g.toplevel").data(i,String),a=["agrid","bgrid","cgrid"];n.enter().append("g").attr("class",function(o){return"toplevel "+o}).each(function(o){var s=Dxe.select(this);r[o]=s,o==="frontplot"?s.append("g").classed("scatterlayer",!0):o==="backplot"?s.append("g").classed("maplayer",!0):o==="plotbg"?s.append("path").attr("d","M0,0Z"):o==="aline"||o==="bline"||o==="cline"?s.append("path"):o==="grids"&&a.forEach(function(l){r[l]=s.append("g").classed("grid "+l,!0)})}),n.order()};var Mw=Math.sqrt(4/3);ry.adjustLayout=function(e,t){var r=this,i=e.domain,n=(i.x[0]+i.x[1])/2,a=(i.y[0]+i.y[1])/2,o=i.x[1]-i.x[0],s=i.y[1]-i.y[0],l=o*t.w,u=s*t.h,f=e.sum,c=e.aaxis.min,h=e.baxis.min,v=e.caxis.min,p,_,T,g,A,b;l>Mw*u?(g=u,T=g*Mw):(T=l,g=T/Mw),A=o*T/l,b=s*g/u,p=t.l+t.w*n-T/2,_=t.t+t.h*(1-a)-g/2,r.x0=p,r.y0=_,r.w=T,r.h=g,r.sum=f,r.xaxis={type:"linear",range:[c+2*v-f,f-c-2*h],domain:[n-A/2,n+A/2],_id:"x"},dS(r.xaxis,r.graphDiv._fullLayout),r.xaxis.setScale(),r.xaxis.isPtWithinRange=function(z){return z.a>=r.aaxis.range[0]&&z.a<=r.aaxis.range[1]&&z.b>=r.baxis.range[1]&&z.b<=r.baxis.range[0]&&z.c>=r.caxis.range[1]&&z.c<=r.caxis.range[0]},r.yaxis={type:"linear",range:[c,f-h-v],domain:[a-b/2,a+b/2],_id:"y"},dS(r.yaxis,r.graphDiv._fullLayout),r.yaxis.setScale(),r.yaxis.isPtWithinRange=function(){return!0};var w=r.yaxis.domain[0],k=r.aaxis=SN({},e.aaxis,{range:[c,f-h-v],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[w,w+b*Mw],anchor:"free",position:0,_id:"y",_length:T});dS(k,r.graphDiv._fullLayout),k.setScale();var x=r.baxis=SN({},e.baxis,{range:[f-c-v,h],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:T});dS(x,r.graphDiv._fullLayout),x.setScale();var E=r.caxis=SN({},e.caxis,{range:[f-c-h,v],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[w,w+b*Mw],anchor:"free",position:0,_id:"y",_length:T});dS(E,r.graphDiv._fullLayout),E.setScale();var M="M"+p+","+(_+g)+"h"+T+"l-"+T/2+",-"+g+"Z";r.clipDef.select("path").attr("d",M),r.layers.plotbg.select("path").attr("d",M);var d="M0,"+g+"h"+T+"l-"+T/2+",-"+g+"Z";r.clipDefRelative.select("path").attr("d",d);var C=tg(p,_);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",C),r.clipDefRelative.select("path").attr("transform",null);var S=tg(p-x._offset,_+g);r.layers.baxis.attr("transform",S),r.layers.bgrid.attr("transform",S);var P=tg(p+T/2,_)+"rotate(30)"+tg(0,-k._offset);r.layers.aaxis.attr("transform",P),r.layers.agrid.attr("transform",P);var D=tg(p+T/2,_)+"rotate(-30)"+tg(0,-E._offset);r.layers.caxis.attr("transform",D),r.layers.cgrid.attr("transform",D),r.drawAxes(!0),r.layers.aline.select("path").attr("d",k.showline?"M"+p+","+(_+g)+"l"+T/2+",-"+g:"M0,0").call(Sw.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px"),r.layers.bline.select("path").attr("d",x.showline?"M"+p+","+(_+g)+"h"+T:"M0,0").call(Sw.stroke,x.linecolor||"#000").style("stroke-width",(x.linewidth||0)+"px"),r.layers.cline.select("path").attr("d",E.showline?"M"+(p+T/2)+","+_+"l"+T/2+","+g:"M0,0").call(Sw.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),r.graphDiv._context.staticPlot||r.initInteractions(),BP.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};ry.drawAxes=function(e){var t=this,r=t.graphDiv,i=t.id.substr(7)+"title",n=t.layers,a=t.aaxis,o=t.baxis,s=t.caxis;if(t.drawAx(a),t.drawAx(o),t.drawAx(s),e){var l=Math.max(a.showticklabels?a.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0)),u=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;n["a-title"]=EN.draw(r,"a"+i,{propContainer:a,propName:t.id+".aaxis.title",placeholder:OP(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-a.title.font.size/3-l,"text-anchor":"middle"}}),n["b-title"]=EN.draw(r,"b"+i,{propContainer:o,propName:t.id+".baxis.title",placeholder:OP(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+o.title.font.size*.83+u,"text-anchor":"middle"}}),n["c-title"]=EN.draw(r,"c"+i,{propContainer:s,propName:t.id+".caxis.title",placeholder:OP(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+s.title.font.size*.83+u,"text-anchor":"middle"}})}};ry.drawAx=function(e){var t=this,r=t.graphDiv,i=e._name,n=i.charAt(0),a=e._id,o=t.layers[i],s=30,l=n+"tickLayout",u=Uxt(e);t[l]!==u&&(o.selectAll("."+a+"tick").remove(),t[l]=u),e.setScale();var f=Im.calcTicks(e),c=Im.clipEnds(e,f),h=Im.makeTransTickFn(e),v=Im.getTickSigns(e)[2],p=ty.deg2rad(s),_=v*(e.linewidth||1)/2,T=v*e.ticklen,g=t.w,A=t.h,b=n==="b"?"M0,"+_+"l"+Math.sin(p)*T+","+Math.cos(p)*T:"M"+_+",0l"+Math.cos(p)*T+","+-Math.sin(p)*T,w={a:"M0,0l"+A+",-"+g/2,b:"M0,0l-"+g/2+",-"+A,c:"M0,0l-"+A+","+g/2}[n];Im.drawTicks(r,e,{vals:e.ticks==="inside"?c:f,layer:o,path:b,transFn:h,crisp:!1}),Im.drawGrid(r,e,{vals:c,layer:t.layers[n+"grid"],path:w,transFn:h,crisp:!1}),Im.drawLabels(r,e,{vals:f,layer:o,transFn:h,labelFns:Im.makeLabelFns(e,0,s)})};function Uxt(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var tc=Fxe.MINZOOM/2+.87,Vxt="m-0.87,.5h"+tc+"v3h-"+(tc+5.2)+"l"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l2.6,1.5l-"+tc/2+","+tc*.87+"Z",Hxt="m0.87,.5h-"+tc+"v3h"+(tc+5.2)+"l-"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l-2.6,1.5l"+tc/2+","+tc*.87+"Z",Gxt="m0,1l"+tc/2+","+tc*.87+"l2.6,-1.5l-"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l-"+(tc/2+2.6)+","+(tc*.87+4.5)+"l2.6,1.5l"+tc/2+",-"+tc*.87+"Z",Yxt="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",Pxe=!0;ry.clearOutline=function(){Nxt(this.dragOptions),Bxt(this.dragOptions.gd)};ry.initInteractions=function(){var e=this,t=e.layers.plotbg.select("path").node(),r=e.graphDiv,i=r._fullLayout._zoomlayer,n,a;this.dragOptions={element:t,gd:r,plotinfo:{id:e.id,domain:r._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(S,P,D){e.dragOptions.xaxes=[e.xaxis],e.dragOptions.yaxes=[e.yaxis],n=r._fullLayout._invScaleX,a=r._fullLayout._invScaleY;var z=e.dragOptions.dragmode=r._fullLayout.dragmode;Lxe(z)?e.dragOptions.minDrag=1:e.dragOptions.minDrag=void 0,z==="zoom"?(e.dragOptions.moveFn=x,e.dragOptions.clickFn=g,e.dragOptions.doneFn=E,A(S,P,D)):z==="pan"?(e.dragOptions.moveFn=d,e.dragOptions.clickFn=g,e.dragOptions.doneFn=C,M(),e.clearOutline(r)):(qxt(z)||Lxe(z))&&zxt(S,P,D,e.dragOptions,z)}};var o,s,l,u,f,c,h,v,p,_;function T(S){var P={};return P[e.id+".aaxis.min"]=S.a,P[e.id+".baxis.min"]=S.b,P[e.id+".caxis.min"]=S.c,P}function g(S,P){var D=r._fullLayout.clickmode;Rxe(r),S===2&&(r.emit("plotly_doubleclick",null),MN.call("_guiRelayout",r,T({a:0,b:0,c:0}))),D.indexOf("select")>-1&&S===1&&Oxt(P,r,[e.xaxis],[e.yaxis],e.id,e.dragOptions),D.indexOf("event")>-1&&Cxe.click(r,P,e.id)}function A(S,P,D){var z=t.getBoundingClientRect();o=P-z.left,s=D-z.top,r._fullLayout._calcInverseTransform(r);var O=r._fullLayout._invTransform,V=ty.apply3DTransform(O)(o,s);o=V[0],s=V[1],l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l,u=e.aaxis.range[1]-l.a,c=Ixt(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),h="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",v=!1,p=i.append("path").attr("class","zoombox").attr("transform",tg(e.x0,e.y0)).style({fill:c>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",h),_=i.append("path").attr("class","zoombox-corners").attr("transform",tg(e.x0,e.y0)).style({fill:Sw.background,stroke:Sw.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),e.clearOutline(r)}function b(S,P){return 1-P/e.h}function w(S,P){return 1-(S+(e.h-P)/Math.sqrt(3))/e.w}function k(S,P){return(S-(e.h-P)/Math.sqrt(3))/e.w}function x(S,P){var D=o+S*n,z=s+P*a,O=Math.max(0,Math.min(1,b(o,s),b(D,z))),V=Math.max(0,Math.min(1,w(o,s),w(D,z))),B=Math.max(0,Math.min(1,k(o,s),k(D,z))),F=(O/2+B)*e.w,N=(1-O/2-V)*e.w,Z=(F+N)/2,J=N-F,re=(1-O)*e.h,le=re-J/Mw;J<Fxe.MINZOOM?(f=l,p.attr("d",h),_.attr("d","M0,0Z")):(f={a:l.a+O*u,b:l.b+V*u,c:l.c+B*u},p.attr("d",h+"M"+F+","+re+"H"+N+"L"+Z+","+le+"L"+F+","+re+"Z"),_.attr("d","M"+o+","+s+Yxt+"M"+F+","+re+Vxt+"M"+N+","+re+Hxt+"M"+Z+","+le+Gxt)),v||(p.transition().style("fill",c>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),_.transition().style("opacity",1).duration(200),v=!0),r.emit("plotly_relayouting",T(f))}function E(){Rxe(r),f!==l&&(MN.call("_guiRelayout",r,T(f)),Pxe&&r.data&&r._context.showTips&&(ty.notifier(OP(r,"Double-click to zoom back out"),"long"),Pxe=!1))}function M(){l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l}function d(S,P){var D=S/e.xaxis._m,z=P/e.yaxis._m;f={a:l.a-z,b:l.b+(D+z)/2,c:l.c-(D-z)/2};var O=[f.a,f.b,f.c].sort(ty.sorterAsc),V={a:O.indexOf(f.a),b:O.indexOf(f.b),c:O.indexOf(f.c)};O[0]<0&&(O[1]+O[0]/2<0?(O[2]+=O[0]+O[1],O[0]=O[1]=0):(O[2]+=O[0]/2,O[1]+=O[0]/2,O[0]=0),f={a:O[V.a],b:O[V.b],c:O[V.c]},P=(l.a-f.a)*e.yaxis._m,S=(l.c-f.c-l.b+f.b)*e.xaxis._m);var B=tg(e.x0+S,e.y0+P);e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",B);var F=tg(-S,-P);e.clipDefRelative.select("path").attr("transform",F),e.aaxis.range=[f.a,e.sum-f.b-f.c],e.baxis.range=[e.sum-f.a-f.c,f.b],e.caxis.range=[e.sum-f.a-f.b,f.c],e.drawAxes(!1),e._hasClipOnAxisFalse&&e.plotContainer.select(".scatterlayer").selectAll(".trace").call(BP.hideOutsideRangePoints,e),r.emit("plotly_relayouting",T(f))}function C(){MN.call("_guiRelayout",r,T(f))}t.onmousemove=function(S){Cxe.hover(r,S,e.id),r._fullLayout._lasthover=t,r._fullLayout._hoversubplot=e.id},t.onmouseout=function(S){r._dragging||kxe.unhover(r,S)},kxe.init(this.dragOptions)};function Rxe(e){Dxe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}});var LN=ne((vsr,Bxe)=>{"use strict";var Wxt=Ku(),Xxt=fl().attributes,Wo=dc(),Zxt=Xs().overrideAll,kN=oa().extendFlat,CN={title:{text:Wo.title.text,font:Wo.title.font},color:Wo.color,tickmode:Wo.minor.tickmode,nticks:kN({},Wo.nticks,{dflt:6,min:1}),tick0:Wo.tick0,dtick:Wo.dtick,tickvals:Wo.tickvals,ticktext:Wo.ticktext,ticks:Wo.ticks,ticklen:Wo.ticklen,tickwidth:Wo.tickwidth,tickcolor:Wo.tickcolor,ticklabelstep:Wo.ticklabelstep,showticklabels:Wo.showticklabels,labelalias:Wo.labelalias,showtickprefix:Wo.showtickprefix,tickprefix:Wo.tickprefix,showticksuffix:Wo.showticksuffix,ticksuffix:Wo.ticksuffix,showexponent:Wo.showexponent,exponentformat:Wo.exponentformat,minexponent:Wo.minexponent,separatethousands:Wo.separatethousands,tickfont:Wo.tickfont,tickangle:Wo.tickangle,tickformat:Wo.tickformat,tickformatstops:Wo.tickformatstops,hoverformat:Wo.hoverformat,showline:kN({},Wo.showline,{dflt:!0}),linecolor:Wo.linecolor,linewidth:Wo.linewidth,showgrid:kN({},Wo.showgrid,{dflt:!0}),gridcolor:Wo.gridcolor,gridwidth:Wo.gridwidth,griddash:Wo.griddash,layer:Wo.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:Wo._deprecated.title,titlefont:Wo._deprecated.titlefont}},NP=Bxe.exports=Zxt({domain:Xxt({name:"ternary"}),bgcolor:{valType:"color",dflt:Wxt.background},sum:{valType:"number",dflt:1,min:0},aaxis:CN,baxis:CN,caxis:CN},"plot","from-root");NP.uirevision={valType:"any",editType:"none"};NP.aaxis.uirevision=NP.baxis.uirevision=NP.caxis.uirevision={valType:"any",editType:"none"}});var Kx=ne((dsr,Nxe)=>{"use strict";var jxt=Wt(),Kxt=So(),Jxt=fl().defaults;Nxe.exports=function(t,r,i,n){var a=n.type,o=n.attributes,s=n.handleDefaults,l=n.partition||"x",u=r._subplots[a],f=u.length,c=f&&u[0].replace(/\d+$/,""),h,v;function p(A,b){return jxt.coerce(h,v,o,A,b)}for(var _=0;_<f;_++){var T=u[_];t[T]?h=t[T]:h=t[T]={},v=Kxt.newContainer(r,T,c),n.noUirevision||p("uirevision",r.uirevision);var g={};g[l]=[_/f,(_+1)/f],Jxt(v,r,p,g),n.id=T,s(h,v,p,n)}}});var Gxe=ne((psr,Hxe)=>{"use strict";var Qxt=_i(),$xt=So(),UP=Wt(),e_t=Kx(),t_t=im(),r_t=am(),n_t=d2(),i_t=hx(),a_t=CM(),Vxe=LN(),Uxe=["aaxis","baxis","caxis"];Hxe.exports=function(t,r,i){e_t(t,r,i,{type:"ternary",attributes:Vxe,handleDefaults:o_t,font:r.font,paper_bgcolor:r.paper_bgcolor})};function o_t(e,t,r,i){var n=r("bgcolor"),a=r("sum");i.bgColor=Qxt.combine(n,i.paper_bgcolor);for(var o,s,l,u=0;u<Uxe.length;u++)o=Uxe[u],s=e[o]||{},l=$xt.newContainer(t,o),l._name=o,s_t(s,l,i,t);var f=t.aaxis,c=t.baxis,h=t.caxis;f.min+c.min+h.min>=a&&(f.min=0,c.min=0,h.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function s_t(e,t,r,i){var n=Vxe[t._name];function a(v,p){return UP.coerce(e,t,n,v,p)}a("uirevision",i.uirevision),t.type="linear";var o=a("color"),s=o!==n.color.dflt?o:r.font.color,l=t._name,u=l.charAt(0).toUpperCase(),f="Component "+u,c=a("title.text",f);t._hovertitle=c===f?c:u,UP.coerceFont(a,"title.font",{family:r.font.family,size:UP.bigFont(r.font.size),color:s}),a("min"),i_t(e,t,a,"linear"),r_t(e,t,a,"linear"),t_t(e,t,a,"linear",{noAutotickangles:!0}),n_t(e,t,a,{outerTicks:!0});var h=a("showticklabels");h&&(UP.coerceFont(a,"tickfont",{family:r.font.family,size:r.font.size,color:s}),a("tickangle"),a("tickformat")),a_t(e,t,a,{dfltColor:o,bgColor:r.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:n}),a("hoverformat"),a("layer")}});var Yxe=ne(x0=>{"use strict";var l_t=Oxe(),u_t=vc().getSubplotCalcData,f_t=Wt().counterRegex,Ew="ternary";x0.name=Ew;var c_t=x0.attr="subplot";x0.idRoot=Ew;x0.idRegex=x0.attrRegex=f_t(Ew);var h_t=x0.attributes={};h_t[c_t]={valType:"subplotid",dflt:"ternary",editType:"calc"};x0.layoutAttributes=LN();x0.supplyLayoutDefaults=Gxe();x0.plot=function(t){for(var r=t._fullLayout,i=t.calcdata,n=r._subplots[Ew],a=0;a<n.length;a++){var o=n[a],s=u_t(i,Ew,o),l=r[o]._subplot;l||(l=new l_t({id:o,graphDiv:t,container:r._ternarylayer.node()},r),r[o]._subplot=l),l.plot(s,r,t._promises)}};x0.clean=function(e,t,r,i){for(var n=i._subplots[Ew]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}});var Xxe=ne((ysr,Wxe)=>{"use strict";Wxe.exports={attributes:wN(),supplyDefaults:pxe(),colorbar:ph(),formatLabels:yxe(),calc:bxe(),plot:Txe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:Mxe(),selectPoints:J2(),eventData:Exe(),moduleType:"trace",name:"scatterternary",basePlotModule:Yxe(),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}});var jxe=ne((msr,Zxe)=>{"use strict";Zxe.exports=Xxe()});var PN=ne((xsr,Jxe)=>{"use strict";var rc=jM(),kw=oa().extendFlat,Kxe=kl().axisHoverFormat;Jxe.exports={y:rc.y,x:rc.x,x0:rc.x0,y0:rc.y0,xhoverformat:Kxe("x"),yhoverformat:Kxe("y"),name:kw({},rc.name,{}),orientation:kw({},rc.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:rc.fillcolor,points:kw({},rc.boxpoints,{}),jitter:kw({},rc.jitter,{}),pointpos:kw({},rc.pointpos,{}),width:kw({},rc.width,{}),marker:rc.marker,text:rc.text,hovertext:rc.hovertext,hovertemplate:rc.hovertemplate,quartilemethod:rc.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:rc.offsetgroup,alignmentgroup:rc.alignmentgroup,selected:rc.selected,unselected:rc.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}});var IN=ne((_sr,Qxe)=>{"use strict";var RN=KM(),DN=Wt().extendFlat;Qxe.exports={violinmode:DN({},RN.boxmode,{}),violingap:DN({},RN.boxgap,{}),violingroupgap:DN({},RN.boxgroupgap,{})}});var n_e=ne((bsr,r_e)=>{"use strict";var $xe=Wt(),v_t=_i(),e_e=QM(),t_e=PN();r_e.exports=function(t,r,i,n){function a(k,x){return $xe.coerce(t,r,t_e,k,x)}function o(k,x){return $xe.coerce2(t,r,t_e,k,x)}if(e_e.handleSampleDefaults(t,r,a,n),r.visible!==!1){a("bandwidth"),a("side");var s=a("width");s||(a("scalegroup",r.name),a("scalemode"));var l=a("span"),u;Array.isArray(l)&&(u="manual"),a("spanmode",u);var f=a("line.color",(t.marker||{}).color||i),c=a("line.width"),h=a("fillcolor",v_t.addOpacity(r.line.color,.5));e_e.handlePointsDefaults(t,r,a,{prefix:""});var v=o("box.width"),p=o("box.fillcolor",h),_=o("box.line.color",f),T=o("box.line.width",c),g=a("box.visible",!!(v||p||_||T));g||(r.box={visible:!1});var A=o("meanline.color",f),b=o("meanline.width",c),w=a("meanline.visible",!!(A||b));w||(r.meanline={visible:!1}),a("quartilemethod")}}});var a_e=ne((wsr,i_e)=>{"use strict";var d_t=Wt(),p_t=IN(),g_t=nP();i_e.exports=function(t,r,i){function n(a,o){return d_t.coerce(t,r,p_t,a,o)}g_t._supply(t,r,i,n,"violin")}});var VP=ne(Jx=>{"use strict";var y_t=Wt(),m_t={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};Jx.makeKDE=function(e,t,r){var i=r.length,n=m_t.gaussian,a=e.bandwidth,o=1/(i*a);return function(s){for(var l=0,u=0;u<i;u++)l+=n((s-r[u])/a);return o*l}};Jx.getPositionOnKdePath=function(e,t,r){var i,n;t.orientation==="h"?(i="y",n="x"):(i="x",n="y");var a=y_t.findPointOnPath(e.path,r,n,{pathLength:e.pathLength}),o=e.posCenterPx,s=a[i],l=t.side==="both"?2*o-s:o;return[s,l]};Jx.getKdeValue=function(e,t,r){var i=e.pts.map(Jx.extractVal),n=Jx.makeKDE(e,t,i);return n(r)/e.posDensityScale};Jx.extractVal=function(e){return e.v}});var l_e=ne((Asr,s_e)=>{"use strict";var FN=Wt(),qN=Xi(),x_t=A9(),o_e=VP(),__t=$a().BADNUM;s_e.exports=function(t,r){var i=x_t(t,r);if(i[0].t.empty)return i;for(var n=t._fullLayout,a=qN.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]),o=1/0,s=-1/0,l=0,u=0,f=0;f<i.length;f++){var c=i[f],h=c.pts.map(o_e.extractVal),v=c.bandwidth=w_t(r,c,h),p=c.span=T_t(r,c,a,v);if(c.min===c.max&&v===0)p=c.span=[c.min,c.max],c.density=[{v:1,t:p[0]}],c.bandwidth=v,l=Math.max(l,1);else{var _=p[1]-p[0],T=Math.ceil(_/(v/3)),g=_/T;if(!isFinite(g)||!isFinite(T))return FN.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var A=o_e.makeKDE(c,r,h);c.density=new Array(T);for(var b=0,w=p[0];w<p[1]+g/2;b++,w+=g){var k=A(w);c.density[b]={v:k,t:w},l=Math.max(l,k)}}u=Math.max(u,h.length),o=Math.min(o,p[0]),s=Math.max(s,p[1])}var x=qN.findExtremes(a,[o,s],{padded:!0});if(r._extremes[a._id]=x,r.width)i[0].t.maxKDE=l;else{var E=n._violinScaleGroupStats,M=r.scalegroup,d=E[M];d?(d.maxKDE=Math.max(d.maxKDE,l),d.maxCount=Math.max(d.maxCount,u)):E[M]={maxKDE:l,maxCount:u}}return i[0].t.labels.kde=FN._(t,"kde:"),i};function b_t(e,t,r){var i=Math.min(t,r/1.349);return 1.059*i*Math.pow(e,-.2)}function w_t(e,t,r){var i=t.max-t.min;if(!i)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,i/1e4);var n=r.length,a=FN.stdev(r,n-1,t.mean);return Math.max(b_t(n,a,t.q3-t.q1),i/100)}function T_t(e,t,r,i){var n=e.spanmode,a=e.span||[],o=[t.min,t.max],s=[t.min-2*i,t.max+2*i],l;function u(c){var h=a[c],v=r.type==="multicategory"?r.r2c(h):r.d2c(h,0,e[t.valLetter+"calendar"]);return v===__t?s[c]:v}n==="soft"?l=s:n==="hard"?l=o:l=[u(0),u(1)];var f={type:"linear",range:l};return qN.setConvert(f),f.cleanRange(),l}});var c_e=ne((Msr,f_e)=>{"use strict";var A_t=aP().setPositionOffset,u_e=["v","h"];f_e.exports=function(t,r){for(var i=t.calcdata,n=r.xaxis,a=r.yaxis,o=0;o<u_e.length;o++){for(var s=u_e[o],l=s==="h"?a:n,u=[],f=0;f<i.length;f++){var c=i[f],h=c[0].t,v=c[0].trace;v.visible===!0&&v.type==="violin"&&!h.empty&&v.orientation===s&&v.xaxis===n._id&&v.yaxis===a._id&&u.push(f)}A_t("violin",t,u,l)}}});var v_e=ne((Ssr,h_e)=>{"use strict";var zN=Ai(),ON=Wt(),M_t=aa(),BN=oP(),S_t=uB(),E_t=VP();h_e.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=r.xaxis,l=r.yaxis;function u(f,c){var h=S_t(f,{xaxis:s,yaxis:l,trace:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M_t.smoothopen(h[0],1)}ON.makeTraceGroups(n,i,"trace violins").each(function(f){var c=zN.select(this),h=f[0],v=h.t,p=h.trace;if(p.visible!==!0||v.empty){c.remove();return}var _=v.bPos,T=v.bdPos,g=r[v.valLetter+"axis"],A=r[v.posLetter+"axis"],b=p.side==="both",w=b||p.side==="positive",k=b||p.side==="negative",x=c.selectAll("path.violin").data(ON.identity);x.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","violin"),x.exit().remove(),x.each(function(z){var O=zN.select(this),V=z.density,B=V.length,F=A.c2l(z.pos+_,!0),N=A.l2p(F),Z;if(p.width)Z=v.maxKDE/T;else{var J=o._violinScaleGroupStats[p.scalegroup];Z=p.scalemode==="count"?J.maxKDE/T*(J.maxCount/z.pts.length):J.maxKDE/T}var re,le,fe,K,X,ae,oe;if(w){for(ae=new Array(B),K=0;K<B;K++)oe=ae[K]={},oe[v.posLetter]=F+V[K].v/Z,oe[v.valLetter]=g.c2l(V[K].t,!0);re=u(ae,p)}if(k){for(ae=new Array(B),X=0,K=B-1;X<B;X++,K--)oe=ae[X]={},oe[v.posLetter]=F-V[K].v/Z,oe[v.valLetter]=g.c2l(V[K].t,!0);le=u(ae,p)}if(b)fe=re+"L"+le.substr(1)+"Z";else{var _e=[N,g.c2p(V[0].t)],be=[N,g.c2p(V[B-1].t)];p.orientation==="h"&&(_e.reverse(),be.reverse()),w?fe="M"+_e+"L"+re.substr(1)+"L"+be:fe="M"+be+"L"+le.substr(1)+"L"+_e}O.attr("d",fe),z.posCenterPx=N,z.posDensityScale=Z*T,z.path=O.node(),z.pathLength=z.path.getTotalLength()/(b?2:1)});var E=p.box,M=E.width,d=(E.line||{}).width,C,S;b?(C=T*M,S=0):w?(C=[0,T*M/2],S=d*{x:1,y:-1}[v.posLetter]):(C=[T*M/2,0],S=d*{x:-1,y:1}[v.posLetter]),BN.plotBoxAndWhiskers(c,{pos:A,val:g},p,{bPos:_,bdPos:C,bPosPxOffset:S}),BN.plotBoxMean(c,{pos:A,val:g},p,{bPos:_,bdPos:C,bPosPxOffset:S});var P;!p.box.visible&&p.meanline.visible&&(P=ON.identity);var D=c.selectAll("path.meanline").data(P||[]);D.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",a?"none":"non-scaling-stroke"),D.exit().remove(),D.each(function(z){var O=g.c2p(z.mean,!0),V=E_t.getPositionOnKdePath(z,p,O);zN.select(this).attr("d",p.orientation==="h"?"M"+O+","+V[0]+"V"+V[1]:"M"+V[0]+","+O+"H"+V[1])}),BN.plotPoints(c,{x:s,y:l},p,v)})}});var g_e=ne((Esr,p_e)=>{"use strict";var d_e=Ai(),Cw=_i(),k_t=Tv().stylePoints;p_e.exports=function(t){var r=d_e.select(t).selectAll("g.trace.violins");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=i[0].trace,a=d_e.select(this),o=n.box||{},s=o.line||{},l=n.meanline||{},u=l.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(Cw.stroke,n.line.color).call(Cw.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",s.width+"px").call(Cw.stroke,s.color).call(Cw.fill,o.fillcolor);var f={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};a.selectAll("path.mean").style(f).call(Cw.stroke,l.color),a.selectAll("path.meanline").style(f).call(Cw.stroke,l.color),k_t(a,n,t)})}});var __e=ne((ksr,x_e)=>{"use strict";var C_t=_i(),NN=Wt(),L_t=Xi(),y_e=C9(),m_e=VP();x_e.exports=function(t,r,i,n,a){a||(a={});var o=a.hoverLayer,s=t.cd,l=s[0].trace,u=l.hoveron,f=u.indexOf("violins")!==-1,c=u.indexOf("kde")!==-1,h=[],v,p;if(f||c){var _=y_e.hoverOnBoxes(t,r,i,n);if(c&&_.length>0){var T=t.xa,g=t.ya,A,b,w,k,x;l.orientation==="h"?(x=r,A="y",w=g,b="x",k=T):(x=i,A="x",w=T,b="y",k=g);var E=s[t.index];if(x>=E.span[0]&&x<=E.span[1]){var M=NN.extendFlat({},t),d=k.c2p(x,!0),C=m_e.getKdeValue(E,l,x),S=m_e.getPositionOnKdePath(E,l,d),P=w._offset,D=w._length;M[A+"0"]=S[0],M[A+"1"]=S[1],M[b+"0"]=M[b+"1"]=d,M[b+"Label"]=b+": "+L_t.hoverLabelText(k,x,l[b+"hoverformat"])+", "+s[0].t.labels.kde+" "+C.toFixed(3);for(var z=0,O=0;O<_.length;O++)if(_[O].attr==="med"){z=O;break}M.spikeDistance=_[z].spikeDistance;var V=A+"Spike";M[V]=_[z][V],_[z].spikeDistance=void 0,_[z][V]=void 0,M.hovertemplate=!1,h.push(M),p={},p[A+"1"]=NN.constrain(P+S[0],P,P+D),p[A+"2"]=NN.constrain(P+S[1],P,P+D),p[b+"1"]=p[b+"2"]=k._offset+d}}f&&(h=h.concat(_))}u.indexOf("points")!==-1&&(v=y_e.hoverOnPoints(t,r,i));var B=o.selectAll(".violinline-"+l.uid).data(p?[0]:[]);return B.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),B.exit().remove(),B.attr(p).call(C_t.stroke,t.color),n==="closest"?v?[v]:h:(v&&h.push(v),h)}});var w_e=ne((Csr,b_e)=>{"use strict";b_e.exports={attributes:PN(),layoutAttributes:IN(),supplyDefaults:n_e(),crossTraceDefaults:QM().crossTraceDefaults,supplyLayoutDefaults:a_e(),calc:l_e(),crossTraceCalc:c_e(),plot:v_e(),style:g_e(),styleOnSelect:Tv().styleOnSelect,hoverPoints:__e(),selectPoints:L9(),moduleType:"trace",name:"violin",basePlotModule:vu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}});var A_e=ne((Lsr,T_e)=>{"use strict";T_e.exports=w_e()});var S_e=ne((Psr,M_e)=>{"use strict";M_e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}});var VN=ne((Rsr,C_e)=>{"use strict";var wl=J0(),UN=cu().line,P_t=es(),E_e=kl().axisHoverFormat,R_t=Ba().hovertemplateAttrs,D_t=Ba().texttemplateAttrs,k_e=S_e(),ny=oa().extendFlat,I_t=_i();C_e.exports={x:wl.x,x0:wl.x0,dx:wl.dx,y:wl.y,y0:wl.y0,dy:wl.dy,xperiod:wl.xperiod,yperiod:wl.yperiod,xperiod0:wl.xperiod0,yperiod0:wl.yperiod0,xperiodalignment:wl.xperiodalignment,yperiodalignment:wl.yperiodalignment,xhoverformat:E_e("x"),yhoverformat:E_e("y"),hovertext:wl.hovertext,hovertemplate:R_t({},{keys:k_e.eventDataKeys}),hoverinfo:ny({},P_t.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:D_t({editType:"plot"},{keys:k_e.eventDataKeys.concat(["label","value"])}),text:wl.text,textposition:wl.textposition,insidetextanchor:ny({},wl.insidetextanchor,{dflt:"middle"}),textangle:ny({},wl.textangle,{dflt:0}),textfont:wl.textfont,insidetextfont:wl.insidetextfont,outsidetextfont:wl.outsidetextfont,constraintext:wl.constraintext,cliponaxis:wl.cliponaxis,orientation:ny({},wl.orientation,{}),offset:ny({},wl.offset,{arrayOk:!1}),width:ny({},wl.width,{arrayOk:!1}),marker:F_t(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:ny({},UN.color,{dflt:I_t.defaultLine}),width:ny({},UN.width,{dflt:0,editType:"plot"}),dash:UN.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:wl.offsetgroup,alignmentgroup:wl.alignmentgroup};function F_t(){var e=ny({},wl.marker);return delete e.pattern,delete e.cornerradius,e}});var HN=ne((Dsr,L_e)=>{"use strict";L_e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var YN=ne((Isr,R_e)=>{"use strict";var HP=Wt(),q_t=Dx(),z_t=Fd().handleText,O_t=B2(),B_t=o0(),P_e=VN(),GN=_i();function N_t(e,t,r,i){function n(c,h){return HP.coerce(e,t,P_e,c,h)}var a=O_t(e,t,i,n);if(!a){t.visible=!1;return}B_t(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.y&&!t.x?"v":"h"),n("offset"),n("width");var o=n("text");n("hovertext"),n("hovertemplate");var s=n("textposition");z_t(e,t,i,n,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&!t.texttemplate&&n("textinfo",HP.isArrayOrTypedArray(o)?"text+value":"value");var l=n("marker.color",r);n("marker.line.color",GN.defaultLine),n("marker.line.width");var u=n("connector.visible");if(u){n("connector.fillcolor",U_t(l));var f=n("connector.line.width");f&&(n("connector.line.color"),n("connector.line.dash"))}}function U_t(e){var t=HP.isArrayOrTypedArray(e)?"#000":e;return GN.addOpacity(t,.5*GN.opacity(t))}function V_t(e,t){var r,i;function n(o){return HP.coerce(i._input,i,P_e,o)}if(t.funnelmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,q_t(r,i,t,n)}R_e.exports={supplyDefaults:N_t,crossTraceDefaults:V_t}});var I_e=ne((Fsr,D_e)=>{"use strict";var H_t=Wt(),G_t=HN();D_e.exports=function(e,t,r){var i=!1;function n(s,l){return H_t.coerce(e,t,G_t,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="funnel"){i=!0;break}}i&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}});var q_e=ne((qsr,F_e)=>{"use strict";var Lw=Wt();F_e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;Lw.mergeArray(r.text,t,"tx"),Lw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){Lw.mergeArray(n.opacity,t,"mo"),Lw.mergeArray(n.color,t,"mc");var a=n.line;a&&(Lw.mergeArray(a.color,t,"mlc"),Lw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var N_e=ne((zsr,B_e)=>{"use strict";var z_e=Xi(),O_e=u0(),Y_t=q_e(),W_t=gp(),pS=$a().BADNUM;B_e.exports=function(t,r){var i=z_e.getFromId(t,r.xaxis||"x"),n=z_e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c,h;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=O_e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=O_e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;var v=Math.min(o.length,a.length),p=new Array(v);for(r._base=[],c=0;c<v;c++){a[c]<0&&(a[c]=pS);var _=!1;a[c]!==pS&&c+1<v&&a[c+1]!==pS&&(_=!0),h=p[c]={p:o[c],s:a[c],cNext:_},r._base[c]=-.5*h.s,u&&(p[c].orig_p=s[c],p[c][f+"End"]=l.ends[c],p[c][f+"Start"]=l.starts[c]),r.ids&&(h.id=String(r.ids[c])),c===0&&(p[0].vTotal=0),p[0].vTotal+=WN(h.s),h.begR=WN(h.s)/WN(p[0].s)}var T;for(c=0;c<v;c++)h=p[c],h.s!==pS&&(h.sumR=h.s/p[0].vTotal,h.difR=T!==void 0?h.s/T:1,T=h.s);return Y_t(p,r),W_t(p,r),p};function WN(e){return e===pS?0:e}});var H_e=ne((Osr,V_e)=>{"use strict";var U_e=Ix().setGroupPositions;V_e.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h],p=v.orientation==="h";v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="funnel"&&(c=a[h],p?f.push(c):u.push(c),l.push(c))}var _={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(U_e(t,o,s,u,_),U_e(t,s,o,f,_),h=0;h<l.length;h++){c=l[h];for(var T=0;T<c.length;T++)T+1<c.length&&(c[T].nextP0=c[T+1].p0,c[T].nextS0=c[T+1].s0,c[T].nextP1=c[T+1].p1,c[T].nextS1=c[T+1].s1)}}});var X_e=ne((Bsr,W_e)=>{"use strict";var GP=Ai(),qm=Wt(),G_e=aa(),Fm=$a().BADNUM,X_t=Yx(),Z_t=yh().clearMinTextSize;W_e.exports=function(t,r,i,n){var a=t._fullLayout;Z_t("funnel",a),j_t(t,r,i,n),K_t(t,r,i,n),X_t.plot(t,r,i,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})};function j_t(e,t,r,i){var n=t.xaxis,a=t.yaxis;qm.makeTraceGroups(i,r,"trace bars").each(function(o){var s=GP.select(this),l=o[0].trace,u=qm.ensureSingle(s,"g","regions");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.region").data(qm.identity);c.enter().append("g").classed("region",!0),c.exit().remove();var h=c.size();c.each(function(v,p){if(!(p!==h-1&&!v.cNext)){var _=Y_e(v,n,a,f),T=_[0],g=_[1],A="";T[0]!==Fm&&g[0]!==Fm&&T[1]!==Fm&&g[1]!==Fm&&T[2]!==Fm&&g[2]!==Fm&&T[3]!==Fm&&g[3]!==Fm&&(f?A+="M"+T[0]+","+g[1]+"L"+T[2]+","+g[2]+"H"+T[3]+"L"+T[1]+","+g[1]+"Z":A+="M"+T[1]+","+g[1]+"L"+T[2]+","+g[3]+"V"+g[2]+"L"+T[1]+","+g[0]+"Z"),A===""&&(A="M0,0Z"),qm.ensureSingle(GP.select(this),"path").attr("d",A).call(G_e.setClipUrl,t.layerClipId,e)}})})}function K_t(e,t,r,i){var n=t.xaxis,a=t.yaxis;qm.makeTraceGroups(i,r,"trace bars").each(function(o){var s=GP.select(this),l=o[0].trace,u=qm.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.line").data(qm.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var h=c.size();c.each(function(v,p){if(!(p!==h-1&&!v.cNext)){var _=Y_e(v,n,a,f),T=_[0],g=_[1],A="";T[3]!==void 0&&g[3]!==void 0&&(f?(A+="M"+T[0]+","+g[1]+"L"+T[2]+","+g[2],A+="M"+T[1]+","+g[1]+"L"+T[3]+","+g[2]):(A+="M"+T[1]+","+g[1]+"L"+T[2]+","+g[3],A+="M"+T[1]+","+g[0]+"L"+T[2]+","+g[2])),A===""&&(A="M0,0Z"),qm.ensureSingle(GP.select(this),"path").attr("d",A).call(G_e.setClipUrl,t.layerClipId,e)}})})}function Y_e(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),n[3]=o.c2p(e.nextS1,!0),a[3]=s.c2p(e.nextP1,!0),i?[n,a]:[a,n]}});var K_e=ne((Nsr,j_e)=>{"use strict";var gS=Ai(),Z_e=aa(),XN=_i(),J_t=Yy().DESELECTDIM,Q_t=_p(),$_t=yh().resizeText,ebt=Q_t.styleTextPoints;function tbt(e,t,r){var i=r||gS.select(e).selectAll("g.funnellayer").selectAll("g.trace");$_t(e,i,"funnel"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=gS.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o.marker;gS.select(this).call(XN.fill,s.mc||l.color).call(XN.stroke,s.mlc||l.line.color).call(Z_e.dashLine,l.line.dash,s.mlw||l.line.width).style("opacity",o.selectedpoints&&!s.selected?J_t:1)}}),ebt(a,o,e),a.selectAll(".regions").each(function(){gS.select(this).selectAll("path").style("stroke-width",0).call(XN.fill,o.connector.fillcolor)}),a.selectAll(".lines").each(function(){var s=o.connector.line;Z_e.lineGroupStyle(gS.select(this).selectAll("path"),s.width,s.color,s.dash)})})}j_e.exports={style:tbt}});var $_e=ne((Usr,Q_e)=>{"use strict";var J_e=_i().opacity,rbt=vw().hoverOnBars,ZN=Wt().formatPercent;Q_e.exports=function(t,r,i,n,a){var o=rbt(t,r,i,n,a);if(o){var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=o.index,c=s[f],h=u?"x":"y";o[h+"LabelVal"]=c.s,o.percentInitial=c.begR,o.percentInitialLabel=ZN(c.begR,1),o.percentPrevious=c.difR,o.percentPreviousLabel=ZN(c.difR,1),o.percentTotal=c.sumR,o.percentTotalLabel=ZN(c.sumR,1);var v=c.hi||l.hoverinfo,p=[];if(v&&v!=="none"&&v!=="skip"){var _=v==="all",T=v.split("+"),g=function(A){return _||T.indexOf(A)!==-1};g("percent initial")&&p.push(o.percentInitialLabel+" of initial"),g("percent previous")&&p.push(o.percentPreviousLabel+" of previous"),g("percent total")&&p.push(o.percentTotalLabel+" of total")}return o.extraText=p.join("<br>"),o.color=nbt(l,c),[o]}};function nbt(e,t){var r=e.marker,i=t.mc||r.color,n=t.mlc||r.line.color,a=t.mlw||r.line.width;if(J_e(i))return i;if(J_e(n)&&a)return n}});var tbe=ne((Vsr,ebe)=>{"use strict";ebe.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"percentInitial"in r&&(t.percentInitial=r.percentInitial),"percentPrevious"in r&&(t.percentPrevious=r.percentPrevious),"percentTotal"in r&&(t.percentTotal=r.percentTotal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var nbe=ne((Hsr,rbe)=>{"use strict";rbe.exports={attributes:VN(),layoutAttributes:HN(),supplyDefaults:YN().supplyDefaults,crossTraceDefaults:YN().crossTraceDefaults,supplyLayoutDefaults:I_e(),calc:N_e(),crossTraceCalc:H_e(),plot:X_e(),style:K_e().style,hoverPoints:$_e(),eventData:tbe(),selectPoints:dw(),moduleType:"trace",name:"funnel",basePlotModule:vu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var abe=ne((Gsr,ibe)=>{"use strict";ibe.exports=nbe()});var sbe=ne((Ysr,obe)=>{"use strict";obe.exports={eventDataKeys:["initial","delta","final"]}});var JN=ne((Wsr,fbe)=>{"use strict";var rl=J0(),jN=cu().line,ibt=es(),lbe=kl().axisHoverFormat,abt=Ba().hovertemplateAttrs,obt=Ba().texttemplateAttrs,ube=sbe(),Pw=oa().extendFlat,sbt=_i();function KN(e){return{marker:{color:Pw({},rl.marker.color,{arrayOk:!1,editType:"style"}),line:{color:Pw({},rl.marker.line.color,{arrayOk:!1,editType:"style"}),width:Pw({},rl.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}fbe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:rl.x,x0:rl.x0,dx:rl.dx,y:rl.y,y0:rl.y0,dy:rl.dy,xperiod:rl.xperiod,yperiod:rl.yperiod,xperiod0:rl.xperiod0,yperiod0:rl.yperiod0,xperiodalignment:rl.xperiodalignment,yperiodalignment:rl.yperiodalignment,xhoverformat:lbe("x"),yhoverformat:lbe("y"),hovertext:rl.hovertext,hovertemplate:abt({},{keys:ube.eventDataKeys}),hoverinfo:Pw({},ibt.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:obt({editType:"plot"},{keys:ube.eventDataKeys.concat(["label"])}),text:rl.text,textposition:rl.textposition,insidetextanchor:rl.insidetextanchor,textangle:rl.textangle,textfont:rl.textfont,insidetextfont:rl.insidetextfont,outsidetextfont:rl.outsidetextfont,constraintext:rl.constraintext,cliponaxis:rl.cliponaxis,orientation:rl.orientation,offset:rl.offset,width:rl.width,increasing:KN("increasing"),decreasing:KN("decreasing"),totals:KN("intermediate sums and total"),connector:{line:{color:Pw({},jN.color,{dflt:sbt.defaultLine}),width:Pw({},jN.width,{editType:"plot"}),dash:jN.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:rl.offsetgroup,alignmentgroup:rl.alignmentgroup}});var QN=ne((Xsr,cbe)=>{"use strict";cbe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var Rw=ne((Zsr,hbe)=>{"use strict";hbe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}});var eU=ne((jsr,gbe)=>{"use strict";var vbe=Wt(),lbt=Dx(),ubt=Fd().handleText,fbt=B2(),cbt=o0(),dbe=JN(),hbt=_i(),pbe=Rw(),vbt=pbe.INCREASING.COLOR,dbt=pbe.DECREASING.COLOR,pbt="#4499FF";function $N(e,t,r){e(t+".marker.color",r),e(t+".marker.line.color",hbt.defaultLine),e(t+".marker.line.width")}function gbt(e,t,r,i){function n(u,f){return vbe.coerce(e,t,dbe,u,f)}var a=fbt(e,t,i,n);if(!a){t.visible=!1;return}cbt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("measure"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");ubt(e,t,i,n,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&(n("texttemplate"),t.texttemplate||n("textinfo")),$N(n,"increasing",vbt),$N(n,"decreasing",dbt),$N(n,"totals",pbt);var s=n("connector.visible");if(s){n("connector.mode");var l=n("connector.line.width");l&&(n("connector.line.color"),n("connector.line.dash"))}}function ybt(e,t){var r,i;function n(o){return vbe.coerce(i._input,i,dbe,o)}if(t.waterfallmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,lbt(r,i,t,n)}gbe.exports={supplyDefaults:gbt,crossTraceDefaults:ybt}});var mbe=ne((Ksr,ybe)=>{"use strict";var mbt=Wt(),xbt=QN();ybe.exports=function(e,t,r){var i=!1;function n(s,l){return mbt.coerce(e,t,xbt,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="waterfall"){i=!0;break}}i&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}});var Abe=ne((Jsr,Tbe)=>{"use strict";var xbe=Xi(),_be=u0(),bbe=Wt().mergeArray,_bt=gp(),wbe=$a().BADNUM;function tU(e){return e==="a"||e==="absolute"}function rU(e){return e==="t"||e==="total"}Tbe.exports=function(t,r){var i=xbe.getFromId(t,r.xaxis||"x"),n=xbe.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=_be(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=_be(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var c=Math.min(o.length,a.length),h=new Array(c),v=0,p,_=!1,T=0;T<c;T++){var g=a[T]||0,A=!1;(a[T]!==wbe||rU(r.measure[T])||tU(r.measure[T]))&&T+1<c&&(a[T+1]!==wbe||rU(r.measure[T+1])||tU(r.measure[T+1]))&&(A=!0);var b=h[T]={i:T,p:o[T],s:g,rawS:g,cNext:A};tU(r.measure[T])?(v=b.s,b.isSum=!0,b.dir="totals",b.s=v):rU(r.measure[T])?(b.isSum=!0,b.dir="totals",b.s=v):(b.isSum=!1,b.dir=b.rawS<0?"decreasing":"increasing",p=b.s,b.s=v+p,v+=p),b.dir==="totals"&&(_=!0),u&&(h[T].orig_p=s[T],h[T][f+"End"]=l.ends[T],h[T][f+"Start"]=l.starts[T]),r.ids&&(b.id=String(r.ids[T])),b.v=(r.base||0)+v}return h.length&&(h[0].hasTotals=_),bbe(r.text,h,"tx"),bbe(r.hovertext,h,"htx"),_bt(h,r),h}});var Ebe=ne((Qsr,Sbe)=>{"use strict";var Mbe=Ix().setGroupPositions;Sbe.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h];v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="waterfall"&&(c=a[h],v.orientation==="h"?f.push(c):u.push(c),l.push(c))}var p={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(Mbe(t,o,s,u,p),Mbe(t,s,o,f,p),h=0;h<l.length;h++){c=l[h];for(var _=0;_<c.length;_++){var T=c[_];T.isSum===!1&&(T.s0+=_===0?0:c[_-1].s),_+1<c.length&&(c[_].nextP0=c[_+1].p0,c[_].nextS0=c[_+1].s0)}}}});var Lbe=ne(($sr,Cbe)=>{"use strict";var kbe=Ai(),YP=Wt(),bbt=aa(),Dw=$a().BADNUM,wbt=Yx(),Tbt=yh().clearMinTextSize;Cbe.exports=function(t,r,i,n){var a=t._fullLayout;Tbt("waterfall",a),wbt.plot(t,r,i,n,{mode:a.waterfallmode,norm:a.waterfallmode,gap:a.waterfallgap,groupgap:a.waterfallgroupgap}),Abt(t,r,i,n)};function Abt(e,t,r,i){var n=t.xaxis,a=t.yaxis;YP.makeTraceGroups(i,r,"trace bars").each(function(o){var s=kbe.select(this),l=o[0].trace,u=YP.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=l.connector.mode,h=u.selectAll("g.line").data(YP.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var v=h.size();h.each(function(p,_){if(!(_!==v-1&&!p.cNext)){var T=Mbt(p,n,a,f),g=T[0],A=T[1],b="";g[0]!==Dw&&A[0]!==Dw&&g[1]!==Dw&&A[1]!==Dw&&(c==="spanning"&&!p.isSum&&_>0&&(f?b+="M"+g[0]+","+A[1]+"V"+A[0]:b+="M"+g[1]+","+A[0]+"H"+g[0]),c!=="between"&&(p.isSum||_<v-1)&&(f?b+="M"+g[1]+","+A[0]+"V"+A[1]:b+="M"+g[0]+","+A[1]+"H"+g[1]),g[2]!==Dw&&A[2]!==Dw&&(f?b+="M"+g[1]+","+A[1]+"V"+A[2]:b+="M"+g[1]+","+A[1]+"H"+g[2])),b===""&&(b="M0,0Z"),YP.ensureSingle(kbe.select(this),"path").attr("d",b).call(bbt.setClipUrl,t.layerClipId,e)}})})}function Mbt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),i?[n,a]:[a,n]}});var Ibe=ne((elr,Dbe)=>{"use strict";var WP=Ai(),Pbe=aa(),Rbe=_i(),Sbt=Yy().DESELECTDIM,Ebt=_p(),kbt=yh().resizeText,Cbt=Ebt.styleTextPoints;function Lbt(e,t,r){var i=r||WP.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");kbt(e,i,"waterfall"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=WP.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o[s.dir].marker;WP.select(this).call(Rbe.fill,l.color).call(Rbe.stroke,l.line.color).call(Pbe.dashLine,l.line.dash,l.line.width).style("opacity",o.selectedpoints&&!s.selected?Sbt:1)}}),Cbt(a,o,e),a.selectAll(".lines").each(function(){var s=o.connector.line;Pbe.lineGroupStyle(WP.select(this).selectAll("path"),s.width,s.color,s.dash)})})}Dbe.exports={style:Lbt}});var Bbe=ne((tlr,Obe)=>{"use strict";var Pbt=Xi().hoverLabelText,Fbe=_i().opacity,Rbt=vw().hoverOnBars,qbe=Rw(),zbe={increasing:qbe.INCREASING.SYMBOL,decreasing:qbe.DECREASING.SYMBOL};Obe.exports=function(t,r,i,n,a){var o=Rbt(t,r,i,n,a);if(!o)return;var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=u?"x":"y",c=u?t.xa:t.ya;function h(x){return Pbt(c,x,l[f+"hoverformat"])}var v=o.index,p=s[v],_=p.isSum?p.b+p.s:p.rawS;o.initial=p.b+p.s-_,o.delta=_,o.final=o.initial+o.delta;var T=h(Math.abs(o.delta));o.deltaLabel=_<0?"("+T+")":T,o.finalLabel=h(o.final),o.initialLabel=h(o.initial);var g=p.hi||l.hoverinfo,A=[];if(g&&g!=="none"&&g!=="skip"){var b=g==="all",w=g.split("+"),k=function(x){return b||w.indexOf(x)!==-1};p.isSum||(k("final")&&(u?!k("x"):!k("y"))&&A.push(o.finalLabel),k("delta")&&(_<0?A.push(o.deltaLabel+" "+zbe.decreasing):A.push(o.deltaLabel+" "+zbe.increasing)),k("initial")&&A.push("Initial: "+o.initialLabel))}return A.length&&(o.extraText=A.join("<br>")),o.color=Dbt(l,p),[o]};function Dbt(e,t){var r=e[t.dir].marker,i=r.color,n=r.line.color,a=r.line.width;if(Fbe(i))return i;if(Fbe(n)&&a)return n}});var Ube=ne((rlr,Nbe)=>{"use strict";Nbe.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"initial"in r&&(t.initial=r.initial),"delta"in r&&(t.delta=r.delta),"final"in r&&(t.final=r.final),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var Hbe=ne((nlr,Vbe)=>{"use strict";Vbe.exports={attributes:JN(),layoutAttributes:QN(),supplyDefaults:eU().supplyDefaults,crossTraceDefaults:eU().crossTraceDefaults,supplyLayoutDefaults:mbe(),calc:Abe(),crossTraceCalc:Ebe(),plot:Lbe(),style:Ibe().style,hoverPoints:Bbe(),eventData:Ube(),selectPoints:dw(),moduleType:"trace",name:"waterfall",basePlotModule:vu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var Ybe=ne((ilr,Gbe)=>{"use strict";Gbe.exports=Hbe()});var Iw=ne((alr,Wbe)=>{"use strict";Wbe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}}}});var nU=ne((olr,Zbe)=>{"use strict";var Ibt=es(),Fbt=Ba().hovertemplateAttrs,Xbe=oa().extendFlat,qbt=Iw().colormodel,mS=["rgb","rgba","rgba256","hsl","hsla"],zbt=[],Obt=[];for(Fw=0;Fw<mS.length;Fw++)yS=qbt[mS[Fw]],zbt.push("For the `"+mS[Fw]+"` colormodel, it is ["+(yS.zminDflt||yS.min).join(", ")+"]."),Obt.push("For the `"+mS[Fw]+"` colormodel, it is ["+(yS.zmaxDflt||yS.max).join(", ")+"].");var yS,Fw;Zbe.exports=Xbe({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:mS,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:Xbe({},Ibt.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:Fbt({},{keys:["z","color","colormodel"]}),transforms:void 0})});var Jbe=ne((slr,Kbe)=>{"use strict";var Bbt=Wt(),Nbt=nU(),jbe=Iw(),Ubt=Wg().IMAGE_URL_PREFIX;Kbe.exports=function(t,r){function i(o,s){return Bbt.coerce(t,r,Nbt,o,s)}i("source"),r.source&&!r.source.match(Ubt)&&delete r.source,r._hasSource=!!r.source;var n=i("z");if(r._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!r._hasZ&&!r._hasSource){r.visible=!1;return}i("x0"),i("y0"),i("dx"),i("dy");var a;r._hasZ?(i("colormodel","rgb"),a=jbe.colormodel[r.colormodel],i("zmin",a.zminDflt||a.min),i("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",a=jbe.colormodel[r.colormodel],r.zmin=a.zminDflt,r.zmax=a.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),r._length=null}});var iy=ne((llr,iU)=>{typeof Object.create=="function"?iU.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:iU.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var aU=ne((ulr,Qbe)=>{Qbe.exports=ox().EventEmitter});var t2e=ne(XP=>{"use strict";XP.byteLength=Hbt;XP.toByteArray=Ybt;XP.fromByteArray=Zbt;var rg=[],Sp=[],Vbt=typeof Uint8Array!="undefined"?Uint8Array:Array,oU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qx=0,$be=oU.length;Qx<$be;++Qx)rg[Qx]=oU[Qx],Sp[oU.charCodeAt(Qx)]=Qx;var Qx,$be;Sp[45]=62;Sp[95]=63;function e2e(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function Hbt(e){var t=e2e(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Gbt(e,t,r){return(t+r)*3/4-r}function Ybt(e){var t,r=e2e(e),i=r[0],n=r[1],a=new Vbt(Gbt(e,i,n)),o=0,s=n>0?i-4:i,l;for(l=0;l<s;l+=4)t=Sp[e.charCodeAt(l)]<<18|Sp[e.charCodeAt(l+1)]<<12|Sp[e.charCodeAt(l+2)]<<6|Sp[e.charCodeAt(l+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return n===2&&(t=Sp[e.charCodeAt(l)]<<2|Sp[e.charCodeAt(l+1)]>>4,a[o++]=t&255),n===1&&(t=Sp[e.charCodeAt(l)]<<10|Sp[e.charCodeAt(l+1)]<<4|Sp[e.charCodeAt(l+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Wbt(e){return rg[e>>18&63]+rg[e>>12&63]+rg[e>>6&63]+rg[e&63]}function Xbt(e,t,r){for(var i,n=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),n.push(Wbt(i));return n.join("")}function Zbt(e){for(var t,r=e.length,i=r%3,n=[],a=16383,o=0,s=r-i;o<s;o+=a)n.push(Xbt(e,o,o+a>s?s:o+a));return i===1?(t=e[r-1],n.push(rg[t>>2]+rg[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(rg[t>>10]+rg[t>>4&63]+rg[t<<2&63]+"=")),n.join("")}});var r2e=ne(sU=>{sU.read=function(e,t,r,i,n){var a,o,s=n*8-i-1,l=(1<<s)-1,u=l>>1,f=-7,c=r?n-1:0,h=r?-1:1,v=e[t+c];for(c+=h,a=v&(1<<-f)-1,v>>=-f,f+=s;f>0;a=a*256+e[t+c],c+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=o*256+e[t+c],c+=h,f-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-u}return(v?-1:1)*o*Math.pow(2,a-i)};sU.write=function(e,t,r,i,n,a){var o,s,l,u=a*8-n-1,f=(1<<u)-1,c=f>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=i?0:a-1,p=i?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=h/l:t+=h*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=f?(s=0,o=f):o+c>=1?(s=(t*l-1)*Math.pow(2,n),o=o+c):(s=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+v]=s&255,v+=p,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+v]=o&255,v+=p,o/=256,u-=8);e[r+v-p]|=_*128}});var e_=ne(Bw=>{"use strict";var lU=t2e(),zw=r2e(),n2e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Bw.Buffer=Fn;Bw.SlowBuffer=e2t;Bw.INSPECT_MAX_BYTES=50;var ZP=2147483647;Bw.kMaxLength=ZP;Fn.TYPED_ARRAY_SUPPORT=jbt();!Fn.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function jbt(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch(e){return!1}}Object.defineProperty(Fn.prototype,"parent",{enumerable:!0,get:function(){if(Fn.isBuffer(this))return this.buffer}});Object.defineProperty(Fn.prototype,"offset",{enumerable:!0,get:function(){if(Fn.isBuffer(this))return this.byteOffset}});function ay(e){if(e>ZP)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,Fn.prototype),t}function Fn(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return hU(e)}return s2e(e,t,r)}Fn.poolSize=8192;function s2e(e,t,r){if(typeof e=="string")return Jbt(e,t);if(ArrayBuffer.isView(e))return Qbt(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ng(e,ArrayBuffer)||e&&ng(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ng(e,SharedArrayBuffer)||e&&ng(e.buffer,SharedArrayBuffer)))return fU(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return Fn.from(i,t,r);let n=$bt(e);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return Fn.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}Fn.from=function(e,t,r){return s2e(e,t,r)};Object.setPrototypeOf(Fn.prototype,Uint8Array.prototype);Object.setPrototypeOf(Fn,Uint8Array);function l2e(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Kbt(e,t,r){return l2e(e),e<=0?ay(e):t!==void 0?typeof r=="string"?ay(e).fill(t,r):ay(e).fill(t):ay(e)}Fn.alloc=function(e,t,r){return Kbt(e,t,r)};function hU(e){return l2e(e),ay(e<0?0:vU(e)|0)}Fn.allocUnsafe=function(e){return hU(e)};Fn.allocUnsafeSlow=function(e){return hU(e)};function Jbt(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Fn.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=u2e(e,t)|0,i=ay(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function uU(e){let t=e.length<0?0:vU(e.length)|0,r=ay(t);for(let i=0;i<t;i+=1)r[i]=e[i]&255;return r}function Qbt(e){if(ng(e,Uint8Array)){let t=new Uint8Array(e);return fU(t.buffer,t.byteOffset,t.byteLength)}return uU(e)}function fU(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&r===void 0?i=new Uint8Array(e):r===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,r),Object.setPrototypeOf(i,Fn.prototype),i}function $bt(e){if(Fn.isBuffer(e)){let t=vU(e.length)|0,r=ay(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||pU(e.length)?ay(0):uU(e);if(e.type==="Buffer"&&Array.isArray(e.data))return uU(e.data)}function vU(e){if(e>=ZP)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ZP.toString(16)+" bytes");return e|0}function e2t(e){return+e!=e&&(e=0),Fn.alloc(+e)}Fn.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Fn.prototype};Fn.compare=function(t,r){if(ng(t,Uint8Array)&&(t=Fn.from(t,t.offset,t.byteLength)),ng(r,Uint8Array)&&(r=Fn.from(r,r.offset,r.byteLength)),!Fn.isBuffer(t)||!Fn.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let i=t.length,n=r.length;for(let a=0,o=Math.min(i,n);a<o;++a)if(t[a]!==r[a]){i=t[a],n=r[a];break}return i<n?-1:n<i?1:0};Fn.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Fn.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Fn.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;let n=Fn.allocUnsafe(r),a=0;for(i=0;i<t.length;++i){let o=t[i];if(ng(o,Uint8Array))a+o.length>n.length?(Fn.isBuffer(o)||(o=Fn.from(o)),o.copy(n,a)):Uint8Array.prototype.set.call(n,o,a);else if(Fn.isBuffer(o))o.copy(n,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return n};function u2e(e,t){if(Fn.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ng(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return cU(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return m2e(e).length;default:if(n)return i?-1:cU(e).length;t=(""+t).toLowerCase(),n=!0}}Fn.byteLength=u2e;function t2t(e,t,r){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return c2t(this,t,r);case"utf8":case"utf-8":return c2e(this,t,r);case"ascii":return u2t(this,t,r);case"latin1":case"binary":return f2t(this,t,r);case"base64":return s2t(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h2t(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Fn.prototype._isBuffer=!0;function $x(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}Fn.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)$x(this,r,r+1);return this};Fn.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)$x(this,r,r+3),$x(this,r+1,r+2);return this};Fn.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)$x(this,r,r+7),$x(this,r+1,r+6),$x(this,r+2,r+5),$x(this,r+3,r+4);return this};Fn.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?c2e(this,0,t):t2t.apply(this,arguments)};Fn.prototype.toLocaleString=Fn.prototype.toString;Fn.prototype.equals=function(t){if(!Fn.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Fn.compare(this,t)===0};Fn.prototype.inspect=function(){let t="",r=Bw.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};n2e&&(Fn.prototype[n2e]=Fn.prototype.inspect);Fn.prototype.compare=function(t,r,i,n,a){if(ng(t,Uint8Array)&&(t=Fn.from(t,t.offset,t.byteLength)),!Fn.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),r<0||i>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&r>=i)return 0;if(n>=a)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,a>>>=0,this===t)return 0;let o=a-n,s=i-r,l=Math.min(o,s),u=this.slice(n,a),f=t.slice(r,i);for(let c=0;c<l;++c)if(u[c]!==f[c]){o=u[c],s=f[c];break}return o<s?-1:s<o?1:0};function f2e(e,t,r,i,n){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,pU(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof t=="string"&&(t=Fn.from(t,i)),Fn.isBuffer(t))return t.length===0?-1:i2e(e,t,r,i,n);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):i2e(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function i2e(e,t,r,i,n){let a=1,o=e.length,s=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,r/=2}function l(f,c){return a===1?f[c]:f.readUInt16BE(c*a)}let u;if(n){let f=-1;for(u=r;u<o;u++)if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*a}else f!==-1&&(u-=u-f),f=-1}else for(r+s>o&&(r=o-s),u=r;u>=0;u--){let f=!0;for(let c=0;c<s;c++)if(l(e,u+c)!==l(t,c)){f=!1;break}if(f)return u}return-1}Fn.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};Fn.prototype.indexOf=function(t,r,i){return f2e(this,t,r,i,!0)};Fn.prototype.lastIndexOf=function(t,r,i){return f2e(this,t,r,i,!1)};function r2t(e,t,r,i){r=Number(r)||0;let n=e.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let a=t.length;i>a/2&&(i=a/2);let o;for(o=0;o<i;++o){let s=parseInt(t.substr(o*2,2),16);if(pU(s))return o;e[r+o]=s}return o}function n2t(e,t,r,i){return jP(cU(t,e.length-r),e,r,i)}function i2t(e,t,r,i){return jP(g2t(t),e,r,i)}function a2t(e,t,r,i){return jP(m2e(t),e,r,i)}function o2t(e,t,r,i){return jP(y2t(t,e.length-r),e,r,i)}Fn.prototype.write=function(t,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return r2t(this,t,r,i);case"utf8":case"utf-8":return n2t(this,t,r,i);case"ascii":case"latin1":case"binary":return i2t(this,t,r,i);case"base64":return a2t(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o2t(this,t,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};Fn.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function s2t(e,t,r){return t===0&&r===e.length?lU.fromByteArray(e):lU.fromByteArray(e.slice(t,r))}function c2e(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let a=e[n],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=r){let l,u,f,c;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[n+1],(l&192)===128&&(c=(a&31)<<6|l&63,c>127&&(o=c));break;case 3:l=e[n+1],u=e[n+2],(l&192)===128&&(u&192)===128&&(c=(a&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=e[n+1],u=e[n+2],f=e[n+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(a&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=s}return l2t(i)}var a2e=4096;function l2t(e){let t=e.length;if(t<=a2e)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=a2e));return r}function u2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]&127);return i}function f2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function c2t(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let a=t;a<r;++a)n+=m2t[e[a]];return n}function h2t(e,t,r){let i=e.slice(t,r),n="";for(let a=0;a<i.length-1;a+=2)n+=String.fromCharCode(i[a]+i[a+1]*256);return n}Fn.prototype.slice=function(t,r){let i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);let n=this.subarray(t,r);return Object.setPrototypeOf(n,Fn.prototype),n};function Oc(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}Fn.prototype.readUintLE=Fn.prototype.readUIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return n};Fn.prototype.readUintBE=Fn.prototype.readUIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t+--r],a=1;for(;r>0&&(a*=256);)n+=this[t+--r]*a;return n};Fn.prototype.readUint8=Fn.prototype.readUInt8=function(t,r){return t=t>>>0,r||Oc(t,1,this.length),this[t]};Fn.prototype.readUint16LE=Fn.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Oc(t,2,this.length),this[t]|this[t+1]<<8};Fn.prototype.readUint16BE=Fn.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Oc(t,2,this.length),this[t]<<8|this[t+1]};Fn.prototype.readUint32LE=Fn.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Fn.prototype.readUint32BE=Fn.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Fn.prototype.readBigUInt64LE=zm(function(t){t=t>>>0,Ow(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&xS(t,this.length-8);let n=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(n)+(BigInt(a)<<BigInt(32))});Fn.prototype.readBigUInt64BE=zm(function(t){t=t>>>0,Ow(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&xS(t,this.length-8);let n=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(a)});Fn.prototype.readIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*r)),n};Fn.prototype.readIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=r,a=1,o=this[t+--n];for(;n>0&&(a*=256);)o+=this[t+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};Fn.prototype.readInt8=function(t,r){return t=t>>>0,r||Oc(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Fn.prototype.readInt16LE=function(t,r){t=t>>>0,r||Oc(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Fn.prototype.readInt16BE=function(t,r){t=t>>>0,r||Oc(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Fn.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Fn.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Fn.prototype.readBigInt64LE=zm(function(t){t=t>>>0,Ow(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&xS(t,this.length-8);let n=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Fn.prototype.readBigInt64BE=zm(function(t){t=t>>>0,Ow(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&xS(t,this.length-8);let n=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});Fn.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),zw.read(this,t,!0,23,4)};Fn.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),zw.read(this,t,!1,23,4)};Fn.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Oc(t,8,this.length),zw.read(this,t,!0,52,8)};Fn.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Oc(t,8,this.length),zw.read(this,t,!1,52,8)};function fd(e,t,r,i,n,a){if(!Fn.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}Fn.prototype.writeUintLE=Fn.prototype.writeUIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;fd(this,t,r,i,s,0)}let a=1,o=0;for(this[r]=t&255;++o<i&&(a*=256);)this[r+o]=t/a&255;return r+i};Fn.prototype.writeUintBE=Fn.prototype.writeUIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;fd(this,t,r,i,s,0)}let a=i-1,o=1;for(this[r+a]=t&255;--a>=0&&(o*=256);)this[r+a]=t/o&255;return r+i};Fn.prototype.writeUint8=Fn.prototype.writeUInt8=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,1,255,0),this[r]=t&255,r+1};Fn.prototype.writeUint16LE=Fn.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};Fn.prototype.writeUint16BE=Fn.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};Fn.prototype.writeUint32LE=Fn.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};Fn.prototype.writeUint32BE=Fn.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function h2e(e,t,r,i,n){y2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,r}function v2e(e,t,r,i,n){y2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o=o>>8,e[r+2]=o,o=o>>8,e[r+1]=o,o=o>>8,e[r]=o,r+8}Fn.prototype.writeBigUInt64LE=zm(function(t,r=0){return h2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});Fn.prototype.writeBigUInt64BE=zm(function(t,r=0){return v2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});Fn.prototype.writeIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);fd(this,t,r,i,l-1,-l)}let a=0,o=1,s=0;for(this[r]=t&255;++a<i&&(o*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};Fn.prototype.writeIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);fd(this,t,r,i,l-1,-l)}let a=i-1,o=1,s=0;for(this[r+a]=t&255;--a>=0&&(o*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};Fn.prototype.writeInt8=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};Fn.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};Fn.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};Fn.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};Fn.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};Fn.prototype.writeBigInt64LE=zm(function(t,r=0){return h2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Fn.prototype.writeBigInt64BE=zm(function(t,r=0){return v2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function d2e(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function p2e(e,t,r,i,n){return t=+t,r=r>>>0,n||d2e(e,t,r,4,34028234663852886e22,-34028234663852886e22),zw.write(e,t,r,i,23,4),r+4}Fn.prototype.writeFloatLE=function(t,r,i){return p2e(this,t,r,!0,i)};Fn.prototype.writeFloatBE=function(t,r,i){return p2e(this,t,r,!1,i)};function g2e(e,t,r,i,n){return t=+t,r=r>>>0,n||d2e(e,t,r,8,17976931348623157e292,-17976931348623157e292),zw.write(e,t,r,i,52,8),r+8}Fn.prototype.writeDoubleLE=function(t,r,i){return g2e(this,t,r,!0,i)};Fn.prototype.writeDoubleBE=function(t,r,i){return g2e(this,t,r,!1,i)};Fn.prototype.copy=function(t,r,i,n){if(!Fn.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<i&&(n=i),n===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-i&&(n=t.length-r+i);let a=n-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),r),a};Fn.prototype.fill=function(t,r,i,n){if(typeof t=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Fn.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(t.length===1){let o=t.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<i;++a)this[a]=t;else{let o=Fn.isBuffer(t)?t:Fn.from(t,n),s=o.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-r;++a)this[a+r]=o[a%s]}return this};var qw={};function dU(e,t,r){qw[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}dU("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);dU("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);dU("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=o2e(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=o2e(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);function o2e(e){let t="",r=e.length,i=e[0]==="-"?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function v2t(e,t,r){Ow(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&xS(t,e.length-(r+1))}function y2e(e,t,r,i,n,a){if(e>r||e<t){let o=typeof t=="bigint"?"n":"",s;throw a>3?t===0||t===BigInt(0)?s=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:s=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:s=`>= ${t}${o} and <= ${r}${o}`,new qw.ERR_OUT_OF_RANGE("value",s,e)}v2t(i,n,a)}function Ow(e,t){if(typeof e!="number")throw new qw.ERR_INVALID_ARG_TYPE(t,"number",e)}function xS(e,t,r){throw Math.floor(e)!==e?(Ow(e,r),new qw.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new qw.ERR_BUFFER_OUT_OF_BOUNDS:new qw.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var d2t=/[^+/0-9A-Za-z-_]/g;function p2t(e){if(e=e.split("=")[0],e=e.trim().replace(d2t,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function cU(e,t){t=t||1/0;let r,i=e.length,n=null,a=[];for(let o=0;o<i;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function g2t(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function y2t(e,t){let r,i,n,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}function m2e(e){return lU.toByteArray(p2t(e))}function jP(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function ng(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function pU(e){return e!==e}var m2t=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function zm(e){return typeof BigInt=="undefined"?x2t:e}function x2t(){throw new Error("BigInt not supported")}});var KP=ne((dlr,x2e)=>{"use strict";x2e.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var _S=ne((plr,_2e)=>{"use strict";var _2t=KP();_2e.exports=function(){return _2t()&&!!Symbol.toStringTag}});var T2e=ne((glr,w2e)=>{"use strict";var b2e=typeof Symbol!="undefined"&&Symbol,b2t=KP();w2e.exports=function(){return typeof b2e!="function"||typeof Symbol!="function"||typeof b2e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:b2t()}});var S2e=ne((ylr,M2e)=>{"use strict";var A2e={foo:{}},w2t=Object;M2e.exports=function(){return{__proto__:A2e}.foo===A2e.foo&&!({__proto__:null}instanceof w2t)}});var C2e=ne((mlr,k2e)=>{"use strict";var T2t="Function.prototype.bind called on incompatible ",A2t=Object.prototype.toString,M2t=Math.max,S2t="[object Function]",E2e=function(t,r){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var a=0;a<r.length;a+=1)i[a+t.length]=r[a];return i},E2t=function(t,r){for(var i=[],n=r||0,a=0;n<t.length;n+=1,a+=1)i[a]=t[n];return i},k2t=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};k2e.exports=function(t){var r=this;if(typeof r!="function"||A2t.apply(r)!==S2t)throw new TypeError(T2t+r);for(var i=E2t(arguments,1),n,a=function(){if(this instanceof n){var f=r.apply(this,E2e(i,arguments));return Object(f)===f?f:this}return r.apply(t,E2e(i,arguments))},o=M2t(0,r.length-i.length),s=[],l=0;l<o;l++)s[l]="$"+l;if(n=Function("binder","return function ("+k2t(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var JP=ne((xlr,L2e)=>{"use strict";var C2t=C2e();L2e.exports=Function.prototype.bind||C2t});var R2e=ne((_lr,P2e)=>{"use strict";var L2t=Function.prototype.call,P2t=Object.prototype.hasOwnProperty,R2t=JP();P2e.exports=R2t.call(L2t,P2t)});var n_=ne((blr,z2e)=>{"use strict";var us,Hw=SyntaxError,q2e=Function,Vw=TypeError,gU=function(e){try{return q2e('"use strict"; return ('+e+").constructor;")()}catch(t){}},t_=Object.getOwnPropertyDescriptor;if(t_)try{t_({},"")}catch(e){t_=null}var yU=function(){throw new Vw},D2t=t_?function(){try{return arguments.callee,yU}catch(e){try{return t_(arguments,"callee").get}catch(t){return yU}}}():yU,Nw=T2e()(),I2t=S2e()(),Bc=Object.getPrototypeOf||(I2t?function(e){return e.__proto__}:null),Uw={},F2t=typeof Uint8Array=="undefined"||!Bc?us:Bc(Uint8Array),r_={"%AggregateError%":typeof AggregateError=="undefined"?us:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?us:ArrayBuffer,"%ArrayIteratorPrototype%":Nw&&Bc?Bc([][Symbol.iterator]()):us,"%AsyncFromSyncIteratorPrototype%":us,"%AsyncFunction%":Uw,"%AsyncGenerator%":Uw,"%AsyncGeneratorFunction%":Uw,"%AsyncIteratorPrototype%":Uw,"%Atomics%":typeof Atomics=="undefined"?us:Atomics,"%BigInt%":typeof BigInt=="undefined"?us:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?us:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?us:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?us:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?us:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?us:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?us:FinalizationRegistry,"%Function%":q2e,"%GeneratorFunction%":Uw,"%Int8Array%":typeof Int8Array=="undefined"?us:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?us:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?us:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Nw&&Bc?Bc(Bc([][Symbol.iterator]())):us,"%JSON%":typeof JSON=="object"?JSON:us,"%Map%":typeof Map=="undefined"?us:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Nw||!Bc?us:Bc(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?us:Promise,"%Proxy%":typeof Proxy=="undefined"?us:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?us:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?us:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Nw||!Bc?us:Bc(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?us:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Nw&&Bc?Bc(""[Symbol.iterator]()):us,"%Symbol%":Nw?Symbol:us,"%SyntaxError%":Hw,"%ThrowTypeError%":D2t,"%TypedArray%":F2t,"%TypeError%":Vw,"%Uint8Array%":typeof Uint8Array=="undefined"?us:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?us:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?us:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?us:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?us:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?us:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?us:WeakSet};if(Bc)try{null.error}catch(e){D2e=Bc(Bc(e)),r_["%Error.prototype%"]=D2e}var D2e,q2t=function e(t){var r;if(t==="%AsyncFunction%")r=gU("async function () {}");else if(t==="%GeneratorFunction%")r=gU("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=gU("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&Bc&&(r=Bc(n.prototype))}return r_[t]=r,r},I2e={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bS=JP(),QP=R2e(),z2t=bS.call(Function.call,Array.prototype.concat),O2t=bS.call(Function.apply,Array.prototype.splice),F2e=bS.call(Function.call,String.prototype.replace),$P=bS.call(Function.call,String.prototype.slice),B2t=bS.call(Function.call,RegExp.prototype.exec),N2t=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U2t=/\\(\\)?/g,V2t=function(t){var r=$P(t,0,1),i=$P(t,-1);if(r==="%"&&i!=="%")throw new Hw("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Hw("invalid intrinsic syntax, expected opening `%`");var n=[];return F2e(t,N2t,function(a,o,s,l){n[n.length]=s?F2e(l,U2t,"$1"):o||a}),n},H2t=function(t,r){var i=t,n;if(QP(I2e,i)&&(n=I2e[i],i="%"+n[0]+"%"),QP(r_,i)){var a=r_[i];if(a===Uw&&(a=q2t(i)),typeof a=="undefined"&&!r)throw new Vw("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new Hw("intrinsic "+t+" does not exist!")};z2e.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Vw("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vw('"allowMissing" argument must be a boolean');if(B2t(/^%?[^%]*%?$/,t)===null)throw new Hw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=V2t(t),n=i.length>0?i[0]:"",a=H2t("%"+n+"%",r),o=a.name,s=a.value,l=!1,u=a.alias;u&&(n=u[0],O2t(i,z2t([0,1],u)));for(var f=1,c=!0;f<i.length;f+=1){var h=i[f],v=$P(h,0,1),p=$P(h,-1);if((v==='"'||v==="'"||v==="`"||p==='"'||p==="'"||p==="`")&&v!==p)throw new Hw("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(l=!0),n+="."+h,o="%"+n+"%",QP(r_,o))s=r_[o];else if(s!=null){if(!(h in s)){if(!r)throw new Vw("base intrinsic for "+t+" exists, but the property is not available.");return}if(t_&&f+1>=i.length){var _=t_(s,h);c=!!_,c&&"get"in _&&!("originalValue"in _.get)?s=_.get:s=s[h]}else c=QP(s,h),s=s[h];c&&!l&&(r_[o]=s)}}return s}});var e6=ne((wlr,O2e)=>{"use strict";var G2t=n_(),mU=G2t("%Object.defineProperty%",!0),xU=function(){if(mU)try{return mU({},"a",{value:1}),!0}catch(t){return!1}return!1};xU.hasArrayLengthDefineBug=function(){if(!xU())return null;try{return mU([],"length",{value:1}).length!==1}catch(t){return!0}};O2e.exports=xU});var wS=ne((Tlr,B2e)=>{"use strict";var Y2t=n_(),t6=Y2t("%Object.getOwnPropertyDescriptor%",!0);if(t6)try{t6([],"length")}catch(e){t6=null}B2e.exports=t6});var V2e=ne((Alr,U2e)=>{"use strict";var W2t=e6()(),_U=n_(),TS=W2t&&_U("%Object.defineProperty%",!0);if(TS)try{TS({},"a",{value:1})}catch(e){TS=!1}var X2t=_U("%SyntaxError%"),Gw=_U("%TypeError%"),N2e=wS();U2e.exports=function(t,r,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Gw("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Gw("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Gw("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Gw("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Gw("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Gw("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!N2e&&N2e(t,r);if(TS)TS(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:a===null&&l?l.writable:!a});else if(s||!n&&!a&&!o)t[r]=i;else throw new X2t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Z2e=ne((Mlr,X2e)=>{"use strict";var W2e=n_(),H2e=V2e(),Z2t=e6()(),G2e=wS(),Y2e=W2e("%TypeError%"),j2t=W2e("%Math.floor%");X2e.exports=function(t,r){if(typeof t!="function")throw new Y2e("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||j2t(r)!==r)throw new Y2e("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,a=!0;if("length"in t&&G2e){var o=G2e(t,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(a=!1)}return(n||a||!i)&&(Z2t?H2e(t,"length",r,!0,!0):H2e(t,"length",r)),t}});var MS=ne((Slr,r6)=>{"use strict";var bU=JP(),Yw=n_(),K2t=Z2e(),J2t=Yw("%TypeError%"),K2e=Yw("%Function.prototype.apply%"),J2e=Yw("%Function.prototype.call%"),Q2e=Yw("%Reflect.apply%",!0)||bU.call(J2e,K2e),AS=Yw("%Object.defineProperty%",!0),Q2t=Yw("%Math.max%");if(AS)try{AS({},"a",{value:1})}catch(e){AS=null}r6.exports=function(t){if(typeof t!="function")throw new J2t("a function is required");var r=Q2e(bU,J2e,arguments);return K2t(r,1+Q2t(0,t.length-(arguments.length-1)),!0)};var j2e=function(){return Q2e(bU,K2e,arguments)};AS?AS(r6.exports,"apply",{value:j2e}):r6.exports.apply=j2e});var Ww=ne((Elr,twe)=>{"use strict";var $2e=n_(),ewe=MS(),$2t=ewe($2e("String.prototype.indexOf"));twe.exports=function(t,r){var i=$2e(t,!!r);return typeof i=="function"&&$2t(t,".prototype.")>-1?ewe(i):i}});var iwe=ne((klr,nwe)=>{"use strict";var ewt=_S()(),twt=Ww(),wU=twt("Object.prototype.toString"),n6=function(t){return ewt&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:wU(t)==="[object Arguments]"},rwe=function(t){return n6(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&wU(t)!=="[object Array]"&&wU(t.callee)==="[object Function]"},rwt=function(){return n6(arguments)}();n6.isLegacyArguments=rwe;nwe.exports=rwt?n6:rwe});var swe=ne((Clr,owe)=>{"use strict";var nwt=Object.prototype.toString,iwt=Function.prototype.toString,awt=/^\s*(?:function)?\*/,awe=_S()(),TU=Object.getPrototypeOf,owt=function(){if(!awe)return!1;try{return Function("return function*() {}")()}catch(e){}},AU;owe.exports=function(t){if(typeof t!="function")return!1;if(awt.test(iwt.call(t)))return!0;if(!awe){var r=nwt.call(t);return r==="[object GeneratorFunction]"}if(!TU)return!1;if(typeof AU=="undefined"){var i=owt();AU=i?TU(i):!1}return TU(t)===AU}});var cwe=ne((Llr,fwe)=>{"use strict";var uwe=Function.prototype.toString,Xw=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,SU,i6;if(typeof Xw=="function"&&typeof Object.defineProperty=="function")try{SU=Object.defineProperty({},"length",{get:function(){throw i6}}),i6={},Xw(function(){throw 42},null,SU)}catch(e){e!==i6&&(Xw=null)}else Xw=null;var swt=/^\s*class\b/,EU=function(t){try{var r=uwe.call(t);return swt.test(r)}catch(i){return!1}},MU=function(t){try{return EU(t)?!1:(uwe.call(t),!0)}catch(r){return!1}},a6=Object.prototype.toString,lwt="[object Object]",uwt="[object Function]",fwt="[object GeneratorFunction]",cwt="[object HTMLAllCollection]",hwt="[object HTML document.all class]",vwt="[object HTMLCollection]",dwt=typeof Symbol=="function"&&!!Symbol.toStringTag,pwt=!(0 in[,]),kU=function(){return!1};typeof document=="object"&&(lwe=document.all,a6.call(lwe)===a6.call(document.all)&&(kU=function(t){if((pwt||!t)&&(typeof t=="undefined"||typeof t=="object"))try{var r=a6.call(t);return(r===cwt||r===hwt||r===vwt||r===lwt)&&t("")==null}catch(i){}return!1}));var lwe;fwe.exports=Xw?function(t){if(kU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Xw(t,null,SU)}catch(r){if(r!==i6)return!1}return!EU(t)&&MU(t)}:function(t){if(kU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(dwt)return MU(t);if(EU(t))return!1;var r=a6.call(t);return r!==uwt&&r!==fwt&&!/^\[object HTML/.test(r)?!1:MU(t)}});var CU=ne((Plr,vwe)=>{"use strict";var gwt=cwe(),ywt=Object.prototype.toString,hwe=Object.prototype.hasOwnProperty,mwt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)hwe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},xwt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)i==null?r(t.charAt(n),n,t):r.call(i,t.charAt(n),n,t)},_wt=function(t,r,i){for(var n in t)hwe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},bwt=function(t,r,i){if(!gwt(r))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=i),ywt.call(t)==="[object Array]"?mwt(t,r,n):typeof t=="string"?xwt(t,r,n):_wt(t,r,n)};vwe.exports=bwt});var PU=ne((Rlr,dwe)=>{"use strict";var LU=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],wwt=typeof globalThis=="undefined"?window:globalThis;dwe.exports=function(){for(var t=[],r=0;r<LU.length;r++)typeof wwt[LU[r]]=="function"&&(t[t.length]=LU[r]);return t}});var xwe=ne((Dlr,mwe)=>{"use strict";var s6=CU(),Twt=PU(),pwe=MS(),IU=Ww(),o6=wS(),Awt=IU("Object.prototype.toString"),ywe=_S()(),gwe=typeof globalThis=="undefined"?window:globalThis,DU=Twt(),FU=IU("String.prototype.slice"),RU=Object.getPrototypeOf,Mwt=IU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},l6={__proto__:null};ywe&&o6&&RU?s6(DU,function(e){var t=new gwe[e];if(Symbol.toStringTag in t){var r=RU(t),i=o6(r,Symbol.toStringTag);if(!i){var n=RU(r);i=o6(n,Symbol.toStringTag)}l6["$"+e]=pwe(i.get)}}):s6(DU,function(e){var t=new gwe[e],r=t.slice||t.set;r&&(l6["$"+e]=pwe(r))});var Swt=function(t){var r=!1;return s6(l6,function(i,n){if(!r)try{"$"+i(t)===n&&(r=FU(n,1))}catch(a){}}),r},Ewt=function(t){var r=!1;return s6(l6,function(i,n){if(!r)try{i(t),r=FU(n,1)}catch(a){}}),r};mwe.exports=function(t){if(!t||typeof t!="object")return!1;if(!ywe){var r=FU(Awt(t),8,-1);return Mwt(DU,r)>-1?r:r!=="Object"?!1:Ewt(t)}return o6?Swt(t):null}});var Mwe=ne((Ilr,Awe)=>{"use strict";var _we=CU(),kwt=PU(),zU=Ww(),Cwt=zU("Object.prototype.toString"),bwe=_S()(),u6=wS(),Lwt=typeof globalThis=="undefined"?window:globalThis,wwe=kwt(),Pwt=zU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},Rwt=zU("String.prototype.slice"),Twe={},qU=Object.getPrototypeOf;bwe&&u6&&qU&&_we(wwe,function(e){var t=new Lwt[e];if(Symbol.toStringTag in t){var r=qU(t),i=u6(r,Symbol.toStringTag);if(!i){var n=qU(r);i=u6(n,Symbol.toStringTag)}Twe[e]=i.get}});var Dwt=function(t){var r=!1;return _we(Twe,function(i,n){if(!r)try{r=i.call(t)===n}catch(a){}}),r};Awe.exports=function(t){if(!t||typeof t!="object")return!1;if(!bwe||!(Symbol.toStringTag in t)){var r=Rwt(Cwt(t),8,-1);return Pwt(wwe,r)>-1}return u6?Dwt(t):!1}});var NU=ne(ts=>{"use strict";var Iwt=iwe(),Fwt=swe(),_0=xwe(),Swe=Mwe();function Zw(e){return e.call.bind(e)}var Ewe=typeof BigInt!="undefined",kwe=typeof Symbol!="undefined",Ep=Zw(Object.prototype.toString),qwt=Zw(Number.prototype.valueOf),zwt=Zw(String.prototype.valueOf),Owt=Zw(Boolean.prototype.valueOf);Ewe&&(Cwe=Zw(BigInt.prototype.valueOf));var Cwe;kwe&&(Lwe=Zw(Symbol.prototype.valueOf));var Lwe;function ES(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch(r){return!1}}ts.isArgumentsObject=Iwt;ts.isGeneratorFunction=Fwt;ts.isTypedArray=Swe;function Bwt(e){return typeof Promise!="undefined"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}ts.isPromise=Bwt;function Nwt(e){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(e):Swe(e)||Rwe(e)}ts.isArrayBufferView=Nwt;function Uwt(e){return _0(e)==="Uint8Array"}ts.isUint8Array=Uwt;function Vwt(e){return _0(e)==="Uint8ClampedArray"}ts.isUint8ClampedArray=Vwt;function Hwt(e){return _0(e)==="Uint16Array"}ts.isUint16Array=Hwt;function Gwt(e){return _0(e)==="Uint32Array"}ts.isUint32Array=Gwt;function Ywt(e){return _0(e)==="Int8Array"}ts.isInt8Array=Ywt;function Wwt(e){return _0(e)==="Int16Array"}ts.isInt16Array=Wwt;function Xwt(e){return _0(e)==="Int32Array"}ts.isInt32Array=Xwt;function Zwt(e){return _0(e)==="Float32Array"}ts.isFloat32Array=Zwt;function jwt(e){return _0(e)==="Float64Array"}ts.isFloat64Array=jwt;function Kwt(e){return _0(e)==="BigInt64Array"}ts.isBigInt64Array=Kwt;function Jwt(e){return _0(e)==="BigUint64Array"}ts.isBigUint64Array=Jwt;function f6(e){return Ep(e)==="[object Map]"}f6.working=typeof Map!="undefined"&&f6(new Map);function Qwt(e){return typeof Map=="undefined"?!1:f6.working?f6(e):e instanceof Map}ts.isMap=Qwt;function c6(e){return Ep(e)==="[object Set]"}c6.working=typeof Set!="undefined"&&c6(new Set);function $wt(e){return typeof Set=="undefined"?!1:c6.working?c6(e):e instanceof Set}ts.isSet=$wt;function h6(e){return Ep(e)==="[object WeakMap]"}h6.working=typeof WeakMap!="undefined"&&h6(new WeakMap);function e3t(e){return typeof WeakMap=="undefined"?!1:h6.working?h6(e):e instanceof WeakMap}ts.isWeakMap=e3t;function BU(e){return Ep(e)==="[object WeakSet]"}BU.working=typeof WeakSet!="undefined"&&BU(new WeakSet);function t3t(e){return BU(e)}ts.isWeakSet=t3t;function v6(e){return Ep(e)==="[object ArrayBuffer]"}v6.working=typeof ArrayBuffer!="undefined"&&v6(new ArrayBuffer);function Pwe(e){return typeof ArrayBuffer=="undefined"?!1:v6.working?v6(e):e instanceof ArrayBuffer}ts.isArrayBuffer=Pwe;function d6(e){return Ep(e)==="[object DataView]"}d6.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&d6(new DataView(new ArrayBuffer(1),0,1));function Rwe(e){return typeof DataView=="undefined"?!1:d6.working?d6(e):e instanceof DataView}ts.isDataView=Rwe;var OU=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function SS(e){return Ep(e)==="[object SharedArrayBuffer]"}function Dwe(e){return typeof OU=="undefined"?!1:(typeof SS.working=="undefined"&&(SS.working=SS(new OU)),SS.working?SS(e):e instanceof OU)}ts.isSharedArrayBuffer=Dwe;function r3t(e){return Ep(e)==="[object AsyncFunction]"}ts.isAsyncFunction=r3t;function n3t(e){return Ep(e)==="[object Map Iterator]"}ts.isMapIterator=n3t;function i3t(e){return Ep(e)==="[object Set Iterator]"}ts.isSetIterator=i3t;function a3t(e){return Ep(e)==="[object Generator]"}ts.isGeneratorObject=a3t;function o3t(e){return Ep(e)==="[object WebAssembly.Module]"}ts.isWebAssemblyCompiledModule=o3t;function Iwe(e){return ES(e,qwt)}ts.isNumberObject=Iwe;function Fwe(e){return ES(e,zwt)}ts.isStringObject=Fwe;function qwe(e){return ES(e,Owt)}ts.isBooleanObject=qwe;function zwe(e){return Ewe&&ES(e,Cwe)}ts.isBigIntObject=zwe;function Owe(e){return kwe&&ES(e,Lwe)}ts.isSymbolObject=Owe;function s3t(e){return Iwe(e)||Fwe(e)||qwe(e)||zwe(e)||Owe(e)}ts.isBoxedPrimitive=s3t;function l3t(e){return typeof Uint8Array!="undefined"&&(Pwe(e)||Dwe(e))}ts.isAnyArrayBuffer=l3t;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(ts,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var UU=ne((qlr,Bwe)=>{Bwe.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var XU=ne(rs=>{var Nwe=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},u3t=/%[sdj%]/g;rs.format=function(e){if(!b6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Om(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(u3t,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])_6(o)||!jw(o)?a+=" "+o:a+=" "+Om(o);return a};rs.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return rs.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var p6={},Uwe=/^$/;g6="false",g6=g6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Uwe=new RegExp("^"+g6+"$","i");var g6;rs.debuglog=function(e){if(e=e.toUpperCase(),!p6[e])if(Uwe.test(e)){var t=process.pid;p6[e]=function(){var r=rs.format.apply(rs,arguments);console.error("%s %d: %s",e,t,r)}}else p6[e]=function(){};return p6[e]};function Om(e,t){var r={seen:[],stylize:c3t};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),YU(t)?r.showHidden=t:t&&rs._extend(r,t),a_(r.showHidden)&&(r.showHidden=!1),a_(r.depth)&&(r.depth=2),a_(r.colors)&&(r.colors=!1),a_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=f3t),m6(r,e,r.depth)}rs.inspect=Om;Om.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Om.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function f3t(e,t){var r=Om.styles[t];return r?"\x1B["+Om.colors[r][0]+"m"+e+"\x1B["+Om.colors[r][1]+"m":e}function c3t(e,t){return e}function h3t(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function m6(e,t,r){if(e.customInspect&&t&&y6(t.inspect)&&t.inspect!==rs.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return b6(i)||(i=m6(e,i,r)),i}var n=v3t(e,t);if(n)return n;var a=Object.keys(t),o=h3t(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),CS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return VU(t);if(a.length===0){if(y6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(kS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(CS(t))return VU(t)}var l="",u=!1,f=["{","}"];if(Vwe(t)&&(u=!0,f=["[","]"]),y6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(kS(t)&&(l=" "+RegExp.prototype.toString.call(t)),x6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),CS(t)&&(l=" "+VU(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return kS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=d3t(e,t,r,o,a):h=a.map(function(v){return GU(e,t,r,o,v,u)}),e.seen.pop(),p3t(h,l,f)}function v3t(e,t){if(a_(t))return e.stylize("undefined","undefined");if(b6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Hwe(t))return e.stylize(""+t,"number");if(YU(t))return e.stylize(""+t,"boolean");if(_6(t))return e.stylize("null","null")}function VU(e){return"["+Error.prototype.toString.call(e)+"]"}function d3t(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)Gwe(t,String(o))?a.push(GU(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(GU(e,t,r,i,l,!0))}),a}function GU(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Gwe(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(_6(r)?s=m6(e,l.value,null):s=m6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),a_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p3t(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}rs.types=NU();function Vwe(e){return Array.isArray(e)}rs.isArray=Vwe;function YU(e){return typeof e=="boolean"}rs.isBoolean=YU;function _6(e){return e===null}rs.isNull=_6;function g3t(e){return e==null}rs.isNullOrUndefined=g3t;function Hwe(e){return typeof e=="number"}rs.isNumber=Hwe;function b6(e){return typeof e=="string"}rs.isString=b6;function y3t(e){return typeof e=="symbol"}rs.isSymbol=y3t;function a_(e){return e===void 0}rs.isUndefined=a_;function kS(e){return jw(e)&&WU(e)==="[object RegExp]"}rs.isRegExp=kS;rs.types.isRegExp=kS;function jw(e){return typeof e=="object"&&e!==null}rs.isObject=jw;function x6(e){return jw(e)&&WU(e)==="[object Date]"}rs.isDate=x6;rs.types.isDate=x6;function CS(e){return jw(e)&&(WU(e)==="[object Error]"||e instanceof Error)}rs.isError=CS;rs.types.isNativeError=CS;function y6(e){return typeof e=="function"}rs.isFunction=y6;function m3t(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}rs.isPrimitive=m3t;rs.isBuffer=UU();function WU(e){return Object.prototype.toString.call(e)}function HU(e){return e<10?"0"+e.toString(10):e.toString(10)}var x3t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _3t(){var e=new Date,t=[HU(e.getHours()),HU(e.getMinutes()),HU(e.getSeconds())].join(":");return[e.getDate(),x3t[e.getMonth()],t].join(" ")}rs.log=function(){console.log("%s - %s",_3t(),rs.format.apply(rs,arguments))};rs.inherits=iy();rs._extend=function(e,t){if(!t||!jw(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function Gwe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;rs.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(i_&&t[i_]){var r=t[i_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,i_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),i_&&Object.defineProperty(r,i_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Nwe(t))};rs.promisify.custom=i_;function b3t(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function w3t(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(b3t.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Nwe(e)),t}rs.callbackify=w3t});var Zwe=ne((Olr,Xwe)=>{"use strict";function Ywe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function T3t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ywe(Object(r),!0).forEach(function(i){A3t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ywe(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function A3t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wwe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function S3t(e,t,r){return t&&Wwe(e.prototype,t),r&&Wwe(e,r),e}var E3t=e_(),w6=E3t.Buffer,k3t=XU(),ZU=k3t.inspect,C3t=ZU&&ZU.custom||"inspect";function L3t(e,t,r){w6.prototype.copy.call(e,t,r)}Xwe.exports=function(){function e(){M3t(this,e),this.head=null,this.tail=null,this.length=0}return S3t(e,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return w6.alloc(0);for(var i=w6.allocUnsafe(r>>>0),n=this.head,a=0;n;)L3t(n.data,i,a),a+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,a=i.data;for(r-=a.length;i=i.next;){var o=i.data,s=r>o.length?o.length:r;if(s===o.length?a+=o:a+=o.slice(0,r),r-=s,r===0){s===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(s));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(r){var i=w6.allocUnsafe(r),n=this.head,a=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,s=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,s),r-=s,r===0){s===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++a}return this.length-=a,i}},{key:C3t,value:function(r,i){return ZU(this,T3t({},i,{depth:0,customInspect:!1}))}}]),e}()});var KU=ne((Blr,Kwe)=>{"use strict";function P3t(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(jU,this,e)):process.nextTick(jU,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?r._writableState?r._writableState.errorEmitted?process.nextTick(T6,r):(r._writableState.errorEmitted=!0,process.nextTick(jwe,r,a)):process.nextTick(jwe,r,a):t?(process.nextTick(T6,r),t(a)):process.nextTick(T6,r)}),this)}function jwe(e,t){jU(e,t),T6(e)}function T6(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function R3t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function jU(e,t){e.emit("error",t)}function D3t(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}Kwe.exports={destroy:P3t,undestroy:R3t,errorOrDestroy:D3t}});var o_=ne((Nlr,$we)=>{"use strict";function I3t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Qwe={};function kp(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){I3t(o,a);function o(s,l,u){return a.call(this,i(s,l,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=e,Qwe[e]=n}function Jwe(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function F3t(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function q3t(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function z3t(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}kp("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);kp("ERR_INVALID_ARG_TYPE",function(e,t,r){var i;typeof t=="string"&&F3t(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(q3t(e," argument"))n="The ".concat(e," ").concat(i," ").concat(Jwe(t,"type"));else{var a=z3t(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(Jwe(t,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);kp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");kp("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});kp("ERR_STREAM_PREMATURE_CLOSE","Premature close");kp("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});kp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");kp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");kp("ERR_STREAM_WRITE_AFTER_END","write after end");kp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);kp("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);kp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");$we.exports.codes=Qwe});var JU=ne((Ulr,e3e)=>{"use strict";var O3t=o_().codes.ERR_INVALID_OPT_VALUE;function B3t(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function N3t(e,t,r,i){var n=B3t(t,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=i?r:"highWaterMark";throw new O3t(a,n)}return Math.floor(n)}return e.objectMode?16:16*1024}e3e.exports={getHighWaterMark:N3t}});var r3e=ne((Vlr,t3e)=>{t3e.exports=U3t;function U3t(e,t){if(QU("noDeprecation"))return e;var r=!1;function i(){if(!r){if(QU("throwDeprecation"))throw new Error(t);QU("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return i}function QU(e){try{if(!window.localStorage)return!1}catch(r){return!1}var t=window.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}});var tV=ne((Hlr,l3e)=>{"use strict";l3e.exports=nf;function i3e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){dTt(t,e)}}var Kw;nf.WritableState=PS;var V3t={deprecate:r3e()},a3e=aU(),M6=e_().Buffer,H3t=window.Uint8Array||function(){};function G3t(e){return M6.from(e)}function Y3t(e){return M6.isBuffer(e)||e instanceof H3t}var eV=KU(),W3t=JU(),X3t=W3t.getHighWaterMark,Bm=o_().codes,Z3t=Bm.ERR_INVALID_ARG_TYPE,j3t=Bm.ERR_METHOD_NOT_IMPLEMENTED,K3t=Bm.ERR_MULTIPLE_CALLBACK,J3t=Bm.ERR_STREAM_CANNOT_PIPE,Q3t=Bm.ERR_STREAM_DESTROYED,$3t=Bm.ERR_STREAM_NULL_VALUES,eTt=Bm.ERR_STREAM_WRITE_AFTER_END,tTt=Bm.ERR_UNKNOWN_ENCODING,Jw=eV.errorOrDestroy;iy()(nf,a3e);function rTt(){}function PS(e,t,r){Kw=Kw||s_(),e=e||{},typeof r!="boolean"&&(r=t instanceof Kw),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=X3t(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){uTt(t,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i3e(this)}PS.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(PS.prototype,"buffer",{get:V3t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}})();var A6;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A6=Function.prototype[Symbol.hasInstance],Object.defineProperty(nf,Symbol.hasInstance,{value:function(t){return A6.call(this,t)?!0:this!==nf?!1:t&&t._writableState instanceof PS}})):A6=function(t){return t instanceof this};function nf(e){Kw=Kw||s_();var t=this instanceof Kw;if(!t&&!A6.call(nf,this))return new nf(e);this._writableState=new PS(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),a3e.call(this)}nf.prototype.pipe=function(){Jw(this,new J3t)};function nTt(e,t){var r=new eTt;Jw(e,r),process.nextTick(t,r)}function iTt(e,t,r,i){var n;return r===null?n=new $3t:typeof r!="string"&&!t.objectMode&&(n=new Z3t("chunk",["string","Buffer"],r)),n?(Jw(e,n),process.nextTick(i,n),!1):!0}nf.prototype.write=function(e,t,r){var i=this._writableState,n=!1,a=!i.objectMode&&Y3t(e);return a&&!M6.isBuffer(e)&&(e=G3t(e)),typeof t=="function"&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=rTt),i.ending?nTt(this,r):(a||iTt(this,i,e,r))&&(i.pendingcb++,n=oTt(this,i,a,e,t,r)),n};nf.prototype.cork=function(){this._writableState.corked++};nf.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&o3e(this,e))};nf.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new tTt(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(nf.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function aTt(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=M6.from(t,r)),t}Object.defineProperty(nf.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function oTt(e,t,r,i,n,a){if(!r){var o=aTt(t,i,n);i!==o&&(r=!0,n="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else $U(e,t,!1,s,i,n,a);return l}function $U(e,t,r,i,n,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new Q3t("write")):r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function sTt(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(LS,e,t),e._writableState.errorEmitted=!0,Jw(e,i)):(n(i),e._writableState.errorEmitted=!0,Jw(e,i),LS(e,t))}function lTt(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function uTt(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new K3t;if(lTt(r),t)sTt(e,r,i,t,n);else{var a=s3e(r)||e.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&o3e(e,r),i?process.nextTick(n3e,e,r,a,n):n3e(e,r,a,n)}}function n3e(e,t,r,i){r||fTt(e,t),t.pendingcb--,i(),LS(e,t)}function fTt(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function o3e(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)n[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;n.allBuffers=s,$U(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i3e(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,f=r.callback,c=t.objectMode?1:l.length;if($U(e,t,!1,c,l,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}nf.prototype._write=function(e,t,r){r(new j3t("_write()"))};nf.prototype._writev=null;nf.prototype.end=function(e,t,r){var i=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||vTt(this,i,r),this};Object.defineProperty(nf.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s3e(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function cTt(e,t){e._final(function(r){t.pendingcb--,r&&Jw(e,r),t.prefinished=!0,e.emit("prefinish"),LS(e,t)})}function hTt(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(cTt,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function LS(e,t){var r=s3e(t);if(r&&(hTt(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function vTt(e,t,r){t.ending=!0,LS(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function dTt(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}Object.defineProperty(nf.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});nf.prototype.destroy=eV.destroy;nf.prototype._undestroy=eV.undestroy;nf.prototype._destroy=function(e,t){t(e)}});var s_=ne((Glr,f3e)=>{"use strict";var pTt=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};f3e.exports=ig;var u3e=iV(),nV=tV();iy()(ig,u3e);for(rV=pTt(nV.prototype),S6=0;S6<rV.length;S6++)E6=rV[S6],ig.prototype[E6]||(ig.prototype[E6]=nV.prototype[E6]);var rV,E6,S6;function ig(e){if(!(this instanceof ig))return new ig(e);u3e.call(this,e),nV.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",gTt)))}Object.defineProperty(ig.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ig.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ig.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function gTt(){this._writableState.ended||process.nextTick(yTt,this)}function yTt(e){e.end()}Object.defineProperty(ig.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var v3e=ne((aV,h3e)=>{var k6=e_(),ag=k6.Buffer;function c3e(e,t){for(var r in e)t[r]=e[r]}ag.from&&ag.alloc&&ag.allocUnsafe&&ag.allocUnsafeSlow?h3e.exports=k6:(c3e(k6,aV),aV.Buffer=l_);function l_(e,t,r){return ag(e,t,r)}l_.prototype=Object.create(ag.prototype);c3e(ag,l_);l_.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ag(e,t,r)};l_.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=ag(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};l_.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ag(e)};l_.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return k6.SlowBuffer(e)}});var lV=ne(p3e=>{"use strict";var sV=v3e().Buffer,d3e=sV.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function mTt(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function xTt(e){var t=mTt(e);if(typeof t!="string"&&(sV.isEncoding===d3e||!d3e(e)))throw new Error("Unknown encoding: "+e);return t||e}p3e.StringDecoder=RS;function RS(e){this.encoding=xTt(e);var t;switch(this.encoding){case"utf16le":this.text=MTt,this.end=STt,t=4;break;case"utf8":this.fillLast=wTt,t=4;break;case"base64":this.text=ETt,this.end=kTt,t=3;break;default:this.write=CTt,this.end=LTt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=sV.allocUnsafe(t)}RS.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};RS.prototype.end=ATt;RS.prototype.text=TTt;RS.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function oV(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function _Tt(e,t,r){var i=t.length-1;if(i<r)return 0;var n=oV(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||n===-2?0:(n=oV(t[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||n===-2?0:(n=oV(t[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function bTt(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function wTt(e){var t=this.lastTotal-this.lastNeed,r=bTt(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function TTt(e,t){var r=_Tt(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function ATt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function MTt(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function STt(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function ETt(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function kTt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function CTt(e){return e.toString(this.encoding)}function LTt(e){return e&&e.length?this.write(e):""}});var C6=ne((Wlr,m3e)=>{"use strict";var g3e=o_().codes.ERR_STREAM_PREMATURE_CLOSE;function PTt(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function RTt(){}function DTt(e){return e.setHeader&&typeof e.abort=="function"}function y3e(e,t,r){if(typeof t=="function")return y3e(e,null,t);t||(t={}),r=PTt(r||RTt);var i=t.readable||t.readable!==!1&&e.readable,n=t.writable||t.writable!==!1&&e.writable,a=function(){e.writable||s()},o=e._writableState&&e._writableState.finished,s=function(){n=!1,o=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,n||r.call(e)},f=function(p){r.call(e,p)},c=function(){var p;if(i&&!l)return(!e._readableState||!e._readableState.ended)&&(p=new g3e),r.call(e,p);if(n&&!o)return(!e._writableState||!e._writableState.ended)&&(p=new g3e),r.call(e,p)},h=function(){e.req.on("finish",s)};return DTt(e)?(e.on("complete",s),e.on("abort",c),e.req?h():e.on("request",h)):n&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",u),e.on("finish",s),t.error!==!1&&e.on("error",f),e.on("close",c),function(){e.removeListener("complete",s),e.removeListener("abort",c),e.removeListener("request",h),e.req&&e.req.removeListener("finish",s),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",c)}}m3e.exports=y3e});var _3e=ne((Xlr,x3e)=>{"use strict";var L6;function Nm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ITt=C6(),Um=Symbol("lastResolve"),u_=Symbol("lastReject"),DS=Symbol("error"),P6=Symbol("ended"),f_=Symbol("lastPromise"),uV=Symbol("handlePromise"),c_=Symbol("stream");function Vm(e,t){return{value:e,done:t}}function FTt(e){var t=e[Um];if(t!==null){var r=e[c_].read();r!==null&&(e[f_]=null,e[Um]=null,e[u_]=null,t(Vm(r,!1)))}}function qTt(e){process.nextTick(FTt,e)}function zTt(e,t){return function(r,i){e.then(function(){if(t[P6]){r(Vm(void 0,!0));return}t[uV](r,i)},i)}}var OTt=Object.getPrototypeOf(function(){}),BTt=Object.setPrototypeOf((L6={get stream(){return this[c_]},next:function(){var t=this,r=this[DS];if(r!==null)return Promise.reject(r);if(this[P6])return Promise.resolve(Vm(void 0,!0));if(this[c_].destroyed)return new Promise(function(o,s){process.nextTick(function(){t[DS]?s(t[DS]):o(Vm(void 0,!0))})});var i=this[f_],n;if(i)n=new Promise(zTt(i,this));else{var a=this[c_].read();if(a!==null)return Promise.resolve(Vm(a,!1));n=new Promise(this[uV])}return this[f_]=n,n}},Nm(L6,Symbol.asyncIterator,function(){return this}),Nm(L6,"return",function(){var t=this;return new Promise(function(r,i){t[c_].destroy(null,function(n){if(n){i(n);return}r(Vm(void 0,!0))})})}),L6),OTt),NTt=function(t){var r,i=Object.create(BTt,(r={},Nm(r,c_,{value:t,writable:!0}),Nm(r,Um,{value:null,writable:!0}),Nm(r,u_,{value:null,writable:!0}),Nm(r,DS,{value:null,writable:!0}),Nm(r,P6,{value:t._readableState.endEmitted,writable:!0}),Nm(r,uV,{value:function(a,o){var s=i[c_].read();s?(i[f_]=null,i[Um]=null,i[u_]=null,a(Vm(s,!1))):(i[Um]=a,i[u_]=o)},writable:!0}),r));return i[f_]=null,ITt(t,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=i[u_];a!==null&&(i[f_]=null,i[Um]=null,i[u_]=null,a(n)),i[DS]=n;return}var o=i[Um];o!==null&&(i[f_]=null,i[Um]=null,i[u_]=null,o(Vm(void 0,!0))),i[P6]=!0}),t.on("readable",qTt.bind(null,i)),i};x3e.exports=NTt});var w3e=ne((Zlr,b3e)=>{b3e.exports=function(){throw new Error("Readable.from is not available in the browser")}});var iV=ne((Klr,R3e)=>{"use strict";R3e.exports=Rs;var Qw;Rs.ReadableState=S3e;var jlr=ox().EventEmitter,M3e=function(t,r){return t.listeners(r).length},FS=aU(),R6=e_().Buffer,UTt=window.Uint8Array||function(){};function VTt(e){return R6.from(e)}function HTt(e){return R6.isBuffer(e)||e instanceof UTt}var fV=XU(),Ko;fV&&fV.debuglog?Ko=fV.debuglog("stream"):Ko=function(){};var GTt=Zwe(),yV=KU(),YTt=JU(),WTt=YTt.getHighWaterMark,D6=o_().codes,XTt=D6.ERR_INVALID_ARG_TYPE,ZTt=D6.ERR_STREAM_PUSH_AFTER_EOF,jTt=D6.ERR_METHOD_NOT_IMPLEMENTED,KTt=D6.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,$w,cV,hV;iy()(Rs,FS);var IS=yV.errorOrDestroy,vV=["error","close","destroy","pause","resume"];function JTt(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function S3e(e,t,r){Qw=Qw||s_(),e=e||{},typeof r!="boolean"&&(r=t instanceof Qw),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=WTt(this,e,"readableHighWaterMark",r),this.buffer=new GTt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&($w||($w=lV().StringDecoder),this.decoder=new $w(e.encoding),this.encoding=e.encoding)}function Rs(e){if(Qw=Qw||s_(),!(this instanceof Rs))return new Rs(e);var t=this instanceof Qw;this._readableState=new S3e(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),FS.call(this)}Object.defineProperty(Rs.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Rs.prototype.destroy=yV.destroy;Rs.prototype._undestroy=yV.undestroy;Rs.prototype._destroy=function(e,t){t(e)};Rs.prototype.push=function(e,t){var r=this._readableState,i;return r.objectMode?i=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=R6.from(e,t),t=""),i=!0),E3e(this,e,t,!1,i)};Rs.prototype.unshift=function(e){return E3e(this,e,null,!0,!1)};function E3e(e,t,r,i,n){Ko("readableAddChunk",t);var a=e._readableState;if(t===null)a.reading=!1,eAt(e,a);else{var o;if(n||(o=QTt(a,t)),o)IS(e,o);else if(a.objectMode||t&&t.length>0)if(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==R6.prototype&&(t=VTt(t)),i)a.endEmitted?IS(e,new KTt):dV(e,a,t,!0);else if(a.ended)IS(e,new ZTt);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||t.length!==0?dV(e,a,t,!1):gV(e,a)):dV(e,a,t,!1)}else i||(a.reading=!1,gV(e,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function dV(e,t,r,i){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I6(e)),gV(e,t)}function QTt(e,t){var r;return!HTt(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new XTt("chunk",["string","Buffer","Uint8Array"],t)),r}Rs.prototype.isPaused=function(){return this._readableState.flowing===!1};Rs.prototype.setEncoding=function(e){$w||($w=lV().StringDecoder);var t=new $w(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T3e=1073741824;function $Tt(e){return e>=T3e?e=T3e:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function A3e(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=$Tt(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Rs.prototype.read=function(e){Ko("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return Ko("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?pV(this):I6(this),null;if(e=A3e(e,t),e===0&&t.ended)return t.length===0&&pV(this),null;var i=t.needReadable;Ko("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,Ko("length less than watermark",i)),t.ended||t.reading?(i=!1,Ko("reading or ended",i)):i&&(Ko("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A3e(r,t)));var n;return e>0?n=L3e(e,t):n=null,n===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&pV(this)),n!==null&&this.emit("data",n),n};function eAt(e,t){if(Ko("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?I6(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,k3e(e)))}}function I6(e){var t=e._readableState;Ko("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Ko("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(k3e,e))}function k3e(e){var t=e._readableState;Ko("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,mV(e)}function gV(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(tAt,e,t))}function tAt(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(Ko("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Rs.prototype._read=function(e){IS(this,new jTt("_read()"))};Rs.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,Ko("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?s:_;i.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",o);function o(T,g){Ko("onunpipe"),T===r&&g&&g.hasUnpiped===!1&&(g.hasUnpiped=!0,f())}function s(){Ko("onend"),e.end()}var l=rAt(r);e.on("drain",l);var u=!1;function f(){Ko("cleanup"),e.removeListener("close",v),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",_),r.removeListener("data",c),u=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}r.on("data",c);function c(T){Ko("ondata");var g=e.write(T);Ko("dest.write",g),g===!1&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&P3e(i.pipes,e)!==-1)&&!u&&(Ko("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(T){Ko("onerror",T),_(),e.removeListener("error",h),M3e(e,"error")===0&&IS(e,T)}JTt(e,"error",h);function v(){e.removeListener("finish",p),_()}e.once("close",v);function p(){Ko("onfinish"),e.removeListener("close",v),_()}e.once("finish",p);function _(){Ko("unpipe"),r.unpipe(e)}return e.emit("pipe",r),i.flowing||(Ko("pipe resume"),r.resume()),e};function rAt(e){return function(){var r=e._readableState;Ko("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&M3e(e,"data")&&(r.flowing=!0,mV(e))}}Rs.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=P3e(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Rs.prototype.on=function(e,t){var r=FS.prototype.on.call(this,e,t),i=this._readableState;return e==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):e==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,Ko("on readable",i.length,i.reading),i.length?I6(this):i.reading||process.nextTick(nAt,this)),r};Rs.prototype.addListener=Rs.prototype.on;Rs.prototype.removeListener=function(e,t){var r=FS.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(C3e,this),r};Rs.prototype.removeAllListeners=function(e){var t=FS.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(C3e,this),t};function C3e(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nAt(e){Ko("readable nexttick read 0"),e.read(0)}Rs.prototype.resume=function(){var e=this._readableState;return e.flowing||(Ko("resume"),e.flowing=!e.readableListening,iAt(this,e)),e.paused=!1,this};function iAt(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(aAt,e,t))}function aAt(e,t){Ko("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),mV(e),t.flowing&&!t.reading&&e.read(0)}Rs.prototype.pause=function(){return Ko("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ko("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function mV(e){var t=e._readableState;for(Ko("flow",t.flowing);t.flowing&&e.read()!==null;);}Rs.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;e.on("end",function(){if(Ko("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(Ko("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var s=t.push(o);s||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<vV.length;a++)e.on(vV[a],this.emit.bind(this,vV[a]));return this._read=function(o){Ko("wrapped _read",o),i&&(i=!1,e.resume())},this};typeof Symbol=="function"&&(Rs.prototype[Symbol.asyncIterator]=function(){return cV===void 0&&(cV=_3e()),cV(this)});Object.defineProperty(Rs.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Rs.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Rs.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});Rs._fromList=L3e;Object.defineProperty(Rs.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L3e(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function pV(e){var t=e._readableState;Ko("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(oAt,t,e))}function oAt(e,t){if(Ko("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Rs.from=function(e,t){return hV===void 0&&(hV=w3e()),hV(Rs,e,t)});function P3e(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}});var xV=ne((Jlr,I3e)=>{"use strict";I3e.exports=oy;var F6=o_().codes,sAt=F6.ERR_METHOD_NOT_IMPLEMENTED,lAt=F6.ERR_MULTIPLE_CALLBACK,uAt=F6.ERR_TRANSFORM_ALREADY_TRANSFORMING,fAt=F6.ERR_TRANSFORM_WITH_LENGTH_0,q6=s_();iy()(oy,q6);function cAt(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new lAt);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function oy(e){if(!(this instanceof oy))return new oy(e);q6.call(this,e),this._transformState={afterTransform:cAt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",hAt)}function hAt(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){D3e(e,t,r)}):D3e(this,null,null)}oy.prototype.push=function(e,t){return this._transformState.needTransform=!1,q6.prototype.push.call(this,e,t)};oy.prototype._transform=function(e,t,r){r(new sAt("_transform()"))};oy.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};oy.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};oy.prototype._destroy=function(e,t){q6.prototype._destroy.call(this,e,function(r){t(r)})};function D3e(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new fAt;if(e._transformState.transforming)throw new uAt;return e.push(null)}});var z3e=ne((Qlr,q3e)=>{"use strict";q3e.exports=qS;var F3e=xV();iy()(qS,F3e);function qS(e){if(!(this instanceof qS))return new qS(e);F3e.call(this,e)}qS.prototype._transform=function(e,t,r){r(null,e)}});var V3e=ne(($lr,U3e)=>{"use strict";var _V;function vAt(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var N3e=o_().codes,dAt=N3e.ERR_MISSING_ARGS,pAt=N3e.ERR_STREAM_DESTROYED;function O3e(e){if(e)throw e}function gAt(e){return e.setHeader&&typeof e.abort=="function"}function yAt(e,t,r,i){i=vAt(i);var n=!1;e.on("close",function(){n=!0}),_V===void 0&&(_V=C6()),_V(e,{readable:t,writable:r},function(o){if(o)return i(o);n=!0,i()});var a=!1;return function(o){if(!n&&!a){if(a=!0,gAt(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(o||new pAt("pipe"))}}}function B3e(e){e()}function mAt(e,t){return e.pipe(t)}function xAt(e){return!e.length||typeof e[e.length-1]!="function"?O3e:e.pop()}function _At(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=xAt(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new dAt("streams");var n,a=t.map(function(o,s){var l=s<t.length-1,u=s>0;return yAt(o,l,u,function(f){n||(n=f),f&&a.forEach(B3e),!l&&(a.forEach(B3e),i(n))})});return t.reduce(mAt)}U3e.exports=_At});var G3e=ne((eur,H3e)=>{H3e.exports=Cp;var bV=ox().EventEmitter,bAt=iy();bAt(Cp,bV);Cp.Readable=iV();Cp.Writable=tV();Cp.Duplex=s_();Cp.Transform=xV();Cp.PassThrough=z3e();Cp.finished=C6();Cp.pipeline=V3e();Cp.Stream=Cp;function Cp(){bV.call(this)}Cp.prototype.pipe=function(e,t){var r=this;function i(f){e.writable&&e.write(f)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}e.on("drain",n),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function l(f){if(u(),bV.listenerCount(this,"error")===0)throw f}r.on("error",l),e.on("error",l);function u(){r.removeListener("data",i),e.removeListener("drain",n),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}});var t3=ne(ns=>{var Y3e=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},wAt=/%[sdj%]/g;ns.format=function(e){if(!H6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Hm(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(wAt,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])V6(o)||!e3(o)?a+=" "+o:a+=" "+Hm(o);return a};ns.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return ns.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var z6={},W3e=/^$/;O6="false",O6=O6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),W3e=new RegExp("^"+O6+"$","i");var O6;ns.debuglog=function(e){if(e=e.toUpperCase(),!z6[e])if(W3e.test(e)){var t=process.pid;z6[e]=function(){var r=ns.format.apply(ns,arguments);console.error("%s %d: %s",e,t,r)}}else z6[e]=function(){};return z6[e]};function Hm(e,t){var r={seen:[],stylize:AAt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),MV(t)?r.showHidden=t:t&&ns._extend(r,t),v_(r.showHidden)&&(r.showHidden=!1),v_(r.depth)&&(r.depth=2),v_(r.colors)&&(r.colors=!1),v_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=TAt),N6(r,e,r.depth)}ns.inspect=Hm;Hm.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Hm.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function TAt(e,t){var r=Hm.styles[t];return r?"\x1B["+Hm.colors[r][0]+"m"+e+"\x1B["+Hm.colors[r][1]+"m":e}function AAt(e,t){return e}function MAt(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function N6(e,t,r){if(e.customInspect&&t&&B6(t.inspect)&&t.inspect!==ns.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return H6(i)||(i=N6(e,i,r)),i}var n=SAt(e,t);if(n)return n;var a=Object.keys(t),o=MAt(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),OS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return wV(t);if(a.length===0){if(B6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(zS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(U6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(OS(t))return wV(t)}var l="",u=!1,f=["{","}"];if(X3e(t)&&(u=!0,f=["[","]"]),B6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(zS(t)&&(l=" "+RegExp.prototype.toString.call(t)),U6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),OS(t)&&(l=" "+wV(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return zS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=EAt(e,t,r,o,a):h=a.map(function(v){return AV(e,t,r,o,v,u)}),e.seen.pop(),kAt(h,l,f)}function SAt(e,t){if(v_(t))return e.stylize("undefined","undefined");if(H6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Z3e(t))return e.stylize(""+t,"number");if(MV(t))return e.stylize(""+t,"boolean");if(V6(t))return e.stylize("null","null")}function wV(e){return"["+Error.prototype.toString.call(e)+"]"}function EAt(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)j3e(t,String(o))?a.push(AV(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(AV(e,t,r,i,l,!0))}),a}function AV(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),j3e(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(V6(r)?s=N6(e,l.value,null):s=N6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),v_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function kAt(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}ns.types=NU();function X3e(e){return Array.isArray(e)}ns.isArray=X3e;function MV(e){return typeof e=="boolean"}ns.isBoolean=MV;function V6(e){return e===null}ns.isNull=V6;function CAt(e){return e==null}ns.isNullOrUndefined=CAt;function Z3e(e){return typeof e=="number"}ns.isNumber=Z3e;function H6(e){return typeof e=="string"}ns.isString=H6;function LAt(e){return typeof e=="symbol"}ns.isSymbol=LAt;function v_(e){return e===void 0}ns.isUndefined=v_;function zS(e){return e3(e)&&SV(e)==="[object RegExp]"}ns.isRegExp=zS;ns.types.isRegExp=zS;function e3(e){return typeof e=="object"&&e!==null}ns.isObject=e3;function U6(e){return e3(e)&&SV(e)==="[object Date]"}ns.isDate=U6;ns.types.isDate=U6;function OS(e){return e3(e)&&(SV(e)==="[object Error]"||e instanceof Error)}ns.isError=OS;ns.types.isNativeError=OS;function B6(e){return typeof e=="function"}ns.isFunction=B6;function PAt(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}ns.isPrimitive=PAt;ns.isBuffer=UU();function SV(e){return Object.prototype.toString.call(e)}function TV(e){return e<10?"0"+e.toString(10):e.toString(10)}var RAt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function DAt(){var e=new Date,t=[TV(e.getHours()),TV(e.getMinutes()),TV(e.getSeconds())].join(":");return[e.getDate(),RAt[e.getMonth()],t].join(" ")}ns.log=function(){console.log("%s - %s",DAt(),ns.format.apply(ns,arguments))};ns.inherits=iy();ns._extend=function(e,t){if(!t||!e3(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function j3e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var h_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;ns.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(h_&&t[h_]){var r=t[h_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,h_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),h_&&Object.defineProperty(r,h_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Y3e(t))};ns.promisify.custom=h_;function IAt(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function FAt(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(IAt.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Y3e(e)),t}ns.callbackify=FAt});var CV=ne((rur,$3e)=>{"use strict";function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function K3e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,zAt(i.key),i)}}function qAt(e,t,r){return t&&K3e(e.prototype,t),r&&K3e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zAt(e){var t=OAt(e,"string");return Gm(t)==="symbol"?t:String(t)}function OAt(e,t){if(Gm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Gm(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NAt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kV(e,t)}function kV(e,t){return kV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},kV(e,t)}function UAt(e){var t=GAt();return function(){var i=G6(e),n;if(t){var a=G6(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return VAt(this,n)}}function VAt(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HAt(e)}function HAt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GAt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function G6(e){return G6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G6(e)}var Q3e={},r3,EV;function BS(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){NAt(s,a);var o=UAt(s);function s(l,u,f){var c;return BAt(this,s),c=o.call(this,i(l,u,f)),c.code=e,c}return qAt(s)}(r);Q3e[e]=n}function J3e(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function YAt(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function WAt(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function XAt(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}BS("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);BS("ERR_INVALID_ARG_TYPE",function(e,t,r){r3===void 0&&(r3=NS()),r3(typeof e=="string","'name' must be a string");var i;typeof t=="string"&&YAt(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(WAt(e," argument"))n="The ".concat(e," ").concat(i," ").concat(J3e(t,"type"));else{var a=XAt(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(J3e(t,"type"))}return n+=". Received type ".concat(Gm(r)),n},TypeError);BS("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";EV===void 0&&(EV=t3());var i=EV.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)},TypeError,RangeError);BS("ERR_INVALID_RETURN_VALUE",function(e,t,r){var i;return r&&r.constructor&&r.constructor.name?i="instance of ".concat(r.constructor.name):i="type ".concat(Gm(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")},TypeError);BS("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];r3===void 0&&(r3=NS()),r3(t.length>0,"At least one arg needs to be specified");var i="The ",n=t.length;switch(t=t.map(function(a){return'"'.concat(a,'"')}),n){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,n-1).join(", "),i+=", and ".concat(t[n-1]," arguments");break}return"".concat(i," must be specified")},TypeError);$3e.exports.codes=Q3e});var uTe=ne((nur,lTe)=>{"use strict";function eTe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function tTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eTe(Object(r),!0).forEach(function(i){ZAt(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eTe(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ZAt(e,t,r){return t=aTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rTe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,aTe(i.key),i)}}function KAt(e,t,r){return t&&rTe(e.prototype,t),r&&rTe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aTe(e){var t=JAt(e,"string");return cd(t)==="symbol"?t:String(t)}function JAt(e,t){if(cd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(cd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QAt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}function $At(e){var t=sTe();return function(){var i=YS(e),n;if(t){var a=YS(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return oTe(this,n)}}function oTe(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LV(e)}function LV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PV(e){var t=typeof Map=="function"?new Map:void 0;return PV=function(i){if(i===null||!eMt(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(i))return t.get(i);t.set(i,n)}function n(){return Y6(i,arguments,YS(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),GS(n,i)},PV(e)}function Y6(e,t,r){return sTe()?Y6=Reflect.construct.bind():Y6=function(n,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(n,s),u=new l;return o&&GS(u,o.prototype),u},Y6.apply(null,arguments)}function sTe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function eMt(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},GS(e,t)}function YS(e){return YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},YS(e)}function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}var tMt=t3(),RV=tMt.inspect,rMt=CV(),nMt=rMt.codes.ERR_INVALID_ARG_TYPE;function nTe(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function iMt(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var b0="",US="",VS="",mh="",d_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},aMt=10;function iTe(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(i){r[i]=e[i]}),Object.defineProperty(r,"message",{value:e.message}),r}function HS(e){return RV(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function oMt(e,t,r){var i="",n="",a=0,o="",s=!1,l=HS(e),u=l.split(`
`),f=HS(t).split(`
`),c=0,h="";if(r==="strictEqual"&&cd(e)==="object"&&cd(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&f.length===1&&u[0]!==f[0]){var v=u[0].length+f[0].length;if(v<=aMt){if((cd(e)!=="object"||e===null)&&(cd(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(d_[r],`

`)+"".concat(u[0]," !== ").concat(f[0],`
`)}else if(r!=="strictEqualObject"){var p=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(v<p){for(;u[0][c]===f[0][c];)c++;c>2&&(h=`
  `.concat(iMt(" ",c),"^"),c=0)}}}for(var _=u[u.length-1],T=f[f.length-1];_===T&&(c++<2?o=`
  `.concat(_).concat(o):i=_,u.pop(),f.pop(),!(u.length===0||f.length===0));)_=u[u.length-1],T=f[f.length-1];var g=Math.max(u.length,f.length);if(g===0){var A=l.split(`
`);if(A.length>30)for(A[26]="".concat(b0,"...").concat(mh);A.length>27;)A.pop();return"".concat(d_.notIdentical,`

`).concat(A.join(`
`),`
`)}c>3&&(o=`
`.concat(b0,"...").concat(mh).concat(o),s=!0),i!==""&&(o=`
  `.concat(i).concat(o),i="");var b=0,w=d_[r]+`
`.concat(US,"+ actual").concat(mh," ").concat(VS,"- expected").concat(mh),k=" ".concat(b0,"...").concat(mh," Lines skipped");for(c=0;c<g;c++){var x=c-a;if(u.length<c+1)x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(f[c-2]),b++),n+=`
  `.concat(f[c-1]),b++),a=c,i+=`
`.concat(VS,"-").concat(mh," ").concat(f[c]),b++;else if(f.length<c+1)x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(u[c-2]),b++),n+=`
  `.concat(u[c-1]),b++),a=c,n+=`
`.concat(US,"+").concat(mh," ").concat(u[c]),b++;else{var E=f[c],M=u[c],d=M!==E&&(!nTe(M,",")||M.slice(0,-1)!==E);d&&nTe(E,",")&&E.slice(0,-1)===M&&(d=!1,M+=","),d?(x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(u[c-2]),b++),n+=`
  `.concat(u[c-1]),b++),a=c,n+=`
`.concat(US,"+").concat(mh," ").concat(M),i+=`
`.concat(VS,"-").concat(mh," ").concat(E),b+=2):(n+=i,i="",(x===1||c===0)&&(n+=`
  `.concat(M),b++))}if(b>20&&c<g-2)return"".concat(w).concat(k,`
`).concat(n,`
`).concat(b0,"...").concat(mh).concat(i,`
`)+"".concat(b0,"...").concat(mh)}return"".concat(w).concat(s?k:"",`
`).concat(n).concat(i).concat(o).concat(h)}var sMt=function(e,t){QAt(i,e);var r=$At(i);function i(n){var a;if(jAt(this,i),cd(n)!=="object"||n===null)throw new nMt("options","Object",n);var o=n.message,s=n.operator,l=n.stackStartFn,u=n.actual,f=n.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,o!=null)a=r.call(this,String(o));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(b0="\x1B[34m",US="\x1B[32m",mh="\x1B[39m",VS="\x1B[31m"):(b0="",US="",mh="",VS="")),cd(u)==="object"&&u!==null&&cd(f)==="object"&&f!==null&&"stack"in u&&u instanceof Error&&"stack"in f&&f instanceof Error&&(u=iTe(u),f=iTe(f)),s==="deepStrictEqual"||s==="strictEqual")a=r.call(this,oMt(u,f,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var h=d_[s],v=HS(u).split(`
`);if(s==="notStrictEqual"&&cd(u)==="object"&&u!==null&&(h=d_.notStrictEqualObject),v.length>30)for(v[26]="".concat(b0,"...").concat(mh);v.length>27;)v.pop();v.length===1?a=r.call(this,"".concat(h," ").concat(v[0])):a=r.call(this,"".concat(h,`

`).concat(v.join(`
`),`
`))}else{var p=HS(u),_="",T=d_[s];s==="notDeepEqual"||s==="notEqual"?(p="".concat(d_[s],`

`).concat(p),p.length>1024&&(p="".concat(p.slice(0,1021),"..."))):(_="".concat(HS(f)),p.length>512&&(p="".concat(p.slice(0,509),"...")),_.length>512&&(_="".concat(_.slice(0,509),"...")),s==="deepEqual"||s==="equal"?p="".concat(T,`

`).concat(p,`

should equal

`):_=" ".concat(s," ").concat(_)),a=r.call(this,"".concat(p).concat(_))}return Error.stackTraceLimit=c,a.generatedMessage=!o,Object.defineProperty(LV(a),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),a.code="ERR_ASSERTION",a.actual=u,a.expected=f,a.operator=s,Error.captureStackTrace&&Error.captureStackTrace(LV(a),l),a.stack,a.name="AssertionError",oTe(a)}return KAt(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(a,o){return RV(this,tTe(tTe({},o),{},{customInspect:!1,depth:0}))}}]),i}(PV(Error),RV.custom);lTe.exports=sMt});var DV=ne((iur,cTe)=>{"use strict";var fTe=Object.prototype.toString;cTe.exports=function(t){var r=fTe.call(t),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&fTe.call(t.callee)==="[object Function]"),i}});var _Te=ne((aur,xTe)=>{"use strict";var mTe;Object.keys||(WS=Object.prototype.hasOwnProperty,IV=Object.prototype.toString,hTe=DV(),FV=Object.prototype.propertyIsEnumerable,vTe=!FV.call({toString:null},"toString"),dTe=FV.call(function(){},"prototype"),XS=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],W6=function(e){var t=e.constructor;return t&&t.prototype===e},pTe={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},gTe=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!pTe["$"+e]&&WS.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{W6(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),yTe=function(e){if(typeof window=="undefined"||!gTe)return W6(e);try{return W6(e)}catch(t){return!1}},mTe=function(t){var r=t!==null&&typeof t=="object",i=IV.call(t)==="[object Function]",n=hTe(t),a=r&&IV.call(t)==="[object String]",o=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var s=dTe&&i;if(a&&t.length>0&&!WS.call(t,0))for(var l=0;l<t.length;++l)o.push(String(l));if(n&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var f in t)!(s&&f==="prototype")&&WS.call(t,f)&&o.push(String(f));if(vTe)for(var c=yTe(t),h=0;h<XS.length;++h)!(c&&XS[h]==="constructor")&&WS.call(t,XS[h])&&o.push(XS[h]);return o});var WS,IV,hTe,FV,vTe,dTe,XS,W6,pTe,gTe,yTe;xTe.exports=mTe});var qV=ne((our,TTe)=>{"use strict";var lMt=Array.prototype.slice,uMt=DV(),bTe=Object.keys,X6=bTe?function(t){return bTe(t)}:_Te(),wTe=Object.keys;X6.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(i){return uMt(i)?wTe(lMt.call(i)):wTe(i)})}else Object.keys=X6;return Object.keys||X6};TTe.exports=X6});var CTe=ne((sur,kTe)=>{"use strict";var fMt=qV(),STe=KP()(),ETe=Ww(),ATe=Object,cMt=ETe("Array.prototype.push"),MTe=ETe("Object.prototype.propertyIsEnumerable"),hMt=STe?Object.getOwnPropertySymbols:null;kTe.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var i=ATe(t);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var a=ATe(arguments[n]),o=fMt(a),s=STe&&(Object.getOwnPropertySymbols||hMt);if(s)for(var l=s(a),u=0;u<l.length;++u){var f=l[u];MTe(a,f)&&cMt(o,f)}for(var c=0;c<o.length;++c){var h=o[c];if(MTe(a,h)){var v=a[h];i[h]=v}}}return i}});var PTe=ne((lur,LTe)=>{"use strict";var zV=CTe(),vMt=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},i=0;i<t.length;++i)r[t[i]]=t[i];var n=Object.assign({},r),a="";for(var o in n)a+=o;return e!==a},dMt=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}return!1};LTe.exports=function(){return!Object.assign||vMt()||dMt()?zV:Object.assign}});var OV=ne((uur,DTe)=>{"use strict";var RTe=function(e){return e!==e};DTe.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||RTe(t)&&RTe(r))}});var Z6=ne((fur,ITe)=>{"use strict";var pMt=OV();ITe.exports=function(){return typeof Object.is=="function"?Object.is:pMt}});var ZS=ne((cur,OTe)=>{"use strict";var gMt=qV(),yMt=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",mMt=Object.prototype.toString,xMt=Array.prototype.concat,FTe=Object.defineProperty,_Mt=function(e){return typeof e=="function"&&mMt.call(e)==="[object Function]"},bMt=e6()(),qTe=FTe&&bMt,wMt=function(e,t,r,i){if(t in e){if(i===!0){if(e[t]===r)return}else if(!_Mt(i)||!i())return}qTe?FTe(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},zTe=function(e,t){var r=arguments.length>2?arguments[2]:{},i=gMt(t);yMt&&(i=xMt.call(i,Object.getOwnPropertySymbols(t)));for(var n=0;n<i.length;n+=1)wMt(e,i[n],t[i[n]],r[i[n]])};zTe.supportsDescriptors=!!qTe;OTe.exports=zTe});var NTe=ne((hur,BTe)=>{"use strict";var TMt=Z6(),AMt=ZS();BTe.exports=function(){var t=TMt();return AMt(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var GTe=ne((vur,HTe)=>{"use strict";var MMt=ZS(),SMt=MS(),EMt=OV(),UTe=Z6(),kMt=NTe(),VTe=SMt(UTe(),Object);MMt(VTe,{getPolyfill:UTe,implementation:EMt,shim:kMt});HTe.exports=VTe});var BV=ne((dur,YTe)=>{"use strict";YTe.exports=function(t){return t!==t}});var NV=ne((pur,WTe)=>{"use strict";var CMt=BV();WTe.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:CMt}});var ZTe=ne((gur,XTe)=>{"use strict";var LMt=ZS(),PMt=NV();XTe.exports=function(){var t=PMt();return LMt(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var QTe=ne((yur,JTe)=>{"use strict";var RMt=MS(),DMt=ZS(),IMt=BV(),jTe=NV(),FMt=ZTe(),KTe=RMt(jTe(),Number);DMt(KTe,{getPolyfill:jTe,implementation:IMt,shim:FMt});JTe.exports=KTe});var mAe=ne((mur,yAe)=>{"use strict";function $Te(e,t){return BMt(e)||OMt(e,t)||zMt(e,t)||qMt()}function qMt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zMt(e,t){if(e){if(typeof e=="string")return eAe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eAe(e,t)}}function eAe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function OMt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function BMt(e){if(Array.isArray(e))return e}function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}var NMt=/a/g.flags!==void 0,tR=function(t){var r=[];return t.forEach(function(i){return r.push(i)}),r},tAe=function(t){var r=[];return t.forEach(function(i,n){return r.push([n,i])}),r},hAe=Object.is?Object.is:GTe(),$6=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},UV=Number.isNaN?Number.isNaN:QTe();function HV(e){return e.call.bind(e)}var KS=HV(Object.prototype.hasOwnProperty),eR=HV(Object.prototype.propertyIsEnumerable),rAe=HV(Object.prototype.toString),Av=t3().types,UMt=Av.isAnyArrayBuffer,VMt=Av.isArrayBufferView,nAe=Av.isDate,j6=Av.isMap,iAe=Av.isRegExp,K6=Av.isSet,HMt=Av.isNativeError,GMt=Av.isBoxedPrimitive,aAe=Av.isNumberObject,oAe=Av.isStringObject,sAe=Av.isBooleanObject,lAe=Av.isBigIntObject,YMt=Av.isSymbolObject,WMt=Av.isFloat32Array,XMt=Av.isFloat64Array;function ZMt(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function J6(e){return Object.keys(e).filter(ZMt).concat($6(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function vAe(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}var Q6=void 0,jMt=!0,KMt=!1,VV=0,GV=1,dAe=2,pAe=3;function JMt(e,t){return NMt?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function QMt(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function $Mt(e,t){return e.byteLength!==t.byteLength?!1:vAe(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function eSt(e,t){return e.byteLength===t.byteLength&&vAe(new Uint8Array(e),new Uint8Array(t))===0}function tSt(e,t){return aAe(e)?aAe(t)&&hAe(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):oAe(e)?oAe(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):sAe(e)?sAe(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):lAe(e)?lAe(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):YMt(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function Pp(e,t,r,i){if(e===t)return e!==0?!0:r?hAe(e,t):!0;if(r){if(Lp(e)!=="object")return typeof e=="number"&&UV(e)&&UV(t);if(Lp(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Lp(e)!=="object")return t===null||Lp(t)!=="object"?e==t:!1;if(t===null||Lp(t)!=="object")return!1}var n=rAe(e),a=rAe(t);if(n!==a)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var o=J6(e,Q6),s=J6(t,Q6);return o.length!==s.length?!1:jS(e,t,r,i,GV,o)}if(n==="[object Object]"&&(!j6(e)&&j6(t)||!K6(e)&&K6(t)))return!1;if(nAe(e)){if(!nAe(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(iAe(e)){if(!iAe(t)||!JMt(e,t))return!1}else if(HMt(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(VMt(e)){if(!r&&(WMt(e)||XMt(e))){if(!QMt(e,t))return!1}else if(!$Mt(e,t))return!1;var l=J6(e,Q6),u=J6(t,Q6);return l.length!==u.length?!1:jS(e,t,r,i,VV,l)}else{if(K6(e))return!K6(t)||e.size!==t.size?!1:jS(e,t,r,i,dAe);if(j6(e))return!j6(t)||e.size!==t.size?!1:jS(e,t,r,i,pAe);if(UMt(e)){if(!eSt(e,t))return!1}else if(GMt(e)&&!tSt(e,t))return!1}return jS(e,t,r,i,VV)}function uAe(e,t){return t.filter(function(r){return eR(e,r)})}function jS(e,t,r,i,n,a){if(arguments.length===5){a=Object.keys(e);var o=Object.keys(t);if(a.length!==o.length)return!1}for(var s=0;s<a.length;s++)if(!KS(t,a[s]))return!1;if(r&&arguments.length===5){var l=$6(e);if(l.length!==0){var u=0;for(s=0;s<l.length;s++){var f=l[s];if(eR(e,f)){if(!eR(t,f))return!1;a.push(f),u++}else if(eR(t,f))return!1}var c=$6(t);if(l.length!==c.length&&uAe(t,c).length!==u)return!1}else{var h=$6(t);if(h.length!==0&&uAe(t,h).length!==0)return!1}}if(a.length===0&&(n===VV||n===GV&&e.length===0||e.size===0))return!0;if(i===void 0)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(e);if(v!==void 0){var p=i.val2.get(t);if(p!==void 0)return v===p}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var _=oSt(e,t,r,a,i,n);return i.val1.delete(e),i.val2.delete(t),_}function fAe(e,t,r,i){for(var n=tR(e),a=0;a<n.length;a++){var o=n[a];if(Pp(t,o,r,i))return e.delete(o),!0}return!1}function gAe(e){switch(Lp(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(UV(e))return!1}return!0}function rSt(e,t,r){var i=gAe(r);return i!=null?i:t.has(i)&&!e.has(i)}function nSt(e,t,r,i,n){var a=gAe(r);if(a!=null)return a;var o=t.get(a);return o===void 0&&!t.has(a)||!Pp(i,o,!1,n)?!1:!e.has(a)&&Pp(i,o,!1,n)}function iSt(e,t,r,i){for(var n=null,a=tR(e),o=0;o<a.length;o++){var s=a[o];if(Lp(s)==="object"&&s!==null)n===null&&(n=new Set),n.add(s);else if(!t.has(s)){if(r||!rSt(e,t,s))return!1;n===null&&(n=new Set),n.add(s)}}if(n!==null){for(var l=tR(t),u=0;u<l.length;u++){var f=l[u];if(Lp(f)==="object"&&f!==null){if(!fAe(n,f,r,i))return!1}else if(!r&&!e.has(f)&&!fAe(n,f,r,i))return!1}return n.size===0}return!0}function cAe(e,t,r,i,n,a){for(var o=tR(e),s=0;s<o.length;s++){var l=o[s];if(Pp(r,l,n,a)&&Pp(i,t.get(l),n,a))return e.delete(l),!0}return!1}function aSt(e,t,r,i){for(var n=null,a=tAe(e),o=0;o<a.length;o++){var s=$Te(a[o],2),l=s[0],u=s[1];if(Lp(l)==="object"&&l!==null)n===null&&(n=new Set),n.add(l);else{var f=t.get(l);if(f===void 0&&!t.has(l)||!Pp(u,f,r,i)){if(r||!nSt(e,t,l,u,i))return!1;n===null&&(n=new Set),n.add(l)}}}if(n!==null){for(var c=tAe(t),h=0;h<c.length;h++){var v=$Te(c[h],2),p=v[0],_=v[1];if(Lp(p)==="object"&&p!==null){if(!cAe(n,e,p,_,r,i))return!1}else if(!r&&(!e.has(p)||!Pp(e.get(p),_,!1,i))&&!cAe(n,e,p,_,!1,i))return!1}return n.size===0}return!0}function oSt(e,t,r,i,n,a){var o=0;if(a===dAe){if(!iSt(e,t,r,n))return!1}else if(a===pAe){if(!aSt(e,t,r,n))return!1}else if(a===GV)for(;o<e.length;o++)if(KS(e,o)){if(!KS(t,o)||!Pp(e[o],t[o],r,n))return!1}else{if(KS(t,o))return!1;for(var s=Object.keys(e);o<s.length;o++){var l=s[o];if(!KS(t,l)||!Pp(e[l],t[l],r,n))return!1}return s.length===Object.keys(t).length}for(o=0;o<i.length;o++){var u=i[o];if(!Pp(e[u],t[u],r,n))return!1}return!0}function sSt(e,t){return Pp(e,t,KMt)}function lSt(e,t){return Pp(e,t,jMt)}yAe.exports={isDeepEqual:sSt,isDeepStrictEqual:lSt}});var NS=ne((xur,qAe)=>{"use strict";function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function xAe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,fSt(i.key),i)}}function uSt(e,t,r){return t&&xAe(e.prototype,t),r&&xAe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fSt(e){var t=cSt(e,"string");return w0(t)==="symbol"?t:String(t)}function cSt(e,t){if(w0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(w0(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hSt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var vSt=CV(),JS=vSt.codes,_Ae=JS.ERR_AMBIGUOUS_ARGUMENT,n3=JS.ERR_INVALID_ARG_TYPE,dSt=JS.ERR_INVALID_ARG_VALUE,pSt=JS.ERR_INVALID_RETURN_VALUE,Wm=JS.ERR_MISSING_ARGS,Xm=uTe(),gSt=t3(),rR=gSt.inspect,AAe=t3().types,ySt=AAe.isPromise,nR=AAe.isRegExp,mSt=PTe()(),MAe=Z6()(),iR=Ww()("RegExp.prototype.test"),Ym,aR;function QS(){var e=mAe();Ym=e.isDeepEqual,aR=e.isDeepStrictEqual}var bAe=!1,Nl=qAe.exports=YV,oR={};function T0(e){throw e.message instanceof Error?e.message:new Xm(e)}function SAe(e,t,r,i,n){var a=arguments.length,o;if(a===0)o="Failed";else if(a===1)r=e,e=void 0;else{if(bAe===!1){bAe=!0;var s=process.emitWarning?process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}a===2&&(i="!=")}if(r instanceof Error)throw r;var l={actual:e,expected:t,operator:i===void 0?"fail":i,stackStartFn:n||SAe};r!==void 0&&(l.message=r);var u=new Xm(l);throw o&&(u.message=o,u.generatedMessage=!0),u}Nl.fail=SAe;Nl.AssertionError=Xm;function EAe(e,t,r,i){if(!r){var n=!1;if(t===0)n=!0,i="No value argument passed to `assert.ok()`";else if(i instanceof Error)throw i;var a=new Xm({actual:r,expected:!0,message:i,operator:"==",stackStartFn:e});throw a.generatedMessage=n,a}}function YV(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];EAe.apply(void 0,[YV,t.length].concat(t))}Nl.ok=YV;Nl.equal=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");t!=r&&T0({actual:t,expected:r,message:i,operator:"==",stackStartFn:e})};Nl.notEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");t==r&&T0({actual:t,expected:r,message:i,operator:"!=",stackStartFn:e})};Nl.deepEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&QS(),Ym(t,r)||T0({actual:t,expected:r,message:i,operator:"deepEqual",stackStartFn:e})};Nl.notDeepEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&QS(),Ym(t,r)&&T0({actual:t,expected:r,message:i,operator:"notDeepEqual",stackStartFn:e})};Nl.deepStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&QS(),aR(t,r)||T0({actual:t,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:e})};Nl.notDeepStrictEqual=kAe;function kAe(e,t,r){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&QS(),aR(e,t)&&T0({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:kAe})}Nl.strictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");MAe(t,r)||T0({actual:t,expected:r,message:i,operator:"strictEqual",stackStartFn:e})};Nl.notStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");MAe(t,r)&&T0({actual:t,expected:r,message:i,operator:"notStrictEqual",stackStartFn:e})};var wAe=uSt(function e(t,r,i){var n=this;hSt(this,e),r.forEach(function(a){a in t&&(i!==void 0&&typeof i[a]=="string"&&nR(t[a])&&iR(t[a],i[a])?n[a]=i[a]:n[a]=t[a])})});function xSt(e,t,r,i,n,a){if(!(r in e)||!aR(e[r],t[r])){if(!i){var o=new wAe(e,n),s=new wAe(t,n,e),l=new Xm({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}T0({actual:e,expected:t,message:i,operator:a.name,stackStartFn:a})}}function CAe(e,t,r,i){if(typeof t!="function"){if(nR(t))return iR(t,e);if(arguments.length===2)throw new n3("expected",["Function","RegExp"],t);if(w0(e)!=="object"||e===null){var n=new Xm({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:i});throw n.operator=i.name,n}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(a.length===0)throw new dSt("error",t,"may not be an empty object");return Ym===void 0&&QS(),a.forEach(function(o){typeof e[o]=="string"&&nR(t[o])&&iR(t[o],e[o])||xSt(e,t,o,r,a,i)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function LAe(e){if(typeof e!="function")throw new n3("fn","Function",e);try{e()}catch(t){return t}return oR}function TAe(e){return ySt(e)||e!==null&&w0(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function PAe(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!TAe(t))throw new pSt("instance of Promise","promiseFn",t)}else if(TAe(e))t=e;else throw new n3("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return oR}).catch(function(r){return r})})}function RAe(e,t,r,i){if(typeof r=="string"){if(arguments.length===4)throw new n3("error",["Object","Error","Function","RegExp"],r);if(w0(t)==="object"&&t!==null){if(t.message===r)throw new _Ae("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new _Ae("error/message",'The error "'.concat(t,'" is identical to the message.'));i=r,r=void 0}else if(r!=null&&w0(r)!=="object"&&typeof r!="function")throw new n3("error",["Object","Error","Function","RegExp"],r);if(t===oR){var n="";r&&r.name&&(n+=" (".concat(r.name,")")),n+=i?": ".concat(i):".";var a=e.name==="rejects"?"rejection":"exception";T0({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(n),stackStartFn:e})}if(r&&!CAe(t,r,i,e))throw t}function DAe(e,t,r,i){if(t!==oR){if(typeof r=="string"&&(i=r,r=void 0),!r||CAe(t,r)){var n=i?": ".concat(i):".",a=e.name==="doesNotReject"?"rejection":"exception";T0({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(a).concat(n,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Nl.throws=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];RAe.apply(void 0,[e,LAe(t)].concat(i))};Nl.rejects=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return PAe(t).then(function(a){return RAe.apply(void 0,[e,a].concat(i))})};Nl.doesNotThrow=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];DAe.apply(void 0,[e,LAe(t)].concat(i))};Nl.doesNotReject=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return PAe(t).then(function(a){return DAe.apply(void 0,[e,a].concat(i))})};Nl.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";w0(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=rR(t);var i=new Xm({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),n=t.stack;if(typeof n=="string"){var a=n.split(`
`);a.shift();for(var o=i.stack.split(`
`),s=0;s<a.length;s++){var l=o.indexOf(a[s]);if(l!==-1){o=o.slice(0,l);break}}i.stack="".concat(o.join(`
`),`
`).concat(a.join(`
`))}throw i}};function IAe(e,t,r,i,n){if(!nR(t))throw new n3("regexp","RegExp",t);var a=n==="match";if(typeof e!="string"||iR(t,e)!==a){if(r instanceof Error)throw r;var o=!r;r=r||(typeof e!="string"?'The "string" argument must be of type string. Received type '+"".concat(w0(e)," (").concat(rR(e),")"):(a?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(rR(t),`. Input:

`).concat(rR(e),`
`));var s=new Xm({actual:e,expected:t,message:r,operator:n,stackStartFn:i});throw s.generatedMessage=o,s}}Nl.match=function e(t,r,i){IAe(t,r,i,e,"match")};Nl.doesNotMatch=function e(t,r,i){IAe(t,r,i,e,"doesNotMatch")};function FAe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];EAe.apply(void 0,[FAe,t.length].concat(t))}Nl.strict=mSt(FAe,Nl,{equal:Nl.strictEqual,deepEqual:Nl.deepStrictEqual,notEqual:Nl.notStrictEqual,notDeepEqual:Nl.notDeepStrictEqual});Nl.strict.strict=Nl.strict});var OAe=ne((_ur,zAe)=>{var $S=1e3,eE=$S*60,tE=eE*60,rE=tE*24,_St=rE*365.25;zAe.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return bSt(e);if(r==="number"&&isNaN(e)===!1)return t.long?TSt(e):wSt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bSt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*_St;case"days":case"day":case"d":return r*rE;case"hours":case"hour":case"hrs":case"hr":case"h":return r*tE;case"minutes":case"minute":case"mins":case"min":case"m":return r*eE;case"seconds":case"second":case"secs":case"sec":case"s":return r*$S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wSt(e){return e>=rE?Math.round(e/rE)+"d":e>=tE?Math.round(e/tE)+"h":e>=eE?Math.round(e/eE)+"m":e>=$S?Math.round(e/$S)+"s":e+"ms"}function TSt(e){return sR(e,rE,"day")||sR(e,tE,"hour")||sR(e,eE,"minute")||sR(e,$S,"second")||e+" ms"}function sR(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var NAe=ne((nl,BAe)=>{nl=BAe.exports=XV.debug=XV.default=XV;nl.coerce=kSt;nl.disable=SSt;nl.enable=MSt;nl.enabled=ESt;nl.humanize=OAe();nl.names=[];nl.skips=[];nl.formatters={};var WV;function ASt(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return nl.colors[Math.abs(t)%nl.colors.length]}function XV(e){function t(){if(t.enabled){var r=t,i=+new Date,n=i-(WV||i);r.diff=n,r.prev=WV,r.curr=i,WV=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=nl.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(u,f){if(u==="%%")return u;s++;var c=nl.formatters[f];if(typeof c=="function"){var h=a[s];u=c.call(r,h),a.splice(s,1),s--}return u}),nl.formatArgs.call(r,a);var l=t.log||nl.log||console.log.bind(console);l.apply(r,a)}}return t.namespace=e,t.enabled=nl.enabled(e),t.useColors=nl.useColors(),t.color=ASt(e),typeof nl.init=="function"&&nl.init(t),t}function MSt(e){nl.save(e),nl.names=[],nl.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),e[0]==="-"?nl.skips.push(new RegExp("^"+e.substr(1)+"$")):nl.names.push(new RegExp("^"+e+"$")))}function SSt(){nl.enable("")}function ESt(e){var t,r;for(t=0,r=nl.skips.length;t<r;t++)if(nl.skips[t].test(e))return!1;for(t=0,r=nl.names.length;t<r;t++)if(nl.names[t].test(e))return!0;return!1}function kSt(e){return e instanceof Error?e.stack||e.message:e}});var HAe=ne((Mv,VAe)=>{Mv=VAe.exports=NAe();Mv.log=PSt;Mv.formatArgs=LSt;Mv.save=RSt;Mv.load=UAe;Mv.useColors=CSt;Mv.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:DSt();Mv.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function CSt(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Mv.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function LSt(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Mv.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(i++,a==="%c"&&(n=i))}),e.splice(n,0,r)}}function PSt(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function RSt(e){try{e==null?Mv.storage.removeItem("debug"):Mv.storage.debug=e}catch(t){}}function UAe(){var e;try{e=Mv.storage.debug}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}Mv.enable(UAe());function DSt(){try{return window.localStorage}catch(e){}}});var JAe=ne((bur,KAe)=>{var i3=NS(),Zm=HAe()("stream-parser");KAe.exports=FSt;var YAe=-1,lR=0,ISt=1,WAe=2;function FSt(e){var t=e&&typeof e._transform=="function",r=e&&typeof e._write=="function";if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");Zm("extending Parser into stream"),e._bytes=qSt,e._skipBytes=zSt,t&&(e._passthrough=OSt),t?e._transform=NSt:e._write=BSt}function nE(e){Zm("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=YAe,e._parserCallback=null,typeof e.push=="function"&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function qSt(e,t){i3(!this._parserCallback,'there is already a "callback" set!'),i3(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||nE(this),Zm("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=lR}function zSt(e,t){i3(!this._parserCallback,'there is already a "callback" set!'),i3(e>0,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||nE(this),Zm("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=ISt}function OSt(e,t){i3(!this._parserCallback,'There is already a "callback" set!'),i3(e>0,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||nE(this),Zm("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=WAe}function BSt(e,t,r){this._parserInit||nE(this),Zm("write(%o bytes)",e.length),typeof t=="function"&&(r=t),ZAe(this,e,null,r)}function NSt(e,t,r){this._parserInit||nE(this),Zm("transform(%o bytes)",e.length),typeof t!="function"&&(t=this._parserOutput),ZAe(this,e,t,r)}function XAe(e,t,r,i){return e._parserBytesLeft<=0?i(new Error("got data but not currently parsing anything")):t.length<=e._parserBytesLeft?function(){return GAe(e,t,r,i)}:function(){var n=t.slice(0,e._parserBytesLeft);return GAe(e,n,r,function(a){if(a)return i(a);if(t.length>n.length)return function(){return XAe(e,t.slice(n.length),r,i)}})}}function GAe(e,t,r,i){if(e._parserBytesLeft-=t.length,Zm("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===lR?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===WAe&&r(t),e._parserBytesLeft===0){var n=e._parserCallback;if(n&&e._parserState===lR&&e._parserBuffers.length>1&&(t=Buffer.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==lR&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=YAe,e._parserBuffers.splice(0),n){var a=[];t&&a.push(t),r&&a.push(r);var o=n.length>a.length;o&&a.push(jAe(i));var s=n.apply(e,a);if(!o||i===s)return i}}else return i}var ZAe=jAe(XAe);function jAe(e){return function(){for(var t=e.apply(this,arguments);typeof t=="function";)t=t();return t}}});var Ns=ne(sy=>{"use strict";var QAe=G3e().Transform,USt=JAe();function iE(){QAe.call(this,{readableObjectMode:!0})}iE.prototype=Object.create(QAe.prototype);iE.prototype.constructor=iE;USt(iE.prototype);sy.ParserStream=iE;sy.sliceEq=function(e,t,r){for(var i=t,n=0;n<r.length;)if(e[i++]!==r[n++])return!1;return!0};sy.str2arr=function(e,t){var r=[],i=0;if(t&&t==="hex")for(;i<e.length;)r.push(parseInt(e.slice(i,i+2),16)),i+=2;else for(;i<e.length;i++)r.push(e.charCodeAt(i)&255);return r};sy.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};sy.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};sy.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};sy.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function uR(e,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),r&&(this.statusCode=r)}uR.prototype=Object.create(Error.prototype);uR.prototype.constructor=uR;sy.ProbeError=uR});var $Ae=ne((Tur,fR)=>{"use strict";var a3=Ns().readUInt16BE,jV=Ns().readUInt32BE;function aE(e,t){if(e.length<4+t)return null;var r=jV(e,t);return e.length<r+t||r<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}fR.exports.unbox=aE;function VSt(e,t){for(var r=0;;){var i=aE(e,r);if(!i)break;switch(i.boxtype){case"ispe":t.sizes.push({width:jV(i.data,4),height:jV(i.data,8)});break;case"irot":t.transforms.push({type:"irot",value:i.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:i.data[0]&1});break}r=i.end}}function ZV(e,t,r){for(var i=0,n=0;n<r;n++)i=i*256+(e[t+n]||0);return i}function HSt(e,t){for(var r=e[4]>>4&15,i=e[4]&15,n=e[5]>>4&15,a=a3(e,6),o=8,s=0;s<a;s++){var l=a3(e,o);o+=2;var u=a3(e,o);o+=2;var f=ZV(e,o,n);o+=n;var c=a3(e,o);if(o+=2,u===0&&c===1){var h=ZV(e,o,r),v=ZV(e,o+r,i);t.item_loc[l]={length:v,offset:h+f}}o+=c*(r+i)}}function GSt(e,t){for(var r=a3(e,4),i=6,n=0;n<r;n++){var a=aE(e,i);if(!a)break;if(a.boxtype==="infe"){for(var o=a3(a.data,4),s="",l=8;l<a.data.length&&a.data[l];l++)s+=String.fromCharCode(a.data[l]);t.item_inf[s]=o}i=a.end}}function YSt(e,t){for(var r=0;;){var i=aE(e,r);if(!i)break;i.boxtype==="ipco"&&VSt(i.data,t),r=i.end}}function WSt(e,t){for(var r=4;;){var i=aE(e,r);if(!i)break;i.boxtype==="iprp"&&YSt(i.data,t),i.boxtype==="iloc"&&HSt(i.data,t),i.boxtype==="iinf"&&GSt(i.data,t),r=i.end}}function XSt(e){var t=e.reduce(function(n,a){return n.width>a.width||n.width===a.width&&n.height>a.height?n:a}),r=e.reduce(function(n,a){return n.height>a.height||n.height===a.height&&n.width>a.width?n:a}),i;return t.width>r.height||t.width===r.height&&t.height>r.width?i=t:i=r,i}fR.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(WSt(e,t),!!t.sizes.length){var r=XSt(t.sizes),i=1;t.transforms.forEach(function(a){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(a.type==="imir"&&(a.value===0?i=s[i]:(i=s[i],i=o[i],i=o[i])),a.type==="irot")for(var l=0;l<a.value;l++)i=o[i]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:r.width,height:r.height,orientation:t.transforms.length?i:null,variants:t.sizes,exif_location:n}}};fR.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),r={};r[t]=!0;for(var i=8;i<e.length;i+=4)r[String.fromCharCode.apply(null,e.slice(i,i+4))]=!0;if(!(!r.mif1&&!r.msf1&&!r.miaf))return t==="avif"||t==="avis"||t==="avio"?{type:"avif",mime:"image/avif"}:t==="heic"||t==="heix"?{type:"heic",mime:"image/heic"}:t==="hevc"||t==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}});var hR=ne((Aur,KV)=>{"use strict";function cR(e,t){var r=new Error(e);return r.code=t,r}function ZSt(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function ly(e,t,r){this.input=e.subarray(t,r),this.start=t;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw cR("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}ly.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,e)}};ly.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw cR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};ly.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw cR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};ly.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};ly.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};ly.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:return r=this.input[t],r;case 6:return r=this.input[t],r|(r&128)*33554430;case 3:return r=this.read_uint16(t),r;case 8:return r=this.read_uint16(t),r|(r&32768)*131070;case 4:return r=this.read_uint32(t),r;case 9:return r=this.read_uint32(t),r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};ly.prototype.scan_ifd=function(e,t,r){var i=this.read_uint16(t);t+=2;for(var n=0;n<i;n++){var a=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),u=s*l,f=u<=4?t+8:this.read_uint32(t+8),c=!1;if(f+u>this.input.length)throw cR("unexpected EOF","EBADDATA");for(var h=[],v=f,p=0;p<s;p++,v+=l){var _=this.exif_format_read(o,v);if(_===null){h=null;break}h.push(_)}Array.isArray(h)&&o===2&&(h=ZSt(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(e,a)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:a,offset:h[0]}),c=!0);var T={is_big_endian:this.big_endian,ifd:e,tag:a,format:o,count:s,entry_offset:t+this.start,data_length:u,data_offset:f+this.start,value:h,is_subifd_link:c};if(r(T)===!1){this.aborted=!0;return}t+=12}e===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})};KV.exports.ExifParser=ly;KV.exports.get_orientation=function(e){var t=0;try{return new ly(e,0,e.length).each(function(r){if(r.ifd===0&&r.tag===274&&Array.isArray(r.value))return t=r.value[0],!1}),t}catch(r){return-1}}});var tMe=ne((Mur,eMe)=>{"use strict";var jSt=Ns().str2arr,KSt=Ns().sliceEq,JSt=Ns().readUInt32BE,vR=$Ae(),QSt=hR(),$St=jSt("ftyp");eMe.exports=function(e){if(KSt(e,4,$St)){var t=vR.unbox(e,0);if(t){var r=vR.getMimeType(t.data);if(r){for(var i,n=t.end;;){var a=vR.unbox(e,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){i=a.data;break}}if(i){var o=vR.readSizeFromMeta(i);if(o){var s={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(s.variants=o.variants),o.orientation&&(s.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length){var l=JSt(e,o.exif_location.offset),u=e.slice(o.exif_location.offset+l+4,o.exif_location.offset+o.exif_location.length),f=QSt.get_orientation(u);f>0&&(s.orientation=f)}return s}}}}}}});var iMe=ne((Sur,nMe)=>{"use strict";var eEt=Ns().str2arr,tEt=Ns().sliceEq,rMe=Ns().readUInt16LE,rEt=eEt("BM");nMe.exports=function(e){if(!(e.length<26)&&tEt(e,0,rEt))return{width:rMe(e,18),height:rMe(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}});var uMe=ne((Eur,lMe)=>{"use strict";var sMe=Ns().str2arr,aMe=Ns().sliceEq,oMe=Ns().readUInt16LE,nEt=sMe("GIF87a"),iEt=sMe("GIF89a");lMe.exports=function(e){if(!(e.length<10)&&!(!aMe(e,0,nEt)&&!aMe(e,0,iEt)))return{width:oMe(e,6),height:oMe(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}});var hMe=ne((kur,cMe)=>{"use strict";var JV=Ns().readUInt16LE,aEt=0,oEt=1,fMe=16;cMe.exports=function(e){var t=JV(e,0),r=JV(e,2),i=JV(e,4);if(!(t!==aEt||r!==oEt||!i)){for(var n=[],a={width:0,height:0},o=0;o<i;o++){var s=e[6+fMe*o]||256,l=e[6+fMe*o+1]||256,u={width:s,height:l};n.push(u),(s>a.width||l>a.height)&&(a=u)}return{width:a.width,height:a.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}});var dMe=ne((Cur,vMe)=>{"use strict";var QV=Ns().readUInt16BE,sEt=Ns().str2arr,lEt=Ns().sliceEq,uEt=hR(),fEt=sEt("Exif\0\0");vMe.exports=function(e){if(!(e.length<2)&&!(e[0]!==255||e[1]!==216||e[2]!==255))for(var t=2;;){for(;;){if(e.length-t<2)return;if(e[t++]===255)break}for(var r=e[t++],i;r===255;)r=e[t++];if(208<=r&&r<=217||r===1)i=0;else if(192<=r&&r<=254){if(e.length-t<2)return;i=QV(e,t)-2,t+=2}else return;if(r===217||r===218)return;var n;if(r===225&&i>=10&&lEt(e,t,fEt)&&(n=uEt.get_orientation(e.slice(t+6,t+i))),i>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(e.length-t<i)return;var a={width:QV(e,t+3),height:QV(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(a.orientation=n),a}t+=i}}});var xMe=ne((Lur,mMe)=>{"use strict";var yMe=Ns().str2arr,pMe=Ns().sliceEq,gMe=Ns().readUInt32BE,cEt=yMe(`\x89PNG\r

`),hEt=yMe("IHDR");mMe.exports=function(e){if(!(e.length<24)&&pMe(e,0,cEt)&&pMe(e,12,hEt))return{width:gMe(e,16),height:gMe(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}});var wMe=ne((Pur,bMe)=>{"use strict";var vEt=Ns().str2arr,dEt=Ns().sliceEq,_Me=Ns().readUInt32BE,pEt=vEt("8BPS\0");bMe.exports=function(e){if(!(e.length<22)&&dEt(e,0,pEt))return{width:_Me(e,18),height:_Me(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}});var MMe=ne((Rur,AMe)=>{"use strict";function gEt(e){return e===32||e===9||e===13||e===10}function o3(e){return typeof e=="number"&&isFinite(e)&&e>0}function yEt(e){var t=0,r=e.length;for(e[0]===239&&e[1]===187&&e[2]===191&&(t=3);t<r&&gEt(e[t]);)t++;return t===r?!1:e[t]===60}var mEt=/<[-_.:a-zA-Z0-9][^>]*>/,xEt=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,_Et=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,bEt=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,wEt=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,TMe=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function TEt(e){var t=e.match(_Et),r=e.match(bEt),i=e.match(wEt);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:i&&(i[1]||i[2])}}function og(e){return TMe.test(e)?e.match(TMe)[0]:"px"}AMe.exports=function(e){if(yEt(e)){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);var i=(t.match(mEt)||[""])[0];if(xEt.test(i)){var n=TEt(i),a=parseFloat(n.width),o=parseFloat(n.height);if(n.width&&n.height)return!o3(a)||!o3(o)?void 0:{width:a,height:o,type:"svg",mime:"image/svg+xml",wUnits:og(n.width),hUnits:og(n.height)};var s=(n.viewbox||"").split(" "),l={width:s[2],height:s[3]},u=parseFloat(l.width),f=parseFloat(l.height);if(!(!o3(u)||!o3(f))&&og(l.width)===og(l.height)){var c=u/f;return n.width?o3(a)?{width:a,height:a/c,type:"svg",mime:"image/svg+xml",wUnits:og(n.width),hUnits:og(n.width)}:void 0:n.height?o3(o)?{width:o*c,height:o,type:"svg",mime:"image/svg+xml",wUnits:og(n.height),hUnits:og(n.height)}:void 0:{width:u,height:f,type:"svg",mime:"image/svg+xml",wUnits:og(l.width),hUnits:og(l.height)}}}}}});var LMe=ne((Dur,CMe)=>{"use strict";var kMe=Ns().str2arr,SMe=Ns().sliceEq,AEt=Ns().readUInt16LE,MEt=Ns().readUInt16BE,SEt=Ns().readUInt32LE,EEt=Ns().readUInt32BE,kEt=kMe("II*\0"),CEt=kMe("MM\0*");function dR(e,t,r){return r?MEt(e,t):AEt(e,t)}function $V(e,t,r){return r?EEt(e,t):SEt(e,t)}function EMe(e,t,r){var i=dR(e,t+2,r),n=$V(e,t+4,r);return n!==1||i!==3&&i!==4?null:i===3?dR(e,t+8,r):$V(e,t+8,r)}CMe.exports=function(e){if(!(e.length<8)&&!(!SMe(e,0,kEt)&&!SMe(e,0,CEt))){var t=e[0]===77,r=$V(e,4,t)-8;if(!(r<0)){var i=r+8;if(!(e.length-i<2)){var n=dR(e,i+0,t)*12;if(!(n<=0)&&(i+=2,!(e.length-i<n))){var a,o,s,l;for(a=0;a<n;a+=12)l=dR(e,i+a,t),l===256?o=EMe(e,i+a,t):l===257&&(s=EMe(e,i+a,t));if(o&&s)return{width:o,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}});var FMe=ne((Iur,IMe)=>{"use strict";var DMe=Ns().str2arr,PMe=Ns().sliceEq,RMe=Ns().readUInt16LE,eH=Ns().readUInt32LE,LEt=hR(),PEt=DMe("RIFF"),REt=DMe("WEBP");function DEt(e,t){if(!(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42))return{width:RMe(e,t+6)&16383,height:RMe(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function IEt(e,t){if(e[t]===47){var r=eH(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function FEt(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}IMe.exports=function(e){if(!(e.length<16)&&!(!PMe(e,0,PEt)&&!PMe(e,8,REt))){var t=12,r=null,i=0,n=eH(e,4)+8;if(!(n>e.length)){for(;t+8<n;){if(e[t]===0){t++;continue}var a=String.fromCharCode.apply(null,e.slice(t,t+4)),o=eH(e,t+4);a==="VP8 "&&o>=10?r=r||DEt(e,t+8):a==="VP8L"&&o>=9?r=r||IEt(e,t+8):a==="VP8X"&&o>=10?r=r||FEt(e,t+8):a==="EXIF"&&(i=LEt.get_orientation(e.slice(t+8,t+8+o)),t=1/0),t+=8+o}if(r)return i>0&&(r.orientation=i),r}}}});var zMe=ne((Fur,qMe)=>{"use strict";qMe.exports={avif:tMe(),bmp:iMe(),gif:uMe(),ico:hMe(),jpeg:dMe(),png:xMe(),psd:wMe(),svg:MMe(),tiff:LMe(),webp:FMe()}});var OMe=ne((qur,rH)=>{"use strict";var tH=zMe();function qEt(e){for(var t=Object.keys(tH),r=0;r<t.length;r++){var i=tH[t[r]](e);if(i)return i}return null}rH.exports=function(t){return qEt(t)};rH.exports.parsers=tH});var NMe=ne(BMe=>{"use strict";var zEt=OMe(),OEt=Wg().IMAGE_URL_PREFIX,BEt=e_().Buffer;BMe.getImageSize=function(e){var t=e.replace(OEt,""),r=new BEt(t,"base64");return zEt(r)}});var HMe=ne((Our,VMe)=>{"use strict";var UMe=Wt(),NEt=Iw(),UEt=la(),pR=Xi(),VEt=Wt().maxRowLength,HEt=NMe().getImageSize;VMe.exports=function(t,r){var i,n;if(r._hasZ)i=r.z.length,n=VEt(r.z);else if(r._hasSource){var a=HEt(r.source);i=a.height,n=a.width}var o=pR.getFromId(t,r.xaxis||"x"),s=pR.getFromId(t,r.yaxis||"y"),l=o.d2c(r.x0)-r.dx/2,u=s.d2c(r.y0)-r.dy/2,f,c=[l,l+n*r.dx],h=[u,u+i*r.dy];if(o&&o.type==="log")for(f=0;f<n;f++)c.push(l+f*r.dx);if(s&&s.type==="log")for(f=0;f<i;f++)h.push(u+f*r.dy);r._extremes[o._id]=pR.findExtremes(o,c),r._extremes[s._id]=pR.findExtremes(s,h),r._scaler=WEt(r);var v={x0:l,y0:u,z:r.z,w:n,h:i};return[v]};function GEt(e,t,r,i){return function(n){return UMe.constrain((n-e)*t,r,i)}}function YEt(e,t){return function(r){return UMe.constrain(r,e,t)}}function WEt(e){var t=NEt.colormodel[e.colormodel],r=t.colormodel||e.colormodel,i=r.length;e._sArray=[];for(var n=0;n<i;n++)t.min[n]!==e.zmin[n]||t.max[n]!==e.zmax[n]?e._sArray.push(GEt(e.zmin[n],(t.max[n]-t.min[n])/(e.zmax[n]-e.zmin[n]),t.min[n],t.max[n])):e._sArray.push(YEt(t.min[n],t.max[n]));return function(a){for(var o=a.slice(0,i),s=0;s<i;s++){var l=o[s];if(!UEt(l))return!1;o[s]=e._sArray[s](l)}return o}}});var WMe=ne((Bur,YMe)=>{"use strict";var XEt=Ai(),p_=Wt(),GMe=p_.strTranslate,ZEt=kd(),jEt=Iw(),KEt=W9(),JEt=xP().STYLE;YMe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis,s=!t._context._exportedPlot&&KEt();p_.makeTraceGroups(n,i,"im").each(function(l){var u=XEt.select(this),f=l[0],c=f.trace,h=(c.zsmooth==="fast"||c.zsmooth===!1&&s)&&!c._hasZ&&c._hasSource&&a.type==="linear"&&o.type==="linear";c._realImage=h;var v=f.z,p=f.x0,_=f.y0,T=f.w,g=f.h,A=c.dx,b=c.dy,w,k,x,E,M,d;for(d=0;w===void 0&&d<T;)w=a.c2p(p+d*A),d++;for(d=T;k===void 0&&d>0;)k=a.c2p(p+d*A),d--;for(d=0;E===void 0&&d<g;)E=o.c2p(_+d*b),d++;for(d=g;M===void 0&&d>0;)M=o.c2p(_+d*b),d--;if(k<w&&(x=k,k=w,w=x),M<E&&(x=E,E=M,M=x),!h){var C=.5;w=Math.max(-C*a._length,w),k=Math.min((1+C)*a._length,k),E=Math.max(-C*o._length,E),M=Math.min((1+C)*o._length,M)}var S=Math.round(k-w),P=Math.round(M-E),D=S<=0||P<=0;if(D){var z=u.selectAll("image").data([]);z.exit().remove();return}function O(K){var X=document.createElement("canvas");X.width=S,X.height=P;var ae=X.getContext("2d",{willReadFrequently:!0}),oe=function(Le){return p_.constrain(Math.round(a.c2p(p+Le*A)-w),0,S)},_e=function(Le){return p_.constrain(Math.round(o.c2p(_+Le*b)-E),0,P)},be=jEt.colormodel[c.colormodel],he=be.colormodel||c.colormodel,ie=be.fmt,ye;for(d=0;d<f.w;d++){var ue=oe(d),Ae=oe(d+1);if(!(Ae===ue||isNaN(Ae)||isNaN(ue)))for(var Re=0;Re<f.h;Re++){var ze=_e(Re),et=_e(Re+1);et===ze||isNaN(et)||isNaN(ze)||!K(d,Re)||(ye=c._scaler(K(d,Re)),ye?ae.fillStyle=he+"("+ie(ye).join(",")+")":ae.fillStyle="rgba(0,0,0,0)",ae.fillRect(ue,ze,Ae-ue,et-ze))}}return X}var V=u.selectAll("image").data([l]);V.enter().append("svg:image").attr({xmlns:ZEt.svg,preserveAspectRatio:"none"}),V.exit().remove();var B=c.zsmooth===!1?JEt:"";if(h){var F=p_.simpleMap(a.range,a.r2l),N=p_.simpleMap(o.range,o.r2l),Z=F[1]<F[0],J=N[1]>N[0];if(Z||J){var re=w+S/2,le=E+P/2;B+="transform:"+GMe(re+"px",le+"px")+"scale("+(Z?-1:1)+","+(J?-1:1)+")"+GMe(-re+"px",-le+"px")+";"}}V.attr("style",B);var fe=new Promise(function(K){if(c._hasZ)K();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===T&&c._canvas.el.height===g&&c._canvas.source===c.source)K();else{var X=document.createElement("canvas");X.width=T,X.height=g;var ae=X.getContext("2d",{willReadFrequently:!0});c._image=c._image||new Image;var oe=c._image;oe.onload=function(){ae.drawImage(oe,0,0),c._canvas={el:X,source:c.source},K()},oe.setAttribute("src",c.source)}}).then(function(){var K,X;if(c._hasZ)X=O(function(_e,be){var he=v[be][_e];return p_.isTypedArray(he)&&(he=Array.from(he)),he}),K=X.toDataURL("image/png");else if(c._hasSource)if(h)K=c.source;else{var ae=c._canvas.el.getContext("2d",{willReadFrequently:!0}),oe=ae.getImageData(0,0,T,g).data;X=O(function(_e,be){var he=4*(be*T+_e);return[oe[he],oe[he+1],oe[he+2],oe[he+3]]}),K=X.toDataURL("image/png")}V.attr({"xlink:href":K,height:P,width:S,x:w,y:E})});t._promises.push(fe)})}});var ZMe=ne((Nur,XMe)=>{"use strict";var QEt=Ai();XMe.exports=function(t){QEt.select(t).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}});var QMe=ne((Uur,JMe)=>{"use strict";var jMe=Ol(),KMe=Wt(),gR=KMe.isArrayOrTypedArray,$Et=Iw();JMe.exports=function(t,r,i){var n=t.cd[0],a=n.trace,o=t.xa,s=t.ya;if(!(jMe.inbox(r-n.x0,r-(n.x0+n.w*a.dx),0)>0||jMe.inbox(i-n.y0,i-(n.y0+n.h*a.dy),0)>0)){var l=Math.floor((r-n.x0)/a.dx),u=Math.floor(Math.abs(i-n.y0)/a.dy),f;if(a._hasZ?f=n.z[u][l]:a._hasSource&&(f=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),!!f){var c=n.hi||a.hoverinfo,h;if(c){var v=c.split("+");v.indexOf("all")!==-1&&(v=["color"]),v.indexOf("color")!==-1&&(h=!0)}var p=$Et.colormodel[a.colormodel],_=p.colormodel||a.colormodel,T=_.length,g=a._scaler(f),A=p.suffix,b=[];(a.hovertemplate||h)&&(b.push("["+[g[0]+A[0],g[1]+A[1],g[2]+A[2]].join(", ")),T===4&&b.push(", "+g[3]+A[3]),b.push("]"),b=b.join(""),t.extraText=_.toUpperCase()+": "+b);var w;gR(a.hovertext)&&gR(a.hovertext[u])?w=a.hovertext[u][l]:gR(a.text)&&gR(a.text[u])&&(w=a.text[u][l]);var k=s.c2p(n.y0+(u+.5)*a.dy),x=n.x0+(l+.5)*a.dx,E=n.y0+(u+.5)*a.dy,M="["+f.slice(0,a.colormodel.length).join(", ")+"]";return[KMe.extendFlat(t,{index:[u,l],x0:o.c2p(n.x0+l*a.dx),x1:o.c2p(n.x0+(l+1)*a.dx),y0:k,y1:k,color:g,xVal:x,xLabelVal:x,yVal:E,yLabelVal:E,zLabelVal:M,text:w,hovertemplateLabels:{zLabel:M,colorLabel:b,"color[0]Label":g[0]+A[0],"color[1]Label":g[1]+A[1],"color[2]Label":g[2]+A[2],"color[3]Label":g[3]+A[3]}})]}}}});var eSe=ne((Vur,$Me)=>{"use strict";$Me.exports=function(t,r){return"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t.color=r.color,t.colormodel=r.trace.colormodel,t.z||(t.z=r.color),t}});var rSe=ne((Hur,tSe)=>{"use strict";tSe.exports={attributes:nU(),supplyDefaults:Jbe(),calc:HMe(),plot:WMe(),style:ZMe(),hoverPoints:QMe(),eventData:eSe(),moduleType:"trace",name:"image",basePlotModule:vu(),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}});var iSe=ne((Gur,nSe)=>{"use strict";nSe.exports=rSe()});var g_=ne((Yur,aSe)=>{"use strict";var e5t=es(),t5t=fl().attributes,r5t=ll(),n5t=Ku(),i5t=Ba().hovertemplateAttrs,a5t=Ba().texttemplateAttrs,s3=oa().extendFlat,o5t=hc().pattern,oE=r5t({editType:"plot",arrayOk:!0,colorEditType:"plot"});aSe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n5t.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:o5t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s3({},e5t.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:i5t({},{keys:["label","color","value","percent","text"]}),texttemplate:a5t({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s3({},oE,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s3({},oE,{}),outsidetextfont:s3({},oE,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s3({},oE,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:t5t({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s3({},oE,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}});var y_=ne((Wur,lSe)=>{"use strict";var s5t=la(),sE=Wt(),l5t=g_(),u5t=fl().defaults,f5t=Fd().handleText,c5t=Wt().coercePattern;function oSe(e,t){var r=sE.isArrayOrTypedArray(e),i=sE.isArrayOrTypedArray(t),n=Math.min(r?e.length:1/0,i?t.length:1/0);if(isFinite(n)||(n=0),n&&i){for(var a,o=0;o<n;o++){var s=t[o];if(s5t(s)&&s>0){a=!0;break}}a||(n=0)}return{hasLabels:r,hasValues:i,len:n}}function sSe(e,t,r,i,n){var a=i("marker.line.width");a&&i("marker.line.color",n?void 0:r.paper_bgcolor);var o=i("marker.colors");c5t(i,"marker.pattern",o),e.marker&&!t.marker.pattern.fgcolor&&(t.marker.pattern.fgcolor=e.marker.colors),t.marker.pattern.bgcolor||(t.marker.pattern.bgcolor=r.paper_bgcolor)}function h5t(e,t,r,i){function n(A,b){return sE.coerce(e,t,l5t,A,b)}var a=n("labels"),o=n("values"),s=oSe(a,o),l=s.len;if(t._hasLabels=s.hasLabels,t._hasValues=s.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),!l){t.visible=!1;return}t._length=l,sSe(e,t,i,n,!0),n("scalegroup");var u=n("text"),f=n("texttemplate"),c;if(f||(c=n("textinfo",sE.isArrayOrTypedArray(u)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&c!=="none"){var h=n("textposition");f5t(e,t,i,n,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var v=Array.isArray(h)||h==="auto",p=v||h==="outside";p&&n("automargin"),(h==="inside"||h==="auto"||Array.isArray(h))&&n("insidetextorientation")}else c==="none"&&n("textposition","none");u5t(t,i,n);var _=n("hole"),T=n("title.text");if(T){var g=n("title.position",_?"middle center":"top center");!_&&g==="middle center"&&(t.title.position="top center"),sE.coerceFont(n,"title.font",i.font)}n("sort"),n("direction"),n("rotation"),n("pull")}lSe.exports={handleLabelsAndValues:oSe,handleMarkerDefaults:sSe,supplyDefaults:h5t}});var yR=ne((Xur,uSe)=>{"use strict";uSe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var cSe=ne((Zur,fSe)=>{"use strict";var v5t=Wt(),d5t=yR();fSe.exports=function(t,r){function i(n,a){return v5t.coerce(t,r,d5t,n,a)}i("hiddenlabels"),i("piecolorway",r.colorway),i("extendpiecolors")}});var l3=ne((jur,dSe)=>{"use strict";var p5t=la(),nH=Xf(),g5t=_i(),y5t={};function m5t(e,t){var r=[],i=e._fullLayout,n=i.hiddenlabels||[],a=t.labels,o=t.marker.colors||[],s=t.values,l=t._length,u=t._hasValues&&l,f,c;if(t.dlabel)for(a=new Array(l),f=0;f<l;f++)a[f]=String(t.label0+f*t.dlabel);var h={},v=hSe(i["_"+t.type+"colormap"]),p=0,_=!1;for(f=0;f<l;f++){var T,g,A;if(u){if(T=s[f],!p5t(T))continue;T=+T}else T=1;g=a[f],(g===void 0||g==="")&&(g=f),g=String(g);var b=h[g];b===void 0?(h[g]=r.length,A=n.indexOf(g)!==-1,A||(p+=T),r.push({v:T,label:g,color:v(o[f],g),i:f,pts:[f],hidden:A})):(_=!0,c=r[b],c.v+=T,c.pts.push(f),c.hidden||(p+=T),c.color===!1&&o[f]&&(c.color=v(o[f],g)))}r=r.filter(function(k){return k.v>=0});var w=t.type==="funnelarea"?_:t.sort;return w&&r.sort(function(k,x){return x.v-k.v}),r[0]&&(r[0].vTotal=p),r}function hSe(e){return function(r,i){return!r||(r=nH(r),!r.isValid())?!1:(r=g5t.addOpacity(r,r.getAlpha()),e[i]||(e[i]=r),r)}}function x5t(e,t){var r=(t||{}).type;r||(r="pie");var i=e._fullLayout,n=e.calcdata,a=i[r+"colorway"],o=i["_"+r+"colormap"];i["extend"+r+"colors"]&&(a=vSe(a,y5t));for(var s=0,l=0;l<n.length;l++){var u=n[l],f=u[0].trace.type;if(f===r)for(var c=0;c<u.length;c++){var h=u[c];h.color===!1&&(o[h.label]?h.color=o[h.label]:(o[h.label]=h.color=a[s%a.length],s++))}}}function vSe(e,t){var r,i=JSON.stringify(e),n=t[i];if(!n){for(n=e.slice(),r=0;r<e.length;r++)n.push(nH(e[r]).lighten(20).toHexString());for(r=0;r<e.length;r++)n.push(nH(e[r]).darken(20).toHexString());t[i]=n}return n}dSe.exports={calc:m5t,crossTraceCalc:x5t,makePullColorFn:hSe,generateExtendedColors:vSe}});var gSe=ne((Kur,pSe)=>{"use strict";var _5t=td().appendArrayMultiPointValues;pSe.exports=function(t,r){var i={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};return t.pts.length===1&&(i.pointNumber=i.i=t.pts[0]),_5t(i,r,t.pts),r.type==="funnelarea"&&(delete i.v,delete i.i),i}});var bR=ne((Jur,zSe)=>{"use strict";var hd=Ai(),b5t=Zs(),mR=Ol(),wSe=_i(),uy=aa(),Nc=Wt(),w5t=Nc.strScale,ySe=Nc.strTranslate,iH=Es(),TSe=yh(),T5t=TSe.recordMinTextSize,A5t=TSe.clearMinTextSize,ASe=Ux().TEXTPAD,ys=hm(),xR=gSe(),mSe=Wt().isValidTextValue;function M5t(e,t){var r=e._context.staticPlot,i=e._fullLayout,n=i._size;A5t("pie",i),ESe(t,e),ISe(t,n);var a=Nc.makeTraceGroups(i._pielayer,t,"trace").each(function(o){var s=hd.select(this),l=o[0],u=l.trace;I5t(o),s.attr("stroke-linejoin","round"),s.each(function(){var f=hd.select(this).selectAll("g.slice").data(o);f.enter().append("g").classed("slice",!0),f.exit().remove();var c=[[[],[]],[[],[]]],h=!1;f.each(function(w,k){if(w.hidden){hd.select(this).selectAll("path,g").remove();return}w.pointNumber=w.i,w.curveNumber=u.index,c[w.pxmid[1]<0?0:1][w.pxmid[0]<0?0:1].push(w);var x=l.cx,E=l.cy,M=hd.select(this),d=M.selectAll("path.surface").data([w]);if(d.enter().append("path").classed("surface",!0).style({"pointer-events":r?"none":"all"}),M.call(MSe,e,o),u.pull){var C=+ys.castOption(u.pull,w.pts)||0;C>0&&(x+=C*w.pxmid[0],E+=C*w.pxmid[1])}w.cxFinal=x,w.cyFinal=E;function S(F,N,Z,J){var re=J*(N[0]-F[0]),le=J*(N[1]-F[1]);return"a"+J*l.r+","+J*l.r+" 0 "+w.largeArc+(Z?" 1 ":" 0 ")+re+","+le}var P=u.hole;if(w.v===l.vTotal){var D="M"+(x+w.px0[0])+","+(E+w.px0[1])+S(w.px0,w.pxmid,!0,1)+S(w.pxmid,w.px0,!0,1)+"Z";P?d.attr("d","M"+(x+P*w.px0[0])+","+(E+P*w.px0[1])+S(w.px0,w.pxmid,!1,P)+S(w.pxmid,w.px0,!1,P)+"Z"+D):d.attr("d",D)}else{var z=S(w.px0,w.px1,!0,1);if(P){var O=1-P;d.attr("d","M"+(x+P*w.px1[0])+","+(E+P*w.px1[1])+S(w.px1,w.px0,!1,P)+"l"+O*w.px0[0]+","+O*w.px0[1]+z+"Z")}else d.attr("d","M"+x+","+E+"l"+w.px0[0]+","+w.px0[1]+z+"Z")}FSe(e,w,l);var V=ys.castOption(u.textposition,w.pts),B=M.selectAll("g.slicetext").data(w.text&&V!=="none"?[0]:[]);B.enter().append("g").classed("slicetext",!0),B.exit().remove(),B.each(function(){var F=Nc.ensureSingle(hd.select(this),"text","",function(X){X.attr("data-notex",1)}),N=Nc.ensureUniformFontSize(e,V==="outside"?E5t(u,w,i.font):SSe(u,w,i.font));F.text(w.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(uy.font,N).call(iH.convertToTspans,e);var Z=uy.bBox(F.node()),J;if(V==="outside")J=bSe(Z,w);else if(J=kSe(Z,w,l),V==="auto"&&J.scale<1){var re=Nc.ensureUniformFontSize(e,u.outsidetextfont);F.call(uy.font,re),Z=uy.bBox(F.node()),J=bSe(Z,w)}var le=J.textPosAngle,fe=le===void 0?w.pxmid:_R(l.r,le);if(J.targetX=x+fe[0]*J.rCenter+(J.x||0),J.targetY=E+fe[1]*J.rCenter+(J.y||0),qSe(J,Z),J.outside){var K=J.targetY;w.yLabelMin=K-Z.height/2,w.yLabelMid=K,w.yLabelMax=K+Z.height/2,w.labelExtraX=0,w.labelExtraY=0,h=!0}J.fontSize=N.size,T5t(u.type,J,i),o[k].transform=J,Nc.setTransormAndDisplay(F,J)})});var v=hd.select(this).selectAll("g.titletext").data(u.title.text?[0]:[]);if(v.enter().append("g").classed("titletext",!0),v.exit().remove(),v.each(function(){var w=Nc.ensureSingle(hd.select(this),"text","",function(E){E.attr("data-notex",1)}),k=u.title.text;u._meta&&(k=Nc.templateString(k,u._meta)),w.text(k).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(uy.font,u.title.font).call(iH.convertToTspans,e);var x;u.title.position==="middle center"?x=L5t(l):x=RSe(l,n),w.attr("transform",ySe(x.x,x.y)+w5t(Math.min(1,x.scale))+ySe(x.tx,x.ty))}),h&&R5t(c,u),S5t(f,u),h&&u.automargin){var p=uy.bBox(s.node()),_=u.domain,T=n.w*(_.x[1]-_.x[0]),g=n.h*(_.y[1]-_.y[0]),A=(.5*T-l.r)/n.w,b=(.5*g-l.r)/n.h;b5t.autoMargin(e,"pie."+u.uid+".automargin",{xl:_.x[0]-A,xr:_.x[1]+A,yb:_.y[0]-b,yt:_.y[1]+b,l:Math.max(l.cx-l.r-p.left,0),r:Math.max(p.right-(l.cx+l.r),0),b:Math.max(p.bottom-(l.cy+l.r),0),t:Math.max(l.cy-l.r-p.top,0),pad:5})}})});setTimeout(function(){a.selectAll("tspan").each(function(){var o=hd.select(this);o.attr("dy")&&o.attr("dy",o.attr("dy"))})},0)}function S5t(e,t){e.each(function(r){var i=hd.select(this);if(!r.labelExtraX&&!r.labelExtraY){i.select("path.textline").remove();return}var n=i.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,Nc.setTransormAndDisplay(n,r.transform);var a=r.cxFinal+r.pxmid[0],o=r.cyFinal+r.pxmid[1],s="M"+a+","+o,l=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var u=r.labelExtraX*r.pxmid[1]/r.pxmid[0],f=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(u)>Math.abs(f)?s+="l"+f*r.pxmid[0]/r.pxmid[1]+","+f+"H"+(a+r.labelExtraX+l):s+="l"+r.labelExtraX+","+u+"v"+(f-u)+"h"+l}else s+="V"+(r.yLabelMid+r.labelExtraY)+"h"+l;Nc.ensureSingle(i,"path","textline").call(wSe.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})})}function MSe(e,t,r){var i=r[0],n=i.cx,a=i.cy,o=i.trace,s=o.type==="funnelarea";"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),e.on("mouseover",function(l){var u=t._fullLayout,f=t._fullData[o.index];if(!(t._dragging||u.hovermode===!1)){var c=f.hoverinfo;if(Array.isArray(c)&&(c=mR.castHoverinfo({hoverinfo:[ys.castOption(c,l.pts)],_module:o._module},u,0)),c==="all"&&(c="label+text+value+percent+name"),f.hovertemplate||c!=="none"&&c!=="skip"&&c){var h=l.rInscribed||0,v=n+l.pxmid[0]*(1-h),p=a+l.pxmid[1]*(1-h),_=u.separators,T=[];if(c&&c.indexOf("label")!==-1&&T.push(l.label),l.text=ys.castOption(f.hovertext||f.text,l.pts),c&&c.indexOf("text")!==-1){var g=l.text;Nc.isValidTextValue(g)&&T.push(g)}l.value=l.v,l.valueLabel=ys.formatPieValue(l.v,_),c&&c.indexOf("value")!==-1&&T.push(l.valueLabel),l.percent=l.v/i.vTotal,l.percentLabel=ys.formatPiePercent(l.percent,_),c&&c.indexOf("percent")!==-1&&T.push(l.percentLabel);var A=f.hoverlabel,b=A.font,w=[];mR.loneHover({trace:o,x0:v-h*i.r,x1:v+h*i.r,y:p,_x0:s?n+l.TL[0]:v-h*i.r,_x1:s?n+l.TR[0]:v+h*i.r,_y0:s?a+l.TL[1]:p-h*i.r,_y1:s?a+l.BL[1]:p+h*i.r,text:T.join("<br>"),name:f.hovertemplate||c.indexOf("name")!==-1?f.name:void 0,idealAlign:l.pxmid[0]<0?"left":"right",color:ys.castOption(A.bgcolor,l.pts)||l.color,borderColor:ys.castOption(A.bordercolor,l.pts),fontFamily:ys.castOption(b.family,l.pts),fontSize:ys.castOption(b.size,l.pts),fontColor:ys.castOption(b.color,l.pts),nameLength:ys.castOption(A.namelength,l.pts),textAlign:ys.castOption(A.align,l.pts),hovertemplate:ys.castOption(f.hovertemplate,l.pts),hovertemplateLabels:l,eventData:[xR(l,f)]},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:t,inOut_bbox:w}),l.bbox=w[0],o._hasHoverLabel=!0}o._hasHoverEvent=!0,t.emit("plotly_hover",{points:[xR(l,f)],event:hd.event})}}),e.on("mouseout",function(l){var u=t._fullLayout,f=t._fullData[o.index],c=hd.select(this).datum();o._hasHoverEvent&&(l.originalEvent=hd.event,t.emit("plotly_unhover",{points:[xR(c,f)],event:hd.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(mR.loneUnhover(u._hoverlayer.node()),o._hasHoverLabel=!1)}),e.on("click",function(l){var u=t._fullLayout,f=t._fullData[o.index];t._dragging||u.hovermode===!1||(t._hoverdata=[xR(l,f)],mR.click(t,hd.event))})}function E5t(e,t,r){var i=ys.castOption(e.outsidetextfont.color,t.pts)||ys.castOption(e.textfont.color,t.pts)||r.color,n=ys.castOption(e.outsidetextfont.family,t.pts)||ys.castOption(e.textfont.family,t.pts)||r.family,a=ys.castOption(e.outsidetextfont.size,t.pts)||ys.castOption(e.textfont.size,t.pts)||r.size;return{color:i,family:n,size:a}}function SSe(e,t,r){var i=ys.castOption(e.insidetextfont.color,t.pts);!i&&e._input.textfont&&(i=ys.castOption(e._input.textfont.color,t.pts));var n=ys.castOption(e.insidetextfont.family,t.pts)||ys.castOption(e.textfont.family,t.pts)||r.family,a=ys.castOption(e.insidetextfont.size,t.pts)||ys.castOption(e.textfont.size,t.pts)||r.size;return{color:i||wSe.contrast(t.color),family:n,size:a}}function ESe(e,t){for(var r,i,n=0;n<e.length;n++)if(r=e[n][0],i=r.trace,i.title.text){var a=i.title.text;i._meta&&(a=Nc.templateString(a,i._meta));var o=uy.tester.append("text").attr("data-notex",1).text(a).call(uy.font,i.title.font).call(iH.convertToTspans,t),s=uy.bBox(o.node(),!0);r.titleBox={width:s.width,height:s.height},o.remove()}}function kSe(e,t,r){var i=r.r||t.rpx1,n=t.rInscribed,a=t.startangle===t.stopangle;if(a)return{rCenter:1-n,scale:0,rotate:0,textPosAngle:0};var o=t.ring,s=o===1&&Math.abs(t.startangle-t.stopangle)===Math.PI*2,l=t.halfangle,u=t.midangle,f=r.trace.insidetextorientation,c=f==="horizontal",h=f==="tangential",v=f==="radial",p=f==="auto",_=[],T;if(!p){var g=function(M,d){if(k5t(t,M)){var C=Math.abs(M-t.startangle),S=Math.abs(M-t.stopangle),P=C<S?C:S;d==="tan"?T=_Se(e,i,o,P,0):T=xSe(e,i,o,P,Math.PI/2),T.textPosAngle=M,_.push(T)}},A;if(c||h){for(A=4;A>=-4;A-=2)g(Math.PI*A,"tan");for(A=4;A>=-4;A-=2)g(Math.PI*(A+1),"tan")}if(c||v){for(A=4;A>=-4;A-=2)g(Math.PI*(A+1.5),"rad");for(A=4;A>=-4;A-=2)g(Math.PI*(A+.5),"rad")}}if(s||p||c){var b=Math.sqrt(e.width*e.width+e.height*e.height);if(T={scale:n*i*2/b,rCenter:1-n,rotate:0},T.textPosAngle=(t.startangle+t.stopangle)/2,T.scale>=1)return T;_.push(T)}(p||v)&&(T=xSe(e,i,o,l,u),T.textPosAngle=(t.startangle+t.stopangle)/2,_.push(T)),(p||h)&&(T=_Se(e,i,o,l,u),T.textPosAngle=(t.startangle+t.stopangle)/2,_.push(T));for(var w=0,k=0,x=0;x<_.length;x++){var E=_[x].scale;if(k<E&&(k=E,w=x),!p&&k>=1)break}return _[w]}function k5t(e,t){var r=e.startangle,i=e.stopangle;return r>t&&t>i||r<t&&t<i}function xSe(e,t,r,i,n){t=Math.max(0,t-2*ASe);var a=e.width/e.height,o=PSe(a,i,t,r);return{scale:o*2/e.height,rCenter:CSe(a,o/t),rotate:LSe(n)}}function _Se(e,t,r,i,n){t=Math.max(0,t-2*ASe);var a=e.height/e.width,o=PSe(a,i,t,r);return{scale:o*2/e.width,rCenter:CSe(a,o/t),rotate:LSe(n+Math.PI/2)}}function CSe(e,t){return Math.cos(t)-e*t}function LSe(e){return(180/Math.PI*e+720)%180-90}function PSe(e,t,r,i){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),i/(Math.sqrt(e*e+i/2)+e))}function C5t(e,t){return e.v===t.vTotal&&!t.trace.hole?1:Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function bSe(e,t){var r=t.pxmid[0],i=t.pxmid[1],n=e.width/2,a=e.height/2;return r<0&&(n*=-1),i<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:n+Math.abs(a)*(n>0?1:-1)/2,y:a/(1+r*r/(i*i)),outside:!0}}function L5t(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function RSe(e,t){var r=1,i=1,n,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,n=DSe(a),a.title.position.indexOf("top")!==-1?(o.y-=(1+n)*e.r,s.ty-=e.titleBox.height):a.title.position.indexOf("bottom")!==-1&&(o.y+=(1+n)*e.r);var l=P5t(e.r,e.trace.aspectratio),u=t.w*(a.domain.x[1]-a.domain.x[0])/2;return a.title.position.indexOf("left")!==-1?(u=u+l,o.x-=(1+n)*l,s.tx+=e.titleBox.width/2):a.title.position.indexOf("center")!==-1?u*=2:a.title.position.indexOf("right")!==-1&&(u=u+l,o.x+=(1+n)*l,s.tx-=e.titleBox.width/2),r=u/e.titleBox.width,i=aH(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(r,i),tx:s.tx,ty:s.ty}}function P5t(e,t){return e/(t===void 0?1:t)}function aH(e,t){var r=e.trace,i=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,i/2)}function DSe(e){var t=e.pull;if(!t)return 0;var r;if(Nc.isArrayOrTypedArray(t))for(t=0,r=0;r<e.pull.length;r++)e.pull[r]>t&&(t=e.pull[r]);return t}function R5t(e,t){var r,i,n,a,o,s,l,u,f,c,h,v,p;function _(b,w){return b.pxmid[1]-w.pxmid[1]}function T(b,w){return w.pxmid[1]-b.pxmid[1]}function g(b,w){w||(w={});var k=w.labelExtraY+(i?w.yLabelMax:w.yLabelMin),x=i?b.yLabelMin:b.yLabelMax,E=i?b.yLabelMax:b.yLabelMin,M=b.cyFinal+o(b.px0[1],b.px1[1]),d=k-x,C,S,P,D,z,O;if(d*l>0&&(b.labelExtraY=d),!!Nc.isArrayOrTypedArray(t.pull))for(S=0;S<c.length;S++)P=c[S],!(P===b||(ys.castOption(t.pull,b.pts)||0)>=(ys.castOption(t.pull,P.pts)||0))&&((b.pxmid[1]-P.pxmid[1])*l>0?(D=P.cyFinal+o(P.px0[1],P.px1[1]),d=D-x-b.labelExtraY,d*l>0&&(b.labelExtraY+=d)):(E+b.labelExtraY-M)*l>0&&(C=3*s*Math.abs(S-c.indexOf(b)),z=P.cxFinal+a(P.px0[0],P.px1[0]),O=z+C-(b.cxFinal+b.pxmid[0])-b.labelExtraX,O*s>0&&(b.labelExtraX+=O)))}for(i=0;i<2;i++)for(n=i?_:T,o=i?Math.max:Math.min,l=i?1:-1,r=0;r<2;r++){for(a=r?Math.max:Math.min,s=r?1:-1,u=e[i][r],u.sort(n),f=e[1-i][r],c=f.concat(u),v=[],h=0;h<u.length;h++)u[h].yLabelMid!==void 0&&v.push(u[h]);for(p=!1,h=0;i&&h<f.length;h++)if(f[h].yLabelMid!==void 0){p=f[h];break}for(h=0;h<v.length;h++){var A=h&&v[h-1];p&&!h&&(A=p),g(v[h],A)}}}function ISe(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i][0],a=n.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&a.title.position!=="middle center"&&(l-=aH(n,t));var u=s/2,f=l/2;a.type==="funnelarea"&&!a.scalegroup&&(f/=a.aspectratio),n.r=Math.min(u,f)/(1+DSe(a)),n.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,n.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&a.title.position.indexOf("bottom")!==-1&&(n.cy-=aH(n,t)),a.scalegroup&&r.indexOf(a.scalegroup)===-1&&r.push(a.scalegroup)}D5t(e,r)}function D5t(e,t){for(var r,i,n,a=0;a<t.length;a++){var o=1/0,s=t[a];for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var l;if(n.type==="pie")l=r.r*r.r;else if(n.type==="funnelarea"){var u,f;n.aspectratio>1?(u=r.r,f=u/n.aspectratio):(f=r.r,u=f*n.aspectratio),u*=(1+n.baseratio)/2,l=u*f}o=Math.min(o,l/r.vTotal)}for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var c=o*r.vTotal;n.type==="funnelarea"&&(c/=(1+n.baseratio)/2,c/=n.aspectratio),r.r=Math.sqrt(c)}}}function I5t(e){var t=e[0],r=t.r,i=t.trace,n=ys.getRotationAngle(i.rotation),a=2*Math.PI/t.vTotal,o="px0",s="px1",l,u,f;if(i.direction==="counterclockwise"){for(l=0;l<e.length&&e[l].hidden;l++);if(l===e.length)return;n+=a*e[l].v,a*=-1,o="px1",s="px0"}for(f=_R(r,n),l=0;l<e.length;l++)u=e[l],!u.hidden&&(u[o]=f,u.startangle=n,n+=a*u.v/2,u.pxmid=_R(r,n),u.midangle=n,n+=a*u.v/2,f=_R(r,n),u.stopangle=n,u[s]=f,u.largeArc=u.v>t.vTotal/2?1:0,u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5),u.ring=1-i.hole,u.rInscribed=C5t(u,t))}function _R(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function FSe(e,t,r){var i=e._fullLayout,n=r.trace,a=n.texttemplate,o=n.textinfo;if(!a&&o&&o!=="none"){var s=o.split("+"),l=function(w){return s.indexOf(w)!==-1},u=l("label"),f=l("text"),c=l("value"),h=l("percent"),v=i.separators,p;if(p=u?[t.label]:[],f){var _=ys.getFirstFilled(n.text,t.pts);mSe(_)&&p.push(_)}c&&p.push(ys.formatPieValue(t.v,v)),h&&p.push(ys.formatPiePercent(t.v/r.vTotal,v)),t.text=p.join("<br>")}function T(w){return{label:w.label,value:w.v,valueLabel:ys.formatPieValue(w.v,i.separators),percent:w.v/r.vTotal,percentLabel:ys.formatPiePercent(w.v/r.vTotal,i.separators),color:w.color,text:w.text,customdata:Nc.castOption(n,w.i,"customdata")}}if(a){var g=Nc.castOption(n,t.i,"texttemplate");if(!g)t.text="";else{var A=T(t),b=ys.getFirstFilled(n.text,t.pts);(mSe(b)||b==="")&&(A.text=b),t.text=Nc.texttemplateString(g,A,e._fullLayout._d3locale,A,n._meta||{})}}}function qSe(e,t){var r=e.rotate*Math.PI/180,i=Math.cos(r),n=Math.sin(r),a=(t.left+t.right)/2,o=(t.top+t.bottom)/2;e.textX=a*i-o*n,e.textY=a*n+o*i,e.noCenter=!0}zSe.exports={plot:M5t,formatSliceLabel:FSe,transformInsideText:kSe,determineInsideTextFont:SSe,positionTitleOutside:RSe,prerenderTitles:ESe,layoutAreas:ISe,attachFxHandlers:MSe,computeTransform:qSe}});var NSe=ne((Qur,BSe)=>{"use strict";var OSe=Ai(),F5t=A2(),q5t=yh().resizeText;BSe.exports=function(t){var r=t._fullLayout._pielayer.selectAll(".trace");q5t(t,r,"pie"),r.each(function(i){var n=i[0],a=n.trace,o=OSe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){OSe.select(this).call(F5t,s,a,t)})})}});var VSe=ne(u3=>{"use strict";var USe=Zs();u3.name="pie";u3.plot=function(e,t,r,i){USe.plotBasePlot(u3.name,e,t,r,i)};u3.clean=function(e,t,r,i){USe.cleanBasePlot(u3.name,e,t,r,i)}});var GSe=ne((efr,HSe)=>{"use strict";HSe.exports={attributes:g_(),supplyDefaults:y_().supplyDefaults,supplyLayoutDefaults:cSe(),layoutAttributes:yR(),calc:l3().calc,crossTraceCalc:l3().crossTraceCalc,plot:bR().plot,style:NSe(),styleOne:A2(),moduleType:"trace",name:"pie",basePlotModule:VSe(),categories:["pie-like","pie","showLegend"],meta:{}}});var WSe=ne((tfr,YSe)=>{"use strict";YSe.exports=GSe()});var ZSe=ne(f3=>{"use strict";var XSe=Zs();f3.name="sunburst";f3.plot=function(e,t,r,i){XSe.plotBasePlot(f3.name,e,t,r,i)};f3.clean=function(e,t,r,i){XSe.cleanBasePlot(f3.name,e,t,r,i)}});var oH=ne((nfr,jSe)=>{"use strict";jSe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}});var uE=ne((ifr,JSe)=>{"use strict";var z5t=es(),O5t=Ba().hovertemplateAttrs,B5t=Ba().texttemplateAttrs,N5t=Ps(),U5t=fl().attributes,fy=g_(),KSe=oH(),lE=oa().extendFlat,V5t=hc().pattern;JSe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:lE({colors:{valType:"data_array",editType:"calc"},line:{color:lE({},fy.marker.line.color,{dflt:null}),width:lE({},fy.marker.line.width,{dflt:1}),editType:"calc"},pattern:V5t,editType:"calc"},N5t("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:fy.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:B5t({editType:"plot"},{keys:KSe.eventDataKeys.concat(["label","value"])}),hovertext:fy.hovertext,hoverinfo:lE({},z5t.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:O5t({},{keys:KSe.eventDataKeys}),textfont:fy.textfont,insidetextorientation:fy.insidetextorientation,insidetextfont:fy.insidetextfont,outsidetextfont:lE({},fy.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:fy.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:U5t({name:"sunburst",trace:!0,editType:"calc"})}});var sH=ne((afr,QSe)=>{"use strict";QSe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var rEe=ne((ofr,tEe)=>{"use strict";var $Se=Wt(),H5t=uE(),G5t=fl().defaults,Y5t=Fd().handleText,W5t=y_().handleMarkerDefaults,eEe=ul(),X5t=eEe.hasColorscale,Z5t=eEe.handleDefaults;tEe.exports=function(t,r,i,n){function a(h,v){return $Se.coerce(t,r,H5t,h,v)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),W5t(t,r,n,a);var u=r._hasColorscale=X5t(t,"marker","colors")||(t.marker||{}).coloraxis;u&&Z5t(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",u?1:.7);var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",$Se.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c="auto";Y5t(t,r,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),G5t(r,n,a),r._length=null}});var iEe=ne((sfr,nEe)=>{"use strict";var j5t=Wt(),K5t=sH();nEe.exports=function(t,r){function i(n,a){return j5t.coerce(t,r,K5t,n,a)}i("sunburstcolorway",r.colorway),i("extendsunburstcolors")}});var fE=ne((wR,aEe)=>{(function(e,t){typeof wR=="object"&&typeof aEe!="undefined"?t(wR):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(wR,function(e){"use strict";function t(Je,xe){return Je.parent===xe.parent?1:2}function r(Je){return Je.reduce(i,0)/Je.length}function i(Je,xe){return Je+xe.x}function n(Je){return 1+Je.reduce(a,0)}function a(Je,xe){return Math.max(Je,xe.y)}function o(Je){for(var xe;xe=Je.children;)Je=xe[0];return Je}function s(Je){for(var xe;xe=Je.children;)Je=xe[xe.length-1];return Je}function l(){var Je=t,xe=1,ce=1,ge=!1;function qe(yt){var Vt,Ut=0;yt.eachAfter(function(gr){var Ur=gr.children;Ur?(gr.x=r(Ur),gr.y=n(Ur)):(gr.x=Vt?Ut+=Je(gr,Vt):0,gr.y=0,Vt=gr)});var br=o(yt),xr=s(yt),Or=br.x-Je(br,xr)/2,Hr=xr.x+Je(xr,br)/2;return yt.eachAfter(ge?function(gr){gr.x=(gr.x-yt.x)*xe,gr.y=(yt.y-gr.y)*ce}:function(gr){gr.x=(gr.x-Or)/(Hr-Or)*xe,gr.y=(1-(yt.y?gr.y/yt.y:1))*ce})}return qe.separation=function(yt){return arguments.length?(Je=yt,qe):Je},qe.size=function(yt){return arguments.length?(ge=!1,xe=+yt[0],ce=+yt[1],qe):ge?null:[xe,ce]},qe.nodeSize=function(yt){return arguments.length?(ge=!0,xe=+yt[0],ce=+yt[1],qe):ge?[xe,ce]:null},qe}function u(Je){var xe=0,ce=Je.children,ge=ce&&ce.length;if(!ge)xe=1;else for(;--ge>=0;)xe+=ce[ge].value;Je.value=xe}function f(){return this.eachAfter(u)}function c(Je){var xe=this,ce,ge=[xe],qe,yt,Vt;do for(ce=ge.reverse(),ge=[];xe=ce.pop();)if(Je(xe),qe=xe.children,qe)for(yt=0,Vt=qe.length;yt<Vt;++yt)ge.push(qe[yt]);while(ge.length);return this}function h(Je){for(var xe=this,ce=[xe],ge,qe;xe=ce.pop();)if(Je(xe),ge=xe.children,ge)for(qe=ge.length-1;qe>=0;--qe)ce.push(ge[qe]);return this}function v(Je){for(var xe=this,ce=[xe],ge=[],qe,yt,Vt;xe=ce.pop();)if(ge.push(xe),qe=xe.children,qe)for(yt=0,Vt=qe.length;yt<Vt;++yt)ce.push(qe[yt]);for(;xe=ge.pop();)Je(xe);return this}function p(Je){return this.eachAfter(function(xe){for(var ce=+Je(xe.data)||0,ge=xe.children,qe=ge&&ge.length;--qe>=0;)ce+=ge[qe].value;xe.value=ce})}function _(Je){return this.eachBefore(function(xe){xe.children&&xe.children.sort(Je)})}function T(Je){for(var xe=this,ce=g(xe,Je),ge=[xe];xe!==ce;)xe=xe.parent,ge.push(xe);for(var qe=ge.length;Je!==ce;)ge.splice(qe,0,Je),Je=Je.parent;return ge}function g(Je,xe){if(Je===xe)return Je;var ce=Je.ancestors(),ge=xe.ancestors(),qe=null;for(Je=ce.pop(),xe=ge.pop();Je===xe;)qe=Je,Je=ce.pop(),xe=ge.pop();return qe}function A(){for(var Je=this,xe=[Je];Je=Je.parent;)xe.push(Je);return xe}function b(){var Je=[];return this.each(function(xe){Je.push(xe)}),Je}function w(){var Je=[];return this.eachBefore(function(xe){xe.children||Je.push(xe)}),Je}function k(){var Je=this,xe=[];return Je.each(function(ce){ce!==Je&&xe.push({source:ce.parent,target:ce})}),xe}function x(Je,xe){var ce=new S(Je),ge=+Je.value&&(ce.value=Je.value),qe,yt=[ce],Vt,Ut,br,xr;for(xe==null&&(xe=M);qe=yt.pop();)if(ge&&(qe.value=+qe.data.value),(Ut=xe(qe.data))&&(xr=Ut.length))for(qe.children=new Array(xr),br=xr-1;br>=0;--br)yt.push(Vt=qe.children[br]=new S(Ut[br])),Vt.parent=qe,Vt.depth=qe.depth+1;return ce.eachBefore(C)}function E(){return x(this).eachBefore(d)}function M(Je){return Je.children}function d(Je){Je.data=Je.data.data}function C(Je){var xe=0;do Je.height=xe;while((Je=Je.parent)&&Je.height<++xe)}function S(Je){this.data=Je,this.depth=this.height=0,this.parent=null}S.prototype=x.prototype={constructor:S,count:f,each:c,eachAfter:v,eachBefore:h,sum:p,sort:_,path:T,ancestors:A,descendants:b,leaves:w,links:k,copy:E};var P=Array.prototype.slice;function D(Je){for(var xe=Je.length,ce,ge;xe;)ge=Math.random()*xe--|0,ce=Je[xe],Je[xe]=Je[ge],Je[ge]=ce;return Je}function z(Je){for(var xe=0,ce=(Je=D(P.call(Je))).length,ge=[],qe,yt;xe<ce;)qe=Je[xe],yt&&B(yt,qe)?++xe:(yt=N(ge=O(ge,qe)),xe=0);return yt}function O(Je,xe){var ce,ge;if(F(xe,Je))return[xe];for(ce=0;ce<Je.length;++ce)if(V(xe,Je[ce])&&F(J(Je[ce],xe),Je))return[Je[ce],xe];for(ce=0;ce<Je.length-1;++ce)for(ge=ce+1;ge<Je.length;++ge)if(V(J(Je[ce],Je[ge]),xe)&&V(J(Je[ce],xe),Je[ge])&&V(J(Je[ge],xe),Je[ce])&&F(re(Je[ce],Je[ge],xe),Je))return[Je[ce],Je[ge],xe];throw new Error}function V(Je,xe){var ce=Je.r-xe.r,ge=xe.x-Je.x,qe=xe.y-Je.y;return ce<0||ce*ce<ge*ge+qe*qe}function B(Je,xe){var ce=Je.r-xe.r+1e-6,ge=xe.x-Je.x,qe=xe.y-Je.y;return ce>0&&ce*ce>ge*ge+qe*qe}function F(Je,xe){for(var ce=0;ce<xe.length;++ce)if(!B(Je,xe[ce]))return!1;return!0}function N(Je){switch(Je.length){case 1:return Z(Je[0]);case 2:return J(Je[0],Je[1]);case 3:return re(Je[0],Je[1],Je[2])}}function Z(Je){return{x:Je.x,y:Je.y,r:Je.r}}function J(Je,xe){var ce=Je.x,ge=Je.y,qe=Je.r,yt=xe.x,Vt=xe.y,Ut=xe.r,br=yt-ce,xr=Vt-ge,Or=Ut-qe,Hr=Math.sqrt(br*br+xr*xr);return{x:(ce+yt+br/Hr*Or)/2,y:(ge+Vt+xr/Hr*Or)/2,r:(Hr+qe+Ut)/2}}function re(Je,xe,ce){var ge=Je.x,qe=Je.y,yt=Je.r,Vt=xe.x,Ut=xe.y,br=xe.r,xr=ce.x,Or=ce.y,Hr=ce.r,gr=ge-Vt,Ur=ge-xr,_n=qe-Ut,si=qe-Or,xn=br-yt,ci=Hr-yt,Wi=ge*ge+qe*qe-yt*yt,oi=Wi-Vt*Vt-Ut*Ut+br*br,Zi=Wi-xr*xr-Or*Or+Hr*Hr,Ei=Ur*_n-gr*si,at=(_n*Zi-si*oi)/(Ei*2)-ge,Ne=(si*xn-_n*ci)/Ei,st=(Ur*oi-gr*Zi)/(Ei*2)-qe,mt=(gr*ci-Ur*xn)/Ei,Ot=Ne*Ne+mt*mt-1,tr=2*(yt+at*Ne+st*mt),pr=at*at+st*st-yt*yt,hr=-(Ot?(tr+Math.sqrt(tr*tr-4*Ot*pr))/(2*Ot):pr/tr);return{x:ge+at+Ne*hr,y:qe+st+mt*hr,r:hr}}function le(Je,xe,ce){var ge=Je.x-xe.x,qe,yt,Vt=Je.y-xe.y,Ut,br,xr=ge*ge+Vt*Vt;xr?(yt=xe.r+ce.r,yt*=yt,br=Je.r+ce.r,br*=br,yt>br?(qe=(xr+br-yt)/(2*xr),Ut=Math.sqrt(Math.max(0,br/xr-qe*qe)),ce.x=Je.x-qe*ge-Ut*Vt,ce.y=Je.y-qe*Vt+Ut*ge):(qe=(xr+yt-br)/(2*xr),Ut=Math.sqrt(Math.max(0,yt/xr-qe*qe)),ce.x=xe.x+qe*ge-Ut*Vt,ce.y=xe.y+qe*Vt+Ut*ge)):(ce.x=xe.x+ce.r,ce.y=xe.y)}function fe(Je,xe){var ce=Je.r+xe.r-1e-6,ge=xe.x-Je.x,qe=xe.y-Je.y;return ce>0&&ce*ce>ge*ge+qe*qe}function K(Je){var xe=Je._,ce=Je.next._,ge=xe.r+ce.r,qe=(xe.x*ce.r+ce.x*xe.r)/ge,yt=(xe.y*ce.r+ce.y*xe.r)/ge;return qe*qe+yt*yt}function X(Je){this._=Je,this.next=null,this.previous=null}function ae(Je){if(!(qe=Je.length))return 0;var xe,ce,ge,qe,yt,Vt,Ut,br,xr,Or,Hr;if(xe=Je[0],xe.x=0,xe.y=0,!(qe>1))return xe.r;if(ce=Je[1],xe.x=-ce.r,ce.x=xe.r,ce.y=0,!(qe>2))return xe.r+ce.r;le(ce,xe,ge=Je[2]),xe=new X(xe),ce=new X(ce),ge=new X(ge),xe.next=ge.previous=ce,ce.next=xe.previous=ge,ge.next=ce.previous=xe;e:for(Ut=3;Ut<qe;++Ut){le(xe._,ce._,ge=Je[Ut]),ge=new X(ge),br=ce.next,xr=xe.previous,Or=ce._.r,Hr=xe._.r;do if(Or<=Hr){if(fe(br._,ge._)){ce=br,xe.next=ce,ce.previous=xe,--Ut;continue e}Or+=br._.r,br=br.next}else{if(fe(xr._,ge._)){xe=xr,xe.next=ce,ce.previous=xe,--Ut;continue e}Hr+=xr._.r,xr=xr.previous}while(br!==xr.next);for(ge.previous=xe,ge.next=ce,xe.next=ce.previous=ce=ge,yt=K(xe);(ge=ge.next)!==ce;)(Vt=K(ge))<yt&&(xe=ge,yt=Vt);ce=xe.next}for(xe=[ce._],ge=ce;(ge=ge.next)!==ce;)xe.push(ge._);for(ge=z(xe),Ut=0;Ut<qe;++Ut)xe=Je[Ut],xe.x-=ge.x,xe.y-=ge.y;return ge.r}function oe(Je){return ae(Je),Je}function _e(Je){return Je==null?null:be(Je)}function be(Je){if(typeof Je!="function")throw new Error;return Je}function he(){return 0}function ie(Je){return function(){return Je}}function ye(Je){return Math.sqrt(Je.value)}function ue(){var Je=null,xe=1,ce=1,ge=he;function qe(yt){return yt.x=xe/2,yt.y=ce/2,Je?yt.eachBefore(Ae(Je)).eachAfter(Re(ge,.5)).eachBefore(ze(1)):yt.eachBefore(Ae(ye)).eachAfter(Re(he,1)).eachAfter(Re(ge,yt.r/Math.min(xe,ce))).eachBefore(ze(Math.min(xe,ce)/(2*yt.r))),yt}return qe.radius=function(yt){return arguments.length?(Je=_e(yt),qe):Je},qe.size=function(yt){return arguments.length?(xe=+yt[0],ce=+yt[1],qe):[xe,ce]},qe.padding=function(yt){return arguments.length?(ge=typeof yt=="function"?yt:ie(+yt),qe):ge},qe}function Ae(Je){return function(xe){xe.children||(xe.r=Math.max(0,+Je(xe)||0))}}function Re(Je,xe){return function(ce){if(ge=ce.children){var ge,qe,yt=ge.length,Vt=Je(ce)*xe||0,Ut;if(Vt)for(qe=0;qe<yt;++qe)ge[qe].r+=Vt;if(Ut=ae(ge),Vt)for(qe=0;qe<yt;++qe)ge[qe].r-=Vt;ce.r=Ut+Vt}}}function ze(Je){return function(xe){var ce=xe.parent;xe.r*=Je,ce&&(xe.x=ce.x+Je*xe.x,xe.y=ce.y+Je*xe.y)}}function et(Je){Je.x0=Math.round(Je.x0),Je.y0=Math.round(Je.y0),Je.x1=Math.round(Je.x1),Je.y1=Math.round(Je.y1)}function Le(Je,xe,ce,ge,qe){for(var yt=Je.children,Vt,Ut=-1,br=yt.length,xr=Je.value&&(ge-xe)/Je.value;++Ut<br;)Vt=yt[Ut],Vt.y0=ce,Vt.y1=qe,Vt.x0=xe,Vt.x1=xe+=Vt.value*xr}function Ie(){var Je=1,xe=1,ce=0,ge=!1;function qe(Vt){var Ut=Vt.height+1;return Vt.x0=Vt.y0=ce,Vt.x1=Je,Vt.y1=xe/Ut,Vt.eachBefore(yt(xe,Ut)),ge&&Vt.eachBefore(et),Vt}function yt(Vt,Ut){return function(br){br.children&&Le(br,br.x0,Vt*(br.depth+1)/Ut,br.x1,Vt*(br.depth+2)/Ut);var xr=br.x0,Or=br.y0,Hr=br.x1-ce,gr=br.y1-ce;Hr<xr&&(xr=Hr=(xr+Hr)/2),gr<Or&&(Or=gr=(Or+gr)/2),br.x0=xr,br.y0=Or,br.x1=Hr,br.y1=gr}}return qe.round=function(Vt){return arguments.length?(ge=!!Vt,qe):ge},qe.size=function(Vt){return arguments.length?(Je=+Vt[0],xe=+Vt[1],qe):[Je,xe]},qe.padding=function(Vt){return arguments.length?(ce=+Vt,qe):ce},qe}var dt="$",ct={depth:-1},Ke={};function _t(Je){return Je.id}function zt(Je){return Je.parentId}function Et(){var Je=_t,xe=zt;function ce(ge){var qe,yt,Vt=ge.length,Ut,br,xr,Or=new Array(Vt),Hr,gr,Ur={};for(yt=0;yt<Vt;++yt)qe=ge[yt],xr=Or[yt]=new S(qe),(Hr=Je(qe,yt,ge))!=null&&(Hr+="")&&(gr=dt+(xr.id=Hr),Ur[gr]=gr in Ur?Ke:xr);for(yt=0;yt<Vt;++yt)if(xr=Or[yt],Hr=xe(ge[yt],yt,ge),Hr==null||!(Hr+="")){if(Ut)throw new Error("multiple roots");Ut=xr}else{if(br=Ur[dt+Hr],!br)throw new Error("missing: "+Hr);if(br===Ke)throw new Error("ambiguous: "+Hr);br.children?br.children.push(xr):br.children=[xr],xr.parent=br}if(!Ut)throw new Error("no root");if(Ut.parent=ct,Ut.eachBefore(function(_n){_n.depth=_n.parent.depth+1,--Vt}).eachBefore(C),Ut.parent=null,Vt>0)throw new Error("cycle");return Ut}return ce.id=function(ge){return arguments.length?(Je=be(ge),ce):Je},ce.parentId=function(ge){return arguments.length?(xe=be(ge),ce):xe},ce}function Se(Je,xe){return Je.parent===xe.parent?1:2}function je(Je){var xe=Je.children;return xe?xe[0]:Je.t}function ht(Je){var xe=Je.children;return xe?xe[xe.length-1]:Je.t}function nt(Je,xe,ce){var ge=ce/(xe.i-Je.i);xe.c-=ge,xe.s+=ce,Je.c+=ge,xe.z+=ce,xe.m+=ce}function lt(Je){for(var xe=0,ce=0,ge=Je.children,qe=ge.length,yt;--qe>=0;)yt=ge[qe],yt.z+=xe,yt.m+=xe,xe+=yt.s+(ce+=yt.c)}function rt(Je,xe,ce){return Je.a.parent===xe.parent?Je.a:ce}function Xe(Je,xe){this._=Je,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=xe}Xe.prototype=Object.create(S.prototype);function ft(Je){for(var xe=new Xe(Je,0),ce,ge=[xe],qe,yt,Vt,Ut;ce=ge.pop();)if(yt=ce._.children)for(ce.children=new Array(Ut=yt.length),Vt=Ut-1;Vt>=0;--Vt)ge.push(qe=ce.children[Vt]=new Xe(yt[Vt],Vt)),qe.parent=ce;return(xe.parent=new Xe(null,0)).children=[xe],xe}function gt(){var Je=Se,xe=1,ce=1,ge=null;function qe(xr){var Or=ft(xr);if(Or.eachAfter(yt),Or.parent.m=-Or.z,Or.eachBefore(Vt),ge)xr.eachBefore(br);else{var Hr=xr,gr=xr,Ur=xr;xr.eachBefore(function(Wi){Wi.x<Hr.x&&(Hr=Wi),Wi.x>gr.x&&(gr=Wi),Wi.depth>Ur.depth&&(Ur=Wi)});var _n=Hr===gr?1:Je(Hr,gr)/2,si=_n-Hr.x,xn=xe/(gr.x+_n+si),ci=ce/(Ur.depth||1);xr.eachBefore(function(Wi){Wi.x=(Wi.x+si)*xn,Wi.y=Wi.depth*ci})}return xr}function yt(xr){var Or=xr.children,Hr=xr.parent.children,gr=xr.i?Hr[xr.i-1]:null;if(Or){lt(xr);var Ur=(Or[0].z+Or[Or.length-1].z)/2;gr?(xr.z=gr.z+Je(xr._,gr._),xr.m=xr.z-Ur):xr.z=Ur}else gr&&(xr.z=gr.z+Je(xr._,gr._));xr.parent.A=Ut(xr,gr,xr.parent.A||Hr[0])}function Vt(xr){xr._.x=xr.z+xr.parent.m,xr.m+=xr.parent.m}function Ut(xr,Or,Hr){if(Or){for(var gr=xr,Ur=xr,_n=Or,si=gr.parent.children[0],xn=gr.m,ci=Ur.m,Wi=_n.m,oi=si.m,Zi;_n=ht(_n),gr=je(gr),_n&&gr;)si=je(si),Ur=ht(Ur),Ur.a=xr,Zi=_n.z+Wi-gr.z-xn+Je(_n._,gr._),Zi>0&&(nt(rt(_n,xr,Hr),xr,Zi),xn+=Zi,ci+=Zi),Wi+=_n.m,xn+=gr.m,oi+=si.m,ci+=Ur.m;_n&&!ht(Ur)&&(Ur.t=_n,Ur.m+=Wi-ci),gr&&!je(si)&&(si.t=gr,si.m+=xn-oi,Hr=xr)}return Hr}function br(xr){xr.x*=xe,xr.y=xr.depth*ce}return qe.separation=function(xr){return arguments.length?(Je=xr,qe):Je},qe.size=function(xr){return arguments.length?(ge=!1,xe=+xr[0],ce=+xr[1],qe):ge?null:[xe,ce]},qe.nodeSize=function(xr){return arguments.length?(ge=!0,xe=+xr[0],ce=+xr[1],qe):ge?[xe,ce]:null},qe}function Qt(Je,xe,ce,ge,qe){for(var yt=Je.children,Vt,Ut=-1,br=yt.length,xr=Je.value&&(qe-ce)/Je.value;++Ut<br;)Vt=yt[Ut],Vt.x0=xe,Vt.x1=ge,Vt.y0=ce,Vt.y1=ce+=Vt.value*xr}var Jt=(1+Math.sqrt(5))/2;function fr(Je,xe,ce,ge,qe,yt){for(var Vt=[],Ut=xe.children,br,xr,Or=0,Hr=0,gr=Ut.length,Ur,_n,si=xe.value,xn,ci,Wi,oi,Zi,Ei,at;Or<gr;){Ur=qe-ce,_n=yt-ge;do xn=Ut[Hr++].value;while(!xn&&Hr<gr);for(ci=Wi=xn,Ei=Math.max(_n/Ur,Ur/_n)/(si*Je),at=xn*xn*Ei,Zi=Math.max(Wi/at,at/ci);Hr<gr;++Hr){if(xn+=xr=Ut[Hr].value,xr<ci&&(ci=xr),xr>Wi&&(Wi=xr),at=xn*xn*Ei,oi=Math.max(Wi/at,at/ci),oi>Zi){xn-=xr;break}Zi=oi}Vt.push(br={value:xn,dice:Ur<_n,children:Ut.slice(Or,Hr)}),br.dice?Le(br,ce,ge,qe,si?ge+=_n*xn/si:yt):Qt(br,ce,ge,si?ce+=Ur*xn/si:qe,yt),si-=xn,Or=Hr}return Vt}var nr=function Je(xe){function ce(ge,qe,yt,Vt,Ut){fr(xe,ge,qe,yt,Vt,Ut)}return ce.ratio=function(ge){return Je((ge=+ge)>1?ge:1)},ce}(Jt);function ur(){var Je=nr,xe=!1,ce=1,ge=1,qe=[0],yt=he,Vt=he,Ut=he,br=he,xr=he;function Or(gr){return gr.x0=gr.y0=0,gr.x1=ce,gr.y1=ge,gr.eachBefore(Hr),qe=[0],xe&&gr.eachBefore(et),gr}function Hr(gr){var Ur=qe[gr.depth],_n=gr.x0+Ur,si=gr.y0+Ur,xn=gr.x1-Ur,ci=gr.y1-Ur;xn<_n&&(_n=xn=(_n+xn)/2),ci<si&&(si=ci=(si+ci)/2),gr.x0=_n,gr.y0=si,gr.x1=xn,gr.y1=ci,gr.children&&(Ur=qe[gr.depth+1]=yt(gr)/2,_n+=xr(gr)-Ur,si+=Vt(gr)-Ur,xn-=Ut(gr)-Ur,ci-=br(gr)-Ur,xn<_n&&(_n=xn=(_n+xn)/2),ci<si&&(si=ci=(si+ci)/2),Je(gr,_n,si,xn,ci))}return Or.round=function(gr){return arguments.length?(xe=!!gr,Or):xe},Or.size=function(gr){return arguments.length?(ce=+gr[0],ge=+gr[1],Or):[ce,ge]},Or.tile=function(gr){return arguments.length?(Je=be(gr),Or):Je},Or.padding=function(gr){return arguments.length?Or.paddingInner(gr).paddingOuter(gr):Or.paddingInner()},Or.paddingInner=function(gr){return arguments.length?(yt=typeof gr=="function"?gr:ie(+gr),Or):yt},Or.paddingOuter=function(gr){return arguments.length?Or.paddingTop(gr).paddingRight(gr).paddingBottom(gr).paddingLeft(gr):Or.paddingTop()},Or.paddingTop=function(gr){return arguments.length?(Vt=typeof gr=="function"?gr:ie(+gr),Or):Vt},Or.paddingRight=function(gr){return arguments.length?(Ut=typeof gr=="function"?gr:ie(+gr),Or):Ut},Or.paddingBottom=function(gr){return arguments.length?(br=typeof gr=="function"?gr:ie(+gr),Or):br},Or.paddingLeft=function(gr){return arguments.length?(xr=typeof gr=="function"?gr:ie(+gr),Or):xr},Or}function qt(Je,xe,ce,ge,qe){var yt=Je.children,Vt,Ut=yt.length,br,xr=new Array(Ut+1);for(xr[0]=br=Vt=0;Vt<Ut;++Vt)xr[Vt+1]=br+=yt[Vt].value;Or(0,Ut,Je.value,xe,ce,ge,qe);function Or(Hr,gr,Ur,_n,si,xn,ci){if(Hr>=gr-1){var Wi=yt[Hr];Wi.x0=_n,Wi.y0=si,Wi.x1=xn,Wi.y1=ci;return}for(var oi=xr[Hr],Zi=Ur/2+oi,Ei=Hr+1,at=gr-1;Ei<at;){var Ne=Ei+at>>>1;xr[Ne]<Zi?Ei=Ne+1:at=Ne}Zi-xr[Ei-1]<xr[Ei]-Zi&&Hr+1<Ei&&--Ei;var st=xr[Ei]-oi,mt=Ur-st;if(xn-_n>ci-si){var Ot=(_n*mt+xn*st)/Ur;Or(Hr,Ei,st,_n,si,Ot,ci),Or(Ei,gr,mt,Ot,si,xn,ci)}else{var tr=(si*mt+ci*st)/Ur;Or(Hr,Ei,st,_n,si,xn,tr),Or(Ei,gr,mt,_n,tr,xn,ci)}}}function xt(Je,xe,ce,ge,qe){(Je.depth&1?Qt:Le)(Je,xe,ce,ge,qe)}var At=function Je(xe){function ce(ge,qe,yt,Vt,Ut){if((br=ge._squarify)&&br.ratio===xe)for(var br,xr,Or,Hr,gr=-1,Ur,_n=br.length,si=ge.value;++gr<_n;){for(xr=br[gr],Or=xr.children,Hr=xr.value=0,Ur=Or.length;Hr<Ur;++Hr)xr.value+=Or[Hr].value;xr.dice?Le(xr,qe,yt,Vt,yt+=(Ut-yt)*xr.value/si):Qt(xr,qe,yt,qe+=(Vt-qe)*xr.value/si,Ut),si-=xr.value}else ge._squarify=br=fr(xe,ge,qe,yt,Vt,Ut),br.ratio=xe}return ce.ratio=function(ge){return Je((ge=+ge)>1?ge:1)},ce}(Jt);e.cluster=l,e.hierarchy=x,e.pack=ue,e.packEnclose=z,e.packSiblings=oe,e.partition=Ie,e.stratify=Et,e.tree=gt,e.treemap=ur,e.treemapBinary=qt,e.treemapDice=Le,e.treemapResquarify=At,e.treemapSlice=Qt,e.treemapSliceDice=xt,e.treemapSquarify=nr,Object.defineProperty(e,"__esModule",{value:!0})})});var hE=ne(cE=>{"use strict";var oEe=fE(),J5t=la(),c3=Wt(),Q5t=ul().makeColorScaleFuncFromTrace,$5t=l3().makePullColorFn,ekt=l3().generateExtendedColors,tkt=ul().calc,rkt=$a().ALMOST_EQUAL,nkt={},ikt={},akt={};cE.calc=function(e,t){var r=e._fullLayout,i=t.ids,n=c3.isArrayOrTypedArray(i),a=t.labels,o=t.parents,s=t.values,l=c3.isArrayOrTypedArray(s),u=[],f={},c={},h=function(B,F){f[B]?f[B].push(F):f[B]=[F],c[F]=1},v=function(B){return B||typeof B=="number"},p=function(B){return!l||J5t(s[B])&&s[B]>=0},_,T,g;n?(_=Math.min(i.length,o.length),T=function(B){return v(i[B])&&p(B)},g=function(B){return String(i[B])}):(_=Math.min(a.length,o.length),T=function(B){return v(a[B])&&p(B)},g=function(B){return String(a[B])}),l&&(_=Math.min(_,s.length));for(var A=0;A<_;A++)if(T(A)){var b=g(A),w=v(o[A])?String(o[A]):"",k={i:A,id:b,pid:w,label:v(a[A])?String(a[A]):""};l&&(k.v=+s[A]),u.push(k),h(w,b)}if(f[""]){if(f[""].length>1){for(var M=c3.randstr(),d=0;d<u.length;d++)u[d].pid===""&&(u[d].pid=M);u.unshift({hasMultipleRoots:!0,id:M,pid:"",label:""})}}else{var x=[],E;for(E in f)c[E]||x.push(E);if(x.length===1)E=x[0],u.unshift({hasImpliedRoot:!0,id:E,pid:"",label:E});else return c3.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",x.join(", ")].join(" "))}var C;try{C=oEe.stratify().id(function(B){return B.id}).parentId(function(B){return B.pid})(u)}catch(B){return c3.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",B.message].join(" "))}var S=oEe.hierarchy(C),P=!1;if(l)switch(t.branchvalues){case"remainder":S.sum(function(B){return B.data.v});break;case"total":S.each(function(B){var F=B.data.data,N=F.v;if(B.children){var Z=B.children.reduce(function(J,re){return J+re.data.data.v},0);if((F.hasImpliedRoot||F.hasMultipleRoots)&&(N=Z),N<Z*rkt)return P=!0,c3.warn(["Total value for node",B.data.data.id,"of",t.name,"is smaller than the sum of its children.",`
parent value =`,N,`
children sum =`,Z].join(" "))}B.value=N});break}else sEe(S,t,{branches:t.count.indexOf("branches")!==-1,leaves:t.count.indexOf("leaves")!==-1});if(!P){t.sort&&S.sort(function(B,F){return F.value-B.value});var D,z,O=t.marker.colors||[],V=!!O.length;return t._hasColorscale?(V||(O=l?t.values:t._values),tkt(e,t,{vals:O,containerStr:"marker",cLetter:"c"}),z=Q5t(t.marker)):D=$5t(r["_"+t.type+"colormap"]),S.each(function(B){var F=B.data.data;F.color=t._hasColorscale?z(O[F.i]):D(O[F.i],F.id)}),u[0].hierarchy=S,u}};cE._runCrossTraceCalc=function(e,t){var r=t._fullLayout,i=t.calcdata,n=r[e+"colorway"],a=r["_"+e+"colormap"];r["extend"+e+"colors"]&&(n=ekt(n,e==="icicle"?akt:e==="treemap"?ikt:nkt));var o=0,s;function l(h){var v=h.data.data,p=v.id;v.color===!1&&(a[p]?v.color=a[p]:h.parent?h.parent.parent?v.color=h.parent.data.data.color:(a[p]=v.color=n[o%n.length],o++):v.color=s)}for(var u=0;u<i.length;u++){var f=i[u],c=f[0];c.trace.type===e&&c.hierarchy&&(s=c.trace.root.color,c.hierarchy.each(l))}};cE.crossTraceCalc=function(e){return cE._runCrossTraceCalc("sunburst",e)};function sEe(e,t,r){var i=0,n=e.children;if(n){for(var a=n.length,o=0;o<a;o++)i+=sEe(n[o],t,r);r.branches&&i++}else r.leaves&&i++;return e.value=e.data.data.value=i,t._values||(t._values=[]),t._values[e.data.data.i]=i,i}});function cy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function jm(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}var TR=Bs(()=>{});function lg(){}function uEe(){return this.rgb().formatHex()}function vkt(){return this.rgb().formatHex8()}function dkt(){return gEe(this).formatHsl()}function fEe(){return this.rgb().formatRgb()}function Jm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=okt.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cEe(t):r===3?new nc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?AR(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?AR(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=skt.exec(e))?new nc(t[1],t[2],t[3],1):(t=lkt.exec(e))?new nc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ukt.exec(e))?AR(t[1],t[2],t[3],t[4]):(t=fkt.exec(e))?AR(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ckt.exec(e))?dEe(t[1],t[2]/100,t[3]/100,1):(t=hkt.exec(e))?dEe(t[1],t[2]/100,t[3]/100,t[4]):lEe.hasOwnProperty(e)?cEe(lEe[e]):e==="transparent"?new nc(NaN,NaN,NaN,0):null}function cEe(e){return new nc(e>>16&255,e>>8&255,e&255,1)}function AR(e,t,r,i){return i<=0&&(e=t=r=NaN),new nc(e,t,r,i)}function dE(e){return e instanceof lg||(e=Jm(e)),e?(e=e.rgb(),new nc(e.r,e.g,e.b,e.opacity)):new nc}function v3(e,t,r,i){return arguments.length===1?dE(e):new nc(e,t,r,i==null?1:i)}function nc(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function hEe(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}`}function pkt(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}${m_((isNaN(this.opacity)?1:this.opacity)*255)}`}function vEe(){let e=SR(this.opacity);return`${e===1?"rgb(":"rgba("}${x_(this.r)}, ${x_(this.g)}, ${x_(this.b)}${e===1?")":`, ${e})`}`}function SR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function x_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function m_(e){return e=x_(e),(e<16?"0":"")+e.toString(16)}function dEe(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new A0(e,t,r,i)}function gEe(e){if(e instanceof A0)return new A0(e.h,e.s,e.l,e.opacity);if(e instanceof lg||(e=Jm(e)),!e)return new A0;if(e instanceof A0)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=NaN,s=a-n,l=(a+n)/2;return s?(t===a?o=(r-i)/s+(r<i)*6:r===a?o=(i-t)/s+2:o=(t-r)/s+4,s/=l<.5?a+n:2-a-n,o*=60):s=l>0&&l<1?0:o,new A0(o,s,l,e.opacity)}function pE(e,t,r,i){return arguments.length===1?gEe(e):new A0(e,t,r,i==null?1:i)}function A0(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function pEe(e){return e=(e||0)%360,e<0?e+360:e}function MR(e){return Math.max(0,Math.min(1,e||0))}function lH(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Km,__,h3,vE,sg,okt,skt,lkt,ukt,fkt,ckt,hkt,lEe,ER=Bs(()=>{TR();Km=.7,__=1/Km,h3="\\s*([+-]?\\d+)\\s*",vE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",okt=/^#([0-9a-f]{3,8})$/,skt=new RegExp(`^rgb\\(${h3},${h3},${h3}\\)$`),lkt=new RegExp(`^rgb\\(${sg},${sg},${sg}\\)$`),ukt=new RegExp(`^rgba\\(${h3},${h3},${h3},${vE}\\)$`),fkt=new RegExp(`^rgba\\(${sg},${sg},${sg},${vE}\\)$`),ckt=new RegExp(`^hsl\\(${vE},${sg},${sg}\\)$`),hkt=new RegExp(`^hsla\\(${vE},${sg},${sg},${vE}\\)$`),lEe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cy(lg,Jm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uEe,formatHex:uEe,formatHex8:vkt,formatHsl:dkt,formatRgb:fEe,toString:fEe});cy(nc,v3,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nc(x_(this.r),x_(this.g),x_(this.b),SR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hEe,formatHex:hEe,formatHex8:pkt,formatRgb:vEe,toString:vEe}));cy(A0,pE,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new A0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new A0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new nc(lH(e>=240?e-240:e+120,n,i),lH(e,n,i),lH(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new A0(pEe(this.h),MR(this.s),MR(this.l),SR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=SR(this.opacity);return`${e===1?"hsl(":"hsla("}${pEe(this.h)}, ${MR(this.s)*100}%, ${MR(this.l)*100}%${e===1?")":`, ${e})`}`}}))});var kR,CR,uH=Bs(()=>{kR=Math.PI/180,CR=180/Math.PI});function wEe(e){if(e instanceof ug)return new ug(e.l,e.a,e.b,e.opacity);if(e instanceof hy)return TEe(e);e instanceof nc||(e=dE(e));var t=vH(e.r),r=vH(e.g),i=vH(e.b),n=fH((.2225045*t+.7168786*r+.0606169*i)/mEe),a,o;return t===r&&r===i?a=o=n:(a=fH((.4360747*t+.3850649*r+.1430804*i)/yEe),o=fH((.0139322*t+.0971045*r+.7141733*i)/xEe)),new ug(116*n-16,500*(a-n),200*(n-o),e.opacity)}function p3(e,t,r,i){return arguments.length===1?wEe(e):new ug(e,t,r,i==null?1:i)}function ug(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}function fH(e){return e>gkt?Math.pow(e,1/3):e/bEe+_Ee}function cH(e){return e>d3?e*e*e:bEe*(e-_Ee)}function hH(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function vH(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ykt(e){if(e instanceof hy)return new hy(e.h,e.c,e.l,e.opacity);if(e instanceof ug||(e=wEe(e)),e.a===0&&e.b===0)return new hy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*CR;return new hy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function gE(e,t,r,i){return arguments.length===1?ykt(e):new hy(e,t,r,i==null?1:i)}function hy(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function TEe(e){if(isNaN(e.h))return new ug(e.l,0,0,e.opacity);var t=e.h*kR;return new ug(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}var LR,yEe,mEe,xEe,_Ee,d3,bEe,gkt,AEe=Bs(()=>{TR();ER();uH();LR=18,yEe=.96422,mEe=1,xEe=.82521,_Ee=4/29,d3=6/29,bEe=3*d3*d3,gkt=d3*d3*d3;cy(ug,p3,jm(lg,{brighter(e){return new ug(this.l+LR*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new ug(this.l-LR*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=yEe*cH(t),e=mEe*cH(e),r=xEe*cH(r),new nc(hH(3.1338561*t-1.6168667*e-.4906146*r),hH(-.9787684*t+1.9161415*e+.033454*r),hH(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));cy(hy,gE,jm(lg,{brighter(e){return new hy(this.h,this.c,this.l+LR*(e==null?1:e),this.opacity)},darker(e){return new hy(this.h,this.c,this.l-LR*(e==null?1:e),this.opacity)},rgb(){return TEe(this).rgb()}}))});function mkt(e){if(e instanceof b_)return new b_(e.h,e.s,e.l,e.opacity);e instanceof nc||(e=dE(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(EEe*i+MEe*t-SEe*r)/(EEe+MEe-SEe),a=i-n,o=(yE*(r-n)-pH*a)/PR,s=Math.sqrt(o*o+a*a)/(yE*n*(1-n)),l=s?Math.atan2(o,a)*CR-120:NaN;return new b_(l<0?l+360:l,s,n,e.opacity)}function g3(e,t,r,i){return arguments.length===1?mkt(e):new b_(e,t,r,i==null?1:i)}function b_(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}var kEe,dH,pH,PR,yE,MEe,SEe,EEe,CEe=Bs(()=>{TR();ER();uH();kEe=-.14861,dH=1.78277,pH=-.29227,PR=-.90649,yE=1.97294,MEe=yE*PR,SEe=yE*dH,EEe=dH*pH-PR*kEe;cy(b_,g3,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new b_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new b_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*kR,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new nc(255*(t+r*(kEe*i+dH*n)),255*(t+r*(pH*i+PR*n)),255*(t+r*(yE*i)),this.opacity)}}))});var w_=Bs(()=>{ER();AEe();CEe()});function gH(e,t,r,i,n){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*i+o*n)/6}function RR(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],o=i>0?e[i-1]:2*n-a,s=i<t-1?e[i+2]:2*a-n;return gH((r-i/t)*t,o,n,a,s)}}var DR=Bs(()=>{});function IR(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],s=e[(i+2)%t];return gH((r-i/t)*t,n,a,o,s)}}var yH=Bs(()=>{DR()});var y3,mH=Bs(()=>{y3=e=>()=>e});function LEe(e,t){return function(r){return e+r*t}}function xkt(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function Qm(e,t){var r=t-e;return r?LEe(e,r>180||r<-180?r-360*Math.round(r/360):r):y3(isNaN(e)?t:e)}function PEe(e){return(e=+e)==1?gu:function(t,r){return r-t?xkt(t,r,e):y3(isNaN(t)?r:t)}}function gu(e,t){var r=t-e;return r?LEe(e,r):y3(isNaN(e)?t:e)}var T_=Bs(()=>{mH()});function REe(e){return function(t){var r=t.length,i=new Array(r),n=new Array(r),a=new Array(r),o,s;for(o=0;o<r;++o)s=v3(t[o]),i[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return i=e(i),n=e(n),a=e(a),s.opacity=1,function(l){return s.r=i(l),s.g=n(l),s.b=a(l),s+""}}}var mE,DEe,IEe,xH=Bs(()=>{w_();DR();yH();T_();mE=function e(t){var r=PEe(t);function i(n,a){var o=r((n=v3(n)).r,(a=v3(a)).r),s=r(n.g,a.g),l=r(n.b,a.b),u=gu(n.opacity,a.opacity);return function(f){return n.r=o(f),n.g=s(f),n.b=l(f),n.opacity=u(f),n+""}}return i.gamma=e,i}(1);DEe=REe(RR),IEe=REe(IR)});function m3(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function FR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var qR=Bs(()=>{});function FEe(e,t){return(FR(t)?m3:_H)(e,t)}function _H(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),a=new Array(r),o;for(o=0;o<i;++o)n[o]=$m(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(s){for(o=0;o<i;++o)a[o]=n[o](s);return a}}var bH=Bs(()=>{xE();qR()});function zR(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}var wH=Bs(()=>{});function vd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var _E=Bs(()=>{});function OR(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=$m(e[n],t[n]):i[n]=t[n];return function(a){for(n in r)i[n]=r[n](a);return i}}var TH=Bs(()=>{xE()});function _kt(e){return function(){return e}}function bkt(e){return function(t){return e(t)+""}}function BR(e,t){var r=MH.lastIndex=AH.lastIndex=0,i,n,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=MH.exec(e))&&(n=AH.exec(t));)(a=n.index)>r&&(a=t.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:vd(i,n)})),r=AH.lastIndex;return r<t.length&&(a=t.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?bkt(l[0].x):_kt(t):(t=l.length,function(u){for(var f=0,c;f<t;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}var MH,AH,SH=Bs(()=>{_E();MH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,AH=new RegExp(MH.source,"g")});function $m(e,t){var r=typeof t,i;return t==null||r==="boolean"?y3(t):(r==="number"?vd:r==="string"?(i=Jm(t))?(t=i,mE):BR:t instanceof Jm?mE:t instanceof Date?zR:FR(t)?m3:Array.isArray(t)?_H:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OR:vd)(e,t)}var xE=Bs(()=>{w_();xH();bH();wH();_E();TH();SH();mH();qR()});function qEe(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var zEe=Bs(()=>{});function OEe(e,t){var r=Qm(+e,+t);return function(i){var n=r(i);return n-360*Math.floor(n/360)}}var BEe=Bs(()=>{T_()});function NEe(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var UEe=Bs(()=>{});function EH(e,t,r,i,n,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:n,translateY:a,rotate:Math.atan2(t,e)*VEe,skewX:Math.atan(l)*VEe,scaleX:o,scaleY:s}}var VEe,NR,HEe=Bs(()=>{VEe=180/Math.PI,NR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function GEe(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?NR:EH(t.a,t.b,t.c,t.d,t.e,t.f)}function YEe(e){return e==null?NR:(UR||(UR=document.createElementNS("http://www.w3.org/2000/svg","g")),UR.setAttribute("transform",e),(e=UR.transform.baseVal.consolidate())?(e=e.matrix,EH(e.a,e.b,e.c,e.d,e.e,e.f)):NR)}var UR,WEe=Bs(()=>{HEe()});function XEe(e,t,r,i){function n(u){return u.length?u.pop()+" ":""}function a(u,f,c,h,v,p){if(u!==c||f!==h){var _=v.push("translate(",null,t,null,r);p.push({i:_-4,x:vd(u,c)},{i:_-2,x:vd(f,h)})}else(c||h)&&v.push("translate("+c+t+h+r)}function o(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(n(c)+"rotate(",null,i)-2,x:vd(u,f)})):f&&c.push(n(c)+"rotate("+f+i)}function s(u,f,c,h){u!==f?h.push({i:c.push(n(c)+"skewX(",null,i)-2,x:vd(u,f)}):f&&c.push(n(c)+"skewX("+f+i)}function l(u,f,c,h,v,p){if(u!==c||f!==h){var _=v.push(n(v)+"scale(",null,",",null,")");p.push({i:_-4,x:vd(u,c)},{i:_-2,x:vd(f,h)})}else(c!==1||h!==1)&&v.push(n(v)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,c,h),o(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(v){for(var p=-1,_=h.length,T;++p<_;)c[(T=h[p]).i]=T.x(v);return c.join("")}}}var ZEe,jEe,KEe=Bs(()=>{_E();WEe();ZEe=XEe(GEe,"px, ","px)","deg)"),jEe=XEe(YEe,", ",")",")")});function JEe(e){return((e=Math.exp(e))+1/e)/2}function Tkt(e){return((e=Math.exp(e))-1/e)/2}function Akt(e){return((e=Math.exp(2*e))-1)/(e+1)}var wkt,QEe,$Ee=Bs(()=>{wkt=1e-12;QEe=function e(t,r,i){function n(a,o){var s=a[0],l=a[1],u=a[2],f=o[0],c=o[1],h=o[2],v=f-s,p=c-l,_=v*v+p*p,T,g;if(_<wkt)g=Math.log(h/u)/t,T=function(E){return[s+E*v,l+E*p,u*Math.exp(t*E*g)]};else{var A=Math.sqrt(_),b=(h*h-u*u+i*_)/(2*u*r*A),w=(h*h-u*u-i*_)/(2*h*r*A),k=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(w*w+1)-w);g=(x-k)/t,T=function(E){var M=E*g,d=JEe(k),C=u/(r*A)*(d*Akt(t*M+k)-Tkt(k));return[s+C*v,l+C*p,u*d/JEe(t*M+k)]}}return T.duration=g*1e3*t/Math.SQRT2,T}return n.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return e(o,s,l)},n}(Math.SQRT2,2,4)});function e5e(e){return function(t,r){var i=e((t=pE(t)).h,(r=pE(r)).h),n=gu(t.s,r.s),a=gu(t.l,r.l),o=gu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.s=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var t5e,r5e,n5e=Bs(()=>{w_();T_();t5e=e5e(Qm),r5e=e5e(gu)});function kH(e,t){var r=gu((e=p3(e)).l,(t=p3(t)).l),i=gu(e.a,t.a),n=gu(e.b,t.b),a=gu(e.opacity,t.opacity);return function(o){return e.l=r(o),e.a=i(o),e.b=n(o),e.opacity=a(o),e+""}}var i5e=Bs(()=>{w_();T_()});function a5e(e){return function(t,r){var i=e((t=gE(t)).h,(r=gE(r)).h),n=gu(t.c,r.c),a=gu(t.l,r.l),o=gu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.c=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var o5e,s5e,l5e=Bs(()=>{w_();T_();o5e=a5e(Qm),s5e=a5e(gu)});function u5e(e){return function t(r){r=+r;function i(n,a){var o=e((n=g3(n)).h,(a=g3(a)).h),s=gu(n.s,a.s),l=gu(n.l,a.l),u=gu(n.opacity,a.opacity);return function(f){return n.h=o(f),n.s=s(f),n.l=l(Math.pow(f,r)),n.opacity=u(f),n+""}}return i.gamma=t,i}(1)}var f5e,c5e,h5e=Bs(()=>{w_();T_();f5e=u5e(Qm),c5e=u5e(gu)});function CH(e,t){t===void 0&&(t=e,e=$m);for(var r=0,i=t.length-1,n=t[0],a=new Array(i<0?0:i);r<i;)a[r]=e(n,n=t[++r]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}var v5e=Bs(()=>{xE()});function d5e(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e(i/(t-1));return r}var p5e=Bs(()=>{});var A_={};OQe(A_,{interpolate:()=>$m,interpolateArray:()=>FEe,interpolateBasis:()=>RR,interpolateBasisClosed:()=>IR,interpolateCubehelix:()=>f5e,interpolateCubehelixLong:()=>c5e,interpolateDate:()=>zR,interpolateDiscrete:()=>qEe,interpolateHcl:()=>o5e,interpolateHclLong:()=>s5e,interpolateHsl:()=>t5e,interpolateHslLong:()=>r5e,interpolateHue:()=>OEe,interpolateLab:()=>kH,interpolateNumber:()=>vd,interpolateNumberArray:()=>m3,interpolateObject:()=>OR,interpolateRgb:()=>mE,interpolateRgbBasis:()=>DEe,interpolateRgbBasisClosed:()=>IEe,interpolateRound:()=>NEe,interpolateString:()=>BR,interpolateTransformCss:()=>ZEe,interpolateTransformSvg:()=>jEe,interpolateZoom:()=>QEe,piecewise:()=>CH,quantize:()=>d5e});var M_=Bs(()=>{xE();bH();DR();yH();wH();zEe();BEe();_E();qR();TH();UEe();SH();KEe();$Ee();xH();n5e();i5e();l5e();h5e();v5e();p5e()});var VR=ne((Jcr,g5e)=>{"use strict";var Mkt=aa(),Skt=_i();g5e.exports=function(t,r,i,n,a){var o=r.data.data,s=o.i,l=a||o.color;if(s>=0){r.i=o.i;var u=i.marker;u.pattern?(!u.colors||!u.pattern.shape)&&(u.color=l,r.color=l):(u.color=l,r.color=l),Mkt.pointStyle(t,i,n,r)}else Skt.fill(t,l)}});var LH=ne((Qcr,b5e)=>{"use strict";var y5e=Ai(),m5e=_i(),x5e=Wt(),Ekt=yh().resizeText,kkt=VR();function Ckt(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");Ekt(e,t,"sunburst"),t.each(function(r){var i=y5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){y5e.select(this).call(_5e,o,a,e)})})}function _5e(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=x5e.castOption(r,o,"marker.line.color")||m5e.defaultLine,l=x5e.castOption(r,o,"marker.line.width")||0;e.call(kkt,t,r,i).style("stroke-width",l).call(m5e.stroke,s).style("opacity",a?r.leaf.opacity:null)}b5e.exports={style:Ckt,styleOne:_5e}});var vy=ne(is=>{"use strict";var S_=Wt(),Lkt=_i(),Pkt=e0(),w5e=hm();is.findEntryWithLevel=function(e,t){var r;return t&&e.eachAfter(function(i){if(is.getPtId(i)===t)return r=i.copy()}),r||e};is.findEntryWithChild=function(e,t){var r;return e.eachAfter(function(i){for(var n=i.children||[],a=0;a<n.length;a++){var o=n[a];if(is.getPtId(o)===t)return r=i.copy()}}),r||e};is.isEntry=function(e){return!e.parent};is.isLeaf=function(e){return!e.children};is.getPtId=function(e){return e.data.data.id};is.getPtLabel=function(e){return e.data.data.label};is.getValue=function(e){return e.value};is.isHierarchyRoot=function(e){return T5e(e)===""};is.setSliceCursor=function(e,t,r){var i=r.isTransitioning;if(!i){var n=e.datum();i=r.hideOnRoot&&is.isHierarchyRoot(n)||r.hideOnLeaves&&is.isLeaf(n)}Pkt(e,i?null:"pointer")};function Rkt(e,t,r){return{color:is.getOutsideTextFontKey("color",e,t,r),family:is.getOutsideTextFontKey("family",e,t,r),size:is.getOutsideTextFontKey("size",e,t,r)}}function Dkt(e,t,r,i){var n=(i||{}).onPathbar,a=t.data.data,o=a.i,s=S_.castOption(e,o,(n?"pathbar.textfont":"insidetextfont")+".color");return!s&&e._input.textfont&&(s=S_.castOption(e._input,o,"textfont.color")),{color:s||Lkt.contrast(a.color),family:is.getInsideTextFontKey("family",e,t,r,i),size:is.getInsideTextFontKey("size",e,t,r,i)}}is.getInsideTextFontKey=function(e,t,r,i,n){var a=(n||{}).onPathbar,o=a?"pathbar.textfont":"insidetextfont",s=r.data.data.i;return S_.castOption(t,s,o+"."+e)||S_.castOption(t,s,"textfont."+e)||i.size};is.getOutsideTextFontKey=function(e,t,r,i){var n=r.data.data.i;return S_.castOption(t,n,"outsidetextfont."+e)||S_.castOption(t,n,"textfont."+e)||i.size};is.isOutsideText=function(e,t){return!e._hasColorscale&&is.isHierarchyRoot(t)};is.determineTextFont=function(e,t,r,i){return is.isOutsideText(e,t)?Rkt(e,t,r):Dkt(e,t,r,i)};is.hasTransition=function(e){return!!(e&&e.duration>0)};is.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0};is.isHeader=function(e,t){return!(is.isLeaf(e)||e.depth===t._maxDepth-1)};function T5e(e){return e.data.data.pid}is.getParent=function(e,t){return is.findEntryWithLevel(e,T5e(t))};is.listPath=function(e,t){var r=e.parent;if(!r)return[];var i=t?[r.data[t]]:[r];return is.listPath(r,t).concat(i)};is.getPath=function(e){return is.listPath(e,"label").join("/")+"/"};is.formatValue=w5e.formatPieValue;is.formatPercent=function(e,t){var r=S_.formatPercent(e,0);return r==="0%"&&(r=w5e.formatPiePercent(e,t)),r}});var TE=ne((ehr,S5e)=>{"use strict";var x3=Ai(),A5e=wi(),Ikt=td().appendArrayPointValue,bE=Ol(),M5e=Wt(),Fkt=l2(),kf=vy(),qkt=hm(),zkt=qkt.formatPieValue;S5e.exports=function(t,r,i,n,a){var o=n[0],s=o.trace,l=o.hierarchy,u=s.type==="sunburst",f=s.type==="treemap"||s.type==="icicle";"_hasHoverLabel"in s||(s._hasHoverLabel=!1),"_hasHoverEvent"in s||(s._hasHoverEvent=!1);var c=function(p){var _=i._fullLayout;if(!(i._dragging||_.hovermode===!1)){var T=i._fullData[s.index],g=p.data.data,A=g.i,b=kf.isHierarchyRoot(p),w=kf.getParent(l,p),k=kf.getValue(p),x=function(le){return M5e.castOption(T,A,le)},E=x("hovertemplate"),M=bE.castHoverinfo(T,_,A),d=_.separators,C;if(E||M&&M!=="none"&&M!=="skip"){var S,P;u&&(S=o.cx+p.pxmid[0]*(1-p.rInscribed),P=o.cy+p.pxmid[1]*(1-p.rInscribed)),f&&(S=p._hoverX,P=p._hoverY);var D={},z=[],O=[],V=function(le){return z.indexOf(le)!==-1};M&&(z=M==="all"?T._module.attributes.hoverinfo.flags:M.split("+")),D.label=g.label,V("label")&&D.label&&O.push(D.label),g.hasOwnProperty("v")&&(D.value=g.v,D.valueLabel=zkt(D.value,d),V("value")&&O.push(D.valueLabel)),D.currentPath=p.currentPath=kf.getPath(p.data),V("current path")&&!b&&O.push(D.currentPath);var B,F=[],N=function(){F.indexOf(B)===-1&&(O.push(B),F.push(B))};D.percentParent=p.percentParent=k/kf.getValue(w),D.parent=p.parentString=kf.getPtLabel(w),V("percent parent")&&(B=kf.formatPercent(D.percentParent,d)+" of "+D.parent,N()),D.percentEntry=p.percentEntry=k/kf.getValue(r),D.entry=p.entry=kf.getPtLabel(r),V("percent entry")&&!b&&!p.onPathbar&&(B=kf.formatPercent(D.percentEntry,d)+" of "+D.entry,N()),D.percentRoot=p.percentRoot=k/kf.getValue(l),D.root=p.root=kf.getPtLabel(l),V("percent root")&&!b&&(B=kf.formatPercent(D.percentRoot,d)+" of "+D.root,N()),D.text=x("hovertext")||x("text"),V("text")&&(B=D.text,M5e.isValidTextValue(B)&&O.push(B)),C=[wE(p,T,a.eventDataKeys)];var Z={trace:T,y:P,_x0:p._x0,_x1:p._x1,_y0:p._y0,_y1:p._y1,text:O.join("<br>"),name:E||V("name")?T.name:void 0,color:x("hoverlabel.bgcolor")||g.color,borderColor:x("hoverlabel.bordercolor"),fontFamily:x("hoverlabel.font.family"),fontSize:x("hoverlabel.font.size"),fontColor:x("hoverlabel.font.color"),nameLength:x("hoverlabel.namelength"),textAlign:x("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:D,eventData:C};u&&(Z.x0=S-p.rInscribed*p.rpx1,Z.x1=S+p.rInscribed*p.rpx1,Z.idealAlign=p.pxmid[0]<0?"left":"right"),f&&(Z.x=S,Z.idealAlign=S<0?"left":"right");var J=[];bE.loneHover(Z,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:i,inOut_bbox:J}),C[0].bbox=J[0],s._hasHoverLabel=!0}if(f){var re=t.select("path.surface");a.styleOne(re,p,T,i,{hovered:!0})}s._hasHoverEvent=!0,i.emit("plotly_hover",{points:C||[wE(p,T,a.eventDataKeys)],event:x3.event})}},h=function(p){var _=i._fullLayout,T=i._fullData[s.index],g=x3.select(this).datum();if(s._hasHoverEvent&&(p.originalEvent=x3.event,i.emit("plotly_unhover",{points:[wE(g,T,a.eventDataKeys)],event:x3.event}),s._hasHoverEvent=!1),s._hasHoverLabel&&(bE.loneUnhover(_._hoverlayer.node()),s._hasHoverLabel=!1),f){var A=t.select("path.surface");a.styleOne(A,g,T,i,{hovered:!1})}},v=function(p){var _=i._fullLayout,T=i._fullData[s.index],g=u&&(kf.isHierarchyRoot(p)||kf.isLeaf(p)),A=kf.getPtId(p),b=kf.isEntry(p)?kf.findEntryWithChild(l,A):kf.findEntryWithLevel(l,A),w=kf.getPtId(b),k={points:[wE(p,T,a.eventDataKeys)],event:x3.event};g||(k.nextLevel=w);var x=Fkt.triggerHandler(i,"plotly_"+s.type+"click",k);if(x!==!1&&_.hovermode&&(i._hoverdata=[wE(p,T,a.eventDataKeys)],bE.click(i,x3.event)),!g&&x!==!1&&!i._dragging&&!i._transitioning){A5e.call("_storeDirectGUIEdit",T,_._tracePreGUI[T.uid],{level:T.level});var E={data:[{level:w}],traces:[s.index]},M={frame:{redraw:!1,duration:a.transitionTime},transition:{duration:a.transitionTime,easing:a.transitionEasing},mode:"immediate",fromcurrent:!0};bE.loneUnhover(_._hoverlayer.node()),A5e.call("animate",i,E,M)}};t.on("mouseover",c),t.on("mouseout",h),t.on("click",v)};function wE(e,t,r){for(var i=e.data.data,n={curveNumber:t.index,pointNumber:i.i,data:t._input,fullData:t},a=0;a<r.length;a++){var o=r[a];o in e&&(n[o]=e[o])}return"parentString"in e&&!kf.isHierarchyRoot(e)&&(n.parent=e.parentString),Ikt(n,t,i.i),n}});var GR=ne(HR=>{"use strict";var AE=Ai(),Okt=fE(),M0=(M_(),Wb(A_)).interpolate,E5e=aa(),xh=Wt(),Bkt=Es(),P5e=yh(),k5e=P5e.recordMinTextSize,Nkt=P5e.clearMinTextSize,R5e=bR(),Ukt=hm().getRotationAngle,Vkt=R5e.computeTransform,Hkt=R5e.transformInsideText,Gkt=LH().styleOne,Ykt=_p().resizeText,Wkt=TE(),PH=oH(),Fo=vy();HR.plot=function(e,t,r,i){var n=e._fullLayout,a=n._sunburstlayer,o,s,l=!r,u=!n.uniformtext.mode&&Fo.hasTransition(r);if(Nkt("sunburst",n),o=a.selectAll("g.trace.sunburst").data(t,function(c){return c[0].trace.uid}),o.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),o.order(),u){i&&(s=i());var f=AE.transition().duration(r.duration).ease(r.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()});f.each(function(){a.selectAll("g.trace").each(function(c){C5e(e,c,this,r)})})}else o.each(function(c){C5e(e,c,this,r)}),n.uniformtext.mode&&Ykt(e,n._sunburstlayer.selectAll(".trace"),"sunburst");l&&o.exit().remove()};function C5e(e,t,r,i){var n=e._context.staticPlot,a=e._fullLayout,o=!a.uniformtext.mode&&Fo.hasTransition(i),s=AE.select(r),l=s.selectAll("g.slice"),u=t[0],f=u.trace,c=u.hierarchy,h=Fo.findEntryWithLevel(c,f.level),v=Fo.getMaxDepth(f),p=a._size,_=f.domain,T=p.w*(_.x[1]-_.x[0]),g=p.h*(_.y[1]-_.y[0]),A=.5*Math.min(T,g),b=u.cx=p.l+p.w*(_.x[1]+_.x[0])/2,w=u.cy=p.t+p.h*(1-_.y[0])-g/2;if(!h)return l.remove();var k=null,x={};o&&l.each(function(K){x[Fo.getPtId(K)]={rpx0:K.rpx0,rpx1:K.rpx1,x0:K.x0,x1:K.x1,transform:K.transform},!k&&Fo.isEntry(K)&&(k=K)});var E=Xkt(h).descendants(),M=h.height+1,d=0,C=v;u.hasMultipleRoots&&Fo.isHierarchyRoot(h)&&(E=E.slice(1),M-=1,d=1,C+=1),E=E.filter(function(K){return K.y1<=C});var S=Ukt(f.rotation);S&&E.forEach(function(K){K.x0+=S,K.x1+=S});var P=Math.min(M,v),D=function(K){return(K-d)/P*A},z=function(K,X){return[K*Math.cos(X),-K*Math.sin(X)]},O=function(K){return xh.pathAnnulus(K.rpx0,K.rpx1,K.x0,K.x1,b,w)},V=function(K){return b+L5e(K)[0]*(K.transform.rCenter||0)+(K.transform.x||0)},B=function(K){return w+L5e(K)[1]*(K.transform.rCenter||0)+(K.transform.y||0)};l=l.data(E,Fo.getPtId),l.enter().append("g").classed("slice",!0),o?l.exit().transition().each(function(){var K=AE.select(this),X=K.select("path.surface");X.transition().attrTween("d",function(oe){var _e=J(oe);return function(be){return O(_e(be))}});var ae=K.select("g.slicetext");ae.attr("opacity",0)}).remove():l.exit().remove(),l.order();var F=null;if(o&&k){var N=Fo.getPtId(k);l.each(function(K){F===null&&Fo.getPtId(K)===N&&(F=K.x1)})}var Z=l;o&&(Z=Z.transition().each("end",function(){var K=AE.select(this);Fo.setSliceCursor(K,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Z.each(function(K){var X=AE.select(this),ae=xh.ensureSingle(X,"path","surface",function(ye){ye.style("pointer-events",n?"none":"all")});K.rpx0=D(K.y0),K.rpx1=D(K.y1),K.xmid=(K.x0+K.x1)/2,K.pxmid=z(K.rpx1,K.xmid),K.midangle=-(K.xmid-Math.PI/2),K.startangle=-(K.x0-Math.PI/2),K.stopangle=-(K.x1-Math.PI/2),K.halfangle=.5*Math.min(xh.angleDelta(K.x0,K.x1)||Math.PI,Math.PI),K.ring=1-K.rpx0/K.rpx1,K.rInscribed=Zkt(K,f),o?ae.transition().attrTween("d",function(ye){var ue=re(ye);return function(Ae){return O(ue(Ae))}}):ae.attr("d",O),X.call(Wkt,h,e,t,{eventDataKeys:PH.eventDataKeys,transitionTime:PH.CLICK_TRANSITION_TIME,transitionEasing:PH.CLICK_TRANSITION_EASING}).call(Fo.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),ae.call(Gkt,K,f,e);var oe=xh.ensureSingle(X,"g","slicetext"),_e=xh.ensureSingle(oe,"text","",function(ye){ye.attr("data-notex",1)}),be=xh.ensureUniformFontSize(e,Fo.determineTextFont(f,K,a.font));_e.text(HR.formatSliceLabel(K,h,f,t,a)).classed("slicetext",!0).attr("text-anchor","middle").call(E5e.font,be).call(Bkt.convertToTspans,e);var he=E5e.bBox(_e.node());K.transform=Hkt(he,K,u),K.transform.targetX=V(K),K.transform.targetY=B(K);var ie=function(ye,ue){var Ae=ye.transform;return Vkt(Ae,ue),Ae.fontSize=be.size,k5e(f.type,Ae,a),xh.getTextTransform(Ae)};o?_e.transition().attrTween("transform",function(ye){var ue=le(ye);return function(Ae){return ie(ue(Ae),he)}}):_e.attr("transform",ie(K,he))});function J(K){var X=Fo.getPtId(K),ae=x[X],oe=x[Fo.getPtId(h)],_e;if(oe){var be=(K.x1>oe.x1?2*Math.PI:0)+S;_e=K.rpx1<oe.rpx1?{x0:K.x0,x1:K.x1,rpx0:0,rpx1:0}:{x0:be,x1:be,rpx0:K.rpx0,rpx1:K.rpx1}}else{var he,ie=Fo.getPtId(K.parent);l.each(function(ze){if(Fo.getPtId(ze)===ie)return he=ze});var ye=he.children,ue;ye.forEach(function(ze,et){if(Fo.getPtId(ze)===X)return ue=et});var Ae=ye.length,Re=M0(he.x0,he.x1);_e={rpx0:A,rpx1:A,x0:Re(ue/Ae),x1:Re((ue+1)/Ae)}}return M0(ae,_e)}function re(K){var X=x[Fo.getPtId(K)],ae,oe={x0:K.x0,x1:K.x1,rpx0:K.rpx0,rpx1:K.rpx1};if(X)ae=X;else if(k)if(K.parent)if(F){var _e=(K.x1>F?2*Math.PI:0)+S;ae={x0:_e,x1:_e}}else ae={rpx0:A,rpx1:A},xh.extendFlat(ae,fe(K));else ae={rpx0:0,rpx1:0};else ae={x0:S,x1:S};return M0(ae,oe)}function le(K){var X=x[Fo.getPtId(K)],ae,oe=K.transform;if(X)ae=X;else if(ae={rpx1:K.rpx1,transform:{textPosAngle:oe.textPosAngle,scale:0,rotate:oe.rotate,rCenter:oe.rCenter,x:oe.x,y:oe.y}},k)if(K.parent)if(F){var _e=K.x1>F?2*Math.PI:0;ae.x0=ae.x1=_e}else xh.extendFlat(ae,fe(K));else ae.x0=ae.x1=S;else ae.x0=ae.x1=S;var be=M0(ae.transform.textPosAngle,K.transform.textPosAngle),he=M0(ae.rpx1,K.rpx1),ie=M0(ae.x0,K.x0),ye=M0(ae.x1,K.x1),ue=M0(ae.transform.scale,oe.scale),Ae=M0(ae.transform.rotate,oe.rotate),Re=oe.rCenter===0?3:ae.transform.rCenter===0?1/3:1,ze=M0(ae.transform.rCenter,oe.rCenter),et=function(Le){return ze(Math.pow(Le,Re))};return function(Le){var Ie=he(Le),dt=ie(Le),ct=ye(Le),Ke=et(Le),_t=z(Ie,(dt+ct)/2),zt=be(Le),Et={pxmid:_t,rpx1:Ie,transform:{textPosAngle:zt,rCenter:Ke,x:oe.x,y:oe.y}};return k5e(f.type,oe,a),{transform:{targetX:V(Et),targetY:B(Et),scale:ue(Le),rotate:Ae(Le),rCenter:Ke}}}}function fe(K){var X=K.parent,ae=x[Fo.getPtId(X)],oe={};if(ae){var _e=X.children,be=_e.indexOf(K),he=_e.length,ie=M0(ae.x0,ae.x1);oe.x0=ie(be/he),oe.x1=ie(be/he)}else oe.x0=oe.x1=0;return oe}}function Xkt(e){return Okt.partition().size([2*Math.PI,e.height+1])(e)}HR.formatSliceLabel=function(e,t,r,i,n){var a=r.texttemplate,o=r.textinfo;if(!a&&(!o||o==="none"))return"";var s=n.separators,l=i[0],u=e.data.data,f=l.hierarchy,c=Fo.isHierarchyRoot(e),h=Fo.getParent(f,e),v=Fo.getValue(e);if(!a){var p=o.split("+"),_=function(d){return p.indexOf(d)!==-1},T=[],g;if(_("label")&&u.label&&T.push(u.label),u.hasOwnProperty("v")&&_("value")&&T.push(Fo.formatValue(u.v,s)),!c){_("current path")&&T.push(Fo.getPath(e.data));var A=0;_("percent parent")&&A++,_("percent entry")&&A++,_("percent root")&&A++;var b=A>1;if(A){var w,k=function(d){g=Fo.formatPercent(w,s),b&&(g+=" of "+d),T.push(g)};_("percent parent")&&!c&&(w=v/Fo.getValue(h),k("parent")),_("percent entry")&&(w=v/Fo.getValue(t),k("entry")),_("percent root")&&(w=v/Fo.getValue(f),k("root"))}}return _("text")&&(g=xh.castOption(r,u.i,"text"),xh.isValidTextValue(g)&&T.push(g)),T.join("<br>")}var x=xh.castOption(r,u.i,"texttemplate");if(!x)return"";var E={};u.label&&(E.label=u.label),u.hasOwnProperty("v")&&(E.value=u.v,E.valueLabel=Fo.formatValue(u.v,s)),E.currentPath=Fo.getPath(e.data),c||(E.percentParent=v/Fo.getValue(h),E.percentParentLabel=Fo.formatPercent(E.percentParent,s),E.parent=Fo.getPtLabel(h)),E.percentEntry=v/Fo.getValue(t),E.percentEntryLabel=Fo.formatPercent(E.percentEntry,s),E.entry=Fo.getPtLabel(t),E.percentRoot=v/Fo.getValue(f),E.percentRootLabel=Fo.formatPercent(E.percentRoot,s),E.root=Fo.getPtLabel(f),u.hasOwnProperty("color")&&(E.color=u.color);var M=xh.castOption(r,u.i,"text");return(xh.isValidTextValue(M)||M==="")&&(E.text=M),E.customdata=xh.castOption(r,u.i,"customdata"),xh.texttemplateString(x,E,n._d3locale,E,r._meta||{})};function Zkt(e){return e.rpx0===0&&xh.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}function L5e(e){return jkt(e.rpx1,e.transform.textPosAngle)}function jkt(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}});var I5e=ne((rhr,D5e)=>{"use strict";D5e.exports={moduleType:"trace",name:"sunburst",basePlotModule:ZSe(),categories:[],animatable:!0,attributes:uE(),layoutAttributes:sH(),supplyDefaults:rEe(),supplyLayoutDefaults:iEe(),calc:hE().calc,crossTraceCalc:hE().crossTraceCalc,plot:GR().plot,style:LH().style,colorbar:ph(),meta:{}}});var q5e=ne((nhr,F5e)=>{"use strict";F5e.exports=I5e()});var O5e=ne(_3=>{"use strict";var z5e=Zs();_3.name="treemap";_3.plot=function(e,t,r,i){z5e.plotBasePlot(_3.name,e,t,r,i)};_3.clean=function(e,t,r,i){z5e.cleanBasePlot(_3.name,e,t,r,i)}});var E_=ne((ahr,B5e)=>{"use strict";B5e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}});var YR=ne((ohr,U5e)=>{"use strict";var Kkt=Ba().hovertemplateAttrs,Jkt=Ba().texttemplateAttrs,Qkt=Ps(),$kt=fl().attributes,k_=g_(),Rp=uE(),N5e=E_(),RH=oa().extendFlat,eCt=hc().pattern;U5e.exports={labels:Rp.labels,parents:Rp.parents,values:Rp.values,branchvalues:Rp.branchvalues,count:Rp.count,level:Rp.level,maxdepth:Rp.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:RH({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:Rp.marker.colors,pattern:eCt,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:Rp.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},Qkt("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:RH({},k_.textfont,{}),editType:"calc"},text:k_.text,textinfo:Rp.textinfo,texttemplate:Jkt({editType:"plot"},{keys:N5e.eventDataKeys.concat(["label","value"])}),hovertext:k_.hovertext,hoverinfo:Rp.hoverinfo,hovertemplate:Kkt({},{keys:N5e.eventDataKeys}),textfont:k_.textfont,insidetextfont:k_.insidetextfont,outsidetextfont:RH({},k_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:k_.sort,root:Rp.root,domain:$kt({name:"treemap",trace:!0,editType:"calc"})}});var DH=ne((shr,V5e)=>{"use strict";V5e.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var W5e=ne((lhr,Y5e)=>{"use strict";var H5e=Wt(),tCt=YR(),rCt=_i(),nCt=fl().defaults,iCt=Fd().handleText,aCt=Ux().TEXTPAD,oCt=y_().handleMarkerDefaults,G5e=ul(),sCt=G5e.hasColorscale,lCt=G5e.handleDefaults;Y5e.exports=function(t,r,i,n){function a(T,g){return H5e.coerce(t,r,tCt,T,g)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth");var u=a("tiling.packing");u==="squarify"&&a("tiling.squarifyratio"),a("tiling.flip"),a("tiling.pad");var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",H5e.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c=a("pathbar.visible"),h="auto";iCt(t,r,n,a,h,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition");var v=r.textposition.indexOf("bottom")!==-1;oCt(t,r,n,a);var p=r._hasColorscale=sCt(t,"marker","colors")||(t.marker||{}).coloraxis;p?lCt(t,r,n,a,{prefix:"marker.",cLetter:"c"}):a("marker.depthfade",!(r.marker.colors||[]).length);var _=r.textfont.size*2;a("marker.pad.t",v?_/4:_),a("marker.pad.l",_/4),a("marker.pad.r",_/4),a("marker.pad.b",v?_:_/4),a("marker.cornerradius"),r._hovered={marker:{line:{width:2,color:rCt.contrast(n.paper_bgcolor)}}},c&&(a("pathbar.thickness",r.pathbar.textfont.size+2*aCt),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),nCt(r,n,a),r._length=null}});var Z5e=ne((uhr,X5e)=>{"use strict";var uCt=Wt(),fCt=DH();X5e.exports=function(t,r){function i(n,a){return uCt.coerce(t,r,fCt,n,a)}i("treemapcolorway",r.colorway),i("extendtreemapcolors")}});var FH=ne(IH=>{"use strict";var j5e=hE();IH.calc=function(e,t){return j5e.calc(e,t)};IH.crossTraceCalc=function(e){return j5e._runCrossTraceCalc("treemap",e)}});var qH=ne((chr,K5e)=>{"use strict";K5e.exports=function e(t,r,i){var n;i.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n),i.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n),i.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var a=t.children;if(a)for(var o=0;o<a.length;o++)e(a[o],r,i)}});var zH=ne((hhr,J5e)=>{"use strict";var b3=fE(),cCt=qH();J5e.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.packing==="dice-slice",s=i.pad[a?"bottom":"top"],l=i.pad[n?"right":"left"],u=i.pad[n?"left":"right"],f=i.pad[a?"top":"bottom"],c;o&&(c=l,l=s,s=c,c=u,u=f,f=c);var h=b3.treemap().tile(hCt(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(l).paddingRight(u).paddingTop(s).paddingBottom(f).size(o?[r[1],r[0]]:r)(t);return(o||n||a)&&cCt(h,r,{swapXY:o,flipX:n,flipY:a}),h};function hCt(e,t){switch(e){case"squarify":return b3.treemapSquarify.ratio(t);case"binary":return b3.treemapBinary;case"dice":return b3.treemapDice;case"slice":return b3.treemapSlice;default:return b3.treemapSliceDice}}});var WR=ne((vhr,tke)=>{"use strict";var Q5e=Ai(),w3=_i(),$5e=Wt(),OH=vy(),vCt=yh().resizeText,dCt=VR();function pCt(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");vCt(e,t,"treemap"),t.each(function(r){var i=Q5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){Q5e.select(this).call(eke,o,a,e,{hovered:!1})})})}function eke(e,t,r,i,n){var a=(n||{}).hovered,o=t.data.data,s=o.i,l,u,f=o.color,c=OH.isHierarchyRoot(t),h=1;if(a)l=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(c&&f===r.root.color)h=100,l="rgba(0,0,0,0)",u=0;else if(l=$5e.castOption(r,s,"marker.line.color")||w3.defaultLine,u=$5e.castOption(r,s,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var v=r.marker.depthfade;if(v){var p=w3.combine(w3.addOpacity(r._backgroundColor,.75),f),_;if(v===!0){var T=OH.getMaxDepth(r);isFinite(T)?OH.isLeaf(t)?_=0:_=r._maxVisibleLayers-(t.data.depth-r._entryDepth):_=t.data.height+1}else _=t.data.depth-r._entryDepth,r._atRootLevel||_++;if(_>0)for(var g=0;g<_;g++){var A=.5*g/_;f=w3.combine(w3.addOpacity(p,A),f)}}}e.call(dCt,t,r,i,f).style("stroke-width",u).call(w3.stroke,l).style("opacity",h)}tke.exports={style:pCt,styleOne:eke}});var oke=ne((dhr,ake)=>{"use strict";var rke=Ai(),XR=Wt(),nke=aa(),gCt=Es(),yCt=zH(),ike=WR().styleOne,BH=E_(),T3=vy(),mCt=TE(),NH=!0;ake.exports=function(t,r,i,n,a){var o=a.barDifY,s=a.width,l=a.height,u=a.viewX,f=a.viewY,c=a.pathSlice,h=a.toMoveInsideSlice,v=a.strTransform,p=a.hasTransition,_=a.handleSlicesExit,T=a.makeUpdateSliceInterpolator,g=a.makeUpdateTextInterpolator,A={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=k.hierarchy,M=s/x._entryDepth,d=T3.listPath(i.data,"id"),C=yCt(E.copy(),[s,l],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();C=C.filter(function(P){var D=d.indexOf(P.data.id);return D===-1?!1:(P.x0=M*D,P.x1=M*(D+1),P.y0=o,P.y1=o+l,P.onPathbar=!0,!0)}),C.reverse(),n=n.data(C,T3.getPtId),n.enter().append("g").classed("pathbar",!0),_(n,NH,A,[s,l],c),n.order();var S=n;p&&(S=S.transition().each("end",function(){var P=rke.select(this);T3.setSliceCursor(P,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),S.each(function(P){P._x0=u(P.x0),P._x1=u(P.x1),P._y0=f(P.y0),P._y1=f(P.y1),P._hoverX=u(P.x1-Math.min(s,l)/2),P._hoverY=f(P.y1-l/2);var D=rke.select(this),z=XR.ensureSingle(D,"path","surface",function(F){F.style("pointer-events",b?"none":"all")});p?z.transition().attrTween("d",function(F){var N=T(F,NH,A,[s,l]);return function(Z){return c(N(Z))}}):z.attr("d",c),D.call(mCt,i,t,r,{styleOne:ike,eventDataKeys:BH.eventDataKeys,transitionTime:BH.CLICK_TRANSITION_TIME,transitionEasing:BH.CLICK_TRANSITION_EASING}).call(T3.setSliceCursor,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:t._transitioning}),z.call(ike,P,x,t,{hovered:!1}),P._text=(T3.getPtLabel(P)||"").split("<br>").join(" ")||"";var O=XR.ensureSingle(D,"g","slicetext"),V=XR.ensureSingle(O,"text","",function(F){F.attr("data-notex",1)}),B=XR.ensureUniformFontSize(t,T3.determineTextFont(x,P,w.font,{onPathbar:!0}));V.text(P._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(nke.font,B).call(gCt.convertToTspans,t),P.textBB=nke.bBox(V.node()),P.transform=h(P,{fontSize:B.size,onPathbar:!0}),P.transform.fontSize=B.size,p?V.transition().attrTween("transform",function(F){var N=g(F,NH,A,[s,l]);return function(Z){return v(N(Z))}}):V.attr("transform",v(P))})}});var fke=ne((phr,uke)=>{"use strict";var ske=Ai(),UH=(M_(),Wb(A_)).interpolate,e1=vy(),ME=Wt(),lke=Ux().TEXTPAD,xCt=Yx(),_Ct=xCt.toMoveInsideBar,bCt=yh(),VH=bCt.recordMinTextSize,wCt=E_(),TCt=oke();function C_(e){return e1.isHierarchyRoot(e)?"":e1.getPtId(e)}uke.exports=function(t,r,i,n,a){var o=t._fullLayout,s=r[0],l=s.trace,u=l.type,f=u==="icicle",c=s.hierarchy,h=e1.findEntryWithLevel(c,l.level),v=ske.select(i),p=v.selectAll("g.pathbar"),_=v.selectAll("g.slice");if(!h){p.remove(),_.remove();return}var T=e1.isHierarchyRoot(h),g=!o.uniformtext.mode&&e1.hasTransition(n),A=e1.getMaxDepth(l),b=function(Se){return Se.data.depth-h.data.depth<A},w=o._size,k=l.domain,x=w.w*(k.x[1]-k.x[0]),E=w.h*(k.y[1]-k.y[0]),M=x,d=l.pathbar.thickness,C=l.marker.line.width+wCt.gapWithPathbar,S=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?E+C:-(d+C):0,P={x0:M,x1:M,y0:S,y1:S+d},D=function(Se,je,ht){var nt=l.tiling.pad,lt=function(gt){return gt-nt<=je.x0},rt=function(gt){return gt+nt>=je.x1},Xe=function(gt){return gt-nt<=je.y0},ft=function(gt){return gt+nt>=je.y1};return Se.x0===je.x0&&Se.x1===je.x1&&Se.y0===je.y0&&Se.y1===je.y1?{x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1}:{x0:lt(Se.x0-nt)?0:rt(Se.x0-nt)?ht[0]:Se.x0,x1:lt(Se.x1+nt)?0:rt(Se.x1+nt)?ht[0]:Se.x1,y0:Xe(Se.y0-nt)?0:ft(Se.y0-nt)?ht[1]:Se.y0,y1:Xe(Se.y1+nt)?0:ft(Se.y1+nt)?ht[1]:Se.y1}},z=null,O={},V={},B=null,F=function(Se,je){return je?O[C_(Se)]:V[C_(Se)]},N=function(Se,je,ht,nt){if(je)return O[C_(c)]||P;var lt=V[l.level]||ht;return b(Se)?D(Se,lt,nt):{}};s.hasMultipleRoots&&T&&A++,l._maxDepth=A,l._backgroundColor=o.paper_bgcolor,l._entryDepth=h.data.depth,l._atRootLevel=T;var Z=-x/2+w.l+w.w*(k.x[1]+k.x[0])/2,J=-E/2+w.t+w.h*(1-(k.y[1]+k.y[0])/2),re=function(Se){return Z+Se},le=function(Se){return J+Se},fe=le(0),K=re(0),X=function(Se){return K+Se},ae=function(Se){return fe+Se};function oe(Se,je){return Se+","+je}var _e=X(0),be=function(Se){Se.x=Math.max(_e,Se.x)},he=l.pathbar.edgeshape,ie=function(Se){var je=X(Math.max(Math.min(Se.x0,Se.x0),0)),ht=X(Math.min(Math.max(Se.x1,Se.x1),M)),nt=ae(Se.y0),lt=ae(Se.y1),rt=d/2,Xe={},ft={};Xe.x=je,ft.x=ht,Xe.y=ft.y=(nt+lt)/2;var gt={x:je,y:nt},Qt={x:ht,y:nt},Jt={x:ht,y:lt},fr={x:je,y:lt};return he===">"?(gt.x-=rt,Qt.x-=rt,Jt.x-=rt,fr.x-=rt):he==="/"?(Jt.x-=rt,fr.x-=rt,Xe.x-=rt/2,ft.x-=rt/2):he==="\\"?(gt.x-=rt,Qt.x-=rt,Xe.x-=rt/2,ft.x-=rt/2):he==="<"&&(Xe.x-=rt,ft.x-=rt),be(gt),be(fr),be(Xe),be(Qt),be(Jt),be(ft),"M"+oe(gt.x,gt.y)+"L"+oe(Qt.x,Qt.y)+"L"+oe(ft.x,ft.y)+"L"+oe(Jt.x,Jt.y)+"L"+oe(fr.x,fr.y)+"L"+oe(Xe.x,Xe.y)+"Z"},ye=l[f?"tiling":"marker"].pad,ue=function(Se){return l.textposition.indexOf(Se)!==-1},Ae=ue("top"),Re=ue("left"),ze=ue("right"),et=ue("bottom"),Le=function(Se){var je=re(Se.x0),ht=re(Se.x1),nt=le(Se.y0),lt=le(Se.y1),rt=ht-je,Xe=lt-nt;if(!rt||!Xe)return"";var ft=l.marker.cornerradius||0,gt=Math.min(ft,rt/2,Xe/2);gt&&Se.data&&Se.data.data&&Se.data.data.label&&(Ae&&(gt=Math.min(gt,ye.t)),Re&&(gt=Math.min(gt,ye.l)),ze&&(gt=Math.min(gt,ye.r)),et&&(gt=Math.min(gt,ye.b)));var Qt=function(Jt,fr){return gt?"a"+oe(gt,gt)+" 0 0 1 "+oe(Jt,fr):""};return"M"+oe(je,nt+gt)+Qt(gt,-gt)+"L"+oe(ht-gt,nt)+Qt(gt,gt)+"L"+oe(ht,lt-gt)+Qt(-gt,gt)+"L"+oe(je+gt,lt)+Qt(-gt,-gt)+"Z"},Ie=function(Se,je){var ht=Se.x0,nt=Se.x1,lt=Se.y0,rt=Se.y1,Xe=Se.textBB,ft=Ae||je.isHeader&&!et,gt=ft?"start":et?"end":"middle",Qt=ue("right"),Jt=ue("left")||je.onPathbar,fr=Jt?-1:Qt?1:0;if(je.isHeader){if(ht+=(f?ye:ye.l)-lke,nt-=(f?ye:ye.r)-lke,ht>=nt){var nr=(ht+nt)/2;ht=nr,nt=nr}var ur;et?(ur=rt-(f?ye:ye.b),lt<ur&&ur<rt&&(lt=ur)):(ur=lt+(f?ye:ye.t),lt<ur&&ur<rt&&(rt=ur))}var qt=_Ct(ht,nt,lt,rt,Xe,{isHorizontal:!1,constrained:!0,angle:0,anchor:gt,leftToRight:fr});return qt.fontSize=je.fontSize,qt.targetX=re(qt.targetX),qt.targetY=le(qt.targetY),isNaN(qt.targetX)||isNaN(qt.targetY)?{}:(ht!==nt&&lt!==rt&&VH(l.type,qt,o),{scale:qt.scale,rotate:qt.rotate,textX:qt.textX,textY:qt.textY,anchorX:qt.anchorX,anchorY:qt.anchorY,targetX:qt.targetX,targetY:qt.targetY})},dt=function(Se,je){for(var ht,nt=0,lt=Se;!ht&&nt<A;)nt++,lt=lt.parent,lt?ht=F(lt,je):nt=A;return ht||{}},ct=function(Se,je,ht,nt){var lt=F(Se,je),rt;if(je)rt=P;else{var Xe=F(h,je);Xe?rt=D(Se,Xe,nt):rt={}}return UH(lt,rt)},Ke=function(Se,je,ht,nt,lt){var rt=F(Se,je),Xe;if(rt)Xe=rt;else if(je)Xe=P;else if(z)if(Se.parent){var ft=B||ht;ft&&!je?Xe=D(Se,ft,nt):(Xe={},ME.extendFlat(Xe,dt(Se,je)))}else Xe=ME.extendFlat({},Se),f&&(lt.orientation==="h"?lt.flipX?Xe.x0=Se.x1:Xe.x1=0:lt.flipY?Xe.y0=Se.y1:Xe.y1=0);else Xe={};return UH(Xe,{x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1})},_t=function(Se,je,ht,nt){var lt=F(Se,je),rt={},Xe=N(Se,je,ht,nt);ME.extendFlat(rt,{transform:Ie({x0:Xe.x0,x1:Xe.x1,y0:Xe.y0,y1:Xe.y1,textBB:Se.textBB,_text:Se._text},{isHeader:e1.isHeader(Se,l)})}),lt?rt=lt:Se.parent&&ME.extendFlat(rt,dt(Se,je));var ft=Se.transform;return Se.x0!==Se.x1&&Se.y0!==Se.y1&&VH(l.type,ft,o),UH(rt,{transform:{scale:ft.scale,rotate:ft.rotate,textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY}})},zt=function(Se,je,ht,nt,lt){var rt=nt[0],Xe=nt[1];g?Se.exit().transition().each(function(){var ft=ske.select(this),gt=ft.select("path.surface");gt.transition().attrTween("d",function(Jt){var fr=ct(Jt,je,ht,[rt,Xe]);return function(nr){return lt(fr(nr))}});var Qt=ft.select("g.slicetext");Qt.attr("opacity",0)}).remove():Se.exit().remove()},Et=function(Se){var je=Se.transform;return Se.x0!==Se.x1&&Se.y0!==Se.y1&&VH(l.type,je,o),ME.getTextTransform({textX:je.textX,textY:je.textY,anchorX:je.anchorX,anchorY:je.anchorY,targetX:je.targetX,targetY:je.targetY,scale:je.scale,rotate:je.rotate})};g&&(p.each(function(Se){O[C_(Se)]={x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1},Se.transform&&(O[C_(Se)].transform={textX:Se.transform.textX,textY:Se.transform.textY,anchorX:Se.transform.anchorX,anchorY:Se.transform.anchorY,targetX:Se.transform.targetX,targetY:Se.transform.targetY,scale:Se.transform.scale,rotate:Se.transform.rotate})}),_.each(function(Se){V[C_(Se)]={x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1},Se.transform&&(V[C_(Se)].transform={textX:Se.transform.textX,textY:Se.transform.textY,anchorX:Se.transform.anchorX,anchorY:Se.transform.anchorY,targetX:Se.transform.targetX,targetY:Se.transform.targetY,scale:Se.transform.scale,rotate:Se.transform.rotate}),!z&&e1.isEntry(Se)&&(z=Se)})),B=a(t,r,h,_,{width:x,height:E,viewX:re,viewY:le,pathSlice:Le,toMoveInsideSlice:Ie,prevEntry:z,makeUpdateSliceInterpolator:Ke,makeUpdateTextInterpolator:_t,handleSlicesExit:zt,hasTransition:g,strTransform:Et}),l.pathbar.visible?TCt(t,r,h,p,{barDifY:S,width:M,height:d,viewX:X,viewY:ae,pathSlice:ie,toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:Ke,makeUpdateTextInterpolator:_t,handleSlicesExit:zt,hasTransition:g,strTransform:Et}):p.remove()}});var HH=ne((ghr,hke)=>{"use strict";var ACt=Ai(),MCt=vy(),SCt=yh(),ECt=SCt.clearMinTextSize,kCt=_p().resizeText,cke=fke();hke.exports=function(t,r,i,n,a){var o=a.type,s=a.drawDescendants,l=t._fullLayout,u=l["_"+o+"layer"],f,c,h=!i;if(ECt(o,l),f=u.selectAll("g.trace."+o).data(r,function(p){return p[0].trace.uid}),f.enter().append("g").classed("trace",!0).classed(o,!0),f.order(),!l.uniformtext.mode&&MCt.hasTransition(i)){n&&(c=n());var v=ACt.transition().duration(i.duration).ease(i.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});v.each(function(){u.selectAll("g.trace").each(function(p){cke(t,p,this,i,s)})})}else f.each(function(p){cke(t,p,this,i,s)}),l.uniformtext.mode&&kCt(t,u.selectAll(".trace"),o);h&&f.exit().remove()}});var yke=ne((yhr,gke)=>{"use strict";var vke=Ai(),ZR=Wt(),dke=aa(),CCt=Es(),LCt=zH(),pke=WR().styleOne,GH=E_(),t1=vy(),PCt=TE(),RCt=GR().formatSliceLabel,YH=!1;gke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,p=a.handleSlicesExit,_=a.makeUpdateSliceInterpolator,T=a.makeUpdateTextInterpolator,g=a.prevEntry,A={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=x.textposition.indexOf("left")!==-1,M=x.textposition.indexOf("right")!==-1,d=x.textposition.indexOf("bottom")!==-1,C=!d&&!x.marker.pad.t||d&&!x.marker.pad.b,S=LCt(i,[o,s],{packing:x.tiling.packing,squarifyratio:x.tiling.squarifyratio,flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1,pad:{inner:x.tiling.pad,top:x.marker.pad.t,left:x.marker.pad.l,right:x.marker.pad.r,bottom:x.marker.pad.b}}),P=S.descendants(),D=1/0,z=-1/0;P.forEach(function(N){var Z=N.depth;Z>=x._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(D=Math.min(D,Z),z=Math.max(z,Z))}),n=n.data(P,t1.getPtId),x._maxVisibleLayers=isFinite(z)?z-D+1:0,n.enter().append("g").classed("slice",!0),p(n,YH,A,[o,s],f),n.order();var O=null;if(v&&g){var V=t1.getPtId(g);n.each(function(N){O===null&&t1.getPtId(N)===V&&(O={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var B=function(){return O||{x0:0,x1:o,y0:0,y1:s}},F=n;return v&&(F=F.transition().each("end",function(){var N=vke.select(this);t1.setSliceCursor(N,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),F.each(function(N){var Z=t1.isHeader(N,x);N._x0=l(N.x0),N._x1=l(N.x1),N._y0=u(N.y0),N._y1=u(N.y1),N._hoverX=l(N.x1-x.marker.pad.r),N._hoverY=u(d?N.y1-x.marker.pad.b/2:N.y0+x.marker.pad.t/2);var J=vke.select(this),re=ZR.ensureSingle(J,"path","surface",function(X){X.style("pointer-events",b?"none":"all")});v?re.transition().attrTween("d",function(X){var ae=_(X,YH,B(),[o,s]);return function(oe){return f(ae(oe))}}):re.attr("d",f),J.call(PCt,i,t,r,{styleOne:pke,eventDataKeys:GH.eventDataKeys,transitionTime:GH.CLICK_TRANSITION_TIME,transitionEasing:GH.CLICK_TRANSITION_EASING}).call(t1.setSliceCursor,t,{isTransitioning:t._transitioning}),re.call(pke,N,x,t,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":Z?N._text=C?"":t1.getPtLabel(N)||"":N._text=RCt(N,i,x,r,w)||"";var le=ZR.ensureSingle(J,"g","slicetext"),fe=ZR.ensureSingle(le,"text","",function(X){X.attr("data-notex",1)}),K=ZR.ensureUniformFontSize(t,t1.determineTextFont(x,N,w.font));fe.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",M?"end":E||Z?"start":"middle").call(dke.font,K).call(CCt.convertToTspans,t),N.textBB=dke.bBox(fe.node()),N.transform=c(N,{fontSize:K.size,isHeader:Z}),N.transform.fontSize=K.size,v?fe.transition().attrTween("transform",function(X){var ae=T(X,YH,B(),[o,s]);return function(oe){return h(ae(oe))}}):fe.attr("transform",h(N))}),O}});var xke=ne((mhr,mke)=>{"use strict";var DCt=HH(),ICt=yke();mke.exports=function(t,r,i,n){return DCt(t,r,i,n,{type:"treemap",drawDescendants:ICt})}});var bke=ne((xhr,_ke)=>{"use strict";_ke.exports={moduleType:"trace",name:"treemap",basePlotModule:O5e(),categories:[],animatable:!0,attributes:YR(),layoutAttributes:DH(),supplyDefaults:W5e(),supplyLayoutDefaults:Z5e(),calc:FH().calc,crossTraceCalc:FH().crossTraceCalc,plot:xke(),style:WR().style,colorbar:ph(),meta:{}}});var Tke=ne((_hr,wke)=>{"use strict";wke.exports=bke()});var Mke=ne(A3=>{"use strict";var Ake=Zs();A3.name="icicle";A3.plot=function(e,t,r,i){Ake.plotBasePlot(A3.name,e,t,r,i)};A3.clean=function(e,t,r,i){Ake.cleanBasePlot(A3.name,e,t,r,i)}});var WH=ne((whr,Eke)=>{"use strict";var FCt=Ba().hovertemplateAttrs,qCt=Ba().texttemplateAttrs,zCt=Ps(),OCt=fl().attributes,SE=g_(),Od=uE(),jR=YR(),Ske=E_(),BCt=oa().extendFlat,NCt=hc().pattern;Eke.exports={labels:Od.labels,parents:Od.parents,values:Od.values,branchvalues:Od.branchvalues,count:Od.count,level:Od.level,maxdepth:Od.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:jR.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:BCt({colors:Od.marker.colors,line:Od.marker.line,pattern:NCt,editType:"calc"},zCt("marker",{colorAttr:"colors",anim:!1})),leaf:Od.leaf,pathbar:jR.pathbar,text:SE.text,textinfo:Od.textinfo,texttemplate:qCt({editType:"plot"},{keys:Ske.eventDataKeys.concat(["label","value"])}),hovertext:SE.hovertext,hoverinfo:Od.hoverinfo,hovertemplate:FCt({},{keys:Ske.eventDataKeys}),textfont:SE.textfont,insidetextfont:SE.insidetextfont,outsidetextfont:jR.outsidetextfont,textposition:jR.textposition,sort:SE.sort,root:Od.root,domain:OCt({name:"icicle",trace:!0,editType:"calc"})}});var XH=ne((Thr,kke)=>{"use strict";kke.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var Rke=ne((Ahr,Pke)=>{"use strict";var Cke=Wt(),UCt=WH(),VCt=_i(),HCt=fl().defaults,GCt=Fd().handleText,YCt=Ux().TEXTPAD,WCt=y_().handleMarkerDefaults,Lke=ul(),XCt=Lke.hasColorscale,ZCt=Lke.handleDefaults;Pke.exports=function(t,r,i,n){function a(v,p){return Cke.coerce(t,r,UCt,v,p)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("tiling.orientation"),a("tiling.flip"),a("tiling.pad");var u=a("text");a("texttemplate"),r.texttemplate||a("textinfo",Cke.isArrayOrTypedArray(u)?"text+label":"label"),a("hovertext"),a("hovertemplate");var f=a("pathbar.visible"),c="auto";GCt(t,r,n,a,c,{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition"),WCt(t,r,n,a);var h=r._hasColorscale=XCt(t,"marker","colors")||(t.marker||{}).coloraxis;h&&ZCt(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",h?1:.7),r._hovered={marker:{line:{width:2,color:VCt.contrast(n.paper_bgcolor)}}},f&&(a("pathbar.thickness",r.pathbar.textfont.size+2*YCt),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),HCt(r,n,a),r._length=null}});var Ike=ne((Mhr,Dke)=>{"use strict";var jCt=Wt(),KCt=XH();Dke.exports=function(t,r){function i(n,a){return jCt.coerce(t,r,KCt,n,a)}i("iciclecolorway",r.colorway),i("extendiciclecolors")}});var jH=ne(ZH=>{"use strict";var Fke=hE();ZH.calc=function(e,t){return Fke.calc(e,t)};ZH.crossTraceCalc=function(e){return Fke._runCrossTraceCalc("icicle",e)}});var zke=ne((Ehr,qke)=>{"use strict";var JCt=fE(),QCt=qH();qke.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.orientation==="h",s=i.maxDepth,l=r[0],u=r[1];s&&(l=(t.height+1)*r[0]/Math.min(t.height+1,s),u=(t.height+1)*r[1]/Math.min(t.height+1,s));var f=JCt.partition().padding(i.pad.inner).size(o?[r[1],l]:[r[0],u])(t);return(o||n||a)&&QCt(f,r,{swapXY:o,flipX:n,flipY:a}),f}});var KH=ne((khr,Vke)=>{"use strict";var Oke=Ai(),Bke=_i(),Nke=Wt(),$Ct=yh().resizeText,e4t=VR();function t4t(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");$Ct(e,t,"icicle"),t.each(function(r){var i=Oke.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){Oke.select(this).call(Uke,o,a,e)})})}function Uke(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=Nke.castOption(r,o,"marker.line.color")||Bke.defaultLine,l=Nke.castOption(r,o,"marker.line.width")||0;e.call(e4t,t,r,i).style("stroke-width",l).call(Bke.stroke,s).style("opacity",a?r.leaf.opacity:null)}Vke.exports={style:t4t,styleOne:Uke}});var Xke=ne((Chr,Wke)=>{"use strict";var Hke=Ai(),KR=Wt(),Gke=aa(),r4t=Es(),n4t=zke(),Yke=KH().styleOne,JH=E_(),M3=vy(),i4t=TE(),a4t=GR().formatSliceLabel,QH=!1;Wke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,p=a.handleSlicesExit,_=a.makeUpdateSliceInterpolator,T=a.makeUpdateTextInterpolator,g=a.prevEntry,A={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=x.textposition.indexOf("left")!==-1,M=x.textposition.indexOf("right")!==-1,d=x.textposition.indexOf("bottom")!==-1,C=n4t(i,[o,s],{flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1,orientation:x.tiling.orientation,pad:{inner:x.tiling.pad},maxDepth:x._maxDepth}),S=C.descendants(),P=1/0,D=-1/0;S.forEach(function(F){var N=F.depth;N>=x._maxDepth?(F.x0=F.x1=(F.x0+F.x1)/2,F.y0=F.y1=(F.y0+F.y1)/2):(P=Math.min(P,N),D=Math.max(D,N))}),n=n.data(S,M3.getPtId),x._maxVisibleLayers=isFinite(D)?D-P+1:0,n.enter().append("g").classed("slice",!0),p(n,QH,A,[o,s],f),n.order();var z=null;if(v&&g){var O=M3.getPtId(g);n.each(function(F){z===null&&M3.getPtId(F)===O&&(z={x0:F.x0,x1:F.x1,y0:F.y0,y1:F.y1})})}var V=function(){return z||{x0:0,x1:o,y0:0,y1:s}},B=n;return v&&(B=B.transition().each("end",function(){var F=Hke.select(this);M3.setSliceCursor(F,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(F){F._x0=l(F.x0),F._x1=l(F.x1),F._y0=u(F.y0),F._y1=u(F.y1),F._hoverX=l(F.x1-x.tiling.pad),F._hoverY=u(d?F.y1-x.tiling.pad/2:F.y0+x.tiling.pad/2);var N=Hke.select(this),Z=KR.ensureSingle(N,"path","surface",function(fe){fe.style("pointer-events",b?"none":"all")});v?Z.transition().attrTween("d",function(fe){var K=_(fe,QH,V(),[o,s],{orientation:x.tiling.orientation,flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1});return function(X){return f(K(X))}}):Z.attr("d",f),N.call(i4t,i,t,r,{styleOne:Yke,eventDataKeys:JH.eventDataKeys,transitionTime:JH.CLICK_TRANSITION_TIME,transitionEasing:JH.CLICK_TRANSITION_EASING}).call(M3.setSliceCursor,t,{isTransitioning:t._transitioning}),Z.call(Yke,F,x,t,{hovered:!1}),F.x0===F.x1||F.y0===F.y1?F._text="":F._text=a4t(F,i,x,r,w)||"";var J=KR.ensureSingle(N,"g","slicetext"),re=KR.ensureSingle(J,"text","",function(fe){fe.attr("data-notex",1)}),le=KR.ensureUniformFontSize(t,M3.determineTextFont(x,F,w.font));re.text(F._text||" ").classed("slicetext",!0).attr("text-anchor",M?"end":E?"start":"middle").call(Gke.font,le).call(r4t.convertToTspans,t),F.textBB=Gke.bBox(re.node()),F.transform=c(F,{fontSize:le.size}),F.transform.fontSize=le.size,v?re.transition().attrTween("transform",function(fe){var K=T(fe,QH,V(),[o,s]);return function(X){return h(K(X))}}):re.attr("transform",h(F))}),z}});var jke=ne((Lhr,Zke)=>{"use strict";var o4t=HH(),s4t=Xke();Zke.exports=function(t,r,i,n){return o4t(t,r,i,n,{type:"icicle",drawDescendants:s4t})}});var Jke=ne((Phr,Kke)=>{"use strict";Kke.exports={moduleType:"trace",name:"icicle",basePlotModule:Mke(),categories:[],animatable:!0,attributes:WH(),layoutAttributes:XH(),supplyDefaults:Rke(),supplyLayoutDefaults:Ike(),calc:jH().calc,crossTraceCalc:jH().crossTraceCalc,plot:jke(),style:KH().style,colorbar:ph(),meta:{}}});var $ke=ne((Rhr,Qke)=>{"use strict";Qke.exports=Jke()});var tCe=ne(S3=>{"use strict";var eCe=Zs();S3.name="funnelarea";S3.plot=function(e,t,r,i){eCe.plotBasePlot(S3.name,e,t,r,i)};S3.clean=function(e,t,r,i){eCe.cleanBasePlot(S3.name,e,t,r,i)}});var $H=ne((Ihr,rCe)=>{"use strict";var Uc=g_(),l4t=es(),u4t=fl().attributes,f4t=Ba().hovertemplateAttrs,c4t=Ba().texttemplateAttrs,L_=oa().extendFlat;rCe.exports={labels:Uc.labels,label0:Uc.label0,dlabel:Uc.dlabel,values:Uc.values,marker:{colors:Uc.marker.colors,line:{color:L_({},Uc.marker.line.color,{dflt:null}),width:L_({},Uc.marker.line.width,{dflt:1}),editType:"calc"},pattern:Uc.marker.pattern,editType:"calc"},text:Uc.text,hovertext:Uc.hovertext,scalegroup:L_({},Uc.scalegroup,{}),textinfo:L_({},Uc.textinfo,{flags:["label","text","value","percent"]}),texttemplate:c4t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:L_({},l4t.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:f4t({},{keys:["label","color","value","text","percent"]}),textposition:L_({},Uc.textposition,{values:["inside","none"],dflt:"inside"}),textfont:Uc.textfont,insidetextfont:Uc.insidetextfont,title:{text:Uc.title.text,font:Uc.title.font,position:L_({},Uc.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:u4t({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}});var eG=ne((Fhr,nCe)=>{"use strict";var h4t=yR().hiddenlabels;nCe.exports={hiddenlabels:h4t,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var oCe=ne((qhr,aCe)=>{"use strict";var iCe=Wt(),v4t=$H(),d4t=fl().defaults,p4t=Fd().handleText,g4t=y_().handleLabelsAndValues,y4t=y_().handleMarkerDefaults;aCe.exports=function(t,r,i,n){function a(_,T){return iCe.coerce(t,r,v4t,_,T)}var o=a("labels"),s=a("values"),l=g4t(o,s),u=l.len;if(r._hasLabels=l.hasLabels,r._hasValues=l.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),!u){r.visible=!1;return}r._length=u,y4t(t,r,n,a),a("scalegroup");var f=a("text"),c=a("texttemplate"),h;if(c||(h=a("textinfo",Array.isArray(f)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),c||h&&h!=="none"){var v=a("textposition");p4t(t,r,n,a,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else h==="none"&&a("textposition","none");d4t(r,n,a);var p=a("title.text");p&&(a("title.position"),iCe.coerceFont(a,"title.font",n.font)),a("aspectratio"),a("baseratio")}});var lCe=ne((zhr,sCe)=>{"use strict";var m4t=Wt(),x4t=eG();sCe.exports=function(t,r){function i(n,a){return m4t.coerce(t,r,x4t,n,a)}i("hiddenlabels"),i("funnelareacolorway",r.colorway),i("extendfunnelareacolors")}});var tG=ne((Ohr,fCe)=>{"use strict";var uCe=l3();function _4t(e,t){return uCe.calc(e,t)}function b4t(e){uCe.crossTraceCalc(e,{type:"funnelarea"})}fCe.exports={calc:_4t,crossTraceCalc:b4t}});var pCe=ne((Bhr,dCe)=>{"use strict";var P_=Ai(),rG=aa(),r1=Wt(),w4t=r1.strScale,cCe=r1.strTranslate,hCe=Es(),T4t=Yx(),A4t=T4t.toMoveInsideBar,vCe=yh(),M4t=vCe.recordMinTextSize,S4t=vCe.clearMinTextSize,E4t=hm(),E3=bR(),k4t=E3.attachFxHandlers,C4t=E3.determineInsideTextFont,L4t=E3.layoutAreas,P4t=E3.prerenderTitles,R4t=E3.positionTitleOutside,D4t=E3.formatSliceLabel;dCe.exports=function(t,r){var i=t._context.staticPlot,n=t._fullLayout;S4t("funnelarea",n),P4t(r,t),L4t(r,n._size),r1.makeTraceGroups(n._funnelarealayer,r,"trace").each(function(a){var o=P_.select(this),s=a[0],l=s.trace;F4t(a),o.each(function(){var u=P_.select(this).selectAll("g.slice").data(a);u.enter().append("g").classed("slice",!0),u.exit().remove(),u.each(function(c,h){if(c.hidden){P_.select(this).selectAll("path,g").remove();return}c.pointNumber=c.i,c.curveNumber=l.index;var v=s.cx,p=s.cy,_=P_.select(this),T=_.selectAll("path.surface").data([c]);T.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),_.call(k4t,t,a);var g="M"+(v+c.TR[0])+","+(p+c.TR[1])+nG(c.TR,c.BR)+nG(c.BR,c.BL)+nG(c.BL,c.TL)+"Z";T.attr("d",g),D4t(t,c,s);var A=E4t.castOption(l.textposition,c.pts),b=_.selectAll("g.slicetext").data(c.text&&A!=="none"?[0]:[]);b.enter().append("g").classed("slicetext",!0),b.exit().remove(),b.each(function(){var w=r1.ensureSingle(P_.select(this),"text","",function(P){P.attr("data-notex",1)}),k=r1.ensureUniformFontSize(t,C4t(l,c,n.font));w.text(c.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(rG.font,k).call(hCe.convertToTspans,t);var x=rG.bBox(w.node()),E,M,d,C=Math.min(c.BL[1],c.BR[1])+p,S=Math.max(c.TL[1],c.TR[1])+p;M=Math.max(c.TL[0],c.BL[0])+v,d=Math.min(c.TR[0],c.BR[0])+v,E=A4t(M,d,C,S,x,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),E.fontSize=k.size,M4t(l.type,E,n),a[h].transform=E,r1.setTransormAndDisplay(w,E)})});var f=P_.select(this).selectAll("g.titletext").data(l.title.text?[0]:[]);f.enter().append("g").classed("titletext",!0),f.exit().remove(),f.each(function(){var c=r1.ensureSingle(P_.select(this),"text","",function(p){p.attr("data-notex",1)}),h=l.title.text;l._meta&&(h=r1.templateString(h,l._meta)),c.text(h).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(rG.font,l.title.font).call(hCe.convertToTspans,t);var v=R4t(s,n._size);c.attr("transform",cCe(v.x,v.y)+w4t(Math.min(1,v.scale))+cCe(v.tx,v.ty))})})})};function nG(e,t){var r=t[0]-e[0],i=t[1]-e[1];return"l"+r+","+i}function I4t(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}function F4t(e){if(!e.length)return;var t=e[0],r=t.trace,i=r.aspectratio,n=r.baseratio;n>.999&&(n=.999);var a=Math.pow(n,2),o=t.vTotal,s=o*a/(1-a),l=o,u=s/o;function f(){var D=Math.sqrt(u);return{x:D,y:-D}}function c(){var D=f();return[D.x,D.y]}var h,v=[];v.push(c());var p,_;for(p=e.length-1;p>-1;p--)if(_=e[p],!_.hidden){var T=_.v/l;u+=T,v.push(c())}var g=1/0,A=-1/0;for(p=0;p<v.length;p++)h=v[p],g=Math.min(g,h[1]),A=Math.max(A,h[1]);for(p=0;p<v.length;p++)v[p][1]-=(A+g)/2;var b=v[v.length-1][0],w=t.r,k=(A-g)/2,x=w/b,E=w/k*i;for(t.r=E*k,p=0;p<v.length;p++)v[p][0]*=x,v[p][1]*=E;h=v[0];var M=[-h[0],h[1]],d=[h[0],h[1]],C=0;for(p=e.length-1;p>-1;p--)if(_=e[p],!_.hidden){C+=1;var S=v[C][0],P=v[C][1];_.TL=[-S,P],_.TR=[S,P],_.BL=M,_.BR=d,_.pxmid=I4t(_.TR,_.BR),M=_.TL,d=_.TR}}});var mCe=ne((Nhr,yCe)=>{"use strict";var gCe=Ai(),q4t=A2(),z4t=yh().resizeText;yCe.exports=function(t){var r=t._fullLayout._funnelarealayer.selectAll(".trace");z4t(t,r,"funnelarea"),r.each(function(i){var n=i[0],a=n.trace,o=gCe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){gCe.select(this).call(q4t,s,a,t)})})}});var _Ce=ne((Uhr,xCe)=>{"use strict";xCe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:tCe(),categories:["pie-like","funnelarea","showLegend"],attributes:$H(),layoutAttributes:eG(),supplyDefaults:oCe(),supplyLayoutDefaults:lCe(),calc:tG().calc,crossTraceCalc:tG().crossTraceCalc,plot:pCe(),style:mCe(),styleOne:A2(),meta:{}}});var wCe=ne((Vhr,bCe)=>{"use strict";bCe.exports=_Ce()});var yu=ne((JR,iG)=>{(function(t,r){typeof JR=="object"&&typeof iG=="object"?iG.exports=r():typeof define=="function"&&define.amd?define([],r):typeof JR=="object"?JR.Stackgl=r():t.Stackgl=r()})(self,function(){return function(){var e={7386:function(n,a,o){n.exports={alpha_shape:o(2350),convex_hull:o(5537),delaunay_triangulate:o(4419),gl_cone3d:o(1140),gl_error3d:o(3110),gl_heatmap2d:o(6386),gl_line3d:o(6086),gl_mesh3d:o(8116),gl_plot2d:o(2117),gl_plot3d:o(1059),gl_pointcloud2d:o(8271),gl_scatter3d:o(2182),gl_select_box:o(6623),gl_spikes2d:o(3050),gl_streamtube3d:o(7307),gl_surface3d:o(3754),ndarray:o(5050),ndarray_linear_interpolate:o(3581)}},2146:function(n,a,o){"use strict";var s;function l(xe,ce){if(!(xe instanceof ce))throw new TypeError("Cannot call a class as a function")}function u(xe,ce){for(var ge=0;ge<ce.length;ge++){var qe=ce[ge];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(xe,qe.key,qe)}}function f(xe,ce,ge){return ce&&u(xe.prototype,ce),ge&&u(xe,ge),Object.defineProperty(xe,"prototype",{writable:!1}),xe}function c(xe,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function");xe.prototype=Object.create(ce&&ce.prototype,{constructor:{value:xe,writable:!0,configurable:!0}}),Object.defineProperty(xe,"prototype",{writable:!1}),ce&&h(xe,ce)}function h(xe,ce){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(qe,yt){return qe.__proto__=yt,qe},h(xe,ce)}function v(xe){var ce=T();return function(){var qe=g(xe),yt;if(ce){var Vt=g(this).constructor;yt=Reflect.construct(qe,arguments,Vt)}else yt=qe.apply(this,arguments);return p(this,yt)}}function p(xe,ce){if(ce&&(A(ce)==="object"||typeof ce=="function"))return ce;if(ce!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(xe)}function _(xe){if(xe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(xe){return!1}}function g(xe){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},g(xe)}function A(xe){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},A(xe)}var b=o(3910),w=o(3187),k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.lW=d,s=Z,a.h2=50;var x=2147483647;s=x,d.TYPED_ARRAY_SUPPORT=E(),!d.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var xe=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(xe,ce),xe.foo()===42}catch(ge){return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function M(xe){if(xe>x)throw new RangeError('The value "'+xe+'" is invalid for option "size"');var ce=new Uint8Array(xe);return Object.setPrototypeOf(ce,d.prototype),ce}function d(xe,ce,ge){if(typeof xe=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(xe)}return C(xe,ce,ge)}d.poolSize=8192;function C(xe,ce,ge){if(typeof xe=="string")return z(xe,ce);if(ArrayBuffer.isView(xe))return V(xe);if(xe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+A(xe));if(ur(xe,ArrayBuffer)||xe&&ur(xe.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ur(xe,SharedArrayBuffer)||xe&&ur(xe.buffer,SharedArrayBuffer)))return B(xe,ce,ge);if(typeof xe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var qe=xe.valueOf&&xe.valueOf();if(qe!=null&&qe!==xe)return d.from(qe,ce,ge);var yt=F(xe);if(yt)return yt;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof xe[Symbol.toPrimitive]=="function")return d.from(xe[Symbol.toPrimitive]("string"),ce,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+A(xe))}d.from=function(xe,ce,ge){return C(xe,ce,ge)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function S(xe){if(typeof xe!="number")throw new TypeError('"size" argument must be of type number');if(xe<0)throw new RangeError('The value "'+xe+'" is invalid for option "size"')}function P(xe,ce,ge){return S(xe),xe<=0?M(xe):ce!==void 0?typeof ge=="string"?M(xe).fill(ce,ge):M(xe).fill(ce):M(xe)}d.alloc=function(xe,ce,ge){return P(xe,ce,ge)};function D(xe){return S(xe),M(xe<0?0:N(xe)|0)}d.allocUnsafe=function(xe){return D(xe)},d.allocUnsafeSlow=function(xe){return D(xe)};function z(xe,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!d.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);var ge=J(xe,ce)|0,qe=M(ge),yt=qe.write(xe,ce);return yt!==ge&&(qe=qe.slice(0,yt)),qe}function O(xe){for(var ce=xe.length<0?0:N(xe.length)|0,ge=M(ce),qe=0;qe<ce;qe+=1)ge[qe]=xe[qe]&255;return ge}function V(xe){if(ur(xe,Uint8Array)){var ce=new Uint8Array(xe);return B(ce.buffer,ce.byteOffset,ce.byteLength)}return O(xe)}function B(xe,ce,ge){if(ce<0||xe.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(xe.byteLength<ce+(ge||0))throw new RangeError('"length" is outside of buffer bounds');var qe;return ce===void 0&&ge===void 0?qe=new Uint8Array(xe):ge===void 0?qe=new Uint8Array(xe,ce):qe=new Uint8Array(xe,ce,ge),Object.setPrototypeOf(qe,d.prototype),qe}function F(xe){if(d.isBuffer(xe)){var ce=N(xe.length)|0,ge=M(ce);return ge.length===0||xe.copy(ge,0,0,ce),ge}if(xe.length!==void 0)return typeof xe.length!="number"||qt(xe.length)?M(0):O(xe);if(xe.type==="Buffer"&&Array.isArray(xe.data))return O(xe.data)}function N(xe){if(xe>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return xe|0}function Z(xe){return+xe!=xe&&(xe=0),d.alloc(+xe)}d.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==d.prototype},d.compare=function(ce,ge){if(ur(ce,Uint8Array)&&(ce=d.from(ce,ce.offset,ce.byteLength)),ur(ge,Uint8Array)&&(ge=d.from(ge,ge.offset,ge.byteLength)),!d.isBuffer(ce)||!d.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ge)return 0;for(var qe=ce.length,yt=ge.length,Vt=0,Ut=Math.min(qe,yt);Vt<Ut;++Vt)if(ce[Vt]!==ge[Vt]){qe=ce[Vt],yt=ge[Vt];break}return qe<yt?-1:yt<qe?1:0},d.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(ce,ge){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return d.alloc(0);var qe;if(ge===void 0)for(ge=0,qe=0;qe<ce.length;++qe)ge+=ce[qe].length;var yt=d.allocUnsafe(ge),Vt=0;for(qe=0;qe<ce.length;++qe){var Ut=ce[qe];if(ur(Ut,Uint8Array))Vt+Ut.length>yt.length?(d.isBuffer(Ut)||(Ut=d.from(Ut)),Ut.copy(yt,Vt)):Uint8Array.prototype.set.call(yt,Ut,Vt);else if(d.isBuffer(Ut))Ut.copy(yt,Vt);else throw new TypeError('"list" argument must be an Array of Buffers');Vt+=Ut.length}return yt};function J(xe,ce){if(d.isBuffer(xe))return xe.length;if(ArrayBuffer.isView(xe)||ur(xe,ArrayBuffer))return xe.byteLength;if(typeof xe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+A(xe));var ge=xe.length,qe=arguments.length>2&&arguments[2]===!0;if(!qe&&ge===0)return 0;for(var yt=!1;;)switch(ce){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return gt(xe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge*2;case"hex":return ge>>>1;case"base64":return fr(xe).length;default:if(yt)return qe?-1:gt(xe).length;ce=(""+ce).toLowerCase(),yt=!0}}d.byteLength=J;function re(xe,ce,ge){var qe=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((ge===void 0||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0,ce>>>=0,ge<=ce))return"";for(xe||(xe="utf8");;)switch(xe){case"hex":return ze(this,ce,ge);case"utf8":case"utf-8":return ie(this,ce,ge);case"ascii":return Ae(this,ce,ge);case"latin1":case"binary":return Re(this,ce,ge);case"base64":return he(this,ce,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,ce,ge);default:if(qe)throw new TypeError("Unknown encoding: "+xe);xe=(xe+"").toLowerCase(),qe=!0}}d.prototype._isBuffer=!0;function le(xe,ce,ge){var qe=xe[ce];xe[ce]=xe[ge],xe[ge]=qe}d.prototype.swap16=function(){var ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<ce;ge+=2)le(this,ge,ge+1);return this},d.prototype.swap32=function(){var ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<ce;ge+=4)le(this,ge,ge+3),le(this,ge+1,ge+2);return this},d.prototype.swap64=function(){var ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<ce;ge+=8)le(this,ge,ge+7),le(this,ge+1,ge+6),le(this,ge+2,ge+5),le(this,ge+3,ge+4);return this},d.prototype.toString=function(){var ce=this.length;return ce===0?"":arguments.length===0?ie(this,0,ce):re.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(ce){if(!d.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:d.compare(this,ce)===0},d.prototype.inspect=function(){var ce="",ge=a.h2;return ce=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(ce+=" ... "),"<Buffer "+ce+">"},k&&(d.prototype[k]=d.prototype.inspect),d.prototype.compare=function(ce,ge,qe,yt,Vt){if(ur(ce,Uint8Array)&&(ce=d.from(ce,ce.offset,ce.byteLength)),!d.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+A(ce));if(ge===void 0&&(ge=0),qe===void 0&&(qe=ce?ce.length:0),yt===void 0&&(yt=0),Vt===void 0&&(Vt=this.length),ge<0||qe>ce.length||yt<0||Vt>this.length)throw new RangeError("out of range index");if(yt>=Vt&&ge>=qe)return 0;if(yt>=Vt)return-1;if(ge>=qe)return 1;if(ge>>>=0,qe>>>=0,yt>>>=0,Vt>>>=0,this===ce)return 0;for(var Ut=Vt-yt,br=qe-ge,xr=Math.min(Ut,br),Or=this.slice(yt,Vt),Hr=ce.slice(ge,qe),gr=0;gr<xr;++gr)if(Or[gr]!==Hr[gr]){Ut=Or[gr],br=Hr[gr];break}return Ut<br?-1:br<Ut?1:0};function fe(xe,ce,ge,qe,yt){if(xe.length===0)return-1;if(typeof ge=="string"?(qe=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),ge=+ge,qt(ge)&&(ge=yt?0:xe.length-1),ge<0&&(ge=xe.length+ge),ge>=xe.length){if(yt)return-1;ge=xe.length-1}else if(ge<0)if(yt)ge=0;else return-1;if(typeof ce=="string"&&(ce=d.from(ce,qe)),d.isBuffer(ce))return ce.length===0?-1:K(xe,ce,ge,qe,yt);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?yt?Uint8Array.prototype.indexOf.call(xe,ce,ge):Uint8Array.prototype.lastIndexOf.call(xe,ce,ge):K(xe,[ce],ge,qe,yt);throw new TypeError("val must be string, number or Buffer")}function K(xe,ce,ge,qe,yt){var Vt=1,Ut=xe.length,br=ce.length;if(qe!==void 0&&(qe=String(qe).toLowerCase(),qe==="ucs2"||qe==="ucs-2"||qe==="utf16le"||qe==="utf-16le")){if(xe.length<2||ce.length<2)return-1;Vt=2,Ut/=2,br/=2,ge/=2}function xr(_n,si){return Vt===1?_n[si]:_n.readUInt16BE(si*Vt)}var Or;if(yt){var Hr=-1;for(Or=ge;Or<Ut;Or++)if(xr(xe,Or)===xr(ce,Hr===-1?0:Or-Hr)){if(Hr===-1&&(Hr=Or),Or-Hr+1===br)return Hr*Vt}else Hr!==-1&&(Or-=Or-Hr),Hr=-1}else for(ge+br>Ut&&(ge=Ut-br),Or=ge;Or>=0;Or--){for(var gr=!0,Ur=0;Ur<br;Ur++)if(xr(xe,Or+Ur)!==xr(ce,Ur)){gr=!1;break}if(gr)return Or}return-1}d.prototype.includes=function(ce,ge,qe){return this.indexOf(ce,ge,qe)!==-1},d.prototype.indexOf=function(ce,ge,qe){return fe(this,ce,ge,qe,!0)},d.prototype.lastIndexOf=function(ce,ge,qe){return fe(this,ce,ge,qe,!1)};function X(xe,ce,ge,qe){ge=Number(ge)||0;var yt=xe.length-ge;qe?(qe=Number(qe),qe>yt&&(qe=yt)):qe=yt;var Vt=ce.length;qe>Vt/2&&(qe=Vt/2);var Ut;for(Ut=0;Ut<qe;++Ut){var br=parseInt(ce.substr(Ut*2,2),16);if(qt(br))return Ut;xe[ge+Ut]=br}return Ut}function ae(xe,ce,ge,qe){return nr(gt(ce,xe.length-ge),xe,ge,qe)}function oe(xe,ce,ge,qe){return nr(Qt(ce),xe,ge,qe)}function _e(xe,ce,ge,qe){return nr(fr(ce),xe,ge,qe)}function be(xe,ce,ge,qe){return nr(Jt(ce,xe.length-ge),xe,ge,qe)}d.prototype.write=function(ce,ge,qe,yt){if(ge===void 0)yt="utf8",qe=this.length,ge=0;else if(qe===void 0&&typeof ge=="string")yt=ge,qe=this.length,ge=0;else if(isFinite(ge))ge=ge>>>0,isFinite(qe)?(qe=qe>>>0,yt===void 0&&(yt="utf8")):(yt=qe,qe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Vt=this.length-ge;if((qe===void 0||qe>Vt)&&(qe=Vt),ce.length>0&&(qe<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");yt||(yt="utf8");for(var Ut=!1;;)switch(yt){case"hex":return X(this,ce,ge,qe);case"utf8":case"utf-8":return ae(this,ce,ge,qe);case"ascii":case"latin1":case"binary":return oe(this,ce,ge,qe);case"base64":return _e(this,ce,ge,qe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,ce,ge,qe);default:if(Ut)throw new TypeError("Unknown encoding: "+yt);yt=(""+yt).toLowerCase(),Ut=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(xe,ce,ge){return ce===0&&ge===xe.length?b.fromByteArray(xe):b.fromByteArray(xe.slice(ce,ge))}function ie(xe,ce,ge){ge=Math.min(xe.length,ge);for(var qe=[],yt=ce;yt<ge;){var Vt=xe[yt],Ut=null,br=Vt>239?4:Vt>223?3:Vt>191?2:1;if(yt+br<=ge){var xr=void 0,Or=void 0,Hr=void 0,gr=void 0;switch(br){case 1:Vt<128&&(Ut=Vt);break;case 2:xr=xe[yt+1],(xr&192)===128&&(gr=(Vt&31)<<6|xr&63,gr>127&&(Ut=gr));break;case 3:xr=xe[yt+1],Or=xe[yt+2],(xr&192)===128&&(Or&192)===128&&(gr=(Vt&15)<<12|(xr&63)<<6|Or&63,gr>2047&&(gr<55296||gr>57343)&&(Ut=gr));break;case 4:xr=xe[yt+1],Or=xe[yt+2],Hr=xe[yt+3],(xr&192)===128&&(Or&192)===128&&(Hr&192)===128&&(gr=(Vt&15)<<18|(xr&63)<<12|(Or&63)<<6|Hr&63,gr>65535&&gr<1114112&&(Ut=gr))}}Ut===null?(Ut=65533,br=1):Ut>65535&&(Ut-=65536,qe.push(Ut>>>10&1023|55296),Ut=56320|Ut&1023),qe.push(Ut),yt+=br}return ue(qe)}var ye=4096;function ue(xe){var ce=xe.length;if(ce<=ye)return String.fromCharCode.apply(String,xe);for(var ge="",qe=0;qe<ce;)ge+=String.fromCharCode.apply(String,xe.slice(qe,qe+=ye));return ge}function Ae(xe,ce,ge){var qe="";ge=Math.min(xe.length,ge);for(var yt=ce;yt<ge;++yt)qe+=String.fromCharCode(xe[yt]&127);return qe}function Re(xe,ce,ge){var qe="";ge=Math.min(xe.length,ge);for(var yt=ce;yt<ge;++yt)qe+=String.fromCharCode(xe[yt]);return qe}function ze(xe,ce,ge){var qe=xe.length;(!ce||ce<0)&&(ce=0),(!ge||ge<0||ge>qe)&&(ge=qe);for(var yt="",Vt=ce;Vt<ge;++Vt)yt+=xt[xe[Vt]];return yt}function et(xe,ce,ge){for(var qe=xe.slice(ce,ge),yt="",Vt=0;Vt<qe.length-1;Vt+=2)yt+=String.fromCharCode(qe[Vt]+qe[Vt+1]*256);return yt}d.prototype.slice=function(ce,ge){var qe=this.length;ce=~~ce,ge=ge===void 0?qe:~~ge,ce<0?(ce+=qe,ce<0&&(ce=0)):ce>qe&&(ce=qe),ge<0?(ge+=qe,ge<0&&(ge=0)):ge>qe&&(ge=qe),ge<ce&&(ge=ce);var yt=this.subarray(ce,ge);return Object.setPrototypeOf(yt,d.prototype),yt};function Le(xe,ce,ge){if(xe%1!==0||xe<0)throw new RangeError("offset is not uint");if(xe+ce>ge)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(ce,ge,qe){ce=ce>>>0,ge=ge>>>0,qe||Le(ce,ge,this.length);for(var yt=this[ce],Vt=1,Ut=0;++Ut<ge&&(Vt*=256);)yt+=this[ce+Ut]*Vt;return yt},d.prototype.readUintBE=d.prototype.readUIntBE=function(ce,ge,qe){ce=ce>>>0,ge=ge>>>0,qe||Le(ce,ge,this.length);for(var yt=this[ce+--ge],Vt=1;ge>0&&(Vt*=256);)yt+=this[ce+--ge]*Vt;return yt},d.prototype.readUint8=d.prototype.readUInt8=function(ce,ge){return ce=ce>>>0,ge||Le(ce,1,this.length),this[ce]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,2,this.length),this[ce]|this[ce+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,2,this.length),this[ce]<<8|this[ce+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},d.prototype.readBigUInt64LE=At(function(ce){ce=ce>>>0,lt(ce,"offset");var ge=this[ce],qe=this[ce+7];(ge===void 0||qe===void 0)&&rt(ce,this.length-8);var yt=ge+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24),Vt=this[++ce]+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+qe*Math.pow(2,24);return BigInt(yt)+(BigInt(Vt)<<BigInt(32))}),d.prototype.readBigUInt64BE=At(function(ce){ce=ce>>>0,lt(ce,"offset");var ge=this[ce],qe=this[ce+7];(ge===void 0||qe===void 0)&&rt(ce,this.length-8);var yt=ge*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce],Vt=this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+qe;return(BigInt(yt)<<BigInt(32))+BigInt(Vt)}),d.prototype.readIntLE=function(ce,ge,qe){ce=ce>>>0,ge=ge>>>0,qe||Le(ce,ge,this.length);for(var yt=this[ce],Vt=1,Ut=0;++Ut<ge&&(Vt*=256);)yt+=this[ce+Ut]*Vt;return Vt*=128,yt>=Vt&&(yt-=Math.pow(2,8*ge)),yt},d.prototype.readIntBE=function(ce,ge,qe){ce=ce>>>0,ge=ge>>>0,qe||Le(ce,ge,this.length);for(var yt=ge,Vt=1,Ut=this[ce+--yt];yt>0&&(Vt*=256);)Ut+=this[ce+--yt]*Vt;return Vt*=128,Ut>=Vt&&(Ut-=Math.pow(2,8*ge)),Ut},d.prototype.readInt8=function(ce,ge){return ce=ce>>>0,ge||Le(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},d.prototype.readInt16LE=function(ce,ge){ce=ce>>>0,ge||Le(ce,2,this.length);var qe=this[ce]|this[ce+1]<<8;return qe&32768?qe|4294901760:qe},d.prototype.readInt16BE=function(ce,ge){ce=ce>>>0,ge||Le(ce,2,this.length);var qe=this[ce+1]|this[ce]<<8;return qe&32768?qe|4294901760:qe},d.prototype.readInt32LE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},d.prototype.readInt32BE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},d.prototype.readBigInt64LE=At(function(ce){ce=ce>>>0,lt(ce,"offset");var ge=this[ce],qe=this[ce+7];(ge===void 0||qe===void 0)&&rt(ce,this.length-8);var yt=this[ce+4]+this[ce+5]*Math.pow(2,8)+this[ce+6]*Math.pow(2,16)+(qe<<24);return(BigInt(yt)<<BigInt(32))+BigInt(ge+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24))}),d.prototype.readBigInt64BE=At(function(ce){ce=ce>>>0,lt(ce,"offset");var ge=this[ce],qe=this[ce+7];(ge===void 0||qe===void 0)&&rt(ce,this.length-8);var yt=(ge<<24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce];return(BigInt(yt)<<BigInt(32))+BigInt(this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+qe)}),d.prototype.readFloatLE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),w.read(this,ce,!0,23,4)},d.prototype.readFloatBE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,4,this.length),w.read(this,ce,!1,23,4)},d.prototype.readDoubleLE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,8,this.length),w.read(this,ce,!0,52,8)},d.prototype.readDoubleBE=function(ce,ge){return ce=ce>>>0,ge||Le(ce,8,this.length),w.read(this,ce,!1,52,8)};function Ie(xe,ce,ge,qe,yt,Vt){if(!d.isBuffer(xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>yt||ce<Vt)throw new RangeError('"value" argument is out of bounds');if(ge+qe>xe.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(ce,ge,qe,yt){if(ce=+ce,ge=ge>>>0,qe=qe>>>0,!yt){var Vt=Math.pow(2,8*qe)-1;Ie(this,ce,ge,qe,Vt,0)}var Ut=1,br=0;for(this[ge]=ce&255;++br<qe&&(Ut*=256);)this[ge+br]=ce/Ut&255;return ge+qe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(ce,ge,qe,yt){if(ce=+ce,ge=ge>>>0,qe=qe>>>0,!yt){var Vt=Math.pow(2,8*qe)-1;Ie(this,ce,ge,qe,Vt,0)}var Ut=qe-1,br=1;for(this[ge+Ut]=ce&255;--Ut>=0&&(br*=256);)this[ge+Ut]=ce/br&255;return ge+qe},d.prototype.writeUint8=d.prototype.writeUInt8=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,1,255,0),this[ge]=ce&255,ge+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,2,65535,0),this[ge]=ce&255,this[ge+1]=ce>>>8,ge+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,2,65535,0),this[ge]=ce>>>8,this[ge+1]=ce&255,ge+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,4,4294967295,0),this[ge+3]=ce>>>24,this[ge+2]=ce>>>16,this[ge+1]=ce>>>8,this[ge]=ce&255,ge+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,4,4294967295,0),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=ce&255,ge+4};function dt(xe,ce,ge,qe,yt){nt(ce,qe,yt,xe,ge,7);var Vt=Number(ce&BigInt(4294967295));xe[ge++]=Vt,Vt=Vt>>8,xe[ge++]=Vt,Vt=Vt>>8,xe[ge++]=Vt,Vt=Vt>>8,xe[ge++]=Vt;var Ut=Number(ce>>BigInt(32)&BigInt(4294967295));return xe[ge++]=Ut,Ut=Ut>>8,xe[ge++]=Ut,Ut=Ut>>8,xe[ge++]=Ut,Ut=Ut>>8,xe[ge++]=Ut,ge}function ct(xe,ce,ge,qe,yt){nt(ce,qe,yt,xe,ge,7);var Vt=Number(ce&BigInt(4294967295));xe[ge+7]=Vt,Vt=Vt>>8,xe[ge+6]=Vt,Vt=Vt>>8,xe[ge+5]=Vt,Vt=Vt>>8,xe[ge+4]=Vt;var Ut=Number(ce>>BigInt(32)&BigInt(4294967295));return xe[ge+3]=Ut,Ut=Ut>>8,xe[ge+2]=Ut,Ut=Ut>>8,xe[ge+1]=Ut,Ut=Ut>>8,xe[ge]=Ut,ge+8}d.prototype.writeBigUInt64LE=At(function(ce){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return dt(this,ce,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=At(function(ce){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ct(this,ce,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(ce,ge,qe,yt){if(ce=+ce,ge=ge>>>0,!yt){var Vt=Math.pow(2,8*qe-1);Ie(this,ce,ge,qe,Vt-1,-Vt)}var Ut=0,br=1,xr=0;for(this[ge]=ce&255;++Ut<qe&&(br*=256);)ce<0&&xr===0&&this[ge+Ut-1]!==0&&(xr=1),this[ge+Ut]=(ce/br>>0)-xr&255;return ge+qe},d.prototype.writeIntBE=function(ce,ge,qe,yt){if(ce=+ce,ge=ge>>>0,!yt){var Vt=Math.pow(2,8*qe-1);Ie(this,ce,ge,qe,Vt-1,-Vt)}var Ut=qe-1,br=1,xr=0;for(this[ge+Ut]=ce&255;--Ut>=0&&(br*=256);)ce<0&&xr===0&&this[ge+Ut+1]!==0&&(xr=1),this[ge+Ut]=(ce/br>>0)-xr&255;return ge+qe},d.prototype.writeInt8=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,1,127,-128),ce<0&&(ce=255+ce+1),this[ge]=ce&255,ge+1},d.prototype.writeInt16LE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,2,32767,-32768),this[ge]=ce&255,this[ge+1]=ce>>>8,ge+2},d.prototype.writeInt16BE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,2,32767,-32768),this[ge]=ce>>>8,this[ge+1]=ce&255,ge+2},d.prototype.writeInt32LE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,4,2147483647,-2147483648),this[ge]=ce&255,this[ge+1]=ce>>>8,this[ge+2]=ce>>>16,this[ge+3]=ce>>>24,ge+4},d.prototype.writeInt32BE=function(ce,ge,qe){return ce=+ce,ge=ge>>>0,qe||Ie(this,ce,ge,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=ce&255,ge+4},d.prototype.writeBigInt64LE=At(function(ce){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return dt(this,ce,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=At(function(ce){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ct(this,ce,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ke(xe,ce,ge,qe,yt,Vt){if(ge+qe>xe.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function _t(xe,ce,ge,qe,yt){return ce=+ce,ge=ge>>>0,yt||Ke(xe,ce,ge,4,34028234663852886e22,-34028234663852886e22),w.write(xe,ce,ge,qe,23,4),ge+4}d.prototype.writeFloatLE=function(ce,ge,qe){return _t(this,ce,ge,!0,qe)},d.prototype.writeFloatBE=function(ce,ge,qe){return _t(this,ce,ge,!1,qe)};function zt(xe,ce,ge,qe,yt){return ce=+ce,ge=ge>>>0,yt||Ke(xe,ce,ge,8,17976931348623157e292,-17976931348623157e292),w.write(xe,ce,ge,qe,52,8),ge+8}d.prototype.writeDoubleLE=function(ce,ge,qe){return zt(this,ce,ge,!0,qe)},d.prototype.writeDoubleBE=function(ce,ge,qe){return zt(this,ce,ge,!1,qe)},d.prototype.copy=function(ce,ge,qe,yt){if(!d.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(qe||(qe=0),!yt&&yt!==0&&(yt=this.length),ge>=ce.length&&(ge=ce.length),ge||(ge=0),yt>0&&yt<qe&&(yt=qe),yt===qe||ce.length===0||this.length===0)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(qe<0||qe>=this.length)throw new RangeError("Index out of range");if(yt<0)throw new RangeError("sourceEnd out of bounds");yt>this.length&&(yt=this.length),ce.length-ge<yt-qe&&(yt=ce.length-ge+qe);var Vt=yt-qe;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ge,qe,yt):Uint8Array.prototype.set.call(ce,this.subarray(qe,yt),ge),Vt},d.prototype.fill=function(ce,ge,qe,yt){if(typeof ce=="string"){if(typeof ge=="string"?(yt=ge,ge=0,qe=this.length):typeof qe=="string"&&(yt=qe,qe=this.length),yt!==void 0&&typeof yt!="string")throw new TypeError("encoding must be a string");if(typeof yt=="string"&&!d.isEncoding(yt))throw new TypeError("Unknown encoding: "+yt);if(ce.length===1){var Vt=ce.charCodeAt(0);(yt==="utf8"&&Vt<128||yt==="latin1")&&(ce=Vt)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(ge<0||this.length<ge||this.length<qe)throw new RangeError("Out of range index");if(qe<=ge)return this;ge=ge>>>0,qe=qe===void 0?this.length:qe>>>0,ce||(ce=0);var Ut;if(typeof ce=="number")for(Ut=ge;Ut<qe;++Ut)this[Ut]=ce;else{var br=d.isBuffer(ce)?ce:d.from(ce,yt),xr=br.length;if(xr===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ut=0;Ut<qe-ge;++Ut)this[Ut+ge]=br[Ut%xr]}return this};var Et={};function Se(xe,ce,ge){Et[xe]=function(qe){c(Vt,qe);var yt=v(Vt);function Vt(){var Ut;return l(this,Vt),Ut=yt.call(this),Object.defineProperty(_(Ut),"message",{value:ce.apply(_(Ut),arguments),writable:!0,configurable:!0}),Ut.name="".concat(Ut.name," [").concat(xe,"]"),Ut.stack,delete Ut.name,Ut}return f(Vt,[{key:"code",get:function(){return xe},set:function(br){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:br,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(xe,"]: ").concat(this.message)}}]),Vt}(ge)}Se("ERR_BUFFER_OUT_OF_BOUNDS",function(xe){return xe?"".concat(xe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Se("ERR_INVALID_ARG_TYPE",function(xe,ce){return'The "'.concat(xe,'" argument must be of type number. Received type ').concat(A(ce))},TypeError),Se("ERR_OUT_OF_RANGE",function(xe,ce,ge){var qe='The value of "'.concat(xe,'" is out of range.'),yt=ge;return Number.isInteger(ge)&&Math.abs(ge)>Math.pow(2,32)?yt=je(String(ge)):typeof ge=="bigint"&&(yt=String(ge),(ge>Math.pow(BigInt(2),BigInt(32))||ge<-Math.pow(BigInt(2),BigInt(32)))&&(yt=je(yt)),yt+="n"),qe+=" It must be ".concat(ce,". Received ").concat(yt),qe},RangeError);function je(xe){for(var ce="",ge=xe.length,qe=xe[0]==="-"?1:0;ge>=qe+4;ge-=3)ce="_".concat(xe.slice(ge-3,ge)).concat(ce);return"".concat(xe.slice(0,ge)).concat(ce)}function ht(xe,ce,ge){lt(ce,"offset"),(xe[ce]===void 0||xe[ce+ge]===void 0)&&rt(ce,xe.length-(ge+1))}function nt(xe,ce,ge,qe,yt,Vt){if(xe>ge||xe<ce){var Ut=typeof ce=="bigint"?"n":"",br;throw Vt>3?ce===0||ce===BigInt(0)?br=">= 0".concat(Ut," and < 2").concat(Ut," ** ").concat((Vt+1)*8).concat(Ut):br=">= -(2".concat(Ut," ** ").concat((Vt+1)*8-1).concat(Ut,") and < 2 ** ")+"".concat((Vt+1)*8-1).concat(Ut):br=">= ".concat(ce).concat(Ut," and <= ").concat(ge).concat(Ut),new Et.ERR_OUT_OF_RANGE("value",br,xe)}ht(qe,yt,Vt)}function lt(xe,ce){if(typeof xe!="number")throw new Et.ERR_INVALID_ARG_TYPE(ce,"number",xe)}function rt(xe,ce,ge){throw Math.floor(xe)!==xe?(lt(xe,ge),new Et.ERR_OUT_OF_RANGE(ge||"offset","an integer",xe)):ce<0?new Et.ERR_BUFFER_OUT_OF_BOUNDS:new Et.ERR_OUT_OF_RANGE(ge||"offset",">= ".concat(ge?1:0," and <= ").concat(ce),xe)}var Xe=/[^+/0-9A-Za-z-_]/g;function ft(xe){if(xe=xe.split("=")[0],xe=xe.trim().replace(Xe,""),xe.length<2)return"";for(;xe.length%4!==0;)xe=xe+"=";return xe}function gt(xe,ce){ce=ce||1/0;for(var ge,qe=xe.length,yt=null,Vt=[],Ut=0;Ut<qe;++Ut){if(ge=xe.charCodeAt(Ut),ge>55295&&ge<57344){if(!yt){if(ge>56319){(ce-=3)>-1&&Vt.push(239,191,189);continue}else if(Ut+1===qe){(ce-=3)>-1&&Vt.push(239,191,189);continue}yt=ge;continue}if(ge<56320){(ce-=3)>-1&&Vt.push(239,191,189),yt=ge;continue}ge=(yt-55296<<10|ge-56320)+65536}else yt&&(ce-=3)>-1&&Vt.push(239,191,189);if(yt=null,ge<128){if((ce-=1)<0)break;Vt.push(ge)}else if(ge<2048){if((ce-=2)<0)break;Vt.push(ge>>6|192,ge&63|128)}else if(ge<65536){if((ce-=3)<0)break;Vt.push(ge>>12|224,ge>>6&63|128,ge&63|128)}else if(ge<1114112){if((ce-=4)<0)break;Vt.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,ge&63|128)}else throw new Error("Invalid code point")}return Vt}function Qt(xe){for(var ce=[],ge=0;ge<xe.length;++ge)ce.push(xe.charCodeAt(ge)&255);return ce}function Jt(xe,ce){for(var ge,qe,yt,Vt=[],Ut=0;Ut<xe.length&&!((ce-=2)<0);++Ut)ge=xe.charCodeAt(Ut),qe=ge>>8,yt=ge%256,Vt.push(yt),Vt.push(qe);return Vt}function fr(xe){return b.toByteArray(ft(xe))}function nr(xe,ce,ge,qe){var yt;for(yt=0;yt<qe&&!(yt+ge>=ce.length||yt>=xe.length);++yt)ce[yt+ge]=xe[yt];return yt}function ur(xe,ce){return xe instanceof ce||xe!=null&&xe.constructor!=null&&xe.constructor.name!=null&&xe.constructor.name===ce.name}function qt(xe){return xe!==xe}var xt=function(){for(var xe="0123456789abcdef",ce=new Array(256),ge=0;ge<16;++ge)for(var qe=ge*16,yt=0;yt<16;++yt)ce[qe+yt]=xe[ge]+xe[yt];return ce}();function At(xe){return typeof BigInt=="undefined"?Je:xe}function Je(){throw new Error("BigInt not supported")}},2321:function(n){"use strict";n.exports=l,n.exports.isMobile=l,n.exports.default=l;var a=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/CrOS/,s=/android|ipad|playbook|silk/i;function l(u){u||(u={});var f=u.ua;if(!f&&typeof navigator!="undefined"&&(f=navigator.userAgent),f&&f.headers&&typeof f.headers["user-agent"]=="string"&&(f=f.headers["user-agent"]),typeof f!="string")return!1;var c=a.test(f)&&!o.test(f)||!!u.tablet&&s.test(f);return!c&&u.tablet&&u.featureDetect&&navigator&&navigator.maxTouchPoints>1&&f.indexOf("Macintosh")!==-1&&f.indexOf("Safari")!==-1&&(c=!0),c}},3910:function(n,a){"use strict";a.byteLength=v,a.toByteArray=_,a.fromByteArray=A;for(var o=[],s=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,c=u.length;f<c;++f)o[f]=u[f],s[u.charCodeAt(f)]=f;s[45]=62,s[95]=63;function h(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.indexOf("=");k===-1&&(k=w);var x=k===w?0:4-k%4;return[k,x]}function v(b){var w=h(b),k=w[0],x=w[1];return(k+x)*3/4-x}function p(b,w,k){return(w+k)*3/4-k}function _(b){var w,k=h(b),x=k[0],E=k[1],M=new l(p(b,x,E)),d=0,C=E>0?x-4:x,S;for(S=0;S<C;S+=4)w=s[b.charCodeAt(S)]<<18|s[b.charCodeAt(S+1)]<<12|s[b.charCodeAt(S+2)]<<6|s[b.charCodeAt(S+3)],M[d++]=w>>16&255,M[d++]=w>>8&255,M[d++]=w&255;return E===2&&(w=s[b.charCodeAt(S)]<<2|s[b.charCodeAt(S+1)]>>4,M[d++]=w&255),E===1&&(w=s[b.charCodeAt(S)]<<10|s[b.charCodeAt(S+1)]<<4|s[b.charCodeAt(S+2)]>>2,M[d++]=w>>8&255,M[d++]=w&255),M}function T(b){return o[b>>18&63]+o[b>>12&63]+o[b>>6&63]+o[b&63]}function g(b,w,k){for(var x,E=[],M=w;M<k;M+=3)x=(b[M]<<16&16711680)+(b[M+1]<<8&65280)+(b[M+2]&255),E.push(T(x));return E.join("")}function A(b){for(var w,k=b.length,x=k%3,E=[],M=16383,d=0,C=k-x;d<C;d+=M)E.push(g(b,d,d+M>C?C:d+M));return x===1?(w=b[k-1],E.push(o[w>>2]+o[w<<4&63]+"==")):x===2&&(w=(b[k-2]<<8)+b[k-1],E.push(o[w>>10]+o[w>>4&63]+o[w<<2&63]+"=")),E.join("")}},3187:function(n,a){a.read=function(o,s,l,u,f){var c,h,v=f*8-u-1,p=(1<<v)-1,_=p>>1,T=-7,g=l?f-1:0,A=l?-1:1,b=o[s+g];for(g+=A,c=b&(1<<-T)-1,b>>=-T,T+=v;T>0;c=c*256+o[s+g],g+=A,T-=8);for(h=c&(1<<-T)-1,c>>=-T,T+=u;T>0;h=h*256+o[s+g],g+=A,T-=8);if(c===0)c=1-_;else{if(c===p)return h?NaN:(b?-1:1)*(1/0);h=h+Math.pow(2,u),c=c-_}return(b?-1:1)*h*Math.pow(2,c-u)},a.write=function(o,s,l,u,f,c){var h,v,p,_=c*8-f-1,T=(1<<_)-1,g=T>>1,A=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=u?0:c-1,w=u?1:-1,k=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(v=isNaN(s)?1:0,h=T):(h=Math.floor(Math.log(s)/Math.LN2),s*(p=Math.pow(2,-h))<1&&(h--,p*=2),h+g>=1?s+=A/p:s+=A*Math.pow(2,1-g),s*p>=2&&(h++,p/=2),h+g>=T?(v=0,h=T):h+g>=1?(v=(s*p-1)*Math.pow(2,f),h=h+g):(v=s*Math.pow(2,g-1)*Math.pow(2,f),h=0));f>=8;o[l+b]=v&255,b+=w,v/=256,f-=8);for(h=h<<f|v,_+=f;_>0;o[l+b]=h&255,b+=w,h/=256,_-=8);o[l+b-w]|=k*128}},1152:function(n,a,o){"use strict";n.exports=h;var s=o(3440),l=o(7774),u=o(9298);function f(v,p){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(_){return v[_]}),this._mode=p,this._active=v[p],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var c=f.prototype;c.flush=function(v){for(var p=this._controllerList,_=0;_<p.length;++_)p[_].flush(v)},c.idle=function(v){for(var p=this._controllerList,_=0;_<p.length;++_)p[_].idle(v)},c.lookAt=function(v,p,_,T){for(var g=this._controllerList,A=0;A<g.length;++A)g[A].lookAt(v,p,_,T)},c.rotate=function(v,p,_,T){for(var g=this._controllerList,A=0;A<g.length;++A)g[A].rotate(v,p,_,T)},c.pan=function(v,p,_,T){for(var g=this._controllerList,A=0;A<g.length;++A)g[A].pan(v,p,_,T)},c.translate=function(v,p,_,T){for(var g=this._controllerList,A=0;A<g.length;++A)g[A].translate(v,p,_,T)},c.setMatrix=function(v,p){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setMatrix(v,p)},c.setDistanceLimits=function(v,p){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setDistanceLimits(v,p)},c.setDistance=function(v,p){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setDistance(v,p)},c.recalcMatrix=function(v){this._active.recalcMatrix(v)},c.getDistance=function(v){return this._active.getDistance(v)},c.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},c.lastT=function(){return this._active.lastT()},c.setMode=function(v){if(v!==this._mode){var p=this._controllerNames.indexOf(v);if(!(p<0)){var _=this._active,T=this._controllerList[p],g=Math.max(_.lastT(),T.lastT());_.recalcMatrix(g),T.setMatrix(g,_.computedMatrix),this._active=T,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},c.getMode=function(){return this._mode};function h(v){v=v||{};var p=v.eye||[0,0,1],_=v.center||[0,0,0],T=v.up||[0,1,0],g=v.distanceLimits||[0,1/0],A=v.mode||"turntable",b=s(),w=l(),k=u();return b.setDistanceLimits(g[0],g[1]),b.lookAt(0,p,_,T),w.setDistanceLimits(g[0],g[1]),w.lookAt(0,p,_,T),k.setDistanceLimits(g[0],g[1]),k.lookAt(0,p,_,T),new f({turntable:b,orbit:w,matrix:k},A)}},8126:function(n,a,o){"use strict";var s=typeof WeakMap=="undefined"?o(5346):WeakMap,l=o(5827),u=o(2944),f=new s;function c(h){var v=f.get(h),p=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!p||!h.isBuffer(p)){var _=l(h,new Float32Array([-1,-1,-1,4,4,-1]));v=u(h,[{buffer:_,type:h.FLOAT,size:2}]),v._triangleBuffer=_,f.set(h,v)}v.bind(),h.drawArrays(h.TRIANGLES,0,3),v.unbind()}n.exports=c},8008:function(n,a,o){var s=o(4930);n.exports=l;function l(u,f,c){f=typeof f=="number"?f:1,c=c||": ";var h=u.split(/\r?\n/),v=String(h.length+f-1).length;return h.map(function(p,_){var T=_+f,g=String(T).length,A=s(T,v-g);return A+c+p}).join(`
`)}},2153:function(n,a,o){"use strict";n.exports=u;var s=o(417);function l(f,c){for(var h=new Array(c+1),v=0;v<f.length;++v)h[v]=f[v];for(var v=0;v<=f.length;++v){for(var p=f.length;p<=c;++p){for(var _=new Array(c),T=0;T<c;++T)_[T]=Math.pow(p+1-v,T);h[p]=_}var g=s.apply(void 0,h);if(g)return!0}return!1}function u(f){var c=f.length;if(c===0)return[];if(c===1)return[0];for(var h=f[0].length,v=[f[0]],p=[0],_=1;_<c;++_){if(v.push(f[_]),!l(v,h)){v.pop();continue}if(p.push(_),p.length===h+1)return p}return p}},4653:function(n,a,o){"use strict";n.exports=u;var s=o(4419),l=o(1778);function u(f,c){return s(c).filter(function(h){for(var v=new Array(h.length),p=0;p<h.length;++p)v[p]=c[h[p]];return l(v)*f<1})}},2350:function(n,a,o){n.exports=u;var s=o(4653),l=o(8691);function u(f,c){return l(s(f,c))}},7896:function(n){n.exports=function(o){return atob(o)}},957:function(n,a,o){"use strict";n.exports=u;var s=o(6606);function l(f){for(var c=0,h=0;h<f.length;++h)c+=f[h];return c}function u(f,c){for(var h=c.length,v=new Array(h+1),p=0;p<h;++p){for(var _=new Array(h+1),T=0;T<=h;++T)_[T]=f[T][p];v[p]=_}v[h]=new Array(h+1);for(var p=0;p<=h;++p)v[h][p]=1;for(var g=new Array(h+1),p=0;p<h;++p)g[p]=c[p];g[h]=1;var A=s(v,g),b=l(A[h+1]);b===0&&(b=1);for(var w=new Array(h+1),p=0;p<=h;++p)w[p]=l(A[p])/b;return w}},1539:function(n,a,o){"use strict";var s=o(8524);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).add(f[0].mul(u[1])),u[1].mul(f[1]))}},8846:function(n){"use strict";n.exports=a;function a(o,s){return o[0].mul(s[1]).cmp(s[0].mul(o[1]))}},9189:function(n,a,o){"use strict";var s=o(8524);n.exports=l;function l(u,f){return s(u[0].mul(f[1]),u[1].mul(f[0]))}},5125:function(n,a,o){"use strict";var s=o(234),l=o(3218),u=o(5514),f=o(2813),c=o(8524),h=o(9189);n.exports=v;function v(p,_){if(s(p))return _?h(p,v(_)):[p[0].clone(),p[1].clone()];var T=0,g,A;if(l(p))g=p.clone();else if(typeof p=="string")g=f(p);else{if(p===0)return[u(0),u(1)];if(p===Math.floor(p))g=u(p);else{for(;p!==Math.floor(p);)p=p*Math.pow(2,256),T-=256;g=u(p)}}if(s(_))g.mul(_[1]),A=_[0].clone();else if(l(_))A=_.clone();else if(typeof _=="string")A=f(_);else if(!_)A=u(1);else if(_===Math.floor(_))A=u(_);else{for(;_!==Math.floor(_);)_=_*Math.pow(2,256),T+=256;A=u(_)}return T>0?g=g.ushln(T):T<0&&(A=A.ushln(-T)),c(g,A)}},234:function(n,a,o){"use strict";var s=o(3218);n.exports=l;function l(u){return Array.isArray(u)&&u.length===2&&s(u[0])&&s(u[1])}},4275:function(n,a,o){"use strict";var s=o(1928);n.exports=l;function l(u){return u.cmp(new s(0))}},9958:function(n,a,o){"use strict";var s=o(4275);n.exports=l;function l(u){var f=u.length,c=u.words,h=0;if(f===1)h=c[0];else if(f===2)h=c[0]+c[1]*67108864;else for(var v=0;v<f;v++){var p=c[v];h+=p*Math.pow(67108864,v)}return s(u)*h}},1112:function(n,a,o){"use strict";var s=o(8362),l=o(2288).countTrailingZeros;n.exports=u;function u(f){var c=l(s.lo(f));if(c<32)return c;var h=l(s.hi(f));return h>20?52:h+32}},3218:function(n,a,o){"use strict";var s=o(1928);n.exports=l;function l(u){return u&&typeof u=="object"&&!!u.words}},5514:function(n,a,o){"use strict";var s=o(1928),l=o(8362);n.exports=u;function u(f){var c=l.exponent(f);return c<52?new s(f):new s(f*Math.pow(2,52-c)).ushln(c-52)}},8524:function(n,a,o){"use strict";var s=o(5514),l=o(4275);n.exports=u;function u(f,c){var h=l(f),v=l(c);if(h===0)return[s(0),s(1)];if(v===0)return[s(0),s(0)];v<0&&(f=f.neg(),c=c.neg());var p=f.gcd(c);return p.cmpn(1)?[f.div(p),c.div(p)]:[f,c]}},2813:function(n,a,o){"use strict";var s=o(1928);n.exports=l;function l(u){return new s(u)}},3962:function(n,a,o){"use strict";var s=o(8524);n.exports=l;function l(u,f){return s(u[0].mul(f[0]),u[1].mul(f[1]))}},4951:function(n,a,o){"use strict";var s=o(4275);n.exports=l;function l(u){return s(u[0])*s(u[1])}},4354:function(n,a,o){"use strict";var s=o(8524);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).sub(u[1].mul(f[0])),u[1].mul(f[1]))}},7999:function(n,a,o){"use strict";var s=o(9958),l=o(1112);n.exports=u;function u(f){var c=f[0],h=f[1];if(c.cmpn(0)===0)return 0;var v=c.abs().divmod(h.abs()),p=v.div,_=s(p),T=v.mod,g=c.negative!==h.negative?-1:1;if(T.cmpn(0)===0)return g*_;if(_){var A=l(_)+4,b=s(T.ushln(A).divRound(h));return g*(_+b*Math.pow(2,-A))}else{var w=h.bitLength()-T.bitLength()+53,b=s(T.ushln(w).divRound(h));return w<1023?g*b*Math.pow(2,-w):(b*=Math.pow(2,-1023),g*b*Math.pow(2,1023-w))}}},5070:function(n){"use strict";function a(c,h,v,p,_){for(var T=_+1;p<=_;){var g=p+_>>>1,A=c[g],b=v!==void 0?v(A,h):A-h;b>=0?(T=g,_=g-1):p=g+1}return T}function o(c,h,v,p,_){for(var T=_+1;p<=_;){var g=p+_>>>1,A=c[g],b=v!==void 0?v(A,h):A-h;b>0?(T=g,_=g-1):p=g+1}return T}function s(c,h,v,p,_){for(var T=p-1;p<=_;){var g=p+_>>>1,A=c[g],b=v!==void 0?v(A,h):A-h;b<0?(T=g,p=g+1):_=g-1}return T}function l(c,h,v,p,_){for(var T=p-1;p<=_;){var g=p+_>>>1,A=c[g],b=v!==void 0?v(A,h):A-h;b<=0?(T=g,p=g+1):_=g-1}return T}function u(c,h,v,p,_){for(;p<=_;){var T=p+_>>>1,g=c[T],A=v!==void 0?v(g,h):g-h;if(A===0)return T;A<=0?p=T+1:_=T-1}return-1}function f(c,h,v,p,_,T){return typeof v=="function"?T(c,h,v,p===void 0?0:p|0,_===void 0?c.length-1:_|0):T(c,h,void 0,v===void 0?0:v|0,p===void 0?c.length-1:p|0)}n.exports={ge:function(c,h,v,p,_){return f(c,h,v,p,_,a)},gt:function(c,h,v,p,_){return f(c,h,v,p,_,o)},lt:function(c,h,v,p,_){return f(c,h,v,p,_,s)},le:function(c,h,v,p,_){return f(c,h,v,p,_,l)},eq:function(c,h,v,p,_){return f(c,h,v,p,_,u)}}},2288:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},1928:function(n,a,o){n=o.nmd(n),function(s,l){"use strict";function u(B,F){if(!B)throw new Error(F||"Assertion failed")}function f(B,F){B.super_=F;var N=function(){};N.prototype=F.prototype,B.prototype=new N,B.prototype.constructor=B}function c(B,F,N){if(c.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((F==="le"||F==="be")&&(N=F,F=10),this._init(B||0,F||10,N||"be"))}typeof s=="object"?s.exports=c:l.BN=c,c.BN=c,c.wordSize=26;var h;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?h=window.Buffer:h=o(6601).Buffer}catch(B){}c.isBN=function(F){return F instanceof c?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===c.wordSize&&Array.isArray(F.words)},c.max=function(F,N){return F.cmp(N)>0?F:N},c.min=function(F,N){return F.cmp(N)<0?F:N},c.prototype._init=function(F,N,Z){if(typeof F=="number")return this._initNumber(F,N,Z);if(typeof F=="object")return this._initArray(F,N,Z);N==="hex"&&(N=16),u(N===(N|0)&&N>=2&&N<=36),F=F.toString().replace(/\s+/g,"");var J=0;F[0]==="-"&&(J++,this.negative=1),J<F.length&&(N===16?this._parseHex(F,J,Z):(this._parseBase(F,N,J),Z==="le"&&this._initArray(this.toArray(),N,Z)))},c.prototype._initNumber=function(F,N,Z){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(u(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),N,Z)},c.prototype._initArray=function(F,N,Z){if(u(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var re,le,fe=0;if(Z==="be")for(J=F.length-1,re=0;J>=0;J-=3)le=F[J]|F[J-1]<<8|F[J-2]<<16,this.words[re]|=le<<fe&67108863,this.words[re+1]=le>>>26-fe&67108863,fe+=24,fe>=26&&(fe-=26,re++);else if(Z==="le")for(J=0,re=0;J<F.length;J+=3)le=F[J]|F[J+1]<<8|F[J+2]<<16,this.words[re]|=le<<fe&67108863,this.words[re+1]=le>>>26-fe&67108863,fe+=24,fe>=26&&(fe-=26,re++);return this.strip()};function v(B,F){var N=B.charCodeAt(F);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function p(B,F,N){var Z=v(B,N);return N-1>=F&&(Z|=v(B,N-1)<<4),Z}c.prototype._parseHex=function(F,N,Z){this.length=Math.ceil((F.length-N)/6),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var re=0,le=0,fe;if(Z==="be")for(J=F.length-1;J>=N;J-=2)fe=p(F,N,J)<<re,this.words[le]|=fe&67108863,re>=18?(re-=18,le+=1,this.words[le]|=fe>>>26):re+=8;else{var K=F.length-N;for(J=K%2===0?N+1:N;J<F.length;J+=2)fe=p(F,N,J)<<re,this.words[le]|=fe&67108863,re>=18?(re-=18,le+=1,this.words[le]|=fe>>>26):re+=8}this.strip()};function _(B,F,N,Z){for(var J=0,re=Math.min(B.length,N),le=F;le<re;le++){var fe=B.charCodeAt(le)-48;J*=Z,fe>=49?J+=fe-49+10:fe>=17?J+=fe-17+10:J+=fe}return J}c.prototype._parseBase=function(F,N,Z){this.words=[0],this.length=1;for(var J=0,re=1;re<=67108863;re*=N)J++;J--,re=re/N|0;for(var le=F.length-Z,fe=le%J,K=Math.min(le,le-fe)+Z,X=0,ae=Z;ae<K;ae+=J)X=_(F,ae,ae+J,N),this.imuln(re),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(fe!==0){var oe=1;for(X=_(F,ae,F.length,N),ae=0;ae<fe;ae++)oe*=N;this.imuln(oe),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},c.prototype.copy=function(F){F.words=new Array(this.length);for(var N=0;N<this.length;N++)F.words[N]=this.words[N];F.length=this.length,F.negative=this.negative,F.red=this.red},c.prototype.clone=function(){var F=new c(null);return this.copy(F),F},c.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(F,N){F=F||10,N=N|0||1;var Z;if(F===16||F==="hex"){Z="";for(var J=0,re=0,le=0;le<this.length;le++){var fe=this.words[le],K=((fe<<J|re)&16777215).toString(16);re=fe>>>24-J&16777215,re!==0||le!==this.length-1?Z=T[6-K.length]+K+Z:Z=K+Z,J+=2,J>=26&&(J-=26,le--)}for(re!==0&&(Z=re.toString(16)+Z);Z.length%N!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(F===(F|0)&&F>=2&&F<=36){var X=g[F],ae=A[F];Z="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var _e=oe.modn(ae).toString(F);oe=oe.idivn(ae),oe.isZero()?Z=_e+Z:Z=T[X-_e.length]+_e+Z}for(this.isZero()&&(Z="0"+Z);Z.length%N!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}u(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(F,N){return u(typeof h!="undefined"),this.toArrayLike(h,F,N)},c.prototype.toArray=function(F,N){return this.toArrayLike(Array,F,N)},c.prototype.toArrayLike=function(F,N,Z){var J=this.byteLength(),re=Z||Math.max(1,J);u(J<=re,"byte array longer than desired length"),u(re>0,"Requested array length <= 0"),this.strip();var le=N==="le",fe=new F(re),K,X,ae=this.clone();if(le){for(X=0;!ae.isZero();X++)K=ae.andln(255),ae.iushrn(8),fe[X]=K;for(;X<re;X++)fe[X]=0}else{for(X=0;X<re-J;X++)fe[X]=0;for(X=0;!ae.isZero();X++)K=ae.andln(255),ae.iushrn(8),fe[re-X-1]=K}return fe},Math.clz32?c.prototype._countBits=function(F){return 32-Math.clz32(F)}:c.prototype._countBits=function(F){var N=F,Z=0;return N>=4096&&(Z+=13,N>>>=13),N>=64&&(Z+=7,N>>>=7),N>=8&&(Z+=4,N>>>=4),N>=2&&(Z+=2,N>>>=2),Z+N},c.prototype._zeroBits=function(F){if(F===0)return 26;var N=F,Z=0;return N&8191||(Z+=13,N>>>=13),N&127||(Z+=7,N>>>=7),N&15||(Z+=4,N>>>=4),N&3||(Z+=2,N>>>=2),N&1||Z++,Z},c.prototype.bitLength=function(){var F=this.words[this.length-1],N=this._countBits(F);return(this.length-1)*26+N};function b(B){for(var F=new Array(B.bitLength()),N=0;N<F.length;N++){var Z=N/26|0,J=N%26;F[N]=(B.words[Z]&1<<J)>>>J}return F}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,N=0;N<this.length;N++){var Z=this._zeroBits(this.words[N]);if(F+=Z,Z!==26)break}return F},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},c.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var N=0;N<F.length;N++)this.words[N]=this.words[N]|F.words[N];return this.strip()},c.prototype.ior=function(F){return u((this.negative|F.negative)===0),this.iuor(F)},c.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},c.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},c.prototype.iuand=function(F){var N;this.length>F.length?N=F:N=this;for(var Z=0;Z<N.length;Z++)this.words[Z]=this.words[Z]&F.words[Z];return this.length=N.length,this.strip()},c.prototype.iand=function(F){return u((this.negative|F.negative)===0),this.iuand(F)},c.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},c.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},c.prototype.iuxor=function(F){var N,Z;this.length>F.length?(N=this,Z=F):(N=F,Z=this);for(var J=0;J<Z.length;J++)this.words[J]=N.words[J]^Z.words[J];if(this!==N)for(;J<N.length;J++)this.words[J]=N.words[J];return this.length=N.length,this.strip()},c.prototype.ixor=function(F){return u((this.negative|F.negative)===0),this.iuxor(F)},c.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},c.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},c.prototype.inotn=function(F){u(typeof F=="number"&&F>=0);var N=Math.ceil(F/26)|0,Z=F%26;this._expand(N),Z>0&&N--;for(var J=0;J<N;J++)this.words[J]=~this.words[J]&67108863;return Z>0&&(this.words[J]=~this.words[J]&67108863>>26-Z),this.strip()},c.prototype.notn=function(F){return this.clone().inotn(F)},c.prototype.setn=function(F,N){u(typeof F=="number"&&F>=0);var Z=F/26|0,J=F%26;return this._expand(Z+1),N?this.words[Z]=this.words[Z]|1<<J:this.words[Z]=this.words[Z]&~(1<<J),this.strip()},c.prototype.iadd=function(F){var N;if(this.negative!==0&&F.negative===0)return this.negative=0,N=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,N=this.isub(F),F.negative=1,N._normSign();var Z,J;this.length>F.length?(Z=this,J=F):(Z=F,J=this);for(var re=0,le=0;le<J.length;le++)N=(Z.words[le]|0)+(J.words[le]|0)+re,this.words[le]=N&67108863,re=N>>>26;for(;re!==0&&le<Z.length;le++)N=(Z.words[le]|0)+re,this.words[le]=N&67108863,re=N>>>26;if(this.length=Z.length,re!==0)this.words[this.length]=re,this.length++;else if(Z!==this)for(;le<Z.length;le++)this.words[le]=Z.words[le];return this},c.prototype.add=function(F){var N;return F.negative!==0&&this.negative===0?(F.negative=0,N=this.sub(F),F.negative^=1,N):F.negative===0&&this.negative!==0?(this.negative=0,N=F.sub(this),this.negative=1,N):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},c.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var N=this.iadd(F);return F.negative=1,N._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var Z=this.cmp(F);if(Z===0)return this.negative=0,this.length=1,this.words[0]=0,this;var J,re;Z>0?(J=this,re=F):(J=F,re=this);for(var le=0,fe=0;fe<re.length;fe++)N=(J.words[fe]|0)-(re.words[fe]|0)+le,le=N>>26,this.words[fe]=N&67108863;for(;le!==0&&fe<J.length;fe++)N=(J.words[fe]|0)+le,le=N>>26,this.words[fe]=N&67108863;if(le===0&&fe<J.length&&J!==this)for(;fe<J.length;fe++)this.words[fe]=J.words[fe];return this.length=Math.max(this.length,fe),J!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(F){return this.clone().isub(F)};function w(B,F,N){N.negative=F.negative^B.negative;var Z=B.length+F.length|0;N.length=Z,Z=Z-1|0;var J=B.words[0]|0,re=F.words[0]|0,le=J*re,fe=le&67108863,K=le/67108864|0;N.words[0]=fe;for(var X=1;X<Z;X++){for(var ae=K>>>26,oe=K&67108863,_e=Math.min(X,F.length-1),be=Math.max(0,X-B.length+1);be<=_e;be++){var he=X-be|0;J=B.words[he]|0,re=F.words[be]|0,le=J*re+oe,ae+=le/67108864|0,oe=le&67108863}N.words[X]=oe|0,K=ae|0}return K!==0?N.words[X]=K|0:N.length--,N.strip()}var k=function(F,N,Z){var J=F.words,re=N.words,le=Z.words,fe=0,K,X,ae,oe=J[0]|0,_e=oe&8191,be=oe>>>13,he=J[1]|0,ie=he&8191,ye=he>>>13,ue=J[2]|0,Ae=ue&8191,Re=ue>>>13,ze=J[3]|0,et=ze&8191,Le=ze>>>13,Ie=J[4]|0,dt=Ie&8191,ct=Ie>>>13,Ke=J[5]|0,_t=Ke&8191,zt=Ke>>>13,Et=J[6]|0,Se=Et&8191,je=Et>>>13,ht=J[7]|0,nt=ht&8191,lt=ht>>>13,rt=J[8]|0,Xe=rt&8191,ft=rt>>>13,gt=J[9]|0,Qt=gt&8191,Jt=gt>>>13,fr=re[0]|0,nr=fr&8191,ur=fr>>>13,qt=re[1]|0,xt=qt&8191,At=qt>>>13,Je=re[2]|0,xe=Je&8191,ce=Je>>>13,ge=re[3]|0,qe=ge&8191,yt=ge>>>13,Vt=re[4]|0,Ut=Vt&8191,br=Vt>>>13,xr=re[5]|0,Or=xr&8191,Hr=xr>>>13,gr=re[6]|0,Ur=gr&8191,_n=gr>>>13,si=re[7]|0,xn=si&8191,ci=si>>>13,Wi=re[8]|0,oi=Wi&8191,Zi=Wi>>>13,Ei=re[9]|0,at=Ei&8191,Ne=Ei>>>13;Z.negative=F.negative^N.negative,Z.length=19,K=Math.imul(_e,nr),X=Math.imul(_e,ur),X=X+Math.imul(be,nr)|0,ae=Math.imul(be,ur);var st=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(st>>>26)|0,st&=67108863,K=Math.imul(ie,nr),X=Math.imul(ie,ur),X=X+Math.imul(ye,nr)|0,ae=Math.imul(ye,ur),K=K+Math.imul(_e,xt)|0,X=X+Math.imul(_e,At)|0,X=X+Math.imul(be,xt)|0,ae=ae+Math.imul(be,At)|0;var mt=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(mt>>>26)|0,mt&=67108863,K=Math.imul(Ae,nr),X=Math.imul(Ae,ur),X=X+Math.imul(Re,nr)|0,ae=Math.imul(Re,ur),K=K+Math.imul(ie,xt)|0,X=X+Math.imul(ie,At)|0,X=X+Math.imul(ye,xt)|0,ae=ae+Math.imul(ye,At)|0,K=K+Math.imul(_e,xe)|0,X=X+Math.imul(_e,ce)|0,X=X+Math.imul(be,xe)|0,ae=ae+Math.imul(be,ce)|0;var Ot=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,K=Math.imul(et,nr),X=Math.imul(et,ur),X=X+Math.imul(Le,nr)|0,ae=Math.imul(Le,ur),K=K+Math.imul(Ae,xt)|0,X=X+Math.imul(Ae,At)|0,X=X+Math.imul(Re,xt)|0,ae=ae+Math.imul(Re,At)|0,K=K+Math.imul(ie,xe)|0,X=X+Math.imul(ie,ce)|0,X=X+Math.imul(ye,xe)|0,ae=ae+Math.imul(ye,ce)|0,K=K+Math.imul(_e,qe)|0,X=X+Math.imul(_e,yt)|0,X=X+Math.imul(be,qe)|0,ae=ae+Math.imul(be,yt)|0;var tr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(tr>>>26)|0,tr&=67108863,K=Math.imul(dt,nr),X=Math.imul(dt,ur),X=X+Math.imul(ct,nr)|0,ae=Math.imul(ct,ur),K=K+Math.imul(et,xt)|0,X=X+Math.imul(et,At)|0,X=X+Math.imul(Le,xt)|0,ae=ae+Math.imul(Le,At)|0,K=K+Math.imul(Ae,xe)|0,X=X+Math.imul(Ae,ce)|0,X=X+Math.imul(Re,xe)|0,ae=ae+Math.imul(Re,ce)|0,K=K+Math.imul(ie,qe)|0,X=X+Math.imul(ie,yt)|0,X=X+Math.imul(ye,qe)|0,ae=ae+Math.imul(ye,yt)|0,K=K+Math.imul(_e,Ut)|0,X=X+Math.imul(_e,br)|0,X=X+Math.imul(be,Ut)|0,ae=ae+Math.imul(be,br)|0;var pr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(pr>>>26)|0,pr&=67108863,K=Math.imul(_t,nr),X=Math.imul(_t,ur),X=X+Math.imul(zt,nr)|0,ae=Math.imul(zt,ur),K=K+Math.imul(dt,xt)|0,X=X+Math.imul(dt,At)|0,X=X+Math.imul(ct,xt)|0,ae=ae+Math.imul(ct,At)|0,K=K+Math.imul(et,xe)|0,X=X+Math.imul(et,ce)|0,X=X+Math.imul(Le,xe)|0,ae=ae+Math.imul(Le,ce)|0,K=K+Math.imul(Ae,qe)|0,X=X+Math.imul(Ae,yt)|0,X=X+Math.imul(Re,qe)|0,ae=ae+Math.imul(Re,yt)|0,K=K+Math.imul(ie,Ut)|0,X=X+Math.imul(ie,br)|0,X=X+Math.imul(ye,Ut)|0,ae=ae+Math.imul(ye,br)|0,K=K+Math.imul(_e,Or)|0,X=X+Math.imul(_e,Hr)|0,X=X+Math.imul(be,Or)|0,ae=ae+Math.imul(be,Hr)|0;var hr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(hr>>>26)|0,hr&=67108863,K=Math.imul(Se,nr),X=Math.imul(Se,ur),X=X+Math.imul(je,nr)|0,ae=Math.imul(je,ur),K=K+Math.imul(_t,xt)|0,X=X+Math.imul(_t,At)|0,X=X+Math.imul(zt,xt)|0,ae=ae+Math.imul(zt,At)|0,K=K+Math.imul(dt,xe)|0,X=X+Math.imul(dt,ce)|0,X=X+Math.imul(ct,xe)|0,ae=ae+Math.imul(ct,ce)|0,K=K+Math.imul(et,qe)|0,X=X+Math.imul(et,yt)|0,X=X+Math.imul(Le,qe)|0,ae=ae+Math.imul(Le,yt)|0,K=K+Math.imul(Ae,Ut)|0,X=X+Math.imul(Ae,br)|0,X=X+Math.imul(Re,Ut)|0,ae=ae+Math.imul(Re,br)|0,K=K+Math.imul(ie,Or)|0,X=X+Math.imul(ie,Hr)|0,X=X+Math.imul(ye,Or)|0,ae=ae+Math.imul(ye,Hr)|0,K=K+Math.imul(_e,Ur)|0,X=X+Math.imul(_e,_n)|0,X=X+Math.imul(be,Ur)|0,ae=ae+Math.imul(be,_n)|0;var Rr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,K=Math.imul(nt,nr),X=Math.imul(nt,ur),X=X+Math.imul(lt,nr)|0,ae=Math.imul(lt,ur),K=K+Math.imul(Se,xt)|0,X=X+Math.imul(Se,At)|0,X=X+Math.imul(je,xt)|0,ae=ae+Math.imul(je,At)|0,K=K+Math.imul(_t,xe)|0,X=X+Math.imul(_t,ce)|0,X=X+Math.imul(zt,xe)|0,ae=ae+Math.imul(zt,ce)|0,K=K+Math.imul(dt,qe)|0,X=X+Math.imul(dt,yt)|0,X=X+Math.imul(ct,qe)|0,ae=ae+Math.imul(ct,yt)|0,K=K+Math.imul(et,Ut)|0,X=X+Math.imul(et,br)|0,X=X+Math.imul(Le,Ut)|0,ae=ae+Math.imul(Le,br)|0,K=K+Math.imul(Ae,Or)|0,X=X+Math.imul(Ae,Hr)|0,X=X+Math.imul(Re,Or)|0,ae=ae+Math.imul(Re,Hr)|0,K=K+Math.imul(ie,Ur)|0,X=X+Math.imul(ie,_n)|0,X=X+Math.imul(ye,Ur)|0,ae=ae+Math.imul(ye,_n)|0,K=K+Math.imul(_e,xn)|0,X=X+Math.imul(_e,ci)|0,X=X+Math.imul(be,xn)|0,ae=ae+Math.imul(be,ci)|0;var Gr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,K=Math.imul(Xe,nr),X=Math.imul(Xe,ur),X=X+Math.imul(ft,nr)|0,ae=Math.imul(ft,ur),K=K+Math.imul(nt,xt)|0,X=X+Math.imul(nt,At)|0,X=X+Math.imul(lt,xt)|0,ae=ae+Math.imul(lt,At)|0,K=K+Math.imul(Se,xe)|0,X=X+Math.imul(Se,ce)|0,X=X+Math.imul(je,xe)|0,ae=ae+Math.imul(je,ce)|0,K=K+Math.imul(_t,qe)|0,X=X+Math.imul(_t,yt)|0,X=X+Math.imul(zt,qe)|0,ae=ae+Math.imul(zt,yt)|0,K=K+Math.imul(dt,Ut)|0,X=X+Math.imul(dt,br)|0,X=X+Math.imul(ct,Ut)|0,ae=ae+Math.imul(ct,br)|0,K=K+Math.imul(et,Or)|0,X=X+Math.imul(et,Hr)|0,X=X+Math.imul(Le,Or)|0,ae=ae+Math.imul(Le,Hr)|0,K=K+Math.imul(Ae,Ur)|0,X=X+Math.imul(Ae,_n)|0,X=X+Math.imul(Re,Ur)|0,ae=ae+Math.imul(Re,_n)|0,K=K+Math.imul(ie,xn)|0,X=X+Math.imul(ie,ci)|0,X=X+Math.imul(ye,xn)|0,ae=ae+Math.imul(ye,ci)|0,K=K+Math.imul(_e,oi)|0,X=X+Math.imul(_e,Zi)|0,X=X+Math.imul(be,oi)|0,ae=ae+Math.imul(be,Zi)|0;var Yr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,K=Math.imul(Qt,nr),X=Math.imul(Qt,ur),X=X+Math.imul(Jt,nr)|0,ae=Math.imul(Jt,ur),K=K+Math.imul(Xe,xt)|0,X=X+Math.imul(Xe,At)|0,X=X+Math.imul(ft,xt)|0,ae=ae+Math.imul(ft,At)|0,K=K+Math.imul(nt,xe)|0,X=X+Math.imul(nt,ce)|0,X=X+Math.imul(lt,xe)|0,ae=ae+Math.imul(lt,ce)|0,K=K+Math.imul(Se,qe)|0,X=X+Math.imul(Se,yt)|0,X=X+Math.imul(je,qe)|0,ae=ae+Math.imul(je,yt)|0,K=K+Math.imul(_t,Ut)|0,X=X+Math.imul(_t,br)|0,X=X+Math.imul(zt,Ut)|0,ae=ae+Math.imul(zt,br)|0,K=K+Math.imul(dt,Or)|0,X=X+Math.imul(dt,Hr)|0,X=X+Math.imul(ct,Or)|0,ae=ae+Math.imul(ct,Hr)|0,K=K+Math.imul(et,Ur)|0,X=X+Math.imul(et,_n)|0,X=X+Math.imul(Le,Ur)|0,ae=ae+Math.imul(Le,_n)|0,K=K+Math.imul(Ae,xn)|0,X=X+Math.imul(Ae,ci)|0,X=X+Math.imul(Re,xn)|0,ae=ae+Math.imul(Re,ci)|0,K=K+Math.imul(ie,oi)|0,X=X+Math.imul(ie,Zi)|0,X=X+Math.imul(ye,oi)|0,ae=ae+Math.imul(ye,Zi)|0,K=K+Math.imul(_e,at)|0,X=X+Math.imul(_e,Ne)|0,X=X+Math.imul(be,at)|0,ae=ae+Math.imul(be,Ne)|0;var vn=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(vn>>>26)|0,vn&=67108863,K=Math.imul(Qt,xt),X=Math.imul(Qt,At),X=X+Math.imul(Jt,xt)|0,ae=Math.imul(Jt,At),K=K+Math.imul(Xe,xe)|0,X=X+Math.imul(Xe,ce)|0,X=X+Math.imul(ft,xe)|0,ae=ae+Math.imul(ft,ce)|0,K=K+Math.imul(nt,qe)|0,X=X+Math.imul(nt,yt)|0,X=X+Math.imul(lt,qe)|0,ae=ae+Math.imul(lt,yt)|0,K=K+Math.imul(Se,Ut)|0,X=X+Math.imul(Se,br)|0,X=X+Math.imul(je,Ut)|0,ae=ae+Math.imul(je,br)|0,K=K+Math.imul(_t,Or)|0,X=X+Math.imul(_t,Hr)|0,X=X+Math.imul(zt,Or)|0,ae=ae+Math.imul(zt,Hr)|0,K=K+Math.imul(dt,Ur)|0,X=X+Math.imul(dt,_n)|0,X=X+Math.imul(ct,Ur)|0,ae=ae+Math.imul(ct,_n)|0,K=K+Math.imul(et,xn)|0,X=X+Math.imul(et,ci)|0,X=X+Math.imul(Le,xn)|0,ae=ae+Math.imul(Le,ci)|0,K=K+Math.imul(Ae,oi)|0,X=X+Math.imul(Ae,Zi)|0,X=X+Math.imul(Re,oi)|0,ae=ae+Math.imul(Re,Zi)|0,K=K+Math.imul(ie,at)|0,X=X+Math.imul(ie,Ne)|0,X=X+Math.imul(ye,at)|0,ae=ae+Math.imul(ye,Ne)|0;var Wr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,K=Math.imul(Qt,xe),X=Math.imul(Qt,ce),X=X+Math.imul(Jt,xe)|0,ae=Math.imul(Jt,ce),K=K+Math.imul(Xe,qe)|0,X=X+Math.imul(Xe,yt)|0,X=X+Math.imul(ft,qe)|0,ae=ae+Math.imul(ft,yt)|0,K=K+Math.imul(nt,Ut)|0,X=X+Math.imul(nt,br)|0,X=X+Math.imul(lt,Ut)|0,ae=ae+Math.imul(lt,br)|0,K=K+Math.imul(Se,Or)|0,X=X+Math.imul(Se,Hr)|0,X=X+Math.imul(je,Or)|0,ae=ae+Math.imul(je,Hr)|0,K=K+Math.imul(_t,Ur)|0,X=X+Math.imul(_t,_n)|0,X=X+Math.imul(zt,Ur)|0,ae=ae+Math.imul(zt,_n)|0,K=K+Math.imul(dt,xn)|0,X=X+Math.imul(dt,ci)|0,X=X+Math.imul(ct,xn)|0,ae=ae+Math.imul(ct,ci)|0,K=K+Math.imul(et,oi)|0,X=X+Math.imul(et,Zi)|0,X=X+Math.imul(Le,oi)|0,ae=ae+Math.imul(Le,Zi)|0,K=K+Math.imul(Ae,at)|0,X=X+Math.imul(Ae,Ne)|0,X=X+Math.imul(Re,at)|0,ae=ae+Math.imul(Re,Ne)|0;var qn=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(qn>>>26)|0,qn&=67108863,K=Math.imul(Qt,qe),X=Math.imul(Qt,yt),X=X+Math.imul(Jt,qe)|0,ae=Math.imul(Jt,yt),K=K+Math.imul(Xe,Ut)|0,X=X+Math.imul(Xe,br)|0,X=X+Math.imul(ft,Ut)|0,ae=ae+Math.imul(ft,br)|0,K=K+Math.imul(nt,Or)|0,X=X+Math.imul(nt,Hr)|0,X=X+Math.imul(lt,Or)|0,ae=ae+Math.imul(lt,Hr)|0,K=K+Math.imul(Se,Ur)|0,X=X+Math.imul(Se,_n)|0,X=X+Math.imul(je,Ur)|0,ae=ae+Math.imul(je,_n)|0,K=K+Math.imul(_t,xn)|0,X=X+Math.imul(_t,ci)|0,X=X+Math.imul(zt,xn)|0,ae=ae+Math.imul(zt,ci)|0,K=K+Math.imul(dt,oi)|0,X=X+Math.imul(dt,Zi)|0,X=X+Math.imul(ct,oi)|0,ae=ae+Math.imul(ct,Zi)|0,K=K+Math.imul(et,at)|0,X=X+Math.imul(et,Ne)|0,X=X+Math.imul(Le,at)|0,ae=ae+Math.imul(Le,Ne)|0;var vi=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(vi>>>26)|0,vi&=67108863,K=Math.imul(Qt,Ut),X=Math.imul(Qt,br),X=X+Math.imul(Jt,Ut)|0,ae=Math.imul(Jt,br),K=K+Math.imul(Xe,Or)|0,X=X+Math.imul(Xe,Hr)|0,X=X+Math.imul(ft,Or)|0,ae=ae+Math.imul(ft,Hr)|0,K=K+Math.imul(nt,Ur)|0,X=X+Math.imul(nt,_n)|0,X=X+Math.imul(lt,Ur)|0,ae=ae+Math.imul(lt,_n)|0,K=K+Math.imul(Se,xn)|0,X=X+Math.imul(Se,ci)|0,X=X+Math.imul(je,xn)|0,ae=ae+Math.imul(je,ci)|0,K=K+Math.imul(_t,oi)|0,X=X+Math.imul(_t,Zi)|0,X=X+Math.imul(zt,oi)|0,ae=ae+Math.imul(zt,Zi)|0,K=K+Math.imul(dt,at)|0,X=X+Math.imul(dt,Ne)|0,X=X+Math.imul(ct,at)|0,ae=ae+Math.imul(ct,Ne)|0;var Mi=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,K=Math.imul(Qt,Or),X=Math.imul(Qt,Hr),X=X+Math.imul(Jt,Or)|0,ae=Math.imul(Jt,Hr),K=K+Math.imul(Xe,Ur)|0,X=X+Math.imul(Xe,_n)|0,X=X+Math.imul(ft,Ur)|0,ae=ae+Math.imul(ft,_n)|0,K=K+Math.imul(nt,xn)|0,X=X+Math.imul(nt,ci)|0,X=X+Math.imul(lt,xn)|0,ae=ae+Math.imul(lt,ci)|0,K=K+Math.imul(Se,oi)|0,X=X+Math.imul(Se,Zi)|0,X=X+Math.imul(je,oi)|0,ae=ae+Math.imul(je,Zi)|0,K=K+Math.imul(_t,at)|0,X=X+Math.imul(_t,Ne)|0,X=X+Math.imul(zt,at)|0,ae=ae+Math.imul(zt,Ne)|0;var Ui=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,K=Math.imul(Qt,Ur),X=Math.imul(Qt,_n),X=X+Math.imul(Jt,Ur)|0,ae=Math.imul(Jt,_n),K=K+Math.imul(Xe,xn)|0,X=X+Math.imul(Xe,ci)|0,X=X+Math.imul(ft,xn)|0,ae=ae+Math.imul(ft,ci)|0,K=K+Math.imul(nt,oi)|0,X=X+Math.imul(nt,Zi)|0,X=X+Math.imul(lt,oi)|0,ae=ae+Math.imul(lt,Zi)|0,K=K+Math.imul(Se,at)|0,X=X+Math.imul(Se,Ne)|0,X=X+Math.imul(je,at)|0,ae=ae+Math.imul(je,Ne)|0;var ji=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(ji>>>26)|0,ji&=67108863,K=Math.imul(Qt,xn),X=Math.imul(Qt,ci),X=X+Math.imul(Jt,xn)|0,ae=Math.imul(Jt,ci),K=K+Math.imul(Xe,oi)|0,X=X+Math.imul(Xe,Zi)|0,X=X+Math.imul(ft,oi)|0,ae=ae+Math.imul(ft,Zi)|0,K=K+Math.imul(nt,at)|0,X=X+Math.imul(nt,Ne)|0,X=X+Math.imul(lt,at)|0,ae=ae+Math.imul(lt,Ne)|0;var ea=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(ea>>>26)|0,ea&=67108863,K=Math.imul(Qt,oi),X=Math.imul(Qt,Zi),X=X+Math.imul(Jt,oi)|0,ae=Math.imul(Jt,Zi),K=K+Math.imul(Xe,at)|0,X=X+Math.imul(Xe,Ne)|0,X=X+Math.imul(ft,at)|0,ae=ae+Math.imul(ft,Ne)|0;var Ra=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,K=Math.imul(Qt,at),X=Math.imul(Qt,Ne),X=X+Math.imul(Jt,at)|0,ae=Math.imul(Jt,Ne);var Li=(fe+K|0)+((X&8191)<<13)|0;return fe=(ae+(X>>>13)|0)+(Li>>>26)|0,Li&=67108863,le[0]=st,le[1]=mt,le[2]=Ot,le[3]=tr,le[4]=pr,le[5]=hr,le[6]=Rr,le[7]=Gr,le[8]=Yr,le[9]=vn,le[10]=Wr,le[11]=qn,le[12]=vi,le[13]=Mi,le[14]=Ui,le[15]=ji,le[16]=ea,le[17]=Ra,le[18]=Li,fe!==0&&(le[19]=fe,Z.length++),Z};Math.imul||(k=w);function x(B,F,N){N.negative=F.negative^B.negative,N.length=B.length+F.length;for(var Z=0,J=0,re=0;re<N.length-1;re++){var le=J;J=0;for(var fe=Z&67108863,K=Math.min(re,F.length-1),X=Math.max(0,re-B.length+1);X<=K;X++){var ae=re-X,oe=B.words[ae]|0,_e=F.words[X]|0,be=oe*_e,he=be&67108863;le=le+(be/67108864|0)|0,he=he+fe|0,fe=he&67108863,le=le+(he>>>26)|0,J+=le>>>26,le&=67108863}N.words[re]=fe,Z=le,le=J}return Z!==0?N.words[re]=Z:N.length--,N.strip()}function E(B,F,N){var Z=new M;return Z.mulp(B,F,N)}c.prototype.mulTo=function(F,N){var Z,J=this.length+F.length;return this.length===10&&F.length===10?Z=k(this,F,N):J<63?Z=w(this,F,N):J<1024?Z=x(this,F,N):Z=E(this,F,N),Z};function M(B,F){this.x=B,this.y=F}M.prototype.makeRBT=function(F){for(var N=new Array(F),Z=c.prototype._countBits(F)-1,J=0;J<F;J++)N[J]=this.revBin(J,Z,F);return N},M.prototype.revBin=function(F,N,Z){if(F===0||F===Z-1)return F;for(var J=0,re=0;re<N;re++)J|=(F&1)<<N-re-1,F>>=1;return J},M.prototype.permute=function(F,N,Z,J,re,le){for(var fe=0;fe<le;fe++)J[fe]=N[F[fe]],re[fe]=Z[F[fe]]},M.prototype.transform=function(F,N,Z,J,re,le){this.permute(le,F,N,Z,J,re);for(var fe=1;fe<re;fe<<=1)for(var K=fe<<1,X=Math.cos(2*Math.PI/K),ae=Math.sin(2*Math.PI/K),oe=0;oe<re;oe+=K)for(var _e=X,be=ae,he=0;he<fe;he++){var ie=Z[oe+he],ye=J[oe+he],ue=Z[oe+he+fe],Ae=J[oe+he+fe],Re=_e*ue-be*Ae;Ae=_e*Ae+be*ue,ue=Re,Z[oe+he]=ie+ue,J[oe+he]=ye+Ae,Z[oe+he+fe]=ie-ue,J[oe+he+fe]=ye-Ae,he!==K&&(Re=X*_e-ae*be,be=X*be+ae*_e,_e=Re)}},M.prototype.guessLen13b=function(F,N){var Z=Math.max(N,F)|1,J=Z&1,re=0;for(Z=Z/2|0;Z;Z=Z>>>1)re++;return 1<<re+1+J},M.prototype.conjugate=function(F,N,Z){if(!(Z<=1))for(var J=0;J<Z/2;J++){var re=F[J];F[J]=F[Z-J-1],F[Z-J-1]=re,re=N[J],N[J]=-N[Z-J-1],N[Z-J-1]=-re}},M.prototype.normalize13b=function(F,N){for(var Z=0,J=0;J<N/2;J++){var re=Math.round(F[2*J+1]/N)*8192+Math.round(F[2*J]/N)+Z;F[J]=re&67108863,re<67108864?Z=0:Z=re/67108864|0}return F},M.prototype.convert13b=function(F,N,Z,J){for(var re=0,le=0;le<N;le++)re=re+(F[le]|0),Z[2*le]=re&8191,re=re>>>13,Z[2*le+1]=re&8191,re=re>>>13;for(le=2*N;le<J;++le)Z[le]=0;u(re===0),u((re&-8192)===0)},M.prototype.stub=function(F){for(var N=new Array(F),Z=0;Z<F;Z++)N[Z]=0;return N},M.prototype.mulp=function(F,N,Z){var J=2*this.guessLen13b(F.length,N.length),re=this.makeRBT(J),le=this.stub(J),fe=new Array(J),K=new Array(J),X=new Array(J),ae=new Array(J),oe=new Array(J),_e=new Array(J),be=Z.words;be.length=J,this.convert13b(F.words,F.length,fe,J),this.convert13b(N.words,N.length,ae,J),this.transform(fe,le,K,X,J,re),this.transform(ae,le,oe,_e,J,re);for(var he=0;he<J;he++){var ie=K[he]*oe[he]-X[he]*_e[he];X[he]=K[he]*_e[he]+X[he]*oe[he],K[he]=ie}return this.conjugate(K,X,J),this.transform(K,X,be,le,J,re),this.conjugate(be,le,J),this.normalize13b(be,J),Z.negative=F.negative^N.negative,Z.length=F.length+N.length,Z.strip()},c.prototype.mul=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),this.mulTo(F,N)},c.prototype.mulf=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),E(this,F,N)},c.prototype.imul=function(F){return this.clone().mulTo(F,this)},c.prototype.imuln=function(F){u(typeof F=="number"),u(F<67108864);for(var N=0,Z=0;Z<this.length;Z++){var J=(this.words[Z]|0)*F,re=(J&67108863)+(N&67108863);N>>=26,N+=J/67108864|0,N+=re>>>26,this.words[Z]=re&67108863}return N!==0&&(this.words[Z]=N,this.length++),this},c.prototype.muln=function(F){return this.clone().imuln(F)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(F){var N=b(F);if(N.length===0)return new c(1);for(var Z=this,J=0;J<N.length&&N[J]===0;J++,Z=Z.sqr());if(++J<N.length)for(var re=Z.sqr();J<N.length;J++,re=re.sqr())N[J]!==0&&(Z=Z.mul(re));return Z},c.prototype.iushln=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26,J=67108863>>>26-N<<26-N,re;if(N!==0){var le=0;for(re=0;re<this.length;re++){var fe=this.words[re]&J,K=(this.words[re]|0)-fe<<N;this.words[re]=K|le,le=fe>>>26-N}le&&(this.words[re]=le,this.length++)}if(Z!==0){for(re=this.length-1;re>=0;re--)this.words[re+Z]=this.words[re];for(re=0;re<Z;re++)this.words[re]=0;this.length+=Z}return this.strip()},c.prototype.ishln=function(F){return u(this.negative===0),this.iushln(F)},c.prototype.iushrn=function(F,N,Z){u(typeof F=="number"&&F>=0);var J;N?J=(N-N%26)/26:J=0;var re=F%26,le=Math.min((F-re)/26,this.length),fe=67108863^67108863>>>re<<re,K=Z;if(J-=le,J=Math.max(0,J),K){for(var X=0;X<le;X++)K.words[X]=this.words[X];K.length=le}if(le!==0)if(this.length>le)for(this.length-=le,X=0;X<this.length;X++)this.words[X]=this.words[X+le];else this.words[0]=0,this.length=1;var ae=0;for(X=this.length-1;X>=0&&(ae!==0||X>=J);X--){var oe=this.words[X]|0;this.words[X]=ae<<26-re|oe>>>re,ae=oe&fe}return K&&ae!==0&&(K.words[K.length++]=ae),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(F,N,Z){return u(this.negative===0),this.iushrn(F,N,Z)},c.prototype.shln=function(F){return this.clone().ishln(F)},c.prototype.ushln=function(F){return this.clone().iushln(F)},c.prototype.shrn=function(F){return this.clone().ishrn(F)},c.prototype.ushrn=function(F){return this.clone().iushrn(F)},c.prototype.testn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26,J=1<<N;if(this.length<=Z)return!1;var re=this.words[Z];return!!(re&J)},c.prototype.imaskn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(N!==0&&Z++,this.length=Math.min(Z,this.length),N!==0){var J=67108863^67108863>>>N<<N;this.words[this.length-1]&=J}return this.strip()},c.prototype.maskn=function(F){return this.clone().imaskn(F)},c.prototype.iaddn=function(F){return u(typeof F=="number"),u(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},c.prototype._iaddn=function(F){this.words[0]+=F;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},c.prototype.isubn=function(F){if(u(typeof F=="number"),u(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},c.prototype.addn=function(F){return this.clone().iaddn(F)},c.prototype.subn=function(F){return this.clone().isubn(F)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(F,N,Z){var J=F.length+Z,re;this._expand(J);var le,fe=0;for(re=0;re<F.length;re++){le=(this.words[re+Z]|0)+fe;var K=(F.words[re]|0)*N;le-=K&67108863,fe=(le>>26)-(K/67108864|0),this.words[re+Z]=le&67108863}for(;re<this.length-Z;re++)le=(this.words[re+Z]|0)+fe,fe=le>>26,this.words[re+Z]=le&67108863;if(fe===0)return this.strip();for(u(fe===-1),fe=0,re=0;re<this.length;re++)le=-(this.words[re]|0)+fe,fe=le>>26,this.words[re]=le&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(F,N){var Z=this.length-F.length,J=this.clone(),re=F,le=re.words[re.length-1]|0,fe=this._countBits(le);Z=26-fe,Z!==0&&(re=re.ushln(Z),J.iushln(Z),le=re.words[re.length-1]|0);var K=J.length-re.length,X;if(N!=="mod"){X=new c(null),X.length=K+1,X.words=new Array(X.length);for(var ae=0;ae<X.length;ae++)X.words[ae]=0}var oe=J.clone()._ishlnsubmul(re,1,K);oe.negative===0&&(J=oe,X&&(X.words[K]=1));for(var _e=K-1;_e>=0;_e--){var be=(J.words[re.length+_e]|0)*67108864+(J.words[re.length+_e-1]|0);for(be=Math.min(be/le|0,67108863),J._ishlnsubmul(re,be,_e);J.negative!==0;)be--,J.negative=0,J._ishlnsubmul(re,1,_e),J.isZero()||(J.negative^=1);X&&(X.words[_e]=be)}return X&&X.strip(),J.strip(),N!=="div"&&Z!==0&&J.iushrn(Z),{div:X||null,mod:J}},c.prototype.divmod=function(F,N,Z){if(u(!F.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var J,re,le;return this.negative!==0&&F.negative===0?(le=this.neg().divmod(F,N),N!=="mod"&&(J=le.div.neg()),N!=="div"&&(re=le.mod.neg(),Z&&re.negative!==0&&re.iadd(F)),{div:J,mod:re}):this.negative===0&&F.negative!==0?(le=this.divmod(F.neg(),N),N!=="mod"&&(J=le.div.neg()),{div:J,mod:le.mod}):this.negative&F.negative?(le=this.neg().divmod(F.neg(),N),N!=="div"&&(re=le.mod.neg(),Z&&re.negative!==0&&re.isub(F)),{div:le.div,mod:re}):F.length>this.length||this.cmp(F)<0?{div:new c(0),mod:this}:F.length===1?N==="div"?{div:this.divn(F.words[0]),mod:null}:N==="mod"?{div:null,mod:new c(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new c(this.modn(F.words[0]))}:this._wordDiv(F,N)},c.prototype.div=function(F){return this.divmod(F,"div",!1).div},c.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},c.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},c.prototype.divRound=function(F){var N=this.divmod(F);if(N.mod.isZero())return N.div;var Z=N.div.negative!==0?N.mod.isub(F):N.mod,J=F.ushrn(1),re=F.andln(1),le=Z.cmp(J);return le<0||re===1&&le===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},c.prototype.modn=function(F){u(F<=67108863);for(var N=(1<<26)%F,Z=0,J=this.length-1;J>=0;J--)Z=(N*Z+(this.words[J]|0))%F;return Z},c.prototype.idivn=function(F){u(F<=67108863);for(var N=0,Z=this.length-1;Z>=0;Z--){var J=(this.words[Z]|0)+N*67108864;this.words[Z]=J/F|0,N=J%F}return this.strip()},c.prototype.divn=function(F){return this.clone().idivn(F)},c.prototype.egcd=function(F){u(F.negative===0),u(!F.isZero());var N=this,Z=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var J=new c(1),re=new c(0),le=new c(0),fe=new c(1),K=0;N.isEven()&&Z.isEven();)N.iushrn(1),Z.iushrn(1),++K;for(var X=Z.clone(),ae=N.clone();!N.isZero();){for(var oe=0,_e=1;!(N.words[0]&_e)&&oe<26;++oe,_e<<=1);if(oe>0)for(N.iushrn(oe);oe-- >0;)(J.isOdd()||re.isOdd())&&(J.iadd(X),re.isub(ae)),J.iushrn(1),re.iushrn(1);for(var be=0,he=1;!(Z.words[0]&he)&&be<26;++be,he<<=1);if(be>0)for(Z.iushrn(be);be-- >0;)(le.isOdd()||fe.isOdd())&&(le.iadd(X),fe.isub(ae)),le.iushrn(1),fe.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),J.isub(le),re.isub(fe)):(Z.isub(N),le.isub(J),fe.isub(re))}return{a:le,b:fe,gcd:Z.iushln(K)}},c.prototype._invmp=function(F){u(F.negative===0),u(!F.isZero());var N=this,Z=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var J=new c(1),re=new c(0),le=Z.clone();N.cmpn(1)>0&&Z.cmpn(1)>0;){for(var fe=0,K=1;!(N.words[0]&K)&&fe<26;++fe,K<<=1);if(fe>0)for(N.iushrn(fe);fe-- >0;)J.isOdd()&&J.iadd(le),J.iushrn(1);for(var X=0,ae=1;!(Z.words[0]&ae)&&X<26;++X,ae<<=1);if(X>0)for(Z.iushrn(X);X-- >0;)re.isOdd()&&re.iadd(le),re.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),J.isub(re)):(Z.isub(N),re.isub(J))}var oe;return N.cmpn(1)===0?oe=J:oe=re,oe.cmpn(0)<0&&oe.iadd(F),oe},c.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var N=this.clone(),Z=F.clone();N.negative=0,Z.negative=0;for(var J=0;N.isEven()&&Z.isEven();J++)N.iushrn(1),Z.iushrn(1);do{for(;N.isEven();)N.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var re=N.cmp(Z);if(re<0){var le=N;N=Z,Z=le}else if(re===0||Z.cmpn(1)===0)break;N.isub(Z)}while(!0);return Z.iushln(J)},c.prototype.invm=function(F){return this.egcd(F).a.umod(F)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(F){return this.words[0]&F},c.prototype.bincn=function(F){u(typeof F=="number");var N=F%26,Z=(F-N)/26,J=1<<N;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=J,this;for(var re=J,le=Z;re!==0&&le<this.length;le++){var fe=this.words[le]|0;fe+=re,re=fe>>>26,fe&=67108863,this.words[le]=fe}return re!==0&&(this.words[le]=re,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(F){var N=F<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;this.strip();var Z;if(this.length>1)Z=1;else{N&&(F=-F),u(F<=67108863,"Number is too big");var J=this.words[0]|0;Z=J===F?0:J<F?-1:1}return this.negative!==0?-Z|0:Z},c.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var N=this.ucmp(F);return this.negative!==0?-N|0:N},c.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var N=0,Z=this.length-1;Z>=0;Z--){var J=this.words[Z]|0,re=F.words[Z]|0;if(J!==re){J<re?N=-1:J>re&&(N=1);break}}return N},c.prototype.gtn=function(F){return this.cmpn(F)===1},c.prototype.gt=function(F){return this.cmp(F)===1},c.prototype.gten=function(F){return this.cmpn(F)>=0},c.prototype.gte=function(F){return this.cmp(F)>=0},c.prototype.ltn=function(F){return this.cmpn(F)===-1},c.prototype.lt=function(F){return this.cmp(F)===-1},c.prototype.lten=function(F){return this.cmpn(F)<=0},c.prototype.lte=function(F){return this.cmp(F)<=0},c.prototype.eqn=function(F){return this.cmpn(F)===0},c.prototype.eq=function(F){return this.cmp(F)===0},c.red=function(F){return new O(F)},c.prototype.toRed=function(F){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},c.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(F){return this.red=F,this},c.prototype.forceRed=function(F){return u(!this.red,"Already a number in reduction context"),this._forceRed(F)},c.prototype.redAdd=function(F){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},c.prototype.redIAdd=function(F){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},c.prototype.redSub=function(F){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},c.prototype.redISub=function(F){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},c.prototype.redShl=function(F){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},c.prototype.redMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},c.prototype.redIMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},c.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(F){return u(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var d={k256:null,p224:null,p192:null,p25519:null};function C(B,F){this.name=B,this.p=new c(F,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var F=new c(null);return F.words=new Array(Math.ceil(this.n/13)),F},C.prototype.ireduce=function(F){var N=F,Z;do this.split(N,this.tmp),N=this.imulK(N),N=N.iadd(this.tmp),Z=N.bitLength();while(Z>this.n);var J=Z<this.n?-1:N.ucmp(this.p);return J===0?(N.words[0]=0,N.length=1):J>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},C.prototype.split=function(F,N){F.iushrn(this.n,0,N)},C.prototype.imulK=function(F){return F.imul(this.k)};function S(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(S,C),S.prototype.split=function(F,N){for(var Z=4194303,J=Math.min(F.length,9),re=0;re<J;re++)N.words[re]=F.words[re];if(N.length=J,F.length<=9){F.words[0]=0,F.length=1;return}var le=F.words[9];for(N.words[N.length++]=le&Z,re=10;re<F.length;re++){var fe=F.words[re]|0;F.words[re-10]=(fe&Z)<<4|le>>>22,le=fe}le>>>=22,F.words[re-10]=le,le===0&&F.length>10?F.length-=10:F.length-=9},S.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var N=0,Z=0;Z<F.length;Z++){var J=F.words[Z]|0;N+=J*977,F.words[Z]=N&67108863,N=J*64+(N/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function P(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(P,C);function D(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(D,C);function z(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(z,C),z.prototype.imulK=function(F){for(var N=0,Z=0;Z<F.length;Z++){var J=(F.words[Z]|0)*19+N,re=J&67108863;J>>>=26,F.words[Z]=re,N=J}return N!==0&&(F.words[F.length++]=N),F},c._prime=function(F){if(d[F])return d[F];var N;if(F==="k256")N=new S;else if(F==="p224")N=new P;else if(F==="p192")N=new D;else if(F==="p25519")N=new z;else throw new Error("Unknown prime "+F);return d[F]=N,N};function O(B){if(typeof B=="string"){var F=c._prime(B);this.m=F.p,this.prime=F}else u(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}O.prototype._verify1=function(F){u(F.negative===0,"red works only with positives"),u(F.red,"red works only with red numbers")},O.prototype._verify2=function(F,N){u((F.negative|N.negative)===0,"red works only with positives"),u(F.red&&F.red===N.red,"red works only with red numbers")},O.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):F.umod(this.m)._forceRed(this)},O.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},O.prototype.add=function(F,N){this._verify2(F,N);var Z=F.add(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},O.prototype.iadd=function(F,N){this._verify2(F,N);var Z=F.iadd(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},O.prototype.sub=function(F,N){this._verify2(F,N);var Z=F.sub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},O.prototype.isub=function(F,N){this._verify2(F,N);var Z=F.isub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},O.prototype.shl=function(F,N){return this._verify1(F),this.imod(F.ushln(N))},O.prototype.imul=function(F,N){return this._verify2(F,N),this.imod(F.imul(N))},O.prototype.mul=function(F,N){return this._verify2(F,N),this.imod(F.mul(N))},O.prototype.isqr=function(F){return this.imul(F,F.clone())},O.prototype.sqr=function(F){return this.mul(F,F)},O.prototype.sqrt=function(F){if(F.isZero())return F.clone();var N=this.m.andln(3);if(u(N%2===1),N===3){var Z=this.m.add(new c(1)).iushrn(2);return this.pow(F,Z)}for(var J=this.m.subn(1),re=0;!J.isZero()&&J.andln(1)===0;)re++,J.iushrn(1);u(!J.isZero());var le=new c(1).toRed(this),fe=le.redNeg(),K=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new c(2*X*X).toRed(this);this.pow(X,K).cmp(fe)!==0;)X.redIAdd(fe);for(var ae=this.pow(X,J),oe=this.pow(F,J.addn(1).iushrn(1)),_e=this.pow(F,J),be=re;_e.cmp(le)!==0;){for(var he=_e,ie=0;he.cmp(le)!==0;ie++)he=he.redSqr();u(ie<be);var ye=this.pow(ae,new c(1).iushln(be-ie-1));oe=oe.redMul(ye),ae=ye.redSqr(),_e=_e.redMul(ae),be=ie}return oe},O.prototype.invm=function(F){var N=F._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},O.prototype.pow=function(F,N){if(N.isZero())return new c(1).toRed(this);if(N.cmpn(1)===0)return F.clone();var Z=4,J=new Array(1<<Z);J[0]=new c(1).toRed(this),J[1]=F;for(var re=2;re<J.length;re++)J[re]=this.mul(J[re-1],F);var le=J[0],fe=0,K=0,X=N.bitLength()%26;for(X===0&&(X=26),re=N.length-1;re>=0;re--){for(var ae=N.words[re],oe=X-1;oe>=0;oe--){var _e=ae>>oe&1;if(le!==J[0]&&(le=this.sqr(le)),_e===0&&fe===0){K=0;continue}fe<<=1,fe|=_e,K++,!(K!==Z&&(re!==0||oe!==0))&&(le=this.mul(le,J[fe]),K=0,fe=0)}X=26}return le},O.prototype.convertTo=function(F){var N=F.umod(this.m);return N===F?N.clone():N},O.prototype.convertFrom=function(F){var N=F.clone();return N.red=null,N},c.mont=function(F){return new V(F)};function V(B){O.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(V,O),V.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},V.prototype.convertFrom=function(F){var N=this.imod(F.mul(this.rinv));return N.red=null,N},V.prototype.imul=function(F,N){if(F.isZero()||N.isZero())return F.words[0]=0,F.length=1,F;var Z=F.imul(N),J=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),re=Z.isub(J).iushrn(this.shift),le=re;return re.cmp(this.m)>=0?le=re.isub(this.m):re.cmpn(0)<0&&(le=re.iadd(this.m)),le._forceRed(this)},V.prototype.mul=function(F,N){if(F.isZero()||N.isZero())return new c(0)._forceRed(this);var Z=F.mul(N),J=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),re=Z.isub(J).iushrn(this.shift),le=re;return re.cmp(this.m)>=0?le=re.isub(this.m):re.cmpn(0)<0&&(le=re.iadd(this.m)),le._forceRed(this)},V.prototype.invm=function(F){var N=this.imod(F._invmp(this.m).mul(this.r2));return N._forceRed(this)}}(n,this)},2692:function(n){"use strict";n.exports=a;function a(o){var s,l,u,f=o.length,c=0;for(s=0;s<f;++s)c+=o[s].length;var h=new Array(c),v=0;for(s=0;s<f;++s){var p=o[s],_=p.length;for(l=0;l<_;++l){var T=h[v++]=new Array(_-1),g=0;for(u=0;u<_;++u)u!==l&&(T[g++]=p[u]);if(l&1){var A=T[1];T[1]=T[0],T[0]=A}}}return h}},2569:function(n,a,o){"use strict";n.exports=g;var s=o(5306),l=o(1390),u=o(2337);function f(A,b){for(var w=0;w<A;++w)if(!(b[w]<=b[w+A]))return!0;return!1}function c(A,b,w,k){for(var x=0,E=0,M=0,d=A.length;M<d;++M){var C=A[M];if(!f(b,C)){for(var S=0;S<2*b;++S)w[x++]=C[S];k[E++]=M}}return E}function h(A,b,w,k){var x=A.length,E=b.length;if(!(x<=0||E<=0)){var M=A[0].length>>>1;if(!(M<=0)){var d,C=s.mallocDouble(2*M*x),S=s.mallocInt32(x);if(x=c(A,M,C,S),x>0){if(M===1&&k)l.init(x),d=l.sweepComplete(M,w,0,x,C,S,0,x,C,S);else{var P=s.mallocDouble(2*M*E),D=s.mallocInt32(E);E=c(b,M,P,D),E>0&&(l.init(x+E),M===1?d=l.sweepBipartite(M,w,0,x,C,S,0,E,P,D):d=u(M,w,k,x,C,S,E,P,D),s.free(P),s.free(D))}s.free(C),s.free(S)}return d}}}var v;function p(A,b){v.push([A,b])}function _(A){return v=[],h(A,A,p,!0),v}function T(A,b){return v=[],h(A,b,p,!1),v}function g(A,b,w){switch(arguments.length){case 1:return _(A);case 2:return typeof b=="function"?h(A,A,b,!0):T(A,b);case 3:return h(A,b,w,!1);default:throw new Error("box-intersect: Invalid arguments")}}},7333:function(n,a){"use strict";function o(){function u(h,v,p,_,T,g,A,b,w,k,x){for(var E=2*h,M=_,d=E*_;M<T;++M,d+=E){var C=g[v+d],S=g[v+d+h],P=A[M];e:for(var D=b,z=E*b;D<w;++D,z+=E){var O=k[v+z],V=k[v+z+h],B=x[D];if(!(V<C||S<O)){for(var F=v+1;F<h;++F){var N=g[F+d],Z=g[F+h+d],J=k[F+z],re=k[F+h+z];if(Z<J||re<N)continue e}var le=p(P,B);if(le!==void 0)return le}}}}function f(h,v,p,_,T,g,A,b,w,k,x){for(var E=2*h,M=b,d=E*b;M<w;++M,d+=E){var C=k[v+d],S=k[v+d+h],P=x[M];e:for(var D=_,z=E*_;D<T;++D,z+=E){var O=g[v+z],V=g[v+z+h],B=A[D];if(!(S<O||V<C)){for(var F=v+1;F<h;++F){var N=g[F+z],Z=g[F+h+z],J=k[F+d],re=k[F+h+d];if(Z<J||re<N)continue e}var le=p(B,P);if(le!==void 0)return le}}}}function c(h,v,p,_,T,g,A,b,w,k,x){return T-_>w-b?u(h,v,p,_,T,g,A,b,w,k,x):f(h,v,p,_,T,g,A,b,w,k,x)}return c}function s(){function u(p,_,T,g,A,b,w,k,x,E,M){for(var d=2*p,C=g,S=d*g;C<A;++C,S+=d){var P=b[_+S],D=b[_+S+p],z=w[C];e:for(var O=k,V=d*k;O<x;++O,V+=d){var B=E[_+V],F=M[O];if(!(B<=P||D<B)){for(var N=_+1;N<p;++N){var Z=b[N+S],J=b[N+p+S],re=E[N+V],le=E[N+p+V];if(J<re||le<Z)continue e}var fe=T(F,z);if(fe!==void 0)return fe}}}}function f(p,_,T,g,A,b,w,k,x,E,M){for(var d=2*p,C=g,S=d*g;C<A;++C,S+=d){var P=b[_+S],D=b[_+S+p],z=w[C];e:for(var O=k,V=d*k;O<x;++O,V+=d){var B=E[_+V],F=M[O];if(!(B<P||D<B)){for(var N=_+1;N<p;++N){var Z=b[N+S],J=b[N+p+S],re=E[N+V],le=E[N+p+V];if(J<re||le<Z)continue e}var fe=T(z,F);if(fe!==void 0)return fe}}}}function c(p,_,T,g,A,b,w,k,x,E,M){for(var d=2*p,C=k,S=d*k;C<x;++C,S+=d){var P=E[_+S],D=M[C];e:for(var z=g,O=d*g;z<A;++z,O+=d){var V=b[_+O],B=b[_+O+p],F=w[z];if(!(P<=V||B<P)){for(var N=_+1;N<p;++N){var Z=b[N+O],J=b[N+p+O],re=E[N+S],le=E[N+p+S];if(J<re||le<Z)continue e}var fe=T(D,F);if(fe!==void 0)return fe}}}}function h(p,_,T,g,A,b,w,k,x,E,M){for(var d=2*p,C=k,S=d*k;C<x;++C,S+=d){var P=E[_+S],D=M[C];e:for(var z=g,O=d*g;z<A;++z,O+=d){var V=b[_+O],B=b[_+O+p],F=w[z];if(!(P<V||B<P)){for(var N=_+1;N<p;++N){var Z=b[N+O],J=b[N+p+O],re=E[N+S],le=E[N+p+S];if(J<re||le<Z)continue e}var fe=T(F,D);if(fe!==void 0)return fe}}}}function v(p,_,T,g,A,b,w,k,x,E,M,d){return b-A>E-x?g?u(p,_,T,A,b,w,k,x,E,M,d):f(p,_,T,A,b,w,k,x,E,M,d):g?c(p,_,T,A,b,w,k,x,E,M,d):h(p,_,T,A,b,w,k,x,E,M,d)}return v}function l(u){return u?o():s()}a.partial=l(!1),a.full=l(!0)},2337:function(n,a,o){"use strict";n.exports=B;var s=o(5306),l=o(2288),u=o(7333),f=u.partial,c=u.full,h=o(1390),v=o(2464),p=o(122),_=128,T=1<<22,g=1<<22,A=p("!(lo>=p0)&&!(p1>=hi)"),b=p("lo===p0"),w=p("lo<p0"),k=p("hi<=p0"),x=p("lo<=p0&&p0<=hi"),E=p("lo<p0&&p0<=hi"),M=6,d=2,C=1024,S=s.mallocInt32(C),P=s.mallocDouble(C);function D(F,N){var Z=8*l.log2(N+1)*(F+1)|0,J=l.nextPow2(M*Z);S.length<J&&(s.free(S),S=s.mallocInt32(J));var re=l.nextPow2(d*Z);P.length<re&&(s.free(P),P=s.mallocDouble(re))}function z(F,N,Z,J,re,le,fe,K,X){var ae=M*F;S[ae]=N,S[ae+1]=Z,S[ae+2]=J,S[ae+3]=re,S[ae+4]=le,S[ae+5]=fe;var oe=d*F;P[oe]=K,P[oe+1]=X}function O(F,N,Z,J,re,le,fe,K,X,ae,oe){var _e=2*F,be=X*_e,he=ae[be+N];e:for(var ie=re,ye=re*_e;ie<le;++ie,ye+=_e){var ue=fe[ye+N],Ae=fe[ye+N+F];if(!(he<ue||Ae<he)&&!(J&&he===ue)){for(var Re=K[ie],ze=N+1;ze<F;++ze){var ue=fe[ye+ze],Ae=fe[ye+ze+F],et=ae[be+ze],Le=ae[be+ze+F];if(Ae<et||Le<ue)continue e}var Ie;if(J?Ie=Z(oe,Re):Ie=Z(Re,oe),Ie!==void 0)return Ie}}}function V(F,N,Z,J,re,le,fe,K,X,ae){var oe=2*F,_e=K*oe,be=X[_e+N];e:for(var he=J,ie=J*oe;he<re;++he,ie+=oe){var ye=fe[he];if(ye!==ae){var ue=le[ie+N],Ae=le[ie+N+F];if(!(be<ue||Ae<be)){for(var Re=N+1;Re<F;++Re){var ue=le[ie+Re],Ae=le[ie+Re+F],ze=X[_e+Re],et=X[_e+Re+F];if(Ae<ze||et<ue)continue e}var Le=Z(ye,ae);if(Le!==void 0)return Le}}}}function B(F,N,Z,J,re,le,fe,K,X){D(F,J+fe);var ae=0,oe=2*F,_e;for(z(ae++,0,0,J,0,fe,Z?16:0,-1/0,1/0),Z||z(ae++,0,0,fe,0,J,1,-1/0,1/0);ae>0;){ae-=1;var be=ae*M,he=S[be],ie=S[be+1],ye=S[be+2],ue=S[be+3],Ae=S[be+4],Re=S[be+5],ze=ae*d,et=P[ze],Le=P[ze+1],Ie=Re&1,dt=!!(Re&16),ct=re,Ke=le,_t=K,zt=X;if(Ie&&(ct=K,Ke=X,_t=re,zt=le),!(Re&2&&(ye=w(F,he,ie,ye,ct,Ke,Le),ie>=ye))&&!(Re&4&&(ie=k(F,he,ie,ye,ct,Ke,et),ie>=ye))){var Et=ye-ie,Se=Ae-ue;if(dt){if(F*Et*(Et+Se)<g){if(_e=h.scanComplete(F,he,N,ie,ye,ct,Ke,ue,Ae,_t,zt),_e!==void 0)return _e;continue}}else if(F*Math.min(Et,Se)<_){if(_e=f(F,he,N,Ie,ie,ye,ct,Ke,ue,Ae,_t,zt),_e!==void 0)return _e;continue}else if(F*Et*Se<T){if(_e=h.scanBipartite(F,he,N,Ie,ie,ye,ct,Ke,ue,Ae,_t,zt),_e!==void 0)return _e;continue}var je=A(F,he,ie,ye,ct,Ke,et,Le);if(ie<je)if(F*(je-ie)<_){if(_e=c(F,he+1,N,ie,je,ct,Ke,ue,Ae,_t,zt),_e!==void 0)return _e}else if(he===F-2){if(Ie?_e=h.sweepBipartite(F,N,ue,Ae,_t,zt,ie,je,ct,Ke):_e=h.sweepBipartite(F,N,ie,je,ct,Ke,ue,Ae,_t,zt),_e!==void 0)return _e}else z(ae++,he+1,ie,je,ue,Ae,Ie,-1/0,1/0),z(ae++,he+1,ue,Ae,ie,je,Ie^1,-1/0,1/0);if(je<ye){var ht=v(F,he,ue,Ae,_t,zt),nt=_t[oe*ht+he],lt=b(F,he,ht,Ae,_t,zt,nt);if(lt<Ae&&z(ae++,he,je,ye,lt,Ae,(Ie|4)+(dt?16:0),nt,Le),ue<ht&&z(ae++,he,je,ye,ue,ht,(Ie|2)+(dt?16:0),et,nt),ht+1===lt){if(dt?_e=V(F,he,N,je,ye,ct,Ke,ht,_t,zt[ht]):_e=O(F,he,N,Ie,je,ye,ct,Ke,ht,_t,zt[ht]),_e!==void 0)return _e}else if(ht<lt){var rt;if(dt){if(rt=x(F,he,je,ye,ct,Ke,nt),je<rt){var Xe=b(F,he,je,rt,ct,Ke,nt);if(he===F-2){if(je<Xe&&(_e=h.sweepComplete(F,N,je,Xe,ct,Ke,ht,lt,_t,zt),_e!==void 0)||Xe<rt&&(_e=h.sweepBipartite(F,N,Xe,rt,ct,Ke,ht,lt,_t,zt),_e!==void 0))return _e}else je<Xe&&z(ae++,he+1,je,Xe,ht,lt,16,-1/0,1/0),Xe<rt&&(z(ae++,he+1,Xe,rt,ht,lt,0,-1/0,1/0),z(ae++,he+1,ht,lt,Xe,rt,1,-1/0,1/0))}}else Ie?rt=E(F,he,je,ye,ct,Ke,nt):rt=x(F,he,je,ye,ct,Ke,nt),je<rt&&(he===F-2?Ie?_e=h.sweepBipartite(F,N,ht,lt,_t,zt,je,rt,ct,Ke):_e=h.sweepBipartite(F,N,je,rt,ct,Ke,ht,lt,_t,zt):(z(ae++,he+1,je,rt,ht,lt,Ie,-1/0,1/0),z(ae++,he+1,ht,lt,je,rt,Ie^1,-1/0,1/0)))}}}}}},2464:function(n,a,o){"use strict";n.exports=c;var s=o(122),l=s("lo<p0"),u=8;function f(h,v,p,_,T,g){for(var A=2*h,b=A*(p+1)+v,w=p+1;w<_;++w,b+=A)for(var k=T[b],x=w,E=A*(w-1);x>p&&T[E+v]>k;--x,E-=A){for(var M=E,d=E+A,C=0;C<A;++C,++M,++d){var S=T[M];T[M]=T[d],T[d]=S}var P=g[x];g[x]=g[x-1],g[x-1]=P}}function c(h,v,p,_,T,g){if(_<=p+1)return p;for(var A=p,b=_,w=_+p>>>1,k=2*h,x=w,E=T[k*w+v];A<b;){if(b-A<u){f(h,v,A,b,T,g),E=T[k*w+v];break}var M=b-A,d=Math.random()*M+A|0,C=T[k*d+v],S=Math.random()*M+A|0,P=T[k*S+v],D=Math.random()*M+A|0,z=T[k*D+v];C<=P?z>=P?(x=S,E=P):C>=z?(x=d,E=C):(x=D,E=z):P>=z?(x=S,E=P):z>=C?(x=d,E=C):(x=D,E=z);for(var B=k*(b-1),F=k*x,O=0;O<k;++O,++B,++F){var V=T[B];T[B]=T[F],T[F]=V}var N=g[b-1];g[b-1]=g[x],g[x]=N,x=l(h,v,A,b-1,T,g,E);for(var B=k*(b-1),F=k*x,O=0;O<k;++O,++B,++F){var V=T[B];T[B]=T[F],T[F]=V}var N=g[b-1];if(g[b-1]=g[x],g[x]=N,w<x){for(b=x-1;A<b&&T[k*(b-1)+v]===E;)b-=1;b+=1}else if(x<w)for(A=x+1;A<b&&T[k*A+v]===E;)A+=1;else break}return l(h,v,p,w,T,g,T[k*w+v])}},122:function(n){"use strict";n.exports=o;var a={"lo===p0":s,"lo<p0":l,"lo<=p0":u,"hi<=p0":f,"lo<p0&&p0<=hi":h,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":v};function o(p){return a[p]}function s(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+d];if(P===w)if(M===S)M+=1,E+=k;else{for(var D=0;k>D;++D){var z=A[x+D];A[x+D]=A[E],A[E++]=z}var O=b[S];b[S]=b[M],b[M++]=O}}return M}function l(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+d];if(P<w)if(M===S)M+=1,E+=k;else{for(var D=0;k>D;++D){var z=A[x+D];A[x+D]=A[E],A[E++]=z}var O=b[S];b[S]=b[M],b[M++]=O}}return M}function u(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+C];if(P<=w)if(M===S)M+=1,E+=k;else{for(var D=0;k>D;++D){var z=A[x+D];A[x+D]=A[E],A[E++]=z}var O=b[S];b[S]=b[M],b[M++]=O}}return M}function f(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+C];if(P<=w)if(M===S)M+=1,E+=k;else{for(var D=0;k>D;++D){var z=A[x+D];A[x+D]=A[E],A[E++]=z}var O=b[S];b[S]=b[M],b[M++]=O}}return M}function c(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+d],D=A[x+C];if(P<=w&&w<=D)if(M===S)M+=1,E+=k;else{for(var z=0;k>z;++z){var O=A[x+z];A[x+z]=A[E],A[E++]=O}var V=b[S];b[S]=b[M],b[M++]=V}}return M}function h(p,_,T,g,A,b,w){for(var k=2*p,x=k*T,E=x,M=T,d=_,C=p+_,S=T;g>S;++S,x+=k){var P=A[x+d],D=A[x+C];if(P<w&&w<=D)if(M===S)M+=1,E+=k;else{for(var z=0;k>z;++z){var O=A[x+z];A[x+z]=A[E],A[E++]=O}var V=b[S];b[S]=b[M],b[M++]=V}}return M}function v(p,_,T,g,A,b,w,k){for(var x=2*p,E=x*T,M=E,d=T,C=_,S=p+_,P=T;g>P;++P,E+=x){var D=A[E+C],z=A[E+S];if(!(D>=w)&&!(k>=z))if(d===P)d+=1,M+=x;else{for(var O=0;x>O;++O){var V=A[E+O];A[E+O]=A[M],A[M++]=V}var B=b[P];b[P]=b[d],b[d++]=B}}return d}},309:function(n){"use strict";n.exports=o;var a=32;function o(_,T){T<=4*a?s(0,T-1,_):p(0,T-1,_)}function s(_,T,g){for(var A=2*(_+1),b=_+1;b<=T;++b){for(var w=g[A++],k=g[A++],x=b,E=A-2;x-- >_;){var M=g[E-2],d=g[E-1];if(M<w)break;if(M===w&&d<k)break;g[E]=M,g[E+1]=d,E-=2}g[E]=w,g[E+1]=k}}function l(_,T,g){_*=2,T*=2;var A=g[_],b=g[_+1];g[_]=g[T],g[_+1]=g[T+1],g[T]=A,g[T+1]=b}function u(_,T,g){_*=2,T*=2,g[_]=g[T],g[_+1]=g[T+1]}function f(_,T,g,A){_*=2,T*=2,g*=2;var b=A[_],w=A[_+1];A[_]=A[T],A[_+1]=A[T+1],A[T]=A[g],A[T+1]=A[g+1],A[g]=b,A[g+1]=w}function c(_,T,g,A,b){_*=2,T*=2,b[_]=b[T],b[T]=g,b[_+1]=b[T+1],b[T+1]=A}function h(_,T,g){_*=2,T*=2;var A=g[_],b=g[T];return A<b?!1:A===b?g[_+1]>g[T+1]:!0}function v(_,T,g,A){_*=2;var b=A[_];return b<T?!0:b===T?A[_+1]<g:!1}function p(_,T,g){var A=(T-_+1)/6|0,b=_+A,w=T-A,k=_+T>>1,x=k-A,E=k+A,M=b,d=x,C=k,S=E,P=w,D=_+1,z=T-1,O=0;h(M,d,g)&&(O=M,M=d,d=O),h(S,P,g)&&(O=S,S=P,P=O),h(M,C,g)&&(O=M,M=C,C=O),h(d,C,g)&&(O=d,d=C,C=O),h(M,S,g)&&(O=M,M=S,S=O),h(C,S,g)&&(O=C,C=S,S=O),h(d,P,g)&&(O=d,d=P,P=O),h(d,C,g)&&(O=d,d=C,C=O),h(S,P,g)&&(O=S,S=P,P=O);for(var V=g[2*d],B=g[2*d+1],F=g[2*S],N=g[2*S+1],Z=2*M,J=2*C,re=2*P,le=2*b,fe=2*k,K=2*w,X=0;X<2;++X){var ae=g[Z+X],oe=g[J+X],_e=g[re+X];g[le+X]=ae,g[fe+X]=oe,g[K+X]=_e}u(x,_,g),u(E,T,g);for(var be=D;be<=z;++be)if(v(be,V,B,g))be!==D&&l(be,D,g),++D;else if(!v(be,F,N,g))for(;;)if(v(z,F,N,g)){v(z,V,B,g)?(f(be,D,z,g),++D,--z):(l(be,z,g),--z);break}else{if(--z<be)break;continue}c(_,D-1,V,B,g),c(T,z+1,F,N,g),D-2-_<=a?s(_,D-2,g):p(_,D-2,g),T-(z+2)<=a?s(z+2,T,g):p(z+2,T,g),z-D<=a?s(D,z,g):p(D,z,g)}},1390:function(n,a,o){"use strict";n.exports={init:b,sweepBipartite:x,sweepComplete:E,scanBipartite:M,scanComplete:d};var s=o(5306),l=o(2288),u=o(309),f=1<<28,c=1024,h=s.mallocInt32(c),v=s.mallocInt32(c),p=s.mallocInt32(c),_=s.mallocInt32(c),T=s.mallocInt32(c),g=s.mallocInt32(c),A=s.mallocDouble(c*8);function b(C){var S=l.nextPow2(C);h.length<S&&(s.free(h),h=s.mallocInt32(S)),v.length<S&&(s.free(v),v=s.mallocInt32(S)),p.length<S&&(s.free(p),p=s.mallocInt32(S)),_.length<S&&(s.free(_),_=s.mallocInt32(S)),T.length<S&&(s.free(T),T=s.mallocInt32(S)),g.length<S&&(s.free(g),g=s.mallocInt32(S));var P=8*S;A.length<P&&(s.free(A),A=s.mallocDouble(P))}function w(C,S,P,D){var z=S[D],O=C[P-1];C[z]=O,S[O]=z}function k(C,S,P,D){C[P]=D,S[D]=P}function x(C,S,P,D,z,O,V,B,F,N){for(var Z=0,J=2*C,re=C-1,le=J-1,fe=P;fe<D;++fe){var K=O[fe],X=J*fe;A[Z++]=z[X+re],A[Z++]=-(K+1),A[Z++]=z[X+le],A[Z++]=K}for(var fe=V;fe<B;++fe){var K=N[fe]+f,ae=J*fe;A[Z++]=F[ae+re],A[Z++]=-K,A[Z++]=F[ae+le],A[Z++]=K}var oe=Z>>>1;u(A,oe);for(var _e=0,be=0,fe=0;fe<oe;++fe){var he=A[2*fe+1]|0;if(he>=f)he=he-f|0,w(p,_,be--,he);else if(he>=0)w(h,v,_e--,he);else if(he<=-f){he=-he-f|0;for(var ie=0;ie<_e;++ie){var ye=S(h[ie],he);if(ye!==void 0)return ye}k(p,_,be++,he)}else{he=-he-1|0;for(var ie=0;ie<be;++ie){var ye=S(he,p[ie]);if(ye!==void 0)return ye}k(h,v,_e++,he)}}}function E(C,S,P,D,z,O,V,B,F,N){for(var Z=0,J=2*C,re=C-1,le=J-1,fe=P;fe<D;++fe){var K=O[fe]+1<<1,X=J*fe;A[Z++]=z[X+re],A[Z++]=-K,A[Z++]=z[X+le],A[Z++]=K}for(var fe=V;fe<B;++fe){var K=N[fe]+1<<1,ae=J*fe;A[Z++]=F[ae+re],A[Z++]=-K|1,A[Z++]=F[ae+le],A[Z++]=K|1}var oe=Z>>>1;u(A,oe);for(var _e=0,be=0,he=0,fe=0;fe<oe;++fe){var ie=A[2*fe+1]|0,ye=ie&1;if(fe<oe-1&&ie>>1===A[2*fe+3]>>1&&(ye=2,fe+=1),ie<0){for(var ue=-(ie>>1)-1,Ae=0;Ae<he;++Ae){var Re=S(T[Ae],ue);if(Re!==void 0)return Re}if(ye!==0)for(var Ae=0;Ae<_e;++Ae){var Re=S(h[Ae],ue);if(Re!==void 0)return Re}if(ye!==1)for(var Ae=0;Ae<be;++Ae){var Re=S(p[Ae],ue);if(Re!==void 0)return Re}ye===0?k(h,v,_e++,ue):ye===1?k(p,_,be++,ue):ye===2&&k(T,g,he++,ue)}else{var ue=(ie>>1)-1;ye===0?w(h,v,_e--,ue):ye===1?w(p,_,be--,ue):ye===2&&w(T,g,he--,ue)}}}function M(C,S,P,D,z,O,V,B,F,N,Z,J){var re=0,le=2*C,fe=S,K=S+C,X=1,ae=1;D?ae=f:X=f;for(var oe=z;oe<O;++oe){var _e=oe+X,be=le*oe;A[re++]=V[be+fe],A[re++]=-_e,A[re++]=V[be+K],A[re++]=_e}for(var oe=F;oe<N;++oe){var _e=oe+ae,he=le*oe;A[re++]=Z[he+fe],A[re++]=-_e}var ie=re>>>1;u(A,ie);for(var ye=0,oe=0;oe<ie;++oe){var ue=A[2*oe+1]|0;if(ue<0){var _e=-ue,Ae=!1;if(_e>=f?(Ae=!D,_e-=f):(Ae=!!D,_e-=1),Ae)k(h,v,ye++,_e);else{var Re=J[_e],ze=le*_e,et=Z[ze+S+1],Le=Z[ze+S+1+C];e:for(var Ie=0;Ie<ye;++Ie){var dt=h[Ie],ct=le*dt;if(!(Le<V[ct+S+1]||V[ct+S+1+C]<et)){for(var Ke=S+2;Ke<C;++Ke)if(Z[ze+Ke+C]<V[ct+Ke]||V[ct+Ke+C]<Z[ze+Ke])continue e;var _t=B[dt],zt;if(D?zt=P(Re,_t):zt=P(_t,Re),zt!==void 0)return zt}}}}else w(h,v,ye--,ue-X)}}function d(C,S,P,D,z,O,V,B,F,N,Z){for(var J=0,re=2*C,le=S,fe=S+C,K=D;K<z;++K){var X=K+f,ae=re*K;A[J++]=O[ae+le],A[J++]=-X,A[J++]=O[ae+fe],A[J++]=X}for(var K=B;K<F;++K){var X=K+1,oe=re*K;A[J++]=N[oe+le],A[J++]=-X}var _e=J>>>1;u(A,_e);for(var be=0,K=0;K<_e;++K){var he=A[2*K+1]|0;if(he<0){var X=-he;if(X>=f)h[be++]=X-f;else{X-=1;var ie=Z[X],ye=re*X,ue=N[ye+S+1],Ae=N[ye+S+1+C];e:for(var Re=0;Re<be;++Re){var ze=h[Re],et=V[ze];if(et===ie)break;var Le=re*ze;if(!(Ae<O[Le+S+1]||O[Le+S+1+C]<ue)){for(var Ie=S+2;Ie<C;++Ie)if(N[ye+Ie+C]<O[Le+Ie]||O[Le+Ie+C]<N[ye+Ie])continue e;var dt=P(et,ie);if(dt!==void 0)return dt}}}}else{for(var X=he-f,Re=be-1;Re>=0;--Re)if(h[Re]===X){for(var Ie=Re+1;Ie<be;++Ie)h[Ie-1]=h[Ie];break}--be}}}},7761:function(n,a,o){"use strict";var s=o(9971),l=o(743),u=o(2161),f=o(7098);n.exports=_;function c(T){return[Math.min(T[0],T[1]),Math.max(T[0],T[1])]}function h(T,g){return T[0]-g[0]||T[1]-g[1]}function v(T){return T.map(c).sort(h)}function p(T,g,A){return g in T?T[g]:A}function _(T,g,A){Array.isArray(g)?(A=A||{},g=g||[]):(A=g||{},g=[]);var b=!!p(A,"delaunay",!0),w=!!p(A,"interior",!0),k=!!p(A,"exterior",!0),x=!!p(A,"infinity",!1);if(!w&&!k||T.length===0)return[];var E=s(T,g);if(b||w!==k||x){for(var M=l(T.length,v(g)),d=0;d<E.length;++d){var C=E[d];M.addTriangle(C[0],C[1],C[2])}return b&&u(T,M),k?w?x?f(M,0,x):M.cells():f(M,1,x):f(M,-1)}else return E}},2161:function(n,a,o){"use strict";var s=o(2227)[4],l=o(5070);n.exports=f;function u(c,h,v,p,_,T){var g=h.opposite(p,_);if(!(g<0)){if(_<p){var A=p;p=_,_=A,A=T,T=g,g=A}h.isConstraint(p,_)||s(c[p],c[_],c[T],c[g])<0&&v.push(p,_)}}function f(c,h){for(var v=[],p=c.length,_=h.stars,T=0;T<p;++T)for(var g=_[T],A=1;A<g.length;A+=2){var b=g[A];if(!(b<T)&&!h.isConstraint(T,b)){for(var w=g[A-1],k=-1,x=1;x<g.length;x+=2)if(g[x-1]===b){k=g[x];break}k<0||s(c[T],c[b],c[w],c[k])<0&&v.push(T,b)}}for(;v.length>0;){for(var b=v.pop(),T=v.pop(),w=-1,k=-1,g=_[T],E=1;E<g.length;E+=2){var M=g[E-1],d=g[E];M===b?k=d:d===b&&(w=M)}w<0||k<0||s(c[T],c[b],c[w],c[k])>=0||(h.flip(T,b),u(c,h,v,w,T,k),u(c,h,v,T,k,w),u(c,h,v,k,b,w),u(c,h,v,b,w,k))}}},7098:function(n,a,o){"use strict";var s=o(5070);n.exports=v;function l(p,_,T,g,A,b,w){this.cells=p,this.neighbor=_,this.flags=g,this.constraint=T,this.active=A,this.next=b,this.boundary=w}var u=l.prototype;function f(p,_){return p[0]-_[0]||p[1]-_[1]||p[2]-_[2]}u.locate=function(){var p=[0,0,0];return function(_,T,g){var A=_,b=T,w=g;return T<g?T<_&&(A=T,b=g,w=_):g<_&&(A=g,b=_,w=T),A<0?-1:(p[0]=A,p[1]=b,p[2]=w,s.eq(this.cells,p,f))}}();function c(p,_){for(var T=p.cells(),g=T.length,A=0;A<g;++A){var b=T[A],w=b[0],k=b[1],x=b[2];k<x?k<w&&(b[0]=k,b[1]=x,b[2]=w):x<w&&(b[0]=x,b[1]=w,b[2]=k)}T.sort(f);for(var E=new Array(g),A=0;A<E.length;++A)E[A]=0;var M=[],d=[],C=new Array(3*g),S=new Array(3*g),P=null;_&&(P=[]);for(var D=new l(T,C,S,E,M,d,P),A=0;A<g;++A)for(var b=T[A],z=0;z<3;++z){var w=b[z],k=b[(z+1)%3],O=C[3*A+z]=D.locate(k,w,p.opposite(k,w)),V=S[3*A+z]=p.isConstraint(w,k);O<0&&(V?d.push(A):(M.push(A),E[A]=1),_&&P.push([k,w,-1]))}return D}function h(p,_,T){for(var g=0,A=0;A<p.length;++A)_[A]===T&&(p[g++]=p[A]);return p.length=g,p}function v(p,_,T){var g=c(p,T);if(_===0)return T?g.cells.concat(g.boundary):g.cells;for(var A=1,b=g.active,w=g.next,k=g.flags,x=g.cells,E=g.constraint,M=g.neighbor;b.length>0||w.length>0;){for(;b.length>0;){var d=b.pop();if(k[d]!==-A){k[d]=A;for(var C=x[d],S=0;S<3;++S){var P=M[3*d+S];P>=0&&k[P]===0&&(E[3*d+S]?w.push(P):(b.push(P),k[P]=A))}}}var D=w;w=b,b=D,w.length=0,A=-A}var z=h(x,k,_);return T?z.concat(g.boundary):z}},9971:function(n,a,o){"use strict";var s=o(5070),l=o(417)[3],u=0,f=1,c=2;n.exports=w;function h(k,x,E,M,d){this.a=k,this.b=x,this.idx=E,this.lowerIds=M,this.upperIds=d}function v(k,x,E,M){this.a=k,this.b=x,this.type=E,this.idx=M}function p(k,x){var E=k.a[0]-x.a[0]||k.a[1]-x.a[1]||k.type-x.type;return E||k.type!==u&&(E=l(k.a,k.b,x.b),E)?E:k.idx-x.idx}function _(k,x){return l(k.a,k.b,x)}function T(k,x,E,M,d){for(var C=s.lt(x,M,_),S=s.gt(x,M,_),P=C;P<S;++P){for(var D=x[P],z=D.lowerIds,V=z.length;V>1&&l(E[z[V-2]],E[z[V-1]],M)>0;)k.push([z[V-1],z[V-2],d]),V-=1;z.length=V,z.push(d);for(var O=D.upperIds,V=O.length;V>1&&l(E[O[V-2]],E[O[V-1]],M)<0;)k.push([O[V-2],O[V-1],d]),V-=1;O.length=V,O.push(d)}}function g(k,x){var E;return k.a[0]<x.a[0]?E=l(k.a,k.b,x.a):E=l(x.b,x.a,k.a),E||(x.b[0]<k.b[0]?E=l(k.a,k.b,x.b):E=l(x.b,x.a,k.b),E||k.idx-x.idx)}function A(k,x,E){var M=s.le(k,E,g),d=k[M],C=d.upperIds,S=C[C.length-1];d.upperIds=[S],k.splice(M+1,0,new h(E.a,E.b,E.idx,[S],C))}function b(k,x,E){var M=E.a;E.a=E.b,E.b=M;var d=s.eq(k,E,g),C=k[d],S=k[d-1];S.upperIds=C.upperIds,k.splice(d,1)}function w(k,x){for(var E=k.length,M=x.length,d=[],C=0;C<E;++C)d.push(new v(k[C],null,u,C));for(var C=0;C<M;++C){var S=x[C],P=k[S[0]],D=k[S[1]];P[0]<D[0]?d.push(new v(P,D,c,C),new v(D,P,f,C)):P[0]>D[0]&&d.push(new v(D,P,c,C),new v(P,D,f,C))}d.sort(p);for(var z=d[0].a[0]-(1+Math.abs(d[0].a[0]))*Math.pow(2,-52),O=[new h([z,1],[z,0],-1,[],[],[],[])],V=[],C=0,B=d.length;C<B;++C){var F=d[C],N=F.type;N===u?T(V,O,k,F.a,F.idx):N===c?A(O,k,F):b(O,k,F)}return V}},743:function(n,a,o){"use strict";var s=o(5070);n.exports=c;function l(h,v){this.stars=h,this.edges=v}var u=l.prototype;function f(h,v,p){for(var _=1,T=h.length;_<T;_+=2)if(h[_-1]===v&&h[_]===p){h[_-1]=h[T-2],h[_]=h[T-1],h.length=T-2;return}}u.isConstraint=function(){var h=[0,0];function v(p,_){return p[0]-_[0]||p[1]-_[1]}return function(p,_){return h[0]=Math.min(p,_),h[1]=Math.max(p,_),s.eq(this.edges,h,v)>=0}}(),u.removeTriangle=function(h,v,p){var _=this.stars;f(_[h],v,p),f(_[v],p,h),f(_[p],h,v)},u.addTriangle=function(h,v,p){var _=this.stars;_[h].push(v,p),_[v].push(p,h),_[p].push(h,v)},u.opposite=function(h,v){for(var p=this.stars[v],_=1,T=p.length;_<T;_+=2)if(p[_]===h)return p[_-1];return-1},u.flip=function(h,v){var p=this.opposite(h,v),_=this.opposite(v,h);this.removeTriangle(h,v,p),this.removeTriangle(v,h,_),this.addTriangle(h,_,p),this.addTriangle(v,p,_)},u.edges=function(){for(var h=this.stars,v=[],p=0,_=h.length;p<_;++p)for(var T=h[p],g=0,A=T.length;g<A;g+=2)v.push([T[g],T[g+1]]);return v},u.cells=function(){for(var h=this.stars,v=[],p=0,_=h.length;p<_;++p)for(var T=h[p],g=0,A=T.length;g<A;g+=2){var b=T[g],w=T[g+1];p<Math.min(b,w)&&v.push([p,b,w])}return v};function c(h,v){for(var p=new Array(h),_=0;_<h;++_)p[_]=[];return new l(p,v)}},9887:function(n){"use strict";n.exports=a;function a(o){for(var s=1,l=1;l<o.length;++l)for(var u=0;u<l;++u)if(o[l]<o[u])s=-s;else if(o[u]===o[l])return 0;return s}},9243:function(n,a,o){"use strict";var s=o(3094),l=o(6606);function u(h,v){for(var p=0,_=h.length,T=0;T<_;++T)p+=h[T]*v[T];return p}function f(h){var v=h.length;if(v===0)return[];var p=h[0].length,_=s([h.length+1,h.length+1],1),T=s([h.length+1],1);_[v][v]=0;for(var g=0;g<v;++g){for(var A=0;A<=g;++A)_[A][g]=_[g][A]=2*u(h[g],h[A]);T[g]=u(h[g],h[g])}for(var b=l(_,T),w=0,k=b[v+1],g=0;g<k.length;++g)w+=k[g];for(var x=new Array(v),g=0;g<v;++g){for(var k=b[g],E=0,A=0;A<k.length;++A)E+=k[A];x[g]=E/w}return x}function c(h){if(h.length===0)return[];for(var v=h[0].length,p=s([v]),_=f(h),T=0;T<h.length;++T)for(var g=0;g<v;++g)p[g]+=h[T][g]*_[T];return p}c.barycenetric=f,n.exports=c},1778:function(n,a,o){n.exports=l;var s=o(9243);function l(u){for(var f=s(u),c=0,h=0;h<u.length;++h)for(var v=u[h],p=0;p<f.length;++p)c+=Math.pow(v[p]-f[p],2);return Math.sqrt(c/u.length)}},197:function(n,a,o){"use strict";n.exports=P;var s=o(1731),l=o(2569),u=o(4434),f=o(5125),c=o(8846),h=o(7999),v=o(2826),p=o(8551),_=o(5528);function T(D){var z=h(D);return[p(z,-1/0),p(z,1/0)]}function g(D,z){for(var O=new Array(z.length),V=0;V<z.length;++V){var B=z[V],F=D[B[0]],N=D[B[1]];O[V]=[p(Math.min(F[0],N[0]),-1/0),p(Math.min(F[1],N[1]),-1/0),p(Math.max(F[0],N[0]),1/0),p(Math.max(F[1],N[1]),1/0)]}return O}function A(D){for(var z=new Array(D.length),O=0;O<D.length;++O){var V=D[O];z[O]=[p(V[0],-1/0),p(V[1],-1/0),p(V[0],1/0),p(V[1],1/0)]}return z}function b(D,z,O){var V=[];return l(O,function(B,F){var N=z[B],Z=z[F];if(!(N[0]===Z[0]||N[0]===Z[1]||N[1]===Z[0]||N[1]===Z[1])){var J=D[N[0]],re=D[N[1]],le=D[Z[0]],fe=D[Z[1]];u(J,re,le,fe)&&V.push([B,F])}}),V}function w(D,z,O,V){var B=[];return l(O,V,function(F,N){var Z=z[F];if(!(Z[0]===N||Z[1]===N)){var J=D[N],re=D[Z[0]],le=D[Z[1]];u(re,le,J,J)&&B.push([F,N])}}),B}function k(D,z,O,V,B){var F,N,Z=D.map(function(ze){return[f(ze[0]),f(ze[1])]});for(F=0;F<O.length;++F){var J=O[F];N=J[0];var re=J[1],le=z[N],fe=z[re],K=_(v(D[le[0]]),v(D[le[1]]),v(D[fe[0]]),v(D[fe[1]]));if(K){var X=D.length;D.push([h(K[0]),h(K[1])]),Z.push(K),V.push([N,X],[re,X])}}for(V.sort(function(ze,et){if(ze[0]!==et[0])return ze[0]-et[0];var Le=Z[ze[1]],Ie=Z[et[1]];return c(Le[0],Ie[0])||c(Le[1],Ie[1])}),F=V.length-1;F>=0;--F){var ae=V[F];N=ae[0];var oe=z[N],_e=oe[0],be=oe[1],he=D[_e],ie=D[be];if((he[0]-ie[0]||he[1]-ie[1])<0){var ye=_e;_e=be,be=ye}oe[0]=_e;var ue=oe[1]=ae[1],Ae;for(B&&(Ae=oe[2]);F>0&&V[F-1][0]===N;){var ae=V[--F],Re=ae[1];B?z.push([ue,Re,Ae]):z.push([ue,Re]),ue=Re}B?z.push([ue,be,Ae]):z.push([ue,be])}return Z}function x(D,z,O){for(var V=z.length,B=new s(V),F=[],N=0;N<z.length;++N){var Z=z[N],J=T(Z[0]),re=T(Z[1]);F.push([p(J[0],-1/0),p(re[0],-1/0),p(J[1],1/0),p(re[1],1/0)])}l(F,function(ae,oe){B.link(ae,oe)});for(var le=!0,fe=new Array(V),N=0;N<V;++N){var K=B.find(N);K!==N&&(le=!1,D[K]=[Math.min(D[N][0],D[K][0]),Math.min(D[N][1],D[K][1])])}if(le)return null;for(var X=0,N=0;N<V;++N){var K=B.find(N);K===N?(fe[N]=X,D[X++]=D[N]):fe[N]=-1}D.length=X;for(var N=0;N<V;++N)fe[N]<0&&(fe[N]=fe[B.find(N)]);return fe}function E(D,z){return D[0]-z[0]||D[1]-z[1]}function M(D,z){var O=D[0]-z[0]||D[1]-z[1];return O||(D[2]<z[2]?-1:D[2]>z[2]?1:0)}function d(D,z,O){if(D.length!==0){if(z)for(var V=0;V<D.length;++V){var B=D[V],F=z[B[0]],N=z[B[1]];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}else for(var V=0;V<D.length;++V){var B=D[V],F=B[0],N=B[1];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}O?D.sort(M):D.sort(E);for(var Z=1,V=1;V<D.length;++V){var J=D[V-1],re=D[V];re[0]===J[0]&&re[1]===J[1]&&(!O||re[2]===J[2])||(D[Z++]=re)}D.length=Z}}function C(D,z,O){var V=x(D,[],A(D));return d(z,V,O),!!V}function S(D,z,O){var V=g(D,z),B=b(D,z,V),F=A(D),N=w(D,z,V,F),Z=k(D,z,B,N,O),J=x(D,Z,F);return d(z,J,O),J?!0:B.length>0||N.length>0}function P(D,z,O){var V;if(O){V=z;for(var B=new Array(z.length),F=0;F<z.length;++F){var N=z[F];B[F]=[N[0],N[1],O[F]]}z=B}for(var Z=C(D,z,!!O);S(D,z,!!O);)Z=!0;if(O&&Z){V.length=0,O.length=0;for(var F=0;F<z.length;++F){var N=z[F];V.push([N[0],N[1]]),O.push(N[2])}}return Z}},5528:function(n,a,o){"use strict";n.exports=_;var s=o(3962),l=o(9189),u=o(4354),f=o(4951),c=o(6695),h=o(7584),v=o(4469);function p(T,g){return u(s(T[0],g[1]),s(T[1],g[0]))}function _(T,g,A,b){var w=c(g,T),k=c(b,A),x=p(w,k);if(f(x)===0)return null;var E=c(T,A),M=p(k,E),d=l(M,x),C=v(w,d),S=h(T,C);return S}},5692:function(n){n.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(n,a,o){"use strict";var s=o(5692),l=o(3578);n.exports=u;function u(v){var p,_,T,g,A,b,w,k,d,x,E;if(v||(v={}),k=(v.nshades||72)-1,w=v.format||"hex",b=v.colormap,b||(b="jet"),typeof b=="string"){if(b=b.toLowerCase(),!s[b])throw Error(b+" not a supported colorscale");A=s[b]}else if(Array.isArray(b))A=b.slice();else throw Error("unsupported colormap option",b);if(A.length>k+1)throw new Error(b+" map requires nshades to be at least size "+A.length);Array.isArray(v.alpha)?v.alpha.length!==2?x=[1,1]:x=v.alpha.slice():typeof v.alpha=="number"?x=[v.alpha,v.alpha]:x=[1,1],p=A.map(function(P){return Math.round(P.index*k)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var M=A.map(function(P,D){var z=A[D].index,O=A[D].rgb.slice();return O.length===4&&O[3]>=0&&O[3]<=1||(O[3]=x[0]+(x[1]-x[0])*z),O}),d=[];for(E=0;E<p.length-1;++E){g=p[E+1]-p[E],_=M[E],T=M[E+1];for(var C=0;C<g;C++){var S=C/g;d.push([Math.round(l(_[0],T[0],S)),Math.round(l(_[1],T[1],S)),Math.round(l(_[2],T[2],S)),l(_[3],T[3],S)])}}return d.push(A[A.length-1].rgb.concat(x[1])),w==="hex"?d=d.map(c):w==="rgbaString"?d=d.map(h):w==="float"&&(d=d.map(f)),d}function f(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function c(v){for(var p,_="#",T=0;T<3;++T)p=v[T],p=p.toString(16),_+=("00"+p).substr(p.length);return _}function h(v){return"rgba("+v.join(",")+")"}},9398:function(n,a,o){"use strict";n.exports=v;var s=o(417),l=o(7538),u=o(87),f=o(2019),c=o(9662);function h(p,_,T){var g=u(p[0],-_[0]),A=u(p[1],-_[1]),b=u(T[0],-_[0]),w=u(T[1],-_[1]),k=c(f(g,b),f(A,w));return k[k.length-1]>=0}function v(p,_,T,g){var A=s(_,T,g);if(A===0){var b=l(s(p,_,T)),w=l(s(p,_,g));if(b===w){if(b===0){var k=h(p,_,T),x=h(p,_,g);return k===x?0:k?1:-1}return 0}else{if(w===0)return b>0||h(p,_,g)?-1:1;if(b===0)return w>0||h(p,_,T)?1:-1}return l(w-b)}var E=s(p,_,T);if(E>0)return A>0&&s(p,_,g)>0?1:-1;if(E<0)return A>0||s(p,_,g)>0?1:-1;var M=s(p,_,g);return M>0||h(p,_,T)?1:-1}},7538:function(n){"use strict";n.exports=function(o){return o<0?-1:o>0?1:0}},9209:function(n){n.exports=s;var a=Math.min;function o(l,u){return l-u}function s(l,u){var f=l.length,c=l.length-u.length;if(c)return c;switch(f){case 0:return 0;case 1:return l[0]-u[0];case 2:return l[0]+l[1]-u[0]-u[1]||a(l[0],l[1])-a(u[0],u[1]);case 3:var h=l[0]+l[1],v=u[0]+u[1];if(c=h+l[2]-(v+u[2]),c)return c;var p=a(l[0],l[1]),_=a(u[0],u[1]);return a(p,l[2])-a(_,u[2])||a(p+l[2],h)-a(_+u[2],v);case 4:var T=l[0],g=l[1],A=l[2],b=l[3],w=u[0],k=u[1],x=u[2],E=u[3];return T+g+A+b-(w+k+x+E)||a(T,g,A,b)-a(w,k,x,E,w)||a(T+g,T+A,T+b,g+A,g+b,A+b)-a(w+k,w+x,w+E,k+x,k+E,x+E)||a(T+g+A,T+g+b,T+A+b,g+A+b)-a(w+k+x,w+k+E,w+x+E,k+x+E);default:for(var M=l.slice().sort(o),d=u.slice().sort(o),C=0;C<f;++C)if(c=M[C]-d[C],c)return c;return 0}}},1284:function(n,a,o){"use strict";var s=o(9209),l=o(9887);n.exports=u;function u(f,c){return s(f,c)||l(f)-l(c)}},5537:function(n,a,o){"use strict";var s=o(8950),l=o(8722),u=o(3332);n.exports=f;function f(c){var h=c.length;if(h===0)return[];if(h===1)return[[0]];var v=c[0].length;return v===0?[]:v===1?s(c):v===2?l(c):u(c,v)}},8950:function(n){"use strict";n.exports=a;function a(o){for(var s=0,l=0,u=1;u<o.length;++u)o[u][0]<o[s][0]&&(s=u),o[u][0]>o[l][0]&&(l=u);return s<l?[[s],[l]]:s>l?[[l],[s]]:[[s]]}},8722:function(n,a,o){"use strict";n.exports=l;var s=o(3266);function l(u){var f=s(u),c=f.length;if(c<=2)return[];for(var h=new Array(c),v=f[c-1],p=0;p<c;++p){var _=f[p];h[p]=[v,_],v=_}return h}},3332:function(n,a,o){"use strict";n.exports=c;var s=o(2183),l=o(2153);function u(h,v){for(var p=h.length,_=new Array(p),T=0;T<v.length;++T)_[T]=h[v[T]];for(var g=v.length,T=0;T<p;++T)v.indexOf(T)<0&&(_[g++]=h[T]);return _}function f(h,v){for(var p=h.length,_=v.length,T=0;T<p;++T)for(var g=h[T],A=0;A<g.length;++A){var b=g[A];if(b<_)g[A]=v[b];else{b=b-_;for(var w=0;w<_;++w)b>=v[w]&&(b+=1);g[A]=b}}return h}function c(h,v){try{return s(h,!0)}catch(g){var p=l(h);if(p.length<=v)return[];var _=u(h,p),T=s(_,!0);return f(T,p)}}},9680:function(n){"use strict";function a(s,l,u,f,c,h){var v=6*c*c-6*c,p=3*c*c-4*c+1,_=-6*c*c+6*c,T=3*c*c-2*c;if(s.length){h||(h=new Array(s.length));for(var g=s.length-1;g>=0;--g)h[g]=v*s[g]+p*l[g]+_*u[g]+T*f[g];return h}return v*s+p*l+_*u[g]+T*f}function o(s,l,u,f,c,h){var v=c-1,p=c*c,_=v*v,T=(1+2*c)*_,g=c*_,A=p*(3-2*c),b=p*v;if(s.length){h||(h=new Array(s.length));for(var w=s.length-1;w>=0;--w)h[w]=T*s[w]+g*l[w]+A*u[w]+b*f[w];return h}return T*s+g*l+A*u+b*f}n.exports=o,n.exports.derivative=a},4419:function(n,a,o){"use strict";var s=o(2183),l=o(1215);n.exports=h;function u(v,p){this.point=v,this.index=p}function f(v,p){for(var _=v.point,T=p.point,g=_.length,A=0;A<g;++A){var b=T[A]-_[A];if(b)return b}return 0}function c(v,p,_){if(v===1)return _?[[-1,0]]:[];var T=p.map(function(k,x){return[k[0],x]});T.sort(function(k,x){return k[0]-x[0]});for(var g=new Array(v-1),A=1;A<v;++A){var b=T[A-1],w=T[A];g[A-1]=[b[1],w[1]]}return _&&g.push([-1,g[0][1]],[g[v-1][1],-1]),g}function h(v,p){var _=v.length;if(_===0)return[];var T=v[0].length;if(T<1)return[];if(T===1)return c(_,v,p);for(var g=new Array(_),A=1,b=0;b<_;++b){for(var w=v[b],k=new Array(T+1),x=0,E=0;E<T;++E){var M=w[E];k[E]=M,x+=M*M}k[T]=x,g[b]=new u(k,b),A=Math.max(x,A)}l(g,f),_=g.length;for(var d=new Array(_+T+1),C=new Array(_+T+1),S=(T+1)*(T+1)*A,P=new Array(T+1),b=0;b<=T;++b)P[b]=0;P[T]=S,d[0]=P.slice(),C[0]=-1;for(var b=0;b<=T;++b){var k=P.slice();k[b]=1,d[b+1]=k,C[b+1]=-1}for(var b=0;b<_;++b){var D=g[b];d[b+T+1]=D.point,C[b+T+1]=D.index}var z=s(d,!1);if(p?z=z.filter(function(O){for(var V=0,B=0;B<=T;++B){var F=C[O[B]];if(F<0&&++V>=2)return!1;O[B]=F}return!0}):z=z.filter(function(O){for(var V=0;V<=T;++V){var B=C[O[V]];if(B<0)return!1;O[V]=B}return!0}),T&1)for(var b=0;b<z.length;++b){var D=z[b],k=D[0];D[0]=D[1],D[1]=k}return z}},8362:function(n){var a=!1;if(typeof Float64Array!="undefined"){var o=new Float64Array(1),s=new Uint32Array(o.buffer);if(o[0]=1,a=!0,s[1]===1072693248){let A=function(k,x){return s[0]=k,s[1]=x,o[0]},b=function(k){return o[0]=k,s[0]},w=function(k){return o[0]=k,s[1]};var u=A,f=b,c=w;n.exports=function(x){return o[0]=x,[s[0],s[1]]},n.exports.pack=A,n.exports.lo=b,n.exports.hi=w}else if(s[0]===1072693248){let A=function(k,x){return s[1]=k,s[0]=x,o[0]},b=function(k){return o[0]=k,s[1]},w=function(k){return o[0]=k,s[0]};var h=A,v=b,p=w;n.exports=function(x){return o[0]=x,[s[1],s[0]]},n.exports.pack=A,n.exports.lo=b,n.exports.hi=w}else a=!1}if(!a){let A=function(k,x){return l.writeUInt32LE(k,0,!0),l.writeUInt32LE(x,4,!0),l.readDoubleLE(0,!0)},b=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(0,!0)},w=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(4,!0)};var _=A,T=b,g=w,l=new Buffer(8);n.exports=function(x){return l.writeDoubleLE(x,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},n.exports.pack=A,n.exports.lo=b,n.exports.hi=w}n.exports.sign=function(A){return n.exports.hi(A)>>>31},n.exports.exponent=function(A){var b=n.exports.hi(A);return(b<<1>>>21)-1023},n.exports.fraction=function(A){var b=n.exports.lo(A),w=n.exports.hi(A),k=w&(1<<20)-1;return w&2146435072&&(k+=1048576),[b,k]},n.exports.denormalized=function(A){var b=n.exports.hi(A);return!(b&2146435072)}},3094:function(n){"use strict";function a(l,u,f){var c=l[f]|0;if(c<=0)return[];var h=new Array(c),v;if(f===l.length-1)for(v=0;v<c;++v)h[v]=u;else for(v=0;v<c;++v)h[v]=a(l,u,f+1);return h}function o(l,u){var f,c;for(f=new Array(l),c=0;c<l;++c)f[c]=u;return f}function s(l,u){switch(typeof u=="undefined"&&(u=0),typeof l){case"number":if(l>0)return o(l|0,u);break;case"object":if(typeof l.length=="number")return a(l,u,0);break}return[]}n.exports=s},8348:function(n,a,o){"use strict";n.exports=l;var s=o(1215);function l(u,f){var c=u.length;if(typeof f!="number"){f=0;for(var h=0;h<c;++h){var v=u[h];f=Math.max(f,v[0],v[1])}f=(f|0)+1}f=f|0;for(var p=new Array(f),h=0;h<f;++h)p[h]=[];for(var h=0;h<c;++h){var v=u[h];p[v[0]].push(v[1]),p[v[1]].push(v[0])}for(var _=0;_<f;++_)s(p[_],function(T,g){return T-g});return p}},5795:function(n){"use strict";n.exports=a;function a(o,s,l){var u=s||0,f=l||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[u*o[12]+o[8],u*o[13]+o[9],u*o[14]+o[10],u*o[15]+o[11]],[f*o[12]-o[8],f*o[13]-o[9],f*o[14]-o[10],f*o[15]-o[11]]]}},8444:function(n,a,o){"use strict";n.exports=v;var s=o(9680),l=o(5070);function u(p,_,T){return Math.min(_,Math.max(p,T))}function f(p,_,T){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=p.slice().reverse(),this._velocity=_.slice().reverse(),this._time=[T],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var c=f.prototype;c.flush=function(p){var _=l.gt(this._time,p)-1;_<=0||(this._time.splice(0,_),this._state.splice(0,_*this.dimension),this._velocity.splice(0,_*this.dimension))},c.curve=function(p){var _=this._time,T=_.length,g=l.le(_,p),A=this._scratch[0],b=this._state,w=this._velocity,k=this.dimension,x=this.bounds;if(g<0)for(var E=k-1,M=0;M<k;++M,--E)A[M]=b[E];else if(g>=T-1)for(var E=b.length-1,d=p-_[T-1],M=0;M<k;++M,--E)A[M]=b[E]+d*w[E];else{for(var E=k*(g+1)-1,C=_[g],S=_[g+1],P=S-C||1,D=this._scratch[1],z=this._scratch[2],O=this._scratch[3],V=this._scratch[4],B=!0,M=0;M<k;++M,--E)D[M]=b[E],O[M]=w[E]*P,z[M]=b[E+k],V[M]=w[E+k]*P,B=B&&D[M]===z[M]&&O[M]===V[M]&&O[M]===0;if(B)for(var M=0;M<k;++M)A[M]=D[M];else s(D,O,z,V,(p-C)/P,A)}for(var F=x[0],N=x[1],M=0;M<k;++M)A[M]=u(F[M],N[M],A[M]);return A},c.dcurve=function(p){var _=this._time,T=_.length,g=l.le(_,p),A=this._scratch[0],b=this._state,w=this._velocity,k=this.dimension;if(g>=T-1)for(var x=b.length-1,E=p-_[T-1],M=0;M<k;++M,--x)A[M]=w[x];else{for(var x=k*(g+1)-1,d=_[g],C=_[g+1],S=C-d||1,P=this._scratch[1],D=this._scratch[2],z=this._scratch[3],O=this._scratch[4],V=!0,M=0;M<k;++M,--x)P[M]=b[x],z[M]=w[x]*S,D[M]=b[x+k],O[M]=w[x+k]*S,V=V&&P[M]===D[M]&&z[M]===O[M]&&z[M]===0;if(V)for(var M=0;M<k;++M)A[M]=0;else{s.derivative(P,z,D,O,(p-d)/S,A);for(var M=0;M<k;++M)A[M]/=S}}return A},c.lastT=function(){var p=this._time;return p[p.length-1]},c.stable=function(){for(var p=this._velocity,_=p.length,T=this.dimension-1;T>=0;--T)if(p[--_])return!1;return!0},c.jump=function(p){var _=this.lastT(),T=this.dimension;if(!(p<_||arguments.length!==T+1)){var g=this._state,A=this._velocity,b=g.length-this.dimension,w=this.bounds,k=w[0],x=w[1];this._time.push(_,p);for(var E=0;E<2;++E)for(var M=0;M<T;++M)g.push(g[b++]),A.push(0);this._time.push(p);for(var M=T;M>0;--M)g.push(u(k[M-1],x[M-1],arguments[M])),A.push(0)}},c.push=function(p){var _=this.lastT(),T=this.dimension;if(!(p<_||arguments.length!==T+1)){var g=this._state,A=this._velocity,b=g.length-this.dimension,w=p-_,k=this.bounds,x=k[0],E=k[1],M=w>1e-6?1/w:0;this._time.push(p);for(var d=T;d>0;--d){var C=u(x[d-1],E[d-1],arguments[d]);g.push(C),A.push((C-g[b++])*M)}}},c.set=function(p){var _=this.dimension;if(!(p<this.lastT()||arguments.length!==_+1)){var T=this._state,g=this._velocity,A=this.bounds,b=A[0],w=A[1];this._time.push(p);for(var k=_;k>0;--k)T.push(u(b[k-1],w[k-1],arguments[k])),g.push(0)}},c.move=function(p){var _=this.lastT(),T=this.dimension;if(!(p<=_||arguments.length!==T+1)){var g=this._state,A=this._velocity,b=g.length-this.dimension,w=this.bounds,k=w[0],x=w[1],E=p-_,M=E>1e-6?1/E:0;this._time.push(p);for(var d=T;d>0;--d){var C=arguments[d];g.push(u(k[d-1],x[d-1],g[b++]+C)),A.push(C*M)}}},c.idle=function(p){var _=this.lastT();if(!(p<_)){var T=this.dimension,g=this._state,A=this._velocity,b=g.length-T,w=this.bounds,k=w[0],x=w[1],E=p-_;this._time.push(p);for(var M=T-1;M>=0;--M)g.push(u(k[M],x[M],g[b]+E*A[b])),A.push(0),b+=1}};function h(p){for(var _=new Array(p),T=0;T<p;++T)_[T]=0;return _}function v(p,_,T){switch(arguments.length){case 0:return new f([0],[0],0);case 1:if(typeof p=="number"){var g=h(p);return new f(g,g,0)}else return new f(p,h(p.length),0);case 2:if(typeof _=="number"){var g=h(p.length);return new f(p,g,+_)}else T=0;case 3:if(p.length!==_.length)throw new Error("state and velocity lengths must match");return new f(p,_,T)}}},7080:function(n){"use strict";n.exports=k;var a=0,o=1;function s(x,E,M,d,C,S){this._color=x,this.key=E,this.value=M,this.left=d,this.right=C,this._count=S}function l(x){return new s(x._color,x.key,x.value,x.left,x.right,x._count)}function u(x,E){return new s(x,E.key,E.value,E.left,E.right,E._count)}function f(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function c(x,E){this._compare=x,this.root=E}var h=c.prototype;Object.defineProperty(h,"keys",{get:function(){var x=[];return this.forEach(function(E,M){x.push(E)}),x}}),Object.defineProperty(h,"values",{get:function(){var x=[];return this.forEach(function(E,M){x.push(M)}),x}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(x,E){for(var M=this._compare,d=this.root,C=[],S=[];d;){var P=M(x,d.key);C.push(d),S.push(P),P<=0?d=d.left:d=d.right}C.push(new s(a,x,E,null,null,1));for(var D=C.length-2;D>=0;--D){var d=C[D];S[D]<=0?C[D]=new s(d._color,d.key,d.value,C[D+1],d.right,d._count+1):C[D]=new s(d._color,d.key,d.value,d.left,C[D+1],d._count+1)}for(var D=C.length-1;D>1;--D){var z=C[D-1],d=C[D];if(z._color===o||d._color===o)break;var O=C[D-2];if(O.left===z)if(z.left===d){var V=O.right;if(V&&V._color===a)z._color=o,O.right=u(o,V),O._color=a,D-=1;else{if(O._color=a,O.left=z.right,z._color=o,z.right=O,C[D-2]=z,C[D-1]=d,f(O),f(z),D>=3){var B=C[D-3];B.left===O?B.left=z:B.right=z}break}}else{var V=O.right;if(V&&V._color===a)z._color=o,O.right=u(o,V),O._color=a,D-=1;else{if(z.right=d.left,O._color=a,O.left=d.right,d._color=o,d.left=z,d.right=O,C[D-2]=d,C[D-1]=z,f(O),f(z),f(d),D>=3){var B=C[D-3];B.left===O?B.left=d:B.right=d}break}}else if(z.right===d){var V=O.left;if(V&&V._color===a)z._color=o,O.left=u(o,V),O._color=a,D-=1;else{if(O._color=a,O.right=z.left,z._color=o,z.left=O,C[D-2]=z,C[D-1]=d,f(O),f(z),D>=3){var B=C[D-3];B.right===O?B.right=z:B.left=z}break}}else{var V=O.left;if(V&&V._color===a)z._color=o,O.left=u(o,V),O._color=a,D-=1;else{if(z.left=d.right,O._color=a,O.right=d.left,d._color=o,d.right=z,d.left=O,C[D-2]=d,C[D-1]=z,f(O),f(z),f(d),D>=3){var B=C[D-3];B.right===O?B.right=d:B.left=d}break}}}return C[0]._color=o,new c(M,C[0])};function v(x,E){if(E.left){var M=v(x,E.left);if(M)return M}var M=x(E.key,E.value);if(M)return M;if(E.right)return v(x,E.right)}function p(x,E,M,d){var C=E(x,d.key);if(C<=0){if(d.left){var S=p(x,E,M,d.left);if(S)return S}var S=M(d.key,d.value);if(S)return S}if(d.right)return p(x,E,M,d.right)}function _(x,E,M,d,C){var S=M(x,C.key),P=M(E,C.key),D;if(S<=0&&(C.left&&(D=_(x,E,M,d,C.left),D)||P>0&&(D=d(C.key,C.value),D)))return D;if(P>0&&C.right)return _(x,E,M,d,C.right)}h.forEach=function(E,M,d){if(this.root)switch(arguments.length){case 1:return v(E,this.root);case 2:return p(M,this._compare,E,this.root);case 3:return this._compare(M,d)>=0?void 0:_(M,d,this._compare,E,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var x=[],E=this.root;E;)x.push(E),E=E.left;return new T(this,x)}}),Object.defineProperty(h,"end",{get:function(){for(var x=[],E=this.root;E;)x.push(E),E=E.right;return new T(this,x)}}),h.at=function(x){if(x<0)return new T(this,[]);for(var E=this.root,M=[];;){if(M.push(E),E.left){if(x<E.left._count){E=E.left;continue}x-=E.left._count}if(!x)return new T(this,M);if(x-=1,E.right){if(x>=E.right._count)break;E=E.right}else break}return new T(this,[])},h.ge=function(x){for(var E=this._compare,M=this.root,d=[],C=0;M;){var S=E(x,M.key);d.push(M),S<=0&&(C=d.length),S<=0?M=M.left:M=M.right}return d.length=C,new T(this,d)},h.gt=function(x){for(var E=this._compare,M=this.root,d=[],C=0;M;){var S=E(x,M.key);d.push(M),S<0&&(C=d.length),S<0?M=M.left:M=M.right}return d.length=C,new T(this,d)},h.lt=function(x){for(var E=this._compare,M=this.root,d=[],C=0;M;){var S=E(x,M.key);d.push(M),S>0&&(C=d.length),S<=0?M=M.left:M=M.right}return d.length=C,new T(this,d)},h.le=function(x){for(var E=this._compare,M=this.root,d=[],C=0;M;){var S=E(x,M.key);d.push(M),S>=0&&(C=d.length),S<0?M=M.left:M=M.right}return d.length=C,new T(this,d)},h.find=function(x){for(var E=this._compare,M=this.root,d=[];M;){var C=E(x,M.key);if(d.push(M),C===0)return new T(this,d);C<=0?M=M.left:M=M.right}return new T(this,[])},h.remove=function(x){var E=this.find(x);return E?E.remove():this},h.get=function(x){for(var E=this._compare,M=this.root;M;){var d=E(x,M.key);if(d===0)return M.value;d<=0?M=M.left:M=M.right}};function T(x,E){this.tree=x,this._stack=E}var g=T.prototype;Object.defineProperty(g,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(g,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),g.clone=function(){return new T(this.tree,this._stack.slice())};function A(x,E){x.key=E.key,x.value=E.value,x.left=E.left,x.right=E.right,x._color=E._color,x._count=E._count}function b(x){for(var E,M,d,C,S=x.length-1;S>=0;--S){if(E=x[S],S===0){E._color=o;return}if(M=x[S-1],M.left===E){if(d=M.right,d.right&&d.right._color===a){if(d=M.right=l(d),C=d.right=l(d.right),M.right=d.left,d.left=M,d.right=C,d._color=M._color,E._color=o,M._color=o,C._color=o,f(M),f(d),S>1){var P=x[S-2];P.left===M?P.left=d:P.right=d}x[S-1]=d;return}else if(d.left&&d.left._color===a){if(d=M.right=l(d),C=d.left=l(d.left),M.right=C.left,d.left=C.right,C.left=M,C.right=d,C._color=M._color,M._color=o,d._color=o,E._color=o,f(M),f(d),f(C),S>1){var P=x[S-2];P.left===M?P.left=C:P.right=C}x[S-1]=C;return}if(d._color===o)if(M._color===a){M._color=o,M.right=u(a,d);return}else{M.right=u(a,d);continue}else{if(d=l(d),M.right=d.left,d.left=M,d._color=M._color,M._color=a,f(M),f(d),S>1){var P=x[S-2];P.left===M?P.left=d:P.right=d}x[S-1]=d,x[S]=M,S+1<x.length?x[S+1]=E:x.push(E),S=S+2}}else{if(d=M.left,d.left&&d.left._color===a){if(d=M.left=l(d),C=d.left=l(d.left),M.left=d.right,d.right=M,d.left=C,d._color=M._color,E._color=o,M._color=o,C._color=o,f(M),f(d),S>1){var P=x[S-2];P.right===M?P.right=d:P.left=d}x[S-1]=d;return}else if(d.right&&d.right._color===a){if(d=M.left=l(d),C=d.right=l(d.right),M.left=C.right,d.right=C.left,C.right=M,C.left=d,C._color=M._color,M._color=o,d._color=o,E._color=o,f(M),f(d),f(C),S>1){var P=x[S-2];P.right===M?P.right=C:P.left=C}x[S-1]=C;return}if(d._color===o)if(M._color===a){M._color=o,M.left=u(a,d);return}else{M.left=u(a,d);continue}else{if(d=l(d),M.left=d.right,d.right=M,d._color=M._color,M._color=a,f(M),f(d),S>1){var P=x[S-2];P.right===M?P.right=d:P.left=d}x[S-1]=d,x[S]=M,S+1<x.length?x[S+1]=E:x.push(E),S=S+2}}}}g.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var E=new Array(x.length),M=x[x.length-1];E[E.length-1]=new s(M._color,M.key,M.value,M.left,M.right,M._count);for(var d=x.length-2;d>=0;--d){var M=x[d];M.left===x[d+1]?E[d]=new s(M._color,M.key,M.value,E[d+1],M.right,M._count):E[d]=new s(M._color,M.key,M.value,M.left,E[d+1],M._count)}if(M=E[E.length-1],M.left&&M.right){var C=E.length;for(M=M.left;M.right;)E.push(M),M=M.right;var S=E[C-1];E.push(new s(M._color,S.key,S.value,M.left,M.right,M._count)),E[C-1].key=M.key,E[C-1].value=M.value;for(var d=E.length-2;d>=C;--d)M=E[d],E[d]=new s(M._color,M.key,M.value,M.left,E[d+1],M._count);E[C-1].left=E[C]}if(M=E[E.length-1],M._color===a){var P=E[E.length-2];P.left===M?P.left=null:P.right===M&&(P.right=null),E.pop();for(var d=0;d<E.length;++d)E[d]._count--;return new c(this.tree._compare,E[0])}else if(M.left||M.right){M.left?A(M,M.left):M.right&&A(M,M.right),M._color=o;for(var d=0;d<E.length-1;++d)E[d]._count--;return new c(this.tree._compare,E[0])}else{if(E.length===1)return new c(this.tree._compare,null);for(var d=0;d<E.length;++d)E[d]._count--;var D=E[E.length-2];b(E),D.left===M?D.left=null:D.right=null}return new c(this.tree._compare,E[0])},Object.defineProperty(g,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(g,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(g,"index",{get:function(){var x=0,E=this._stack;if(E.length===0){var M=this.tree.root;return M?M._count:0}else E[E.length-1].left&&(x=E[E.length-1].left._count);for(var d=E.length-2;d>=0;--d)E[d+1]===E[d].right&&(++x,E[d].left&&(x+=E[d].left._count));return x},enumerable:!0}),g.next=function(){var x=this._stack;if(x.length!==0){var E=x[x.length-1];if(E.right)for(E=E.right;E;)x.push(E),E=E.left;else for(x.pop();x.length>0&&x[x.length-1].right===E;)E=x[x.length-1],x.pop()}},Object.defineProperty(g,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var E=x.length-1;E>0;--E)if(x[E-1].left===x[E])return!0;return!1}}),g.update=function(x){var E=this._stack;if(E.length===0)throw new Error("Can't update empty node!");var M=new Array(E.length),d=E[E.length-1];M[M.length-1]=new s(d._color,d.key,x,d.left,d.right,d._count);for(var C=E.length-2;C>=0;--C)d=E[C],d.left===E[C+1]?M[C]=new s(d._color,d.key,d.value,M[C+1],d.right,d._count):M[C]=new s(d._color,d.key,d.value,d.left,M[C+1],d._count);return new c(this.tree._compare,M[0])},g.prev=function(){var x=this._stack;if(x.length!==0){var E=x[x.length-1];if(E.left)for(E=E.left;E;)x.push(E),E=E.right;else for(x.pop();x.length>0&&x[x.length-1].left===E;)E=x[x.length-1],x.pop()}},Object.defineProperty(g,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var E=x.length-1;E>0;--E)if(x[E-1].right===x[E])return!0;return!1}});function w(x,E){return x<E?-1:x>E?1:0}function k(x){return new c(x||w,null)}},7453:function(n,a,o){"use strict";n.exports=d;var s=o(9557),l=o(1681),u=o(1011),f=o(2864),c=o(8468),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function v(C,S){return C[0]=S[0],C[1]=S[1],C[2]=S[2],C}function p(C){this.gl=C,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(C)}var _=p.prototype;_.update=function(C){C=C||{};function S(le,fe,K){if(K in C){var X=C[K],ae=this[K],oe;(le?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[K]=oe=[fe(X[0]),fe(X[1]),fe(X[2])]:this[K]=oe=[fe(X),fe(X),fe(X)];for(var _e=0;_e<3;++_e)if(oe[_e]!==ae[_e])return!0}return!1}var P=S.bind(this,!1,Number),D=S.bind(this,!1,Boolean),z=S.bind(this,!1,String),O=S.bind(this,!0,function(le){if(Array.isArray(le)){if(le.length===3)return[+le[0],+le[1],+le[2],1];if(le.length===4)return[+le[0],+le[1],+le[2],+le[3]]}return[0,0,0,1]}),V,B=!1,F=!1;if("bounds"in C)for(var N=C.bounds,Z=0;Z<2;++Z)for(var J=0;J<3;++J)N[Z][J]!==this.bounds[Z][J]&&(F=!0),this.bounds[Z][J]=N[Z][J];if("ticks"in C){V=C.ticks,B=!0,this.autoTicks=!1;for(var Z=0;Z<3;++Z)this.tickSpacing[Z]=0}else P("tickSpacing")&&(this.autoTicks=!0,F=!0);if(this._firstInit&&("ticks"in C||"tickSpacing"in C||(this.autoTicks=!0),F=!0,B=!0,this._firstInit=!1),F&&this.autoTicks&&(V=c.create(this.bounds,this.tickSpacing),B=!0),B){for(var Z=0;Z<3;++Z)V[Z].sort(function(fe,K){return fe.x-K.x});c.equal(V,this.ticks)?B=!1:this.ticks=V}D("tickEnable"),z("tickFont")&&(B=!0),P("tickSize"),P("tickAngle"),P("tickPad"),O("tickColor");var re=z("labels");z("labelFont")&&(re=!0),D("labelEnable"),P("labelSize"),P("labelPad"),O("labelColor"),D("lineEnable"),D("lineMirror"),P("lineWidth"),O("lineColor"),D("lineTickEnable"),D("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),O("lineTickColor"),D("gridEnable"),P("gridWidth"),O("gridColor"),D("zeroEnable"),O("zeroLineColor"),P("zeroLineWidth"),D("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(re||B)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=s(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=l(this.gl,this.bounds,this.ticks))};function T(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var g=[new T,new T,new T];function A(C,S,P,D,z){for(var O=C.primalOffset,V=C.primalMinor,B=C.mirrorOffset,F=C.mirrorMinor,N=D[S],Z=0;Z<3;++Z)if(S!==Z){var J=O,re=B,le=V,fe=F;N&1<<Z&&(J=B,re=O,le=F,fe=V),J[Z]=P[0][Z],re[Z]=P[1][Z],z[Z]>0?(le[Z]=-1,fe[Z]=0):(le[Z]=0,fe[Z]=1)}}var b=[0,0,0],w={model:h,view:h,projection:h,_ortho:!1};_.isOpaque=function(){return!0},_.isTransparent=function(){return!1},_.drawTransparent=function(C){};var k=0,x=[0,0,0],E=[0,0,0],M=[0,0,0];_.draw=function(C){C=C||w;for(var ae=this.gl,S=C.model||h,P=C.view||h,D=C.projection||h,z=this.bounds,O=C._ortho||!1,V=f(S,P,D,z,O),B=V.cubeEdges,F=V.axis,N=P[12],Z=P[13],J=P[14],re=P[15],le=O?2:1,fe=le*this.pixelRatio*(D[3]*N+D[7]*Z+D[11]*J+D[15]*re)/ae.drawingBufferHeight,K=0;K<3;++K)this.lastCubeProps.cubeEdges[K]=B[K],this.lastCubeProps.axis[K]=F[K];for(var X=g,K=0;K<3;++K)A(g[K],K,this.bounds,B,F);for(var ae=this.gl,oe=b,K=0;K<3;++K)this.backgroundEnable[K]?oe[K]=F[K]:oe[K]=0;this._background.draw(S,P,D,z,oe,this.backgroundColor),this._lines.bind(S,P,D,this);for(var K=0;K<3;++K){var _e=[0,0,0];F[K]>0?_e[K]=z[1][K]:_e[K]=z[0][K];for(var be=0;be<2;++be){var he=(K+1+be)%3,ie=(K+1+(be^1))%3;this.gridEnable[he]&&this._lines.drawGrid(he,ie,this.bounds,_e,this.gridColor[he],this.gridWidth[he]*this.pixelRatio)}for(var be=0;be<2;++be){var he=(K+1+be)%3,ie=(K+1+(be^1))%3;this.zeroEnable[ie]&&Math.min(z[0][ie],z[1][ie])<=0&&Math.max(z[0][ie],z[1][ie])>=0&&this._lines.drawZero(he,ie,this.bounds,_e,this.zeroLineColor[ie],this.zeroLineWidth[ie]*this.pixelRatio)}}for(var K=0;K<3;++K){this.lineEnable[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].primalOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio),this.lineMirror[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].mirrorOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio);for(var ye=v(x,X[K].primalMinor),ue=v(E,X[K].mirrorMinor),Ae=this.lineTickLength,be=0;be<3;++be){var Re=fe/S[5*be];ye[be]*=Ae[be]*Re,ue[be]*=Ae[be]*Re}this.lineTickEnable[K]&&this._lines.drawAxisTicks(K,X[K].primalOffset,ye,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio),this.lineTickMirror[K]&&this._lines.drawAxisTicks(K,X[K].mirrorOffset,ue,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio)}this._lines.unbind(),this._text.bind(S,P,D,this.pixelRatio);var ze,et=.5,Le,Ie;function dt(Se){Ie=[0,0,0],Ie[Se]=1}function ct(Se,je,ht){var nt=(Se+1)%3,lt=(Se+2)%3,rt=je[nt],Xe=je[lt],ft=ht[nt],gt=ht[lt];if(rt>0&&gt>0){dt(nt);return}else if(rt>0&&gt<0){dt(nt);return}else if(rt<0&&gt>0){dt(nt);return}else if(rt<0&&gt<0){dt(nt);return}else if(Xe>0&&ft>0){dt(lt);return}else if(Xe>0&&ft<0){dt(lt);return}else if(Xe<0&&ft>0){dt(lt);return}else if(Xe<0&&ft<0){dt(lt);return}}for(var K=0;K<3;++K){for(var Ke=X[K].primalMinor,_t=X[K].mirrorMinor,zt=v(M,X[K].primalOffset),be=0;be<3;++be)this.lineTickEnable[K]&&(zt[be]+=fe*Ke[be]*Math.max(this.lineTickLength[be],0)/S[5*be]);var Et=[0,0,0];if(Et[K]=1,this.tickEnable[K]){this.tickAngle[K]===-3600?(this.tickAngle[K]=0,this.tickAlign[K]="auto"):this.tickAlign[K]=-1,Le=1,ze=[this.tickAlign[K],et,Le],ze[0]==="auto"?ze[0]=k:ze[0]=parseInt(""+ze[0]),Ie=[0,0,0],ct(K,Ke,_t);for(var be=0;be<3;++be)zt[be]+=fe*Ke[be]*this.tickPad[be]/S[5*be];this._text.drawTicks(K,this.tickSize[K],this.tickAngle[K],zt,this.tickColor[K],Et,Ie,ze)}if(this.labelEnable[K]){Le=0,Ie=[0,0,0],this.labels[K].length>4&&(dt(K),Le=1),ze=[this.labelAlign[K],et,Le],ze[0]==="auto"?ze[0]=k:ze[0]=parseInt(""+ze[0]);for(var be=0;be<3;++be)zt[be]+=fe*Ke[be]*this.labelPad[be]/S[5*be];zt[K]+=.5*(z[0][K]+z[1][K]),this._text.drawLabel(K,this.labelSize[K],this.labelAngle[K],zt,this.labelColor[K],[0,0,0],Ie,ze)}}this._text.unbind()},_.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function d(C,S){var P=new p(C);return P.update(S),P}},1011:function(n,a,o){"use strict";n.exports=h;var s=o(5827),l=o(2944),u=o(1943).bg;function f(v,p,_,T){this.gl=v,this.buffer=p,this.vao=_,this.shader=T}var c=f.prototype;c.draw=function(v,p,_,T,g,A){for(var b=!1,w=0;w<3;++w)b=b||g[w];if(b){var k=this.gl;k.enable(k.POLYGON_OFFSET_FILL),k.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:p,projection:_,bounds:T,enable:g,colors:A},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),k.disable(k.POLYGON_OFFSET_FILL)}},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(v){for(var p=[],_=[],T=0,g=0;g<3;++g)for(var A=(g+1)%3,b=(g+2)%3,w=[0,0,0],k=[0,0,0],x=-1;x<=1;x+=2){_.push(T,T+2,T+1,T+1,T+2,T+3),w[g]=x,k[g]=x;for(var E=-1;E<=1;E+=2){w[A]=E;for(var M=-1;M<=1;M+=2)w[b]=M,p.push(w[0],w[1],w[2],k[0],k[1],k[2]),T+=1}var d=A;A=b,b=d}var C=s(v,new Float32Array(p)),S=s(v,new Uint16Array(_),v.ELEMENT_ARRAY_BUFFER),P=l(v,[{buffer:C,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:C,type:v.FLOAT,size:3,offset:12,stride:24}],S),D=u(v);return D.attributes.position.location=0,D.attributes.normal.location=1,new f(v,C,P,D)}},2864:function(n,a,o){"use strict";n.exports=x;var s=o(2288),l=o(104),u=o(4670),f=o(417),c=new Array(16),h=new Array(8),v=new Array(8),p=new Array(3),_=[0,0,0];(function(){for(var E=0;E<8;++E)h[E]=[1,1,1,1],v[E]=[1,1,1]})();function T(E,M,d){for(var C=0;C<4;++C){E[C]=d[12+C];for(var S=0;S<3;++S)E[C]+=M[S]*d[4*S+C]}}var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function A(E){for(var M=0;M<g.length;++M)if(E=u.positive(E,g[M]),E.length<3)return 0;for(var d=E[0],C=d[0]/d[3],S=d[1]/d[3],P=0,M=1;M+1<E.length;++M){var D=E[M],z=E[M+1],O=D[0]/D[3],V=D[1]/D[3],B=z[0]/z[3],F=z[1]/z[3],N=O-C,Z=V-S,J=B-C,re=F-S;P+=Math.abs(N*re-Z*J)}return P}var b=[1,1,1],w=[0,0,0],k={cubeEdges:b,axis:w};function x(E,M,d,C,S){l(c,M,E),l(c,d,c);for(var P=0,D=0;D<2;++D){p[2]=C[D][2];for(var z=0;z<2;++z){p[1]=C[z][1];for(var O=0;O<2;++O)p[0]=C[O][0],T(h[P],p,c),P+=1}}for(var V=-1,D=0;D<8;++D){for(var B=h[D][3],F=0;F<3;++F)v[D][F]=h[D][F]/B;S&&(v[D][2]*=-1),B<0&&(V<0||v[D][2]<v[V][2])&&(V=D)}if(V<0){V=0;for(var N=0;N<3;++N){for(var Z=(N+2)%3,J=(N+1)%3,re=-1,le=-1,fe=0;fe<2;++fe){var K=fe<<N,X=K+(fe<<Z)+(1-fe<<J),ae=K+(1-fe<<Z)+(fe<<J);f(v[K],v[X],v[ae],_)<0||(fe?re=1:le=1)}if(re<0||le<0){le>re&&(V|=1<<N);continue}for(var fe=0;fe<2;++fe){var K=fe<<N,X=K+(fe<<Z)+(1-fe<<J),ae=K+(1-fe<<Z)+(fe<<J),oe=A([h[K],h[X],h[ae],h[K+(1<<Z)+(1<<J)]]);fe?re=oe:le=oe}if(le>re){V|=1<<N;continue}}}for(var _e=7^V,be=-1,D=0;D<8;++D)D===V||D===_e||(be<0||v[be][1]>v[D][1])&&(be=D);for(var he=-1,D=0;D<3;++D){var ie=be^1<<D;if(!(ie===V||ie===_e)){he<0&&(he=ie);var J=v[ie];J[0]<v[he][0]&&(he=ie)}}for(var ye=-1,D=0;D<3;++D){var ie=be^1<<D;if(!(ie===V||ie===_e||ie===he)){ye<0&&(ye=ie);var J=v[ie];J[0]>v[ye][0]&&(ye=ie)}}var ue=b;ue[0]=ue[1]=ue[2]=0,ue[s.log2(he^be)]=be&he,ue[s.log2(be^ye)]=be&ye;var Ae=ye^7;Ae===V||Ae===_e?(Ae=he^7,ue[s.log2(ye^Ae)]=Ae&ye):ue[s.log2(he^Ae)]=Ae&he;for(var Re=w,ze=V,N=0;N<3;++N)ze&1<<N?Re[N]=-1:Re[N]=1;return k}},1681:function(n,a,o){"use strict";n.exports=b;var s=o(5827),l=o(2944),u=o(1943).j,f=[0,0,0],c=[0,0,0],h=[0,0,0],v=[0,0,0],p=[1,1];function _(w){return w[0]=w[1]=w[2]=0,w}function T(w,k){return w[0]=k[0],w[1]=k[1],w[2]=k[2],w}function g(w,k,x,E,M,d,C,S){this.gl=w,this.vertBuffer=k,this.vao=x,this.shader=E,this.tickCount=M,this.tickOffset=d,this.gridCount=C,this.gridOffset=S}var A=g.prototype;A.bind=function(w,k,x){this.shader.bind(),this.shader.uniforms.model=w,this.shader.uniforms.view=k,this.shader.uniforms.projection=x,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=p,this.vao.bind()},A.unbind=function(){this.vao.unbind()},A.drawAxisLine=function(w,k,x,E,M){var d=_(c);this.shader.uniforms.majorAxis=c,d[w]=k[1][w]-k[0][w],this.shader.uniforms.minorAxis=d;var C=T(v,x);C[w]+=k[0][w],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=E;var S=_(h);S[(w+2)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6);var S=_(h);S[(w+1)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6)},A.drawAxisTicks=function(w,k,x,E,M){if(this.tickCount[w]){var d=_(f);d[w]=1,this.shader.uniforms.majorAxis=d,this.shader.uniforms.offset=k,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=E,this.shader.uniforms.lineWidth=M;var C=_(h);C[w]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[w],this.tickOffset[w])}},A.drawGrid=function(w,k,x,E,M,d){if(this.gridCount[w]){var C=_(c);C[k]=x[1][k]-x[0][k],this.shader.uniforms.minorAxis=C;var S=T(v,E);S[k]+=x[0][k],this.shader.uniforms.offset=S;var P=_(f);P[w]=1,this.shader.uniforms.majorAxis=P;var D=_(h);D[w]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=d,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,this.gridCount[w],this.gridOffset[w])}},A.drawZero=function(w,k,x,E,M,d){var C=_(c);this.shader.uniforms.majorAxis=C,C[w]=x[1][w]-x[0][w],this.shader.uniforms.minorAxis=C;var S=T(v,E);S[w]+=x[0][w],this.shader.uniforms.offset=S;var P=_(h);P[k]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=d,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,6)},A.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function b(w,k,x){var E=[],M=[0,0,0],d=[0,0,0],C=[0,0,0],S=[0,0,0];E.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var O=E.length/3|0,D=0;D<x[P].length;++D){var z=+x[P][D].x;E.push(z,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1)}var B=E.length/3|0;M[P]=O,d[P]=B-O;for(var O=E.length/3|0,V=0;V<x[P].length;++V){var z=+x[P][V].x;E.push(z,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1)}var B=E.length/3|0;C[P]=O,S[P]=B-O}var F=s(w,new Float32Array(E)),N=l(w,[{buffer:F,type:w.FLOAT,size:3,stride:0,offset:0}]),Z=u(w);return Z.attributes.position.location=0,new g(w,F,N,Z,d,M,S,C)}},1943:function(n,a,o){"use strict";var s=o(6832),l=o(5158),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.j=function(_){return l(_,u,f,null,[{name:"position",type:"vec3"}])};var c=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.f=function(_){return l(_,c,h,null,[{name:"position",type:"vec3"}])};var v=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),p=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);a.bg=function(_){return l(_,v,p,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(n,a,o){"use strict";n.exports=A;var s=o(5827),l=o(2944),u=o(875),f=o(1943).f,c=window||process.global||{},h=c.__TEXT_CACHE||{};c.__TEXT_CACHE={};var v=3;function p(b,w,k,x){this.gl=b,this.shader=w,this.buffer=k,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var _=p.prototype,T=[0,0];_.bind=function(b,w,k,x){this.vao.bind(),this.shader.bind();var E=this.shader.uniforms;E.model=b,E.view=w,E.projection=k,E.pixelScale=x,T[0]=this.gl.drawingBufferWidth,T[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=T},_.unbind=function(){this.vao.unbind()},_.update=function(b,w,k,x,E){var M=[];function d(F,N,Z,J,re,le){var fe=h[Z];fe||(fe=h[Z]={});var K=fe[N];K||(K=fe[N]=g(N,{triangles:!0,font:Z,textAlign:"center",textBaseline:"middle",lineSpacing:re,styletags:le}));for(var X=(J||12)/12,ae=K.positions,oe=K.cells,_e=0,be=oe.length;_e<be;++_e)for(var he=oe[_e],ie=2;ie>=0;--ie){var ye=ae[he[ie]];M.push(X*ye[0],-X*ye[1],F)}}for(var C=[0,0,0],S=[0,0,0],P=[0,0,0],D=[0,0,0],z=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},V=0;V<3;++V){P[V]=M.length/v|0,d(.5*(b[0][V]+b[1][V]),w[V],k[V],12,z,O),D[V]=(M.length/v|0)-P[V],C[V]=M.length/v|0;for(var B=0;B<x[V].length;++B)x[V][B].text&&d(x[V][B].x,x[V][B].text,x[V][B].font||E,x[V][B].fontSize||12,z,O);S[V]=(M.length/v|0)-C[V]}this.buffer.update(M),this.tickOffset=C,this.tickCount=S,this.labelOffset=P,this.labelCount=D},_.drawTicks=function(b,w,k,x,E,M,d,C){this.tickCount[b]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=w,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b]))},_.drawLabel=function(b,w,k,x,E,M,d,C){this.labelCount[b]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=w,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.labelCount[b],this.labelOffset[b]))},_.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function g(b,w){try{return u(b,w)}catch(k){return console.warn('error vectorizing text:"'+b+'" error:',k),{cells:[],positions:[]}}}function A(b,w,k,x,E,M){var d=s(b),C=l(b,[{buffer:d,size:3}]),S=f(b);S.attributes.position.location=0;var P=new p(b,S,d,C);return P.update(w,k,x,E,M),P}},8468:function(n,a){"use strict";a.create=s,a.equal=l;function o(u,f){var c=u+"",h=c.indexOf("."),v=0;h>=0&&(v=c.length-h-1);var p=Math.pow(10,v),_=Math.round(u*f*p),T=_+"";if(T.indexOf("e")>=0)return T;var g=_/p,A=_%p;_<0?(g=-Math.ceil(g)|0,A=-A|0):(g=Math.floor(g)|0,A=A|0);var b=""+g;if(_<0&&(b="-"+b),v){for(var w=""+A;w.length<v;)w="0"+w;return b+"."+w}else return b}function s(u,f){for(var c=[],h=0;h<3;++h){for(var v=[],p=.5*(u[0][h]+u[1][h]),_=0;_*f[h]<=u[1][h];++_)v.push({x:_*f[h],text:o(f[h],_)});for(var _=-1;_*f[h]>=u[0][h];--_)v.push({x:_*f[h],text:o(f[h],_)});c.push(v)}return c}function l(u,f){for(var c=0;c<3;++c){if(u[c].length!==f[c].length)return!1;for(var h=0;h<u[c].length;++h){var v=u[c][h],p=f[c][h];if(v.x!==p.x||v.text!==p.text||v.font!==p.font||v.fontColor!==p.fontColor||v.fontSize!==p.fontSize||v.dx!==p.dx||v.dy!==p.dy)return!1}}return!0}},2771:function(n,a,o){"use strict";n.exports=k;var s=o(5795),l=o(4670),u=o(2864),f=o(104),c=o(2142),h=o(6342),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16);function _(x,E,M){this.lo=x,this.hi=E,this.pixelsPerDataUnit=M}var T=[0,0,0,1],g=[0,0,0,1];function A(x,E,M,d,C){for(var S=0;S<3;++S){for(var P=T,D=g,z=0;z<3;++z)D[z]=P[z]=M[z];D[3]=P[3]=1,D[S]+=1,h(D,D,E),D[3]<0&&(x[S]=1/0),P[S]-=1,h(P,P,E),P[3]<0&&(x[S]=1/0);var O=(P[0]/P[3]-D[0]/D[3])*d,V=(P[1]/P[3]-D[1]/D[3])*C;x[S]=.25*Math.sqrt(O*O+V*V)}return x}var b=[new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0)],w=[0,0,0];function k(x,E,M,d,V){var S=E.model||v,P=E.view||v,D=E.projection||v,z=E._ortho||!1,O=x.bounds,V=V||u(S,P,D,O,z),B=V.axis;f(p,P,S),f(p,D,p);for(var F=b,N=0;N<3;++N)F[N].lo=1/0,F[N].hi=-1/0,F[N].pixelsPerDataUnit=1/0;var Z=s(c(p,p));c(p,p);for(var J=0;J<3;++J){var re=(J+1)%3,le=(J+2)%3,fe=w;e:for(var N=0;N<2;++N){var K=[];if(B[J]<0!=!!N){fe[J]=O[N][J];for(var X=0;X<2;++X){fe[re]=O[X^N][re];for(var ae=0;ae<2;++ae)fe[le]=O[ae^X^N][le],K.push(fe.slice())}for(var oe=z?5:4,X=oe;X===oe;++X){if(K.length===0)continue e;K=l.positive(K,Z[X])}for(var X=0;X<K.length;++X)for(var le=K[X],_e=A(w,p,le,M,d),ae=0;ae<3;++ae)F[ae].lo=Math.min(F[ae].lo,le[ae]),F[ae].hi=Math.max(F[ae].hi,le[ae]),ae!==J&&(F[ae].pixelsPerDataUnit=Math.min(F[ae].pixelsPerDataUnit,Math.abs(_e[ae])))}}}return F}},5827:function(n,a,o){"use strict";var s=o(5306),l=o(7498),u=o(5050),f=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function c(g,A,b,w,k){this.gl=g,this.type=A,this.handle=b,this.length=w,this.usage=k}var h=c.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function v(g,A,b,w,k,x){var E=k.length*k.BYTES_PER_ELEMENT;if(x<0)return g.bufferData(A,k,w),E;if(E+x>b)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return g.bufferSubData(A,x,k),b}function p(g,A){for(var b=s.malloc(g.length,A),w=g.length,k=0;k<w;++k)b[k]=g[k];return b}function _(g,A){for(var b=1,w=A.length-1;w>=0;--w){if(A[w]!==b)return!1;b*=g[w]}return!0}h.update=function(g,A){if(typeof A!="number"&&(A=-1),this.bind(),typeof g=="object"&&typeof g.shape!="undefined"){var b=g.dtype;if(f.indexOf(b)<0&&(b="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var w=gl.getExtension("OES_element_index_uint");w&&b!=="uint16"?b="uint32":b="uint16"}if(b===g.dtype&&_(g.shape,g.stride))g.offset===0&&g.data.length===g.shape[0]?this.length=v(this.gl,this.type,this.length,this.usage,g.data,A):this.length=v(this.gl,this.type,this.length,this.usage,g.data.subarray(g.offset,g.shape[0]),A);else{var k=s.malloc(g.size,b),x=u(k,g.shape);l.assign(x,g),A<0?this.length=v(this.gl,this.type,this.length,this.usage,k,A):this.length=v(this.gl,this.type,this.length,this.usage,k.subarray(0,g.size),A),s.free(k)}}else if(Array.isArray(g)){var E;this.type===this.gl.ELEMENT_ARRAY_BUFFER?E=p(g,"uint16"):E=p(g,"float32"),A<0?this.length=v(this.gl,this.type,this.length,this.usage,E,A):this.length=v(this.gl,this.type,this.length,this.usage,E.subarray(0,g.length),A),s.free(E)}else if(typeof g=="object"&&typeof g.length=="number")this.length=v(this.gl,this.type,this.length,this.usage,g,A);else if(typeof g=="number"||g===void 0){if(A>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");g=g|0,g<=0&&(g=1),this.gl.bufferData(this.type,g|0,this.usage),this.length=g}else throw new Error("gl-buffer: Invalid data type")};function T(g,A,b,w){if(b=b||g.ARRAY_BUFFER,w=w||g.DYNAMIC_DRAW,b!==g.ARRAY_BUFFER&&b!==g.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(w!==g.DYNAMIC_DRAW&&w!==g.STATIC_DRAW&&w!==g.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var k=g.createBuffer(),x=new c(g,b,k,0,w);return x.update(A),x}n.exports=T},1140:function(n,a,o){"use strict";var s=o(2858);n.exports=function(u,f){var c=u.positions,h=u.vectors,v={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return f&&(f[0]=[0,0,0],f[1]=[0,0,0]),v;for(var p=0,_=1/0,T=-1/0,g=1/0,A=-1/0,b=1/0,w=-1/0,k=null,x=null,E=[],M=1/0,d=!1,C=0;C<c.length;C++){var S=c[C];_=Math.min(S[0],_),T=Math.max(S[0],T),g=Math.min(S[1],g),A=Math.max(S[1],A),b=Math.min(S[2],b),w=Math.max(S[2],w);var P=h[C];if(s.length(P)>p&&(p=s.length(P)),C){var D=2*s.distance(k,S)/(s.length(x)+s.length(P));D?(M=Math.min(M,D),d=!1):d=!0}d||(k=S,x=P),E.push(P)}var z=[_,g,b],O=[T,A,w];f&&(f[0]=z,f[1]=O),p===0&&(p=1);var V=1/p;isFinite(M)||(M=1),v.vectorScale=M;var B=u.coneSize||.5;u.absoluteConeSize&&(B=u.absoluteConeSize*V),v.coneScale=B;for(var C=0,F=0;C<c.length;C++)for(var S=c[C],N=S[0],Z=S[1],J=S[2],re=E[C],le=s.length(re)*V,fe=0,K=8;fe<K;fe++){v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vertexIntensity.push(le,le,le),v.vertexIntensity.push(le,le,le);var X=v.positions.length;v.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return v};var l=o(7234);n.exports.createMesh=o(5028),n.exports.createConeMesh=function(u,f){return n.exports.createMesh(u,f,{shaders:l,traceType:"cone"})}},5028:function(n,a,o){"use strict";var s=o(5158),l=o(5827),u=o(2944),f=o(8931),c=o(104),h=o(7437),v=o(5050),p=o(9156),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function T(E,M,d,C,S,P,D,z,O,V,B){this.gl=E,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=M,this.dirty=!0,this.triShader=d,this.pickShader=C,this.trianglePositions=S,this.triangleVectors=P,this.triangleColors=z,this.triangleUVs=O,this.triangleIds=D,this.triangleVAO=V,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=B,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=_,this._view=_,this._projection=_,this._resolution=[1,1]}var g=T.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(E){this.pickId=E};function A(E){for(var M=p({colormap:E,nshades:256,format:"rgba"}),d=new Uint8Array(256*4),C=0;C<256;++C){for(var S=M[C],P=0;P<3;++P)d[4*C+P]=S[P];d[4*C+3]=S[3]*255}return v(d,[256,256,4],[4,0,1])}function b(E){for(var M=E.length,d=new Array(M),C=0;C<M;++C)d[C]=E[C][2];return d}g.update=function(E){E=E||{};var M=this.gl;this.dirty=!0,"lightPosition"in E&&(this.lightPosition=E.lightPosition),"opacity"in E&&(this.opacity=E.opacity),"ambient"in E&&(this.ambientLight=E.ambient),"diffuse"in E&&(this.diffuseLight=E.diffuse),"specular"in E&&(this.specularLight=E.specular),"roughness"in E&&(this.roughness=E.roughness),"fresnel"in E&&(this.fresnel=E.fresnel),E.tubeScale!==void 0&&(this.tubeScale=E.tubeScale),E.vectorScale!==void 0&&(this.vectorScale=E.vectorScale),E.coneScale!==void 0&&(this.coneScale=E.coneScale),E.coneOffset!==void 0&&(this.coneOffset=E.coneOffset),E.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=M.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=M.LINEAR,this.texture.setPixels(A(E.colormap)),this.texture.generateMipmap());var d=E.cells,C=E.positions,S=E.vectors;if(!(!C||!d||!S)){var P=[],D=[],z=[],O=[],V=[];this.cells=d,this.positions=C,this.vectors=S;var B=E.meshColor||[1,1,1,1],F=E.vertexIntensity,N=1/0,Z=-1/0;if(F)if(E.vertexIntensityBounds)N=+E.vertexIntensityBounds[0],Z=+E.vertexIntensityBounds[1];else for(var J=0;J<F.length;++J){var re=F[J];N=Math.min(N,re),Z=Math.max(Z,re)}else for(var J=0;J<C.length;++J){var re=C[J][2];N=Math.min(N,re),Z=Math.max(Z,re)}F?this.intensity=F:this.intensity=b(C),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var J=0;J<C.length;++J)for(var le=C[J],fe=0;fe<3;++fe)isNaN(le[fe])||!isFinite(le[fe])||(this.bounds[0][fe]=Math.min(this.bounds[0][fe],le[fe]),this.bounds[1][fe]=Math.max(this.bounds[1][fe],le[fe]));var K=0;e:for(var J=0;J<d.length;++J){var X=d[J];switch(X.length){case 3:for(var fe=0;fe<3;++fe)for(var ae=X[fe],le=C[ae],oe=0;oe<3;++oe)if(isNaN(le[oe])||!isFinite(le[oe]))continue e;for(var fe=0;fe<3;++fe){var ae=X[2-fe],le=C[ae];P.push(le[0],le[1],le[2],le[3]);var _e=S[ae];D.push(_e[0],_e[1],_e[2],_e[3]||0);var be=B;be.length===3?z.push(be[0],be[1],be[2],1):z.push(be[0],be[1],be[2],be[3]);var he;F?he=[(F[ae]-N)/(Z-N),0]:he=[(le[2]-N)/(Z-N),0],O.push(he[0],he[1]),V.push(J)}K+=1;break;default:break}}this.triangleCount=K,this.trianglePositions.update(P),this.triangleVectors.update(D),this.triangleColors.update(z),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(V))}},g.drawTransparent=g.draw=function(E){E=E||{};for(var M=this.gl,d=E.model||_,C=E.view||_,S=E.projection||_,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);var z={model:d,view:C,projection:S,inverseModel:_.slice(),clipBounds:P,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};z.inverseModel=h(z.inverseModel,z.model),M.disable(M.CULL_FACE),this.texture.bind(0);var O=new Array(16);c(O,z.view,z.model),c(O,z.projection,O),h(O,O);for(var D=0;D<3;++D)z.eyePosition[D]=O[12+D]/O[15];for(var V=O[15],D=0;D<3;++D)V+=this.lightPosition[D]*O[4*D+3];for(var D=0;D<3;++D){for(var B=O[12+D],F=0;F<3;++F)B+=O[4*F+D]*this.lightPosition[F];z.lightPosition[D]=B/V}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=z,this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},g.drawPick=function(E){E=E||{};for(var M=this.gl,d=E.model||_,C=E.view||_,S=E.projection||_,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);this._model=[].slice.call(d),this._view=[].slice.call(C),this._projection=[].slice.call(S),this._resolution=[M.drawingBufferWidth,M.drawingBufferHeight];var z={model:d,view:C,projection:S,clipBounds:P,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=z,this.triangleCount>0&&(this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},g.pick=function(E){if(!E||E.id!==this.pickId)return null;var M=E.value[0]+256*E.value[1]+65536*E.value[2],d=this.cells[M],C=this.positions[d[1]].slice(0,3),S={position:C,dataCoordinate:C,index:Math.floor(d[1]/48)};return this.traceType==="cone"?S.index=Math.floor(d[1]/48):this.traceType==="streamtube"&&(S.intensity=this.intensity[d[1]],S.velocity=this.vectors[d[1]].slice(0,3),S.divergence=this.vectors[d[1]][3],S.index=M),S},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function w(E,M){var d=s(E,M.meshShader.vertex,M.meshShader.fragment,null,M.meshShader.attributes);return d.attributes.position.location=0,d.attributes.color.location=2,d.attributes.uv.location=3,d.attributes.vector.location=4,d}function k(E,M){var d=s(E,M.pickShader.vertex,M.pickShader.fragment,null,M.pickShader.attributes);return d.attributes.position.location=0,d.attributes.id.location=1,d.attributes.vector.location=4,d}function x(E,M,d){var C=d.shaders;arguments.length===1&&(M=E,E=M.gl);var S=w(E,C),P=k(E,C),D=f(E,v(new Uint8Array([255,255,255,255]),[1,1,4]));D.generateMipmap(),D.minFilter=E.LINEAR_MIPMAP_LINEAR,D.magFilter=E.LINEAR;var z=l(E),O=l(E),V=l(E),B=l(E),F=l(E),N=u(E,[{buffer:z,type:E.FLOAT,size:4},{buffer:F,type:E.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:V,type:E.FLOAT,size:4},{buffer:B,type:E.FLOAT,size:2},{buffer:O,type:E.FLOAT,size:4}]),Z=new T(E,D,S,P,z,O,F,V,B,N,d.traceType||"cone");return Z.update(M),Z}n.exports=x},7234:function(n,a,o){var s=o(6832),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(n){n.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(n,a,o){var s=o(1950);n.exports=function(u){return s[u]}},3110:function(n,a,o){"use strict";n.exports=T;var s=o(5827),l=o(2944),u=o(7667),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(g,A,b,w){this.gl=g,this.shader=w,this.buffer=A,this.vao=b,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=c.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(g){var A=this.gl,b=this.shader.uniforms;this.shader.bind();var w=b.view=g.view||f,k=b.projection=g.projection||f;b.model=g.model||f,b.clipBounds=this.clipBounds,b.opacity=this.opacity;var x=w[12],E=w[13],M=w[14],d=w[15],C=g._ortho||!1,S=C?2:1,P=S*this.pixelRatio*(k[3]*x+k[7]*E+k[11]*M+k[15]*d)/A.drawingBufferHeight;this.vao.bind();for(var D=0;D<3;++D)A.lineWidth(this.lineWidth[D]*this.pixelRatio),b.capSize=this.capSize[D]*P,this.lineCount[D]&&A.drawArrays(A.LINES,this.lineOffset[D],this.lineCount[D]);this.vao.unbind()};function v(g,A){for(var b=0;b<3;++b)g[0][b]=Math.min(g[0][b],A[b]),g[1][b]=Math.max(g[1][b],A[b])}var p=function(){for(var g=new Array(3),A=0;A<3;++A){for(var b=[],w=1;w<=2;++w)for(var k=-1;k<=1;k+=2){var x=(w+A)%3,E=[0,0,0];E[x]=k,b.push(E)}g[A]=b}return g}();function _(g,A,b,w){for(var k=p[w],x=0;x<k.length;++x){var E=k[x];g.push(A[0],A[1],A[2],b[0],b[1],b[2],b[3],E[0],E[1],E[2])}return k.length}h.update=function(g){g=g||{},"lineWidth"in g&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var A=g.color||[[0,0,0],[0,0,0],[0,0,0]],b=g.position,w=g.error;if(Array.isArray(A[0])||(A=[A,A,A]),b&&w){var k=[],x=b.length,E=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var M=0;M<3;++M){this.lineOffset[M]=E;e:for(var d=0;d<x;++d){for(var C=b[d],S=0;S<3;++S)if(isNaN(C[S])||!isFinite(C[S]))continue e;var P=w[d],D=A[M];if(Array.isArray(D[0])&&(D=A[d]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),!(isNaN(P[0][M])||isNaN(P[1][M]))){if(P[0][M]<0){var z=C.slice();z[M]+=P[0][M],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,z[0],z[1],z[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,z),E+=2+_(k,z,D,M)}if(P[1][M]>0){var z=C.slice();z[M]+=P[1][M],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,z[0],z[1],z[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,z),E+=2+_(k,z,D,M)}}}this.lineCount[M]=E-this.lineOffset[M]}this.buffer.update(k)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function T(g){var A=g.gl,b=s(A),w=l(A,[{buffer:b,type:A.FLOAT,size:3,offset:0,stride:40},{buffer:b,type:A.FLOAT,size:4,offset:12,stride:40},{buffer:b,type:A.FLOAT,size:3,offset:28,stride:40}]),k=u(A);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.offset.location=2;var x=new c(A,b,w,k);return x.update(g),x}},7667:function(n,a,o){"use strict";var s=o(6832),l=o(5158),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(n,a,o){"use strict";var s=o(8931);n.exports=E;var l=null,u,f,c,h;function v(M){var d=M.getParameter(M.FRAMEBUFFER_BINDING),C=M.getParameter(M.RENDERBUFFER_BINDING),S=M.getParameter(M.TEXTURE_BINDING_2D);return[d,C,S]}function p(M,d){M.bindFramebuffer(M.FRAMEBUFFER,d[0]),M.bindRenderbuffer(M.RENDERBUFFER,d[1]),M.bindTexture(M.TEXTURE_2D,d[2])}function _(M,d){var C=M.getParameter(d.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(C+1);for(var S=0;S<=C;++S){for(var P=new Array(C),D=0;D<S;++D)P[D]=M.COLOR_ATTACHMENT0+D;for(var D=S;D<C;++D)P[D]=M.NONE;l[S]=P}}function T(M){switch(M){case u:throw new Error("gl-fbo: Framebuffer unsupported");case f:throw new Error("gl-fbo: Framebuffer incomplete attachment");case c:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(M,d,C,S,P,D){if(!S)return null;var z=s(M,d,C,P,S);return z.magFilter=M.NEAREST,z.minFilter=M.NEAREST,z.mipSamples=1,z.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,D,M.TEXTURE_2D,z.handle,0),z}function A(M,d,C,S,P){var D=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,D),M.renderbufferStorage(M.RENDERBUFFER,S,d,C),M.framebufferRenderbuffer(M.FRAMEBUFFER,P,M.RENDERBUFFER,D),D}function b(M){var d=v(M.gl),C=M.gl,S=M.handle=C.createFramebuffer(),P=M._shape[0],D=M._shape[1],z=M.color.length,O=M._ext,V=M._useStencil,B=M._useDepth,F=M._colorType;C.bindFramebuffer(C.FRAMEBUFFER,S);for(var N=0;N<z;++N)M.color[N]=g(C,P,D,F,C.RGBA,C.COLOR_ATTACHMENT0+N);z===0?(M._color_rb=A(C,P,D,C.RGBA4,C.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(l[0])):z>1&&O.drawBuffersWEBGL(l[z]);var Z=C.getExtension("WEBGL_depth_texture");Z?V?M.depth=g(C,P,D,Z.UNSIGNED_INT_24_8_WEBGL,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B&&(M.depth=g(C,P,D,C.UNSIGNED_SHORT,C.DEPTH_COMPONENT,C.DEPTH_ATTACHMENT)):B&&V?M._depth_rb=A(C,P,D,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B?M._depth_rb=A(C,P,D,C.DEPTH_COMPONENT16,C.DEPTH_ATTACHMENT):V&&(M._depth_rb=A(C,P,D,C.STENCIL_INDEX,C.STENCIL_ATTACHMENT));var J=C.checkFramebufferStatus(C.FRAMEBUFFER);if(J!==C.FRAMEBUFFER_COMPLETE){M._destroyed=!0,C.bindFramebuffer(C.FRAMEBUFFER,null),C.deleteFramebuffer(M.handle),M.handle=null,M.depth&&(M.depth.dispose(),M.depth=null),M._depth_rb&&(C.deleteRenderbuffer(M._depth_rb),M._depth_rb=null);for(var N=0;N<M.color.length;++N)M.color[N].dispose(),M.color[N]=null;M._color_rb&&(C.deleteRenderbuffer(M._color_rb),M._color_rb=null),p(C,d),T(J)}p(C,d)}function w(M,d,C,S,P,D,z,O){this.gl=M,this._shape=[d|0,C|0],this._destroyed=!1,this._ext=O,this.color=new Array(P);for(var V=0;V<P;++V)this.color[V]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=S,this._useDepth=D,this._useStencil=z;var B=this,F=[d|0,C|0];Object.defineProperties(F,{0:{get:function(){return B._shape[0]},set:function(N){return B.width=N}},1:{get:function(){return B._shape[1]},set:function(N){return B.height=N}}}),this._shapeVector=F,b(this)}var k=w.prototype;function x(M,d,C){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(M._shape[0]===d&&M._shape[1]===C)){var S=M.gl,P=S.getParameter(S.MAX_RENDERBUFFER_SIZE);if(d<0||d>P||C<0||C>P)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=d,M._shape[1]=C;for(var D=v(S),z=0;z<M.color.length;++z)M.color[z].shape=M._shape;M._color_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,M._color_rb),S.renderbufferStorage(S.RENDERBUFFER,S.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&S.renderbufferStorage(S.RENDERBUFFER,S.STENCIL_INDEX,M._shape[0],M._shape[1])),S.bindFramebuffer(S.FRAMEBUFFER,M.handle);var O=S.checkFramebufferStatus(S.FRAMEBUFFER);O!==S.FRAMEBUFFER_COMPLETE&&(M.dispose(),p(S,D),T(O)),p(S,D)}}Object.defineProperties(k,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[M|0,M|0]),M.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var d=M[0]|0,C=M[1]|0;return x(this,d,C),[d,C]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return M=M|0,x(this,M,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return M=M|0,x(this,this._shape[0],M),M},enumerable:!1}}),k.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},k.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function E(M,d,C,S){u||(u=M.FRAMEBUFFER_UNSUPPORTED,f=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,c=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var P=M.getExtension("WEBGL_draw_buffers");if(!l&&P&&_(M,P),Array.isArray(d)&&(S=C,C=d[1]|0,d=d[0]|0),typeof d!="number")throw new Error("gl-fbo: Missing shape parameter");var D=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(d<0||d>D||C<0||C>D)throw new Error("gl-fbo: Parameters are too large for FBO");S=S||{};var z=1;if("color"in S){if(z=Math.max(S.color|0,0),z<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(z>1)if(P){if(z>M.getParameter(P.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+z+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var O=M.UNSIGNED_BYTE,V=M.getExtension("OES_texture_float");if(S.float&&z>0){if(!V)throw new Error("gl-fbo: Context does not support floating point textures");O=M.FLOAT}else S.preferFloat&&z>0&&V&&(O=M.FLOAT);var B=!0;"depth"in S&&(B=!!S.depth);var F=!1;return"stencil"in S&&(F=!!S.stencil),new w(M,d,C,O,z,B,F,P)}},3530:function(n,a,o){var s=o(8974).sprintf,l=o(6603),u=o(9365),f=o(8008);n.exports=c;function c(h,v,p){"use strict";var _=u(v)||"of unknown name (see npm glsl-shader-name)",T="unknown type";p!==void 0&&(T=p===l.FRAGMENT_SHADER?"fragment":"vertex");for(var g=s(`Error compiling %s shader %s:
`,T,_),A=s("%s%s",g,h),b=h.split(`
`),w={},k=0;k<b.length;k++){var x=b[k];if(!(x===""||x==="\0")){var E=parseInt(x.split(":")[2]);if(isNaN(E))throw new Error(s("Could not parse error: %s",x));w[E]=x}}for(var M=f(v).split(`
`),k=0;k<M.length;k++)if(!(!w[k+3]&&!w[k+2]&&!w[k+1])){var d=M[k];if(g+=d+`
`,w[k+1]){var C=w[k+1];C=C.substr(C.split(":",3).join(":").length+1).trim(),g+=s(`^^^ %s

`,C)}}return{long:g.trim(),short:A.trim()}}},6386:function(n,a,o){"use strict";n.exports=T;var s=o(5070),l=o(9560),u=o(5306),f=o(5158),c=o(5827),h=o(1292);function v(g,A,b,w,k,x,E){this.plot=g,this.shader=A,this.pickShader=b,this.positionBuffer=w,this.weightBuffer=k,this.colorBuffer=x,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p=v.prototype,_=[0,0,1,0,0,1,1,0,1,1,0,1];p.draw=function(){var g=[1,0,0,0,1,0,0,0,1];return function(){var A=this.plot,b=this.shader,w=this.bounds,k=this.numVertices;if(!(k<=0)){var x=A.gl,E=A.dataBox,M=w[2]-w[0],d=w[3]-w[1],C=E[2]-E[0],S=E[3]-E[1];g[0]=2*M/C,g[4]=2*d/S,g[6]=2*(w[0]-E[0])/C-1,g[7]=2*(w[1]-E[1])/S-1,b.bind();var P=b.uniforms;P.viewTransform=g,P.shape=this.shape;var D=b.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,k)}}}(),p.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],A=[0,0,0,0];return function(b){var w=this.plot,k=this.pickShader,x=this.bounds,E=this.numVertices;if(!(E<=0)){var M=w.gl,d=w.dataBox,C=x[2]-x[0],S=x[3]-x[1],P=d[2]-d[0],D=d[3]-d[1];g[0]=2*C/P,g[4]=2*S/D,g[6]=2*(x[0]-d[0])/P-1,g[7]=2*(x[1]-d[1])/D-1;for(var z=0;z<4;++z)A[z]=b>>z*8&255;this.pickOffset=b,k.bind();var O=k.uniforms;O.viewTransform=g,O.pickOffset=A,O.shape=this.shape;var V=k.attributes;return this.positionBuffer.bind(),V.position.pointer(),this.weightBuffer.bind(),V.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),V.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,E),b+this.shape[0]*this.shape[1]}}}(),p.pick=function(g,A,b){var w=this.pickOffset,k=this.shape[0]*this.shape[1];if(b<w||b>=w+k)return null;var x=b-w,E=this.xData,M=this.yData;return{object:this,pointId:x,dataCoord:[E[x%this.shape[0]],M[x/this.shape[0]|0]]}},p.update=function(g){g=g||{};var A=g.shape||[0,0],b=g.x||l(A[0]),w=g.y||l(A[1]),k=g.z||new Float32Array(A[0]*A[1]),x=g.zsmooth!==!1;this.xData=b,this.yData=w;var E=g.colorLevels||[0],M=g.colorValues||[0,0,0,1],d=E.length,C=this.bounds,S,P,D,z;x?(S=C[0]=b[0],P=C[1]=w[0],D=C[2]=b[b.length-1],z=C[3]=w[w.length-1]):(S=C[0]=b[0]+(b[1]-b[0])/2,P=C[1]=w[0]+(w[1]-w[0])/2,D=C[2]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2,z=C[3]=w[w.length-1]+(w[w.length-1]-w[w.length-2])/2);var O=1/(D-S),V=1/(z-P),B=A[0],F=A[1];this.shape=[B,F];var N=(x?(B-1)*(F-1):B*F)*(_.length>>>1);this.numVertices=N;for(var Z=u.mallocUint8(N*4),J=u.mallocFloat32(N*2),re=u.mallocUint8(N*2),le=u.mallocUint32(N),fe=0,K=x?B-1:B,X=x?F-1:F,ae=0;ae<X;++ae){var oe,_e;x?(oe=V*(w[ae]-P),_e=V*(w[ae+1]-P)):(oe=ae<F-1?V*(w[ae]-(w[ae+1]-w[ae])/2-P):V*(w[ae]-(w[ae]-w[ae-1])/2-P),_e=ae<F-1?V*(w[ae]+(w[ae+1]-w[ae])/2-P):V*(w[ae]+(w[ae]-w[ae-1])/2-P));for(var be=0;be<K;++be){var he,ie;x?(he=O*(b[be]-S),ie=O*(b[be+1]-S)):(he=be<B-1?O*(b[be]-(b[be+1]-b[be])/2-S):O*(b[be]-(b[be]-b[be-1])/2-S),ie=be<B-1?O*(b[be]+(b[be+1]-b[be])/2-S):O*(b[be]+(b[be]-b[be-1])/2-S));for(var ye=0;ye<_.length;ye+=2){var ue=_[ye],Ae=_[ye+1],Re=x?(ae+Ae)*B+(be+ue):ae*B+be,ze=k[Re],et=s.le(E,ze),Le,Ie,dt,ct;if(et<0)Le=M[0],Ie=M[1],dt=M[2],ct=M[3];else if(et===d-1)Le=M[4*d-4],Ie=M[4*d-3],dt=M[4*d-2],ct=M[4*d-1];else{var Ke=(ze-E[et])/(E[et+1]-E[et]),_t=1-Ke,zt=4*et,Et=4*(et+1);Le=_t*M[zt]+Ke*M[Et],Ie=_t*M[zt+1]+Ke*M[Et+1],dt=_t*M[zt+2]+Ke*M[Et+2],ct=_t*M[zt+3]+Ke*M[Et+3]}Z[4*fe]=255*Le,Z[4*fe+1]=255*Ie,Z[4*fe+2]=255*dt,Z[4*fe+3]=255*ct,J[2*fe]=he*.5+ie*.5,J[2*fe+1]=oe*.5+_e*.5,re[2*fe]=ue,re[2*fe+1]=Ae,le[fe]=ae*B+be,fe+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(re),this.colorBuffer.update(Z),this.idBuffer.update(le),u.free(J),u.free(Z),u.free(re),u.free(le)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function T(g,A){var b=g.gl,w=f(b,h.vertex,h.fragment),k=f(b,h.pickVertex,h.pickFragment),x=c(b),E=c(b),M=c(b),d=c(b),C=new v(g,w,k,x,E,M,d);return C.update(A),g.addObject(C),C}},1292:function(n,a,o){"use strict";var s=o(6832);n.exports={fragment:s([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(n,a,o){var s=o(6832),l=o(5158),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];a.createShader=function(v){return l(v,u,f,null,h)},a.createPickShader=function(v){return l(v,u,c,null,h)}},6086:function(n,a,o){"use strict";n.exports=M;var s=o(5827),l=o(2944),u=o(8931),f=new Uint8Array(4),c=new Float32Array(f.buffer);function h(d,C,S,P){return f[0]=P,f[1]=S,f[2]=C,f[3]=d,c[0]}var v=o(5070),p=o(5050),_=o(248),T=_.createShader,g=_.createPickShader,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(d,C){for(var S=0,P=0;P<3;++P){var D=d[P]-C[P];S+=D*D}return Math.sqrt(S)}function w(d){for(var C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)C[0][S]=Math.max(d[0][S],C[0][S]),C[1][S]=Math.min(d[1][S],C[1][S]);return C}function k(d,C,S,P){this.arcLength=d,this.position=C,this.index=S,this.dataCoordinate=P}function x(d,C,S,P,D,z){this.gl=d,this.shader=C,this.pickShader=S,this.buffer=P,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=z,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var E=x.prototype;E.isTransparent=function(){return this.hasAlpha},E.isOpaque=function(){return!this.hasAlpha},E.pickSlots=1,E.setPickBase=function(d){this.pickId=d},E.drawTransparent=E.draw=function(d){if(this.vertexCount){var C=this.gl,S=this.shader,P=this.vao;S.bind(),S.uniforms={model:d.model||A,view:d.view||A,projection:d.projection||A,clipBounds:w(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.drawPick=function(d){if(this.vertexCount){var C=this.gl,S=this.pickShader,P=this.vao;S.bind(),S.uniforms={model:d.model||A,view:d.view||A,projection:d.projection||A,pickId:this.pickId,clipBounds:w(this.clipBounds),screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.update=function(d){var C,S;this.dirty=!0;var P=!!d.connectGaps;"dashScale"in d&&(this.dashScale=d.dashScale),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],z=[],O=[],V=0,B=0,F=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=d.position||d.positions;if(N){var Z=d.color||d.colors||[0,0,0,1],J=d.lineWidth||1,re=!1;e:for(C=1;C<N.length;++C){var le=N[C-1],fe=N[C];for(z.push(V),O.push(le.slice()),S=0;S<3;++S){if(isNaN(le[S])||isNaN(fe[S])||!isFinite(le[S])||!isFinite(fe[S])){if(!P&&D.length>0){for(var K=0;K<24;++K)D.push(D[D.length-12]);B+=2,re=!0}continue e}F[0][S]=Math.min(F[0][S],le[S],fe[S]),F[1][S]=Math.max(F[1][S],le[S],fe[S])}var X,ae;Array.isArray(Z[0])?(X=Z.length>C-1?Z[C-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1],ae=Z.length>C?Z[C]:Z.length>0?Z[Z.length-1]:[0,0,0,1]):X=ae=Z,X.length===3&&(X=[X[0],X[1],X[2],1]),ae.length===3&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var oe;Array.isArray(J)?oe=J.length>C-1?J[C-1]:J.length>0?J[J.length-1]:[0,0,0,1]:oe=J;var _e=V;if(V+=b(le,fe),re){for(S=0;S<2;++S)D.push(le[0],le[1],le[2],fe[0],fe[1],fe[2],_e,oe,X[0],X[1],X[2],X[3]);B+=2,re=!1}D.push(le[0],le[1],le[2],fe[0],fe[1],fe[2],_e,oe,X[0],X[1],X[2],X[3],le[0],le[1],le[2],fe[0],fe[1],fe[2],_e,-oe,X[0],X[1],X[2],X[3],fe[0],fe[1],fe[2],le[0],le[1],le[2],V,-oe,ae[0],ae[1],ae[2],ae[3],fe[0],fe[1],fe[2],le[0],le[1],le[2],V,oe,ae[0],ae[1],ae[2],ae[3]),B+=4}}if(this.buffer.update(D),z.push(V),O.push(N[N.length-1].slice()),this.bounds=F,this.vertexCount=B,this.points=O,this.arcLength=z,"dashes"in d){var be=d.dashes,he=be.slice();for(he.unshift(0),C=1;C<he.length;++C)he[C]=he[C-1]+he[C];var ie=p(new Array(256*4),[256,1,4]);for(C=0;C<256;++C){for(S=0;S<4;++S)ie.set(C,0,S,0);v.le(he,he[he.length-1]*C/255)&1?ie.set(C,0,0,0):ie.set(C,0,0,255)}this.texture.setPixels(ie)}},E.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},E.pick=function(d){if(!d||d.id!==this.pickId)return null;var C=h(d.value[0],d.value[1],d.value[2],0),S=v.le(this.arcLength,C);if(S<0)return null;if(S===this.arcLength.length-1)return new k(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),S);for(var P=this.points[S],D=this.points[Math.min(S+1,this.points.length-1)],z=(C-this.arcLength[S])/(this.arcLength[S+1]-this.arcLength[S]),O=1-z,V=[0,0,0],B=0;B<3;++B)V[B]=O*P[B]+z*D[B];var F=Math.min(z<.5?S:S+1,this.points.length-1);return new k(C,V,F,this.points[F])};function M(d){var C=d.gl||d.scene&&d.scene.gl,S=T(C);S.attributes.position.location=0,S.attributes.nextPosition.location=1,S.attributes.arcLength.location=2,S.attributes.lineWidth.location=3,S.attributes.color.location=4;var P=g(C);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var D=s(C),z=l(C,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),O=p(new Array(256*4),[256,1,4]),V=0;V<1024;++V)O.data[V]=255;var B=u(C,O);B.wrap=C.REPEAT;var F=new x(C,S,P,D,z,B);return F.update(d),F}},7332:function(n){n.exports=a;function a(o){var s=new Float32Array(16);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s}},9823:function(n){n.exports=a;function a(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7787:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3],c=o[4],h=o[5],v=o[6],p=o[7],_=o[8],T=o[9],g=o[10],A=o[11],b=o[12],w=o[13],k=o[14],x=o[15],E=s*h-l*c,M=s*v-u*c,d=s*p-f*c,C=l*v-u*h,S=l*p-f*h,P=u*p-f*v,D=_*w-T*b,z=_*k-g*b,O=_*x-A*b,V=T*k-g*w,B=T*x-A*w,F=g*x-A*k;return E*F-M*B+d*V+C*O-S*z+P*D}},5950:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l+l,v=u+u,p=f+f,_=l*h,T=u*h,g=u*v,A=f*h,b=f*v,w=f*p,k=c*h,x=c*v,E=c*p;return o[0]=1-g-w,o[1]=T+E,o[2]=A-x,o[3]=0,o[4]=T-E,o[5]=1-_-w,o[6]=b+k,o[7]=0,o[8]=A+x,o[9]=b-k,o[10]=1-_-g,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7280:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=u+u,p=f+f,_=c+c,T=u*v,g=u*p,A=u*_,b=f*p,w=f*_,k=c*_,x=h*v,E=h*p,M=h*_;return o[0]=1-(b+k),o[1]=g+M,o[2]=A-E,o[3]=0,o[4]=g-M,o[5]=1-(T+k),o[6]=w+x,o[7]=0,o[8]=A+E,o[9]=w-x,o[10]=1-(T+b),o[11]=0,o[12]=l[0],o[13]=l[1],o[14]=l[2],o[15]=1,o}},9947:function(n){n.exports=a;function a(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7437:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=s[4],v=s[5],p=s[6],_=s[7],T=s[8],g=s[9],A=s[10],b=s[11],w=s[12],k=s[13],x=s[14],E=s[15],M=l*v-u*h,d=l*p-f*h,C=l*_-c*h,S=u*p-f*v,P=u*_-c*v,D=f*_-c*p,z=T*k-g*w,O=T*x-A*w,V=T*E-b*w,B=g*x-A*k,F=g*E-b*k,N=A*E-b*x,Z=M*N-d*F+C*B+S*V-P*O+D*z;return Z?(Z=1/Z,o[0]=(v*N-p*F+_*B)*Z,o[1]=(f*F-u*N-c*B)*Z,o[2]=(k*D-x*P+E*S)*Z,o[3]=(A*P-g*D-b*S)*Z,o[4]=(p*V-h*N-_*O)*Z,o[5]=(l*N-f*V+c*O)*Z,o[6]=(x*C-w*D-E*d)*Z,o[7]=(T*D-A*C+b*d)*Z,o[8]=(h*F-v*V+_*z)*Z,o[9]=(u*V-l*F-c*z)*Z,o[10]=(w*P-k*C+E*M)*Z,o[11]=(g*C-T*P-b*M)*Z,o[12]=(v*O-h*B-p*z)*Z,o[13]=(l*B-u*O+f*z)*Z,o[14]=(k*d-w*S-x*M)*Z,o[15]=(T*S-g*d+A*M)*Z,o):null}},3012:function(n,a,o){var s=o(9947);n.exports=l;function l(u,f,c,h){var v,p,_,T,g,A,b,w,k,x,E=f[0],M=f[1],d=f[2],C=h[0],S=h[1],P=h[2],D=c[0],z=c[1],O=c[2];return Math.abs(E-D)<1e-6&&Math.abs(M-z)<1e-6&&Math.abs(d-O)<1e-6?s(u):(b=E-D,w=M-z,k=d-O,x=1/Math.sqrt(b*b+w*w+k*k),b*=x,w*=x,k*=x,v=S*k-P*w,p=P*b-C*k,_=C*w-S*b,x=Math.sqrt(v*v+p*p+_*_),x?(x=1/x,v*=x,p*=x,_*=x):(v=0,p=0,_=0),T=w*_-k*p,g=k*v-b*_,A=b*p-w*v,x=Math.sqrt(T*T+g*g+A*A),x?(x=1/x,T*=x,g*=x,A*=x):(T=0,g=0,A=0),u[0]=v,u[1]=T,u[2]=b,u[3]=0,u[4]=p,u[5]=g,u[6]=w,u[7]=0,u[8]=_,u[9]=A,u[10]=k,u[11]=0,u[12]=-(v*E+p*M+_*d),u[13]=-(T*E+g*M+A*d),u[14]=-(b*E+w*M+k*d),u[15]=1,u)}},104:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=s[4],p=s[5],_=s[6],T=s[7],g=s[8],A=s[9],b=s[10],w=s[11],k=s[12],x=s[13],E=s[14],M=s[15],d=l[0],C=l[1],S=l[2],P=l[3];return o[0]=d*u+C*v+S*g+P*k,o[1]=d*f+C*p+S*A+P*x,o[2]=d*c+C*_+S*b+P*E,o[3]=d*h+C*T+S*w+P*M,d=l[4],C=l[5],S=l[6],P=l[7],o[4]=d*u+C*v+S*g+P*k,o[5]=d*f+C*p+S*A+P*x,o[6]=d*c+C*_+S*b+P*E,o[7]=d*h+C*T+S*w+P*M,d=l[8],C=l[9],S=l[10],P=l[11],o[8]=d*u+C*v+S*g+P*k,o[9]=d*f+C*p+S*A+P*x,o[10]=d*c+C*_+S*b+P*E,o[11]=d*h+C*T+S*w+P*M,d=l[12],C=l[13],S=l[14],P=l[15],o[12]=d*u+C*v+S*g+P*k,o[13]=d*f+C*p+S*A+P*x,o[14]=d*c+C*_+S*b+P*E,o[15]=d*h+C*T+S*w+P*M,o}},5268:function(n){n.exports=a;function a(o,s,l,u,f,c,h){var v=1/(s-l),p=1/(u-f),_=1/(c-h);return o[0]=-2*v,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*p,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*_,o[11]=0,o[12]=(s+l)*v,o[13]=(f+u)*p,o[14]=(h+c)*_,o[15]=1,o}},1120:function(n){n.exports=a;function a(o,s,l,u,f){var c=1/Math.tan(s/2),h=1/(u-f);return o[0]=c/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(f+u)*h,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*f*u*h,o[15]=0,o}},4422:function(n){n.exports=a;function a(o,s,l,u){var f=u[0],c=u[1],h=u[2],v=Math.sqrt(f*f+c*c+h*h),p,_,T,g,A,b,w,k,x,E,M,d,C,S,P,D,z,O,V,B,F,N,Z,J;return Math.abs(v)<1e-6?null:(v=1/v,f*=v,c*=v,h*=v,p=Math.sin(l),_=Math.cos(l),T=1-_,g=s[0],A=s[1],b=s[2],w=s[3],k=s[4],x=s[5],E=s[6],M=s[7],d=s[8],C=s[9],S=s[10],P=s[11],D=f*f*T+_,z=c*f*T+h*p,O=h*f*T-c*p,V=f*c*T-h*p,B=c*c*T+_,F=h*c*T+f*p,N=f*h*T+c*p,Z=c*h*T-f*p,J=h*h*T+_,o[0]=g*D+k*z+d*O,o[1]=A*D+x*z+C*O,o[2]=b*D+E*z+S*O,o[3]=w*D+M*z+P*O,o[4]=g*V+k*B+d*F,o[5]=A*V+x*B+C*F,o[6]=b*V+E*B+S*F,o[7]=w*V+M*B+P*F,o[8]=g*N+k*Z+d*J,o[9]=A*N+x*Z+C*J,o[10]=b*N+E*Z+S*J,o[11]=w*N+M*Z+P*J,s!==o&&(o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o)}},6109:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[4],h=s[5],v=s[6],p=s[7],_=s[8],T=s[9],g=s[10],A=s[11];return s!==o&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[4]=c*f+_*u,o[5]=h*f+T*u,o[6]=v*f+g*u,o[7]=p*f+A*u,o[8]=_*f-c*u,o[9]=T*f-h*u,o[10]=g*f-v*u,o[11]=A*f-p*u,o}},7115:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],p=s[3],_=s[8],T=s[9],g=s[10],A=s[11];return s!==o&&(o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f-_*u,o[1]=h*f-T*u,o[2]=v*f-g*u,o[3]=p*f-A*u,o[8]=c*u+_*f,o[9]=h*u+T*f,o[10]=v*u+g*f,o[11]=p*u+A*f,o}},5240:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],p=s[3],_=s[4],T=s[5],g=s[6],A=s[7];return s!==o&&(o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f+_*u,o[1]=h*f+T*u,o[2]=v*f+g*u,o[3]=p*f+A*u,o[4]=_*f-c*u,o[5]=T*f-h*u,o[6]=g*f-v*u,o[7]=A*f-p*u,o}},3668:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2];return o[0]=s[0]*u,o[1]=s[1]*u,o[2]=s[2]*u,o[3]=s[3]*u,o[4]=s[4]*f,o[5]=s[5]*f,o[6]=s[6]*f,o[7]=s[7]*f,o[8]=s[8]*c,o[9]=s[9]*c,o[10]=s[10]*c,o[11]=s[11]*c,o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o}},998:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2],h,v,p,_,T,g,A,b,w,k,x,E;return s===o?(o[12]=s[0]*u+s[4]*f+s[8]*c+s[12],o[13]=s[1]*u+s[5]*f+s[9]*c+s[13],o[14]=s[2]*u+s[6]*f+s[10]*c+s[14],o[15]=s[3]*u+s[7]*f+s[11]*c+s[15]):(h=s[0],v=s[1],p=s[2],_=s[3],T=s[4],g=s[5],A=s[6],b=s[7],w=s[8],k=s[9],x=s[10],E=s[11],o[0]=h,o[1]=v,o[2]=p,o[3]=_,o[4]=T,o[5]=g,o[6]=A,o[7]=b,o[8]=w,o[9]=k,o[10]=x,o[11]=E,o[12]=h*u+T*f+w*c+s[12],o[13]=v*u+g*f+k*c+s[13],o[14]=p*u+A*f+x*c+s[14],o[15]=_*u+b*f+E*c+s[15]),o}},2142:function(n){n.exports=a;function a(o,s){if(o===s){var l=s[1],u=s[2],f=s[3],c=s[6],h=s[7],v=s[11];o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=l,o[6]=s[9],o[7]=s[13],o[8]=u,o[9]=c,o[11]=s[14],o[12]=f,o[13]=h,o[14]=v}else o[0]=s[0],o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=s[1],o[5]=s[5],o[6]=s[9],o[7]=s[13],o[8]=s[2],o[9]=s[6],o[10]=s[10],o[11]=s[14],o[12]=s[3],o[13]=s[7],o[14]=s[11],o[15]=s[15];return o}},4340:function(n,a,o){"use strict";var s=o(957),l=o(7309);n.exports=v;function u(p,_){for(var T=[0,0,0,0],g=0;g<4;++g)for(var A=0;A<4;++A)T[A]+=p[4*g+A]*_[g];return T}function f(p,_,T,g,A){for(var b=u(g,u(T,u(_,[p[0],p[1],p[2],1]))),w=0;w<3;++w)b[w]/=b[3];return[.5*A[0]*(1+b[0]),.5*A[1]*(1-b[1])]}function c(p,_){if(p.length===2){for(var T=0,g=0,A=0;A<2;++A)T+=Math.pow(_[A]-p[0][A],2),g+=Math.pow(_[A]-p[1][A],2);return T=Math.sqrt(T),g=Math.sqrt(g),T+g<1e-6?[1,0]:[g/(T+g),T/(g+T)]}else if(p.length===3){var b=[0,0];return l(p[0],p[1],p[2],_,b),s(p,b)}return[]}function h(p,_){for(var T=[0,0,0],g=0;g<p.length;++g)for(var A=p[g],b=_[g],w=0;w<3;++w)T[w]+=b*A[w];return T}function v(p,_,T,g,A,b){if(p.length===1)return[0,p[0].slice()];for(var w=new Array(p.length),k=0;k<p.length;++k)w[k]=f(p[k],T,g,A,b);for(var x=0,E=1/0,k=0;k<w.length;++k){for(var M=0,d=0;d<2;++d)M+=Math.pow(w[k][d]-_[d],2);M<E&&(E=M,x=k)}for(var C=c(w,_),S=0,k=0;k<3;++k){if(C[k]<-.001||C[k]>1.0001)return null;S+=C[k]}return Math.abs(S-1)>.001?null:[x,h(p,C),C]}},2056:function(n,a,o){var s=o(6832),l=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),v=s([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),p=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),_=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),T=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),A=s([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.wireShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.pointShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},a.pickShader={vertex:p,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},a.pointPickShader={vertex:T,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},a.contourShader={vertex:g,fragment:A,attributes:[{name:"position",type:"vec3"}]}},8116:function(n,a,o){"use strict";var s=1e-6,l=1e-6,u=o(5158),f=o(5827),c=o(2944),h=o(8931),v=o(115),p=o(104),_=o(7437),T=o(5050),g=o(9156),A=o(7212),b=o(5306),w=o(2056),k=o(4340),x=w.meshShader,E=w.wireShader,M=w.pointShader,d=w.pickShader,C=w.pointPickShader,S=w.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(K,X,ae,oe,_e,be,he,ie,ye,ue,Ae,Re,ze,et,Le,Ie,dt,ct,Ke,_t,zt,Et,Se,je,ht,nt,lt){this.gl=K,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ae,this.lineShader=oe,this.pointShader=_e,this.pickShader=be,this.pointPickShader=he,this.contourShader=ie,this.trianglePositions=ye,this.triangleColors=Ae,this.triangleNormals=ze,this.triangleUVs=Re,this.triangleIds=ue,this.triangleVAO=et,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Le,this.edgeColors=dt,this.edgeUVs=ct,this.edgeIds=Ie,this.edgeVAO=Ke,this.edgeCount=0,this.pointPositions=_t,this.pointColors=Et,this.pointUVs=Se,this.pointSizes=je,this.pointIds=zt,this.pointVAO=ht,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=nt,this.contourVAO=lt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var z=D.prototype;z.isOpaque=function(){return!this.hasAlpha},z.isTransparent=function(){return this.hasAlpha},z.pickSlots=1,z.setPickBase=function(K){this.pickId=K};function O(K,X){if(!X||!X.length)return 1;for(var ae=0;ae<X.length;++ae){if(X.length<2)return 1;if(X[ae][0]===K)return X[ae][1];if(X[ae][0]>K&&ae>0){var oe=(X[ae][0]-K)/(X[ae][0]-X[ae-1][0]);return X[ae][1]*(1-oe)+oe*X[ae-1][1]}}return 1}function V(K,X){for(var ae=g({colormap:K,nshades:256,format:"rgba"}),oe=new Uint8Array(256*4),_e=0;_e<256;++_e){for(var be=ae[_e],he=0;he<3;++he)oe[4*_e+he]=be[he];X?oe[4*_e+3]=255*O(_e/255,X):oe[4*_e+3]=255*be[3]}return T(oe,[256,256,4],[4,0,1])}function B(K){for(var X=K.length,ae=new Array(X),oe=0;oe<X;++oe)ae[oe]=K[oe][2];return ae}z.highlight=function(K){if(!K||!this.contourEnable){this.contourCount=0;return}for(var X=A(this.cells,this.intensity,K.intensity),ae=X.cells,oe=X.vertexIds,_e=X.vertexWeights,be=ae.length,he=b.mallocFloat32(2*3*be),ie=0,ye=0;ye<be;++ye)for(var ue=ae[ye],Ae=0;Ae<2;++Ae){var Re=ue[0];ue.length===2&&(Re=ue[Ae]);for(var ze=oe[Re][0],et=oe[Re][1],Le=_e[Re],Ie=1-Le,dt=this.positions[ze],ct=this.positions[et],Ke=0;Ke<3;++Ke)he[ie++]=Le*dt[Ke]+Ie*ct[Ke]}this.contourCount=ie/3|0,this.contourPositions.update(he.subarray(0,ie)),b.free(he)},z.update=function(K){K=K||{};var X=this.gl;this.dirty=!0,"contourEnable"in K&&(this.contourEnable=K.contourEnable),"contourColor"in K&&(this.contourColor=K.contourColor),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"lightPosition"in K&&(this.lightPosition=K.lightPosition),this.hasAlpha=!1,"opacity"in K&&(this.opacity=K.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in K&&(this.opacityscale=K.opacityscale,this.hasAlpha=!0),"ambient"in K&&(this.ambientLight=K.ambient),"diffuse"in K&&(this.diffuseLight=K.diffuse),"specular"in K&&(this.specularLight=K.specular),"roughness"in K&&(this.roughness=K.roughness),"fresnel"in K&&(this.fresnel=K.fresnel),K.texture?(this.texture.dispose(),this.texture=h(X,K.texture)):K.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(V(K.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=K.cells,oe=K.positions;if(!(!oe||!ae)){var _e=[],be=[],he=[],ie=[],ye=[],ue=[],Ae=[],Re=[],ze=[],et=[],Le=[],Ie=[],dt=[],ct=[];this.cells=ae,this.positions=oe;var Ke=K.vertexNormals,_t=K.cellNormals,zt=K.vertexNormalsEpsilon===void 0?s:K.vertexNormalsEpsilon,Et=K.faceNormalsEpsilon===void 0?l:K.faceNormalsEpsilon;K.useFacetNormals&&!_t&&(_t=v.faceNormals(ae,oe,Et)),!_t&&!Ke&&(Ke=v.vertexNormals(ae,oe,zt));var Se=K.vertexColors,je=K.cellColors,ht=K.meshColor||[1,1,1,1],nt=K.vertexUVs,lt=K.vertexIntensity,rt=K.cellUVs,Xe=K.cellIntensity,ft=1/0,gt=-1/0;if(!nt&&!rt)if(lt)if(K.vertexIntensityBounds)ft=+K.vertexIntensityBounds[0],gt=+K.vertexIntensityBounds[1];else for(var Qt=0;Qt<lt.length;++Qt){var Jt=lt[Qt];ft=Math.min(ft,Jt),gt=Math.max(gt,Jt)}else if(Xe)if(K.cellIntensityBounds)ft=+K.cellIntensityBounds[0],gt=+K.cellIntensityBounds[1];else for(var Qt=0;Qt<Xe.length;++Qt){var Jt=Xe[Qt];ft=Math.min(ft,Jt),gt=Math.max(gt,Jt)}else for(var Qt=0;Qt<oe.length;++Qt){var Jt=oe[Qt][2];ft=Math.min(ft,Jt),gt=Math.max(gt,Jt)}lt?this.intensity=lt:Xe?this.intensity=Xe:this.intensity=B(oe),this.pickVertex=!(Xe||je);var fr=K.pointSizes,nr=K.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Qt=0;Qt<oe.length;++Qt)for(var ur=oe[Qt],qt=0;qt<3;++qt)isNaN(ur[qt])||!isFinite(ur[qt])||(this.bounds[0][qt]=Math.min(this.bounds[0][qt],ur[qt]),this.bounds[1][qt]=Math.max(this.bounds[1][qt],ur[qt]));var xt=0,At=0,Je=0;e:for(var Qt=0;Qt<ae.length;++Qt){var xe=ae[Qt];switch(xe.length){case 1:for(var ce=xe[0],ur=oe[ce],qt=0;qt<3;++qt)if(isNaN(ur[qt])||!isFinite(ur[qt]))continue e;et.push(ur[0],ur[1],ur[2]);var ge;Se?ge=Se[ce]:je?ge=je[Qt]:ge=ht,this.opacityscale&&lt?be.push(ge[0],ge[1],ge[2],this.opacity*O((lt[ce]-ft)/(gt-ft),this.opacityscale)):ge.length===3?Le.push(ge[0],ge[1],ge[2],this.opacity):(Le.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0));var qe;nt?qe=nt[ce]:lt?qe=[(lt[ce]-ft)/(gt-ft),0]:rt?qe=rt[Qt]:Xe?qe=[(Xe[Qt]-ft)/(gt-ft),0]:qe=[(ur[2]-ft)/(gt-ft),0],Ie.push(qe[0],qe[1]),fr?dt.push(fr[ce]):dt.push(nr),ct.push(Qt),Je+=1;break;case 2:for(var qt=0;qt<2;++qt)for(var ce=xe[qt],ur=oe[ce],yt=0;yt<3;++yt)if(isNaN(ur[yt])||!isFinite(ur[yt]))continue e;for(var qt=0;qt<2;++qt){var ce=xe[qt],ur=oe[ce];ue.push(ur[0],ur[1],ur[2]);var ge;Se?ge=Se[ce]:je?ge=je[Qt]:ge=ht,this.opacityscale&&lt?be.push(ge[0],ge[1],ge[2],this.opacity*O((lt[ce]-ft)/(gt-ft),this.opacityscale)):ge.length===3?Ae.push(ge[0],ge[1],ge[2],this.opacity):(Ae.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0));var qe;nt?qe=nt[ce]:lt?qe=[(lt[ce]-ft)/(gt-ft),0]:rt?qe=rt[Qt]:Xe?qe=[(Xe[Qt]-ft)/(gt-ft),0]:qe=[(ur[2]-ft)/(gt-ft),0],Re.push(qe[0],qe[1]),ze.push(Qt)}At+=1;break;case 3:for(var qt=0;qt<3;++qt)for(var ce=xe[qt],ur=oe[ce],yt=0;yt<3;++yt)if(isNaN(ur[yt])||!isFinite(ur[yt]))continue e;for(var qt=0;qt<3;++qt){var ce=xe[2-qt],ur=oe[ce];_e.push(ur[0],ur[1],ur[2]);var ge;Se?ge=Se[ce]:je?ge=je[Qt]:ge=ht,ge?this.opacityscale&&lt?be.push(ge[0],ge[1],ge[2],this.opacity*O((lt[ce]-ft)/(gt-ft),this.opacityscale)):ge.length===3?be.push(ge[0],ge[1],ge[2],this.opacity):(be.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0)):be.push(.5,.5,.5,1);var qe;nt?qe=nt[ce]:lt?qe=[(lt[ce]-ft)/(gt-ft),0]:rt?qe=rt[Qt]:Xe?qe=[(Xe[Qt]-ft)/(gt-ft),0]:qe=[(ur[2]-ft)/(gt-ft),0],ie.push(qe[0],qe[1]);var Vt;Ke?Vt=Ke[ce]:Vt=_t[Qt],he.push(Vt[0],Vt[1],Vt[2]),ye.push(Qt)}xt+=1;break;default:break}}this.pointCount=Je,this.edgeCount=At,this.triangleCount=xt,this.pointPositions.update(et),this.pointColors.update(Le),this.pointUVs.update(Ie),this.pointSizes.update(dt),this.pointIds.update(new Uint32Array(ct)),this.edgePositions.update(ue),this.edgeColors.update(Ae),this.edgeUVs.update(Re),this.edgeIds.update(new Uint32Array(ze)),this.trianglePositions.update(_e),this.triangleColors.update(be),this.triangleUVs.update(ie),this.triangleNormals.update(he),this.triangleIds.update(new Uint32Array(ye))}},z.drawTransparent=z.draw=function(K){K=K||{};for(var X=this.gl,ae=K.model||P,oe=K.view||P,_e=K.projection||P,be=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)be[0][he]=Math.max(be[0][he],this.clipBounds[0][he]),be[1][he]=Math.min(be[1][he],this.clipBounds[1][he]);var ie={model:ae,view:oe,projection:_e,inverseModel:P.slice(),clipBounds:be,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ie.inverseModel=_(ie.inverseModel,ie.model),X.disable(X.CULL_FACE),this.texture.bind(0);var ye=new Array(16);p(ye,ie.view,ie.model),p(ye,ie.projection,ye),_(ye,ye);for(var he=0;he<3;++he)ie.eyePosition[he]=ye[12+he]/ye[15];for(var ue=ye[15],he=0;he<3;++he)ue+=this.lightPosition[he]*ye[4*he+3];for(var he=0;he<3;++he){for(var Ae=ye[12+he],Re=0;Re<3;++Re)Ae+=ye[4*Re+he]*this.lightPosition[Re];ie.lightPosition[he]=Ae/ue}if(this.triangleCount>0){var ze=this.triShader;ze.bind(),ze.uniforms=ie,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ze=this.lineShader;ze.bind(),ze.uniforms=ie,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ze=this.pointShader;ze.bind(),ze.uniforms=ie,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ze=this.contourShader;ze.bind(),ze.uniforms=ie,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},z.drawPick=function(K){K=K||{};for(var X=this.gl,ae=K.model||P,oe=K.view||P,_e=K.projection||P,be=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)be[0][he]=Math.max(be[0][he],this.clipBounds[0][he]),be[1][he]=Math.min(be[1][he],this.clipBounds[1][he]);this._model=[].slice.call(ae),this._view=[].slice.call(oe),this._projection=[].slice.call(_e),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var ie={model:ae,view:oe,projection:_e,clipBounds:be,pickId:this.pickId/255},ye=this.pickShader;if(ye.bind(),ye.uniforms=ie,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ye=this.pointPickShader;ye.bind(),ye.uniforms=ie,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},z.pick=function(K){if(!K||K.id!==this.pickId)return null;for(var X=K.value[0]+256*K.value[1]+65536*K.value[2],ae=this.cells[X],oe=this.positions,_e=new Array(ae.length),be=0;be<ae.length;++be)_e[be]=oe[ae[be]];var he=K.coord[0],ie=K.coord[1];if(!this.pickVertex){var ye=this.positions[ae[0]],ue=this.positions[ae[1]],Ae=this.positions[ae[2]],Re=[(ye[0]+ue[0]+Ae[0])/3,(ye[1]+ue[1]+Ae[1])/3,(ye[2]+ue[2]+Ae[2])/3];return{_cellCenter:!0,position:[he,ie],index:X,cell:ae,cellId:X,intensity:this.intensity[X],dataCoordinate:Re}}var ze=k(_e,[he*this.pixelRatio,this._resolution[1]-ie*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ze)return null;for(var et=ze[2],Le=0,be=0;be<ae.length;++be)Le+=et[be]*this.intensity[ae[be]];return{position:ze[1],index:ae[ze[0]],cell:ae,cellId:X,intensity:Le,dataCoordinate:this.positions[ae[ze[0]]]}},z.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function F(K){var X=u(K,x.vertex,x.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function N(K){var X=u(K,E.vertex,E.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function Z(K){var X=u(K,M.vertex,M.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function J(K){var X=u(K,d.vertex,d.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function re(K){var X=u(K,C.vertex,C.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function le(K){var X=u(K,S.vertex,S.fragment);return X.attributes.position.location=0,X}function fe(K,X){arguments.length===1&&(X=K,K=X.gl);var ae=K.getExtension("OES_standard_derivatives")||K.getExtension("MOZ_OES_standard_derivatives")||K.getExtension("WEBKIT_OES_standard_derivatives");if(!ae)throw new Error("derivatives not supported");var oe=F(K),_e=N(K),be=Z(K),he=J(K),ie=re(K),ye=le(K),ue=h(K,T(new Uint8Array([255,255,255,255]),[1,1,4]));ue.generateMipmap(),ue.minFilter=K.LINEAR_MIPMAP_LINEAR,ue.magFilter=K.LINEAR;var Ae=f(K),Re=f(K),ze=f(K),et=f(K),Le=f(K),Ie=c(K,[{buffer:Ae,type:K.FLOAT,size:3},{buffer:Le,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Re,type:K.FLOAT,size:4},{buffer:ze,type:K.FLOAT,size:2},{buffer:et,type:K.FLOAT,size:3}]),dt=f(K),ct=f(K),Ke=f(K),_t=f(K),zt=c(K,[{buffer:dt,type:K.FLOAT,size:3},{buffer:_t,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ct,type:K.FLOAT,size:4},{buffer:Ke,type:K.FLOAT,size:2}]),Et=f(K),Se=f(K),je=f(K),ht=f(K),nt=f(K),lt=c(K,[{buffer:Et,type:K.FLOAT,size:3},{buffer:nt,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Se,type:K.FLOAT,size:4},{buffer:je,type:K.FLOAT,size:2},{buffer:ht,type:K.FLOAT,size:1}]),rt=f(K),Xe=c(K,[{buffer:rt,type:K.FLOAT,size:3}]),ft=new D(K,ue,oe,_e,be,he,ie,ye,Ae,Le,Re,ze,et,Ie,dt,_t,ct,Ke,zt,Et,nt,Se,je,ht,lt,rt,Xe);return ft.update(X),ft}n.exports=fe},4554:function(n,a,o){"use strict";n.exports=h;var s=o(5827),l=o(5158),u=o(2709);function f(v,p,_){this.plot=v,this.vbo=p,this.shader=_}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawBox=function(){var v=[0,0],p=[0,0];return function(_,T,g,A,b){var w=this.plot,k=this.shader,x=w.gl;v[0]=_,v[1]=T,p[0]=g,p[1]=A,k.uniforms.lo=v,k.uniforms.hi=p,k.uniforms.color=b,x.drawArrays(x.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var p=v.gl,_=s(p,[0,0,0,1,1,0,1,1]),T=l(p,u.boxVert,u.lineFrag);return new f(v,_,T)}},3016:function(n,a,o){"use strict";n.exports=p;var s=o(5827),l=o(5158),u=o(5070),f=o(2709);function c(_,T,g,A){this.plot=_,this.vbo=T,this.shader=g,this.tickShader=A,this.ticks=[[],[]]}function h(_,T){return _-T}var v=c.prototype;v.draw=function(){var _=[0,0],T=[0,0],g=[0,0];return function(){for(var A=this.plot,b=this.vbo,w=this.shader,k=this.ticks,x=A.gl,E=A._tickBounds,M=A.dataBox,d=A.viewBox,C=A.gridLineWidth,S=A.gridLineColor,P=A.gridLineEnable,D=A.pixelRatio,z=0;z<2;++z){var O=E[z],V=E[z+2],B=V-O,F=.5*(M[z+2]+M[z]),N=M[z+2]-M[z];T[z]=2*B/N,_[z]=2*(O-F)/N}w.bind(),b.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=_,w.uniforms.dataScale=T;for(var Z=0,z=0;z<2;++z){g[0]=g[1]=0,g[z]=1,w.uniforms.dataAxis=g,w.uniforms.lineWidth=C[z]/(d[z+2]-d[z])*D,w.uniforms.color=S[z];var J=k[z].length*6;P[z]&&J&&x.drawArrays(x.TRIANGLES,Z,J),Z+=J}}}(),v.drawTickMarks=function(){var _=[0,0],T=[0,0],g=[1,0],A=[0,1],b=[0,0],w=[0,0];return function(){for(var k=this.plot,x=this.vbo,E=this.tickShader,M=this.ticks,d=k.gl,C=k._tickBounds,S=k.dataBox,P=k.viewBox,D=k.pixelRatio,z=k.screenBox,O=z[2]-z[0],V=z[3]-z[1],B=P[2]-P[0],F=P[3]-P[1],N=0;N<2;++N){var Z=C[N],J=C[N+2],re=J-Z,le=.5*(S[N+2]+S[N]),fe=S[N+2]-S[N];T[N]=2*re/fe,_[N]=2*(Z-le)/fe}T[0]*=B/O,_[0]*=B/O,T[1]*=F/V,_[1]*=F/V,E.bind(),x.bind(),E.attributes.dataCoord.pointer();var K=E.uniforms;K.dataShift=_,K.dataScale=T;var X=k.tickMarkLength,ae=k.tickMarkWidth,oe=k.tickMarkColor,_e=0,be=M[0].length*6,he=Math.min(u.ge(M[0],(S[0]-C[0])/(C[2]-C[0]),h),M[0].length),ie=Math.min(u.gt(M[0],(S[2]-C[0])/(C[2]-C[0]),h),M[0].length),ye=_e+6*he,ue=6*Math.max(0,ie-he),Ae=Math.min(u.ge(M[1],(S[1]-C[1])/(C[3]-C[1]),h),M[1].length),Re=Math.min(u.gt(M[1],(S[3]-C[1])/(C[3]-C[1]),h),M[1].length),ze=be+6*Ae,et=6*Math.max(0,Re-Ae);b[0]=2*(P[0]-X[1])/O-1,b[1]=(P[3]+P[1])/V-1,w[0]=X[1]*D/O,w[1]=ae[1]*D/V,et&&(K.color=oe[1],K.tickScale=w,K.dataAxis=A,K.screenOffset=b,d.drawArrays(d.TRIANGLES,ze,et)),b[0]=(P[2]+P[0])/O-1,b[1]=2*(P[1]-X[0])/V-1,w[0]=ae[0]*D/O,w[1]=X[0]*D/V,ue&&(K.color=oe[0],K.tickScale=w,K.dataAxis=g,K.screenOffset=b,d.drawArrays(d.TRIANGLES,ye,ue)),b[0]=2*(P[2]+X[3])/O-1,b[1]=(P[3]+P[1])/V-1,w[0]=X[3]*D/O,w[1]=ae[3]*D/V,et&&(K.color=oe[3],K.tickScale=w,K.dataAxis=A,K.screenOffset=b,d.drawArrays(d.TRIANGLES,ze,et)),b[0]=(P[2]+P[0])/O-1,b[1]=2*(P[3]+X[2])/V-1,w[0]=ae[2]*D/O,w[1]=X[2]*D/V,ue&&(K.color=oe[2],K.tickScale=w,K.dataAxis=g,K.screenOffset=b,d.drawArrays(d.TRIANGLES,ye,ue))}}(),v.update=function(){var _=[1,1,-1,-1,1,-1],T=[1,-1,1,1,-1,-1];return function(g){for(var A=g.ticks,b=g.bounds,w=new Float32Array(6*3*(A[0].length+A[1].length)),k=this.plot.zeroLineEnable,x=0,E=[[],[]],M=0;M<2;++M)for(var d=E[M],C=A[M],S=b[M],P=b[M+2],D=0;D<C.length;++D){var z=(C[D].x-S)/(P-S);d.push(z);for(var O=0;O<6;++O)w[x++]=z,w[x++]=_[O],w[x++]=T[O]}this.ticks=E,this.vbo.update(w)}}(),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function p(_){var T=_.gl,g=s(T),A=l(T,f.gridVert,f.gridFrag),b=l(T,f.tickVert,f.gridFrag),w=new c(_,g,A,b);return w}},1154:function(n,a,o){"use strict";n.exports=h;var s=o(5827),l=o(5158),u=o(2709);function f(v,p,_){this.plot=v,this.vbo=p,this.shader=_}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawLine=function(){var v=[0,0],p=[0,0];return function(_,T,g,A,b,w){var k=this.plot,x=this.shader,E=k.gl;v[0]=_,v[1]=T,p[0]=g,p[1]=A,x.uniforms.start=v,x.uniforms.end=p,x.uniforms.width=b*k.pixelRatio,x.uniforms.color=w,E.drawArrays(E.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var p=v.gl,_=s(p,[-1,-1,-1,1,1,-1,1,1]),T=l(p,u.lineVert,u.lineFrag),g=new f(v,_,T);return g}},2709:function(n,a,o){"use strict";var s=o(6832),l=s([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);n.exports={lineVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:l,textVert:s([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:l,gridVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:l,boxVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(n,a,o){"use strict";n.exports=p;var s=o(5827),l=o(5158),u=o(6946),f=o(5070),c=o(2709);function h(_,T,g){this.plot=_,this.vbo=T,this.shader=g,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var v=h.prototype;v.drawTicks=function(){var _=[0,0],T=[0,0],g=[0,0];return function(A){var b=this.plot,w=this.shader,k=this.tickX[A],x=this.tickOffset[A],E=b.gl,M=b.viewBox,d=b.dataBox,C=b.screenBox,S=b.pixelRatio,P=b.tickEnable,D=b.tickPad,z=b.tickColor,O=b.tickAngle,V=b.labelEnable,B=b.labelPad,F=b.labelColor,N=b.labelAngle,Z=this.labelOffset[A],J=this.labelCount[A],re=f.lt(k,d[A]),le=f.le(k,d[A+2]);_[0]=_[1]=0,_[A]=1,T[A]=(M[2+A]+M[A])/(C[2+A]-C[A])-1;var fe=2/C[2+(A^1)]-C[A^1];T[A^1]=fe*M[A^1]-1,P[A]&&(T[A^1]-=fe*S*D[A],re<le&&x[le]>x[re]&&(w.uniforms.dataAxis=_,w.uniforms.screenOffset=T,w.uniforms.color=z[A],w.uniforms.angle=O[A],E.drawArrays(E.TRIANGLES,x[re],x[le]-x[re]))),V[A]&&J&&(T[A^1]-=fe*S*B[A],w.uniforms.dataAxis=g,w.uniforms.screenOffset=T,w.uniforms.color=F[A],w.uniforms.angle=N[A],E.drawArrays(E.TRIANGLES,Z,J)),T[A^1]=fe*M[2+(A^1)]-1,P[A+2]&&(T[A^1]+=fe*S*D[A+2],re<le&&x[le]>x[re]&&(w.uniforms.dataAxis=_,w.uniforms.screenOffset=T,w.uniforms.color=z[A+2],w.uniforms.angle=O[A+2],E.drawArrays(E.TRIANGLES,x[re],x[le]-x[re]))),V[A+2]&&J&&(T[A^1]+=fe*S*B[A+2],w.uniforms.dataAxis=g,w.uniforms.screenOffset=T,w.uniforms.color=F[A+2],w.uniforms.angle=N[A+2],E.drawArrays(E.TRIANGLES,Z,J))}}(),v.drawTitle=function(){var _=[0,0],T=[0,0];return function(){var g=this.plot,A=this.shader,b=g.gl,w=g.screenBox,k=g.titleCenter,x=g.titleAngle,E=g.titleColor,M=g.pixelRatio;if(this.titleCount){for(var d=0;d<2;++d)T[d]=2*(k[d]*M-w[d])/(w[2+d]-w[d])-1;A.bind(),A.uniforms.dataAxis=_,A.uniforms.screenOffset=T,A.uniforms.angle=x,A.uniforms.color=E,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=function(){var _=[0,0],T=[0,0],g=[0,0];return function(){var A=this.plot,b=this.shader,w=A._tickBounds,k=A.dataBox,x=A.screenBox,E=A.viewBox;b.bind();for(var M=0;M<2;++M){var d=w[M],C=w[M+2],S=C-d,P=.5*(k[M+2]+k[M]),D=k[M+2]-k[M],z=E[M],O=E[M+2],V=O-z,B=x[M],F=x[M+2],N=F-B;T[M]=2*S/D*V/N,_[M]=2*(d-P)/D*V/N}g[1]=2*A.pixelRatio/(x[3]-x[1]),g[0]=g[1]*(x[3]-x[1])/(x[2]-x[0]),b.uniforms.dataScale=T,b.uniforms.dataShift=_,b.uniforms.textScale=g,this.vbo.bind(),b.attributes.textCoordinate.pointer()}}(),v.update=function(_){var T=[],g=_.ticks,A=_.bounds,b,w,k,x,E,M;for(M=0;M<2;++M){var d=[Math.floor(T.length/3)],C=[-1/0],S=g[M];for(b=0;b<S.length;++b){var P=S[b],D=P.x,z=P.text,O=P.font||"sans-serif";E=P.fontSize||12;for(var V=1/(A[M+2]-A[M]),B=A[M],F=z.split(`
`),N=0;N<F.length;N++)for(x=u(O,F[N]).data,w=0;w<x.length;w+=2)T.push(x[w]*E,-x[w+1]*E-N*E*1.2,(D-B)*V);d.push(Math.floor(T.length/3)),C.push(D)}this.tickOffset[M]=d,this.tickX[M]=C}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(T.length/3),x=u(_.labelFont[M],_.labels[M],{textAlign:"center"}).data,E=_.labelSize[M],b=0;b<x.length;b+=2)T.push(x[b]*E,-x[b+1]*E,0);this.labelCount[M]=Math.floor(T.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(T.length/3),x=u(_.titleFont,_.title).data,E=_.titleSize,b=0;b<x.length;b+=2)T.push(x[b]*E,-x[b+1]*E,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function p(_){var T=_.gl,g=s(T),A=l(T,c.textVert,c.textFrag),b=new h(_,g,A);return b}},2117:function(n,a,o){"use strict";n.exports=g;var s=o(2611),l=o(3016),u=o(5613),f=o(1154),c=o(4554);function h(A,b){this.gl=A,this.pickBuffer=b,this.screenBox=[0,0,A.drawingBufferWidth,A.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var v=h.prototype;v.setDirty=function(){this.dirty=this.pickDirty=!0},v.setOverlayDirty=function(){this.dirty=!0},v.nextDepthValue=function(){return this._depthCounter++/65536};function p(A,b,w){var k=.5*(w+1);return Math.floor((1-k)*A+k*b)|0}v.draw=function(){var A=[0,0,0,0];return function(){var b=this.gl,w=this.screenBox,k=this.viewBox,x=this.dataBox,E=this.pixelRatio,M=this.grid,d=this.line,C=this.text,S=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),b.disable(b.DEPTH_TEST),b.depthFunc(b.LESS),b.depthMask(!1),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD,b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),this.borderColor){b.scissor(w[0],w[1],w[2]-w[0],w[3]-w[1]);var P=this.borderColor;b.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(k[0],k[1],k[2]-k[0],k[3]-k[1]),b.viewport(k[0],k[1],k[2]-k[0],k[3]-k[1]);var D=this.backgroundColor;b.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]),b.clear(b.COLOR_BUFFER_BIT),M.draw();var z=this.zeroLineEnable,O=this.zeroLineColor,V=this.zeroLineWidth;if(z[0]||z[1]){d.bind();for(var B=0;B<2;++B)if(!(!z[B]||!(x[B]<=0&&x[B+2]>=0))){var F=w[B]-x[B]*(w[B+2]-w[B])/(x[B+2]-x[B]);B===0?d.drawLine(F,w[1],F,w[3],V[B],O[B]):d.drawLine(w[0],F,w[2],F,V[B],O[B])}}for(var B=0;B<S.length;++B)S[B].draw();b.viewport(w[0],w[1],w[2]-w[0],w[3]-w[1]),b.scissor(w[0],w[1],w[2]-w[0],w[3]-w[1]),this.grid.drawTickMarks(),d.bind();var N=this.borderLineEnable,Z=this.borderLineWidth,J=this.borderLineColor;N[1]&&d.drawLine(k[0],k[1]-.5*Z[1]*E,k[0],k[3]+.5*Z[3]*E,Z[1],J[1]),N[0]&&d.drawLine(k[0]-.5*Z[0]*E,k[1],k[2]+.5*Z[2]*E,k[1],Z[0],J[0]),N[3]&&d.drawLine(k[2],k[1]-.5*Z[1]*E,k[2],k[3]+.5*Z[3]*E,Z[3],J[3]),N[2]&&d.drawLine(k[0]-.5*Z[0]*E,k[3],k[2]+.5*Z[2]*E,k[3],Z[2],J[2]),C.bind();for(var B=0;B<2;++B)C.drawTicks(B);this.titleEnable&&C.drawTitle();for(var re=this.overlays,B=0;B<re.length;++B)re[B].draw();b.disable(b.SCISSOR_TEST),b.disable(b.BLEND),b.depthMask(!0)}}}(),v.drawPick=function(){return function(){if(!this.static){var A=this.pickBuffer,b=this.gl;this._pickTimeout=null,A.begin();for(var w=1,k=this.objects,x=0;x<k.length;++x)w=k[x].drawPick(w);A.end()}}}(),v.pick=function(){return function(A,b){if(!this.static){var w=this.pixelRatio,k=this.pickPixelRatio,x=this.viewBox,E=Math.round((A-x[0]/w)*k)|0,M=Math.round((b-x[1]/w)*k)|0,d=this.pickBuffer.query(E,M,this.pickRadius);if(!d)return null;for(var C=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24),S=this.objects,P=0;P<S.length;++P){var D=S[P].pick(E,M,C);if(D)return D}return null}}}();function _(A){for(var b=A.slice(),w=0;w<b.length;++w)b[w]=b[w].slice();return b}function T(A,b){return A.x-b.x}v.setScreenBox=function(A){var b=this.screenBox,w=this.pixelRatio;b[0]=Math.round(A[0]*w)|0,b[1]=Math.round(A[1]*w)|0,b[2]=Math.round(A[2]*w)|0,b[3]=Math.round(A[3]*w)|0,this.setDirty()},v.setDataBox=function(A){var b=this.dataBox,w=b[0]!==A[0]||b[1]!==A[1]||b[2]!==A[2]||b[3]!==A[3];w&&(b[0]=A[0],b[1]=A[1],b[2]=A[2],b[3]=A[3],this.setDirty())},v.setViewBox=function(A){var b=this.pixelRatio,w=this.viewBox;w[0]=Math.round(A[0]*b)|0,w[1]=Math.round(A[1]*b)|0,w[2]=Math.round(A[2]*b)|0,w[3]=Math.round(A[3]*b)|0;var k=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((A[2]-A[0])*k)|0,Math.round((A[3]-A[1])*k)|0],this.setDirty()},v.update=function(A){A=A||{};var b=this.gl;this.pixelRatio=A.pixelRatio||1;var w=this.pixelRatio;this.pickPixelRatio=Math.max(w,1),this.setScreenBox(A.screenBox||[0,0,b.drawingBufferWidth/w,b.drawingBufferHeight/w]);var k=this.screenBox;this.setViewBox(A.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/w,.125*(this.screenBox[3]-this.screenBox[1])/w,.875*(this.screenBox[2]-this.screenBox[0])/w,.875*(this.screenBox[3]-this.screenBox[1])/w]);var x=this.viewBox,E=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(A.dataBox||[-10,-10/E,10,10/E]),this.borderColor=A.borderColor!==!1?(A.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(A.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(A.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(A.gridLineWidth||[1,1]).slice(),this.gridLineColor=_(A.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(A.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(A.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=_(A.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(A.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(A.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=_(A.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(A.titleCenter||[.5*(x[0]+x[2])/w,(x[3]+120)/w]).slice(),this.titleEnable=!("titleEnable"in A)||!!A.titleEnable,this.titleAngle=A.titleAngle||0,this.titleColor=(A.titleColor||[0,0,0,1]).slice(),this.labelPad=(A.labelPad||[15,15,15,15]).slice(),this.labelAngle=(A.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(A.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=_(A.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(A.tickPad||[15,15,15,15]).slice(),this.tickAngle=(A.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(A.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=_(A.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(A.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(A.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=_(A.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var M=A.ticks||[[],[]],d=this._tickBounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(var C=0;C<2;++C){var S=M[C].slice(0);S.length!==0&&(S.sort(T),d[C]=Math.min(d[C],S[0].x),d[C+2]=Math.max(d[C+2],S[S.length-1].x))}this.grid.update({bounds:d,ticks:M}),this.text.update({bounds:d,ticks:M,labels:A.labels||["x","y"],labelSize:A.labelSize||[12,12],labelFont:A.labelFont||["sans-serif","sans-serif"],title:A.title||"",titleSize:A.titleSize||18,titleFont:A.titleFont||"sans-serif"}),this.static=!!A.static,this.setDirty()},v.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var A=this.objects.length-1;A>=0;--A)this.objects[A].dispose();this.objects.length=0;for(var A=this.overlays.length-1;A>=0;--A)this.overlays[A].dispose();this.overlays.length=0,this.gl=null},v.addObject=function(A){this.objects.indexOf(A)<0&&(this.objects.push(A),this.setDirty())},v.removeObject=function(A){for(var b=this.objects,w=0;w<b.length;++w)if(b[w]===A){b.splice(w,1),this.setDirty();break}},v.addOverlay=function(A){this.overlays.indexOf(A)<0&&(this.overlays.push(A),this.setOverlayDirty())},v.removeOverlay=function(A){for(var b=this.overlays,w=0;w<b.length;++w)if(b[w]===A){b.splice(w,1),this.setOverlayDirty();break}};function g(A){var b=A.gl,w=s(b,[b.drawingBufferWidth,b.drawingBufferHeight]),k=new h(b,w);return k.grid=l(k),k.text=u(k),k.line=f(k),k.box=c(k),k.update(A),k}},4296:function(n,a,o){"use strict";n.exports=v;var s=o(8161),l=o(1152),u=o(6145),f=o(6475),c=o(2565),h=o(5233);function v(p,_){p=p||document.body,_=_||{};var T=[.01,1/0];"distanceLimits"in _&&(T[0]=_.distanceLimits[0],T[1]=_.distanceLimits[1]),"zoomMin"in _&&(T[0]=_.zoomMin),"zoomMax"in _&&(T[1]=_.zoomMax);var g=l({center:_.center||[0,0,0],up:_.up||[0,1,0],eye:_.eye||[0,0,10],mode:_.mode||"orbit",distanceLimits:T}),A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,w=p.clientWidth,k=p.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:g,element:p,delay:_.delay||16,rotateSpeed:_.rotateSpeed||1,zoomSpeed:_.zoomSpeed||1,translateSpeed:_.translateSpeed||1,flipX:!!_.flipX,flipY:!!_.flipY,modes:g.modes,_ortho:_._ortho||_.projection&&_.projection.type==="orthographic"||!1,tick:function(){var E=s(),M=this.delay,d=E-2*M;g.idle(E-M),g.recalcMatrix(d),g.flush(E-(100+M*2));for(var C=!0,S=g.computedMatrix,P=0;P<16;++P)C=C&&A[P]===S[P],A[P]=S[P];var D=p.clientWidth===w&&p.clientHeight===k;return w=p.clientWidth,k=p.clientHeight,C?!D:(b=Math.exp(g.computedRadius[0]),!0)},lookAt:function(E,M,d){g.lookAt(g.lastT(),E,M,d)},rotate:function(E,M,d){g.rotate(g.lastT(),E,M,d)},pan:function(E,M,d){g.pan(g.lastT(),E,M,d)},translate:function(E,M,d){g.translate(g.lastT(),E,M,d)}};return Object.defineProperties(x,{matrix:{get:function(){return g.computedMatrix},set:function(E){return g.setMatrix(g.lastT(),E),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(E){var M=g.computedUp.slice(),d=g.computedEye.slice(),C=g.computedCenter.slice();if(g.setMode(E),E==="turntable"){var S=s();g._active.lookAt(S,d,C,M),g._active.lookAt(S+500,d,C,[0,0,1]),g._active.flush(S)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(E){return g.lookAt(g.lastT(),null,E),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(E){return g.lookAt(g.lastT(),E),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(E){return g.lookAt(g.lastT(),null,null,E),g.computedUp},enumerable:!0},distance:{get:function(){return b},set:function(E){return g.setDistance(g.lastT(),E),E},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(T)},set:function(E){return g.setDistanceLimits(E),E},enumerable:!0}}),p.addEventListener("contextmenu",function(E){return E.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){x.mouseListener=u(p,E),p.addEventListener("touchstart",function(M){var d=c(M.changedTouches[0],p);E(0,d[0],d[1],x._lastMods),E(1,d[0],d[1],x._lastMods)},h?{passive:!0}:!1),p.addEventListener("touchmove",function(M){var d=c(M.changedTouches[0],p);E(1,d[0],d[1],x._lastMods),M.preventDefault()},h?{passive:!1}:!1),p.addEventListener("touchend",function(M){E(0,x._lastX,x._lastY,x._lastMods)},h?{passive:!0}:!1);function E(M,d,C,S){var P=x.keyBindingMode;if(P!==!1){var D=P==="rotate",z=P==="pan",O=P==="zoom",V=!!S.control,B=!!S.alt,F=!!S.shift,N=!!(M&1),Z=!!(M&2),J=!!(M&4),re=1/p.clientHeight,le=re*(d-x._lastX),fe=re*(C-x._lastY),K=x.flipX?1:-1,X=x.flipY?1:-1,ae=Math.PI*x.rotateSpeed,oe=s();if(x._lastX!==-1&&x._lastY!==-1&&((D&&N&&!V&&!B&&!F||N&&!V&&!B&&F)&&g.rotate(oe,K*ae*le,-X*ae*fe,0),(z&&N&&!V&&!B&&!F||Z||N&&V&&!B&&!F)&&g.pan(oe,-x.translateSpeed*le*b,x.translateSpeed*fe*b,0),O&&N&&!V&&!B&&!F||J||N&&!V&&B&&!F)){var _e=-x.zoomSpeed*fe/window.innerHeight*(oe-g.lastT())*100;g.pan(oe,0,0,b*(Math.exp(_e)-1))}return x._lastX=d,x._lastY=C,x._lastMods=S,!0}}x.wheelListener=f(p,function(M,d){if(x.keyBindingMode!==!1&&x.enableWheel){var C=x.flipX?1:-1,S=x.flipY?1:-1,P=s();if(Math.abs(M)>Math.abs(d))g.rotate(P,0,0,-M*C*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var D=-x.zoomSpeed*S*d/window.innerHeight*(P-g.lastT())/20;g.pan(P,0,0,b*(Math.exp(D)-1))}}},!0)},x.enableMouseListeners(),x}},8245:function(n,a,o){var s=o(6832),l=o(5158),u=s([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),f=s([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec2"}])}},1059:function(n,a,o){"use strict";var s=o(4296),l=o(7453),u=o(2771),f=o(6496),c=o(2611),h=o(4234),v=o(8126),p=o(6145),_=o(1120),T=o(5268),g=o(8245),A=o(2321)({tablet:!0,featureDetect:!0});n.exports={createScene:E,createCamera:s};function b(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function w(d,C){var S=null;try{S=d.getContext("webgl",C),S||(S=d.getContext("experimental-webgl",C))}catch(P){return null}return S}function k(d){var C=Math.round(Math.log(Math.abs(d))/Math.log(10));if(C<0){var S=Math.round(Math.pow(10,-C));return Math.ceil(d*S)/S}else if(C>0){var S=Math.round(Math.pow(10,C));return Math.ceil(d/S)*S}return Math.ceil(d)}function x(d){return typeof d=="boolean"?d:!0}function E(d){d=d||{},d.camera=d.camera||{};var C=d.canvas;if(!C)if(C=document.createElement("canvas"),d.container){var S=d.container;S.appendChild(C)}else document.body.appendChild(C);var P=d.gl;if(P||(d.glOptions&&(A=!!d.glOptions.preserveDrawingBuffer),P=w(C,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:A})),!P)throw new Error("webgl not supported");var D=d.bounds||[[-10,-10,-10],[10,10,10]],z=new b,O=h(P,P.drawingBufferWidth,P.drawingBufferHeight,{preferFloat:!A}),V=g(P),B=d.cameraObject&&d.cameraObject._ortho===!0||d.camera.projection&&d.camera.projection.type==="orthographic"||!1,F={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:B},N=d.axes||{},Z=l(P,N);Z.enable=!N.disable;var J=d.spikes||{},re=f(P,J),le=[],fe=[],K=[],X=[],ae=!0,he=!0,oe=new Array(16),_e=new Array(16),be={view:null,projection:oe,model:_e,_ortho:!1},he=!0,ie=[P.drawingBufferWidth,P.drawingBufferHeight],ye=d.cameraObject||s(C,F),ue={gl:P,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:C,selection:z,camera:ye,axes:Z,axesPixels:null,spikes:re,bounds:D,objects:le,shape:ie,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:x(d.autoResize),autoBounds:x(d.autoBounds),autoScale:!!d.autoScale,autoCenter:x(d.autoCenter),clipToBounds:x(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:be,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(_t){this.aspect[0]=_t.x,this.aspect[1]=_t.y,this.aspect[2]=_t.z,he=!0},setBounds:function(_t,zt){this.bounds[0][_t]=zt.min,this.bounds[1][_t]=zt.max},setClearColor:function(_t){this.clearColor=_t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Ae=[P.drawingBufferWidth/ue.pixelRatio|0,P.drawingBufferHeight/ue.pixelRatio|0];function Re(){if(!ue._stopped&&ue.autoResize){var _t=C.parentNode,zt=1,Et=1;_t&&_t!==document.body?(zt=_t.clientWidth,Et=_t.clientHeight):(zt=window.innerWidth,Et=window.innerHeight);var Se=Math.ceil(zt*ue.pixelRatio)|0,je=Math.ceil(Et*ue.pixelRatio)|0;if(Se!==C.width||je!==C.height){C.width=Se,C.height=je;var ht=C.style;ht.position=ht.position||"absolute",ht.left="0px",ht.top="0px",ht.width=zt+"px",ht.height=Et+"px",ae=!0}}}ue.autoResize&&Re(),window.addEventListener("resize",Re);function ze(){for(var _t=le.length,zt=X.length,Et=0;Et<zt;++Et)K[Et]=0;e:for(var Et=0;Et<_t;++Et){var Se=le[Et],je=Se.pickSlots;if(!je){fe[Et]=-1;continue}for(var ht=0;ht<zt;++ht)if(K[ht]+je<255){fe[Et]=ht,Se.setPickBase(K[ht]+1),K[ht]+=je;continue e}var nt=c(P,ie);fe[Et]=zt,X.push(nt),K.push(je),Se.setPickBase(1),zt+=1}for(;zt>0&&K[zt-1]===0;)K.pop(),X.pop().dispose()}ue.update=function(_t){ue._stopped||(_t=_t||{},ae=!0,he=!0)},ue.add=function(_t){ue._stopped||(_t.axes=Z,le.push(_t),fe.push(-1),ae=!0,he=!0,ze())},ue.remove=function(_t){if(!ue._stopped){var zt=le.indexOf(_t);zt<0||(le.splice(zt,1),fe.pop(),ae=!0,he=!0,ze())}},ue.dispose=function(){if(!ue._stopped&&(ue._stopped=!0,window.removeEventListener("resize",Re),C.removeEventListener("webglcontextlost",et),ue.mouseListener.enabled=!1,!ue.contextLost)){Z.dispose(),re.dispose();for(var _t=0;_t<le.length;++_t)le[_t].dispose();O.dispose();for(var _t=0;_t<X.length;++_t)X[_t].dispose();V.dispose(),P=null,Z=null,re=null,le=[]}},ue._mouseRotating=!1,ue._prevButtons=0,ue.enableMouseListeners=function(){ue.mouseListener=p(C,function(_t,zt,Et){if(!ue._stopped){var Se=X.length,je=le.length,ht=z.object;z.distance=1/0,z.mouse[0]=zt,z.mouse[1]=Et,z.object=null,z.screen=null,z.dataCoordinate=z.dataPosition=null;var nt=!1;if(_t&&ue._prevButtons)ue._mouseRotating=!0;else{ue._mouseRotating&&(he=!0),ue._mouseRotating=!1;for(var lt=0;lt<Se;++lt){var rt=X[lt].query(zt,Ae[1]-Et-1,ue.pickRadius);if(rt){if(rt.distance>z.distance)continue;for(var Xe=0;Xe<je;++Xe){var ft=le[Xe];if(fe[Xe]===lt){var gt=ft.pick(rt);gt&&(z.buttons=_t,z.screen=rt.coord,z.distance=rt.distance,z.object=ft,z.index=gt.distance,z.dataPosition=gt.position,z.dataCoordinate=gt.dataCoordinate,z.data=gt,nt=!0)}}}}}ht&&ht!==z.object&&(ht.highlight&&ht.highlight(null),ae=!0),z.object&&(z.object.highlight&&z.object.highlight(z.data),ae=!0),nt=nt||z.object!==ht,nt&&ue.onselect&&ue.onselect(z),_t&1&&!(ue._prevButtons&1)&&ue.onclick&&ue.onclick(z),ue._prevButtons=_t}})};function et(){if(ue.contextLost)return!0;P.isContextLost()&&(ue.contextLost=!0,ue.mouseListener.enabled=!1,ue.selection.object=null,ue.oncontextloss&&ue.oncontextloss())}C.addEventListener("webglcontextlost",et);function Le(){if(!et()){P.colorMask(!0,!0,!0,!0),P.depthMask(!0),P.disable(P.BLEND),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL);for(var _t=le.length,zt=X.length,Et=0;Et<zt;++Et){var Se=X[Et];Se.shape=Ae,Se.begin();for(var je=0;je<_t;++je)if(fe[je]===Et){var ht=le[je];ht.drawPick&&(ht.pixelRatio=1,ht.drawPick(be))}Se.end()}}}var Ie=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],dt=[Ie[0].slice(),Ie[1].slice()];function ct(){if(!et()){Re();var _t=ue.camera.tick();be.view=ue.camera.matrix,ae=ae||_t,he=he||_t,Z.pixelRatio=ue.pixelRatio,re.pixelRatio=ue.pixelRatio;var zt=le.length,Et=Ie[0],Se=Ie[1];Et[0]=Et[1]=Et[2]=1/0,Se[0]=Se[1]=Se[2]=-1/0;for(var je=0;je<zt;++je){var ht=le[je];ht.pixelRatio=ue.pixelRatio,ht.axes=ue.axes,ae=ae||!!ht.dirty,he=he||!!ht.dirty;var nt=ht.bounds;if(nt)for(var lt=nt[0],rt=nt[1],Xe=0;Xe<3;++Xe)Et[Xe]=Math.min(Et[Xe],lt[Xe]),Se[Xe]=Math.max(Se[Xe],rt[Xe])}var ft=ue.bounds;if(ue.autoBounds)for(var Xe=0;Xe<3;++Xe){if(Se[Xe]<Et[Xe])Et[Xe]=-1,Se[Xe]=1;else{Et[Xe]===Se[Xe]&&(Et[Xe]-=1,Se[Xe]+=1);var gt=.05*(Se[Xe]-Et[Xe]);Et[Xe]=Et[Xe]-gt,Se[Xe]=Se[Xe]+gt}ft[0][Xe]=Et[Xe],ft[1][Xe]=Se[Xe]}for(var Qt=!1,Xe=0;Xe<3;++Xe)Qt=Qt||dt[0][Xe]!==ft[0][Xe]||dt[1][Xe]!==ft[1][Xe],dt[0][Xe]=ft[0][Xe],dt[1][Xe]=ft[1][Xe];if(he=he||Qt,ae=ae||Qt,!!ae){if(Qt){for(var Jt=[0,0,0],je=0;je<3;++je)Jt[je]=k((ft[1][je]-ft[0][je])/10);Z.autoTicks?Z.update({bounds:ft,tickSpacing:Jt}):Z.update({bounds:ft})}var fr=P.drawingBufferWidth,nr=P.drawingBufferHeight;ie[0]=fr,ie[1]=nr,Ae[0]=Math.max(fr/ue.pixelRatio,1)|0,Ae[1]=Math.max(nr/ue.pixelRatio,1)|0,M(ue,B);for(var je=0;je<zt;++je){var ht=le[je];ht.axesBounds=ft,ue.clipToBounds&&(ht.clipBounds=ft)}z.object&&(ue.snapToData?re.position=z.dataCoordinate:re.position=z.dataPosition,re.bounds=ft),he&&(he=!1,Le()),ue.axesPixels=u(ue.axes,be,fr,nr),ue.onrender&&ue.onrender(),P.bindFramebuffer(P.FRAMEBUFFER,null),P.viewport(0,0,fr,nr),ue.clearRGBA(),P.depthMask(!0),P.colorMask(!0,!0,!0,!0),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL),P.disable(P.BLEND),P.disable(P.CULL_FACE);var ur=!1;Z.enable&&(ur=ur||Z.isTransparent(),Z.draw(be)),re.axes=Z,z.object&&re.draw(be),P.disable(P.CULL_FACE);for(var je=0;je<zt;++je){var ht=le[je];ht.axes=Z,ht.pixelRatio=ue.pixelRatio,ht.isOpaque&&ht.isOpaque()&&ht.draw(be),ht.isTransparent&&ht.isTransparent()&&(ur=!0)}if(ur){O.shape=ie,O.bind(),P.clear(P.DEPTH_BUFFER_BIT),P.colorMask(!1,!1,!1,!1),P.depthMask(!0),P.depthFunc(P.LESS),Z.enable&&Z.isTransparent()&&Z.drawTransparent(be);for(var je=0;je<zt;++je){var ht=le[je];ht.isOpaque&&ht.isOpaque()&&ht.draw(be)}P.enable(P.BLEND),P.blendEquation(P.FUNC_ADD),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.colorMask(!0,!0,!0,!0),P.depthMask(!1),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),Z.isTransparent()&&Z.drawTransparent(be);for(var je=0;je<zt;++je){var ht=le[je];ht.isTransparent&&ht.isTransparent()&&ht.drawTransparent(be)}P.bindFramebuffer(P.FRAMEBUFFER,null),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.disable(P.DEPTH_TEST),V.bind(),O.color[0].bind(0),V.uniforms.accumBuffer=0,v(P),P.disable(P.BLEND)}ae=!1;for(var je=0;je<zt;++je)le[je].dirty=!1}}}function Ke(){ue._stopped||ue.contextLost||(ct(),requestAnimationFrame(Ke))}return ue.enableMouseListeners(),Ke(),ue.redraw=function(){ue._stopped||(ae=!0,ct())},ue}function M(d,C){var S=d.bounds,P=d.cameraParams,D=P.projection,z=P.model,O=d.gl.drawingBufferWidth,V=d.gl.drawingBufferHeight,B=d.zNear,F=d.zFar,N=d.fovy,Z=O/V;C?(T(D,-Z,Z,-1,1,B,F),P._ortho=!0):(_(D,N,Z,B,F),P._ortho=!1);for(var J=0;J<16;++J)z[J]=0;z[15]=1;for(var re=0,J=0;J<3;++J)re=Math.max(re,S[1][J]-S[0][J]);for(var J=0;J<3;++J)d.autoScale?z[5*J]=d.aspect[J]/(S[1][J]-S[0][J]):z[5*J]=1/re,d.autoCenter&&(z[12+J]=-z[5*J]*.5*(S[0][J]+S[1][J]))}},8023:function(n,a,o){var s=o(6832);a.pointVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),a.pointFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),a.pickVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),a.pickFragment=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(n,a,o){"use strict";var s=o(5158),l=o(5827),u=o(5306),f=o(8023);n.exports=p;function c(_,T,g,A,b){this.plot=_,this.offsetBuffer=T,this.pickBuffer=g,this.shader=A,this.pickShader=b,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=c.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(_){var T;_=_||{};function g(M,d){return M in _?_[M]:d}this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var A=_.positions.length>>>1,b=_.positions instanceof Float32Array,w=_.idToIndex instanceof Int32Array&&_.idToIndex.length>=A,k=_.positions,x=b?k:u.mallocFloat32(k.length),E=w?_.idToIndex:u.mallocInt32(A);if(b||x.set(k),!w)for(x.set(k),T=0;T<A;T++)E[T]=T;this.points=k,this.offsetBuffer.update(x),this.pickBuffer.update(E),b||u.free(x),w||u.free(E),this.pointCount=A,this.pickOffset=0};function v(_,T){var g=0,A=_.length>>>1,b;for(b=0;b<A;b++){var w=_[b*2],k=_[b*2+1];w>=T[0]&&w<=T[2]&&k>=T[1]&&k<=T[3]&&g++}return g}h.unifiedDraw=function(){var _=[1,0,0,0,1,0,0,0,1],T=[0,0,0,0];return function(g){var A=g!==void 0,b=A?this.pickShader:this.shader,w=this.plot.gl,k=this.plot.dataBox;if(this.pointCount===0)return g;var x=k[2]-k[0],E=k[3]-k[1],M=v(this.points,k),d=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(M,.33333)));_[0]=2/x,_[4]=2/E,_[6]=-2*k[0]/x-1,_[7]=-2*k[1]/E-1,this.offsetBuffer.bind(),b.bind(),b.attributes.position.pointer(),b.uniforms.matrix=_,b.uniforms.color=this.color,b.uniforms.borderColor=this.borderColor,b.uniforms.pointCloud=d<5,b.uniforms.pointSize=d,b.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),A&&(T[0]=g&255,T[1]=g>>8&255,T[2]=g>>16&255,T[3]=g>>24&255,this.pickBuffer.bind(),b.attributes.pickId.pointer(w.UNSIGNED_BYTE),b.uniforms.pickOffset=T,this.pickOffset=g);var C=w.getParameter(w.BLEND),S=w.getParameter(w.DITHER);return C&&!this.blend&&w.disable(w.BLEND),S&&w.disable(w.DITHER),w.drawArrays(w.POINTS,0,this.pointCount),C&&!this.blend&&w.enable(w.BLEND),S&&w.enable(w.DITHER),g+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(_,T,g){var A=this.pickOffset,b=this.pointCount;if(g<A||g>=A+b)return null;var w=g-A,k=this.points;return{object:this,pointId:w,dataCoord:[k[2*w],k[2*w+1]]}};function p(_,T){var g=_.gl,A=l(g),b=l(g),w=s(g,f.pointVertex,f.pointFragment),k=s(g,f.pickVertex,f.pickFragment),x=new c(_,A,b,w,k);return x.update(T),_.addObject(x),x}},6093:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3],p=l[0],_=l[1],T=l[2],g=l[3],A,b,w,k,x;return b=f*p+c*_+h*T+v*g,b<0&&(b=-b,p=-p,_=-_,T=-T,g=-g),1-b>1e-6?(A=Math.acos(b),w=Math.sin(A),k=Math.sin((1-u)*A)/w,x=Math.sin(u*A)/w):(k=1-u,x=u),o[0]=k*f+x*p,o[1]=k*c+x*_,o[2]=k*h+x*T,o[3]=k*v+x*g,o}},8240:function(n){"use strict";n.exports=function(a){return!a&&a!==0?"":a.toString()}},4123:function(n,a,o){"use strict";var s=o(875);n.exports=u;var l={};function u(f,c,h){var v=l[c];if(v||(v=l[c]={}),f in v)return v[f];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:c,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};p.triangles=!0;var _=s(f,p);p.triangles=!1;var T=s(f,p),g,A;if(h&&h!==1){for(g=0;g<_.positions.length;++g)for(A=0;A<_.positions[g].length;++A)_.positions[g][A]/=h;for(g=0;g<T.positions.length;++g)for(A=0;A<T.positions[g].length;++A)T.positions[g][A]/=h}var b=[[1/0,1/0],[-1/0,-1/0]],w=T.positions.length;for(g=0;g<w;++g){var k=T.positions[g];for(A=0;A<2;++A)b[0][A]=Math.min(b[0][A],k[A]),b[1][A]=Math.max(b[1][A],k[A])}return v[f]=[_,T,b]}},9282:function(n,a,o){var s=o(5158),l=o(6832),u=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),v=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),p=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],_={vertex:u,fragment:h,attributes:p},T={vertex:f,fragment:h,attributes:p},g={vertex:c,fragment:h,attributes:p},A={vertex:u,fragment:v,attributes:p},b={vertex:f,fragment:v,attributes:p},w={vertex:c,fragment:v,attributes:p};function k(x,E){var M=s(x,E),d=M.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,M}a.createPerspective=function(x){return k(x,_)},a.createOrtho=function(x){return k(x,T)},a.createProject=function(x){return k(x,g)},a.createPickPerspective=function(x){return k(x,A)},a.createPickOrtho=function(x){return k(x,b)},a.createPickProject=function(x){return k(x,w)}},2182:function(n,a,o){"use strict";var s=o(3596),l=o(5827),u=o(2944),f=o(5306),c=o(104),h=o(9282),v=o(4123),p=o(8240),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n.exports=fe;function T(K,X){var ae=K[0],oe=K[1],_e=K[2],be=K[3];return K[0]=X[0]*ae+X[4]*oe+X[8]*_e+X[12]*be,K[1]=X[1]*ae+X[5]*oe+X[9]*_e+X[13]*be,K[2]=X[2]*ae+X[6]*oe+X[10]*_e+X[14]*be,K[3]=X[3]*ae+X[7]*oe+X[11]*_e+X[15]*be,K}function g(K,X,ae,oe){return T(oe,oe,ae),T(oe,oe,X),T(oe,oe,K)}function A(K,X){this.index=K,this.dataCoordinate=this.position=X}function b(K){return K===!0||K>1?1:K}function w(K,X,ae,oe,_e,be,he,ie,ye,ue,Ae,Re){this.gl=K,this.pixelRatio=1,this.shader=X,this.orthoShader=ae,this.projectShader=oe,this.pointBuffer=_e,this.colorBuffer=be,this.glyphBuffer=he,this.idBuffer=ie,this.vao=ye,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ue,this.pickOrthoShader=Ae,this.pickProjectShader=Re,this.points=[],this._selectResult=new A(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var k=w.prototype;k.pickSlots=1,k.setPickBase=function(K){this.pickId=K},k.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},k.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],E=[0,0,0],M=[0,0,0],d=[0,0,0,1],C=[0,0,0,1],S=_.slice(),P=[0,0,0],D=[[0,0,0],[0,0,0]];function z(K){return K[0]=K[1]=K[2]=0,K}function O(K,X){return K[0]=X[0],K[1]=X[1],K[2]=X[2],K[3]=1,K}function V(K,X,ae,oe){return K[0]=X[0],K[1]=X[1],K[2]=X[2],K[ae]=oe,K}function B(K){for(var X=D,ae=0;ae<2;++ae)for(var oe=0;oe<3;++oe)X[ae][oe]=Math.max(Math.min(K[ae][oe],1e8),-1e8);return X}function F(K,X,ae,oe){var _e=X.axesProject,be=X.gl,he=K.uniforms,ie=ae.model||_,ye=ae.view||_,ue=ae.projection||_,Ae=X.axesBounds,Re=B(X.clipBounds),ze;X.axes&&X.axes.lastCubeProps?ze=X.axes.lastCubeProps.axis:ze=[1,1,1],x[0]=2/be.drawingBufferWidth,x[1]=2/be.drawingBufferHeight,K.bind(),he.view=ye,he.projection=ue,he.screenSize=x,he.highlightId=X.highlightId,he.highlightScale=X.highlightScale,he.clipBounds=Re,he.pickGroup=X.pickId/255,he.pixelRatio=oe;for(var et=0;et<3;++et)if(_e[et]){he.scale=X.projectScale[et],he.opacity=X.projectOpacity[et];for(var Le=S,Ie=0;Ie<16;++Ie)Le[Ie]=0;for(var Ie=0;Ie<4;++Ie)Le[5*Ie]=1;Le[5*et]=0,ze[et]<0?Le[12+et]=Ae[0][et]:Le[12+et]=Ae[1][et],c(Le,ie,Le),he.model=Le;var dt=(et+1)%3,ct=(et+2)%3,Ke=z(E),_t=z(M);Ke[dt]=1,_t[ct]=1;var zt=g(ue,ye,ie,O(d,Ke)),Et=g(ue,ye,ie,O(C,_t));if(Math.abs(zt[1])>Math.abs(Et[1])){var Se=zt;zt=Et,Et=Se,Se=Ke,Ke=_t,_t=Se;var je=dt;dt=ct,ct=je}zt[0]<0&&(Ke[dt]=-1),Et[1]>0&&(_t[ct]=-1);for(var ht=0,nt=0,Ie=0;Ie<4;++Ie)ht+=Math.pow(ie[4*dt+Ie],2),nt+=Math.pow(ie[4*ct+Ie],2);Ke[dt]/=Math.sqrt(ht),_t[ct]/=Math.sqrt(nt),he.axes[0]=Ke,he.axes[1]=_t,he.fragClipBounds[0]=V(P,Re[0],et,-1e8),he.fragClipBounds[1]=V(P,Re[1],et,1e8),X.vao.bind(),X.vao.draw(be.TRIANGLES,X.vertexCount),X.lineWidth>0&&(be.lineWidth(X.lineWidth*oe),X.vao.draw(be.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var N=[-1e8,-1e8,-1e8],Z=[1e8,1e8,1e8],J=[N,Z];function re(K,X,ae,oe,_e,be,he){var ie=ae.gl;if((be===ae.projectHasAlpha||he)&&F(X,ae,oe,_e),be===ae.hasAlpha||he){K.bind();var ye=K.uniforms;ye.model=oe.model||_,ye.view=oe.view||_,ye.projection=oe.projection||_,x[0]=2/ie.drawingBufferWidth,x[1]=2/ie.drawingBufferHeight,ye.screenSize=x,ye.highlightId=ae.highlightId,ye.highlightScale=ae.highlightScale,ye.fragClipBounds=J,ye.clipBounds=ae.axes.bounds,ye.opacity=ae.opacity,ye.pickGroup=ae.pickId/255,ye.pixelRatio=_e,ae.vao.bind(),ae.vao.draw(ie.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(ie.lineWidth(ae.lineWidth*_e),ae.vao.draw(ie.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}k.draw=function(K){var X=this.useOrtho?this.orthoShader:this.shader;re(X,this.projectShader,this,K,this.pixelRatio,!1,!1)},k.drawTransparent=function(K){var X=this.useOrtho?this.orthoShader:this.shader;re(X,this.projectShader,this,K,this.pixelRatio,!0,!1)},k.drawPick=function(K){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;re(X,this.pickProjectShader,this,K,1,!0,!0)},k.pick=function(K){if(!K||K.id!==this.pickId)return null;var X=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ae=this.points[X],oe=this._selectResult;oe.index=X;for(var _e=0;_e<3;++_e)oe.position[_e]=oe.dataCoordinate[_e]=ae[_e];return oe},k.highlight=function(K){if(!K)this.highlightId=[1,1,1,1];else{var X=K.index,ae=X&255,oe=X>>8&255,_e=X>>16&255;this.highlightId=[ae/255,oe/255,_e/255,0]}};function le(K,X,ae,oe){var _e;Array.isArray(K)?X<K.length?_e=K[X]:_e=void 0:_e=K,_e=p(_e);var be=!0;s(_e)&&(_e="\u25BC",be=!1);var he=v(_e,ae,oe);return{mesh:he[0],lines:he[1],bounds:he[2],visible:be}}k.update=function(K){if(K=K||{},"perspective"in K&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(Array.isArray(K.project))this.axesProject=K.project;else{var X=!!K.project;this.axesProject=[X,X,X]}if("projectScale"in K)if(Array.isArray(K.projectScale))this.projectScale=K.projectScale.slice();else{var ae=+K.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in K){if(Array.isArray(K.projectOpacity))this.projectOpacity=K.projectOpacity.slice();else{var ae=+K.projectOpacity;this.projectOpacity=[ae,ae,ae]}for(var oe=0;oe<3;++oe)this.projectOpacity[oe]=b(this.projectOpacity[oe]),this.projectOpacity[oe]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=b(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var _e=K.position,be=K.font||"normal",he=K.alignment||[0,0],ie,ye;if(he.length===2)ie=he[0],ye=he[1];else{ie=[],ye=[];for(var oe=0;oe<he.length;++oe)ie[oe]=he[oe][0],ye[oe]=he[oe][1]}var ue=[1/0,1/0,1/0],Ae=[-1/0,-1/0,-1/0],Re=K.glyph,ze=K.color,et=K.size,Le=K.angle,Ie=K.lineColor,dt=-1,ct=0,Ke=0,_t=0;if(_e.length){_t=_e.length;e:for(var oe=0;oe<_t;++oe){for(var zt=_e[oe],Et=0;Et<3;++Et)if(isNaN(zt[Et])||!isFinite(zt[Et]))continue e;var Se=le(Re,oe,be,this.pixelRatio),je=Se.mesh,ht=Se.lines,nt=Se.bounds;ct+=je.cells.length*3,Ke+=ht.edges.length*2}}var lt=ct+Ke,rt=f.mallocFloat(3*lt),Xe=f.mallocFloat(4*lt),ft=f.mallocFloat(2*lt),gt=f.mallocUint32(lt);if(lt>0){var Qt=0,Jt=ct,fr=[0,0,0,1],nr=[0,0,0,1],ur=Array.isArray(ze)&&Array.isArray(ze[0]),qt=Array.isArray(Ie)&&Array.isArray(Ie[0]);e:for(var oe=0;oe<_t;++oe){dt+=1;for(var zt=_e[oe],Et=0;Et<3;++Et){if(isNaN(zt[Et])||!isFinite(zt[Et]))continue e;Ae[Et]=Math.max(Ae[Et],zt[Et]),ue[Et]=Math.min(ue[Et],zt[Et])}var Se=le(Re,oe,be,this.pixelRatio),je=Se.mesh,ht=Se.lines,nt=Se.bounds,xt=Se.visible;if(!xt)fr=[1,1,1,0];else if(Array.isArray(ze)){var At;if(ur?oe<ze.length?At=ze[oe]:At=[0,0,0,0]:At=ze,At.length===3){for(var Et=0;Et<3;++Et)fr[Et]=At[Et];fr[3]=1}else if(At.length===4){for(var Et=0;Et<4;++Et)fr[Et]=At[Et];!this.hasAlpha&&At[3]<1&&(this.hasAlpha=!0)}}else fr[0]=fr[1]=fr[2]=0,fr[3]=1;if(!xt)nr=[1,1,1,0];else if(Array.isArray(Ie)){var At;if(qt?oe<Ie.length?At=Ie[oe]:At=[0,0,0,0]:At=Ie,At.length===3){for(var Et=0;Et<3;++Et)nr[Et]=At[Et];nr[Et]=1}else if(At.length===4){for(var Et=0;Et<4;++Et)nr[Et]=At[Et];!this.hasAlpha&&At[3]<1&&(this.hasAlpha=!0)}}else nr[0]=nr[1]=nr[2]=0,nr[3]=1;var Je=.5;xt?Array.isArray(et)?oe<et.length?Je=+et[oe]:Je=12:et?Je=+et:this.useOrtho&&(Je=12):Je=0;var xe=0;Array.isArray(Le)?oe<Le.length?xe=+Le[oe]:xe=0:Le&&(xe=+Le);for(var ce=Math.cos(xe),ge=Math.sin(xe),zt=_e[oe],Et=0;Et<3;++Et)Ae[Et]=Math.max(Ae[Et],zt[Et]),ue[Et]=Math.min(ue[Et],zt[Et]);var qe=ie,yt=ye,qe=0;Array.isArray(ie)?oe<ie.length?qe=ie[oe]:qe=0:ie&&(qe=ie);var yt=0;Array.isArray(ye)?oe<ye.length?yt=ye[oe]:yt=0:ye&&(yt=ye),qe*=qe>0?1-nt[0][0]:qe<0?1+nt[1][0]:1,yt*=yt>0?1-nt[0][1]:yt<0?1+nt[1][1]:1;for(var Vt=[qe,yt],Hr=je.cells||[],gr=je.positions||[],Et=0;Et<Hr.length;++Et)for(var Ut=Hr[Et],br=0;br<3;++br){for(var xr=0;xr<3;++xr)rt[3*Qt+xr]=zt[xr];for(var xr=0;xr<4;++xr)Xe[4*Qt+xr]=fr[xr];gt[Qt]=dt;var Or=gr[Ut[br]];ft[2*Qt]=Je*(ce*Or[0]-ge*Or[1]+Vt[0]),ft[2*Qt+1]=Je*(ge*Or[0]+ce*Or[1]+Vt[1]),Qt+=1}for(var Hr=ht.edges,gr=ht.positions,Et=0;Et<Hr.length;++Et)for(var Ut=Hr[Et],br=0;br<2;++br){for(var xr=0;xr<3;++xr)rt[3*Jt+xr]=zt[xr];for(var xr=0;xr<4;++xr)Xe[4*Jt+xr]=nr[xr];gt[Jt]=dt;var Or=gr[Ut[br]];ft[2*Jt]=Je*(ce*Or[0]-ge*Or[1]+Vt[0]),ft[2*Jt+1]=Je*(ge*Or[0]+ce*Or[1]+Vt[1]),Jt+=1}}}this.bounds=[ue,Ae],this.points=_e,this.pointCount=_e.length,this.vertexCount=ct,this.lineVertexCount=Ke,this.pointBuffer.update(rt),this.colorBuffer.update(Xe),this.glyphBuffer.update(ft),this.idBuffer.update(gt),f.free(rt),f.free(Xe),f.free(ft),f.free(gt)},k.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function fe(K){var X=K.gl,ae=h.createPerspective(X),oe=h.createOrtho(X),_e=h.createProject(X),be=h.createPickPerspective(X),he=h.createPickOrtho(X),ie=h.createPickProject(X),ye=l(X),ue=l(X),Ae=l(X),Re=l(X),ze=u(X,[{buffer:ye,size:3,type:X.FLOAT},{buffer:ue,size:4,type:X.FLOAT},{buffer:Ae,size:2,type:X.FLOAT},{buffer:Re,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),et=new w(X,ae,oe,_e,ye,ue,Ae,Re,ze,be,he,ie);return et.update(K),et}},1884:function(n,a,o){"use strict";var s=o(6832);a.boxVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),a.boxFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(n,a,o){"use strict";var s=o(5158),l=o(5827),u=o(1884);n.exports=h;function f(v,p,_){this.plot=v,this.boxBuffer=p,this.boxShader=_,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var c=f.prototype;c.draw=function(){if(this.enabled){var v=this.plot,p=this.selectBox,_=this.borderWidth,T=this.innerFill,g=this.innerColor,A=this.outerFill,b=this.outerColor,w=this.borderColor,k=v.box,x=v.screenBox,E=v.dataBox,M=v.viewBox,d=v.pixelRatio,C=(p[0]-E[0])*(M[2]-M[0])/(E[2]-E[0])+M[0],S=(p[1]-E[1])*(M[3]-M[1])/(E[3]-E[1])+M[1],P=(p[2]-E[0])*(M[2]-M[0])/(E[2]-E[0])+M[0],D=(p[3]-E[1])*(M[3]-M[1])/(E[3]-E[1])+M[1];if(C=Math.max(C,M[0]),S=Math.max(S,M[1]),P=Math.min(P,M[2]),D=Math.min(D,M[3]),!(P<C||D<S)){k.bind();var z=x[2]-x[0],O=x[3]-x[1];if(this.outerFill&&(k.drawBox(0,0,z,S,b),k.drawBox(0,S,C,D,b),k.drawBox(0,D,z,O,b),k.drawBox(P,S,z,D,b)),this.innerFill&&k.drawBox(C,S,P,D,g),_>0){var V=_*d;k.drawBox(C-V,S-V,P+V,S+V,w),k.drawBox(C-V,D-V,P+V,D+V,w),k.drawBox(C-V,S-V,C+V,D+V,w),k.drawBox(P-V,S-V,P+V,D+V,w)}}}},c.update=function(v){v=v||{},this.innerFill=!!v.innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},c.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(v,p){var _=v.gl,T=l(_,[0,0,0,1,1,0,1,1]),g=s(_,u.boxVertex,u.boxFragment),A=new f(v,T,g);return A.update(p),v.addOverlay(A),A}},2611:function(n,a,o){"use strict";n.exports=_;var s=o(4234),l=o(5306),u=o(5050),f=o(2288).nextPow2,c=function(T,g,A){for(var b=1e8,w=-1,k=-1,x=T.shape[0],E=T.shape[1],M=0;M<x;M++)for(var d=0;d<E;d++){var C=T.get(M,d,0),S=T.get(M,d,1),P=T.get(M,d,2),D=T.get(M,d,3);if(C<255||S<255||P<255||D<255){var z=g-M,O=A-d,V=z*z+O*O;V<b&&(b=V,w=M,k=d)}}return[w,k,b]};function h(T,g,A,b,w){this.coord=[T,g],this.id=A,this.value=b,this.distance=w}function v(T,g,A){this.gl=T,this.fbo=g,this.buffer=A,this._readTimeout=null;var b=this;this._readCallback=function(){b.gl&&(g.bind(),T.readPixels(0,0,g.shape[0],g.shape[1],T.RGBA,T.UNSIGNED_BYTE,b.buffer),b._readTimeout=null)}}var p=v.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(T){if(this.gl){this.fbo.shape=T;var g=this.fbo.shape[0],A=this.fbo.shape[1];if(A*g*4>this.buffer.length){l.free(this.buffer);for(var b=this.buffer=l.mallocUint8(f(A*g*4)),w=0;w<A*g*4;++w)b[w]=255}return T}}}),p.begin=function(){var T=this.gl,g=this.shape;T&&(this.fbo.bind(),T.clearColor(1,1,1,1),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT))},p.end=function(){var T=this.gl;T&&(T.bindFramebuffer(T.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(T,g,A){if(!this.gl)return null;var b=this.fbo.shape.slice();T=T|0,g=g|0,typeof A!="number"&&(A=1);var w=Math.min(Math.max(T-A,0),b[0])|0,k=Math.min(Math.max(T+A,0),b[0])|0,x=Math.min(Math.max(g-A,0),b[1])|0,E=Math.min(Math.max(g+A,0),b[1])|0;if(k<=w||E<=x)return null;var M=[k-w,E-x],d=u(this.buffer,[M[0],M[1],4],[4,b[0]*4,1],4*(w+b[0]*x)),C=c(d.hi(M[0],M[1],1),A,A),S=C[0],P=C[1];if(S<0||Math.pow(this.radius,2)<C[2])return null;var D=d.get(S,P,0),z=d.get(S,P,1),O=d.get(S,P,2),V=d.get(S,P,3);return new h(S+w|0,P+x|0,D,[z,O,V],Math.sqrt(C[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function _(T,g){var A=g[0],b=g[1],w={},k=s(T,A,b,w),x=l.mallocUint8(A*b*4);return new v(T,k,x)}},5158:function(n,a,o){"use strict";var s=o(9016),l=o(4280),u=o(3984),f=o(1628),c=o(2631),h=o(9068);function v(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var p=v.prototype;p.bind=function(){this.program||this._relink();var g,A=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),b=this.gl.lastAttribCount;if(A>b)for(g=b;g<A;g++)this.gl.enableVertexAttribArray(g);else if(b>A)for(g=A;g<b;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=A,this.gl.useProgram(this.program)},p.dispose=function(){for(var g=this.gl.lastAttribCount,A=0;A<g;A++)this.gl.disableVertexAttribArray(A);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function _(g,A){return g.name<A.name?-1:1}p.update=function(g,A,b,w){if(!A||arguments.length===1){var k=g;g=k.vertex,A=k.fragment,b=k.uniforms,w=k.attributes}var x=this,E=x.gl,M=x._vref;x._vref=f.shader(E,E.VERTEX_SHADER,g),M&&M.dispose(),x.vertShader=x._vref.shader;var d=this._fref;if(x._fref=f.shader(E,E.FRAGMENT_SHADER,A),d&&d.dispose(),x.fragShader=x._fref.shader,!b||!w){var C=E.createProgram();if(E.attachShader(C,x.fragShader),E.attachShader(C,x.vertShader),E.linkProgram(C),!E.getProgramParameter(C,E.LINK_STATUS)){var S=E.getProgramInfoLog(C);throw new h(S,"Error linking program:"+S)}b=b||c.uniforms(E,C),w=w||c.attributes(E,C),E.deleteProgram(C)}w=w.slice(),w.sort(_);var P=[],D=[],z=[],O;for(O=0;O<w.length;++O){var V=w[O];if(V.type.indexOf("mat")>=0){for(var B=V.type.charAt(V.type.length-1)|0,F=new Array(B),N=0;N<B;++N)F[N]=z.length,D.push(V.name+"["+N+"]"),typeof V.location=="number"?z.push(V.location+N):Array.isArray(V.location)&&V.location.length===B&&typeof V.location[N]=="number"?z.push(V.location[N]|0):z.push(-1);P.push({name:V.name,type:V.type,locations:F})}else P.push({name:V.name,type:V.type,locations:[z.length]}),D.push(V.name),typeof V.location=="number"?z.push(V.location|0):z.push(-1)}var Z=0;for(O=0;O<z.length;++O)if(z[O]<0){for(;z.indexOf(Z)>=0;)Z+=1;z[O]=Z}var J=new Array(b.length);function re(){x.program=f.program(E,x._vref,x._fref,D,z);for(var le=0;le<b.length;++le)J[le]=E.getUniformLocation(x.program,b[le].name)}re(),x._relink=re,x.types={uniforms:u(b),attributes:u(w)},x.attributes=l(E,x,P,z),Object.defineProperty(x,"uniforms",s(E,x,b,J))};function T(g,A,b,w,k){var x=new v(g);return x.update(A,b,w,k),x}n.exports=T},9068:function(n){function a(o,s,l){this.shortMessage=s||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(s||o||"")+(l?`
`+l:""),this.stack=new Error().stack}a.prototype=new Error,a.prototype.name="GLError",a.prototype.constructor=a,n.exports=a},4280:function(n,a,o){"use strict";n.exports=v;var s=o(9068);function l(p,_,T,g,A,b){this._gl=p,this._wrapper=_,this._index=T,this._locations=g,this._dimension=A,this._constFunc=b}var u=l.prototype;u.pointer=function(_,T,g,A){var b=this,w=b._gl,k=b._locations[b._index];w.vertexAttribPointer(k,b._dimension,_||w.FLOAT,!!T,g||0,A||0),w.enableVertexAttribArray(k)},u.set=function(p,_,T,g){return this._constFunc(this._locations[this._index],p,_,T,g)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=p|0,this._wrapper.program=null),p|0}});var f=[function(p,_,T){return T.length===void 0?p.vertexAttrib1f(_,T):p.vertexAttrib1fv(_,T)},function(p,_,T,g){return T.length===void 0?p.vertexAttrib2f(_,T,g):p.vertexAttrib2fv(_,T)},function(p,_,T,g,A){return T.length===void 0?p.vertexAttrib3f(_,T,g,A):p.vertexAttrib3fv(_,T)},function(p,_,T,g,A,b){return T.length===void 0?p.vertexAttrib4f(_,T,g,A,b):p.vertexAttrib4fv(_,T)}];function c(p,_,T,g,A,b,w){var k=f[A],x=new l(p,_,T,g,A,k);Object.defineProperty(b,w,{set:function(E){return p.disableVertexAttribArray(g[T]),k(p,g[T],E),E},get:function(){return x},enumerable:!0})}function h(p,_,T,g,A,b,w){for(var k=new Array(A),x=new Array(A),E=0;E<A;++E)c(p,_,T[E],g,A,k,E),x[E]=k[E];Object.defineProperty(k,"location",{set:function(C){if(Array.isArray(C))for(var S=0;S<A;++S)x[S].location=C[S];else for(var S=0;S<A;++S)x[S].location=C+S;return C},get:function(){for(var C=new Array(A),S=0;S<A;++S)C[S]=g[T[S]];return C},enumerable:!0}),k.pointer=function(C,S,P,D){C=C||p.FLOAT,S=!!S,P=P||A*A,D=D||0;for(var z=0;z<A;++z){var O=g[T[z]];p.vertexAttribPointer(O,A,C,S,P,D+z*A),p.enableVertexAttribArray(O)}};var M=new Array(A),d=p["vertexAttrib"+A+"fv"];Object.defineProperty(b,w,{set:function(C){for(var S=0;S<A;++S){var P=g[T[S]];if(p.disableVertexAttribArray(P),Array.isArray(C[0]))d.call(p,P,C[S]);else{for(var D=0;D<A;++D)M[D]=C[A*S+D];d.call(p,P,M)}}return C},get:function(){return k},enumerable:!0})}function v(p,_,T,g){for(var A={},b=0,w=T.length;b<w;++b){var k=T[b],x=k.name,E=k.type,M=k.locations;switch(E){case"bool":case"int":case"float":c(p,_,M[0],g,1,A,x);break;default:if(E.indexOf("vec")>=0){var d=E.charCodeAt(E.length-1)-48;if(d<2||d>4)throw new s("","Invalid data type for attribute "+x+": "+E);c(p,_,M[0],g,d,A,x)}else if(E.indexOf("mat")>=0){var d=E.charCodeAt(E.length-1)-48;if(d<2||d>4)throw new s("","Invalid data type for attribute "+x+": "+E);h(p,_,M,g,d,A,x)}else throw new s("","Unknown data type for attribute "+x+": "+E);break}}return A}},9016:function(n,a,o){"use strict";var s=o(3984),l=o(9068);n.exports=c;function u(h){return function(){return h}}function f(h,v){for(var p=new Array(h),_=0;_<h;++_)p[_]=v;return p}function c(h,v,p,_){function T(E){return function(M,d,C){return M.getUniform(d.program,C[E])}}function g(E){return function(d){for(var C=A("",E),S=0;S<C.length;++S){var P=C[S],D=P[0],z=P[1];if(_[z]){var O=d;if(typeof D=="string"&&(D.indexOf(".")===0||D.indexOf("[")===0)){var V=D;if(D.indexOf(".")===0&&(V=D.slice(1)),V.indexOf("]")===V.length-1){var B=V.indexOf("["),F=V.slice(0,B),N=V.slice(B+1,V.length-1);O=F?d[F][N]:d[N]}else O=d[V]}var Z=p[z].type,J;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(_[z],O);break;case"float":h.uniform1f(_[z],O);break;default:var re=Z.indexOf("vec");if(0<=re&&re<=1&&Z.length===4+re){if(J=Z.charCodeAt(Z.length-1)-48,J<2||J>4)throw new l("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":h["uniform"+J+"iv"](_[z],O);break;case"v":h["uniform"+J+"fv"](_[z],O);break;default:throw new l("","Unrecognized data type for vector "+name+": "+Z)}}else if(Z.indexOf("mat")===0&&Z.length===4){if(J=Z.charCodeAt(Z.length-1)-48,J<2||J>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+Z);h["uniformMatrix"+J+"fv"](_[z],!1,O);break}else throw new l("","Unknown uniform data type for "+name+": "+Z)}}}}}function A(E,M){if(typeof M!="object")return[[E,M]];var d=[];for(var C in M){var S=M[C],P=E;parseInt(C)+""===C?P+="["+C+"]":P+="."+C,typeof S=="object"?d.push.apply(d,A(P,S)):d.push([P,S])}return d}function b(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var M=E.indexOf("vec");if(0<=M&&M<=1&&E.length===4+M){var d=E.charCodeAt(E.length-1)-48;if(d<2||d>4)throw new l("","Invalid data type");return E.charAt(0)==="b"?f(d,!1):f(d,0)}else if(E.indexOf("mat")===0&&E.length===4){var d=E.charCodeAt(E.length-1)-48;if(d<2||d>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+E);return f(d*d,0)}else throw new l("","Unknown uniform data type for "+name+": "+E)}}function w(E,M,d){if(typeof d=="object"){var C=k(d);Object.defineProperty(E,M,{get:u(C),set:g(d),enumerable:!0,configurable:!1})}else _[d]?Object.defineProperty(E,M,{get:T(d),set:g(d),enumerable:!0,configurable:!1}):E[M]=b(p[d].type)}function k(E){var M;if(Array.isArray(E)){M=new Array(E.length);for(var d=0;d<E.length;++d)w(M,d,E[d])}else{M={};for(var C in E)w(M,C,E[C])}return M}var x=s(p,!0);return{get:u(k(x)),set:g(x),enumerable:!0,configurable:!0}}},3984:function(n){"use strict";n.exports=a;function a(o,s){for(var l={},u=0;u<o.length;++u)for(var f=o[u].name,c=f.split("."),h=l,v=0;v<c.length;++v){var p=c[v].split("[");if(p.length>1){p[0]in h||(h[p[0]]=[]),h=h[p[0]];for(var _=1;_<p.length;++_){var T=parseInt(p[_]);_<p.length-1||v<c.length-1?(T in h||(_<p.length-1?h[T]=[]:h[T]={}),h=h[T]):s?h[T]=u:h[T]=o[u].type}}else v<c.length-1?(p[0]in h||(h[p[0]]={}),h=h[p[0]]):s?h[p[0]]=u:h[p[0]]=o[u].type}return l}},2631:function(n,a){"use strict";a.uniforms=u,a.attributes=f;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null;function l(c,h){if(!s){var v=Object.keys(o);s={};for(var p=0;p<v.length;++p){var _=v[p];s[c[_]]=o[_]}}return s[h]}function u(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_UNIFORMS),p=[],_=0;_<v;++_){var T=c.getActiveUniform(h,_);if(T){var g=l(c,T.type);if(T.size>1)for(var A=0;A<T.size;++A)p.push({name:T.name.replace("[0]","["+A+"]"),type:g});else p.push({name:T.name,type:g})}}return p}function f(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_ATTRIBUTES),p=[],_=0;_<v;++_){var T=c.getActiveAttrib(h,_);T&&p.push({name:T.name,type:l(c,T.type)})}return p}},1628:function(n,a,o){"use strict";a.shader=A,a.program=b;var s=o(9068),l=o(3530),u=typeof WeakMap=="undefined"?o(4037):WeakMap,f=new u,c=0;function h(w,k,x,E,M,d,C){this.id=w,this.src=k,this.type=x,this.shader=E,this.count=d,this.programs=[],this.cache=C}h.prototype.dispose=function(){if(--this.count===0){for(var w=this.cache,k=w.gl,x=this.programs,E=0,M=x.length;E<M;++E){var d=w.programs[x[E]];d&&(delete w.programs[E],k.deleteProgram(d))}k.deleteShader(this.shader),delete w.shaders[this.type===k.FRAGMENT_SHADER|0][this.src]}};function v(w){this.gl=w,this.shaders=[{},{}],this.programs={}}var p=v.prototype;function _(w,k,x){var E=w.createShader(k);if(w.shaderSource(E,x),w.compileShader(E),!w.getShaderParameter(E,w.COMPILE_STATUS)){var M=w.getShaderInfoLog(E);try{var d=l(M,x,k)}catch(C){throw console.warn("Failed to format compiler error: "+C),new s(M,`Error compiling shader:
`+M)}throw new s(M,d.short,d.long)}return E}p.getShaderReference=function(w,k){var x=this.gl,E=this.shaders[w===x.FRAGMENT_SHADER|0],M=E[k];if(!M||!x.isShader(M.shader)){var d=_(x,w,k);M=E[k]=new h(c++,k,w,d,[],1,this)}else M.count+=1;return M};function T(w,k,x,E,M){var d=w.createProgram();w.attachShader(d,k),w.attachShader(d,x);for(var C=0;C<E.length;++C)w.bindAttribLocation(d,M[C],E[C]);if(w.linkProgram(d),!w.getProgramParameter(d,w.LINK_STATUS)){var S=w.getProgramInfoLog(d);throw new s(S,"Error linking program: "+S)}return d}p.getProgram=function(w,k,x,E){var M=[w.id,k.id,x.join(":"),E.join(":")].join("@"),d=this.programs[M];return(!d||!this.gl.isProgram(d))&&(this.programs[M]=d=T(this.gl,w.shader,k.shader,x,E),w.programs.push(M),k.programs.push(M)),d};function g(w){var k=f.get(w);return k||(k=new v(w),f.set(w,k)),k}function A(w,k,x){return g(w).getShaderReference(k,x)}function b(w,k,x,E,M){return g(w).getProgram(k,x,E,M)}},3050:function(n){"use strict";n.exports=s;function a(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var o=a.prototype;o.update=function(l){l=l||{},this.enable=(l.enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(u){return u.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var l=this.enable,u=this.width,f=this.color,c=this.center,h=this.plot,v=h.line,p=h.dataBox,_=h.viewBox;if(v.bind(),p[0]<=c[0]&&c[0]<=p[2]&&p[1]<=c[1]&&c[1]<=p[3]){var T=_[0]+(c[0]-p[0])/(p[2]-p[0])*(_[2]-_[0]),g=_[1]+(c[1]-p[1])/(p[3]-p[1])*(_[3]-_[1]);l[0]&&v.drawLine(T,g,_[0],g,u[0],f[0]),l[1]&&v.drawLine(T,g,T,_[1],u[1],f[1]),l[2]&&v.drawLine(T,g,_[2],g,u[2],f[2]),l[3]&&v.drawLine(T,g,T,_[3],u[3],f[3])}},o.dispose=function(){this.plot.removeOverlay(this)};function s(l,u){var f=new a(l);return f.update(u),l.addOverlay(f),f}},3540:function(n,a,o){"use strict";var s=o(6832),l=o(5158),u=s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),f=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(n,a,o){"use strict";var s=o(5827),l=o(2944),u=o(3540);n.exports=T;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(g,A,b,w){this.gl=g,this.buffer=A,this.vao=b,this.shader=w,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=c.prototype,v=[0,0,0],p=[0,0,0],_=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(g){},h.draw=function(g){var A=this.gl,b=this.vao,w=this.shader;b.bind(),w.bind();var k=g.model||f,x=g.view||f,E=g.projection||f,M;this.axes&&(M=this.axes.lastCubeProps.axis);for(var d=v,C=p,S=0;S<3;++S)M&&M[S]<0?(d[S]=this.bounds[0][S],C[S]=this.bounds[1][S]):(d[S]=this.bounds[1][S],C[S]=this.bounds[0][S]);_[0]=A.drawingBufferWidth,_[1]=A.drawingBufferHeight,w.uniforms.model=k,w.uniforms.view=x,w.uniforms.projection=E,w.uniforms.coordinates=[this.position,d,C],w.uniforms.colors=this.colors,w.uniforms.screenShape=_;for(var S=0;S<3;++S)w.uniforms.lineWidth=this.lineWidth[S]*this.pixelRatio,this.enabled[S]&&(b.draw(A.TRIANGLES,6,6*S),this.drawSides[S]&&b.draw(A.TRIANGLES,12,18+12*S));b.unbind()},h.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function T(g,A){var b=[];function w(d,C,S,P,D,z){var O=[d,C,S,0,0,0,1];O[P+3]=1,O[P]=D,b.push.apply(b,O),O[6]=-1,b.push.apply(b,O),O[P]=z,b.push.apply(b,O),b.push.apply(b,O),O[6]=1,b.push.apply(b,O),O[P]=D,b.push.apply(b,O)}w(0,0,0,0,0,1),w(0,0,0,1,0,1),w(0,0,0,2,0,1),w(1,0,0,1,-1,1),w(1,0,0,2,-1,1),w(0,1,0,0,-1,1),w(0,1,0,2,-1,1),w(0,0,1,0,-1,1),w(0,0,1,1,-1,1);var k=s(g,b),x=l(g,[{type:g.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:k,size:1,offset:24,stride:28}]),E=u(g);E.attributes.position.location=0,E.attributes.color.location=1,E.attributes.weight.location=2;var M=new c(g,k,x,E);return M.update(A),M}},9578:function(n,a,o){var s=o(6832),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(n,a,o){"use strict";var s=o(2858),l=o(4020),u=["xyz","xzy","yxz","yzx","zxy","zyx"],f=function(w,k,x,E){for(var M=w.points,d=w.velocities,C=w.divergences,S=[],P=[],D=[],z=[],O=[],V=[],B=0,F=0,N=l.create(),Z=l.create(),J=8,re=0;re<M.length;re++){var le=M[re],fe=d[re],K=C[re];k===0&&(K=x*.05),F=s.length(fe)/E,N=l.create(),s.copy(N,fe),N[3]=K;for(var X=0;X<J;X++)O[X]=[le[0],le[1],le[2],X];if(z.length>0)for(var X=0;X<J;X++){var ae=(X+1)%J;S.push(z[X],O[X],O[ae],O[ae],z[ae],z[X]),D.push(Z,N,N,N,Z,Z),V.push(B,F,F,F,B,B);var oe=S.length;P.push([oe-6,oe-5,oe-4],[oe-3,oe-2,oe-1])}var _e=z;z=O,O=_e;var be=Z;Z=N,N=be;var he=B;B=F,F=he}return{positions:S,cells:P,vectors:D,vertexIntensity:V}},c=function(w,k,x,E){for(var M=0,d=0;d<w.length;d++)for(var C=w[d].velocities,S=0;S<C.length;S++)M=Math.max(M,s.length(C[S]));for(var P=w.map(function(re){return f(re,x,E,M)}),D=[],z=[],O=[],V=[],d=0;d<P.length;d++){var B=P[d],F=D.length;D=D.concat(B.positions),O=O.concat(B.vectors),V=V.concat(B.vertexIntensity);for(var S=0;S<B.cells.length;S++){var N=B.cells[S],Z=[];z.push(Z);for(var J=0;J<N.length;J++)Z.push(N[J]+F)}}return{positions:D,cells:z,vectors:O,vertexIntensity:V,colormap:k}},h=function(w,k){var x=w.length,E;for(E=0;E<x;E++){var M=w[E];if(M===k)return E;if(M>k)return E-1}return E},v=function(w,k,x){return w<k?k:w>x?x:w},p=function(w,k,x){var E=k.vectors,M=k.meshgrid,d=w[0],C=w[1],S=w[2],P=M[0].length,D=M[1].length,z=M[2].length,O=h(M[0],d),V=h(M[1],C),B=h(M[2],S),F=O+1,N=V+1,Z=B+1;if(O=v(O,0,P-1),F=v(F,0,P-1),V=v(V,0,D-1),N=v(N,0,D-1),B=v(B,0,z-1),Z=v(Z,0,z-1),O<0||V<0||B<0||F>P-1||N>D-1||Z>z-1)return s.create();var J=M[0][O],re=M[0][F],le=M[1][V],fe=M[1][N],K=M[2][B],X=M[2][Z],ae=(d-J)/(re-J),oe=(C-le)/(fe-le),_e=(S-K)/(X-K);isFinite(ae)||(ae=.5),isFinite(oe)||(oe=.5),isFinite(_e)||(_e=.5);var be,he,ie,ye,ue,Ae;switch(x.reversedX&&(O=P-1-O,F=P-1-F),x.reversedY&&(V=D-1-V,N=D-1-N),x.reversedZ&&(B=z-1-B,Z=z-1-Z),x.filled){case 5:ue=B,Ae=Z,ie=V*z,ye=N*z,be=O*z*D,he=F*z*D;break;case 4:ue=B,Ae=Z,be=O*z,he=F*z,ie=V*z*P,ye=N*z*P;break;case 3:ie=V,ye=N,ue=B*D,Ae=Z*D,be=O*D*z,he=F*D*z;break;case 2:ie=V,ye=N,be=O*D,he=F*D,ue=B*D*P,Ae=Z*D*P;break;case 1:be=O,he=F,ue=B*P,Ae=Z*P,ie=V*P*z,ye=N*P*z;break;default:be=O,he=F,ie=V*P,ye=N*P,ue=B*P*D,Ae=Z*P*D;break}var Re=E[be+ie+ue],ze=E[be+ie+Ae],et=E[be+ye+ue],Le=E[be+ye+Ae],Ie=E[he+ie+ue],dt=E[he+ie+Ae],ct=E[he+ye+ue],Ke=E[he+ye+Ae],_t=s.create(),zt=s.create(),Et=s.create(),Se=s.create();s.lerp(_t,Re,Ie,ae),s.lerp(zt,ze,dt,ae),s.lerp(Et,et,ct,ae),s.lerp(Se,Le,Ke,ae);var je=s.create(),ht=s.create();s.lerp(je,_t,Et,oe),s.lerp(ht,zt,Se,oe);var nt=s.create();return s.lerp(nt,je,ht,_e),nt},_=function(w,k){var x=k[0],E=k[1],M=k[2];return w[0]=x<0?-x:x,w[1]=E<0?-E:E,w[2]=M<0?-M:M,w},T=function(w){var k=1/0;w.sort(function(d,C){return d-C});for(var x=w.length,E=1;E<x;E++){var M=Math.abs(w[E]-w[E-1]);M<k&&(k=M)}return k},g=function(w){for(var k=[],x=[],E=[],M={},d={},C={},S=w.length,P=0;P<S;P++){var D=w[P],z=D[0],O=D[1],V=D[2];M[z]||(k.push(z),M[z]=!0),d[O]||(x.push(O),d[O]=!0),C[V]||(E.push(V),C[V]=!0)}var B=T(k),F=T(x),N=T(E),Z=Math.min(B,F,N);return isFinite(Z)?Z:1};n.exports=function(w,k){var x=w.startingPositions,E=w.maxLength||1e3,M=w.tubeSize||1,d=w.absoluteTubeSize,C=w.gridFill||"+x+y+z",S={};C.indexOf("-x")!==-1&&(S.reversedX=!0),C.indexOf("-y")!==-1&&(S.reversedY=!0),C.indexOf("-z")!==-1&&(S.reversedZ=!0),S.filled=u.indexOf(C.replace(/-/g,"").replace(/\+/g,""));var P=w.getVelocity||function(dt){return p(dt,w,S)},D=w.getDivergence||function(dt,ct){var Ke=s.create(),_t=1e-4;s.add(Ke,dt,[_t,0,0]);var zt=P(Ke);s.subtract(zt,zt,ct),s.scale(zt,zt,1/_t),s.add(Ke,dt,[0,_t,0]);var Et=P(Ke);s.subtract(Et,Et,ct),s.scale(Et,Et,1/_t),s.add(Ke,dt,[0,0,_t]);var Se=P(Ke);return s.subtract(Se,Se,ct),s.scale(Se,Se,1/_t),s.add(Ke,zt,Et),s.add(Ke,Ke,Se),Ke},z=[],O=k[0][0],V=k[0][1],B=k[0][2],F=k[1][0],N=k[1][1],Z=k[1][2],J=function(dt){var ct=dt[0],Ke=dt[1],_t=dt[2];return!(ct<O||ct>F||Ke<V||Ke>N||_t<B||_t>Z)},re=s.distance(k[0],k[1]),le=10*re/E,fe=le*le,K=1,X=0,ae=x.length;ae>1&&(K=g(x));for(var oe=0;oe<ae;oe++){var _e=s.create();s.copy(_e,x[oe]);var be=[_e],he=[],ie=P(_e),ye=_e;he.push(ie);var ue=[],Ae=D(_e,ie),Re=s.length(Ae);isFinite(Re)&&Re>X&&(X=Re),ue.push(Re),z.push({points:be,velocities:he,divergences:ue});for(var ze=0;ze<E*100&&be.length<E&&J(_e);){ze++;var et=s.clone(ie),Le=s.squaredLength(et);if(Le===0)break;if(Le>fe&&s.scale(et,et,le/Math.sqrt(Le)),s.add(et,et,_e),ie=P(et),s.squaredDistance(ye,et)-fe>-1e-4*fe){be.push(et),ye=et,he.push(ie);var Ae=D(et,ie),Re=s.length(Ae);isFinite(Re)&&Re>X&&(X=Re),ue.push(Re)}_e=et}}var Ie=c(z,w.colormap,X,K);return d?Ie.tubeScale=d:(X===0&&(X=1),Ie.tubeScale=M*.5*K/X),Ie};var A=o(9578),b=o(1140).createMesh;n.exports.createTubeMesh=function(w,k){return b(w,k,{shaders:A,traceType:"streamtube"})}},9054:function(n,a,o){var s=o(5158),l=o(6832),u=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),f=l([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),c=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);a.createShader=function(v){var p=s(v,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},a.createPickShader=function(v){var p=s(v,u,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},a.createContourShader=function(v){var p=s(v,c,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p},a.createPickContourShader=function(v){var p=s(v,c,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p}},3754:function(n,a,o){"use strict";n.exports=be;var s=o(2288),l=o(5827),u=o(2944),f=o(8931),c=o(5306),h=o(9156),v=o(7498),p=o(7382),_=o(5050),T=o(4162),g=o(104),A=o(7437),b=o(5070),w=o(9144),k=o(9054),x=k.createShader,E=k.createContourShader,M=k.createPickShader,d=k.createPickContourShader,C=4*10,S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var he=0;he<3;++he){var ie=D[he],ye=(he+1)%3,ue=(he+2)%3;ie[ye+0]=1,ie[ue+3]=1,ie[he+6]=1}})();function z(he,ie,ye,ue,Ae){this.position=he,this.index=ie,this.uv=ye,this.level=ue,this.dataCoordinate=Ae}var O=256;function V(he,ie,ye,ue,Ae,Re,ze,et,Le,Ie,dt,ct,Ke,_t,zt){this.gl=he,this.shape=ie,this.bounds=ye,this.objectOffset=zt,this.intensityBounds=[],this._shader=ue,this._pickShader=Ae,this._coordinateBuffer=Re,this._vao=ze,this._colorMap=et,this._contourShader=Le,this._contourPickShader=Ie,this._contourBuffer=dt,this._contourVAO=ct,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new z([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Ke,this._dynamicVAO=_t,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[_(c.mallocFloat(1024),[0,0]),_(c.mallocFloat(1024),[0,0]),_(c.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=V.prototype;B.genColormap=function(he,ie){var ye=!1,ue=p([h({colormap:he,nshades:O,format:"rgba"}).map(function(Ae,Re){var ze=ie?F(Re/255,ie):Ae[3];return ze<1&&(ye=!0),[Ae[0],Ae[1],Ae[2],255*ze]})]);return v.divseq(ue,255),this.hasAlphaScale=ye,ue},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function(he){this.pickId=he};function F(he,ie){if(!ie||!ie.length)return 1;for(var ye=0;ye<ie.length;++ye){if(ie.length<2)return 1;if(ie[ye][0]===he)return ie[ye][1];if(ie[ye][0]>he&&ye>0){var ue=(ie[ye][0]-he)/(ie[ye][0]-ie[ye-1][0]);return ie[ye][1]*(1-ue)+ue*ie[ye-1][1]}}return 1}var N=[0,0,0],Z={showSurface:!1,showContour:!1,projections:[S.slice(),S.slice(),S.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function J(he,ie){var ye,ue,Ae,Re=ie.axes&&ie.axes.lastCubeProps.axis||N,ze=ie.showSurface,et=ie.showContour;for(ye=0;ye<3;++ye)for(ze=ze||ie.surfaceProject[ye],ue=0;ue<3;++ue)et=et||ie.contourProject[ye][ue];for(ye=0;ye<3;++ye){var Le=Z.projections[ye];for(ue=0;ue<16;++ue)Le[ue]=0;for(ue=0;ue<4;++ue)Le[5*ue]=1;Le[5*ye]=0,Le[12+ye]=ie.axesBounds[+(Re[ye]>0)][ye],g(Le,he.model,Le);var Ie=Z.clipBounds[ye];for(Ae=0;Ae<2;++Ae)for(ue=0;ue<3;++ue)Ie[Ae][ue]=he.clipBounds[Ae][ue];Ie[0][ye]=-1e8,Ie[1][ye]=1e8}return Z.showSurface=ze,Z.showContour=et,Z}var re={model:S,view:S,projection:S,inverseModel:S.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},le=S.slice(),fe=[1,0,0,0,1,0,0,0,1];function K(he,ie){he=he||{};var ye=this.gl;ye.disable(ye.CULL_FACE),this._colorMap.bind(0);var ue=re;ue.model=he.model||S,ue.view=he.view||S,ue.projection=he.projection||S,ue.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ue.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ue.objectOffset=this.objectOffset,ue.contourColor=this.contourColor[0],ue.inverseModel=A(ue.inverseModel,ue.model);for(var Ae=0;Ae<2;++Ae)for(var Re=ue.clipBounds[Ae],ze=0;ze<3;++ze)Re[ze]=Math.min(Math.max(this.clipBounds[Ae][ze],-1e8),1e8);ue.kambient=this.ambientLight,ue.kdiffuse=this.diffuseLight,ue.kspecular=this.specularLight,ue.roughness=this.roughness,ue.fresnel=this.fresnel,ue.opacity=this.opacity,ue.height=0,ue.permutation=fe,ue.vertexColor=this.vertexColor;var et=le;for(g(et,ue.view,ue.model),g(et,ue.projection,et),A(et,et),Ae=0;Ae<3;++Ae)ue.eyePosition[Ae]=et[12+Ae]/et[15];var Le=et[15];for(Ae=0;Ae<3;++Ae)Le+=this.lightPosition[Ae]*et[4*Ae+3];for(Ae=0;Ae<3;++Ae){var Ie=et[12+Ae];for(ze=0;ze<3;++ze)Ie+=et[4*ze+Ae]*this.lightPosition[ze];ue.lightPosition[Ae]=Ie/Le}var dt=J(ue,this);if(dt.showSurface){for(this._shader.bind(),this._shader.uniforms=ue,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ye.TRIANGLES,this._vertexCount),Ae=0;Ae<3;++Ae)!this.surfaceProject[Ae]||!this.vertexCount||(this._shader.uniforms.model=dt.projections[Ae],this._shader.uniforms.clipBounds=dt.clipBounds[Ae],this._vao.draw(ye.TRIANGLES,this._vertexCount));this._vao.unbind()}if(dt.showContour){var ct=this._contourShader;ue.kambient=1,ue.kdiffuse=0,ue.kspecular=0,ue.opacity=1,ct.bind(),ct.uniforms=ue;var Ke=this._contourVAO;for(Ke.bind(),Ae=0;Ae<3;++Ae)for(ct.uniforms.permutation=D[Ae],ye.lineWidth(this.contourWidth[Ae]*this.pixelRatio),ze=0;ze<this.contourLevels[Ae].length;++ze)ze===this.highlightLevel[Ae]?(ct.uniforms.contourColor=this.highlightColor[Ae],ct.uniforms.contourTint=this.highlightTint[Ae]):(ze===0||ze-1===this.highlightLevel[Ae])&&(ct.uniforms.contourColor=this.contourColor[Ae],ct.uniforms.contourTint=this.contourTint[Ae]),this._contourCounts[Ae][ze]&&(ct.uniforms.height=this.contourLevels[Ae][ze],Ke.draw(ye.LINES,this._contourCounts[Ae][ze],this._contourOffsets[Ae][ze]));for(Ae=0;Ae<3;++Ae)for(ct.uniforms.model=dt.projections[Ae],ct.uniforms.clipBounds=dt.clipBounds[Ae],ze=0;ze<3;++ze)if(this.contourProject[Ae][ze]){ct.uniforms.permutation=D[ze],ye.lineWidth(this.contourWidth[ze]*this.pixelRatio);for(var _t=0;_t<this.contourLevels[ze].length;++_t)_t===this.highlightLevel[ze]?(ct.uniforms.contourColor=this.highlightColor[ze],ct.uniforms.contourTint=this.highlightTint[ze]):(_t===0||_t-1===this.highlightLevel[ze])&&(ct.uniforms.contourColor=this.contourColor[ze],ct.uniforms.contourTint=this.contourTint[ze]),this._contourCounts[ze][_t]&&(ct.uniforms.height=this.contourLevels[ze][_t],Ke.draw(ye.LINES,this._contourCounts[ze][_t],this._contourOffsets[ze][_t]))}for(Ke.unbind(),Ke=this._dynamicVAO,Ke.bind(),Ae=0;Ae<3;++Ae)if(this._dynamicCounts[Ae]!==0)for(ct.uniforms.model=ue.model,ct.uniforms.clipBounds=ue.clipBounds,ct.uniforms.permutation=D[Ae],ye.lineWidth(this.dynamicWidth[Ae]*this.pixelRatio),ct.uniforms.contourColor=this.dynamicColor[Ae],ct.uniforms.contourTint=this.dynamicTint[Ae],ct.uniforms.height=this.dynamicLevel[Ae],Ke.draw(ye.LINES,this._dynamicCounts[Ae],this._dynamicOffsets[Ae]),ze=0;ze<3;++ze)this.contourProject[ze][Ae]&&(ct.uniforms.model=dt.projections[ze],ct.uniforms.clipBounds=dt.clipBounds[ze],Ke.draw(ye.LINES,this._dynamicCounts[Ae],this._dynamicOffsets[Ae]));Ke.unbind()}}B.draw=function(he){return K.call(this,he,!1)},B.drawTransparent=function(he){return K.call(this,he,!0)};var X={model:S,view:S,projection:S,inverseModel:S,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};B.drawPick=function(he){he=he||{};var ie=this.gl;ie.disable(ie.CULL_FACE);var ye=X;ye.model=he.model||S,ye.view=he.view||S,ye.projection=he.projection||S,ye.shape=this._field[2].shape,ye.pickId=this.pickId/255,ye.lowerBound=this.bounds[0],ye.upperBound=this.bounds[1],ye.objectOffset=this.objectOffset,ye.permutation=fe;for(var ue=0;ue<2;++ue)for(var Ae=ye.clipBounds[ue],Re=0;Re<3;++Re)Ae[Re]=Math.min(Math.max(this.clipBounds[ue][Re],-1e8),1e8);var ze=J(ye,this);if(ze.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ye,this._vao.bind(),this._vao.draw(ie.TRIANGLES,this._vertexCount),ue=0;ue<3;++ue)this.surfaceProject[ue]&&(this._pickShader.uniforms.model=ze.projections[ue],this._pickShader.uniforms.clipBounds=ze.clipBounds[ue],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ze.showContour){var et=this._contourPickShader;et.bind(),et.uniforms=ye;var Le=this._contourVAO;for(Le.bind(),Re=0;Re<3;++Re)for(ie.lineWidth(this.contourWidth[Re]*this.pixelRatio),et.uniforms.permutation=D[Re],ue=0;ue<this.contourLevels[Re].length;++ue)this._contourCounts[Re][ue]&&(et.uniforms.height=this.contourLevels[Re][ue],Le.draw(ie.LINES,this._contourCounts[Re][ue],this._contourOffsets[Re][ue]));for(ue=0;ue<3;++ue)for(et.uniforms.model=ze.projections[ue],et.uniforms.clipBounds=ze.clipBounds[ue],Re=0;Re<3;++Re)if(this.contourProject[ue][Re]){et.uniforms.permutation=D[Re],ie.lineWidth(this.contourWidth[Re]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[Re].length;++Ie)this._contourCounts[Re][Ie]&&(et.uniforms.height=this.contourLevels[Re][Ie],Le.draw(ie.LINES,this._contourCounts[Re][Ie],this._contourOffsets[Re][Ie]))}Le.unbind()}},B.pick=function(he){if(!he||he.id!==this.pickId)return null;var ie=this._field[2].shape,ye=this._pickResult,ue=ie[0]*(he.value[0]+(he.value[2]>>4)/16)/255,Ae=Math.floor(ue),Re=ue-Ae,ze=ie[1]*(he.value[1]+(he.value[2]&15)/16)/255,et=Math.floor(ze),Le=ze-et;Ae+=1,et+=1;var Ie=ye.position;Ie[0]=Ie[1]=Ie[2]=0;for(var dt=0;dt<2;++dt)for(var ct=dt?Re:1-Re,Ke=0;Ke<2;++Ke)for(var _t=Ke?Le:1-Le,zt=Ae+dt,Et=et+Ke,Se=ct*_t,je=0;je<3;++je)Ie[je]+=this._field[je].get(zt,Et)*Se;for(var ht=this._pickResult.level,nt=0;nt<3;++nt)if(ht[nt]=b.le(this.contourLevels[nt],Ie[nt]),ht[nt]<0)this.contourLevels[nt].length>0&&(ht[nt]=0);else if(ht[nt]<this.contourLevels[nt].length-1){var lt=this.contourLevels[nt][ht[nt]],rt=this.contourLevels[nt][ht[nt]+1];Math.abs(lt-Ie[nt])>Math.abs(rt-Ie[nt])&&(ht[nt]+=1)}for(ye.index[0]=Re<.5?Ae:Ae+1,ye.index[1]=Le<.5?et:et+1,ye.uv[0]=ue/ie[0],ye.uv[1]=ze/ie[1],je=0;je<3;++je)ye.dataCoordinate[je]=this._field[je].get(ye.index[0],ye.index[1]);return ye},B.padField=function(he,ie){var ye=ie.shape.slice(),ue=he.shape.slice();v.assign(he.lo(1,1).hi(ye[0],ye[1]),ie),v.assign(he.lo(1).hi(ye[0],1),ie.hi(ye[0],1)),v.assign(he.lo(1,ue[1]-1).hi(ye[0],1),ie.lo(0,ye[1]-1).hi(ye[0],1)),v.assign(he.lo(0,1).hi(1,ye[1]),ie.hi(1)),v.assign(he.lo(ue[0]-1,1).hi(1,ye[1]),ie.lo(ye[0]-1)),he.set(0,0,ie.get(0,0)),he.set(0,ue[1]-1,ie.get(0,ye[1]-1)),he.set(ue[0]-1,0,ie.get(ye[0]-1,0)),he.set(ue[0]-1,ue[1]-1,ie.get(ye[0]-1,ye[1]-1))};function ae(he,ie){return Array.isArray(he)?[ie(he[0]),ie(he[1]),ie(he[2])]:[ie(he),ie(he),ie(he)]}function oe(he){return Array.isArray(he)?he.length===3?[he[0],he[1],he[2],1]:[he[0],he[1],he[2],he[3]]:[0,0,0,1]}function _e(he){if(Array.isArray(he)){if(Array.isArray(he))return[oe(he[0]),oe(he[1]),oe(he[2])];var ie=oe(he);return[ie.slice(),ie.slice(),ie.slice()]}}B.update=function(he){he=he||{},this.objectOffset=he.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in he&&(this.contourWidth=ae(he.contourWidth,Number)),"showContour"in he&&(this.showContour=ae(he.showContour,Boolean)),"showSurface"in he&&(this.showSurface=!!he.showSurface),"contourTint"in he&&(this.contourTint=ae(he.contourTint,Boolean)),"contourColor"in he&&(this.contourColor=_e(he.contourColor)),"contourProject"in he&&(this.contourProject=ae(he.contourProject,function(Wr){return ae(Wr,Boolean)})),"surfaceProject"in he&&(this.surfaceProject=he.surfaceProject),"dynamicColor"in he&&(this.dynamicColor=_e(he.dynamicColor)),"dynamicTint"in he&&(this.dynamicTint=ae(he.dynamicTint,Number)),"dynamicWidth"in he&&(this.dynamicWidth=ae(he.dynamicWidth,Number)),"opacity"in he&&(this.opacity=he.opacity),"opacityscale"in he&&(this.opacityscale=he.opacityscale),"colorBounds"in he&&(this.colorBounds=he.colorBounds),"vertexColor"in he&&(this.vertexColor=he.vertexColor?1:0),"colormap"in he&&this._colorMap.setPixels(this.genColormap(he.colormap,this.opacityscale));var ie=he.field||he.coords&&he.coords[2]||null,ye=!1;if(ie||(this._field[2].shape[0]||this._field[2].shape[2]?ie=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):ie=this._field[2].hi(0,0)),"field"in he||"coords"in he){var ue=(ie.shape[0]+2)*(ie.shape[1]+2);ue>this._field[2].data.length&&(c.freeFloat(this._field[2].data),this._field[2].data=c.mallocFloat(s.nextPow2(ue))),this._field[2]=_(this._field[2].data,[ie.shape[0]+2,ie.shape[1]+2]),this.padField(this._field[2],ie),this.shape=ie.shape.slice();for(var Ae=this.shape,Re=0;Re<2;++Re)this._field[2].size>this._field[Re].data.length&&(c.freeFloat(this._field[Re].data),this._field[Re].data=c.mallocFloat(this._field[2].size)),this._field[Re]=_(this._field[Re].data,[Ae[0]+2,Ae[1]+2]);if(he.coords){var ze=he.coords;if(!Array.isArray(ze)||ze.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Re=0;Re<2;++Re){var et=ze[Re];for(Ke=0;Ke<2;++Ke)if(et.shape[Ke]!==Ae[Ke])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Re],et)}}else if(he.ticks){var Le=he.ticks;if(!Array.isArray(Le)||Le.length!==2)throw new Error("gl-surface: invalid ticks");for(Re=0;Re<2;++Re){var Ie=Le[Re];if((Array.isArray(Ie)||Ie.length)&&(Ie=_(Ie)),Ie.shape[0]!==Ae[Re])throw new Error("gl-surface: invalid tick length");var dt=_(Ie.data,Ae);dt.stride[Re]=Ie.stride[0],dt.stride[Re^1]=0,this.padField(this._field[Re],dt)}}else{for(Re=0;Re<2;++Re){var ct=[0,0];ct[Re]=1,this._field[Re]=_(this._field[Re].data,[Ae[0]+2,Ae[1]+2],ct,0)}this._field[0].set(0,0,0);for(var Ke=0;Ke<Ae[0];++Ke)this._field[0].set(Ke+1,0,Ke);for(this._field[0].set(Ae[0]+1,0,Ae[0]-1),this._field[1].set(0,0,0),Ke=0;Ke<Ae[1];++Ke)this._field[1].set(0,Ke+1,Ke);this._field[1].set(0,Ae[1]+1,Ae[1]-1)}var _t=this._field,zt=_(c.mallocFloat(_t[2].size*3*2),[3,Ae[0]+2,Ae[1]+2,2]);for(Re=0;Re<3;++Re)w(zt.pick(Re),_t[Re],"mirror");var Et=_(c.mallocFloat(_t[2].size*3),[Ae[0]+2,Ae[1]+2,3]);for(Re=0;Re<Ae[0]+2;++Re)for(Ke=0;Ke<Ae[1]+2;++Ke){var Se=zt.get(0,Re,Ke,0),je=zt.get(0,Re,Ke,1),ht=zt.get(1,Re,Ke,0),nt=zt.get(1,Re,Ke,1),lt=zt.get(2,Re,Ke,0),rt=zt.get(2,Re,Ke,1),Xe=ht*rt-nt*lt,ft=lt*je-rt*Se,gt=Se*nt-je*ht,Qt=Math.sqrt(Xe*Xe+ft*ft+gt*gt);Qt<1e-8?(Qt=Math.max(Math.abs(Xe),Math.abs(ft),Math.abs(gt)),Qt<1e-8?(gt=1,ft=Xe=0,Qt=1):Qt=1/Qt):Qt=1/Math.sqrt(Qt),Et.set(Re,Ke,0,Xe*Qt),Et.set(Re,Ke,1,ft*Qt),Et.set(Re,Ke,2,gt*Qt)}c.free(zt.data);var Jt=[1/0,1/0,1/0],fr=[-1/0,-1/0,-1/0],nr=1/0,ur=-1/0,qt=(Ae[0]-1)*(Ae[1]-1)*6,xt=c.mallocFloat(s.nextPow2(10*qt)),At=0,Je=0;for(Re=0;Re<Ae[0]-1;++Re)e:for(Ke=0;Ke<Ae[1]-1;++Ke){for(var xe=0;xe<2;++xe)for(var ce=0;ce<2;++ce)for(var ge=0;ge<3;++ge){var qe=this._field[ge].get(1+Re+xe,1+Ke+ce);if(isNaN(qe)||!isFinite(qe))continue e}for(ge=0;ge<6;++ge){var yt=Re+P[ge][0],Vt=Ke+P[ge][1],Ut=this._field[0].get(yt+1,Vt+1),br=this._field[1].get(yt+1,Vt+1);qe=this._field[2].get(yt+1,Vt+1),Xe=Et.get(yt+1,Vt+1,0),ft=Et.get(yt+1,Vt+1,1),gt=Et.get(yt+1,Vt+1,2),he.intensity&&(xr=he.intensity.get(yt,Vt));var xr=he.intensity?he.intensity.get(yt,Vt):qe+this.objectOffset[2];xt[At++]=yt,xt[At++]=Vt,xt[At++]=Ut,xt[At++]=br,xt[At++]=qe,xt[At++]=0,xt[At++]=xr,xt[At++]=Xe,xt[At++]=ft,xt[At++]=gt,Jt[0]=Math.min(Jt[0],Ut+this.objectOffset[0]),Jt[1]=Math.min(Jt[1],br+this.objectOffset[1]),Jt[2]=Math.min(Jt[2],qe+this.objectOffset[2]),nr=Math.min(nr,xr),fr[0]=Math.max(fr[0],Ut+this.objectOffset[0]),fr[1]=Math.max(fr[1],br+this.objectOffset[1]),fr[2]=Math.max(fr[2],qe+this.objectOffset[2]),ur=Math.max(ur,xr),Je+=1}}for(he.intensityBounds&&(nr=+he.intensityBounds[0],ur=+he.intensityBounds[1]),Re=6;Re<At;Re+=10)xt[Re]=(xt[Re]-nr)/(ur-nr);this._vertexCount=Je,this._coordinateBuffer.update(xt.subarray(0,At)),c.freeFloat(xt),c.free(Et.data),this.bounds=[Jt,fr],this.intensity=he.intensity||this._field[2],(this.intensityBounds[0]!==nr||this.intensityBounds[1]!==ur)&&(ye=!0),this.intensityBounds=[nr,ur]}if("levels"in he){var Or=he.levels;for(Array.isArray(Or[0])?Or=Or.slice():Or=[[],[],Or],Re=0;Re<3;++Re)Or[Re]=Or[Re].slice(),Or[Re].sort(function(Wr,qn){return Wr-qn});for(Re=0;Re<3;++Re)for(Ke=0;Ke<Or[Re].length;++Ke)Or[Re][Ke]-=this.objectOffset[Re];e:for(Re=0;Re<3;++Re){if(Or[Re].length!==this.contourLevels[Re].length){ye=!0;break}for(Ke=0;Ke<Or[Re].length;++Ke)if(Or[Re][Ke]!==this.contourLevels[Re][Ke]){ye=!0;break e}}this.contourLevels=Or}if(ye){_t=this._field,Ae=this.shape;for(var Hr=[],gr=0;gr<3;++gr){var Ur=this.contourLevels[gr],_n=[],si=[],xn=[0,0,0];for(Re=0;Re<Ur.length;++Re){var ci=T(this._field[gr],Ur[Re]);_n.push(Hr.length/5|0),Je=0;e:for(Ke=0;Ke<ci.cells.length;++Ke){var Wi=ci.cells[Ke];for(ge=0;ge<2;++ge){var oi=ci.positions[Wi[ge]],Zi=oi[0],Ei=Math.floor(Zi)|0,at=Zi-Ei,Ne=oi[1],st=Math.floor(Ne)|0,mt=Ne-st,Ot=!1;t:for(var tr=0;tr<3;++tr){xn[tr]=0;var pr=(gr+tr+1)%3;for(xe=0;xe<2;++xe){var hr=xe?at:1-at;for(yt=Math.min(Math.max(Ei+xe,0),Ae[0])|0,ce=0;ce<2;++ce){var Rr=ce?mt:1-mt;if(Vt=Math.min(Math.max(st+ce,0),Ae[1])|0,tr<2?qe=this._field[pr].get(yt,Vt):qe=(this.intensity.get(yt,Vt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(qe)||isNaN(qe)){Ot=!0;break t}var Gr=hr*Rr;xn[tr]+=Gr*qe}}}if(!Ot)Hr.push(xn[0],xn[1],oi[0],oi[1],xn[2]),Je+=1;else{if(ge>0){for(var Yr=0;Yr<5;++Yr)Hr.pop();Je-=1}continue e}}}si.push(Je)}this._contourOffsets[gr]=_n,this._contourCounts[gr]=si}var vn=c.mallocFloat(Hr.length);for(Re=0;Re<Hr.length;++Re)vn[Re]=Hr[Re];this._contourBuffer.update(vn),c.freeFloat(vn)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var he=0;he<3;++he)c.freeFloat(this._field[he].data)},B.highlight=function(he){var ie;if(!he){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(ie=0;ie<3;++ie)this.enableHighlight[ie]?this.highlightLevel[ie]=he.level[ie]:this.highlightLevel[ie]=-1;var ye;for(this.snapToData?ye=he.dataCoordinate:ye=he.position,ie=0;ie<3;++ie)ye[ie]-=this.objectOffset[ie];if(!((!this.enableDynamic[0]||ye[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ye[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ye[2]===this.dynamicLevel[2]))){for(var ue=0,Ae=this.shape,Re=c.mallocFloat(12*Ae[0]*Ae[1]),ze=0;ze<3;++ze){if(!this.enableDynamic[ze]){this.dynamicLevel[ze]=NaN,this._dynamicCounts[ze]=0;continue}this.dynamicLevel[ze]=ye[ze];var et=(ze+1)%3,Le=(ze+2)%3,Ie=this._field[ze],dt=this._field[et],ct=this._field[Le],Ke=T(Ie,ye[ze]),_t=Ke.cells,zt=Ke.positions;for(this._dynamicOffsets[ze]=ue,ie=0;ie<_t.length;++ie)for(var Et=_t[ie],Se=0;Se<2;++Se){var je=zt[Et[Se]],ht=+je[0],nt=ht|0,lt=Math.min(nt+1,Ae[0])|0,rt=ht-nt,Xe=1-rt,ft=+je[1],gt=ft|0,Qt=Math.min(gt+1,Ae[1])|0,Jt=ft-gt,fr=1-Jt,nr=Xe*fr,ur=Xe*Jt,qt=rt*fr,xt=rt*Jt,At=nr*dt.get(nt,gt)+ur*dt.get(nt,Qt)+qt*dt.get(lt,gt)+xt*dt.get(lt,Qt),Je=nr*ct.get(nt,gt)+ur*ct.get(nt,Qt)+qt*ct.get(lt,gt)+xt*ct.get(lt,Qt);if(isNaN(At)||isNaN(Je)){Se&&(ue-=1);break}Re[2*ue+0]=At,Re[2*ue+1]=Je,ue+=1}this._dynamicCounts[ze]=ue-this._dynamicOffsets[ze]}this._dynamicBuffer.update(Re.subarray(0,2*ue)),c.freeFloat(Re)}};function be(he){var ie=he.gl,ye=x(ie),ue=M(ie),Ae=E(ie),Re=d(ie),ze=l(ie),et=u(ie,[{buffer:ze,size:4,stride:C,offset:0},{buffer:ze,size:3,stride:C,offset:16},{buffer:ze,size:3,stride:C,offset:28}]),Le=l(ie),Ie=u(ie,[{buffer:Le,size:4,stride:20,offset:0},{buffer:Le,size:1,stride:20,offset:16}]),dt=l(ie),ct=u(ie,[{buffer:dt,size:2,type:ie.FLOAT}]),Ke=f(ie,1,O,ie.RGBA,ie.UNSIGNED_BYTE);Ke.minFilter=ie.LINEAR,Ke.magFilter=ie.LINEAR;var _t=new V(ie,[0,0],[[0,0,0],[0,0,0]],ye,ue,ze,et,Ke,Ae,Re,Le,Ie,dt,ct,[0,0,0]),zt={levels:[[],[],[]]};for(var Et in he)zt[Et]=he[Et];return zt.colormap=zt.colormap||"jet",_t.update(zt),_t}},8931:function(n,a,o){"use strict";var s=o(5050),l=o(7498),u=o(5306);n.exports=d;var f=null,c=null,h=null;function v(C){f=[C.LINEAR,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_NEAREST],c=[C.NEAREST,C.LINEAR,C.NEAREST_MIPMAP_NEAREST,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_LINEAR],h=[C.REPEAT,C.CLAMP_TO_EDGE,C.MIRRORED_REPEAT]}function p(C){return typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&C instanceof HTMLVideoElement||typeof ImageData!="undefined"&&C instanceof ImageData}var _=function(C,S){l.muls(C,S,255)};function T(C,S,P){var D=C.gl,z=D.getParameter(D.MAX_TEXTURE_SIZE);if(S<0||S>z||P<0||P>z)throw new Error("gl-texture2d: Invalid texture size");return C._shape=[S,P],C.bind(),D.texImage2D(D.TEXTURE_2D,0,C.format,S,P,0,C.format,C.type,null),C._mipLevels=[0],C}function g(C,S,P,D,z,O){this.gl=C,this.handle=S,this.format=z,this.type=O,this._shape=[P,D],this._mipLevels=[0],this._magFilter=C.NEAREST,this._minFilter=C.NEAREST,this._wrapS=C.CLAMP_TO_EDGE,this._wrapT=C.CLAMP_TO_EDGE,this._anisoSamples=1;var V=this,B=[this._wrapS,this._wrapT];Object.defineProperties(B,[{get:function(){return V._wrapS},set:function(N){return V.wrapS=N}},{get:function(){return V._wrapT},set:function(N){return V.wrapT=N}}]),this._wrapVector=B;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return V._shape[0]},set:function(N){return V.width=N}},{get:function(){return V._shape[1]},set:function(N){return V.height=N}}]),this._shapeVector=F}var A=g.prototype;Object.defineProperties(A,{minFilter:{get:function(){return this._minFilter},set:function(C){this.bind();var S=this.gl;if(this.type===S.FLOAT&&f.indexOf(C)>=0&&(S.getExtension("OES_texture_float_linear")||(C=S.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,C),this._minFilter=C}},magFilter:{get:function(){return this._magFilter},set:function(C){this.bind();var S=this.gl;if(this.type===S.FLOAT&&f.indexOf(C)>=0&&(S.getExtension("OES_texture_float_linear")||(C=S.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,C),this._magFilter=C}},mipSamples:{get:function(){return this._anisoSamples},set:function(C){var S=this._anisoSamples;if(this._anisoSamples=Math.max(C,1)|0,S!==this._anisoSamples){var P=this.gl.getExtension("EXT_texture_filter_anisotropic");P&&this.gl.texParameterf(this.gl.TEXTURE_2D,P.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,C),this._wrapS=C}},wrapT:{get:function(){return this._wrapT},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,C),this._wrapT=C}},wrap:{get:function(){return this._wrapVector},set:function(C){if(Array.isArray(C)||(C=[C,C]),C.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var S=0;S<2;++S)if(h.indexOf(C[S])<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);this._wrapS=C[0],this._wrapT=C[1];var P=this.gl;return this.bind(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,this._wrapS),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,this._wrapT),C}},shape:{get:function(){return this._shapeVector},set:function(C){if(!Array.isArray(C))C=[C|0,C|0];else if(C.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return T(this,C[0]|0,C[1]|0),[C[0]|0,C[1]|0]}},width:{get:function(){return this._shape[0]},set:function(C){return C=C|0,T(this,C,this._shape[1]),C}},height:{get:function(){return this._shape[1]},set:function(C){return C=C|0,T(this,this._shape[0],C),C}}}),A.bind=function(C){var S=this.gl;return C!==void 0&&S.activeTexture(S.TEXTURE0+(C|0)),S.bindTexture(S.TEXTURE_2D,this.handle),C!==void 0?C|0:S.getParameter(S.ACTIVE_TEXTURE)-S.TEXTURE0},A.dispose=function(){this.gl.deleteTexture(this.handle)},A.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var C=Math.min(this._shape[0],this._shape[1]),S=0;C>0;++S,C>>>=1)this._mipLevels.indexOf(S)<0&&this._mipLevels.push(S)},A.setPixels=function(C,S,P,D){var z=this.gl;this.bind(),Array.isArray(S)?(D=P,P=S[1]|0,S=S[0]|0):(S=S||0,P=P||0),D=D||0;var O=p(C)?C:C.raw;if(O){var V=this._mipLevels.indexOf(D)<0;V?(z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(D)):z.texSubImage2D(z.TEXTURE_2D,D,S,P,this.format,this.type,O)}else if(C.shape&&C.stride&&C.data){if(C.shape.length<2||S+C.shape[1]>this._shape[1]>>>D||P+C.shape[0]>this._shape[0]>>>D||S<0||P<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");w(z,S,P,D,this.format,this.type,this._mipLevels,C)}else throw new Error("gl-texture2d: Unsupported data type")};function b(C,S){return C.length===3?S[2]===1&&S[1]===C[0]*C[2]&&S[0]===C[2]:S[0]===1&&S[1]===C[0]}function w(C,S,P,D,z,O,V,B){var F=B.dtype,N=B.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Z=0,J=0,re=b(N,B.stride.slice());F==="float32"?Z=C.FLOAT:F==="float64"?(Z=C.FLOAT,re=!1,F="float32"):F==="uint8"?Z=C.UNSIGNED_BYTE:(Z=C.UNSIGNED_BYTE,re=!1,F="uint8");var le=1;if(N.length===2)J=C.LUMINANCE,N=[N[0],N[1],1],B=s(B.data,N,[B.stride[0],B.stride[1],1],B.offset);else if(N.length===3){if(N[2]===1)J=C.ALPHA;else if(N[2]===2)J=C.LUMINANCE_ALPHA;else if(N[2]===3)J=C.RGB;else if(N[2]===4)J=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");le=N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((J===C.LUMINANCE||J===C.ALPHA)&&(z===C.LUMINANCE||z===C.ALPHA)&&(J=z),J!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var fe=B.size,K=V.indexOf(D)<0;if(K&&V.push(D),Z===O&&re)B.offset===0&&B.data.length===fe?K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,B.data):C.texSubImage2D(C.TEXTURE_2D,D,S,P,N[0],N[1],z,O,B.data):K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,B.data.subarray(B.offset,B.offset+fe)):C.texSubImage2D(C.TEXTURE_2D,D,S,P,N[0],N[1],z,O,B.data.subarray(B.offset,B.offset+fe));else{var X;O===C.FLOAT?X=u.mallocFloat32(fe):X=u.mallocUint8(fe);var ae=s(X,N,[N[2],N[2]*N[0],1]);Z===C.FLOAT&&O===C.UNSIGNED_BYTE?_(ae,B):l.assign(ae,B),K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,X.subarray(0,fe)):C.texSubImage2D(C.TEXTURE_2D,D,S,P,N[0],N[1],z,O,X.subarray(0,fe)),O===C.FLOAT?u.freeFloat32(X):u.freeUint8(X)}}function k(C){var S=C.createTexture();return C.bindTexture(C.TEXTURE_2D,S),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),S}function x(C,S,P,D,z){var O=C.getParameter(C.MAX_TEXTURE_SIZE);if(S<0||S>O||P<0||P>O)throw new Error("gl-texture2d: Invalid texture shape");if(z===C.FLOAT&&!C.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var V=k(C);return C.texImage2D(C.TEXTURE_2D,0,D,S,P,0,D,z,null),new g(C,V,S,P,D,z)}function E(C,S,P,D,z,O){var V=k(C);return C.texImage2D(C.TEXTURE_2D,0,z,z,O,S),new g(C,V,P,D,z,O)}function M(C,S){var P=S.dtype,D=S.shape.slice(),z=C.getParameter(C.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>z||D[1]<0||D[1]>z)throw new Error("gl-texture2d: Invalid texture size");var O=b(D,S.stride.slice()),V=0;P==="float32"?V=C.FLOAT:P==="float64"?(V=C.FLOAT,O=!1,P="float32"):P==="uint8"?V=C.UNSIGNED_BYTE:(V=C.UNSIGNED_BYTE,O=!1,P="uint8");var B=0;if(D.length===2)B=C.LUMINANCE,D=[D[0],D[1],1],S=s(S.data,D,[S.stride[0],S.stride[1],1],S.offset);else if(D.length===3)if(D[2]===1)B=C.ALPHA;else if(D[2]===2)B=C.LUMINANCE_ALPHA;else if(D[2]===3)B=C.RGB;else if(D[2]===4)B=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");V===C.FLOAT&&!C.getExtension("OES_texture_float")&&(V=C.UNSIGNED_BYTE,O=!1);var F,N,Z=S.size;if(O)S.offset===0&&S.data.length===Z?F=S.data:F=S.data.subarray(S.offset,S.offset+Z);else{var J=[D[2],D[2]*D[0],1];N=u.malloc(Z,P);var re=s(N,D,J,0);(P==="float32"||P==="float64")&&V===C.UNSIGNED_BYTE?_(re,S):l.assign(re,S),F=N.subarray(0,Z)}var le=k(C);return C.texImage2D(C.TEXTURE_2D,0,B,D[0],D[1],0,B,V,F),O||u.free(N),new g(C,le,D[0],D[1],B,V)}function d(C){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(f||v(C),typeof arguments[1]=="number")return x(C,arguments[1],arguments[2],arguments[3]||C.RGBA,arguments[4]||C.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(C,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var S=arguments[1],P=p(S)?S:S.raw;if(P)return E(C,P,S.width|0,S.height|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(S.shape&&S.data&&S.stride)return M(C,S)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},3056:function(n){"use strict";function a(o,s,l){s?s.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var u=o.getParameter(o.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>u)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<l.length;++f){var c=l[f];if(c.buffer){var h=c.buffer,v=c.size||4,p=c.type||o.FLOAT,_=!!c.normalized,T=c.stride||0,g=c.offset||0;h.bind(),o.enableVertexAttribArray(f),o.vertexAttribPointer(f,v,p,_,T,g)}else{if(typeof c=="number")o.vertexAttrib1f(f,c);else if(c.length===1)o.vertexAttrib1f(f,c[0]);else if(c.length===2)o.vertexAttrib2f(f,c[0],c[1]);else if(c.length===3)o.vertexAttrib3f(f,c[0],c[1],c[2]);else if(c.length===4)o.vertexAttrib4f(f,c[0],c[1],c[2],c[3]);else throw new Error("gl-vao: Invalid vertex attribute");o.disableVertexAttribArray(f)}}for(;f<u;++f)o.disableVertexAttribArray(f)}else{o.bindBuffer(o.ARRAY_BUFFER,null);for(var f=0;f<u;++f)o.disableVertexAttribArray(f)}}n.exports=a},7220:function(n,a,o){"use strict";var s=o(3056);function l(f){this.gl=f,this._elements=null,this._attributes=null,this._elementsType=f.UNSIGNED_SHORT}l.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},l.prototype.update=function(f,c,h){this._elements=c,this._attributes=f,this._elementsType=h||this.gl.UNSIGNED_SHORT},l.prototype.dispose=function(){},l.prototype.unbind=function(){},l.prototype.draw=function(f,c,h){h=h||0;var v=this.gl;this._elements?v.drawElements(f,c,this._elementsType,h):v.drawArrays(f,h,c)};function u(f){return new l(f)}n.exports=u},3778:function(n,a,o){"use strict";var s=o(3056);function l(c,h,v,p,_,T){this.location=c,this.dimension=h,this.a=v,this.b=p,this.c=_,this.d=T}l.prototype.bind=function(c){switch(this.dimension){case 1:c.vertexAttrib1f(this.location,this.a);break;case 2:c.vertexAttrib2f(this.location,this.a,this.b);break;case 3:c.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:c.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(c,h,v){this.gl=c,this._ext=h,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=c.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var c=0;c<this._attribs.length;++c)this._attribs[c].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(c,h,v){if(this.bind(),s(this.gl,h,c),this.unbind(),this._attribs.length=0,c)for(var p=0;p<c.length;++p){var _=c[p];typeof _=="number"?this._attribs.push(new l(p,1,_)):Array.isArray(_)&&this._attribs.push(new l(p,_.length,_[0],_[1],_[2],_[3]))}this._useElements=!!h,this._elementsType=v||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(c,h,v){v=v||0;var p=this.gl;this._useElements?p.drawElements(c,h,this._elementsType,v):p.drawArrays(c,v,h)};function f(c,h){return new u(c,h,h.createVertexArrayOES())}n.exports=f},2944:function(n,a,o){"use strict";var s=o(3778),l=o(7220);function u(c){this.bindVertexArrayOES=c.bindVertexArray.bind(c),this.createVertexArrayOES=c.createVertexArray.bind(c),this.deleteVertexArrayOES=c.deleteVertexArray.bind(c)}function f(c,h,v,p){var _=c.createVertexArray?new u(c):c.getExtension("OES_vertex_array_object"),T;return _?T=s(c,_):T=l(c),T.update(h,v,p),T}n.exports=f},2598:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o}},5879:function(n,a,o){n.exports=f;var s=o(5415),l=o(899),u=o(9305);function f(c,h){var v=s(c[0],c[1],c[2]),p=s(h[0],h[1],h[2]);l(v,v),l(p,p);var _=u(v,p);return _>1?0:Math.acos(_)}},8827:function(n){n.exports=a;function a(o,s){return o[0]=Math.ceil(s[0]),o[1]=Math.ceil(s[1]),o[2]=Math.ceil(s[2]),o}},7622:function(n){n.exports=a;function a(o){var s=new Float32Array(3);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s}},8782:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o}},8501:function(n){n.exports=a;function a(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},903:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2];return o[0]=f*p-c*v,o[1]=c*h-u*p,o[2]=u*v-f*h,o}},5981:function(n,a,o){n.exports=o(8288)},8288:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return Math.sqrt(l*l+u*u+f*f)}},8629:function(n,a,o){n.exports=o(7979)},7979:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o}},9305:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]}},154:function(n){n.exports=1e-6},4932:function(n,a,o){n.exports=l;var s=o(154);function l(u,f){var c=u[0],h=u[1],v=u[2],p=f[0],_=f[1],T=f[2];return Math.abs(c-p)<=s*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(h-_)<=s*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(v-T)<=s*Math.max(1,Math.abs(v),Math.abs(T))}},5777:function(n){n.exports=a;function a(o,s){return o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]}},3306:function(n){n.exports=a;function a(o,s){return o[0]=Math.floor(s[0]),o[1]=Math.floor(s[1]),o[2]=Math.floor(s[2]),o}},7447:function(n,a,o){n.exports=l;var s=o(8501)();function l(u,f,c,h,v,p){var _,T;for(f||(f=3),c||(c=0),h?T=Math.min(h*f+c,u.length):T=u.length,_=c;_<T;_+=f)s[0]=u[_],s[1]=u[_+1],s[2]=u[_+2],v(s,s,p),u[_]=s[0],u[_+1]=s[1],u[_+2]=s[2];return u}},5415:function(n){n.exports=a;function a(o,s,l){var u=new Float32Array(3);return u[0]=o,u[1]=s,u[2]=l,u}},2858:function(n,a,o){n.exports={EPSILON:o(154),create:o(8501),clone:o(7622),angle:o(5879),fromValues:o(5415),copy:o(8782),set:o(831),equals:o(4932),exactEquals:o(5777),add:o(2598),subtract:o(911),sub:o(8921),multiply:o(105),mul:o(5733),divide:o(7979),div:o(8629),min:o(3605),max:o(1716),floor:o(3306),ceil:o(8827),round:o(1624),scale:o(5685),scaleAndAdd:o(6722),distance:o(8288),dist:o(5981),squaredDistance:o(6403),sqrDist:o(5294),length:o(4693),len:o(1468),squaredLength:o(4337),sqrLen:o(3303),negate:o(435),inverse:o(2073),normalize:o(899),dot:o(9305),cross:o(903),lerp:o(1868),random:o(6660),transformMat4:o(3255),transformMat3:o(9908),transformQuat:o(6568),rotateX:o(392),rotateY:o(3222),rotateZ:o(3388),forEach:o(7447)}},2073:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o}},1468:function(n,a,o){n.exports=o(4693)},4693:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return Math.sqrt(s*s+l*l+u*u)}},1868:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o}},1716:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o}},3605:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o}},5733:function(n,a,o){n.exports=o(105)},105:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o}},435:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o}},899:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=l*l+u*u+f*f;return c>0&&(c=1/Math.sqrt(c),o[0]=s[0]*c,o[1]=s[1]*c,o[2]=s[2]*c),o}},6660:function(n){n.exports=a;function a(o,s){s=s||1;var l=Math.random()*2*Math.PI,u=Math.random()*2-1,f=Math.sqrt(1-u*u)*s;return o[0]=Math.cos(l)*f,o[1]=Math.sin(l)*f,o[2]=u*s,o}},392:function(n){n.exports=a;function a(o,s,l,u){var f=l[1],c=l[2],h=s[1]-f,v=s[2]-c,p=Math.sin(u),_=Math.cos(u);return o[0]=s[0],o[1]=f+h*_-v*p,o[2]=c+h*p+v*_,o}},3222:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[2],h=s[0]-f,v=s[2]-c,p=Math.sin(u),_=Math.cos(u);return o[0]=f+v*p+h*_,o[1]=s[1],o[2]=c+v*_-h*p,o}},3388:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[1],h=s[0]-f,v=s[1]-c,p=Math.sin(u),_=Math.cos(u);return o[0]=f+h*_-v*p,o[1]=c+h*p+v*_,o[2]=s[2],o}},1624:function(n){n.exports=a;function a(o,s){return o[0]=Math.round(s[0]),o[1]=Math.round(s[1]),o[2]=Math.round(s[2]),o}},5685:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o}},6722:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o}},831:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s,o[1]=l,o[2]=u,o}},5294:function(n,a,o){n.exports=o(6403)},3303:function(n,a,o){n.exports=o(4337)},6403:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return l*l+u*u+f*f}},4337:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return s*s+l*l+u*u}},8921:function(n,a,o){n.exports=o(911)},911:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o}},9908:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2];return o[0]=u*l[0]+f*l[3]+c*l[6],o[1]=u*l[1]+f*l[4]+c*l[7],o[2]=u*l[2]+f*l[5]+c*l[8],o}},3255:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[3]*u+l[7]*f+l[11]*c+l[15];return h=h||1,o[0]=(l[0]*u+l[4]*f+l[8]*c+l[12])/h,o[1]=(l[1]*u+l[5]*f+l[9]*c+l[13])/h,o[2]=(l[2]*u+l[6]*f+l[10]*c+l[14])/h,o}},6568:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2],_=l[3],T=_*u+v*c-p*f,g=_*f+p*u-h*c,A=_*c+h*f-v*u,b=-h*u-v*f-p*c;return o[0]=T*_+b*-h+g*-p-A*-v,o[1]=g*_+b*-v+A*-h-T*-p,o[2]=A*_+b*-p+T*-v-g*-h,o}},3433:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o[3]=s[3]+l[3],o}},1413:function(n){n.exports=a;function a(o){var s=new Float32Array(4);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s}},3470:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o}},5313:function(n){n.exports=a;function a(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},5446:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return Math.sqrt(l*l+u*u+f*f+c*c)}},205:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o[3]=s[3]/l[3],o}},4242:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]+o[3]*s[3]}},5680:function(n){n.exports=a;function a(o,s,l,u){var f=new Float32Array(4);return f[0]=o,f[1]=s,f[2]=l,f[3]=u,f}},4020:function(n,a,o){n.exports={create:o(5313),clone:o(1413),fromValues:o(5680),copy:o(3470),set:o(6453),add:o(3433),subtract:o(2705),multiply:o(746),divide:o(205),min:o(2170),max:o(3030),scale:o(5510),scaleAndAdd:o(4224),distance:o(5446),squaredDistance:o(1542),length:o(8177),squaredLength:o(9037),negate:o(6459),inverse:o(8057),normalize:o(381),dot:o(4242),lerp:o(8746),random:o(3770),transformMat4:o(6342),transformQuat:o(5022)}},8057:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o[3]=1/s[3],o}},8177:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return Math.sqrt(s*s+l*l+u*u+f*f)}},8746:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o[3]=v+u*(l[3]-v),o}},3030:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o[3]=Math.max(s[3],l[3]),o}},2170:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o[3]=Math.min(s[3],l[3]),o}},746:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o[3]=s[3]*l[3],o}},6459:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o[3]=-s[3],o}},381:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l*l+u*u+f*f+c*c;return h>0&&(h=1/Math.sqrt(h),o[0]=l*h,o[1]=u*h,o[2]=f*h,o[3]=c*h),o}},3770:function(n,a,o){var s=o(381),l=o(5510);n.exports=u;function u(f,c){return c=c||1,f[0]=Math.random(),f[1]=Math.random(),f[2]=Math.random(),f[3]=Math.random(),s(f,f),l(f,f,c),f}},5510:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o[3]=s[3]*l,o}},4224:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o[3]=s[3]+l[3]*u,o}},6453:function(n){n.exports=a;function a(o,s,l,u,f){return o[0]=s,o[1]=l,o[2]=u,o[3]=f,o}},1542:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return l*l+u*u+f*f+c*c}},9037:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return s*s+l*l+u*u+f*f}},2705:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o[3]=s[3]-l[3],o}},6342:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3];return o[0]=l[0]*u+l[4]*f+l[8]*c+l[12]*h,o[1]=l[1]*u+l[5]*f+l[9]*c+l[13]*h,o[2]=l[2]*u+l[6]*f+l[10]*c+l[14]*h,o[3]=l[3]*u+l[7]*f+l[11]*c+l[15]*h,o}},5022:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],p=l[2],_=l[3],T=_*u+v*c-p*f,g=_*f+p*u-h*c,A=_*c+h*f-v*u,b=-h*u-v*f-p*c;return o[0]=T*_+b*-h+g*-p-A*-v,o[1]=g*_+b*-v+A*-h-T*-p,o[2]=A*_+b*-p+T*-v-g*-h,o[3]=s[3],o}},9365:function(n,a,o){var s=o(8096),l=o(7896);n.exports=u;function u(f){for(var c=Array.isArray(f)?f:s(f),h=0;h<c.length;h++){var v=c[h];if(v.type==="preprocessor"){var p=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var _=p[1],T=p[2];return(_?l(T):T).trim()}}}}},3193:function(n,a,o){n.exports=S;var s=o(399),l=o(9746),u=o(9525),f=o(9458),c=o(3585),h=999,v=9999,p=0,_=1,T=2,g=3,A=4,b=5,w=6,k=7,x=8,E=9,M=10,d=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function S(P){var D=0,z=0,O=h,V,B,F=[],N=[],Z=0,J=0,re=1,le=0,fe=0,K=!1,X=!1,ae="",oe;P=P||{};var _e=u,be=s;P.version==="300 es"&&(_e=c,be=f);for(var he={},ie={},D=0;D<_e.length;D++)he[_e[D]]=!0;for(var D=0;D<be.length;D++)ie[be[D]]=!0;return function(Se){return N=[],Se!==null?ue(Se):Ae()};function ye(Se){Se.length&&N.push({type:C[O],data:Se,position:fe,line:re,column:le})}function ue(Se){D=0,Se.toString&&(Se=Se.toString()),ae+=Se.replace(/\r\n/g,`
`),oe=ae.length;for(var je;V=ae[D],D<oe;){switch(je=D,O){case p:D=Ie();break;case _:D=Le();break;case T:D=et();break;case g:D=dt();break;case A:D=_t();break;case d:D=Ke();break;case b:D=zt();break;case v:D=Et();break;case E:D=ze();break;case h:D=Re();break}if(je!==D)switch(ae[je]){case`
`:le=0,++re;break;default:++le;break}}return z+=D,ae=ae.slice(D),N}function Ae(Se){return F.length&&ye(F.join("")),O=M,ye("(eof)"),N}function Re(){return F=F.length?[]:F,B==="/"&&V==="*"?(fe=z+D-1,O=p,B=V,D+1):B==="/"&&V==="/"?(fe=z+D-1,O=_,B=V,D+1):V==="#"?(O=T,fe=z+D,D):/\s/.test(V)?(O=E,fe=z+D,D):(K=/\d/.test(V),X=/[^\w_]/.test(V),fe=z+D,O=K?A:X?g:v,D)}function ze(){return/[^\s]/g.test(V)?(ye(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function et(){return(V==="\r"||V===`
`)&&B!=="\\"?(ye(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function Le(){return et()}function Ie(){return V==="/"&&B==="*"?(F.push(V),ye(F.join("")),O=h,D+1):(F.push(V),B=V,D+1)}function dt(){if(B==="."&&/\d/.test(V))return O=b,D;if(B==="/"&&V==="*")return O=p,D;if(B==="/"&&V==="/")return O=_,D;if(V==="."&&F.length){for(;ct(F););return O=b,D}if(V===";"||V===")"||V==="("){if(F.length)for(;ct(F););return ye(V),O=h,D+1}var Se=F.length===2&&V!=="=";if(/[\w_\d\s]/.test(V)||Se){for(;ct(F););return O=h,D}return F.push(V),B=V,D+1}function ct(Se){var je=0,ht,nt;do{if(ht=l.indexOf(Se.slice(0,Se.length+je).join("")),nt=l[ht],ht===-1){if(je--+Se.length>0)continue;nt=Se.slice(0,1).join("")}return ye(nt),fe+=nt.length,F=F.slice(nt.length),F.length}while(!0)}function Ke(){return/[^a-fA-F0-9]/.test(V)?(ye(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function _t(){return V==="."||/[eE]/.test(V)?(F.push(V),O=b,B=V,D+1):V==="x"&&F.length===1&&F[0]==="0"?(O=d,F.push(V),B=V,D+1):/[^\d]/.test(V)?(ye(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function zt(){return V==="f"&&(F.push(V),B=V,D+=1),/[eE]/.test(V)||(V==="-"||V==="+")&&/[eE]/.test(B)?(F.push(V),B=V,D+1):/[^\d]/.test(V)?(ye(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function Et(){if(/[^\d\w_]/.test(V)){var Se=F.join("");return ie[Se]?O=x:he[Se]?O=k:O=w,ye(F.join("")),O=h,D}return F.push(V),B=V,D+1}}},3585:function(n,a,o){var s=o(9525);s=s.slice().filter(function(l){return!/^(gl\_|texture)/.test(l)}),n.exports=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(n){n.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(n,a,o){var s=o(399);n.exports=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(n){n.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(n){n.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(n,a,o){var s=o(3193);n.exports=l;function l(u,f){var c=s(f),h=[];return h=h.concat(c(u)),h=h.concat(c(null)),h}},6832:function(n){n.exports=function(a){typeof a=="string"&&(a=[a]);for(var o=[].slice.call(arguments,1),s=[],l=0;l<a.length-1;l++)s.push(a[l],o[l]||"");return s.push(a[l]),s.join("")}},5233:function(n,a,o){"use strict";var s=o(4846);function l(){var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch(c){u=!1}return u}n.exports=s&&l()},2183:function(n,a,o){"use strict";n.exports=g;var s=o(417),l=o(8211).H;function u(A,b,w){this.vertices=A,this.adjacent=b,this.boundary=w,this.lastVisited=-1}u.prototype.flip=function(){var A=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=A;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};function f(A,b,w){this.vertices=A,this.cell=b,this.index=w}function c(A,b){return l(A.vertices,b.vertices)}function h(A){return function(){var b=this.tuple;return A.apply(this,b)}}function v(A){var b=s[A+1];return b||(b=s),h(b)}var p=[];function _(A,b,w){this.dimension=A,this.vertices=b,this.simplices=w,this.interior=w.filter(function(E){return!E.boundary}),this.tuple=new Array(A+1);for(var k=0;k<=A;++k)this.tuple[k]=this.vertices[k];var x=p[A];x||(x=p[A]=v(A)),this.orient=x}var T=_.prototype;T.handleBoundaryDegeneracy=function(A,b){var w=this.dimension,k=this.vertices.length-1,x=this.tuple,E=this.vertices,M=[A];for(A.lastVisited=-k;M.length>0;){A=M.pop();for(var d=A.adjacent,C=0;C<=w;++C){var S=d[C];if(!(!S.boundary||S.lastVisited<=-k)){for(var P=S.vertices,D=0;D<=w;++D){var z=P[D];z<0?x[D]=b:x[D]=E[z]}var O=this.orient();if(O>0)return S;S.lastVisited=-k,O===0&&M.push(S)}}}return null},T.walk=function(A,b){var w=this.vertices.length-1,k=this.dimension,x=this.vertices,E=this.tuple,M=b?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[M];e:for(;!d.boundary;){for(var C=d.vertices,S=d.adjacent,P=0;P<=k;++P)E[P]=x[C[P]];d.lastVisited=w;for(var P=0;P<=k;++P){var D=S[P];if(!(D.lastVisited>=w)){var z=E[P];E[P]=A;var O=this.orient();if(E[P]=z,O<0){d=D;continue e}else D.boundary?D.lastVisited=-w:D.lastVisited=w}}return}return d},T.addPeaks=function(A,b){var w=this.vertices.length-1,k=this.dimension,x=this.vertices,E=this.tuple,M=this.interior,d=this.simplices,C=[b];b.lastVisited=w,b.vertices[b.vertices.indexOf(-1)]=w,b.boundary=!1,M.push(b);for(var S=[];C.length>0;){var b=C.pop(),P=b.vertices,D=b.adjacent,z=P.indexOf(w);if(!(z<0)){for(var O=0;O<=k;++O)if(O!==z){var V=D[O];if(!(!V.boundary||V.lastVisited>=w)){var B=V.vertices;if(V.lastVisited!==-w){for(var F=0,N=0;N<=k;++N)B[N]<0?(F=N,E[N]=A):E[N]=x[B[N]];var Z=this.orient();if(Z>0){B[F]=w,V.boundary=!1,M.push(V),C.push(V),V.lastVisited=w;continue}else V.lastVisited=-w}var J=V.adjacent,re=P.slice(),le=D.slice(),fe=new u(re,le,!0);d.push(fe);var K=J.indexOf(b);if(!(K<0)){J[K]=fe,le[z]=V,re[O]=-1,le[O]=b,D[O]=fe,fe.flip();for(var N=0;N<=k;++N){var X=re[N];if(!(X<0||X===w)){for(var ae=new Array(k-1),oe=0,_e=0;_e<=k;++_e){var be=re[_e];be<0||_e===N||(ae[oe++]=be)}S.push(new f(ae,fe,N))}}}}}}}S.sort(c);for(var O=0;O+1<S.length;O+=2){var he=S[O],ie=S[O+1],ye=he.index,ue=ie.index;ye<0||ue<0||(he.cell.adjacent[he.index]=ie.cell,ie.cell.adjacent[ie.index]=he.cell)}},T.insert=function(A,b){var w=this.vertices;w.push(A);var k=this.walk(A,b);if(k){for(var x=this.dimension,E=this.tuple,M=0;M<=x;++M){var d=k.vertices[M];d<0?E[M]=A:E[M]=w[d]}var C=this.orient(E);C<0||C===0&&(k=this.handleBoundaryDegeneracy(k,A),!k)||this.addPeaks(A,k)}},T.boundary=function(){for(var A=this.dimension,b=[],w=this.simplices,k=w.length,x=0;x<k;++x){var E=w[x];if(E.boundary){for(var M=new Array(A),d=E.vertices,C=0,S=0,P=0;P<=A;++P)d[P]>=0?M[C++]=d[P]:S=P&1;if(S===(A&1)){var D=M[0];M[0]=M[1],M[1]=D}b.push(M)}}return b};function g(A,b){var w=A.length;if(w===0)throw new Error("Must have at least d+1 points");var k=A[0].length;if(w<=k)throw new Error("Must input at least d+1 points");var x=A.slice(0,k+1),E=s.apply(void 0,x);if(E===0)throw new Error("Input not in general position");for(var M=new Array(k+1),d=0;d<=k;++d)M[d]=d;E<0&&(M[0]=1,M[1]=0);for(var C=new u(M,new Array(k+1),!1),S=C.adjacent,P=new Array(k+2),d=0;d<=k;++d){for(var D=M.slice(),z=0;z<=k;++z)z===d&&(D[z]=-1);var O=D[0];D[0]=D[1],D[1]=O;var V=new u(D,new Array(k+1),!0);S[d]=V,P[d]=V}P[k+1]=C;for(var d=0;d<=k;++d)for(var D=S[d].vertices,B=S[d].adjacent,z=0;z<=k;++z){var F=D[z];if(F<0){B[z]=C;continue}for(var N=0;N<=k;++N)S[N].vertices.indexOf(F)<0&&(B[z]=S[N])}for(var Z=new _(k,x,P),J=!!b,d=k+1;d<w;++d)Z.insert(A[d],J);return Z.boundary()}},9014:function(n,a,o){"use strict";var s=o(5070),l=0,u=1,f=2;n.exports=C;function c(S,P,D,z,O){this.mid=S,this.left=P,this.right=D,this.leftPoints=z,this.rightPoints=O,this.count=(P?P.count:0)+(D?D.count:0)+z.length}var h=c.prototype;function v(S,P){S.mid=P.mid,S.left=P.left,S.right=P.right,S.leftPoints=P.leftPoints,S.rightPoints=P.rightPoints,S.count=P.count}function p(S,P){var D=E(P);S.mid=D.mid,S.left=D.left,S.right=D.right,S.leftPoints=D.leftPoints,S.rightPoints=D.rightPoints,S.count=D.count}function _(S,P){var D=S.intervals([]);D.push(P),p(S,D)}function T(S,P){var D=S.intervals([]),z=D.indexOf(P);return z<0?l:(D.splice(z,1),p(S,D),u)}h.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},h.insert=function(S){var P=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(P+1)?_(this,S):this.left.insert(S):this.left=E([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(P+1)?_(this,S):this.right.insert(S):this.right=E([S]);else{var D=s.ge(this.leftPoints,S,k),z=s.ge(this.rightPoints,S,x);this.leftPoints.splice(D,0,S),this.rightPoints.splice(z,0,S)}},h.remove=function(S){var P=this.count-this.leftPoints;if(S[1]<this.mid){if(!this.left)return l;var D=this.right?this.right.count:0;if(4*D>3*(P-1))return T(this,S);var z=this.left.remove(S);return z===f?(this.left=null,this.count-=1,u):(z===u&&(this.count-=1),z)}else if(S[0]>this.mid){if(!this.right)return l;var O=this.left?this.left.count:0;if(4*O>3*(P-1))return T(this,S);var z=this.right.remove(S);return z===f?(this.right=null,this.count-=1,u):(z===u&&(this.count-=1),z)}else{if(this.count===1)return this.leftPoints[0]===S?f:l;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var V=this,B=this.left;B.right;)V=B,B=B.right;if(V===this)B.right=this.right;else{var F=this.left,z=this.right;V.count-=B.count,V.right=B.left,B.left=F,B.right=z}v(this,B),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?v(this,this.left):v(this,this.right);return u}for(var F=s.ge(this.leftPoints,S,k);F<this.leftPoints.length&&this.leftPoints[F][0]===S[0];++F)if(this.leftPoints[F]===S){this.count-=1,this.leftPoints.splice(F,1);for(var z=s.ge(this.rightPoints,S,x);z<this.rightPoints.length&&this.rightPoints[z][1]===S[1];++z)if(this.rightPoints[z]===S)return this.rightPoints.splice(z,1),u}return l}};function g(S,P,D){for(var z=0;z<S.length&&S[z][0]<=P;++z){var O=D(S[z]);if(O)return O}}function A(S,P,D){for(var z=S.length-1;z>=0&&S[z][1]>=P;--z){var O=D(S[z]);if(O)return O}}function b(S,P){for(var D=0;D<S.length;++D){var z=P(S[D]);if(z)return z}}h.queryPoint=function(S,P){if(S<this.mid){if(this.left){var D=this.left.queryPoint(S,P);if(D)return D}return g(this.leftPoints,S,P)}else if(S>this.mid){if(this.right){var D=this.right.queryPoint(S,P);if(D)return D}return A(this.rightPoints,S,P)}else return b(this.leftPoints,P)},h.queryInterval=function(S,P,D){if(S<this.mid&&this.left){var z=this.left.queryInterval(S,P,D);if(z)return z}if(P>this.mid&&this.right){var z=this.right.queryInterval(S,P,D);if(z)return z}return P<this.mid?g(this.leftPoints,P,D):S>this.mid?A(this.rightPoints,S,D):b(this.leftPoints,D)};function w(S,P){return S-P}function k(S,P){var D=S[0]-P[0];return D||S[1]-P[1]}function x(S,P){var D=S[1]-P[1];return D||S[0]-P[0]}function E(S){if(S.length===0)return null;for(var P=[],D=0;D<S.length;++D)P.push(S[D][0],S[D][1]);P.sort(w);for(var z=P[P.length>>1],O=[],V=[],B=[],D=0;D<S.length;++D){var F=S[D];F[1]<z?O.push(F):z<F[0]?V.push(F):B.push(F)}var N=B,Z=B.slice();return N.sort(k),Z.sort(x),new c(z,E(O),E(V),N,Z)}function M(S){this.root=S}var d=M.prototype;d.insert=function(S){this.root?this.root.insert(S):this.root=new c(S[0],null,null,[S],[S])},d.remove=function(S){if(this.root){var P=this.root.remove(S);return P===f&&(this.root=null),P!==l}return!1},d.queryPoint=function(S,P){if(this.root)return this.root.queryPoint(S,P)},d.queryInterval=function(S,P,D){if(S<=P&&this.root)return this.root.queryInterval(S,P,D)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function C(S){return!S||S.length===0?new M(null):new M(E(S))}},9560:function(n){"use strict";function a(o){for(var s=new Array(o),l=0;l<o;++l)s[l]=l;return s}n.exports=a},4846:function(n){n.exports=!0},4780:function(n){n.exports=function(s){return s!=null&&(a(s)||o(s)||!!s._isBuffer)};function a(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function o(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&a(s.slice(0,0))}},3596:function(n){"use strict";n.exports=function(a){for(var o=a.length,s,l=0;l<o;l++)if(s=a.charCodeAt(l),(s<9||s>13)&&s!==32&&s!==133&&s!==160&&s!==5760&&s!==6158&&(s<8192||s>8205)&&s!==8232&&s!==8233&&s!==8239&&s!==8287&&s!==8288&&s!==12288&&s!==65279)return!1;return!0}},3578:function(n){function a(o,s,l){return o*(1-l)+s*l}n.exports=a},7191:function(n,a,o){var s=o(4690),l=o(9823),u=o(7332),f=o(7787),c=o(7437),h=o(2142),v={length:o(4693),normalize:o(899),dot:o(9305),cross:o(903)},p=l(),_=l(),T=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],A=[0,0,0];n.exports=function(E,M,d,C,S,P){if(M||(M=[0,0,0]),d||(d=[0,0,0]),C||(C=[0,0,0]),S||(S=[0,0,0,1]),P||(P=[0,0,0,1]),!s(p,E)||(u(_,p),_[3]=0,_[7]=0,_[11]=0,_[15]=1,Math.abs(f(_)<1e-8)))return!1;var D=p[3],z=p[7],O=p[11],V=p[12],B=p[13],F=p[14],N=p[15];if(D!==0||z!==0||O!==0){T[0]=D,T[1]=z,T[2]=O,T[3]=N;var Z=c(_,_);if(!Z)return!1;h(_,_),b(S,T,_)}else S[0]=S[1]=S[2]=0,S[3]=1;if(M[0]=V,M[1]=B,M[2]=F,w(g,p),d[0]=v.length(g[0]),v.normalize(g[0],g[0]),C[0]=v.dot(g[0],g[1]),k(g[1],g[1],g[0],1,-C[0]),d[1]=v.length(g[1]),v.normalize(g[1],g[1]),C[0]/=d[1],C[1]=v.dot(g[0],g[2]),k(g[2],g[2],g[0],1,-C[1]),C[2]=v.dot(g[1],g[2]),k(g[2],g[2],g[1],1,-C[2]),d[2]=v.length(g[2]),v.normalize(g[2],g[2]),C[1]/=d[2],C[2]/=d[2],v.cross(A,g[1],g[2]),v.dot(g[0],A)<0)for(var J=0;J<3;J++)d[J]*=-1,g[J][0]*=-1,g[J][1]*=-1,g[J][2]*=-1;return P[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),P[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),P[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),P[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(P[0]=-P[0]),g[0][2]>g[2][0]&&(P[1]=-P[1]),g[1][0]>g[0][1]&&(P[2]=-P[2]),!0};function b(x,E,M){var d=E[0],C=E[1],S=E[2],P=E[3];return x[0]=M[0]*d+M[4]*C+M[8]*S+M[12]*P,x[1]=M[1]*d+M[5]*C+M[9]*S+M[13]*P,x[2]=M[2]*d+M[6]*C+M[10]*S+M[14]*P,x[3]=M[3]*d+M[7]*C+M[11]*S+M[15]*P,x}function w(x,E){x[0][0]=E[0],x[0][1]=E[1],x[0][2]=E[2],x[1][0]=E[4],x[1][1]=E[5],x[1][2]=E[6],x[2][0]=E[8],x[2][1]=E[9],x[2][2]=E[10]}function k(x,E,M,d,C){x[0]=E[0]*d+M[0]*C,x[1]=E[1]*d+M[1]*C,x[2]=E[2]*d+M[2]*C}},4690:function(n){n.exports=function(o,s){var l=s[15];if(l===0)return!1;for(var u=1/l,f=0;f<16;f++)o[f]=s[f]*u;return!0}},7649:function(n,a,o){var s=o(1868),l=o(1102),u=o(7191),f=o(7787),c=o(1116),h=T(),v=T(),p=T();n.exports=_;function _(b,w,k,x){if(f(w)===0||f(k)===0)return!1;var E=u(w,h.translate,h.scale,h.skew,h.perspective,h.quaternion),M=u(k,v.translate,v.scale,v.skew,v.perspective,v.quaternion);return!E||!M?!1:(s(p.translate,h.translate,v.translate,x),s(p.skew,h.skew,v.skew,x),s(p.scale,h.scale,v.scale,x),s(p.perspective,h.perspective,v.perspective,x),c(p.quaternion,h.quaternion,v.quaternion,x),l(b,p.translate,p.scale,p.skew,p.perspective,p.quaternion),!0)}function T(){return{translate:g(),scale:g(1),skew:g(),perspective:A(),quaternion:A()}}function g(b){return[b||0,b||0,b||0]}function A(){return[0,0,0,1]}},1102:function(n,a,o){var s={identity:o(9947),translate:o(998),multiply:o(104),create:o(9823),scale:o(3668),fromRotationTranslation:o(7280)},l=s.create(),u=s.create();n.exports=function(c,h,v,p,_,T){return s.identity(c),s.fromRotationTranslation(c,T,h),c[3]=_[0],c[7]=_[1],c[11]=_[2],c[15]=_[3],s.identity(u),p[2]!==0&&(u[9]=p[2],s.multiply(c,c,u)),p[1]!==0&&(u[9]=0,u[8]=p[1],s.multiply(c,c,u)),p[0]!==0&&(u[8]=0,u[4]=p[0],s.multiply(c,c,u)),s.scale(c,c,v),c}},9298:function(n,a,o){"use strict";var s=o(5070),l=o(7649),u=o(7437),f=o(6109),c=o(7115),h=o(5240),v=o(3012),p=o(998),_=o(3668),T=o(899),g=[0,0,0];n.exports=k;function A(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var b=A.prototype;b.recalcMatrix=function(x){var E=this._time,M=s.le(E,x),d=this.computedMatrix;if(!(M<0)){var C=this._components;if(M===E.length-1)for(var S=16*M,P=0;P<16;++P)d[P]=C[S++];else{for(var D=E[M+1]-E[M],S=16*M,z=this.prevMatrix,O=!0,P=0;P<16;++P)z[P]=C[S++];for(var V=this.nextMatrix,P=0;P<16;++P)V[P]=C[S++],O=O&&z[P]===V[P];if(D<1e-6||O)for(var P=0;P<16;++P)d[P]=z[P];else l(d,z,V,(x-E[M])/D)}var B=this.computedUp;B[0]=d[1],B[1]=d[5],B[2]=d[9],T(B,B);var F=this.computedInverse;u(F,d);var N=this.computedEye,Z=F[15];N[0]=F[12]/Z,N[1]=F[13]/Z,N[2]=F[14]/Z;for(var J=this.computedCenter,re=Math.exp(this.computedRadius[0]),P=0;P<3;++P)J[P]=N[P]-d[2+4*P]*re}},b.idle=function(x){if(!(x<this.lastT())){for(var E=this._components,M=E.length-16,d=0;d<16;++d)E.push(E[M++]);this._time.push(x)}},b.flush=function(x){var E=s.gt(this._time,x)-2;E<0||(this._time.splice(0,E),this._components.splice(0,16*E))},b.lastT=function(){return this._time[this._time.length-1]},b.lookAt=function(x,E,M,d){this.recalcMatrix(x),E=E||this.computedEye,M=M||g,d=d||this.computedUp,this.setMatrix(x,v(this.computedMatrix,E,M,d));for(var C=0,S=0;S<3;++S)C+=Math.pow(M[S]-E[S],2);C=Math.log(Math.sqrt(C)),this.computedRadius[0]=C},b.rotate=function(x,E,M,d){this.recalcMatrix(x);var C=this.computedInverse;E&&c(C,C,E),M&&f(C,C,M),d&&h(C,C,d),this.setMatrix(x,u(this.computedMatrix,C))};var w=[0,0,0];b.pan=function(x,E,M,d){w[0]=-(E||0),w[1]=-(M||0),w[2]=-(d||0),this.recalcMatrix(x);var C=this.computedInverse;p(C,C,w),this.setMatrix(x,u(C,C))},b.translate=function(x,E,M,d){w[0]=E||0,w[1]=M||0,w[2]=d||0,this.recalcMatrix(x);var C=this.computedMatrix;p(C,C,w),this.setMatrix(x,C)},b.setMatrix=function(x,E){if(!(x<this.lastT())){this._time.push(x);for(var M=0;M<16;++M)this._components.push(E[M])}},b.setDistance=function(x,E){this.computedRadius[0]=E},b.setDistanceLimits=function(x,E){var M=this._limits;M[0]=x,M[1]=E},b.getDistanceLimits=function(x){var E=this._limits;return x?(x[0]=E[0],x[1]=E[1],x):E};function k(x){x=x||{};var E=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new A(E)}},3266:function(n,a,o){"use strict";n.exports=l;var s=o(417)[3];function l(u){var f=u.length;if(f<3){for(var A=new Array(f),c=0;c<f;++c)A[c]=c;return f===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:A}for(var h=new Array(f),c=0;c<f;++c)h[c]=c;h.sort(function(x,E){var M=u[x][0]-u[E][0];return M||u[x][1]-u[E][1]});for(var v=[h[0],h[1]],p=[h[0],h[1]],c=2;c<f;++c){for(var _=h[c],T=u[_],g=v.length;g>1&&s(u[v[g-2]],u[v[g-1]],T)<=0;)g-=1,v.pop();for(v.push(_),g=p.length;g>1&&s(u[p[g-2]],u[p[g-1]],T)>=0;)g-=1,p.pop();p.push(_)}for(var A=new Array(p.length+v.length-2),b=0,c=0,w=v.length;c<w;++c)A[b++]=v[c];for(var k=p.length-2;k>0;--k)A[b++]=p[k];return A}},6145:function(n,a,o){"use strict";n.exports=l;var s=o(4110);function l(u,f){f||(f=u,u=window);var c=0,h=0,v=0,p={shift:!1,alt:!1,control:!1,meta:!1},_=!1;function T(S){var P=!1;return"altKey"in S&&(P=P||S.altKey!==p.alt,p.alt=!!S.altKey),"shiftKey"in S&&(P=P||S.shiftKey!==p.shift,p.shift=!!S.shiftKey),"ctrlKey"in S&&(P=P||S.ctrlKey!==p.control,p.control=!!S.ctrlKey),"metaKey"in S&&(P=P||S.metaKey!==p.meta,p.meta=!!S.metaKey),P}function g(S,P){var D=s.x(P),z=s.y(P);"buttons"in P&&(S=P.buttons|0),(S!==c||D!==h||z!==v||T(P))&&(c=S|0,h=D||0,v=z||0,f&&f(c,h,v,p))}function A(S){g(0,S)}function b(){(c||h||v||p.shift||p.alt||p.meta||p.control)&&(h=v=0,c=0,p.shift=p.alt=p.control=p.meta=!1,f&&f(0,0,0,p))}function w(S){T(S)&&f&&f(c,h,v,p)}function k(S){s.buttons(S)===0?g(0,S):g(c,S)}function x(S){g(c|s.buttons(S),S)}function E(S){g(c&~s.buttons(S),S)}function M(){_||(_=!0,u.addEventListener("mousemove",k),u.addEventListener("mousedown",x),u.addEventListener("mouseup",E),u.addEventListener("mouseleave",A),u.addEventListener("mouseenter",A),u.addEventListener("mouseout",A),u.addEventListener("mouseover",A),u.addEventListener("blur",b),u.addEventListener("keyup",w),u.addEventListener("keydown",w),u.addEventListener("keypress",w),u!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",w),window.addEventListener("keydown",w),window.addEventListener("keypress",w)))}function d(){_&&(_=!1,u.removeEventListener("mousemove",k),u.removeEventListener("mousedown",x),u.removeEventListener("mouseup",E),u.removeEventListener("mouseleave",A),u.removeEventListener("mouseenter",A),u.removeEventListener("mouseout",A),u.removeEventListener("mouseover",A),u.removeEventListener("blur",b),u.removeEventListener("keyup",w),u.removeEventListener("keydown",w),u.removeEventListener("keypress",w),u!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",w),window.removeEventListener("keydown",w),window.removeEventListener("keypress",w)))}M();var C={element:u};return Object.defineProperties(C,{enabled:{get:function(){return _},set:function(S){S?M():d()},enumerable:!0},buttons:{get:function(){return c},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),C}},2565:function(n){var a={left:0,top:0};n.exports=o;function o(l,u,f){u=u||l.currentTarget||l.srcElement,Array.isArray(f)||(f=[0,0]);var c=l.clientX||0,h=l.clientY||0,v=s(u);return f[0]=c-v.left,f[1]=h-v.top,f}function s(l){return l===window||l===document||l===document.body?a:l.getBoundingClientRect()}},4110:function(n,a){"use strict";function o(f){if(typeof f=="object"){if("buttons"in f)return f.buttons;if("which"in f){var c=f.which;if(c===2)return 4;if(c===3)return 2;if(c>0)return 1<<c-1}else if("button"in f){var c=f.button;if(c===1)return 4;if(c===2)return 2;if(c>=0)return 1<<c}}return 0}a.buttons=o;function s(f){return f.target||f.srcElement||window}a.element=s;function l(f){if(typeof f=="object"){if("offsetX"in f)return f.offsetX;var c=s(f),h=c.getBoundingClientRect();return f.clientX-h.left}return 0}a.x=l;function u(f){if(typeof f=="object"){if("offsetY"in f)return f.offsetY;var c=s(f),h=c.getBoundingClientRect();return f.clientY-h.top}return 0}a.y=u},6475:function(n,a,o){"use strict";var s=o(14);n.exports=l;function l(u,f,c){typeof u=="function"&&(c=!!f,f=u,u=window);var h=s("ex",u),v=function(p){c&&p.preventDefault();var _=p.deltaX||0,T=p.deltaY||0,g=p.deltaZ||0,A=p.deltaMode,b=1;switch(A){case 1:b=h;break;case 2:b=window.innerHeight;break}if(_*=b,T*=b,g*=b,_||T||g)return f(_,T,g,p)};return u.addEventListener("wheel",v),v}},9284:function(n,a,o){"use strict";var s=o(5306);n.exports=f;var l={"false,0,1":function(h,v,p,_,T){return function(A,b,w,k){var x=A.shape[0]|0,E=A.shape[1]|0,M=A.data,d=A.offset|0,C=A.stride[0]|0,S=A.stride[1]|0,P=d,D,z=-C|0,O=0,V=-S|0,B=0,F=-C-S|0,N=0,Z=C|0,J=S-C*x|0,re=0,le=0,fe=0,K=2*x|0,X=_(K),ae=_(K),oe=0,_e=0,be=-1,he=-1,ie=0,ye=-x|0,ue=x|0,Ae=0,Re=-x-1|0,ze=x-1|0,et=0,Le=0,Ie=0;for(re=0;re<x;++re)X[oe++]=p(M[P],b,w,k),P+=Z;if(P+=J,E>0){if(le=1,X[oe++]=p(M[P],b,w,k),P+=Z,x>0)for(re=1,D=M[P],_e=X[oe]=p(D,b,w,k),ie=X[oe+be],Ae=X[oe+ye],et=X[oe+Re],(_e!==ie||_e!==Ae||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,ie,Ae,et,b,w,k),Le=ae[oe]=fe++),oe+=1,P+=Z,re=2;re<x;++re)D=M[P],_e=X[oe]=p(D,b,w,k),ie=X[oe+be],Ae=X[oe+ye],et=X[oe+Re],(_e!==ie||_e!==Ae||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,ie,Ae,et,b,w,k),Le=ae[oe]=fe++,et!==ie&&v(ae[oe+be],Le,N,O,et,ie,b,w,k)),oe+=1,P+=Z;for(P+=J,oe=0,Ie=be,be=he,he=Ie,Ie=ye,ye=ue,ue=Ie,Ie=Re,Re=ze,ze=Ie,le=2;le<E;++le){if(X[oe++]=p(M[P],b,w,k),P+=Z,x>0)for(re=1,D=M[P],_e=X[oe]=p(D,b,w,k),ie=X[oe+be],Ae=X[oe+ye],et=X[oe+Re],(_e!==ie||_e!==Ae||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,ie,Ae,et,b,w,k),Le=ae[oe]=fe++,et!==Ae&&v(ae[oe+ye],Le,B,N,Ae,et,b,w,k)),oe+=1,P+=Z,re=2;re<x;++re)D=M[P],_e=X[oe]=p(D,b,w,k),ie=X[oe+be],Ae=X[oe+ye],et=X[oe+Re],(_e!==ie||_e!==Ae||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,ie,Ae,et,b,w,k),Le=ae[oe]=fe++,et!==Ae&&v(ae[oe+ye],Le,B,N,Ae,et,b,w,k),et!==ie&&v(ae[oe+be],Le,N,O,et,ie,b,w,k)),oe+=1,P+=Z;le&1&&(oe=0),Ie=be,be=he,he=Ie,Ie=ye,ye=ue,ue=Ie,Ie=Re,Re=ze,ze=Ie,P+=J}}T(ae),T(X)}},"false,1,0":function(h,v,p,_,T){return function(A,b,w,k){var x=A.shape[0]|0,E=A.shape[1]|0,M=A.data,d=A.offset|0,C=A.stride[0]|0,S=A.stride[1]|0,P=d,D,z=-C|0,O=0,V=-S|0,B=0,F=-C-S|0,N=0,Z=S|0,J=C-S*E|0,re=0,le=0,fe=0,K=2*E|0,X=_(K),ae=_(K),oe=0,_e=0,be=-1,he=-1,ie=0,ye=-E|0,ue=E|0,Ae=0,Re=-E-1|0,ze=E-1|0,et=0,Le=0,Ie=0;for(le=0;le<E;++le)X[oe++]=p(M[P],b,w,k),P+=Z;if(P+=J,x>0){if(re=1,X[oe++]=p(M[P],b,w,k),P+=Z,E>0)for(le=1,D=M[P],_e=X[oe]=p(D,b,w,k),Ae=X[oe+ye],ie=X[oe+be],et=X[oe+Re],(_e!==Ae||_e!==ie||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,Ae,ie,et,b,w,k),Le=ae[oe]=fe++),oe+=1,P+=Z,le=2;le<E;++le)D=M[P],_e=X[oe]=p(D,b,w,k),Ae=X[oe+ye],ie=X[oe+be],et=X[oe+Re],(_e!==Ae||_e!==ie||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,Ae,ie,et,b,w,k),Le=ae[oe]=fe++,et!==ie&&v(ae[oe+be],Le,B,N,ie,et,b,w,k)),oe+=1,P+=Z;for(P+=J,oe=0,Ie=ye,ye=ue,ue=Ie,Ie=be,be=he,he=Ie,Ie=Re,Re=ze,ze=Ie,re=2;re<x;++re){if(X[oe++]=p(M[P],b,w,k),P+=Z,E>0)for(le=1,D=M[P],_e=X[oe]=p(D,b,w,k),Ae=X[oe+ye],ie=X[oe+be],et=X[oe+Re],(_e!==Ae||_e!==ie||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,Ae,ie,et,b,w,k),Le=ae[oe]=fe++,et!==Ae&&v(ae[oe+ye],Le,N,O,et,Ae,b,w,k)),oe+=1,P+=Z,le=2;le<E;++le)D=M[P],_e=X[oe]=p(D,b,w,k),Ae=X[oe+ye],ie=X[oe+be],et=X[oe+Re],(_e!==Ae||_e!==ie||_e!==et)&&(O=M[P+z],B=M[P+V],N=M[P+F],h(re,le,D,O,B,N,_e,Ae,ie,et,b,w,k),Le=ae[oe]=fe++,et!==ie&&v(ae[oe+be],Le,B,N,ie,et,b,w,k),et!==Ae&&v(ae[oe+ye],Le,N,O,et,Ae,b,w,k)),oe+=1,P+=Z;re&1&&(oe=0),Ie=ye,ye=ue,ue=Ie,Ie=be,be=he,he=Ie,Ie=Re,Re=ze,ze=Ie,P+=J}}T(ae),T(X)}}};function u(c,h,v,p,_,T){var g=[T,_].join(","),A=l[g];return A(c,h,v,s.mallocUint32,s.freeUint32)}function f(c){function h(b){throw new Error("ndarray-extract-contour: "+b)}typeof c!="object"&&h("Must specify arguments");var v=c.order;Array.isArray(v)||h("Must specify order");var p=c.arrayArguments||1;p<1&&h("Must have at least one array argument");var _=c.scalarArguments||0;_<0&&h("Scalar arg count must be > 0"),typeof c.vertex!="function"&&h("Must specify vertex creation function"),typeof c.cell!="function"&&h("Must specify cell creation function"),typeof c.phase!="function"&&h("Must specify phase function");for(var T=c.getters||[],g=new Array(p),A=0;A<p;++A)T.indexOf(A)>=0?g[A]=!0:g[A]=!1;return u(c.vertex,c.cell,c.phase,_,v,g)}},9144:function(n,a,o){"use strict";var s=o(3094),l={zero:function(k,x,E,M){var d=k[0],C=E[0];M|=0;var S=0,P=C;for(S=0;S<d;++S)x[M]=0,M+=P},fdTemplate1:function(k,x,E,M,d,C,S){var P=k[0],D=E[0],z=C[0],O=-1*D,V=D;M|=0,S|=0;var B=0,F=D,N=z;for(B=0;B<P;++B)d[S]=.5*(x[M+O]-x[M+V]),M+=F,S+=N},fdTemplate2:function(k,x,E,M,d,C,S,P,D,z){var O=k[0],V=k[1],B=E[0],F=E[1],N=C[0],Z=C[1],J=D[0],re=D[1],le=-1*B,fe=B,K=-1*F,X=F;M|=0,S|=0,z|=0;var ae=0,oe=0,_e=F,be=B-V*F,he=Z,ie=N-V*Z,ye=re,ue=J-V*re;for(oe=0;oe<O;++oe){for(ae=0;ae<V;++ae)d[S]=.5*(x[M+le]-x[M+fe]),P[z]=.5*(x[M+K]-x[M+X]),M+=_e,S+=he,z+=ye;M+=be,S+=ie,z+=ue}}},u={cdiff:function(k){var x={};return function(M,d,C){var S=M.dtype,P=M.order,D=d.dtype,z=d.order,O=C.dtype,V=C.order,B=[S,P.join(),D,z.join(),O,V.join()].join(),F=x[B];return F||(x[B]=F=k([S,P,D,z,O,V])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,d.data,d.stride,d.offset|0,C.data,C.stride,C.offset|0)}},zero:function(k){var x={};return function(M){var d=M.dtype,C=M.order,S=[d,C.join()].join(),P=x[S];return P||(x[S]=P=k([d,C])),P(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(k){var x={};return function(M,d){var C=M.dtype,S=M.order,P=d.dtype,D=d.order,z=[C,S.join(),P,D.join()].join(),O=x[z];return O||(x[z]=O=k([C,S,P,D])),O(M.shape.slice(0),M.data,M.stride,M.offset|0,d.data,d.stride,d.offset|0)}},fdTemplate2:function(k){var x={};return function(M,d,C){var S=M.dtype,P=M.order,D=d.dtype,z=d.order,O=C.dtype,V=C.order,B=[S,P.join(),D,z.join(),O,V.join()].join(),F=x[B];return F||(x[B]=F=k([S,P,D,z,O,V])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,d.data,d.stride,d.offset|0,C.data,C.stride,C.offset|0)}}};function f(k){var x=u[k.funcName];return x(c.bind(void 0,k))}function c(k){return l[k.funcName]}function h(k){return f({funcName:k.funcName})}var v={},p={},_={body:"",args:[],thisVars:[],localVars:[]},T=h({funcName:"cdiff"}),g=h({funcName:"zero"});function A(k){return k in v?v[k]:v[k]=h({funcName:"fdTemplate"+k})}function b(k,x,E,M){return function(d,C){var S=C.shape.slice();return S[0]>2&&S[1]>2&&M(C.pick(-1,-1).lo(1,1).hi(S[0]-2,S[1]-2),d.pick(-1,-1,0).lo(1,1).hi(S[0]-2,S[1]-2),d.pick(-1,-1,1).lo(1,1).hi(S[0]-2,S[1]-2)),S[1]>2&&(E(C.pick(0,-1).lo(1).hi(S[1]-2),d.pick(0,-1,1).lo(1).hi(S[1]-2)),x(d.pick(0,-1,0).lo(1).hi(S[1]-2))),S[1]>2&&(E(C.pick(S[0]-1,-1).lo(1).hi(S[1]-2),d.pick(S[0]-1,-1,1).lo(1).hi(S[1]-2)),x(d.pick(S[0]-1,-1,0).lo(1).hi(S[1]-2))),S[0]>2&&(E(C.pick(-1,0).lo(1).hi(S[0]-2),d.pick(-1,0,0).lo(1).hi(S[0]-2)),x(d.pick(-1,0,1).lo(1).hi(S[0]-2))),S[0]>2&&(E(C.pick(-1,S[1]-1).lo(1).hi(S[0]-2),d.pick(-1,S[1]-1,0).lo(1).hi(S[0]-2)),x(d.pick(-1,S[1]-1,1).lo(1).hi(S[0]-2))),d.set(0,0,0,0),d.set(0,0,1,0),d.set(S[0]-1,0,0,0),d.set(S[0]-1,0,1,0),d.set(0,S[1]-1,0,0),d.set(0,S[1]-1,1,0),d.set(S[0]-1,S[1]-1,0,0),d.set(S[0]-1,S[1]-1,1,0),d}}function w(k){var x=k.join(),S=p[x];if(S)return S;for(var E=k.length,M=[T,g],d=1;d<=E;++d)M.push(A(d));var C=b,S=C.apply(void 0,M);return p[x]=S,S}n.exports=function(x,E,M){if(Array.isArray(M)||(typeof M=="string"?M=s(E.dimension,M):M=s(E.dimension,"clamp")),E.size===0)return x;if(E.dimension===0)return x.set(0),x;var d=w(M);return d(x,E)}},3581:function(n){"use strict";function a(f,c){var h=Math.floor(c),v=c-h,p=0<=h&&h<f.shape[0],_=0<=h+1&&h+1<f.shape[0],T=p?+f.get(h):0,g=_?+f.get(h+1):0;return(1-v)*T+v*g}function o(f,c,h){var v=Math.floor(c),p=c-v,_=0<=v&&v<f.shape[0],T=0<=v+1&&v+1<f.shape[0],g=Math.floor(h),A=h-g,b=0<=g&&g<f.shape[1],w=0<=g+1&&g+1<f.shape[1],k=_&&b?f.get(v,g):0,x=_&&w?f.get(v,g+1):0,E=T&&b?f.get(v+1,g):0,M=T&&w?f.get(v+1,g+1):0;return(1-A)*((1-p)*k+p*E)+A*((1-p)*x+p*M)}function s(f,c,h,v){var p=Math.floor(c),_=c-p,T=0<=p&&p<f.shape[0],g=0<=p+1&&p+1<f.shape[0],A=Math.floor(h),b=h-A,w=0<=A&&A<f.shape[1],k=0<=A+1&&A+1<f.shape[1],x=Math.floor(v),E=v-x,M=0<=x&&x<f.shape[2],d=0<=x+1&&x+1<f.shape[2],C=T&&w&&M?f.get(p,A,x):0,S=T&&k&&M?f.get(p,A+1,x):0,P=g&&w&&M?f.get(p+1,A,x):0,D=g&&k&&M?f.get(p+1,A+1,x):0,z=T&&w&&d?f.get(p,A,x+1):0,O=T&&k&&d?f.get(p,A+1,x+1):0,V=g&&w&&d?f.get(p+1,A,x+1):0,B=g&&k&&d?f.get(p+1,A+1,x+1):0;return(1-E)*((1-b)*((1-_)*C+_*P)+b*((1-_)*S+_*D))+E*((1-b)*((1-_)*z+_*V)+b*((1-_)*O+_*B))}function l(f){var c=f.shape.length|0,h=new Array(c),v=new Array(c),p=new Array(c),_=new Array(c),T,g;for(T=0;T<c;++T)g=+arguments[T+1],h[T]=Math.floor(g),v[T]=g-h[T],p[T]=0<=h[T]&&h[T]<f.shape[T],_[T]=0<=h[T]+1&&h[T]+1<f.shape[T];var A=0,b,w,k;e:for(T=0;T<1<<c;++T){for(w=1,k=f.offset,b=0;b<c;++b)if(T&1<<b){if(!_[b])continue e;w*=v[b],k+=f.stride[b]*(h[b]+1)}else{if(!p[b])continue e;w*=1-v[b],k+=f.stride[b]*h[b]}A+=w*f.data[k]}return A}function u(f,c,h,v){switch(f.shape.length){case 0:return 0;case 1:return a(f,c);case 2:return o(f,c,h);case 3:return s(f,c,h,v);default:return l.apply(void 0,arguments)}}n.exports=u,n.exports.d1=a,n.exports.d2=o,n.exports.d3=s},7498:function(n,a){"use strict";var o={"float64,2,1,0":function(){return function(p,_,T,g,A){var b=p[0],w=p[1],k=p[2],x=T[0],E=T[1],M=T[2];g|=0;var d=0,C=0,S=0,P=M,D=E-k*M,z=x-w*E;for(S=0;S<b;++S){for(C=0;C<w;++C){for(d=0;d<k;++d)_[g]/=A,g+=P;g+=D}g+=z}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,_,T,g,A,b,w,k){var x=p[0],E=p[1],M=p[2],d=T[0],C=T[1],S=T[2],P=b[0],D=b[1],z=b[2];g|=0,w|=0;for(var O=g,V=w,B=p[0]|0;B>0;){B<64?(x=B,B=0):(x=64,B-=64);for(var F=p[1]|0;F>0;){F<64?(E=F,F=0):(E=64,F-=64),g=O+B*d+F*C,w=V+B*P+F*D;var N=0,Z=0,J=0,re=S,le=d-M*S,fe=C-x*d,K=z,X=P-M*z,ae=D-x*P;for(J=0;J<E;++J){for(Z=0;Z<x;++Z){for(N=0;N<M;++N)_[g]=A[w]*k,g+=re,w+=K;g+=le,w+=X}g+=fe,w+=ae}}}}},"float32,1,0,float32,1,0":function(){return function(p,_,T,g,A,b,w){var k=p[0],x=p[1],E=T[0],M=T[1],d=b[0],C=b[1];g|=0,w|=0;var S=0,P=0,D=M,z=E-x*M,O=C,V=d-x*C;for(P=0;P<k;++P){for(S=0;S<x;++S)_[g]=A[w],g+=D,w+=O;g+=z,w+=V}}},"float32,1,0,float32,0,1":function(){return function(p,_,T,g,A,b,w){var k=p[0],x=p[1],E=T[0],M=T[1],d=b[0],C=b[1];g|=0,w|=0;for(var S=g,P=w,D=p[1]|0;D>0;){D<64?(x=D,D=0):(x=64,D-=64);for(var z=p[0]|0;z>0;){z<64?(k=z,z=0):(k=64,z-=64),g=S+D*M+z*E,w=P+D*C+z*d;var O=0,V=0,B=M,F=E-x*M,N=C,Z=d-x*C;for(V=0;V<k;++V){for(O=0;O<x;++O)_[g]=A[w],g+=B,w+=N;g+=F,w+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,_,T,g,A,b,w){var k=p[0],x=p[1],E=p[2],M=T[0],d=T[1],C=T[2],S=b[0],P=b[1],D=b[2];g|=0,w|=0;for(var z=g,O=w,V=p[2]|0;V>0;){V<64?(E=V,V=0):(E=64,V-=64);for(var B=p[0]|0;B>0;){B<64?(k=B,B=0):(k=64,B-=64);for(var F=p[1]|0;F>0;){F<64?(x=F,F=0):(x=64,F-=64),g=z+V*C+B*M+F*d,w=O+V*D+B*S+F*P;var N=0,Z=0,J=0,re=C,le=M-E*C,fe=d-k*M,K=D,X=S-E*D,ae=P-k*S;for(J=0;J<x;++J){for(Z=0;Z<k;++Z){for(N=0;N<E;++N)_[g]=A[w],g+=re,w+=K;g+=le,w+=X}g+=fe,w+=ae}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,_,T,g,A,b,w){var k=p[0],x=p[1],E=p[2],M=T[0],d=T[1],C=T[2],S=b[0],P=b[1],D=b[2];g|=0,w|=0;var z=0,O=0,V=0,B=C,F=M-E*C,N=d-k*M,Z=D,J=S-E*D,re=P-k*S;for(V=0;V<x;++V){for(O=0;O<k;++O){for(z=0;z<E;++z)_[g]=A[w],g+=B,w+=Z;g+=F,w+=J}g+=N,w+=re}}}};function s(v,p){var _=p.join(","),T=o[_];return T()}var l=s,u={mul:function(v){var p={};return function(T,g,A){var b=T.dtype,w=T.order,k=g.dtype,x=g.order,E=A.dtype,M=A.order,d=[b,w.join(),k,x.join(),E,M.join()].join(),C=p[d];return C||(p[d]=C=v([b,w,k,x,E,M])),C(T.shape.slice(0),T.data,T.stride,T.offset|0,g.data,g.stride,g.offset|0,A.data,A.stride,A.offset|0)}},muls:function(v){var p={};return function(T,g,A){var b=T.dtype,w=T.order,k=g.dtype,x=g.order,E=[b,w.join(),k,x.join()].join(),M=p[E];return M||(p[E]=M=v([b,w,k,x])),M(T.shape.slice(0),T.data,T.stride,T.offset|0,g.data,g.stride,g.offset|0,A)}},mulseq:function(v){var p={};return function(T,g){var A=T.dtype,b=T.order,w=[A,b.join()].join(),k=p[w];return k||(p[w]=k=v([A,b])),k(T.shape.slice(0),T.data,T.stride,T.offset|0,g)}},div:function(v){var p={};return function(T,g,A){var b=T.dtype,w=T.order,k=g.dtype,x=g.order,E=A.dtype,M=A.order,d=[b,w.join(),k,x.join(),E,M.join()].join(),C=p[d];return C||(p[d]=C=v([b,w,k,x,E,M])),C(T.shape.slice(0),T.data,T.stride,T.offset|0,g.data,g.stride,g.offset|0,A.data,A.stride,A.offset|0)}},divs:function(v){var p={};return function(T,g,A){var b=T.dtype,w=T.order,k=g.dtype,x=g.order,E=[b,w.join(),k,x.join()].join(),M=p[E];return M||(p[E]=M=v([b,w,k,x])),M(T.shape.slice(0),T.data,T.stride,T.offset|0,g.data,g.stride,g.offset|0,A)}},divseq:function(v){var p={};return function(T,g){var A=T.dtype,b=T.order,w=[A,b.join()].join(),k=p[w];return k||(p[w]=k=v([A,b])),k(T.shape.slice(0),T.data,T.stride,T.offset|0,g)}},assign:function(v){var p={};return function(T,g){var A=T.dtype,b=T.order,w=g.dtype,k=g.order,x=[A,b.join(),w,k.join()].join(),E=p[x];return E||(p[x]=E=v([A,b,w,k])),E(T.shape.slice(0),T.data,T.stride,T.offset|0,g.data,g.stride,g.offset|0)}}};function f(v){var p=u[v.funcName];return p(l.bind(void 0,v))}function c(v){return f({funcName:v.funcName})}var h={mul:"*",div:"/"};(function(){for(var v in h)a[v]=c({funcName:v}),a[v+"s"]=c({funcName:v+"s"}),a[v+"seq"]=c({funcName:v+"seq"})})(),a.assign=c({funcName:"assign"})},7382:function(n,a,o){"use strict";var s=o(5050),l=o(9262);n.exports=function(f,c){for(var h=[],v=f,p=1;Array.isArray(v);)h.push(v.length),p*=v.length,v=v[0];return h.length===0?s():(c||(c=s(new Float64Array(p),h)),l(c,f),c)}},9262:function(n){"use strict";function a(){return function(c,h,v,p,_){var T=c[0],g=c[1],A=c[2],b=v[0],w=v[1],k=v[2],x=[0,0,0];p|=0;var E=0,M=0,d=0,C=k,S=w-A*k,P=b-g*w;for(d=0;d<T;++d){for(M=0;M<g;++M){for(E=0;E<A;++E){{var D=_,z;for(z=0;z<x.length-1;++z)D=D[x[z]];h[p]=D[x[x.length-1]]}p+=C,++x[2]}p+=S,x[2]-=A,++x[1]}p+=P,x[1]-=g,++x[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(p,_){var T=p.dtype,g=p.order,A=[T,g.join()].join(),b=h[A];return b||(h[A]=b=c([T,g])),b(p.shape.slice(0),p.data,p.stride,p.offset|0,_)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"convert"})},8139:function(n,a,o){"use strict";var s=o(5306);function l(_){switch(_){case"uint32":return[s.mallocUint32,s.freeUint32];default:return null}}var u={"uint32,1,0":function(_,T){return function(A,b,w,k,x,E,M,d,C,S,P){var D,z,O,V=A*x+k,B,F=_(d),N,Z,J,re;for(D=A+1;D<=b;++D){for(z=D,V+=x,O=V,N=0,Z=V,B=0;B<d;++B)F[N++]=w[Z],Z+=C;e:for(;z-- >A;){N=0,Z=O-x;t:for(B=0;B<d;++B){if(J=w[Z],re=F[N],J<re)break e;if(J>re)break t;Z+=S,N+=P}for(N=O,Z=O-x,B=0;B<d;++B)w[N]=w[Z],N+=C,Z+=C;O-=x}for(N=O,Z=0,B=0;B<d;++B)w[N]=F[Z++],N+=C}T(F)}}};function f(_,T){var g=l(T),A=[T,_].join(","),b=u[A];return g?b(g[0],g[1]):b()}var c={"uint32,1,0":function(_,T,g){return function A(b,w,k,x,E,M,d,C,S,P,D){var z=(w-b+1)/6|0,O=b+z,V=w-z,B=b+w>>1,F=B-z,N=B+z,Z=O,J=F,re=B,le=N,fe=V,K=b+1,X=w-1,ae=!0,oe,_e,be,he,ie,ye,ue,Ae,Re,ze=0,et=0,Le=0,Ie,dt,ct,Ke,_t,zt,Et,Se,je,ht,nt,lt,rt,Xe,ft,gt,Qt=C,Jt=T(Qt),fr=T(Qt);dt=E*Z,ct=E*J,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=Z,Z=J,J=_e;break e}if(Le<0)break e;gt+=P}dt=E*le,ct=E*fe,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=le,le=fe,fe=_e;break e}if(Le<0)break e;gt+=P}dt=E*Z,ct=E*re,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=Z,Z=re,re=_e;break e}if(Le<0)break e;gt+=P}dt=E*J,ct=E*re,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=J,J=re,re=_e;break e}if(Le<0)break e;gt+=P}dt=E*Z,ct=E*le,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=Z,Z=le,le=_e;break e}if(Le<0)break e;gt+=P}dt=E*re,ct=E*le,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=re,re=le,le=_e;break e}if(Le<0)break e;gt+=P}dt=E*J,ct=E*fe,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=J,J=fe,fe=_e;break e}if(Le<0)break e;gt+=P}dt=E*J,ct=E*re,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=J,J=re,re=_e;break e}if(Le<0)break e;gt+=P}dt=E*le,ct=E*fe,gt=x;e:for(Ie=0;Ie<C;++Ie){if(ue=dt+gt,Ae=ct+gt,Le=k[ue]-k[Ae],Le>0){_e=le,le=fe,fe=_e;break e}if(Le<0)break e;gt+=P}for(dt=E*Z,ct=E*J,Ke=E*re,_t=E*le,zt=E*fe,Et=E*O,Se=E*B,je=E*V,ft=0,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,Re=Ke+gt,ht=_t+gt,nt=zt+gt,lt=Et+gt,rt=Se+gt,Xe=je+gt,Jt[ft]=k[Ae],fr[ft]=k[ht],ae=ae&&Jt[ft]===fr[ft],be=k[ue],he=k[Re],ie=k[nt],k[lt]=be,k[rt]=he,k[Xe]=ie,++ft,gt+=S;for(dt=E*F,ct=E*b,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,k[ue]=k[Ae],gt+=S;for(dt=E*N,ct=E*w,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,k[ue]=k[Ae],gt+=S;if(ae)for(ye=K;ye<=X;++ye){ue=x+ye*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-Jt[ft],Le!==0)break e;ft+=D,ue+=P}if(Le!==0)if(Le<0){if(ye!==K)for(dt=E*ye,ct=E*K,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;++K}else for(;;){ue=x+X*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-Jt[ft],Le!==0)break e;ft+=D,ue+=P}if(Le>0)X--;else if(Le<0){for(dt=E*ye,ct=E*K,Ke=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,Re=Ke+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=k[Re],k[Re]=oe,gt+=S;++K,--X;break}else{for(dt=E*ye,ct=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;--X;break}}}else for(ye=K;ye<=X;++ye){ue=x+ye*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(ze=k[ue]-Jt[ft],ze!==0)break e;ft+=D,ue+=P}if(ze<0){if(ye!==K)for(dt=E*ye,ct=E*K,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;++K}else{ue=x+ye*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(et=k[ue]-fr[ft],et!==0)break e;ft+=D,ue+=P}if(et>0)for(;;){ue=x+X*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-fr[ft],Le!==0)break e;ft+=D,ue+=P}if(Le>0){if(--X<ye)break;continue}else{ue=x+X*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-Jt[ft],Le!==0)break e;ft+=D,ue+=P}if(Le<0){for(dt=E*ye,ct=E*K,Ke=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,Re=Ke+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=k[Re],k[Re]=oe,gt+=S;++K,--X}else{for(dt=E*ye,ct=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;--X}break}}}}for(dt=E*b,ct=E*(K-1),ft=0,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,k[ue]=k[Ae],k[Ae]=Jt[ft],++ft,gt+=S;for(dt=E*w,ct=E*(X+1),ft=0,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,k[ue]=k[Ae],k[Ae]=fr[ft],++ft,gt+=S;if(K-2-b<=32?_(b,K-2,k,x,E,M,d,C,S,P,D):A(b,K-2,k,x,E,M,d,C,S,P,D),w-(X+2)<=32?_(X+2,w,k,x,E,M,d,C,S,P,D):A(X+2,w,k,x,E,M,d,C,S,P,D),ae){g(Jt),g(fr);return}if(K<O&&X>V){e:for(;;){for(ue=x+K*E,ft=0,gt=x,Ie=0;Ie<C;++Ie){if(k[ue]!==Jt[ft])break e;++ft,ue+=S}++K}e:for(;;){for(ue=x+X*E,ft=0,gt=x,Ie=0;Ie<C;++Ie){if(k[ue]!==fr[ft])break e;++ft,ue+=S}--X}for(ye=K;ye<=X;++ye){ue=x+ye*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(ze=k[ue]-Jt[ft],ze!==0)break e;ft+=D,ue+=P}if(ze===0){if(ye!==K)for(dt=E*ye,ct=E*K,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;++K}else{ue=x+ye*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(et=k[ue]-fr[ft],et!==0)break e;ft+=D,ue+=P}if(et===0)for(;;){ue=x+X*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-fr[ft],Le!==0)break e;ft+=D,ue+=P}if(Le===0){if(--X<ye)break;continue}else{ue=x+X*E,ft=0;e:for(Ie=0;Ie<C;++Ie){if(Le=k[ue]-Jt[ft],Le!==0)break e;ft+=D,ue+=P}if(Le<0){for(dt=E*ye,ct=E*K,Ke=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,Re=Ke+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=k[Re],k[Re]=oe,gt+=S;++K,--X}else{for(dt=E*ye,ct=E*X,gt=x,Ie=0;Ie<C;++Ie)ue=dt+gt,Ae=ct+gt,oe=k[ue],k[ue]=k[Ae],k[Ae]=oe,gt+=S;--X}break}}}}}g(Jt),g(fr),X-K<=32?_(K,X,k,x,E,M,d,C,S,P,D):A(K,X,k,x,E,M,d,C,S,P,D)}}};function h(_,T,g){var A=l(T),b=[T,_].join(","),w=c[b];return _.length>1&&A?w(g,A[0],A[1]):w(g)}var v={"uint32,1,0":function(_,T){return function(g){var A=g.data,b=g.offset|0,w=g.shape,k=g.stride,x=k[0]|0,E=w[0]|0,M=k[1]|0,d=w[1]|0,C=M,S=M,P=1;E<=32?_(0,E-1,A,b,x,M,E,d,C,S,P):T(0,E-1,A,b,x,M,E,d,C,S,P)}}};function p(_,T){var g=[T,_].join(","),A=v[g],b=f(_,T),w=h(_,T,b);return A(b,w)}n.exports=p},8729:function(n,a,o){"use strict";var s=o(8139),l={};function u(f){var c=f.order,h=f.dtype,v=[c,h],p=v.join(":"),_=l[p];return _||(l[p]=_=s(c,h)),_(f),f}n.exports=u},5050:function(n,a,o){var s=o(4780),l=typeof Float64Array!="undefined";function u(T,g){return T[0]-g[0]}function f(){var T=this.stride,g=new Array(T.length),A;for(A=0;A<g.length;++A)g[A]=[Math.abs(T[A]),A];g.sort(u);var b=new Array(g.length);for(A=0;A<b.length;++A)b[A]=g[A][1];return b}var c={T:function(T){function g(b){this.data=b}var A=g.prototype;return A.dtype=T,A.index=function(){return-1},A.size=0,A.dimension=-1,A.shape=A.stride=A.order=[],A.lo=A.hi=A.transpose=A.step=function(){return new g(this.data)},A.get=A.set=function(){},A.pick=function(){return null},function(w){return new g(w)}},0:function(T,g){function A(w,k){this.data=w,this.offset=k}var b=A.prototype;return b.dtype=T,b.index=function(){return this.offset},b.dimension=0,b.size=1,b.shape=b.stride=b.order=[],b.lo=b.hi=b.transpose=b.step=function(){return new A(this.data,this.offset)},b.pick=function(){return g(this.data)},b.valueOf=b.get=function(){return T==="generic"?this.data.get(this.offset):this.data[this.offset]},b.set=function(k){return T==="generic"?this.data.set(this.offset,k):this.data[this.offset]=k},function(k,x,E,M){return new A(k,M)}},1:function(T,g,A){function b(k,x,E,M){this.data=k,this.shape=[x],this.stride=[E],this.offset=M|0}var w=b.prototype;return w.dtype=T,w.dimension=1,Object.defineProperty(w,"size",{get:function(){return this.shape[0]}}),w.order=[0],w.set=function(x,E){return T==="generic"?this.data.set(this.offset+this.stride[0]*x,E):this.data[this.offset+this.stride[0]*x]=E},w.get=function(x){return T==="generic"?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},w.index=function(x){return this.offset+this.stride[0]*x},w.hi=function(x){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,this.stride[0],this.offset)},w.lo=function(x){var E=this.offset,M=0,d=this.shape[0],C=this.stride[0];return typeof x=="number"&&x>=0&&(M=x|0,E+=C*M,d-=M),new b(this.data,d,C,E)},w.step=function(x){var E=this.shape[0],M=this.stride[0],d=this.offset,C=0,S=Math.ceil;return typeof x=="number"&&(C=x|0,C<0?(d+=M*(E-1),E=S(-E/C)):E=S(E/C),M*=C),new b(this.data,E,M,d)},w.transpose=function(x){x=x===void 0?0:x|0;var E=this.shape,M=this.stride;return new b(this.data,E[x],M[x],this.offset)},w.pick=function(x){var E=[],M=[],d=this.offset;typeof x=="number"&&x>=0?d=d+this.stride[0]*x|0:(E.push(this.shape[0]),M.push(this.stride[0]));var C=g[E.length+1];return C(this.data,E,M,d)},function(x,E,M,d){return new b(x,E[0],M[0],d)}},2:function(T,g,A){function b(k,x,E,M,d,C){this.data=k,this.shape=[x,E],this.stride=[M,d],this.offset=C|0}var w=b.prototype;return w.dtype=T,w.dimension=2,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(w,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),w.set=function(x,E,M){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E,M):this.data[this.offset+this.stride[0]*x+this.stride[1]*E]=M},w.get=function(x,E){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E):this.data[this.offset+this.stride[0]*x+this.stride[1]*E]},w.index=function(x,E){return this.offset+this.stride[0]*x+this.stride[1]*E},w.hi=function(x,E){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,this.stride[0],this.stride[1],this.offset)},w.lo=function(x,E){var M=this.offset,d=0,C=this.shape[0],S=this.shape[1],P=this.stride[0],D=this.stride[1];return typeof x=="number"&&x>=0&&(d=x|0,M+=P*d,C-=d),typeof E=="number"&&E>=0&&(d=E|0,M+=D*d,S-=d),new b(this.data,C,S,P,D,M)},w.step=function(x,E){var M=this.shape[0],d=this.shape[1],C=this.stride[0],S=this.stride[1],P=this.offset,D=0,z=Math.ceil;return typeof x=="number"&&(D=x|0,D<0?(P+=C*(M-1),M=z(-M/D)):M=z(M/D),C*=D),typeof E=="number"&&(D=E|0,D<0?(P+=S*(d-1),d=z(-d/D)):d=z(d/D),S*=D),new b(this.data,M,d,C,S,P)},w.transpose=function(x,E){x=x===void 0?0:x|0,E=E===void 0?1:E|0;var M=this.shape,d=this.stride;return new b(this.data,M[x],M[E],d[x],d[E],this.offset)},w.pick=function(x,E){var M=[],d=[],C=this.offset;typeof x=="number"&&x>=0?C=C+this.stride[0]*x|0:(M.push(this.shape[0]),d.push(this.stride[0])),typeof E=="number"&&E>=0?C=C+this.stride[1]*E|0:(M.push(this.shape[1]),d.push(this.stride[1]));var S=g[M.length+1];return S(this.data,M,d,C)},function(x,E,M,d){return new b(x,E[0],E[1],M[0],M[1],d)}},3:function(T,g,A){function b(k,x,E,M,d,C,S,P){this.data=k,this.shape=[x,E,M],this.stride=[d,C,S],this.offset=P|0}var w=b.prototype;return w.dtype=T,w.dimension=3,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(w,"order",{get:function(){var x=Math.abs(this.stride[0]),E=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return x>E?E>M?[2,1,0]:x>M?[1,2,0]:[1,0,2]:x>M?[2,0,1]:M>E?[0,1,2]:[0,2,1]}}),w.set=function(x,E,M,d){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M,d):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M]=d},w.get=function(x,E,M){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M]},w.index=function(x,E,M){return this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M},w.hi=function(x,E,M){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof M!="number"||M<0?this.shape[2]:M|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},w.lo=function(x,E,M){var d=this.offset,C=0,S=this.shape[0],P=this.shape[1],D=this.shape[2],z=this.stride[0],O=this.stride[1],V=this.stride[2];return typeof x=="number"&&x>=0&&(C=x|0,d+=z*C,S-=C),typeof E=="number"&&E>=0&&(C=E|0,d+=O*C,P-=C),typeof M=="number"&&M>=0&&(C=M|0,d+=V*C,D-=C),new b(this.data,S,P,D,z,O,V,d)},w.step=function(x,E,M){var d=this.shape[0],C=this.shape[1],S=this.shape[2],P=this.stride[0],D=this.stride[1],z=this.stride[2],O=this.offset,V=0,B=Math.ceil;return typeof x=="number"&&(V=x|0,V<0?(O+=P*(d-1),d=B(-d/V)):d=B(d/V),P*=V),typeof E=="number"&&(V=E|0,V<0?(O+=D*(C-1),C=B(-C/V)):C=B(C/V),D*=V),typeof M=="number"&&(V=M|0,V<0?(O+=z*(S-1),S=B(-S/V)):S=B(S/V),z*=V),new b(this.data,d,C,S,P,D,z,O)},w.transpose=function(x,E,M){x=x===void 0?0:x|0,E=E===void 0?1:E|0,M=M===void 0?2:M|0;var d=this.shape,C=this.stride;return new b(this.data,d[x],d[E],d[M],C[x],C[E],C[M],this.offset)},w.pick=function(x,E,M){var d=[],C=[],S=this.offset;typeof x=="number"&&x>=0?S=S+this.stride[0]*x|0:(d.push(this.shape[0]),C.push(this.stride[0])),typeof E=="number"&&E>=0?S=S+this.stride[1]*E|0:(d.push(this.shape[1]),C.push(this.stride[1])),typeof M=="number"&&M>=0?S=S+this.stride[2]*M|0:(d.push(this.shape[2]),C.push(this.stride[2]));var P=g[d.length+1];return P(this.data,d,C,S)},function(x,E,M,d){return new b(x,E[0],E[1],E[2],M[0],M[1],M[2],d)}},4:function(T,g,A){function b(k,x,E,M,d,C,S,P,D,z){this.data=k,this.shape=[x,E,M,d],this.stride=[C,S,P,D],this.offset=z|0}var w=b.prototype;return w.dtype=T,w.dimension=4,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(w,"order",{get:A}),w.set=function(x,E,M,d,C){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M+this.stride[3]*d,C):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M+this.stride[3]*d]=C},w.get=function(x,E,M,d){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M+this.stride[3]*d):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M+this.stride[3]*d]},w.index=function(x,E,M,d){return this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*M+this.stride[3]*d},w.hi=function(x,E,M,d){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof M!="number"||M<0?this.shape[2]:M|0,typeof d!="number"||d<0?this.shape[3]:d|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},w.lo=function(x,E,M,d){var C=this.offset,S=0,P=this.shape[0],D=this.shape[1],z=this.shape[2],O=this.shape[3],V=this.stride[0],B=this.stride[1],F=this.stride[2],N=this.stride[3];return typeof x=="number"&&x>=0&&(S=x|0,C+=V*S,P-=S),typeof E=="number"&&E>=0&&(S=E|0,C+=B*S,D-=S),typeof M=="number"&&M>=0&&(S=M|0,C+=F*S,z-=S),typeof d=="number"&&d>=0&&(S=d|0,C+=N*S,O-=S),new b(this.data,P,D,z,O,V,B,F,N,C)},w.step=function(x,E,M,d){var C=this.shape[0],S=this.shape[1],P=this.shape[2],D=this.shape[3],z=this.stride[0],O=this.stride[1],V=this.stride[2],B=this.stride[3],F=this.offset,N=0,Z=Math.ceil;return typeof x=="number"&&(N=x|0,N<0?(F+=z*(C-1),C=Z(-C/N)):C=Z(C/N),z*=N),typeof E=="number"&&(N=E|0,N<0?(F+=O*(S-1),S=Z(-S/N)):S=Z(S/N),O*=N),typeof M=="number"&&(N=M|0,N<0?(F+=V*(P-1),P=Z(-P/N)):P=Z(P/N),V*=N),typeof d=="number"&&(N=d|0,N<0?(F+=B*(D-1),D=Z(-D/N)):D=Z(D/N),B*=N),new b(this.data,C,S,P,D,z,O,V,B,F)},w.transpose=function(x,E,M,d){x=x===void 0?0:x|0,E=E===void 0?1:E|0,M=M===void 0?2:M|0,d=d===void 0?3:d|0;var C=this.shape,S=this.stride;return new b(this.data,C[x],C[E],C[M],C[d],S[x],S[E],S[M],S[d],this.offset)},w.pick=function(x,E,M,d){var C=[],S=[],P=this.offset;typeof x=="number"&&x>=0?P=P+this.stride[0]*x|0:(C.push(this.shape[0]),S.push(this.stride[0])),typeof E=="number"&&E>=0?P=P+this.stride[1]*E|0:(C.push(this.shape[1]),S.push(this.stride[1])),typeof M=="number"&&M>=0?P=P+this.stride[2]*M|0:(C.push(this.shape[2]),S.push(this.stride[2])),typeof d=="number"&&d>=0?P=P+this.stride[3]*d|0:(C.push(this.shape[3]),S.push(this.stride[3]));var D=g[C.length+1];return D(this.data,C,S,P)},function(x,E,M,d){return new b(x,E[0],E[1],E[2],E[3],M[0],M[1],M[2],M[3],d)}},5:function(g,A,b){function w(x,E,M,d,C,S,P,D,z,O,V,B){this.data=x,this.shape=[E,M,d,C,S],this.stride=[P,D,z,O,V],this.offset=B|0}var k=w.prototype;return k.dtype=g,k.dimension=5,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(k,"order",{get:b}),k.set=function(E,M,d,C,S,P){return g==="generic"?this.data.set(this.offset+this.stride[0]*E+this.stride[1]*M+this.stride[2]*d+this.stride[3]*C+this.stride[4]*S,P):this.data[this.offset+this.stride[0]*E+this.stride[1]*M+this.stride[2]*d+this.stride[3]*C+this.stride[4]*S]=P},k.get=function(E,M,d,C,S){return g==="generic"?this.data.get(this.offset+this.stride[0]*E+this.stride[1]*M+this.stride[2]*d+this.stride[3]*C+this.stride[4]*S):this.data[this.offset+this.stride[0]*E+this.stride[1]*M+this.stride[2]*d+this.stride[3]*C+this.stride[4]*S]},k.index=function(E,M,d,C,S){return this.offset+this.stride[0]*E+this.stride[1]*M+this.stride[2]*d+this.stride[3]*C+this.stride[4]*S},k.hi=function(E,M,d,C,S){return new w(this.data,typeof E!="number"||E<0?this.shape[0]:E|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof d!="number"||d<0?this.shape[2]:d|0,typeof C!="number"||C<0?this.shape[3]:C|0,typeof S!="number"||S<0?this.shape[4]:S|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},k.lo=function(E,M,d,C,S){var P=this.offset,D=0,z=this.shape[0],O=this.shape[1],V=this.shape[2],B=this.shape[3],F=this.shape[4],N=this.stride[0],Z=this.stride[1],J=this.stride[2],re=this.stride[3],le=this.stride[4];return typeof E=="number"&&E>=0&&(D=E|0,P+=N*D,z-=D),typeof M=="number"&&M>=0&&(D=M|0,P+=Z*D,O-=D),typeof d=="number"&&d>=0&&(D=d|0,P+=J*D,V-=D),typeof C=="number"&&C>=0&&(D=C|0,P+=re*D,B-=D),typeof S=="number"&&S>=0&&(D=S|0,P+=le*D,F-=D),new w(this.data,z,O,V,B,F,N,Z,J,re,le,P)},k.step=function(E,M,d,C,S){var P=this.shape[0],D=this.shape[1],z=this.shape[2],O=this.shape[3],V=this.shape[4],B=this.stride[0],F=this.stride[1],N=this.stride[2],Z=this.stride[3],J=this.stride[4],re=this.offset,le=0,fe=Math.ceil;return typeof E=="number"&&(le=E|0,le<0?(re+=B*(P-1),P=fe(-P/le)):P=fe(P/le),B*=le),typeof M=="number"&&(le=M|0,le<0?(re+=F*(D-1),D=fe(-D/le)):D=fe(D/le),F*=le),typeof d=="number"&&(le=d|0,le<0?(re+=N*(z-1),z=fe(-z/le)):z=fe(z/le),N*=le),typeof C=="number"&&(le=C|0,le<0?(re+=Z*(O-1),O=fe(-O/le)):O=fe(O/le),Z*=le),typeof S=="number"&&(le=S|0,le<0?(re+=J*(V-1),V=fe(-V/le)):V=fe(V/le),J*=le),new w(this.data,P,D,z,O,V,B,F,N,Z,J,re)},k.transpose=function(E,M,d,C,S){E=E===void 0?0:E|0,M=M===void 0?1:M|0,d=d===void 0?2:d|0,C=C===void 0?3:C|0,S=S===void 0?4:S|0;var P=this.shape,D=this.stride;return new w(this.data,P[E],P[M],P[d],P[C],P[S],D[E],D[M],D[d],D[C],D[S],this.offset)},k.pick=function(E,M,d,C,S){var P=[],D=[],z=this.offset;typeof E=="number"&&E>=0?z=z+this.stride[0]*E|0:(P.push(this.shape[0]),D.push(this.stride[0])),typeof M=="number"&&M>=0?z=z+this.stride[1]*M|0:(P.push(this.shape[1]),D.push(this.stride[1])),typeof d=="number"&&d>=0?z=z+this.stride[2]*d|0:(P.push(this.shape[2]),D.push(this.stride[2])),typeof C=="number"&&C>=0?z=z+this.stride[3]*C|0:(P.push(this.shape[3]),D.push(this.stride[3])),typeof S=="number"&&S>=0?z=z+this.stride[4]*S|0:(P.push(this.shape[4]),D.push(this.stride[4]));var O=A[P.length+1];return O(this.data,P,D,z)},function(E,M,d,C){return new w(E,M[0],M[1],M[2],M[3],M[4],d[0],d[1],d[2],d[3],d[4],C)}}};function h(T,g){var A=g===-1?"T":String(g),b=c[A];return g===-1?b(T):g===0?b(T,p[T][0]):b(T,p[T],f)}function v(T){if(s(T))return"buffer";if(l)switch(Object.prototype.toString.call(T)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(T)?"array":"generic"}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function _(T,g,A,b){if(T===void 0){var d=p.array[0];return d([])}else typeof T=="number"&&(T=[T]);g===void 0&&(g=[T.length]);var w=g.length;if(A===void 0){A=new Array(w);for(var k=w-1,x=1;k>=0;--k)A[k]=x,x*=g[k]}if(b===void 0){b=0;for(var k=0;k<w;++k)A[k]<0&&(b-=(g[k]-1)*A[k])}for(var E=v(T),M=p[E];M.length<=w+1;)M.push(h(E,M.length-1));var d=M[w+1];return d(T,g,A,b)}n.exports=_},8551:function(n,a,o){"use strict";var s=o(8362),l=Math.pow(2,-1074),u=-1>>>0;n.exports=f;function f(c,h){if(isNaN(c)||isNaN(h))return NaN;if(c===h)return c;if(c===0)return h<0?-l:l;var v=s.hi(c),p=s.lo(c);return h>c==c>0?p===u?(v+=1,p=0):p+=1:p===0?(p=u,v-=1):p-=1,s.pack(p,v)}},115:function(n,a){var o=1e-6,s=1e-6;a.vertexNormals=function(l,u,f){for(var c=u.length,h=new Array(c),v=f===void 0?o:f,p=0;p<c;++p)h[p]=[0,0,0];for(var p=0;p<l.length;++p)for(var _=l[p],T=0,g=_[_.length-1],A=_[0],b=0;b<_.length;++b){T=g,g=A,A=_[(b+1)%_.length];for(var w=u[T],k=u[g],x=u[A],E=new Array(3),M=0,d=new Array(3),C=0,S=0;S<3;++S)E[S]=w[S]-k[S],M+=E[S]*E[S],d[S]=x[S]-k[S],C+=d[S]*d[S];if(M*C>v)for(var P=h[g],D=1/Math.sqrt(M*C),S=0;S<3;++S){var z=(S+1)%3,O=(S+2)%3;P[S]+=D*(d[z]*E[O]-d[O]*E[z])}}for(var p=0;p<c;++p){for(var P=h[p],V=0,S=0;S<3;++S)V+=P[S]*P[S];if(V>v)for(var D=1/Math.sqrt(V),S=0;S<3;++S)P[S]*=D;else for(var S=0;S<3;++S)P[S]=0}return h},a.faceNormals=function(l,u,f){for(var c=l.length,h=new Array(c),v=f===void 0?s:f,p=0;p<c;++p){for(var _=l[p],T=new Array(3),g=0;g<3;++g)T[g]=u[_[g]];for(var A=new Array(3),b=new Array(3),g=0;g<3;++g)A[g]=T[1][g]-T[0][g],b[g]=T[2][g]-T[0][g];for(var w=new Array(3),k=0,g=0;g<3;++g){var x=(g+1)%3,E=(g+2)%3;w[g]=A[x]*b[E]-A[E]*b[x],k+=w[g]*w[g]}k>v?k=1/Math.sqrt(k):k=0;for(var g=0;g<3;++g)w[g]*=k;h[p]=w}return h}},567:function(n){"use strict";n.exports=a;function a(o,s,l,u,f,c,h,v,p,_){var T=s+c+_;if(g>0){var g=Math.sqrt(T+1);o[0]=.5*(h-p)/g,o[1]=.5*(v-u)/g,o[2]=.5*(l-c)/g,o[3]=.5*g}else{var A=Math.max(s,c,_),g=Math.sqrt(2*A-T+1);s>=A?(o[0]=.5*g,o[1]=.5*(f+l)/g,o[2]=.5*(v+u)/g,o[3]=.5*(h-p)/g):c>=A?(o[0]=.5*(l+f)/g,o[1]=.5*g,o[2]=.5*(p+h)/g,o[3]=.5*(v-u)/g):(o[0]=.5*(u+v)/g,o[1]=.5*(h+p)/g,o[2]=.5*g,o[3]=.5*(l-f)/g)}return o}},7774:function(n,a,o){"use strict";n.exports=g;var s=o(8444),l=o(3012),u=o(5950),f=o(7437),c=o(567);function h(A,b,w){return Math.sqrt(Math.pow(A,2)+Math.pow(b,2)+Math.pow(w,2))}function v(A,b,w,k){return Math.sqrt(Math.pow(A,2)+Math.pow(b,2)+Math.pow(w,2)+Math.pow(k,2))}function p(A,b){var w=b[0],k=b[1],x=b[2],E=b[3],M=v(w,k,x,E);M>1e-6?(A[0]=w/M,A[1]=k/M,A[2]=x/M,A[3]=E/M):(A[0]=A[1]=A[2]=0,A[3]=1)}function _(A,b,w){this.radius=s([w]),this.center=s(b),this.rotation=s(A),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var T=_.prototype;T.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},T.recalcMatrix=function(A){this.radius.curve(A),this.center.curve(A),this.rotation.curve(A);var b=this.computedRotation;p(b,b);var w=this.computedMatrix;u(w,b);var k=this.computedCenter,x=this.computedEye,E=this.computedUp,M=Math.exp(this.computedRadius[0]);x[0]=k[0]+M*w[2],x[1]=k[1]+M*w[6],x[2]=k[2]+M*w[10],E[0]=w[1],E[1]=w[5],E[2]=w[9];for(var d=0;d<3;++d){for(var C=0,S=0;S<3;++S)C+=w[d+4*S]*x[S];w[12+d]=-C}},T.getMatrix=function(A,b){this.recalcMatrix(A);var w=this.computedMatrix;if(b){for(var k=0;k<16;++k)b[k]=w[k];return b}return w},T.idle=function(A){this.center.idle(A),this.radius.idle(A),this.rotation.idle(A)},T.flush=function(A){this.center.flush(A),this.radius.flush(A),this.rotation.flush(A)},T.pan=function(A,b,w,k){b=b||0,w=w||0,k=k||0,this.recalcMatrix(A);var x=this.computedMatrix,E=x[1],M=x[5],d=x[9],C=h(E,M,d);E/=C,M/=C,d/=C;var S=x[0],P=x[4],D=x[8],z=S*E+P*M+D*d;S-=E*z,P-=M*z,D-=d*z;var O=h(S,P,D);S/=O,P/=O,D/=O;var V=x[2],B=x[6],F=x[10],N=V*E+B*M+F*d,Z=V*S+B*P+F*D;V-=N*E+Z*S,B-=N*M+Z*P,F-=N*d+Z*D;var J=h(V,B,F);V/=J,B/=J,F/=J;var re=S*b+E*w,le=P*b+M*w,fe=D*b+d*w;this.center.move(A,re,le,fe);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+k),this.radius.set(A,Math.log(K))},T.rotate=function(A,b,w,k){this.recalcMatrix(A),b=b||0,w=w||0;var x=this.computedMatrix,E=x[0],M=x[4],d=x[8],C=x[1],S=x[5],P=x[9],D=x[2],z=x[6],O=x[10],V=b*E+w*C,B=b*M+w*S,F=b*d+w*P,N=-(z*F-O*B),Z=-(O*V-D*F),J=-(D*B-z*V),re=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(Z,2)-Math.pow(J,2))),le=v(N,Z,J,re);le>1e-6?(N/=le,Z/=le,J/=le,re/=le):(N=Z=J=0,re=1);var fe=this.computedRotation,K=fe[0],X=fe[1],ae=fe[2],oe=fe[3],_e=K*re+oe*N+X*J-ae*Z,be=X*re+oe*Z+ae*N-K*J,he=ae*re+oe*J+K*Z-X*N,ie=oe*re-K*N-X*Z-ae*J;if(k){N=D,Z=z,J=O;var ye=Math.sin(k)/h(N,Z,J);N*=ye,Z*=ye,J*=ye,re=Math.cos(b),_e=_e*re+ie*N+be*J-he*Z,be=be*re+ie*Z+he*N-_e*J,he=he*re+ie*J+_e*Z-be*N,ie=ie*re-_e*N-be*Z-he*J}var ue=v(_e,be,he,ie);ue>1e-6?(_e/=ue,be/=ue,he/=ue,ie/=ue):(_e=be=he=0,ie=1),this.rotation.set(A,_e,be,he,ie)},T.lookAt=function(A,b,w,k){this.recalcMatrix(A),w=w||this.computedCenter,b=b||this.computedEye,k=k||this.computedUp;var x=this.computedMatrix;l(x,b,w,k);var E=this.computedRotation;c(E,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),p(E,E),this.rotation.set(A,E[0],E[1],E[2],E[3]);for(var M=0,d=0;d<3;++d)M+=Math.pow(w[d]-b[d],2);this.radius.set(A,.5*Math.log(Math.max(M,1e-6))),this.center.set(A,w[0],w[1],w[2])},T.translate=function(A,b,w,k){this.center.move(A,b||0,w||0,k||0)},T.setMatrix=function(A,b){var w=this.computedRotation;c(w,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),p(w,w),this.rotation.set(A,w[0],w[1],w[2],w[3]);var k=this.computedMatrix;f(k,b);var x=k[15];if(Math.abs(x)>1e-6){var E=k[12]/x,M=k[13]/x,d=k[14]/x;this.recalcMatrix(A);var C=Math.exp(this.computedRadius[0]);this.center.set(A,E-k[2]*C,M-k[6]*C,d-k[10]*C),this.radius.idle(A)}else this.center.idle(A),this.radius.idle(A)},T.setDistance=function(A,b){b>0&&this.radius.set(A,Math.log(b))},T.setDistanceLimits=function(A,b){A>0?A=Math.log(A):A=-1/0,b>0?b=Math.log(b):b=1/0,b=Math.max(b,A),this.radius.bounds[0][0]=A,this.radius.bounds[1][0]=b},T.getDistanceLimits=function(A){var b=this.radius.bounds;return A?(A[0]=Math.exp(b[0][0]),A[1]=Math.exp(b[1][0]),A):[Math.exp(b[0][0]),Math.exp(b[1][0])]},T.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},T.fromJSON=function(A){var b=this.lastT(),w=A.center;w&&this.center.set(b,w[0],w[1],w[2]);var k=A.rotation;k&&this.rotation.set(b,k[0],k[1],k[2],k[3]);var x=A.distance;x&&x>0&&this.radius.set(b,Math.log(x)),this.setDistanceLimits(A.zoomMin,A.zoomMax)};function g(A){A=A||{};var b=A.center||[0,0,0],w=A.rotation||[0,0,0,1],k=A.radius||1;b=[].slice.call(b,0,3),w=[].slice.call(w,0,4),p(w,w);var x=new _(w,b,Math.log(k));return x.setDistanceLimits(A.zoomMin,A.zoomMax),("eye"in A||"up"in A)&&x.lookAt(0,A.eye,A.center,A.up),x}},4930:function(n,a,o){"use strict";var s=o(6184);n.exports=function(u,f,c){return c=typeof c!="undefined"?c+"":" ",s(c,f)+u}},4405:function(n){n.exports=function(o,s){s||(s=[0,""]),o=String(o);var l=parseFloat(o,10);return s[0]=l,s[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",s}},4166:function(n,a,o){"use strict";n.exports=l;var s=o(9398);function l(u,f){for(var c=f.length|0,h=u.length,v=[new Array(c),new Array(c)],p=0;p<c;++p)v[0][p]=[],v[1][p]=[];for(var p=0;p<h;++p){var _=u[p];v[0][_[0]].push(_),v[1][_[1]].push(_)}for(var T=[],p=0;p<c;++p)v[0][p].length+v[1][p].length===0&&T.push([p]);function g(d,C){var S=v[C][d[C]];S.splice(S.indexOf(d),1)}function A(d,C,S){for(var P,D,z,O=0;O<2;++O)if(v[O][C].length>0){P=v[O][C][0],z=O;break}D=P[z^1];for(var V=0;V<2;++V)for(var B=v[V][C],F=0;F<B.length;++F){var N=B[F],Z=N[V^1],J=s(f[d],f[C],f[D],f[Z]);J>0&&(P=N,D=Z,z=V)}return S||P&&g(P,z),D}function b(d,C){var S=v[C][d][0],P=[d];g(S,C);for(var D=S[C^1],z=C;;){for(;D!==d;)P.push(D),D=A(P[P.length-2],D,!1);if(v[0][d].length+v[1][d].length===0)break;var O=P[P.length-1],V=d,B=P[1],F=A(O,V,!0);if(s(f[O],f[V],f[B],f[F])<0)break;P.push(d),D=A(O,V)}return P}function w(d,C){return C[1]===C[C.length-1]}for(var p=0;p<c;++p)for(var k=0;k<2;++k){for(var x=[];v[k][p].length>0;){var E=v[0][p].length,M=b(p,k);w(x,M)?x.push.apply(x,M):(x.length>0&&T.push(x),x=M)}x.length>0&&T.push(x)}return T}},3959:function(n,a,o){"use strict";n.exports=l;var s=o(8348);function l(u,f){for(var c=s(u,f.length),h=new Array(f.length),v=new Array(f.length),p=[],_=0;_<f.length;++_){var T=c[_].length;v[_]=T,h[_]=!0,T<=1&&p.push(_)}for(;p.length>0;){var g=p.pop();h[g]=!1;for(var A=c[g],_=0;_<A.length;++_){var b=A[_];--v[b]===0&&p.push(b)}}for(var w=new Array(f.length),k=[],_=0;_<f.length;++_)if(h[_]){var g=k.length;w[_]=g,k.push(f[_])}else w[_]=-1;for(var x=[],_=0;_<u.length;++_){var E=u[_];h[E[0]]&&h[E[1]]&&x.push([w[E[0]],w[E[1]]])}return[x,k]}},8040:function(n,a,o){"use strict";n.exports=T;var s=o(8348),l=o(4166),u=o(211),f=o(9660),c=o(9662),h=o(1215),v=o(3959);function p(g,A){for(var b=new Array(g),w=0;w<g;++w)b[w]=A;return b}function _(g){for(var A=new Array(g),b=0;b<g;++b)A[b]=[];return A}function T(g,A){var ye=v(g,A);g=ye[0],A=ye[1];for(var b=A.length,w=g.length,k=s(g,A.length),x=0;x<b;++x)if(k[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var E=l(g,A);function M(Ie){for(var dt=Ie.length,ct=[0],Ke=0;Ke<dt;++Ke){var _t=A[Ie[Ke]],zt=A[Ie[(Ke+1)%dt]],Et=f(-_t[0],_t[1]),Se=f(-_t[0],zt[1]),je=f(zt[0],_t[1]),ht=f(zt[0],zt[1]);ct=c(ct,c(c(Et,Se),c(je,ht)))}return ct[ct.length-1]>0}E=E.filter(M);for(var d=E.length,C=new Array(d),S=new Array(d),x=0;x<d;++x){C[x]=x;var P=new Array(d),D=E[x].map(function(dt){return A[dt]}),z=u([D]),O=0;e:for(var V=0;V<d;++V)if(P[V]=0,x!==V){for(var B=E[V],F=B.length,N=0;N<F;++N){var Z=z(A[B[N]]);if(Z!==0){Z<0&&(P[V]=1,O+=1);continue e}}P[V]=1,O+=1}S[x]=[O,x,P]}S.sort(function(Ie,dt){return dt[0]-Ie[0]});for(var x=0;x<d;++x)for(var P=S[x],J=P[1],re=P[2],V=0;V<d;++V)re[V]&&(C[V]=J);for(var le=_(d),x=0;x<d;++x)le[x].push(C[x]),le[C[x]].push(x);for(var fe={},K=p(b,!1),x=0;x<d;++x)for(var B=E[x],F=B.length,V=0;V<F;++V){var X=B[V],ae=B[(V+1)%F],oe=Math.min(X,ae)+":"+Math.max(X,ae);if(oe in fe){var _e=fe[oe];le[_e].push(x),le[x].push(_e),K[X]=K[ae]=!0}else fe[oe]=x}function be(Ie){for(var dt=Ie.length,ct=0;ct<dt;++ct)if(!K[Ie[ct]])return!1;return!0}for(var he=[],ie=p(d,-1),x=0;x<d;++x)C[x]===x&&!be(E[x])?(he.push(x),ie[x]=0):ie[x]=-1;for(var ye=[];he.length>0;){var ue=he.pop(),Ae=le[ue];h(Ae,function(Ie,dt){return Ie-dt});var Re=Ae.length,ze=ie[ue],et;if(ze===0){var B=E[ue];et=[B]}for(var x=0;x<Re;++x){var Le=Ae[x];if(!(ie[Le]>=0)&&(ie[Le]=ze^1,he.push(Le),ze===0)){var B=E[Le];be(B)||(B.reverse(),et.push(B))}}ze===0&&ye.push(et)}return ye}},211:function(n,a,o){n.exports=A;var s=o(417)[3],l=o(4385),u=o(9014),f=o(5070);function c(){return!0}function h(b){return function(w,k){var x=b[w];return x?!!x.queryPoint(k,c):!1}}function v(b){for(var w={},k=0;k<b.length;++k){var x=b[k],E=x[0][0],M=x[0][1],d=x[1][1],C=[Math.min(M,d),Math.max(M,d)];E in w?w[E].push(C):w[E]=[C]}for(var S={},P=Object.keys(w),k=0;k<P.length;++k){var D=w[P[k]];S[P[k]]=u(D)}return h(S)}function p(b,w){return function(k){var x=f.le(w,k[0]);if(x<0)return 1;var E=b[x];if(!E)if(x>0&&w[x]===k[0])E=b[x-1];else return 1;for(var M=1;E;){var d=E.key,C=s(k,d[0],d[1]);if(d[0][0]<d[1][0])if(C<0)E=E.left;else if(C>0)M=-1,E=E.right;else return 0;else if(C>0)E=E.left;else if(C<0)M=1,E=E.right;else return 0}return M}}function _(b){return 1}function T(b){return function(k){return b(k[0],k[1])?0:1}}function g(b,w){return function(x){return b(x[0],x[1])?0:w(x)}}function A(b){for(var w=b.length,k=[],x=[],E=0,M=0;M<w;++M)for(var d=b[M],C=d.length,S=C-1,P=0;P<C;S=P++){var D=d[S],z=d[P];D[0]===z[0]?x.push([D,z]):k.push([D,z])}if(k.length===0)return x.length===0?_:T(v(x));var O=l(k),V=p(O.slabs,O.coordinates);return x.length===0?V:g(v(x),V)}},7309:function(n){"use strict";var a=new Float64Array(4),o=new Float64Array(4),s=new Float64Array(4);function l(u,f,c,h,v){a.length<h.length&&(a=new Float64Array(h.length),o=new Float64Array(h.length),s=new Float64Array(h.length));for(var p=0;p<h.length;++p)a[p]=u[p]-h[p],o[p]=f[p]-u[p],s[p]=c[p]-u[p];for(var _=0,T=0,g=0,A=0,b=0,w=0,p=0;p<h.length;++p){var k=o[p],x=s[p],E=a[p];_+=k*k,T+=k*x,g+=x*x,A+=E*k,b+=E*x,w+=E*E}var M=Math.abs(_*g-T*T),d=T*b-g*A,C=T*A-_*b,S;if(d+C<=M)if(d<0)C<0&&A<0?(C=0,-A>=_?(d=1,S=_+2*A+w):(d=-A/_,S=A*d+w)):(d=0,b>=0?(C=0,S=w):-b>=g?(C=1,S=g+2*b+w):(C=-b/g,S=b*C+w));else if(C<0)C=0,A>=0?(d=0,S=w):-A>=_?(d=1,S=_+2*A+w):(d=-A/_,S=A*d+w);else{var P=1/M;d*=P,C*=P,S=d*(_*d+T*C+2*A)+C*(T*d+g*C+2*b)+w}else{var D,z,O,V;d<0?(D=T+A,z=g+b,z>D?(O=z-D,V=_-2*T+g,O>=V?(d=1,C=0,S=_+2*A+w):(d=O/V,C=1-d,S=d*(_*d+T*C+2*A)+C*(T*d+g*C+2*b)+w)):(d=0,z<=0?(C=1,S=g+2*b+w):b>=0?(C=0,S=w):(C=-b/g,S=b*C+w))):C<0?(D=T+b,z=_+A,z>D?(O=z-D,V=_-2*T+g,O>=V?(C=1,d=0,S=g+2*b+w):(C=O/V,d=1-C,S=d*(_*d+T*C+2*A)+C*(T*d+g*C+2*b)+w)):(C=0,z<=0?(d=1,S=_+2*A+w):A>=0?(d=0,S=w):(d=-A/_,S=A*d+w))):(O=g+b-T-A,O<=0?(d=0,C=1,S=g+2*b+w):(V=_-2*T+g,O>=V?(d=1,C=0,S=_+2*A+w):(d=O/V,C=1-d,S=d*(_*d+T*C+2*A)+C*(T*d+g*C+2*b)+w)))}for(var B=1-d-C,p=0;p<h.length;++p)v[p]=B*u[p]+d*f[p]+C*c[p];return S<0?0:S}n.exports=l},1116:function(n,a,o){n.exports=o(6093)},7584:function(n,a,o){"use strict";var s=o(1539);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},2826:function(n,a,o){"use strict";n.exports=l;var s=o(5125);function l(u){for(var f=new Array(u.length),c=0;c<u.length;++c)f[c]=s(u[c]);return f}},4469:function(n,a,o){"use strict";var s=o(5125),l=o(3962);n.exports=u;function u(f,c){for(var h=s(c),v=f.length,p=new Array(v),_=0;_<v;++_)p[_]=l(f[_],h);return p}},6695:function(n,a,o){"use strict";var s=o(4354);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},7037:function(n,a,o){"use strict";var s=o(9209),l=o(1284),u=o(9887);n.exports=f;function f(c){c.sort(l);for(var h=c.length,v=0,p=0;p<h;++p){var _=c[p],T=u(_);if(T!==0){if(v>0){var g=c[v-1];if(s(_,g)===0&&u(g)!==T){v-=1;continue}}c[v++]=_}}return c.length=v,c}},6184:function(n){"use strict";var a="",o;n.exports=s;function s(l,u){if(typeof l!="string")throw new TypeError("expected a string");if(u===1)return l;if(u===2)return l+l;var f=l.length*u;if(o!==l||typeof o=="undefined")o=l,a="";else if(a.length>=f)return a.substr(0,f);for(;f>a.length&&u>1;)u&1&&(a+=l),u>>=1,l+=l;return a+=l,a=a.substr(0,f),a}},8161:function(n,a,o){n.exports=o.g.performance&&o.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(n){"use strict";n.exports=a;function a(o){for(var s=o.length,l=o[o.length-1],u=s,f=s-2;f>=0;--f){var c=l,h=o[f];l=c+h;var v=l-c,p=h-v;p&&(o[--u]=l,l=p)}for(var _=0,f=u;f<s;++f){var c=o[f],h=l;l=c+h;var v=l-c,p=h-v;p&&(o[_++]=p)}return o[_++]=l,o.length=_,o}},8167:function(n,a,o){"use strict";var s=o(9660),l=o(9662),u=o(8289),f=o(402),c=6;function h(w,k,x,E){return function(d){return E(w(x(d[0][0],d[1][1]),x(-d[0][1],d[1][0])))}}function v(w,k,x,E){return function(d){return E(w(k(w(x(d[1][1],d[2][2]),x(-d[1][2],d[2][1])),d[0][0]),w(k(w(x(d[1][0],d[2][2]),x(-d[1][2],d[2][0])),-d[0][1]),k(w(x(d[1][0],d[2][1]),x(-d[1][1],d[2][0])),d[0][2]))))}}function p(w,k,x,E){return function(d){return E(w(w(k(w(k(w(x(d[2][2],d[3][3]),x(-d[2][3],d[3][2])),d[1][1]),w(k(w(x(d[2][1],d[3][3]),x(-d[2][3],d[3][1])),-d[1][2]),k(w(x(d[2][1],d[3][2]),x(-d[2][2],d[3][1])),d[1][3]))),d[0][0]),k(w(k(w(x(d[2][2],d[3][3]),x(-d[2][3],d[3][2])),d[1][0]),w(k(w(x(d[2][0],d[3][3]),x(-d[2][3],d[3][0])),-d[1][2]),k(w(x(d[2][0],d[3][2]),x(-d[2][2],d[3][0])),d[1][3]))),-d[0][1])),w(k(w(k(w(x(d[2][1],d[3][3]),x(-d[2][3],d[3][1])),d[1][0]),w(k(w(x(d[2][0],d[3][3]),x(-d[2][3],d[3][0])),-d[1][1]),k(w(x(d[2][0],d[3][1]),x(-d[2][1],d[3][0])),d[1][3]))),d[0][2]),k(w(k(w(x(d[2][1],d[3][2]),x(-d[2][2],d[3][1])),d[1][0]),w(k(w(x(d[2][0],d[3][2]),x(-d[2][2],d[3][0])),-d[1][1]),k(w(x(d[2][0],d[3][1]),x(-d[2][1],d[3][0])),d[1][2]))),-d[0][3]))))}}function _(w,k,x,E){return function(d){return E(w(w(k(w(w(k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][2]),w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),-d[2][3]),k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][4]))),d[1][1]),k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][1]),w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),-d[2][3]),k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),d[2][4]))),-d[1][2])),w(k(w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),d[2][1]),w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),-d[2][2]),k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][4]))),d[1][3]),k(w(k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][1]),w(k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),-d[2][2]),k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][3]))),-d[1][4]))),d[0][0]),k(w(w(k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][2]),w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),-d[2][3]),k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][4]))),d[1][0]),k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][3]),k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),d[2][4]))),-d[1][2])),w(k(w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][2]),k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),d[2][4]))),d[1][3]),k(w(k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][0]),w(k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),-d[2][2]),k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),d[2][3]))),-d[1][4]))),-d[0][1])),w(k(w(w(k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][1]),w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),-d[2][3]),k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),d[2][4]))),d[1][0]),k(w(k(w(x(d[3][3],d[4][4]),x(-d[3][4],d[4][3])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][3]),k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),d[2][4]))),-d[1][1])),w(k(w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][4]))),d[1][3]),k(w(k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][3]))),-d[1][4]))),d[0][2]),w(k(w(w(k(w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),d[2][1]),w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),-d[2][2]),k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][4]))),d[1][0]),k(w(k(w(x(d[3][2],d[4][4]),x(-d[3][4],d[4][2])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][2]),k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),d[2][4]))),-d[1][1])),w(k(w(k(w(x(d[3][1],d[4][4]),x(-d[3][4],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][4]),x(-d[3][4],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][4]))),d[1][2]),k(w(k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][2]))),-d[1][4]))),-d[0][3]),k(w(w(k(w(k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][1]),w(k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),-d[2][2]),k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][3]))),d[1][0]),k(w(k(w(x(d[3][2],d[4][3]),x(-d[3][3],d[4][2])),d[2][0]),w(k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),-d[2][2]),k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),d[2][3]))),-d[1][1])),w(k(w(k(w(x(d[3][1],d[4][3]),x(-d[3][3],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][3]),x(-d[3][3],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][3]))),d[1][2]),k(w(k(w(x(d[3][1],d[4][2]),x(-d[3][2],d[4][1])),d[2][0]),w(k(w(x(d[3][0],d[4][2]),x(-d[3][2],d[4][0])),-d[2][1]),k(w(x(d[3][0],d[4][1]),x(-d[3][1],d[4][0])),d[2][2]))),-d[1][3]))),d[0][4])))))}}function T(w){var k=w===2?h:w===3?v:w===4?p:w===5?_:void 0;return k(l,u,s,f)}var g=[function(){return[0]},function(k){return[k[0][0]]}];function A(w,k,x,E,M,d,C,S){return function(D){switch(D.length){case 0:return w(D);case 1:return k(D);case 2:return x(D);case 3:return E(D);case 4:return M(D);case 5:return d(D)}var z=C[D.length];return z||(z=C[D.length]=S(D.length)),z(D)}}function b(){for(;g.length<c;)g.push(T(g.length));n.exports=A.apply(void 0,g.concat([g,T]));for(var w=0;w<g.length;++w)n.exports[w]=g[w]}b()},9130:function(n,a,o){"use strict";var s=o(9660),l=o(9662);n.exports=u;function u(f,c){for(var h=s(f[0],c[0]),v=1;v<f.length;++v)h=l(h,s(f[v],c[v]));return h}},2227:function(n,a,o){"use strict";var s=o(9660),l=o(9662),u=o(4078),f=o(8289),c=6;function h(M){var d=M===3?T:M===4?g:M===5?A:b;return d(l,u,s,f)}function v(){return 0}function p(){return 0}function _(){return 0}function T(M,d,C,S){function P(D,z,O){var V=C(D[0],D[0]),B=S(V,z[0]),F=S(V,O[0]),N=C(z[0],z[0]),Z=S(N,D[0]),J=S(N,O[0]),re=C(O[0],O[0]),le=S(re,D[0]),fe=S(re,z[0]),K=M(d(fe,J),d(Z,B)),X=d(le,F),ae=d(K,X);return ae[ae.length-1]}return P}function g(M,d,C,S){function P(D,z,O,V){var B=M(C(D[0],D[0]),C(D[1],D[1])),F=S(B,z[0]),N=S(B,O[0]),Z=S(B,V[0]),J=M(C(z[0],z[0]),C(z[1],z[1])),re=S(J,D[0]),le=S(J,O[0]),fe=S(J,V[0]),K=M(C(O[0],O[0]),C(O[1],O[1])),X=S(K,D[0]),ae=S(K,z[0]),oe=S(K,V[0]),_e=M(C(V[0],V[0]),C(V[1],V[1])),be=S(_e,D[0]),he=S(_e,z[0]),ie=S(_e,O[0]),ye=M(M(S(d(ie,oe),z[1]),M(S(d(he,fe),-O[1]),S(d(ae,le),V[1]))),M(S(d(he,fe),D[1]),M(S(d(be,Z),-z[1]),S(d(re,F),V[1])))),ue=M(M(S(d(ie,oe),D[1]),M(S(d(be,Z),-O[1]),S(d(X,N),V[1]))),M(S(d(ae,le),D[1]),M(S(d(X,N),-z[1]),S(d(re,F),O[1])))),Ae=d(ye,ue);return Ae[Ae.length-1]}return P}function A(M,d,C,S){function P(D,z,O,V,B){var F=M(C(D[0],D[0]),M(C(D[1],D[1]),C(D[2],D[2]))),N=S(F,z[0]),Z=S(F,O[0]),J=S(F,V[0]),re=S(F,B[0]),le=M(C(z[0],z[0]),M(C(z[1],z[1]),C(z[2],z[2]))),fe=S(le,D[0]),K=S(le,O[0]),X=S(le,V[0]),ae=S(le,B[0]),oe=M(C(O[0],O[0]),M(C(O[1],O[1]),C(O[2],O[2]))),_e=S(oe,D[0]),be=S(oe,z[0]),he=S(oe,V[0]),ie=S(oe,B[0]),ye=M(C(V[0],V[0]),M(C(V[1],V[1]),C(V[2],V[2]))),ue=S(ye,D[0]),Ae=S(ye,z[0]),Re=S(ye,O[0]),ze=S(ye,B[0]),et=M(C(B[0],B[0]),M(C(B[1],B[1]),C(B[2],B[2]))),Le=S(et,D[0]),Ie=S(et,z[0]),dt=S(et,O[0]),ct=S(et,V[0]),Ke=M(M(M(S(M(S(d(ct,ze),O[1]),M(S(d(dt,ie),-V[1]),S(d(Re,he),B[1]))),z[2]),M(S(M(S(d(ct,ze),z[1]),M(S(d(Ie,ae),-V[1]),S(d(Ae,X),B[1]))),-O[2]),S(M(S(d(dt,ie),z[1]),M(S(d(Ie,ae),-O[1]),S(d(be,K),B[1]))),V[2]))),M(S(M(S(d(Re,he),z[1]),M(S(d(Ae,X),-O[1]),S(d(be,K),V[1]))),-B[2]),M(S(M(S(d(ct,ze),z[1]),M(S(d(Ie,ae),-V[1]),S(d(Ae,X),B[1]))),D[2]),S(M(S(d(ct,ze),D[1]),M(S(d(Le,re),-V[1]),S(d(ue,J),B[1]))),-z[2])))),M(M(S(M(S(d(Ie,ae),D[1]),M(S(d(Le,re),-z[1]),S(d(fe,N),B[1]))),V[2]),M(S(M(S(d(Ae,X),D[1]),M(S(d(ue,J),-z[1]),S(d(fe,N),V[1]))),-B[2]),S(M(S(d(Re,he),z[1]),M(S(d(Ae,X),-O[1]),S(d(be,K),V[1]))),D[2]))),M(S(M(S(d(Re,he),D[1]),M(S(d(ue,J),-O[1]),S(d(_e,Z),V[1]))),-z[2]),M(S(M(S(d(Ae,X),D[1]),M(S(d(ue,J),-z[1]),S(d(fe,N),V[1]))),O[2]),S(M(S(d(be,K),D[1]),M(S(d(_e,Z),-z[1]),S(d(fe,N),O[1]))),-V[2]))))),_t=M(M(M(S(M(S(d(ct,ze),O[1]),M(S(d(dt,ie),-V[1]),S(d(Re,he),B[1]))),D[2]),S(M(S(d(ct,ze),D[1]),M(S(d(Le,re),-V[1]),S(d(ue,J),B[1]))),-O[2])),M(S(M(S(d(dt,ie),D[1]),M(S(d(Le,re),-O[1]),S(d(_e,Z),B[1]))),V[2]),S(M(S(d(Re,he),D[1]),M(S(d(ue,J),-O[1]),S(d(_e,Z),V[1]))),-B[2]))),M(M(S(M(S(d(dt,ie),z[1]),M(S(d(Ie,ae),-O[1]),S(d(be,K),B[1]))),D[2]),S(M(S(d(dt,ie),D[1]),M(S(d(Le,re),-O[1]),S(d(_e,Z),B[1]))),-z[2])),M(S(M(S(d(Ie,ae),D[1]),M(S(d(Le,re),-z[1]),S(d(fe,N),B[1]))),O[2]),S(M(S(d(be,K),D[1]),M(S(d(_e,Z),-z[1]),S(d(fe,N),O[1]))),-B[2])))),zt=d(Ke,_t);return zt[zt.length-1]}return P}function b(M,d,C,S){function P(D,z,O,V,B,F){var N=M(M(C(D[0],D[0]),C(D[1],D[1])),M(C(D[2],D[2]),C(D[3],D[3]))),Z=S(N,z[0]),J=S(N,O[0]),re=S(N,V[0]),le=S(N,B[0]),fe=S(N,F[0]),K=M(M(C(z[0],z[0]),C(z[1],z[1])),M(C(z[2],z[2]),C(z[3],z[3]))),X=S(K,D[0]),ae=S(K,O[0]),oe=S(K,V[0]),_e=S(K,B[0]),be=S(K,F[0]),he=M(M(C(O[0],O[0]),C(O[1],O[1])),M(C(O[2],O[2]),C(O[3],O[3]))),ie=S(he,D[0]),ye=S(he,z[0]),ue=S(he,V[0]),Ae=S(he,B[0]),Re=S(he,F[0]),ze=M(M(C(V[0],V[0]),C(V[1],V[1])),M(C(V[2],V[2]),C(V[3],V[3]))),et=S(ze,D[0]),Le=S(ze,z[0]),Ie=S(ze,O[0]),dt=S(ze,B[0]),ct=S(ze,F[0]),Ke=M(M(C(B[0],B[0]),C(B[1],B[1])),M(C(B[2],B[2]),C(B[3],B[3]))),_t=S(Ke,D[0]),zt=S(Ke,z[0]),Et=S(Ke,O[0]),Se=S(Ke,V[0]),je=S(Ke,F[0]),ht=M(M(C(F[0],F[0]),C(F[1],F[1])),M(C(F[2],F[2]),C(F[3],F[3]))),nt=S(ht,D[0]),lt=S(ht,z[0]),rt=S(ht,O[0]),Xe=S(ht,V[0]),ft=S(ht,B[0]),gt=M(M(M(S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),O[2]),S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),B[2]),S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),-F[2]))),z[3]),M(S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),z[2]),S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),B[2]),S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),-F[2]))),-O[3]),S(M(M(S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),z[2]),S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),-O[2])),M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),B[2]),S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),-F[2]))),V[3]))),M(M(S(M(M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),z[2]),S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),-O[2])),M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),V[2]),S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),-F[2]))),-B[3]),S(M(M(S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),z[2]),S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),-O[2])),M(S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),V[2]),S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),-B[2]))),F[3])),M(S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),z[2]),S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),B[2]),S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),-F[2]))),D[3]),S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),B[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-F[2]))),-z[3])))),M(M(M(S(M(M(S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),B[2]),S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),-F[2]))),V[3]),S(M(M(S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),D[2]),S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),V[2]),S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),-F[2]))),-B[3])),M(S(M(M(S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),D[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-z[2])),M(S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),V[2]),S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),-B[2]))),F[3]),S(M(M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),z[2]),S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),-O[2])),M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),V[2]),S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),-F[2]))),D[3]))),M(M(S(M(M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),D[2]),S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),-O[2])),M(S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),V[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-F[2]))),-z[3]),S(M(M(S(M(S(d(Xe,ct),z[1]),M(S(d(lt,be),-V[1]),S(d(Le,oe),F[1]))),D[2]),S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),V[2]),S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),-F[2]))),O[3])),M(S(M(M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),D[2]),S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-F[2]))),-V[3]),S(M(M(S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),D[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-z[2])),M(S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-V[2]))),F[3]))))),Qt=M(M(M(S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),O[2]),S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),B[2]),S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),-F[2]))),D[3]),M(S(M(M(S(M(S(d(ft,je),V[1]),M(S(d(Xe,ct),-B[1]),S(d(Se,dt),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-V[2])),M(S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),B[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-F[2]))),-O[3]),S(M(M(S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-O[2])),M(S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),B[2]),S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),-F[2]))),V[3]))),M(M(S(M(M(S(M(S(d(Xe,ct),O[1]),M(S(d(rt,Re),-V[1]),S(d(Ie,ue),F[1]))),D[2]),S(M(S(d(Xe,ct),D[1]),M(S(d(nt,fe),-V[1]),S(d(et,re),F[1]))),-O[2])),M(S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),V[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-F[2]))),-B[3]),S(M(M(S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),D[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-O[2])),M(S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),V[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-B[2]))),F[3])),M(S(M(M(S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),z[2]),S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),-O[2])),M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),B[2]),S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),-F[2]))),D[3]),S(M(M(S(M(S(d(ft,je),O[1]),M(S(d(rt,Re),-B[1]),S(d(Et,Ae),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-O[2])),M(S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),B[2]),S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),-F[2]))),-z[3])))),M(M(M(S(M(M(S(M(S(d(ft,je),z[1]),M(S(d(lt,be),-B[1]),S(d(zt,_e),F[1]))),D[2]),S(M(S(d(ft,je),D[1]),M(S(d(nt,fe),-B[1]),S(d(_t,le),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),B[2]),S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),-F[2]))),O[3]),S(M(M(S(M(S(d(rt,Re),z[1]),M(S(d(lt,be),-O[1]),S(d(ye,ae),F[1]))),D[2]),S(M(S(d(rt,Re),D[1]),M(S(d(nt,fe),-O[1]),S(d(ie,J),F[1]))),-z[2])),M(S(M(S(d(lt,be),D[1]),M(S(d(nt,fe),-z[1]),S(d(X,Z),F[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-F[2]))),-B[3])),M(S(M(M(S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),D[2]),S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),-z[2])),M(S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-B[2]))),F[3]),S(M(M(S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),z[2]),S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),-O[2])),M(S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),V[2]),S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),-B[2]))),D[3]))),M(M(S(M(M(S(M(S(d(Se,dt),O[1]),M(S(d(Et,Ae),-V[1]),S(d(Ie,ue),B[1]))),D[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-O[2])),M(S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),V[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-B[2]))),-z[3]),S(M(M(S(M(S(d(Se,dt),z[1]),M(S(d(zt,_e),-V[1]),S(d(Le,oe),B[1]))),D[2]),S(M(S(d(Se,dt),D[1]),M(S(d(_t,le),-V[1]),S(d(et,re),B[1]))),-z[2])),M(S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),V[2]),S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),-B[2]))),O[3])),M(S(M(M(S(M(S(d(Et,Ae),z[1]),M(S(d(zt,_e),-O[1]),S(d(ye,ae),B[1]))),D[2]),S(M(S(d(Et,Ae),D[1]),M(S(d(_t,le),-O[1]),S(d(ie,J),B[1]))),-z[2])),M(S(M(S(d(zt,_e),D[1]),M(S(d(_t,le),-z[1]),S(d(X,Z),B[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-B[2]))),-V[3]),S(M(M(S(M(S(d(Ie,ue),z[1]),M(S(d(Le,oe),-O[1]),S(d(ye,ae),V[1]))),D[2]),S(M(S(d(Ie,ue),D[1]),M(S(d(et,re),-O[1]),S(d(ie,J),V[1]))),-z[2])),M(S(M(S(d(Le,oe),D[1]),M(S(d(et,re),-z[1]),S(d(X,Z),V[1]))),O[2]),S(M(S(d(ye,ae),D[1]),M(S(d(ie,J),-z[1]),S(d(X,Z),O[1]))),-V[2]))),B[3]))))),Jt=d(gt,Qt);return Jt[Jt.length-1]}return P}var w=[v,p,_];function k(M){var d=w[M.length];return d||(d=w[M.length]=h(M.length)),d.apply(void 0,M)}function x(M,d,C,S,P,D,z,O){function V(B,F,N,Z,J,re){switch(arguments.length){case 0:case 1:return 0;case 2:return S(B,F);case 3:return P(B,F,N);case 4:return D(B,F,N,Z);case 5:return z(B,F,N,Z,J);case 6:return O(B,F,N,Z,J,re)}for(var le=new Array(arguments.length),fe=0;fe<arguments.length;++fe)le[fe]=arguments[fe];return M(le)}return V}function E(){for(;w.length<=c;)w.push(h(w.length));n.exports=x.apply(void 0,[k].concat(w));for(var M=0;M<=c;++M)n.exports[M]=w[M]}E()},6606:function(n,a,o){"use strict";var s=o(8167),l=6;function u(w){var k=w===2?h:w===3?v:w===4?p:w===5?_:T;return w<6?k(s[w]):k(s)}function f(){return[[0]]}function c(w,k){return[[k[0]],[w[0][0]]]}function h(w){return function(x,E){return[w([[+E[0],+x[0][1]],[+E[1],+x[1][1]]]),w([[+x[0][0],+E[0]],[+x[1][0],+E[1]]]),w(x)]}}function v(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2]],[+E[1],+x[1][1],+x[1][2]],[+E[2],+x[2][1],+x[2][2]]]),w([[+x[0][0],+E[0],+x[0][2]],[+x[1][0],+E[1],+x[1][2]],[+x[2][0],+E[2],+x[2][2]]]),w([[+x[0][0],+x[0][1],+E[0]],[+x[1][0],+x[1][1],+E[1]],[+x[2][0],+x[2][1],+E[2]]]),w(x)]}}function p(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3]],[+E[1],+x[1][1],+x[1][2],+x[1][3]],[+E[2],+x[2][1],+x[2][2],+x[2][3]],[+E[3],+x[3][1],+x[3][2],+x[3][3]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3]],[+x[1][0],+E[1],+x[1][2],+x[1][3]],[+x[2][0],+E[2],+x[2][2],+x[2][3]],[+x[3][0],+E[3],+x[3][2],+x[3][3]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3]],[+x[1][0],+x[1][1],+E[1],+x[1][3]],[+x[2][0],+x[2][1],+E[2],+x[2][3]],[+x[3][0],+x[3][1],+E[3],+x[3][3]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+E[3]]]),w(x)]}}function _(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4]],[+E[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4]],[+E[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4]],[+E[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4]],[+E[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3],+x[0][4]],[+x[1][0],+E[1],+x[1][2],+x[1][3],+x[1][4]],[+x[2][0],+E[2],+x[2][2],+x[2][3],+x[2][4]],[+x[3][0],+E[3],+x[3][2],+x[3][3],+x[3][4]],[+x[4][0],+E[4],+x[4][2],+x[4][3],+x[4][4]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3],+x[0][4]],[+x[1][0],+x[1][1],+E[1],+x[1][3],+x[1][4]],[+x[2][0],+x[2][1],+E[2],+x[2][3],+x[2][4]],[+x[3][0],+x[3][1],+E[3],+x[3][3],+x[3][4]],[+x[4][0],+x[4][1],+E[4],+x[4][3],+x[4][4]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0],+x[0][4]],[+x[1][0],+x[1][1],+x[1][2],+E[1],+x[1][4]],[+x[2][0],+x[2][1],+x[2][2],+E[2],+x[2][4]],[+x[3][0],+x[3][1],+x[3][2],+E[3],+x[3][4]],[+x[4][0],+x[4][1],+x[4][2],+E[4],+x[4][4]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+E[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+E[4]]]),w(x)]}}function T(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+E[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+E[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+E[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+E[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+E[5],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+E[1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+E[2],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+E[3],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+E[4],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+E[5],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+E[1],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+E[2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+E[3],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+E[4],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+E[5],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+E[1],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+E[2],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+E[3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+E[4],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+E[5],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+E[0],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+E[1],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+E[2],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+E[3],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+E[4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+E[5],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+E[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+E[4]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+E[5]]]),w(x)]}}var g=[f,c];function A(w,k,x,E,M,d,C,S){return function(D,z){switch(D.length){case 0:return w(D,z);case 1:return k(D,z);case 2:return x(D,z);case 3:return E(D,z);case 4:return M(D,z);case 5:return d(D,z)}var O=C[D.length];return O||(O=C[D.length]=S(D.length)),O(D,z)}}function b(){for(;g.length<l;)g.push(u(g.length));n.exports=A.apply(void 0,g.concat([g,u]));for(var w=0;w<l;++w)n.exports[w]=g[w]}b()},417:function(n,a,o){"use strict";var s=o(9660),l=o(9662),u=o(8289),f=o(4078),c=5,h=11102230246251565e-32,v=(3+16*h)*h,p=(7+56*h)*h;function _(d,C,S,P){return function(z,O,V){var B=d(d(C(O[1],V[0]),C(-V[1],O[0])),d(C(z[1],O[0]),C(-O[1],z[0]))),F=d(C(z[1],V[0]),C(-V[1],z[0])),N=P(B,F);return N[N.length-1]}}function T(d,C,S,P){return function(z,O,V,B){var F=d(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),O[2]),d(S(d(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),S(d(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),d(S(d(C(O[1],B[0]),C(-B[1],O[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),B[2])))),N=d(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),S(d(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),d(S(d(C(O[1],V[0]),C(-V[1],O[0])),z[2]),d(S(d(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),V[2])))),Z=P(F,N);return Z[Z.length-1]}}function g(d,C,S,P){return function(z,O,V,B,F){var N=d(d(d(S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),V[2]),d(S(d(C(V[1],F[0]),C(-F[1],V[0])),-B[2]),S(d(C(V[1],B[0]),C(-B[1],V[0])),F[2]))),O[3]),d(S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),O[2]),d(S(d(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),S(d(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),-V[3]),S(d(S(d(C(V[1],F[0]),C(-F[1],V[0])),O[2]),d(S(d(C(O[1],F[0]),C(-F[1],O[0])),-V[2]),S(d(C(O[1],V[0]),C(-V[1],O[0])),F[2]))),B[3]))),d(S(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),O[2]),d(S(d(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),S(d(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),-F[3]),d(S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),O[2]),d(S(d(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),S(d(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),z[3]),S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-B[2]),S(d(C(z[1],B[0]),C(-B[1],z[0])),F[2]))),-O[3])))),d(d(S(d(S(d(C(O[1],F[0]),C(-F[1],O[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),F[2]))),B[3]),d(S(d(S(d(C(O[1],B[0]),C(-B[1],O[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),B[2]))),-F[3]),S(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),O[2]),d(S(d(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),S(d(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),z[3]))),d(S(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),S(d(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),-O[3]),d(S(d(S(d(C(O[1],B[0]),C(-B[1],O[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),B[2]))),V[3]),S(d(S(d(C(O[1],V[0]),C(-V[1],O[0])),z[2]),d(S(d(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),V[2]))),-B[3]))))),Z=d(d(d(S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),V[2]),d(S(d(C(V[1],F[0]),C(-F[1],V[0])),-B[2]),S(d(C(V[1],B[0]),C(-B[1],V[0])),F[2]))),z[3]),S(d(S(d(C(B[1],F[0]),C(-F[1],B[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-B[2]),S(d(C(z[1],B[0]),C(-B[1],z[0])),F[2]))),-V[3])),d(S(d(S(d(C(V[1],F[0]),C(-F[1],V[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-V[2]),S(d(C(z[1],V[0]),C(-V[1],z[0])),F[2]))),B[3]),S(d(S(d(C(V[1],B[0]),C(-B[1],V[0])),z[2]),d(S(d(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),S(d(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),-F[3]))),d(d(S(d(S(d(C(V[1],F[0]),C(-F[1],V[0])),O[2]),d(S(d(C(O[1],F[0]),C(-F[1],O[0])),-V[2]),S(d(C(O[1],V[0]),C(-V[1],O[0])),F[2]))),z[3]),S(d(S(d(C(V[1],F[0]),C(-F[1],V[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-V[2]),S(d(C(z[1],V[0]),C(-V[1],z[0])),F[2]))),-O[3])),d(S(d(S(d(C(O[1],F[0]),C(-F[1],O[0])),z[2]),d(S(d(C(z[1],F[0]),C(-F[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),F[2]))),V[3]),S(d(S(d(C(O[1],V[0]),C(-V[1],O[0])),z[2]),d(S(d(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),S(d(C(z[1],O[0]),C(-O[1],z[0])),V[2]))),-F[3])))),J=P(N,Z);return J[J.length-1]}}function A(d){var C=d===3?_:d===4?T:g;return C(l,s,u,f)}var b=A(3),w=A(4),k=[function(){return 0},function(){return 0},function(C,S){return S[0]-C[0]},function(C,S,P){var D=(C[1]-P[1])*(S[0]-P[0]),z=(C[0]-P[0])*(S[1]-P[1]),O=D-z,V;if(D>0){if(z<=0)return O;V=D+z}else if(D<0){if(z>=0)return O;V=-(D+z)}else return O;var B=v*V;return O>=B||O<=-B?O:b(C,S,P)},function(C,S,P,D){var z=C[0]-D[0],O=S[0]-D[0],V=P[0]-D[0],B=C[1]-D[1],F=S[1]-D[1],N=P[1]-D[1],Z=C[2]-D[2],J=S[2]-D[2],re=P[2]-D[2],le=O*N,fe=V*F,K=V*B,X=z*N,ae=z*F,oe=O*B,_e=Z*(le-fe)+J*(K-X)+re*(ae-oe),be=(Math.abs(le)+Math.abs(fe))*Math.abs(Z)+(Math.abs(K)+Math.abs(X))*Math.abs(J)+(Math.abs(ae)+Math.abs(oe))*Math.abs(re),he=p*be;return _e>he||-_e>he?_e:w(C,S,P,D)}];function x(d){var C=k[d.length];return C||(C=k[d.length]=A(d.length)),C.apply(void 0,d)}function E(d,C,S,P,D,z,O){return function(B,F,N,Z,J){switch(arguments.length){case 0:case 1:return 0;case 2:return P(B,F);case 3:return D(B,F,N);case 4:return z(B,F,N,Z);case 5:return O(B,F,N,Z,J)}for(var re=new Array(arguments.length),le=0;le<arguments.length;++le)re[le]=arguments[le];return d(re)}}function M(){for(;k.length<=c;)k.push(A(k.length));n.exports=E.apply(void 0,[x].concat(k));for(var d=0;d<=c;++d)n.exports[d]=k[d]}M()},2019:function(n,a,o){"use strict";var s=o(9662),l=o(8289);n.exports=u;function u(f,c){if(f.length===1)return l(c,f[0]);if(c.length===1)return l(f,c[0]);if(f.length===0||c.length===0)return[0];var h=[0];if(f.length<c.length)for(var v=0;v<f.length;++v)h=s(h,l(c,f[v]));else for(var v=0;v<c.length;++v)h=s(h,l(f,c[v]));return h}},8289:function(n,a,o){"use strict";var s=o(9660),l=o(87);n.exports=u;function u(f,c){var h=f.length;if(h===1){var v=s(f[0],c);return v[0]?v:[v[1]]}var p=new Array(2*h),_=[.1,.1],T=[.1,.1],g=0;s(f[0],c,_),_[0]&&(p[g++]=_[0]);for(var A=1;A<h;++A){s(f[A],c,T);var b=_[1];l(b,T[0],_),_[0]&&(p[g++]=_[0]);var w=T[1],k=_[1],x=w+k,E=x-w,M=k-E;_[1]=x,M&&(p[g++]=M)}return _[1]&&(p[g++]=_[1]),g===0&&(p[g++]=0),p.length=g,p}},4434:function(n,a,o){"use strict";n.exports=u;var s=o(417)[3];function l(f,c,h,v){for(var p=0;p<2;++p){var _=f[p],T=c[p],g=Math.min(_,T),A=Math.max(_,T),b=h[p],w=v[p],k=Math.min(b,w),x=Math.max(b,w);if(x<g||A<k)return!1}return!0}function u(f,c,h,v){var p=s(f,h,v),_=s(c,h,v);if(p>0&&_>0||p<0&&_<0)return!1;var T=s(h,f,c),g=s(v,f,c);return T>0&&g>0||T<0&&g<0?!1:p===0&&_===0&&T===0&&g===0?l(f,c,h,v):!0}},4078:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,p=v+h;return p?[p,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],-l[0]);var c=u+f,h=new Array(c),v=0,p=0,_=0,T=Math.abs,g=s[p],A=T(g),b=-l[_],w=T(b),k,x;A<w?(x=g,p+=1,p<u&&(g=s[p],A=T(g))):(x=b,_+=1,_<f&&(b=-l[_],w=T(b))),p<u&&A<w||_>=f?(k=g,p+=1,p<u&&(g=s[p],A=T(g))):(k=b,_+=1,_<f&&(b=-l[_],w=T(b)));for(var E=k+x,M=E-k,d=x-M,C=d,S=E,P,D,z,O,V;p<u&&_<f;)A<w?(k=g,p+=1,p<u&&(g=s[p],A=T(g))):(k=b,_+=1,_<f&&(b=-l[_],w=T(b))),x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P;for(;p<u;)k=g,x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P,p+=1,p<u&&(g=s[p]);for(;_<f;)k=b,x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P,_+=1,_<f&&(b=-l[_]);return C&&(h[v++]=C),S&&(h[v++]=S),v||(h[v++]=0),h.length=v,h}},9662:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,p=v+h;return p?[p,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],l[0]);var c=u+f,h=new Array(c),v=0,p=0,_=0,T=Math.abs,g=s[p],A=T(g),b=l[_],w=T(b),k,x;A<w?(x=g,p+=1,p<u&&(g=s[p],A=T(g))):(x=b,_+=1,_<f&&(b=l[_],w=T(b))),p<u&&A<w||_>=f?(k=g,p+=1,p<u&&(g=s[p],A=T(g))):(k=b,_+=1,_<f&&(b=l[_],w=T(b)));for(var E=k+x,M=E-k,d=x-M,C=d,S=E,P,D,z,O,V;p<u&&_<f;)A<w?(k=g,p+=1,p<u&&(g=s[p],A=T(g))):(k=b,_+=1,_<f&&(b=l[_],w=T(b))),x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P;for(;p<u;)k=g,x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P,p+=1,p<u&&(g=s[p]);for(;_<f;)k=b,x=C,E=k+x,M=E-k,d=x-M,d&&(h[v++]=d),P=S+E,D=P-S,z=P-D,O=E-D,V=S-z,C=V+O,S=P,_+=1,_<f&&(b=l[_]);return C&&(h[v++]=C),S&&(h[v++]=S),v||(h[v++]=0),h.length=v,h}},8691:function(n,a,o){"use strict";n.exports=u;var s=o(2692),l=o(7037);function u(f){return l(s(f))}},7212:function(n,a,o){"use strict";n.exports=g;var s=o(5050),l=o(5306),u=o(8729),f=o(1168);function c(A){for(var b=A.length,w=0,k=0;k<b;++k)w=Math.max(w,A[k].length)|0;return w-1}function h(A,b){for(var w=A.length,k=l.mallocUint8(w),x=0;x<w;++x)k[x]=A[x]<b|0;return k}function v(A,b){for(var w=A.length,k=b*(b+1)/2*w|0,x=l.mallocUint32(k*2),E=0,M=0;M<w;++M)for(var d=A[M],b=d.length,C=0;C<b;++C)for(var S=0;S<C;++S){var P=d[S],D=d[C];x[E++]=Math.min(P,D)|0,x[E++]=Math.max(P,D)|0}var z=E/2|0;u(s(x,[z,2]));for(var O=2,M=2;M<E;M+=2)x[M-2]===x[M]&&x[M-1]===x[M+1]||(x[O++]=x[M],x[O++]=x[M+1]);return s(x,[O/2|0,2])}function p(A,b,w,k){for(var x=A.data,E=A.shape[0],M=l.mallocDouble(E),d=0,C=0;C<E;++C){var S=x[2*C],P=x[2*C+1];if(w[S]!==w[P]){var D=b[S],z=b[P];x[2*d]=S,x[2*d+1]=P,M[d++]=(z-k)/(z-D)}}return A.shape[0]=d,s(M,[d])}function _(A,b){var w=l.mallocInt32(b*2),k=A.shape[0],x=A.data;w[0]=0;for(var E=0,M=0;M<k;++M){var d=x[2*M];if(d!==E){for(w[2*E+1]=M;++E<d;)w[2*E]=M,w[2*E+1]=M;w[2*E]=M}}for(w[2*E+1]=k;++E<b;)w[2*E]=w[2*E+1]=k;return w}function T(A){for(var b=A.shape[0]|0,w=A.data,k=new Array(b),x=0;x<b;++x)k[x]=[w[2*x],w[2*x+1]];return k}function g(A,b,w,k){w=w||0,typeof k=="undefined"&&(k=c(A));var x=A.length;if(x===0||k<1)return{cells:[],vertexIds:[],vertexWeights:[]};var E=h(b,+w),M=v(A,k),d=p(M,b,E,+w),C=_(M,b.length|0),S=f(k)(A,M.data,C,E),P=T(M),D=[].slice.call(d.data,0,d.shape[0]);return l.free(E),l.free(M.data),l.free(d.data),l.free(C),{cells:S,vertexIds:P,vertexWeights:D}}},1168:function(n){"use strict";n.exports=o;var a=[function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*p],g=f[2*p+1];T<g;){var A=T+g>>1,b=c[2*A+1];if(b===_)return A;_<b?g=A:T=A+1}return T}function u(f,c,h,v){for(var p=f.length,_=[],T=0;T<p;++T)var g=f[T],A=g.length;return _}return u},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*p],g=f[2*p+1];T<g;){var A=T+g>>1,b=c[2*A+1];if(b===_)return A;_<b?g=A:T=A+1}return T}function u(f,c,h,v){for(var p=f.length,_=[],T=0;T<p;++T){var g=f[T],A=g.length;if(A===2){var b=(v[g[0]]<<0)+(v[g[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[1])]);break;case 2:_.push([l(h,c,g[1],g[0])]);break;case 3:break}}}return _}return u},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*p],g=f[2*p+1];T<g;){var A=T+g>>1,b=c[2*A+1];if(b===_)return A;_<b?g=A:T=A+1}return T}function u(f,c,h,v){for(var p=f.length,_=[],T=0;T<p;++T){var g=f[T],A=g.length;if(A===3){var b=(v[g[0]]<<0)+(v[g[1]]<<1)+(v[g[2]]<<2);if(b===0||b===7)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[2]),l(h,c,g[0],g[1])]);break;case 2:_.push([l(h,c,g[1],g[0]),l(h,c,g[1],g[2])]);break;case 3:_.push([l(h,c,g[0],g[2]),l(h,c,g[1],g[2])]);break;case 4:_.push([l(h,c,g[2],g[1]),l(h,c,g[2],g[0])]);break;case 5:_.push([l(h,c,g[2],g[1]),l(h,c,g[0],g[1])]);break;case 6:_.push([l(h,c,g[1],g[0]),l(h,c,g[2],g[0])]);break;case 7:break}}else if(A===2){var b=(v[g[0]]<<0)+(v[g[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[1])]);break;case 2:_.push([l(h,c,g[1],g[0])]);break;case 3:break}}}return _}return u},function(){function l(f,c,h,v){for(var p=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*p],g=f[2*p+1];T<g;){var A=T+g>>1,b=c[2*A+1];if(b===_)return A;_<b?g=A:T=A+1}return T}function u(f,c,h,v){for(var p=f.length,_=[],T=0;T<p;++T){var g=f[T],A=g.length;if(A===4){var b=(v[g[0]]<<0)+(v[g[1]]<<1)+(v[g[2]]<<2)+(v[g[3]]<<3);if(b===0||b===15)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[1]),l(h,c,g[0],g[2]),l(h,c,g[0],g[3])]);break;case 2:_.push([l(h,c,g[1],g[2]),l(h,c,g[1],g[0]),l(h,c,g[1],g[3])]);break;case 3:_.push([l(h,c,g[1],g[2]),l(h,c,g[0],g[2]),l(h,c,g[0],g[3])],[l(h,c,g[1],g[3]),l(h,c,g[1],g[2]),l(h,c,g[0],g[3])]);break;case 4:_.push([l(h,c,g[2],g[0]),l(h,c,g[2],g[1]),l(h,c,g[2],g[3])]);break;case 5:_.push([l(h,c,g[0],g[1]),l(h,c,g[2],g[1]),l(h,c,g[0],g[3])],[l(h,c,g[2],g[1]),l(h,c,g[2],g[3]),l(h,c,g[0],g[3])]);break;case 6:_.push([l(h,c,g[2],g[0]),l(h,c,g[1],g[0]),l(h,c,g[1],g[3])],[l(h,c,g[2],g[3]),l(h,c,g[2],g[0]),l(h,c,g[1],g[3])]);break;case 7:_.push([l(h,c,g[0],g[3]),l(h,c,g[1],g[3]),l(h,c,g[2],g[3])]);break;case 8:_.push([l(h,c,g[3],g[1]),l(h,c,g[3],g[0]),l(h,c,g[3],g[2])]);break;case 9:_.push([l(h,c,g[3],g[1]),l(h,c,g[0],g[1]),l(h,c,g[0],g[2])],[l(h,c,g[3],g[2]),l(h,c,g[3],g[1]),l(h,c,g[0],g[2])]);break;case 10:_.push([l(h,c,g[1],g[0]),l(h,c,g[3],g[0]),l(h,c,g[1],g[2])],[l(h,c,g[3],g[0]),l(h,c,g[3],g[2]),l(h,c,g[1],g[2])]);break;case 11:_.push([l(h,c,g[1],g[2]),l(h,c,g[0],g[2]),l(h,c,g[3],g[2])]);break;case 12:_.push([l(h,c,g[3],g[0]),l(h,c,g[2],g[0]),l(h,c,g[2],g[1])],[l(h,c,g[3],g[1]),l(h,c,g[3],g[0]),l(h,c,g[2],g[1])]);break;case 13:_.push([l(h,c,g[0],g[1]),l(h,c,g[2],g[1]),l(h,c,g[3],g[1])]);break;case 14:_.push([l(h,c,g[2],g[0]),l(h,c,g[1],g[0]),l(h,c,g[3],g[0])]);break;case 15:break}}else if(A===3){var b=(v[g[0]]<<0)+(v[g[1]]<<1)+(v[g[2]]<<2);if(b===0||b===7)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[2]),l(h,c,g[0],g[1])]);break;case 2:_.push([l(h,c,g[1],g[0]),l(h,c,g[1],g[2])]);break;case 3:_.push([l(h,c,g[0],g[2]),l(h,c,g[1],g[2])]);break;case 4:_.push([l(h,c,g[2],g[1]),l(h,c,g[2],g[0])]);break;case 5:_.push([l(h,c,g[2],g[1]),l(h,c,g[0],g[1])]);break;case 6:_.push([l(h,c,g[1],g[0]),l(h,c,g[2],g[0])]);break;case 7:break}}else if(A===2){var b=(v[g[0]]<<0)+(v[g[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,g[0],g[1])]);break;case 2:_.push([l(h,c,g[1],g[0])]);break;case 3:break}}}return _}return u}];function o(s){return a[s]()}},8211:function(n,a,o){"use strict";var s,l=o(2288),u=o(1731);function f(C){for(var S=0,P=Math.max,D=0,z=C.length;D<z;++D)S=P(S,C[D].length);return S-1}s=f;function c(C){for(var S=-1,P=Math.max,D=0,z=C.length;D<z;++D)for(var O=C[D],V=0,B=O.length;V<B;++V)S=P(S,O[V]);return S+1}s=c;function h(C){for(var S=new Array(C.length),P=0,D=C.length;P<D;++P)S[P]=C[P].slice(0);return S}s=h;function v(C,S){var P=C.length,D=C.length-S.length,z=Math.min;if(D)return D;switch(P){case 0:return 0;case 1:return C[0]-S[0];case 2:var N=C[0]+C[1]-S[0]-S[1];return N||z(C[0],C[1])-z(S[0],S[1]);case 3:var O=C[0]+C[1],V=S[0]+S[1];if(N=O+C[2]-(V+S[2]),N)return N;var B=z(C[0],C[1]),F=z(S[0],S[1]),N=z(B,C[2])-z(F,S[2]);return N||z(B+C[2],O)-z(F+S[2],V);default:var Z=C.slice(0);Z.sort();var J=S.slice(0);J.sort();for(var re=0;re<P;++re)if(D=Z[re]-J[re],D)return D;return 0}}a.H=v;function p(C,S){return v(C[0],S[0])}function _(C,S){if(S){for(var P=C.length,D=new Array(P),z=0;z<P;++z)D[z]=[C[z],S[z]];D.sort(p);for(var z=0;z<P;++z)C[z]=D[z][0],S[z]=D[z][1];return C}else return C.sort(v),C}s=_;function T(C){if(C.length===0)return[];for(var S=1,P=C.length,D=1;D<P;++D){var z=C[D];if(v(z,C[D-1])){if(D===S){S++;continue}C[S++]=z}}return C.length=S,C}s=T;function g(C,S){for(var P=0,D=C.length-1,z=-1;P<=D;){var O=P+D>>1,V=v(C[O],S);V<=0?(V===0&&(z=O),P=O+1):V>0&&(D=O-1)}return z}s=g;function A(C,S){for(var P=new Array(C.length),D=0,z=P.length;D<z;++D)P[D]=[];for(var O=[],D=0,V=S.length;D<V;++D)for(var B=S[D],F=B.length,N=1,Z=1<<F;N<Z;++N){O.length=l.popCount(N);for(var J=0,re=0;re<F;++re)N&1<<re&&(O[J++]=B[re]);var le=g(C,O);if(!(le<0))for(;P[le++].push(D),!(le>=C.length||v(C[le],O)!==0););}return P}s=A;function b(C,S){if(!S)return A(T(k(C,0)),C,0);for(var P=new Array(S),D=0;D<S;++D)P[D]=[];for(var D=0,z=C.length;D<z;++D)for(var O=C[D],V=0,B=O.length;V<B;++V)P[O[V]].push(D);return P}s=b;function w(C){for(var S=[],P=0,D=C.length;P<D;++P)for(var z=C[P],O=z.length|0,V=1,B=1<<O;V<B;++V){for(var F=[],N=0;N<O;++N)V>>>N&1&&F.push(z[N]);S.push(F)}return _(S)}s=w;function k(C,S){if(S<0)return[];for(var P=[],D=(1<<S+1)-1,z=0;z<C.length;++z)for(var O=C[z],V=D;V<1<<O.length;V=l.nextCombination(V)){for(var B=new Array(S+1),F=0,N=0;N<O.length;++N)V&1<<N&&(B[F++]=O[N]);P.push(B)}return _(P)}s=k;function x(C){for(var S=[],P=0,D=C.length;P<D;++P)for(var z=C[P],O=0,V=z.length;O<V;++O){for(var B=new Array(z.length-1),F=0,N=0;F<V;++F)F!==O&&(B[N++]=z[F]);S.push(B)}return _(S)}s=x;function E(C,S){for(var P=new u(S),D=0;D<C.length;++D)for(var z=C[D],O=0;O<z.length;++O)for(var V=O+1;V<z.length;++V)P.link(z[O],z[V]);for(var B=[],F=P.ranks,D=0;D<F.length;++D)F[D]=-1;for(var D=0;D<C.length;++D){var N=P.find(C[D][0]);F[N]<0?(F[N]=B.length,B.push([C[D].slice(0)])):B[F[N]].push(C[D].slice(0))}return B}function M(C){for(var S=T(_(k(C,0))),P=new u(S.length),D=0;D<C.length;++D)for(var z=C[D],O=0;O<z.length;++O)for(var V=g(S,[z[O]]),B=O+1;B<z.length;++B)P.link(V,g(S,[z[B]]));for(var F=[],N=P.ranks,D=0;D<N.length;++D)N[D]=-1;for(var D=0;D<C.length;++D){var Z=P.find(g(S,[C[D][0]]));N[Z]<0?(N[Z]=F.length,F.push([C[D].slice(0)])):F[N[Z]].push(C[D].slice(0))}return F}function d(C,S){return S?E(C,S):M(C)}s=d},9392:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},6656:function(n,a,o){"use strict";"use restrict";var s=o(9392),l=o(9521);function u(d){for(var C=0,S=Math.max,P=0,D=d.length;P<D;++P)C=S(C,d[P].length);return C-1}a.dimension=u;function f(d){for(var C=-1,S=Math.max,P=0,D=d.length;P<D;++P)for(var z=d[P],O=0,V=z.length;O<V;++O)C=S(C,z[O]);return C+1}a.countVertices=f;function c(d){for(var C=new Array(d.length),S=0,P=d.length;S<P;++S)C[S]=d[S].slice(0);return C}a.cloneCells=c;function h(d,C){var S=d.length,P=d.length-C.length,D=Math.min;if(P)return P;switch(S){case 0:return 0;case 1:return d[0]-C[0];case 2:var F=d[0]+d[1]-C[0]-C[1];return F||D(d[0],d[1])-D(C[0],C[1]);case 3:var z=d[0]+d[1],O=C[0]+C[1];if(F=z+d[2]-(O+C[2]),F)return F;var V=D(d[0],d[1]),B=D(C[0],C[1]),F=D(V,d[2])-D(B,C[2]);return F||D(V+d[2],z)-D(B+C[2],O);default:var N=d.slice(0);N.sort();var Z=C.slice(0);Z.sort();for(var J=0;J<S;++J)if(P=N[J]-Z[J],P)return P;return 0}}a.compareCells=h;function v(d,C){return h(d[0],C[0])}function p(d,C){if(C){for(var S=d.length,P=new Array(S),D=0;D<S;++D)P[D]=[d[D],C[D]];P.sort(v);for(var D=0;D<S;++D)d[D]=P[D][0],C[D]=P[D][1];return d}else return d.sort(h),d}a.normalize=p;function _(d){if(d.length===0)return[];for(var C=1,S=d.length,P=1;P<S;++P){var D=d[P];if(h(D,d[P-1])){if(P===C){C++;continue}d[C++]=D}}return d.length=C,d}a.unique=_;function T(d,C){for(var S=0,P=d.length-1,D=-1;S<=P;){var z=S+P>>1,O=h(d[z],C);O<=0?(O===0&&(D=z),S=z+1):O>0&&(P=z-1)}return D}a.findCell=T;function g(d,C){for(var S=new Array(d.length),P=0,D=S.length;P<D;++P)S[P]=[];for(var z=[],P=0,O=C.length;P<O;++P)for(var V=C[P],B=V.length,F=1,N=1<<B;F<N;++F){z.length=s.popCount(F);for(var Z=0,J=0;J<B;++J)F&1<<J&&(z[Z++]=V[J]);var re=T(d,z);if(!(re<0))for(;S[re++].push(P),!(re>=d.length||h(d[re],z)!==0););}return S}a.incidence=g;function A(d,C){if(!C)return g(_(w(d,0)),d,0);for(var S=new Array(C),P=0;P<C;++P)S[P]=[];for(var P=0,D=d.length;P<D;++P)for(var z=d[P],O=0,V=z.length;O<V;++O)S[z[O]].push(P);return S}a.dual=A;function b(d){for(var C=[],S=0,P=d.length;S<P;++S)for(var D=d[S],z=D.length|0,O=1,V=1<<z;O<V;++O){for(var B=[],F=0;F<z;++F)O>>>F&1&&B.push(D[F]);C.push(B)}return p(C)}a.explode=b;function w(d,C){if(C<0)return[];for(var S=[],P=(1<<C+1)-1,D=0;D<d.length;++D)for(var z=d[D],O=P;O<1<<z.length;O=s.nextCombination(O)){for(var V=new Array(C+1),B=0,F=0;F<z.length;++F)O&1<<F&&(V[B++]=z[F]);S.push(V)}return p(S)}a.skeleton=w;function k(d){for(var C=[],S=0,P=d.length;S<P;++S)for(var D=d[S],z=0,O=D.length;z<O;++z){for(var V=new Array(D.length-1),B=0,F=0;B<O;++B)B!==z&&(V[F++]=D[B]);C.push(V)}return p(C)}a.boundary=k;function x(d,C){for(var S=new l(C),P=0;P<d.length;++P)for(var D=d[P],z=0;z<D.length;++z)for(var O=z+1;O<D.length;++O)S.link(D[z],D[O]);for(var V=[],B=S.ranks,P=0;P<B.length;++P)B[P]=-1;for(var P=0;P<d.length;++P){var F=S.find(d[P][0]);B[F]<0?(B[F]=V.length,V.push([d[P].slice(0)])):V[B[F]].push(d[P].slice(0))}return V}function E(d){for(var C=_(p(w(d,0))),S=new l(C.length),P=0;P<d.length;++P)for(var D=d[P],z=0;z<D.length;++z)for(var O=T(C,[D[z]]),V=z+1;V<D.length;++V)S.link(O,T(C,[D[V]]));for(var B=[],F=S.ranks,P=0;P<F.length;++P)F[P]=-1;for(var P=0;P<d.length;++P){var N=S.find(T(C,[d[P][0]]));F[N]<0?(F[N]=B.length,B.push([d[P].slice(0)])):B[F[N]].push(d[P].slice(0))}return B}function M(d,C){return C?x(d,C):E(d)}a.connectedComponents=M},9521:function(n){"use strict";"use restrict";n.exports=a;function a(o){this.roots=new Array(o),this.ranks=new Array(o);for(var s=0;s<o;++s)this.roots[s]=s,this.ranks[s]=0}a.prototype.length=function(){return this.roots.length},a.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},a.prototype.find=function(o){for(var s=this.roots;s[o]!==o;){var l=s[o];s[o]=s[l],o=l}return o},a.prototype.link=function(o,s){var l=this.find(o),u=this.find(s);if(l!==u){var f=this.ranks,c=this.roots,h=f[l],v=f[u];h<v?c[l]=u:v<h?c[u]=l:(c[u]=l,++f[l])}}},8243:function(n,a,o){"use strict";n.exports=f;var s=o(417),l=o(6656);function u(c,h,v){var p=Math.abs(s(c,h,v)),_=Math.sqrt(Math.pow(h[0]-v[0],2)+Math.pow(h[1]-v[1],2));return p/_}function f(c,h,v){for(var p=h.length,_=c.length,T=new Array(p),g=new Array(p),A=new Array(p),b=new Array(p),w=0;w<p;++w)T[w]=g[w]=-1,A[w]=1/0,b[w]=!1;for(var w=0;w<_;++w){var k=c[w];if(k.length!==2)throw new Error("Input must be a graph");var x=k[1],E=k[0];g[E]!==-1?g[E]=-2:g[E]=x,T[x]!==-1?T[x]=-2:T[x]=E}function M(X){if(b[X])return 1/0;var ae=T[X],oe=g[X];return ae<0||oe<0?1/0:u(h[X],h[ae],h[oe])}function d(X,ae){var oe=B[X],_e=B[ae];B[X]=_e,B[ae]=oe,F[oe]=ae,F[_e]=X}function C(X){return A[B[X]]}function S(X){return X&1?X-1>>1:(X>>1)-1}function P(X){for(var ae=C(X);;){var oe=ae,_e=2*X+1,be=2*(X+1),he=X;if(_e<Z){var ie=C(_e);ie<oe&&(he=_e,oe=ie)}if(be<Z){var ye=C(be);ye<oe&&(he=be)}if(he===X)return X;d(X,he),X=he}}function D(X){for(var ae=C(X);X>0;){var oe=S(X);if(oe>=0){var _e=C(oe);if(ae<_e){d(X,oe),X=oe;continue}}return X}}function z(){if(Z>0){var X=B[0];return d(0,Z-1),Z-=1,P(0),X}return-1}function O(X,ae){var oe=B[X];return A[oe]===ae?X:(A[oe]=-1/0,D(X),z(),A[oe]=ae,Z+=1,D(Z-1))}function V(X){if(!b[X]){b[X]=!0;var ae=T[X],oe=g[X];T[oe]>=0&&(T[oe]=ae),g[ae]>=0&&(g[ae]=oe),F[ae]>=0&&O(F[ae],M(ae)),F[oe]>=0&&O(F[oe],M(oe))}}for(var B=[],F=new Array(p),w=0;w<p;++w){var N=A[w]=M(w);N<1/0?(F[w]=B.length,B.push(w)):F[w]=-1}for(var Z=B.length,w=Z>>1;w>=0;--w)P(w);for(;;){var J=z();if(J<0||A[J]>v)break;V(J)}for(var re=[],w=0;w<p;++w)b[w]||(F[w]=re.length,re.push(h[w].slice()));var le=re.length;function fe(X,ae){if(X[ae]<0)return ae;var oe=ae,_e=ae;do{var be=X[_e];if(!b[_e]||be<0||be===_e||(_e=be,be=X[_e],!b[_e]||be<0||be===_e))break;_e=be,oe=X[oe]}while(oe!==_e);for(var he=ae;he!==_e;he=X[he])X[he]=_e;return _e}var K=[];return c.forEach(function(X){var ae=fe(T,X[0]),oe=fe(g,X[1]);if(ae>=0&&oe>=0&&ae!==oe){var _e=F[ae],be=F[oe];_e!==be&&K.push([_e,be])}}),l.unique(l.normalize(K)),{positions:re,edges:K}}},6638:function(n,a,o){"use strict";n.exports=u;var s=o(417);function l(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else{var p=Math.min(f[0][1],f[1][1]),_=Math.max(f[0][1],f[1][1]),T=Math.min(c[0][1],c[1][1]),g=Math.max(c[0][1],c[1][1]);return _<T?_-T:p>g?p-g:_-g}var A,b;f[0][1]<f[1][1]?(A=f[0],b=f[1]):(A=f[1],b=f[0]);var w=s(v,h,A);return w||(w=s(v,h,b),w)?w:b-v}function u(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else return l(c,f);var p,_;if(f[0][0]<f[1][0])p=f[0],_=f[1];else if(f[0][0]>f[1][0])p=f[1],_=f[0];else return-l(f,c);var T=s(h,v,_),g=s(h,v,p);if(T<0){if(g<=0)return T}else if(T>0){if(g>=0)return T}else if(g)return g;if(T=s(_,p,v),g=s(_,p,h),T<0){if(g<=0)return T}else if(T>0){if(g>=0)return T}else if(g)return g;return v[0]-_[0]}},4385:function(n,a,o){"use strict";n.exports=g;var s=o(5070),l=o(7080),u=o(417),f=o(6638);function c(A,b,w){this.slabs=A,this.coordinates=b,this.horizontal=w}var h=c.prototype;function v(A,b){return A.y-b}function p(A,b){for(var w=null;A;){var k=A.key,x,E;k[0][0]<k[1][0]?(x=k[0],E=k[1]):(x=k[1],E=k[0]);var M=u(x,E,b);if(M<0)A=A.left;else if(M>0)if(b[0]!==k[1][0])w=A,A=A.right;else{var d=p(A.right,b);if(d)return d;A=A.left}else{if(b[0]!==k[1][0])return A;var d=p(A.right,b);if(d)return d;A=A.left}}return w}h.castUp=function(A){var b=s.le(this.coordinates,A[0]);if(b<0)return-1;var w=this.slabs[b],k=p(this.slabs[b],A),x=-1;if(k&&(x=k.value),this.coordinates[b]===A[0]){var E=null;if(k&&(E=k.key),b>0){var M=p(this.slabs[b-1],A);M&&(E?f(M.key,E)>0&&(E=M.key,x=M.value):(x=M.value,E=M.key))}var d=this.horizontal[b];if(d.length>0){var C=s.ge(d,A[1],v);if(C<d.length){var S=d[C];if(A[1]===S.y){if(S.closed)return S.index;for(;C<d.length-1&&d[C+1].y===A[1];)if(C=C+1,S=d[C],S.closed)return S.index;if(S.y===A[1]&&!S.start){if(C=C+1,C>=d.length)return x;S=d[C]}}if(S.start)if(E){var P=u(E[0],E[1],[A[0],S.y]);E[0][0]>E[1][0]&&(P=-P),P>0&&(x=S.index)}else x=S.index;else S.y!==A[1]&&(x=S.index)}}}return x};function _(A,b,w,k){this.y=A,this.index=b,this.start=w,this.closed=k}function T(A,b,w,k){this.x=A,this.segment=b,this.create=w,this.index=k}function g(A){for(var b=A.length,w=2*b,k=new Array(w),x=0;x<b;++x){var E=A[x],M=E[0][0]<E[1][0];k[2*x]=new T(E[0][0],E,M,x),k[2*x+1]=new T(E[1][0],E,!M,x)}k.sort(function(B,F){var N=B.x-F.x;return N||(N=B.create-F.create,N)?N:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var d=l(f),C=[],S=[],P=[],D=-1/0,x=0;x<w;){for(var z=k[x].x,O=[];x<w;){var V=k[x];if(V.x!==z)break;x+=1,V.segment[0][0]===V.x&&V.segment[1][0]===V.x?V.create&&(V.segment[0][1]<V.segment[1][1]?(O.push(new _(V.segment[0][1],V.index,!0,!0)),O.push(new _(V.segment[1][1],V.index,!1,!1))):(O.push(new _(V.segment[1][1],V.index,!0,!1)),O.push(new _(V.segment[0][1],V.index,!1,!0)))):V.create?d=d.insert(V.segment,V.index):d=d.remove(V.segment)}C.push(d.root),S.push(z),P.push(O)}return new c(C,S,P)}},4670:function(n,a,o){"use strict";var s=o(9130),l=o(9662);n.exports=c,n.exports.positive=h,n.exports.negative=v;function u(p,_){var T=l(s(p,_),[_[_.length-1]]);return T[T.length-1]}function f(p,_,T,g){var A=g-_,b=-_/A;b<0?b=0:b>1&&(b=1);for(var w=1-b,k=p.length,x=new Array(k),E=0;E<k;++E)x[E]=b*p[E]+w*T[E];return x}function c(p,_){for(var T=[],g=[],A=u(p[p.length-1],_),b=p[p.length-1],w=p[0],k=0;k<p.length;++k,b=w){w=p[k];var x=u(w,_);if(A<0&&x>0||A>0&&x<0){var E=f(b,x,w,A);T.push(E),g.push(E.slice())}x<0?g.push(w.slice()):x>0?T.push(w.slice()):(T.push(w.slice()),g.push(w.slice())),A=x}return{positive:T,negative:g}}function h(p,_){for(var T=[],g=u(p[p.length-1],_),A=p[p.length-1],b=p[0],w=0;w<p.length;++w,A=b){b=p[w];var k=u(b,_);(g<0&&k>0||g>0&&k<0)&&T.push(f(A,k,b,g)),k>=0&&T.push(b.slice()),g=k}return T}function v(p,_){for(var T=[],g=u(p[p.length-1],_),A=p[p.length-1],b=p[0],w=0;w<p.length;++w,A=b){b=p[w];var k=u(b,_);(g<0&&k>0||g>0&&k<0)&&T.push(f(A,k,b,g)),k<=0&&T.push(b.slice()),g=k}return T}},8974:function(n,a,o){var s;(function(){"use strict";var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function u(p){return c(v(p),arguments)}function f(p,_){return u.apply(null,[p].concat(_||[]))}function c(p,_){var T=1,g=p.length,A,b="",w,k,x,E,M,d,C,S;for(w=0;w<g;w++)if(typeof p[w]=="string")b+=p[w];else if(typeof p[w]=="object"){if(x=p[w],x.keys)for(A=_[T],k=0;k<x.keys.length;k++){if(A==null)throw new Error(u('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[k],x.keys[k-1]));A=A[x.keys[k]]}else x.param_no?A=_[x.param_no]:A=_[T++];if(l.not_type.test(x.type)&&l.not_primitive.test(x.type)&&A instanceof Function&&(A=A()),l.numeric_arg.test(x.type)&&typeof A!="number"&&isNaN(A))throw new TypeError(u("[sprintf] expecting number but found %T",A));switch(l.number.test(x.type)&&(C=A>=0),x.type){case"b":A=parseInt(A,10).toString(2);break;case"c":A=String.fromCharCode(parseInt(A,10));break;case"d":case"i":A=parseInt(A,10);break;case"j":A=JSON.stringify(A,null,x.width?parseInt(x.width):0);break;case"e":A=x.precision?parseFloat(A).toExponential(x.precision):parseFloat(A).toExponential();break;case"f":A=x.precision?parseFloat(A).toFixed(x.precision):parseFloat(A);break;case"g":A=x.precision?String(Number(A.toPrecision(x.precision))):parseFloat(A);break;case"o":A=(parseInt(A,10)>>>0).toString(8);break;case"s":A=String(A),A=x.precision?A.substring(0,x.precision):A;break;case"t":A=String(!!A),A=x.precision?A.substring(0,x.precision):A;break;case"T":A=Object.prototype.toString.call(A).slice(8,-1).toLowerCase(),A=x.precision?A.substring(0,x.precision):A;break;case"u":A=parseInt(A,10)>>>0;break;case"v":A=A.valueOf(),A=x.precision?A.substring(0,x.precision):A;break;case"x":A=(parseInt(A,10)>>>0).toString(16);break;case"X":A=(parseInt(A,10)>>>0).toString(16).toUpperCase();break}l.json.test(x.type)?b+=A:(l.number.test(x.type)&&(!C||x.sign)?(S=C?"+":"-",A=A.toString().replace(l.sign,"")):S="",M=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",d=x.width-(S+A).length,E=x.width&&d>0?M.repeat(d):"",b+=x.align?S+A+E:M==="0"?S+E+A:E+S+A)}return b}var h=Object.create(null);function v(p){if(h[p])return h[p];for(var _=p,T,g=[],A=0;_;){if((T=l.text.exec(_))!==null)g.push(T[0]);else if((T=l.modulo.exec(_))!==null)g.push("%");else if((T=l.placeholder.exec(_))!==null){if(T[2]){A|=1;var b=[],w=T[2],k=[];if((k=l.key.exec(w))!==null)for(b.push(k[1]);(w=w.substring(k[0].length))!=="";)if((k=l.key_access.exec(w))!==null)b.push(k[1]);else if((k=l.index_access.exec(w))!==null)b.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");T[2]=b}else A|=2;if(A===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:T[0],param_no:T[1],keys:T[2],sign:T[3],pad_char:T[4],align:T[5],width:T[6],precision:T[7],type:T[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");_=_.substring(T[0].length)}return h[p]=g}a.sprintf=u,a.vsprintf=f,typeof window!="undefined"&&(window.sprintf=u,window.vsprintf=f,s=function(){return{sprintf:u,vsprintf:f}}.call(a,o,a,n),s!==void 0&&(n.exports=s))})()},4162:function(n,a,o){"use strict";n.exports=v;var s=o(9284),l=o(9584),u={"2d":function(p,_,T){var g=p({order:_,scalarArguments:3,getters:T==="generic"?[0]:void 0,phase:function(b,w,k,x){return b>x|0},vertex:function(b,w,k,x,E,M,d,C,S,P,D,z,O){var V=(d<<0)+(C<<1)+(S<<2)+(P<<3)|0;if(!(V===0||V===15))switch(V){case 0:D.push([b-.5,w-.5]);break;case 1:D.push([b-.25-.25*(x+k-2*O)/(k-x),w-.25-.25*(E+k-2*O)/(k-E)]);break;case 2:D.push([b-.75-.25*(-x-k+2*O)/(x-k),w-.25-.25*(M+x-2*O)/(x-M)]);break;case 3:D.push([b-.5,w-.5-.5*(E+k+M+x-4*O)/(k-E+x-M)]);break;case 4:D.push([b-.25-.25*(M+E-2*O)/(E-M),w-.75-.25*(-E-k+2*O)/(E-k)]);break;case 5:D.push([b-.5-.5*(x+k+M+E-4*O)/(k-x+E-M),w-.5]);break;case 6:D.push([b-.5-.25*(-x-k+M+E)/(x-k+E-M),w-.5-.25*(-E-k+M+x)/(E-k+x-M)]);break;case 7:D.push([b-.75-.25*(M+E-2*O)/(E-M),w-.75-.25*(M+x-2*O)/(x-M)]);break;case 8:D.push([b-.75-.25*(-M-E+2*O)/(M-E),w-.75-.25*(-M-x+2*O)/(M-x)]);break;case 9:D.push([b-.5-.25*(x+k+-M-E)/(k-x+M-E),w-.5-.25*(E+k+-M-x)/(k-E+M-x)]);break;case 10:D.push([b-.5-.5*(-x-k+-M-E+4*O)/(x-k+M-E),w-.5]);break;case 11:D.push([b-.25-.25*(-M-E+2*O)/(M-E),w-.75-.25*(E+k-2*O)/(k-E)]);break;case 12:D.push([b-.5,w-.5-.5*(-E-k+-M-x+4*O)/(E-k+M-x)]);break;case 13:D.push([b-.75-.25*(x+k-2*O)/(k-x),w-.25-.25*(-M-x+2*O)/(M-x)]);break;case 14:D.push([b-.25-.25*(-x-k+2*O)/(x-k),w-.25-.25*(-E-k+2*O)/(E-k)]);break;case 15:D.push([b-.5,w-.5]);break}},cell:function(b,w,k,x,E,M,d,C,S){E?C.push([b,w]):C.push([w,b])}});return function(A,b){var w=[],k=[];return g(A,w,k,b),{positions:w,cells:k}}}};function f(p,_){var T=p.length+"d",g=u[T];if(g)return g(s,p,_)}function c(p,_){for(var T=l(p,_),g=T.length,A=new Array(g),b=new Array(g),w=0;w<g;++w)A[w]=[T[w]],b[w]=[w];return{positions:A,cells:b}}var h={};function v(p,A){if(p.dimension<=0)return{positions:[],cells:[]};if(p.dimension===1)return c(p,A);var T=p.order.join()+"-"+p.dtype,g=h[T],A=+A||0;return g||(g=h[T]=f(p.order,p.dtype)),g(p,A)}},6946:function(n,a,o){"use strict";n.exports=c;var s=o(875),l=window||process.global||{},u=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function f(h){for(var v=h.cells,p=h.positions,_=new Float32Array(v.length*6),T=0,g=0,A=0;A<v.length;++A)for(var b=v[A],w=0;w<3;++w){var k=p[b[w]];_[T++]=k[0],_[T++]=k[1]+1.4,g=Math.max(k[0],g)}return{data:_,shape:g}}function c(h,v,_){var _=_||{},T=u[h];T||(T=u[h]={" ":{data:new Float32Array(0),shape:.2}});var g=T[v];if(!g)if(v.length<=1||!/\d/.test(v))g=T[v]=f(s(v,{triangles:!0,font:h,textAlign:_.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var A=v.split(/(\d|\s)/),b=new Array(A.length),w=0,k=0,x=0;x<A.length;++x)b[x]=c(h,A[x]),w+=b[x].data.length,k+=b[x].shape,x>0&&(k+=.02);for(var E=new Float32Array(w),M=0,d=-.5*k,x=0;x<b.length;++x){for(var C=b[x].data,S=0;S<C.length;S+=2)E[M++]=C[S]+d,E[M++]=C[S+1];d+=b[x].shape+.02}g=T[v]={data:E,shape:k}}return g}},14:function(n,a,o){"use strict";var s=o(4405);n.exports=c;var l=96;function u(h,v){var p=s(getComputedStyle(h).getPropertyValue(v));return p[0]*c(p[1],h)}function f(h,v){var p=document.createElement("div");p.style["font-size"]="128"+h,v.appendChild(p);var _=u(p,"font-size")/128;return v.removeChild(p),_}function c(h,v){switch(v=v||document.body,h=(h||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),h){case"%":return v.clientHeight/100;case"ch":case"ex":return f(h,v);case"em":return u(v,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},3440:function(n,a,o){"use strict";n.exports=b;var s=o(8444),l=o(7437),u=o(4422),f=o(903),c=o(899),h=o(9305);function v(w,k,x){return Math.sqrt(Math.pow(w,2)+Math.pow(k,2)+Math.pow(x,2))}function p(w){return Math.min(1,Math.max(-1,w))}function _(w){var k=Math.abs(w[0]),x=Math.abs(w[1]),E=Math.abs(w[2]),M=[0,0,0];k>Math.max(x,E)?M[2]=1:x>Math.max(k,E)?M[0]=1:M[1]=1;for(var d=0,C=0,S=0;S<3;++S)d+=w[S]*w[S],C+=M[S]*w[S];for(var S=0;S<3;++S)M[S]-=C/d*w[S];return c(M,M),M}function T(w,k,x,E,M,d,C,S){this.center=s(x),this.up=s(E),this.right=s(M),this.radius=s([d]),this.angle=s([C,S]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(w,k),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var g=T.prototype;g.setDistanceLimits=function(w,k){w>0?w=Math.log(w):w=-1/0,k>0?k=Math.log(k):k=1/0,k=Math.max(k,w),this.radius.bounds[0][0]=w,this.radius.bounds[1][0]=k},g.getDistanceLimits=function(w){var k=this.radius.bounds[0];return w?(w[0]=Math.exp(k[0][0]),w[1]=Math.exp(k[1][0]),w):[Math.exp(k[0][0]),Math.exp(k[1][0])]},g.recalcMatrix=function(w){this.center.curve(w),this.up.curve(w),this.right.curve(w),this.radius.curve(w),this.angle.curve(w);for(var k=this.computedUp,x=this.computedRight,E=0,M=0,d=0;d<3;++d)M+=k[d]*x[d],E+=k[d]*k[d];for(var C=Math.sqrt(E),S=0,d=0;d<3;++d)x[d]-=k[d]*M/E,S+=x[d]*x[d],k[d]/=C;for(var P=Math.sqrt(S),d=0;d<3;++d)x[d]/=P;var D=this.computedToward;f(D,k,x),c(D,D);for(var z=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],V=this.computedAngle[1],B=Math.cos(O),F=Math.sin(O),N=Math.cos(V),Z=Math.sin(V),J=this.computedCenter,re=B*N,le=F*N,fe=Z,K=-B*Z,X=-F*Z,ae=N,oe=this.computedEye,_e=this.computedMatrix,d=0;d<3;++d){var be=re*x[d]+le*D[d]+fe*k[d];_e[4*d+1]=K*x[d]+X*D[d]+ae*k[d],_e[4*d+2]=be,_e[4*d+3]=0}var he=_e[1],ie=_e[5],ye=_e[9],ue=_e[2],Ae=_e[6],Re=_e[10],ze=ie*Re-ye*Ae,et=ye*ue-he*Re,Le=he*Ae-ie*ue,Ie=v(ze,et,Le);ze/=Ie,et/=Ie,Le/=Ie,_e[0]=ze,_e[4]=et,_e[8]=Le;for(var d=0;d<3;++d)oe[d]=J[d]+_e[2+4*d]*z;for(var d=0;d<3;++d){for(var S=0,dt=0;dt<3;++dt)S+=_e[d+4*dt]*oe[dt];_e[12+d]=-S}_e[15]=1},g.getMatrix=function(w,k){this.recalcMatrix(w);var x=this.computedMatrix;if(k){for(var E=0;E<16;++E)k[E]=x[E];return k}return x};var A=[0,0,0];g.rotate=function(w,k,x,E){if(this.angle.move(w,k,x),E){this.recalcMatrix(w);var M=this.computedMatrix;A[0]=M[2],A[1]=M[6],A[2]=M[10];for(var d=this.computedUp,C=this.computedRight,S=this.computedToward,P=0;P<3;++P)M[4*P]=d[P],M[4*P+1]=C[P],M[4*P+2]=S[P];u(M,M,E,A);for(var P=0;P<3;++P)d[P]=M[4*P],C[P]=M[4*P+1];this.up.set(w,d[0],d[1],d[2]),this.right.set(w,C[0],C[1],C[2])}},g.pan=function(w,k,x,E){k=k||0,x=x||0,E=E||0,this.recalcMatrix(w);var M=this.computedMatrix,d=Math.exp(this.computedRadius[0]),C=M[1],S=M[5],P=M[9],D=v(C,S,P);C/=D,S/=D,P/=D;var z=M[0],O=M[4],V=M[8],B=z*C+O*S+V*P;z-=C*B,O-=S*B,V-=P*B;var F=v(z,O,V);z/=F,O/=F,V/=F;var N=z*k+C*x,Z=O*k+S*x,J=V*k+P*x;this.center.move(w,N,Z,J);var re=Math.exp(this.computedRadius[0]);re=Math.max(1e-4,re+E),this.radius.set(w,Math.log(re))},g.translate=function(w,k,x,E){this.center.move(w,k||0,x||0,E||0)},g.setMatrix=function(w,k,x,E){var M=1;typeof x=="number"&&(M=x|0),(M<0||M>3)&&(M=1);var d=(M+2)%3,C=(M+1)%3;k||(this.recalcMatrix(w),k=this.computedMatrix);var S=k[M],P=k[M+4],D=k[M+8];if(E){var O=Math.abs(S),V=Math.abs(P),B=Math.abs(D),F=Math.max(O,V,B);O===F?(S=S<0?-1:1,P=D=0):B===F?(D=D<0?-1:1,S=P=0):(P=P<0?-1:1,S=D=0)}else{var z=v(S,P,D);S/=z,P/=z,D/=z}var N=k[d],Z=k[d+4],J=k[d+8],re=N*S+Z*P+J*D;N-=S*re,Z-=P*re,J-=D*re;var le=v(N,Z,J);N/=le,Z/=le,J/=le;var fe=P*J-D*Z,K=D*N-S*J,X=S*Z-P*N,ae=v(fe,K,X);fe/=ae,K/=ae,X/=ae,this.center.jump(w,Et,Se,je),this.radius.idle(w),this.up.jump(w,S,P,D),this.right.jump(w,N,Z,J);var oe,_e;if(M===2){var be=k[1],he=k[5],ie=k[9],ye=be*N+he*Z+ie*J,ue=be*fe+he*K+ie*X;et<0?oe=-Math.PI/2:oe=Math.PI/2,_e=Math.atan2(ue,ye)}else{var Ae=k[2],Re=k[6],ze=k[10],et=Ae*S+Re*P+ze*D,Le=Ae*N+Re*Z+ze*J,Ie=Ae*fe+Re*K+ze*X;oe=Math.asin(p(et)),_e=Math.atan2(Ie,Le)}this.angle.jump(w,_e,oe),this.recalcMatrix(w);var dt=k[2],ct=k[6],Ke=k[10],_t=this.computedMatrix;l(_t,k);var zt=_t[15],Et=_t[12]/zt,Se=_t[13]/zt,je=_t[14]/zt,ht=Math.exp(this.computedRadius[0]);this.center.jump(w,Et-dt*ht,Se-ct*ht,je-Ke*ht)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(w){this.center.idle(w),this.up.idle(w),this.right.idle(w),this.radius.idle(w),this.angle.idle(w)},g.flush=function(w){this.center.flush(w),this.up.flush(w),this.right.flush(w),this.radius.flush(w),this.angle.flush(w)},g.setDistance=function(w,k){k>0&&this.radius.set(w,Math.log(k))},g.lookAt=function(w,k,x,E){this.recalcMatrix(w),k=k||this.computedEye,x=x||this.computedCenter,E=E||this.computedUp;var M=E[0],d=E[1],C=E[2],S=v(M,d,C);if(!(S<1e-6)){M/=S,d/=S,C/=S;var P=k[0]-x[0],D=k[1]-x[1],z=k[2]-x[2],O=v(P,D,z);if(!(O<1e-6)){P/=O,D/=O,z/=O;var V=this.computedRight,B=V[0],F=V[1],N=V[2],Z=M*B+d*F+C*N;B-=Z*M,F-=Z*d,N-=Z*C;var J=v(B,F,N);if(!(J<.01&&(B=d*z-C*D,F=C*P-M*z,N=M*D-d*P,J=v(B,F,N),J<1e-6))){B/=J,F/=J,N/=J,this.up.set(w,M,d,C),this.right.set(w,B,F,N),this.center.set(w,x[0],x[1],x[2]),this.radius.set(w,Math.log(O));var re=d*N-C*F,le=C*B-M*N,fe=M*F-d*B,K=v(re,le,fe);re/=K,le/=K,fe/=K;var X=M*P+d*D+C*z,ae=B*P+F*D+N*z,oe=re*P+le*D+fe*z,_e=Math.asin(p(X)),be=Math.atan2(oe,ae),he=this.angle._state,ie=he[he.length-1],ye=he[he.length-2];ie=ie%(2*Math.PI);var ue=Math.abs(ie+2*Math.PI-be),Ae=Math.abs(ie-be),Re=Math.abs(ie-2*Math.PI-be);ue<Ae&&(ie+=2*Math.PI),Re<Ae&&(ie-=2*Math.PI),this.angle.jump(this.angle.lastT(),ie,ye),this.angle.set(w,be,_e)}}}};function b(w){w=w||{};var k=w.center||[0,0,0],x=w.up||[0,1,0],E=w.right||_(x),M=w.radius||1,d=w.theta||0,C=w.phi||0;if(k=[].slice.call(k,0,3),x=[].slice.call(x,0,3),c(x,x),E=[].slice.call(E,0,3),c(E,E),"eye"in w){var S=w.eye,P=[S[0]-k[0],S[1]-k[1],S[2]-k[2]];f(E,P,x),v(E[0],E[1],E[2])<1e-6?E=_(x):c(E,E),M=v(P[0],P[1],P[2]);var D=h(x,P)/M,z=h(E,P)/M;C=Math.acos(D),d=Math.acos(z)}return M=Math.log(M),new T(w.zoomMin,w.zoomMax,k,x,E,M,d,C)}},9660:function(n){"use strict";n.exports=o;var a=+(Math.pow(2,27)+1);function o(s,l,u){var f=s*l,c=a*s,h=c-s,v=c-h,p=s-v,_=a*l,T=_-l,g=_-T,A=l-g,b=f-v*g,w=b-p*g,k=w-v*A,x=p*A-k;return u?(u[0]=x,u[1]=f,u):[x,f]}},87:function(n){"use strict";n.exports=a;function a(o,s,l){var u=o+s,f=u-o,c=u-f,h=s-f,v=o-c;return l?(l[0]=v+h,l[1]=u,l):[v+h,u]}},5306:function(n,a,o){"use strict";var s=o(2288),l=o(3094),u=o(2146).lW;o.g.__TYPEDARRAY_POOL||(o.g.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var f=typeof Uint8ClampedArray!="undefined",c=typeof BigUint64Array!="undefined",h=typeof BigInt64Array!="undefined",v=o.g.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=l([32,0])),v.BIGUINT64||(v.BIGUINT64=l([32,0])),v.BIGINT64||(v.BIGINT64=l([32,0])),v.BUFFER||(v.BUFFER=l([32,0]));var p=v.DATA,_=v.BUFFER;a.free=function(B){if(u.isBuffer(B))_[s.log2(B.length)].push(B);else{if(Object.prototype.toString.call(B)!=="[object ArrayBuffer]"&&(B=B.buffer),!B)return;var F=B.length||B.byteLength,N=s.log2(F)|0;p[N].push(B)}};function T(V){if(V){var B=V.length||V.byteLength,F=s.log2(B);p[F].push(V)}}function g(V){T(V.buffer)}a.freeUint8=a.freeUint16=a.freeUint32=a.freeBigUint64=a.freeInt8=a.freeInt16=a.freeInt32=a.freeBigInt64=a.freeFloat32=a.freeFloat=a.freeFloat64=a.freeDouble=a.freeUint8Clamped=a.freeDataView=g,a.freeArrayBuffer=T,a.freeBuffer=function(B){_[s.log2(B.length)].push(B)},a.malloc=function(B,F){if(F===void 0||F==="arraybuffer")return A(B);switch(F){case"uint8":return b(B);case"uint16":return w(B);case"uint32":return k(B);case"int8":return x(B);case"int16":return E(B);case"int32":return M(B);case"float":case"float32":return d(B);case"double":case"float64":return C(B);case"uint8_clamped":return S(B);case"bigint64":return D(B);case"biguint64":return P(B);case"buffer":return O(B);case"data":case"dataview":return z(B);default:return null}return null};function A(B){var B=s.nextPow2(B),F=s.log2(B),N=p[F];return N.length>0?N.pop():new ArrayBuffer(B)}a.mallocArrayBuffer=A;function b(V){return new Uint8Array(A(V),0,V)}a.mallocUint8=b;function w(V){return new Uint16Array(A(2*V),0,V)}a.mallocUint16=w;function k(V){return new Uint32Array(A(4*V),0,V)}a.mallocUint32=k;function x(V){return new Int8Array(A(V),0,V)}a.mallocInt8=x;function E(V){return new Int16Array(A(2*V),0,V)}a.mallocInt16=E;function M(V){return new Int32Array(A(4*V),0,V)}a.mallocInt32=M;function d(V){return new Float32Array(A(4*V),0,V)}a.mallocFloat32=a.mallocFloat=d;function C(V){return new Float64Array(A(8*V),0,V)}a.mallocFloat64=a.mallocDouble=C;function S(V){return f?new Uint8ClampedArray(A(V),0,V):b(V)}a.mallocUint8Clamped=S;function P(V){return c?new BigUint64Array(A(8*V),0,V):null}a.mallocBigUint64=P;function D(V){return h?new BigInt64Array(A(8*V),0,V):null}a.mallocBigInt64=D;function z(V){return new DataView(A(V),0,V)}a.mallocDataView=z;function O(V){V=s.nextPow2(V);var B=s.log2(V),F=_[B];return F.length>0?F.pop():new u(V)}a.mallocBuffer=O,a.clearCache=function(){for(var B=0;B<32;++B)v.UINT8[B].length=0,v.UINT16[B].length=0,v.UINT32[B].length=0,v.INT8[B].length=0,v.INT16[B].length=0,v.INT32[B].length=0,v.FLOAT[B].length=0,v.DOUBLE[B].length=0,v.BIGUINT64[B].length=0,v.BIGINT64[B].length=0,v.UINT8C[B].length=0,p[B].length=0,_[B].length=0}},1731:function(n){"use strict";"use restrict";n.exports=a;function a(s){this.roots=new Array(s),this.ranks=new Array(s);for(var l=0;l<s;++l)this.roots[l]=l,this.ranks[l]=0}var o=a.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var s=this.roots.length;return this.roots.push(s),this.ranks.push(0),s},o.find=function(s){for(var l=s,u=this.roots;u[s]!==s;)s=u[s];for(;u[l]!==s;){var f=u[l];u[l]=s,l=f}return s},o.link=function(s,l){var u=this.find(s),f=this.find(l);if(u!==f){var c=this.ranks,h=this.roots,v=c[u],p=c[f];v<p?h[u]=f:p<v?h[f]=u:(h[f]=u,++c[u])}}},1215:function(n){"use strict";function a(l,u){for(var f=1,c=l.length,h=l[0],v=l[0],p=1;p<c;++p)if(v=h,h=l[p],u(h,v)){if(p===f){f++;continue}l[f++]=h}return l.length=f,l}function o(l){for(var u=1,f=l.length,c=l[0],h=l[0],v=1;v<f;++v,h=c)if(h=c,c=l[v],c!==h){if(v===u){u++;continue}l[u++]=c}return l.length=u,l}function s(l,u,f){return l.length===0?l:u?(f||l.sort(u),a(l,u)):(f||l.sort(),o(l))}n.exports=s},875:function(n,a,o){"use strict";n.exports=f;var s=o(712),l=null,u=null;typeof document!="undefined"&&(l=document.createElement("canvas"),l.width=8192,l.height=1024,u=l.getContext("2d"));function f(c,h){return(typeof h!="object"||h===null)&&(h={}),s(c,h.canvas||l,h.context||u,h)}},712:function(n,a,o){n.exports=D,n.exports.processPixels=P;var s=o(4162),l=o(5050),u=o(8243),f=o(197),c=o(7761),h=o(8040),v="b",p="b|",_="i",T="i|",g="sup",A="+",b="+1",w="sub",k="-",x="-1";function E(z,O,V,B){for(var F="<"+z+">",N="</"+z+">",Z=F.length,J=N.length,re=O[0]===A||O[0]===k,le=0,fe=-J;le>-1&&(le=V.indexOf(F,le),!(le===-1||(fe=V.indexOf(N,le+Z),fe===-1)||fe<=le));){for(var K=le;K<fe+J;++K)if(K<le+Z||K>=fe)B[K]=null,V=V.substr(0,K)+" "+V.substr(K+1);else if(B[K]!==null){var X=B[K].indexOf(O[0]);X===-1?B[K]+=O:re&&(B[K]=B[K].substr(0,X+1)+(1+parseInt(B[K][X+1]))+B[K].substr(X+2))}var ae=le+Z,oe=V.substr(ae,fe-ae),_e=oe.indexOf(F);_e!==-1?le=_e:le=fe+J}return B}function M(z,O,V){for(var B=O.textAlign||"start",F=O.textBaseline||"alphabetic",N=[1<<30,1<<30],Z=[0,0],J=z.length,re=0;re<J;++re)for(var le=z[re],fe=0;fe<2;++fe)N[fe]=Math.min(N[fe],le[fe])|0,Z[fe]=Math.max(Z[fe],le[fe])|0;var K=0;switch(B){case"center":K=-.5*(N[0]+Z[0]);break;case"right":case"end":K=-Z[0];break;case"left":case"start":K=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+B+"'")}var X=0;switch(F){case"hanging":case"top":X=-N[1];break;case"middle":X=-.5*(N[1]+Z[1]);break;case"alphabetic":case"ideographic":X=-3*V;break;case"bottom":X=-Z[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+F+"'")}var ae=1/V;return"lineHeight"in O?ae*=+O.lineHeight:"width"in O?ae=O.width/(Z[0]-N[0]):"height"in O&&(ae=O.height/(Z[1]-N[1])),z.map(function(oe){return[ae*(oe[0]+K),ae*(oe[1]+X)]})}function d(z,O,V,B,F,N){V=V.replace(/\n/g,""),N.breaklines===!0?V=V.replace(/\<br\>/g,`
`):V=V.replace(/\<br\>/g," ");var Z="",J=[];for(ie=0;ie<V.length;++ie)J[ie]=Z;N.bolds===!0&&(J=E(v,p,V,J)),N.italics===!0&&(J=E(_,T,V,J)),N.superscripts===!0&&(J=E(g,b,V,J)),N.subscripts===!0&&(J=E(w,x,V,J));var re=[],le="";for(ie=0;ie<V.length;++ie)J[ie]!==null&&(le+=V[ie],re.push(J[ie]));var fe=le.split(`
`),K=fe.length,X=Math.round(F*B),ae=B,oe=B*2,_e=0,be=K*X+oe;z.height<be&&(z.height=be),O.fillStyle="#000",O.fillRect(0,0,z.width,z.height),O.fillStyle="#fff";var he,ie,ye,ue,Ae,Re=0,ze="";function et(){if(ze!==""){var Se=O.measureText(ze).width;O.fillText(ze,ae+ye,oe+ue),ye+=Se}}function Le(){return""+Math.round(Ae)+"px "}function Ie(Se,je){var ht=""+O.font;if(N.subscripts===!0){var nt=Se.indexOf(k),lt=je.indexOf(k),rt=nt>-1?parseInt(Se[1+nt]):0,Xe=lt>-1?parseInt(je[1+lt]):0;rt!==Xe&&(ht=ht.replace(Le(),"?px "),Ae*=Math.pow(.75,Xe-rt),ht=ht.replace("?px ",Le())),ue+=.25*X*(Xe-rt)}if(N.superscripts===!0){var ft=Se.indexOf(A),gt=je.indexOf(A),Qt=ft>-1?parseInt(Se[1+ft]):0,Jt=gt>-1?parseInt(je[1+gt]):0;Qt!==Jt&&(ht=ht.replace(Le(),"?px "),Ae*=Math.pow(.75,Jt-Qt),ht=ht.replace("?px ",Le())),ue-=.25*X*(Jt-Qt)}if(N.bolds===!0){var fr=Se.indexOf(p)>-1,nr=je.indexOf(p)>-1;!fr&&nr&&(ur?ht=ht.replace("italic ","italic bold "):ht="bold "+ht),fr&&!nr&&(ht=ht.replace("bold ",""))}if(N.italics===!0){var ur=Se.indexOf(T)>-1,qt=je.indexOf(T)>-1;!ur&&qt&&(ht="italic "+ht),ur&&!qt&&(ht=ht.replace("italic ",""))}O.font=ht}for(he=0;he<K;++he){var dt=fe[he]+`
`;for(ye=0,ue=he*X,Ae=B,ze="",ie=0;ie<dt.length;++ie){var ct=ie+Re<re.length?re[ie+Re]:re[re.length-1];Z===ct?ze+=dt[ie]:(et(),ze=dt[ie],ct!==void 0&&(Ie(Z,ct),Z=ct))}et(),Re+=dt.length;var Ke=Math.round(ye+2*ae)|0;_e<Ke&&(_e=Ke)}var _t=_e,zt=oe+X*K,Et=l(O.getImageData(0,0,_t,zt).data,[zt,_t,4]);return Et.pick(-1,-1,0).transpose(1,0)}function C(z,O){var V=s(z,128);return O?u(V.cells,V.positions,.25):{edges:V.cells,positions:V.positions}}function S(z,O,V,B){var F=C(z,B),N=M(F.positions,O,V),Z=F.edges,J=O.orientation==="ccw";if(f(N,Z),O.polygons||O.polygon||O.polyline){for(var re=h(Z,N),le=new Array(re.length),fe=0;fe<re.length;++fe){for(var K=re[fe],X=new Array(K.length),ae=0;ae<K.length;++ae){for(var oe=K[ae],_e=new Array(oe.length),be=0;be<oe.length;++be)_e[be]=N[oe[be]].slice();J&&_e.reverse(),X[ae]=_e}le[fe]=X}return le}else return O.triangles||O.triangulate||O.triangle?{cells:c(N,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:Z,positions:N}}function P(z,O,V){try{return S(z,O,V,!0)}catch(B){}try{return S(z,O,V,!1)}catch(B){}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function D(z,O,V,B){var F=64,N=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};B&&(B.size&&B.size>0&&(F=B.size),B.lineSpacing&&B.lineSpacing>0&&(N=B.lineSpacing),B.styletags&&B.styletags.breaklines&&(Z.breaklines=!!B.styletags.breaklines),B.styletags&&B.styletags.bolds&&(Z.bolds=!!B.styletags.bolds),B.styletags&&B.styletags.italics&&(Z.italics=!!B.styletags.italics),B.styletags&&B.styletags.subscripts&&(Z.subscripts=!!B.styletags.subscripts),B.styletags&&B.styletags.superscripts&&(Z.superscripts=!!B.styletags.superscripts)),V.font=[B.fontStyle,B.fontVariant,B.fontWeight,F+"px",B.font].filter(function(re){return re}).join(" "),V.textAlign="start",V.textBaseline="alphabetic",V.direction="ltr";var J=d(O,V,z,F,N,Z);return P(J,B,F)}},5346:function(n){(function(){"use strict";if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function o(S){S.permitHostObjects___&&S.permitHostObjects___(o)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=o);var s=!1;if(typeof WeakMap=="function"){var l=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var u=new l,f=Object.freeze({});if(u.set(f,1),u.get(f)!==1)s=!0;else{n.exports=WeakMap;return}}}var c=Object.prototype.hasOwnProperty,h=Object.getOwnPropertyNames,v=Object.defineProperty,p=Object.isExtensible,_="weakmap:",T=_+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var g=new ArrayBuffer(25),A=new Uint8Array(g);crypto.getRandomValues(A),T=_+"rand:"+Array.prototype.map.call(A,function(S){return(S%36).toString(36)}).join("")+"___"}function b(S){return!(S.substr(0,_.length)==_&&S.substr(S.length-3)==="___")}if(v(Object,"getOwnPropertyNames",{value:function(P){return h(P).filter(b)}}),"getPropertyNames"in Object){var w=Object.getPropertyNames;v(Object,"getPropertyNames",{value:function(P){return w(P).filter(b)}})}function k(S){if(S!==Object(S))throw new TypeError("Not an object: "+S);var P=S[T];if(P&&P.key===S)return P;if(p(S)){P={key:S};try{return v(S,T,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(D){return}}}(function(){var S=Object.freeze;v(Object,"freeze",{value:function(O){return k(O),S(O)}});var P=Object.seal;v(Object,"seal",{value:function(O){return k(O),P(O)}});var D=Object.preventExtensions;v(Object,"preventExtensions",{value:function(O){return k(O),D(O)}})})();function x(S){return S.prototype=null,Object.freeze(S)}var E=!1;function M(){!E&&typeof console!="undefined"&&(E=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var d=0,C=function(){this instanceof C||M();var S=[],P=[],D=d++;function z(F,N){var Z,J=k(F);return J?D in J?J[D]:N:(Z=S.indexOf(F),Z>=0?P[Z]:N)}function O(F){var N=k(F);return N?D in N:S.indexOf(F)>=0}function V(F,N){var Z,J=k(F);return J?J[D]=N:(Z=S.indexOf(F),Z>=0?P[Z]=N:(Z=S.length,P[Z]=N,S[Z]=F)),this}function B(F){var N=k(F),Z,J;return N?D in N&&delete N[D]:(Z=S.indexOf(F),Z<0?!1:(J=S.length-1,S[Z]=void 0,P[Z]=P[J],S[Z]=S[J],S.length=J,P.length=J,!0))}return Object.create(C.prototype,{get___:{value:x(z)},has___:{value:x(O)},set___:{value:x(V)},delete___:{value:x(B)}})};C.prototype=Object.create(Object.prototype,{get:{value:function(P,D){return this.get___(P,D)},writable:!0,configurable:!0},has:{value:function(P){return this.has___(P)},writable:!0,configurable:!0},set:{value:function(P,D){return this.set___(P,D)},writable:!0,configurable:!0},delete:{value:function(P){return this.delete___(P)},writable:!0,configurable:!0}}),typeof l=="function"?function(){s&&typeof Proxy!="undefined"&&(Proxy=void 0);function S(){this instanceof C||M();var P=new l,D=void 0,z=!1;function O(N,Z){return D?P.has(N)?P.get(N):D.get___(N,Z):P.get(N,Z)}function V(N){return P.has(N)||(D?D.has___(N):!1)}var B;s?B=function(N,Z){return P.set(N,Z),P.has(N)||(D||(D=new C),D.set(N,Z)),this}:B=function(N,Z){if(z)try{P.set(N,Z)}catch(J){D||(D=new C),D.set___(N,Z)}else P.set(N,Z);return this};function F(N){var Z=!!P.delete(N);return D&&D.delete___(N)||Z}return Object.create(C.prototype,{get___:{value:x(O)},has___:{value:x(V)},set___:{value:x(B)},delete___:{value:x(F)},permitHostObjects___:{value:x(function(N){if(N===o)z=!0;else throw new Error("bogus call to permitHostObjects___")})}})}S.prototype=C.prototype,n.exports=S,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),n.exports=C)})()},9222:function(n,a,o){var s=o(7178);n.exports=l;function l(){var u={};return function(f){if((typeof f!="object"||f===null)&&typeof f!="function")throw new Error("Weakmap-shim: Key must be object");var c=f.valueOf(u);return c&&c.identity===u?c:s(f,u)}}},7178:function(n){n.exports=a;function a(o,s){var l={identity:s},u=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(f){return f!==s?u.apply(this,arguments):l},writable:!0}),l}},4037:function(n,a,o){var s=o(9222);n.exports=l;function l(){var u=s();return{get:function(f,c){var h=u(f);return h.hasOwnProperty("value")?h.value:c},set:function(f,c){return u(f).value=c,this},has:function(f){return"value"in u(f)},delete:function(f){return delete u(f).value}}}},6183:function(n){"use strict";function a(){return function(c,h,v,p,_,T){var g=c[0],A=v[0],b=[0],w=A;p|=0;var k=0,x=A;for(k=0;k<g;++k){{var E=h[p]-T,M=h[p+w]-T;E>=0!=M>=0&&_.push(b[0]+.5+.5*(E+M)/(E-M))}p+=x,++b[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(p,_,T){var g=p.dtype,A=p.order,b=[g,A.join()].join(),w=h[b];return w||(h[b]=w=c([g,A])),w(p.shape.slice(0),p.data,p.stride,p.offset|0,_,T)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"zeroCrossings"})},9584:function(n,a,o){"use strict";n.exports=l;var s=o(6183);function l(u,f){var c=[];return f=+f||0,s(u.hi(u.shape[0]-1),c,f),c}},6601:function(){}},t={};function r(n){var a=t[n];if(a!==void 0)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}(function(){r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}()})(),function(){r.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n}}();var i=r(7386);return i}()})});var ACe=ne((Hhr,TCe)=>{"use strict";TCe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var aG=ne((Ghr,MCe)=>{"use strict";var O4t=Object.prototype.toString;MCe.exports=function(e){var t;return O4t.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))}});var oG=ne((Yhr,SCe)=>{SCe.exports=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==void 0)return arguments[e]}});var LCe=ne((Whr,CCe)=>{"use strict";var ECe=ACe(),B4t=aG(),R_=oG();CCe.exports=N4t;var kCe={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function N4t(e){var t,r=[],i=1,n;if(typeof e=="string")if(ECe[e])r=ECe[e].slice(),n="rgb";else if(e==="transparent")i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=e.slice(1),o=a.length,s=o<=4;i=1,s?(r=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],o===4&&(i=parseInt(a[3]+a[3],16)/255)):(r=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],o===8&&(i=parseInt(a[6]+a[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var l=t[1],u=l==="rgb",a=l.replace(/a$/,"");n=a;var o=a==="cmyk"?4:a==="gray"?1:3;r=t[2].trim().split(/\s*,\s*/).map(function(v,p){if(/%$/.test(v))return p===o?parseFloat(v)/100:a==="rgb"?parseFloat(v)*255/100:parseFloat(v);if(a[p]==="h"){if(/deg$/.test(v))return parseFloat(v);if(kCe[v]!==void 0)return kCe[v]}return parseFloat(v)}),l===a&&r.push(1),i=u||r[o]===void 0?1:r[o],r=r.slice(0,o)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),n=e.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(e))n="rgb",r=[e>>>16,(e&65280)>>>8,e&255];else if(B4t(e)){var f=R_(e.r,e.red,e.R,null);f!==null?(n="rgb",r=[f,R_(e.g,e.green,e.G),R_(e.b,e.blue,e.B)]):(n="hsl",r=[R_(e.h,e.hue,e.H),R_(e.s,e.saturation,e.S),R_(e.l,e.lightness,e.L,e.b,e.brightness)]),i=R_(e.a,e.alpha,e.opacity,1),e.opacity!=null&&(i/=100)}else(Array.isArray(e)||window.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))&&(r=[e[0],e[1],e[2]],n="rgb",i=e.length===4?e[3]:1);return{space:n,values:r,alpha:i}}});var RCe=ne((Xhr,PCe)=>{"use strict";PCe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}});var ICe=ne((Zhr,DCe)=>{"use strict";var U4t=RCe();DCe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,i=e[2]/100,n,a,o,s,l;if(r===0)return l=i*255,[l,l,l];i<.5?a=i*(1+r):a=i+r-i*r,n=2*i-a,s=[0,0,0];for(var u=0;u<3;u++)o=t+1/3*-(u-1),o<0?o++:o>1&&o--,6*o<1?l=n+(a-n)*6*o:2*o<1?l=a:3*o<2?l=n+(a-n)*(2/3-o)*6:l=n,s[u]=l*255;return s}};U4t.hsl=function(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=a-n,s,l,u;return a===n?s=0:t===a?s=(r-i)/o:r===a?s=2+(i-t)/o:i===a&&(s=4+(t-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(n+a)/2,a===n?l=0:u<=.5?l=o/(a+n):l=o/(2-a-n),[s,l*100,u*100]}});var k3=ne((jhr,FCe)=>{FCe.exports=V4t;function V4t(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}});var sG=ne((Khr,qCe)=>{"use strict";var H4t=LCe(),G4t=ICe(),QR=k3();qCe.exports=function(t){var r,i,n,a=H4t(t);return a.space?(r=Array(3),r[0]=QR(a.values[0],0,255),r[1]=QR(a.values[1],0,255),r[2]=QR(a.values[2],0,255),a.space[0]==="h"&&(r=G4t.rgb(r)),r.push(QR(a.alpha,0,1)),r):[]}});var $R=ne((Jhr,zCe)=>{zCe.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}});var n1=ne((Qhr,OCe)=>{"use strict";var Y4t=sG(),eD=k3(),W4t=$R();OCe.exports=function(t,r){(r==="float"||!r)&&(r="array"),r==="uint"&&(r="uint8"),r==="uint_clamped"&&(r="uint8_clamped");var i=W4t(r),n=new i(4),a=r!=="uint8"&&r!=="uint8_clamped";return(!t.length||typeof t=="string")&&(t=Y4t(t),t[0]/=255,t[1]/=255,t[2]/=255),X4t(t)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(a?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:1):(n[0]=eD(Math.floor(t[0]*255),0,255),n[1]=eD(Math.floor(t[1]*255),0,255),n[2]=eD(Math.floor(t[2]*255),0,255),n[3]=t[3]==null?255:eD(Math.floor(t[3]*255),0,255)),n)};function X4t(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}});var Dp=ne(($hr,BCe)=>{"use strict";var Z4t=n1();function j4t(e){return e?Z4t(e):[0,0,0,1]}BCe.exports=j4t});var dy=ne((evr,WCe)=>{"use strict";var GCe=la(),K4t=Xf(),tD=n1(),rD=ul(),J4t=Ku().defaultLine,NCe=uh().isArrayOrTypedArray,lG=tD(J4t),YCe=1;function UCe(e,t){var r=e;return r[3]*=t,r}function VCe(e){if(GCe(e))return lG;var t=tD(e);return t.length?t:lG}function HCe(e){return GCe(e)?e:YCe}function Q4t(e,t,r){var i=e.color;i&&i._inputArray&&(i=i._inputArray);var n=NCe(i),a=NCe(t),o=rD.extractOpts(e),s=[],l,u,f,c,h;if(o.colorscale!==void 0?l=rD.makeColorScaleFuncFromTrace(e):l=VCe,n?u=function(p,_){return p[_]===void 0?lG:tD(l(p[_]))}:u=VCe,a?f=function(p,_){return p[_]===void 0?YCe:HCe(p[_])}:f=HCe,n||a)for(var v=0;v<r;v++)c=u(i,v),h=f(t,v),s[v]=UCe(c,h);else s=UCe(tD(i),t);return s}function $4t(e){var t=rD.extractOpts(e),r=t.colorscale;return t.reversescale&&(r=rD.flipScale(t.colorscale)),r.map(function(i){var n=i[0],a=K4t(i[1]),o=a.toRgb();return{index:n,rgb:[o.r,o.g,o.b,o.a]}})}WCe.exports={formatColor:Q4t,parseColorScale:$4t}});var uG=ne((tvr,XCe)=>{"use strict";XCe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}});var nD=ne((rvr,ZCe)=>{"use strict";ZCe.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}});var KCe=ne((nvr,jCe)=>{"use strict";var eLt=wi();function fG(e,t,r,i){if(!t||!t.visible)return null;for(var n=eLt.getComponentMethod("errorbars","makeComputeError")(t),a=new Array(e.length),o=0;o<e.length;o++){var s=n(+e[o],o);if(i.type==="log"){var l=i.c2l(e[o]),u=e[o]-s[0],f=e[o]+s[1];if(a[o]=[(i.c2l(u,!0)-l)*r,(i.c2l(f,!0)-l)*r],u>0){var c=i.c2l(u);i._lowerLogErrorBound||(i._lowerLogErrorBound=c),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,c)}}else a[o]=[-s[0]*r,s[1]*r]}return a}function tLt(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function rLt(e,t,r){var i=[fG(e.x,e.error_x,t[0],r.xaxis),fG(e.y,e.error_y,t[1],r.yaxis),fG(e.z,e.error_z,t[2],r.zaxis)],n=tLt(i);if(n===0)return null;for(var a=new Array(n),o=0;o<n;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(i[l])for(var u=0;u<2;u++)s[u][l]=i[l][o][u];a[o]=s}return a}jCe.exports=rLt});var a4e=ne((ivr,i4e)=>{"use strict";var nLt=yu().gl_line3d,JCe=yu().gl_scatter3d,iLt=yu().gl_error3d,aLt=yu().gl_mesh3d,oLt=yu().delaunay_triangulate,py=Wt(),r4e=Dp(),iD=dy().formatColor,sLt=kA(),cG=uG(),lLt=nD(),uLt=Xi(),fLt=td().appendArrayPointValue,cLt=KCe();function n4e(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var vG=n4e.prototype;vG.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(py.isArrayOrTypedArray(this.textLabels)?(this.textLabels[t]||this.textLabels[t]===0)&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}};function hLt(e,t,r){var i=(r+1)%3,n=(r+2)%3,a=[],o=[],s;for(s=0;s<e.length;++s){var l=e[s];isNaN(l[i])||!isFinite(l[i])||isNaN(l[n])||!isFinite(l[n])||(a.push([l[i],l[n]]),o.push(s))}var u=oLt(a);for(s=0;s<u.length;++s)for(var f=u[s],c=0;c<f.length;++c)f[c]=o[f[c]];return{positions:e,cells:u,meshColor:t}}function vLt(e){for(var t=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],n=0;n<3;n++){var a=e[n];a&&a.copy_zstyle!==!1&&e[2].visible!==!1&&(a=e[2]),!(!a||!a.visible)&&(t[n]=a.width/2,r[n]=r4e(a.color),i[n]=a.thickness)}return{capSize:t,color:r,lineWidth:i}}function QCe(e){return e==null?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function $Ce(e){return e==null?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function dLt(e){var t=0,r=0,i=[t,r];if(Array.isArray(e))for(var n=0;n<e.length;n++)i[n]=[t,r],e[n]&&(i[n][0]=QCe(e[n]),i[n][1]=$Ce(e[n]));else i[0]=QCe(e),i[1]=$Ce(e);return i}function pLt(e,t){return t(e*4)}function gLt(e){return lLt[e]}function hG(e,t,r,i,n){var a=null;if(py.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)e[o]===void 0?a[o]=i:a[o]=r(e[o],n)}else a=r(e,py.identity);return a}function yLt(e,t){var r=[],i=e.fullSceneLayout,n=e.dataScale,a=i.xaxis,o=i.yaxis,s=i.zaxis,l=t.marker,u=t.line,f=t.x||[],c=t.y||[],h=t.z||[],v=f.length,p=t.xcalendar,_=t.ycalendar,T=t.zcalendar,g,A,b,w,k,x;for(k=0;k<v;k++)g=a.d2l(f[k],0,p)*n[0],A=o.d2l(c[k],0,_)*n[1],b=s.d2l(h[k],0,T)*n[2],r[k]=[g,A,b];if(Array.isArray(t.text))x=t.text;else if(py.isTypedArray(t.text))x=Array.from(t.text);else if(t.text!==void 0)for(x=new Array(v),k=0;k<v;k++)x[k]=t.text;function E(re,le){var fe=i[re];return uLt.tickText(fe,fe.d2l(le),!0).text}var M=t.texttemplate;if(M){var d=e.fullLayout,C=d._d3locale,S=Array.isArray(M),P=S?Math.min(M.length,v):v,D=S?function(re){return M[re]}:function(){return M};for(x=new Array(P),k=0;k<P;k++){var z={x:f[k],y:c[k],z:h[k]},O={xLabel:E("xaxis",f[k]),yLabel:E("yaxis",c[k]),zLabel:E("zaxis",h[k])},V={};fLt(V,t,k);var B=t._meta||{};x[k]=py.texttemplateString(D(k),O,C,V,z,B)}}if(w={position:r,mode:t.mode,text:x},"line"in t&&(w.lineColor=iD(u,1,v),w.lineWidth=u.width,w.lineDashes=u.dash),"marker"in t){var F=sLt(t);w.scatterColor=iD(l,1,v),w.scatterSize=hG(l.size,v,pLt,20,F),w.scatterMarker=hG(l.symbol,v,gLt,"\u25CF"),w.scatterLineWidth=l.line.width,w.scatterLineColor=iD(l.line,1,v),w.scatterAngle=0}"textposition"in t&&(w.textOffset=dLt(t.textposition),w.textColor=iD(t.textfont,1,v),w.textSize=hG(t.textfont.size,v,py.identity,12),w.textFont=t.textfont.family,w.textAngle=0);var N=["x","y","z"];for(w.project=[!1,!1,!1],w.projectScale=[1,1,1],w.projectOpacity=[1,1,1],k=0;k<3;++k){var Z=t.projection[N[k]];(w.project[k]=Z.show)&&(w.projectOpacity[k]=Z.opacity,w.projectScale[k]=Z.scale)}w.errorBounds=cLt(t,n,i);var J=vLt([t.error_x,t.error_y,t.error_z]);return w.errorColor=J.color,w.errorLineWidth=J.lineWidth,w.errorCapSize=J.capSize,w.delaunayAxis=t.surfaceaxis,w.delaunayColor=r4e(t.surfacecolor),w}function e4e(e){if(py.isArrayOrTypedArray(e)){var t=e[0];return py.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(r){return Math.round(r*255)})+")"}return null}function t4e(e){return py.isArrayOrTypedArray(e)?e.length===4&&typeof e[0]=="number"?e4e(e):e.map(e4e):null}vG.update=function(e){var t=this.scene.glplot.gl,r,i,n,a,o=cG.solid;this.data=e;var s=yLt(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in cG&&(o=cG[s.lineDashes]),this.color=t4e(s.scatterColor)||t4e(s.lineColor),this.dataPoints=s.position,r={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(r):(this.linePlot=nLt(r),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity!==void 0&&(l*=e.marker.opacity),i={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=JCe(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),a={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(a):(this.textMarkers=JCe(a),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=iLt(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=hLt(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=t,this.delaunayMesh=aLt(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};vG.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function mLt(e,t){var r=new n4e(e,t.uid);return r.update(t),r}i4e.exports=mLt});var mG=ne((avr,l4e)=>{"use strict";var Fp=cu(),yG=Ps(),dG=kl().axisHoverFormat,xLt=Ba().hovertemplateAttrs,_Lt=Ba().texttemplateAttrs,o4e=es(),bLt=uG(),wLt=nD(),Ip=oa().extendFlat,TLt=Xs().overrideAll,s4e=rx(),ALt=Fp.line,D_=Fp.marker,MLt=D_.line,SLt=Ip({width:ALt.width,dash:{valType:"enumerated",values:s4e(bLt),dflt:"solid"}},yG("line"));function pG(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var gG=l4e.exports=TLt({x:Fp.x,y:Fp.y,z:{valType:"data_array"},text:Ip({},Fp.text,{}),texttemplate:_Lt({},{}),hovertext:Ip({},Fp.hovertext,{}),hovertemplate:xLt(),xhoverformat:dG("x"),yhoverformat:dG("y"),zhoverformat:dG("z"),mode:Ip({},Fp.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:pG("x"),y:pG("y"),z:pG("z")},connectgaps:Fp.connectgaps,line:SLt,marker:Ip({symbol:{valType:"enumerated",values:s4e(wLt),dflt:"circle",arrayOk:!0},size:Ip({},D_.size,{dflt:8}),sizeref:D_.sizeref,sizemin:D_.sizemin,sizemode:D_.sizemode,opacity:Ip({},D_.opacity,{arrayOk:!1}),colorbar:D_.colorbar,line:Ip({width:Ip({},MLt.width,{arrayOk:!1})},yG("marker.line"))},yG("marker")),textposition:Ip({},Fp.textposition,{dflt:"top center"}),textfont:{color:Fp.textfont.color,size:Fp.textfont.size,family:Ip({},Fp.textfont.family,{arrayOk:!1})},opacity:o4e.opacity,hoverinfo:Ip({},o4e.hoverinfo)},"calc","nested");gG.x.editType=gG.y.editType=gG.z.editType="calc+clearAxisTypes"});var c4e=ne((ovr,f4e)=>{"use strict";var u4e=wi(),ELt=Wt(),xG=js(),kLt=dp(),CLt=s0(),LLt=l0(),PLt=mG();f4e.exports=function(t,r,i,n){function a(v,p){return ELt.coerce(t,r,PLt,v,p)}var o=RLt(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),xG.hasMarkers(r)&&kLt(t,r,i,n,a,{noSelect:!0,noAngle:!0}),xG.hasLines(r)&&(a("connectgaps"),CLt(t,r,i,n,a)),xG.hasText(r)&&(a("texttemplate"),LLt(t,r,n,a,{noSelect:!0}));var s=(r.line||{}).color,l=(r.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",s||l);for(var u=["x","y","z"],f=0;f<3;++f){var c="projection."+u[f];a(c+".show")&&(a(c+".opacity"),a(c+".scale"))}var h=u4e.getComponentMethod("errorbars","supplyDefaults");h(t,r,s||l||i,{axis:"z"}),h(t,r,s||l||i,{axis:"y",inherit:"z"}),h(t,r,s||l||i,{axis:"x",inherit:"z"})};function RLt(e,t,r,i){var n=0,a=r("x"),o=r("y"),s=r("z"),l=u4e.getComponentMethod("calendars","handleTraceDefaults");return l(e,t,["x","y","z"],i),a&&o&&s&&(n=Math.min(a.length,o.length,s.length),t._length=t._xlength=t._ylength=t._zlength=n),n}});var _G=ne((svr,h4e)=>{"use strict";var DLt=Z0(),ILt=pp();h4e.exports=function(t,r){var i=[{x:!1,y:!1,trace:r,t:{}}];return DLt(i,r),ILt(t,r),i}});var d4e=ne((lvr,v4e)=>{v4e.exports=FLt;function FLt(e,t){if(typeof e!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document=="undefined"&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(r.width=t.width),typeof t.height=="number"&&(r.height=t.height);var i=t,n;try{var a=[e];e.indexOf("webgl")===0&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i),n)return n}catch(s){n=null}return n||null}});var bG=ne((uvr,p4e)=>{var qLt=d4e();p4e.exports=function(t){return qLt("webgl",t)}});var aD=ne((fvr,y4e)=>{"use strict";var g4e=_i(),zLt=function(){};y4e.exports=function(t){for(var r in t)typeof t[r]=="function"&&(t[r]=zLt);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=g4e.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=g4e.lightLine,i.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",i.appendChild(n),t.container.appendChild(i),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1}});var _4e=ne((cvr,x4e)=>{"use strict";var I_=Dp(),OLt=Wt(),BLt=["xaxis","yaxis","zaxis"];function m4e(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var NLt=m4e.prototype;NLt.merge=function(e,t){for(var r=this,i=0;i<3;++i){var n=t[BLt[i]];if(!n.visible){r.tickEnable[i]=!1,r.labelEnable[i]=!1,r.lineEnable[i]=!1,r.lineTickEnable[i]=!1,r.gridEnable[i]=!1,r.zeroEnable[i]=!1,r.backgroundEnable[i]=!1;continue}r.labels[i]=e._meta?OLt.templateString(n.title.text,e._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[i]=I_(n.title.font.color)),n.title.font.family&&(r.labelFont[i]=n.title.font.family),n.title.font.size&&(r.labelSize[i]=n.title.font.size)),"showline"in n&&(r.lineEnable[i]=n.showline),"linecolor"in n&&(r.lineColor[i]=I_(n.linecolor)),"linewidth"in n&&(r.lineWidth[i]=n.linewidth),"showgrid"in n&&(r.gridEnable[i]=n.showgrid),"gridcolor"in n&&(r.gridColor[i]=I_(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[i]=n.gridwidth),n.type==="log"?r.zeroEnable[i]=!1:"zeroline"in n&&(r.zeroEnable[i]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[i]=I_(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[i]=n.zerolinewidth),"ticks"in n&&n.ticks?r.lineTickEnable[i]=!0:r.lineTickEnable[i]=!1,"ticklen"in n&&(r.lineTickLength[i]=r._defaultLineTickLength[i]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[i]=I_(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[i]=n.tickwidth),"tickangle"in n&&(r.tickAngle[i]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[i]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[i]=I_(n.tickfont.color)),n.tickfont.family&&(r.tickFont[i]=n.tickfont.family),n.tickfont.size&&(r.tickSize[i]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(r.lineTickMirror[i]=!0,r.lineMirror[i]=!0):n.mirror===!0?(r.lineTickMirror[i]=!1,r.lineMirror[i]=!0):(r.lineTickMirror[i]=!1,r.lineMirror[i]=!1):r.lineMirror[i]=!1,"showbackground"in n&&n.showbackground!==!1?(r.backgroundEnable[i]=!0,r.backgroundColor[i]=I_(n.backgroundcolor)):r.backgroundEnable[i]=!1}};function ULt(e,t){var r=new m4e;return r.merge(e,t),r}x4e.exports=ULt});var T4e=ne((hvr,w4e)=>{"use strict";var VLt=Dp(),HLt=["xaxis","yaxis","zaxis"];function b4e(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var GLt=b4e.prototype;GLt.merge=function(e){for(var t=0;t<3;++t){var r=e[HLt[t]];if(!r.visible){this.enabled[t]=!1,this.drawSides[t]=!1;continue}this.enabled[t]=r.showspikes,this.colors[t]=VLt(r.spikecolor),this.drawSides[t]=r.spikesides,this.lineWidth[t]=r.spikethickness}};function YLt(e){var t=new b4e;return t.merge(e),t}w4e.exports=YLt});var S4e=ne((vvr,M4e)=>{"use strict";M4e.exports=KLt;var A4e=Xi(),WLt=Wt(),XLt=["xaxis","yaxis","zaxis"],ZLt=[0,0,0];function jLt(e){for(var t=new Array(3),r=0;r<3;++r){for(var i=e[r],n=new Array(i.length),a=0;a<i.length;++a)n[a]=i[a].x;t[r]=n}return t}function KLt(e){for(var t=e.axesOptions,r=e.glplot.axesPixels,i=e.fullSceneLayout,n=[[],[],[]],a=0;a<3;++a){var o=i[XLt[a]];if(o._length=(r[a].hi-r[a].lo)*r[a].pixelsPerDataUnit/e.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))n[a]=[];else{o._input_range=o.range.slice(),o.range[0]=r[a].lo/e.dataScale[a],o.range[1]=r[a].hi/e.dataScale[a],o._m=1/(e.dataScale[a]*r[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var l=o.nticks||WLt.constrain(o._length/40,4,9);A4e.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var u=A4e.calcTicks(o,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*e.dataScale[a],o.type==="date"&&(u[f].text=u[f].text.replace(/\<br\>/g," "));n[a]=u,o.tickmode=s}}t.ticks=n;for(var a=0;a<3;++a){ZLt[a]=.5*(e.glplot.bounds[0][a]+e.glplot.bounds[1][a]);for(var f=0;f<2;++f)t.bounds[f][a]=e.glplot.bounds[f][a]}e.contourLevels=jLt(n)}});var D4e=ne((dvr,R4e)=>{"use strict";var C4e=yu().gl_plot3d,JLt=C4e.createCamera,E4e=C4e.createScene,QLt=bG(),$Lt=zA(),lD=wi(),Sv=Wt(),sD=Sv.preserveDrawingBuffer(),uD=Xi(),S0=Ol(),ePt=Dp(),tPt=aD(),rPt=RB(),nPt=_4e(),iPt=T4e(),aPt=S4e(),oPt=Cd().applyAutorangeOptions,EE,oD,L4e=!1;function P4e(e,t){var r=document.createElement("div"),i=e.container;this.graphDiv=e.graphDiv;var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",r.appendChild(n),this.svgContainer=n,r.id=e.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",i.appendChild(r),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=nPt(t,t[this.id]),this.spikeOptions=iPt(t[this.id]),this.container=r,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=lD.getComponentMethod("annotations3d","convert"),this.drawAnnotations=lD.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var _h=P4e.prototype;_h.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:sD,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!oD&&(EE=document.createElement("canvas"),oD=QLt({canvas:EE,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!oD))throw new Error("error creating static canvas/context for image server");t.gl=oD,t.canvas=EE}return t};var k4e=!0;_h.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),r=!0;try{e.glplot=E4e(t)}catch(i){if(e.staticMode||!k4e||sD)r=!1;else{Sv.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{sD=t.glOptions.preserveDrawingBuffer=!0,e.glplot=E4e(t)}catch(n){sD=t.glOptions.preserveDrawingBuffer=!1,r=!1}}}return k4e=!1,r};_h.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,r=t.projection.type==="orthographic";e.camera=JLt(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})};_h.initializeGLPlot=function(){var e=this;e.initializeGLCamera();var t=e.tryCreatePlot();if(!t)return tPt(e);e.traces={},e.make4thDimension();var r=e.graphDiv,i=r.layout,n=function(){var o={};return e.isCameraChanged(i)&&(o[e.id+".camera"]=e.getCamera()),e.isAspectChanged(i)&&(o[e.id+".aspectratio"]=e.glplot.getAspectratio(),i[e.id].aspectmode!=="manual"&&(e.fullSceneLayout.aspectmode=i[e.id].aspectmode=o[e.id+".aspectmode"]="manual")),o},a=function(o){if(o.fullSceneLayout.dragmode!==!1){var s=n();o.saveLayout(i),o.graphDiv.emit("plotly_relayout",s)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",function(){a(e)}),e.glplot.canvas.addEventListener("touchstart",function(){L4e=!0}),e.glplot.canvas.addEventListener("wheel",function(o){if(r._context._scrollZoom.gl3d){if(e.camera._ortho){var s=o.deltaX>o.deltaY?1.1:.9090909090909091,l=e.glplot.getAspectratio();e.glplot.setAspectratio({x:s*l.x,y:s*l.y,z:s*l.z})}a(e)}},$Lt?{passive:!1}:!1),e.glplot.canvas.addEventListener("mousemove",function(){if(e.fullSceneLayout.dragmode!==!1&&e.camera.mouseListener.buttons!==0){var o=n();e.graphDiv.emit("plotly_relayouting",o)}}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(o){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:o,layer:e.id})},!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0};_h.render=function(){var e=this,t=e.graphDiv,r,i=e.svgContainer,n=e.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var a=t._fullLayout._invScaleX,o=t._fullLayout._invScaleY,s=n.width*a,l=n.height*o;i.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),i.setAttributeNS(null,"width",s),i.setAttributeNS(null,"height",l),aPt(e),e.glplot.axes.update(e.axesOptions);for(var u=Object.keys(e.traces),f=null,c=e.glplot.selection,h=0;h<u.length;++h)r=e.traces[u[h]],r.data.hoverinfo!=="skip"&&r.handlePick(c)&&(f=r),r.setContourLevels&&r.setContourLevels();function v(C,S,P){var D=e.fullSceneLayout[C+"axis"];return D.type!=="log"&&(S=D.d2l(S)),uD.hoverLabelText(D,S,P)}if(f!==null){var p=rPt(e.glplot.cameraParams,c.dataCoordinate);r=f.data;var _=t._fullData[r.index],T=c.index,g={xLabel:v("x",c.traceCoordinate[0],r.xhoverformat),yLabel:v("y",c.traceCoordinate[1],r.yhoverformat),zLabel:v("z",c.traceCoordinate[2],r.zhoverformat)},A=S0.castHoverinfo(_,e.fullLayout,T),b=(A||"").split("+"),w=A&&A==="all";!_.hovertemplate&&!w&&(b.indexOf("x")===-1&&(g.xLabel=void 0),b.indexOf("y")===-1&&(g.yLabel=void 0),b.indexOf("z")===-1&&(g.zLabel=void 0),b.indexOf("text")===-1&&(c.textLabel=void 0),b.indexOf("name")===-1&&(f.name=void 0));var k,x=[];r.type==="cone"||r.type==="streamtube"?(g.uLabel=v("x",c.traceCoordinate[3],r.uhoverformat),(w||b.indexOf("u")!==-1)&&x.push("u: "+g.uLabel),g.vLabel=v("y",c.traceCoordinate[4],r.vhoverformat),(w||b.indexOf("v")!==-1)&&x.push("v: "+g.vLabel),g.wLabel=v("z",c.traceCoordinate[5],r.whoverformat),(w||b.indexOf("w")!==-1)&&x.push("w: "+g.wLabel),g.normLabel=c.traceCoordinate[6].toPrecision(3),(w||b.indexOf("norm")!==-1)&&x.push("norm: "+g.normLabel),r.type==="streamtube"&&(g.divergenceLabel=c.traceCoordinate[7].toPrecision(3),(w||b.indexOf("divergence")!==-1)&&x.push("divergence: "+g.divergenceLabel)),c.textLabel&&x.push(c.textLabel),k=x.join("<br>")):r.type==="isosurface"||r.type==="volume"?(g.valueLabel=uD.hoverLabelText(e._mockAxis,e._mockAxis.d2l(c.traceCoordinate[3]),r.valuehoverformat),x.push("value: "+g.valueLabel),c.textLabel&&x.push(c.textLabel),k=x.join("<br>")):k=c.textLabel;var E={x:c.traceCoordinate[0],y:c.traceCoordinate[1],z:c.traceCoordinate[2],data:_._input,fullData:_,curveNumber:_.index,pointNumber:T};S0.appendArrayPointValue(E,_,T),r._module.eventData&&(E=_._module.eventData(E,c,_,{},T));var M={points:[E]};if(e.fullSceneLayout.hovermode){var d=[];S0.loneHover({trace:_,x:(.5+.5*p[0]/p[3])*s,y:(.5-.5*p[1]/p[3])*l,xLabel:g.xLabel,yLabel:g.yLabel,zLabel:g.zLabel,text:k,name:f.name,color:S0.castHoverOption(_,T,"bgcolor")||f.color,borderColor:S0.castHoverOption(_,T,"bordercolor"),fontFamily:S0.castHoverOption(_,T,"font.family"),fontSize:S0.castHoverOption(_,T,"font.size"),fontColor:S0.castHoverOption(_,T,"font.color"),nameLength:S0.castHoverOption(_,T,"namelength"),textAlign:S0.castHoverOption(_,T,"align"),hovertemplate:Sv.castOption(_,T,"hovertemplate"),hovertemplateLabels:Sv.extendFlat({},E,g),eventData:[E]},{container:i,gd:t,inOut_bbox:d}),E.bbox=d[0]}c.distance<5&&(c.buttons||L4e)?t.emit("plotly_click",M):t.emit("plotly_hover",M),this.oldEventData=M}else S0.loneUnhover(i),this.oldEventData&&t.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)};_h.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){if(e.glplot.gl.isContextLost()){requestAnimationFrame(t);return}if(!e.initializeGLPlot()){Sv.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}e.plot.apply(e,e.plotArgs)};requestAnimationFrame(t)};var kE=["xaxis","yaxis","zaxis"];function sPt(e,t,r){for(var i=e.fullSceneLayout,n=0;n<3;n++){var a=kE[n],o=a.charAt(0),s=i[a],l=t[o],u=t[o+"calendar"],f=t["_"+o+"length"];if(!Sv.isArrayOrTypedArray(l))r[0][n]=Math.min(r[0][n],0),r[1][n]=Math.max(r[1][n],f-1);else for(var c,h=0;h<(f||l.length);h++)if(Sv.isArrayOrTypedArray(l[h]))for(var v=0;v<l[h].length;++v)c=s.d2l(l[h][v],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c));else c=s.d2l(l[h],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c))}}function lPt(e,t){for(var r=e.fullSceneLayout,i=r.annotations||[],n=0;n<3;n++)for(var a=kE[n],o=a.charAt(0),s=r[a],l=0;l<i.length;l++){var u=i[l];if(u.visible){var f=s.r2l(u[o]);!isNaN(f)&&isFinite(f)&&(t[0][n]=Math.min(t[0][n],f),t[1][n]=Math.max(t[1][n],f))}}}_h.plot=function(e,t,r){var i=this;if(i.plotArgs=[e,t,r],!i.glplot.contextLost){var n,a,o,s,l,u,f=t[i.id],c=r[i.id];i.fullLayout=t,i.fullSceneLayout=f,i.axesOptions.merge(t,f),i.spikeOptions.merge(f),i.setViewport(f),i.updateFx(f.dragmode,f.hovermode),i.camera.enableWheel=i.graphDiv._context._scrollZoom.gl3d,i.glplot.setClearColor(ePt(f.bgcolor)),i.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&sPt(this,n,h);lPt(this,h);var v=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?v[s]=1:v[s]=1/(h[1][s]-h[0][s]);for(i.dataScale=v,i.convertAnnotations(this),o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&(a=i.traces[n.uid],a?a.data.type===n.type?a.update(n):(a.dispose(),a=n._module.plot(this,n),i.traces[n.uid]=a):(a=n._module.plot(this,n),i.traces[n.uid]=a),a.name=n.name);var p=Object.keys(i.traces);e:for(o=0;o<p.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===p[o]&&e[s].visible===!0&&e[s]._length!==0)continue e;a=i.traces[p[o]],a.dispose(),delete i.traces[p[o]]}i.glplot.objects.sort(function(J,re){return J._trace.data.index-re._trace.data.index});var _=[[0,0,0],[0,0,0]],T=[],g={};for(o=0;o<3;++o){l=f[kE[o]],u=l.type,u in g?(g[u].acc*=v[o],g[u].count+=1):g[u]={acc:v[o],count:1};var A;if(l.autorange){_[0][o]=1/0,_[1][o]=-1/0;var b=i.glplot.objects,w=i.fullSceneLayout.annotations||[],k=l._name.charAt(0);for(s=0;s<b.length;s++){var x=b[s],E=x.bounds,M=x._trace.data._pad||0;x.constructor.name==="ErrorBars"&&l._lowerLogErrorBound?_[0][o]=Math.min(_[0][o],l._lowerLogErrorBound):_[0][o]=Math.min(_[0][o],E[0][o]/v[o]-M),_[1][o]=Math.max(_[1][o],E[1][o]/v[o]+M)}for(s=0;s<w.length;s++){var d=w[s];if(d.visible){var C=l.r2l(d[k]);_[0][o]=Math.min(_[0][o],C),_[1][o]=Math.max(_[1][o],C)}}if("rangemode"in l&&l.rangemode==="tozero"&&(_[0][o]=Math.min(_[0][o],0),_[1][o]=Math.max(_[1][o],0)),_[0][o]>_[1][o])_[0][o]=-1,_[1][o]=1;else{var S=_[1][o]-_[0][o];_[0][o]-=S/32,_[1][o]+=S/32}if(A=[_[0][o],_[1][o]],A=oPt(A,l),_[0][o]=A[0],_[1][o]=A[1],l.isReversed()){var P=_[0][o];_[0][o]=_[1][o],_[1][o]=P}}else A=l.range,_[0][o]=l.r2l(A[0]),_[1][o]=l.r2l(A[1]);_[0][o]===_[1][o]&&(_[0][o]-=1,_[1][o]+=1),T[o]=_[1][o]-_[0][o],l.range=[_[0][o],_[1][o]],l.limitRange(),i.glplot.setBounds(o,{min:l.range[0]*v[o],max:l.range[1]*v[o]})}var D,z=f.aspectmode;if(z==="cube")D=[1,1,1];else if(z==="manual"){var O=f.aspectratio;D=[O.x,O.y,O.z]}else if(z==="auto"||z==="data"){var V=[1,1,1];for(o=0;o<3;++o){l=f[kE[o]],u=l.type;var B=g[u];V[o]=Math.pow(B.acc,1/B.count)/v[o]}z==="data"||Math.max.apply(null,V)/Math.min.apply(null,V)<=4?D=V:D=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");f.aspectratio.x=c.aspectratio.x=D[0],f.aspectratio.y=c.aspectratio.y=D[1],f.aspectratio.z=c.aspectratio.z=D[2],i.glplot.setAspectratio(f.aspectratio),i.viewInitial.aspectratio||(i.viewInitial.aspectratio={x:f.aspectratio.x,y:f.aspectratio.y,z:f.aspectratio.z}),i.viewInitial.aspectmode||(i.viewInitial.aspectmode=f.aspectmode);var F=f.domain||null,N=t._size||null;if(F&&N){var Z=i.container.style;Z.position="absolute",Z.left=N.l+F.x[0]*N.w+"px",Z.top=N.t+(1-F.y[1])*N.h+"px",Z.width=N.w*(F.x[1]-F.x[0])+"px",Z.height=N.h*(F.y[1]-F.y[0])+"px"}i.glplot.redraw()}};_h.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)};function uPt(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function fPt(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:e._ortho===!0?"orthographic":"perspective"}}}_h.getCamera=function(){var e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),fPt(e.camera)};_h.setViewport=function(e){var t=this,r=e.camera;t.camera.lookAt.apply(this,uPt(r)),t.glplot.setAspectratio(e.aspectratio);var i=r.projection.type==="orthographic",n=t.camera._ortho;i!==n&&(t.glplot.redraw(),t.glplot.clearRGBA(),t.glplot.dispose(),t.initializeGLPlot())};_h.isCameraChanged=function(e){var t=this,r=t.getCamera(),i=Sv.nestedProperty(e,t.id+".camera"),n=i.get();function a(u,f,c,h){var v=["up","center","eye"],p=["x","y","z"];return f[v[c]]&&u[v[c]][p[h]]===f[v[c]][p[h]]}var o=!1;if(n===void 0)o=!0;else{for(var s=0;s<3;s++)for(var l=0;l<3;l++)if(!a(r,n,s,l)){o=!0;break}(!n.projection||r.projection&&r.projection.type!==n.projection.type)&&(o=!0)}return o};_h.isAspectChanged=function(e){var t=this,r=t.glplot.getAspectratio(),i=Sv.nestedProperty(e,t.id+".aspectratio"),n=i.get();return n===void 0||n.x!==r.x||n.y!==r.y||n.z!==r.z};_h.saveLayout=function(e){var t=this,r=t.fullLayout,i,n,a,o,s,l,u=t.isCameraChanged(e),f=t.isAspectChanged(e),c=u||f;if(c){var h={};if(u&&(i=t.getCamera(),n=Sv.nestedProperty(e,t.id+".camera"),a=n.get(),h[t.id+".camera"]=a),f&&(o=t.glplot.getAspectratio(),s=Sv.nestedProperty(e,t.id+".aspectratio"),l=s.get(),h[t.id+".aspectratio"]=l),lD.call("_storeDirectGUIEdit",e,r._preGUI,h),u){n.set(i);var v=Sv.nestedProperty(r,t.id+".camera");v.set(i)}if(f){s.set(o);var p=Sv.nestedProperty(r,t.id+".aspectratio");p.set(o),t.glplot.redraw()}}return c};_h.updateFx=function(e,t){var r=this,i=r.camera;if(i)if(e==="orbit")i.mode="orbit",i.keyBindingMode="rotate";else if(e==="turntable"){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var n=r.graphDiv,a=n._fullLayout,o=r.fullSceneLayout.camera,s=o.up.x,l=o.up.y,u=o.up.z;if(u/Math.sqrt(s*s+l*l+u*u)<.999){var f=r.id+".camera.up",c={x:0,y:0,z:1},h={};h[f]=c;var v=n.layout;lD.call("_storeDirectGUIEdit",v,a._preGUI,h),o.up=c,Sv.nestedProperty(v,f).set(c)}}else i.keyBindingMode=e;r.fullSceneLayout.hovermode=t};function cPt(e,t,r){for(var i=0,n=r-1;i<n;++i,--n)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*i+a)+o,l=4*(t*n+a)+o,u=e[s];e[s]=e[l],e[l]=u}}function hPt(e,t,r){for(var i=0;i<r;++i)for(var n=0;n<t;++n){var a=4*(t*i+n),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}_h.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(EE),t.glplot.redraw();var r=t.glplot.gl,i=r.drawingBufferWidth,n=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var a=new Uint8Array(i*n*4);r.readPixels(0,0,i,n,r.RGBA,r.UNSIGNED_BYTE,a),cPt(a,i,n),hPt(a,i,n);var o=document.createElement("canvas");o.width=i,o.height=n;var s=o.getContext("2d",{willReadFrequently:!0}),l=s.createImageData(i,n);l.data.set(a),s.putImageData(l,0,0);var u;switch(e){case"jpeg":u=o.toDataURL("image/jpeg");break;case"webp":u=o.toDataURL("image/webp");break;default:u=o.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(EE),u};_h.setConvert=function(){for(var e=this,t=0;t<3;t++){var r=e.fullSceneLayout[kE[t]];uD.setConvert(r,e.fullLayout),r.setScale=Sv.noop}};_h.make4thDimension=function(){var e=this,t=e.graphDiv,r=t._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},uD.setConvert(e._mockAxis,r)};R4e.exports=P4e});var F4e=ne((pvr,I4e)=>{"use strict";I4e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}});var TG=ne((gvr,q4e)=>{"use strict";var vPt=_i(),Ga=dc(),wG=oa().extendFlat,dPt=Xs().overrideAll;q4e.exports=dPt({visible:Ga.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:vPt.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:Ga.color,categoryorder:Ga.categoryorder,categoryarray:Ga.categoryarray,title:{text:Ga.title.text,font:Ga.title.font},type:wG({},Ga.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Ga.autotypenumbers,autorange:Ga.autorange,autorangeoptions:{minallowed:Ga.autorangeoptions.minallowed,maxallowed:Ga.autorangeoptions.maxallowed,clipmin:Ga.autorangeoptions.clipmin,clipmax:Ga.autorangeoptions.clipmax,include:Ga.autorangeoptions.include,editType:"plot"},rangemode:Ga.rangemode,minallowed:Ga.minallowed,maxallowed:Ga.maxallowed,range:wG({},Ga.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:Ga.minor.tickmode,nticks:Ga.nticks,tick0:Ga.tick0,dtick:Ga.dtick,tickvals:Ga.tickvals,ticktext:Ga.ticktext,ticks:Ga.ticks,mirror:Ga.mirror,ticklen:Ga.ticklen,tickwidth:Ga.tickwidth,tickcolor:Ga.tickcolor,showticklabels:Ga.showticklabels,labelalias:Ga.labelalias,tickfont:Ga.tickfont,tickangle:Ga.tickangle,tickprefix:Ga.tickprefix,showtickprefix:Ga.showtickprefix,ticksuffix:Ga.ticksuffix,showticksuffix:Ga.showticksuffix,showexponent:Ga.showexponent,exponentformat:Ga.exponentformat,minexponent:Ga.minexponent,separatethousands:Ga.separatethousands,tickformat:Ga.tickformat,tickformatstops:Ga.tickformatstops,hoverformat:Ga.hoverformat,showline:Ga.showline,linecolor:Ga.linecolor,linewidth:Ga.linewidth,showgrid:Ga.showgrid,gridcolor:wG({},Ga.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:Ga.gridwidth,zeroline:Ga.zeroline,zerolinecolor:Ga.zerolinecolor,zerolinewidth:Ga.zerolinewidth,_deprecated:{title:Ga._deprecated.title,titlefont:Ga._deprecated.titlefont}},"plot","from-root")});var EG=ne((yvr,z4e)=>{"use strict";var AG=TG(),pPt=fl().attributes,MG=oa().extendFlat,gPt=Wt().counterRegex;function SG(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}z4e.exports={_arrayAttrRegexps:[gPt("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:MG(SG(0,0,1),{}),center:MG(SG(0,0,0),{}),eye:MG(SG(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:pPt({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:AG,yaxis:AG,zaxis:AG,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}});var U4e=ne((mvr,N4e)=>{"use strict";var yPt=Xf().mix,O4e=Wt(),mPt=So(),xPt=TG(),_Pt=yB(),bPt=PM(),B4e=["xaxis","yaxis","zaxis"],wPt=100*136/187;N4e.exports=function(t,r,i){var n,a;function o(u,f){return O4e.coerce(n,a,xPt,u,f)}for(var s=0;s<B4e.length;s++){var l=B4e[s];n=t[l]||{},a=mPt.newContainer(r,l),a._id=l[0]+i.scene,a._name=l,_Pt(n,a,o,i),bPt(n,a,o,{font:i.font,letter:l[0],data:i.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),o("gridcolor",yPt(a.color,i.bgColor,wPt).toRgbString()),o("title.text",l[0]),a.setScale=O4e.noop,o("showspikes")&&(o("spikesides"),o("spikethickness"),o("spikecolor",a.color)),o("showaxeslabels"),o("showbackground")&&o("backgroundcolor")}}});var Y4e=ne((xvr,G4e)=>{"use strict";var TPt=Wt(),APt=_i(),MPt=wi(),SPt=Kx(),EPt=U4e(),V4e=EG(),kPt=vc().getSubplotData,H4e="gl3d";G4e.exports=function(t,r,i){var n=r._basePlotModules.length>1;function a(o){if(!n){var s=TPt.validate(t[o],V4e[o]);if(s)return t[o]}}SPt(t,r,i,{type:H4e,attributes:V4e,handleDefaults:CPt,fullLayout:r,font:r.font,fullData:i,getDfltFromLayout:a,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})};function CPt(e,t,r,i){for(var n=r("bgcolor"),a=APt.combine(n,i.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)r("camera."+o[s]+".x"),r("camera."+o[s]+".y"),r("camera."+o[s]+".z");r("camera.projection.type");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),u=l?"manual":"auto",f=r("aspectmode",u);l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},f==="manual"&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var c=kPt(i.fullData,H4e,i.id);EPt(e,t,{font:i.font,scene:i.id,data:c,bgColor:a,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),MPt.getComponentMethod("annotations3d","handleDefaults")(e,t,i);var h=i.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",e.camera&&e.camera.up){var v=e.camera.up.x,p=e.camera.up.y,_=e.camera.up.z;_!==0&&(!v||!p||!_||_/Math.sqrt(v*v+p*p+_*_)>.999)&&(h="turntable")}else h="turntable";r("dragmode",h),r("hovermode",i.getDfltFromLayout("hovermode"))}});var i1=ne(Ev=>{"use strict";var LPt=Xs().overrideAll,PPt=Pg(),RPt=D4e(),DPt=vc().getSubplotData,IPt=Wt(),FPt=kd(),C3="gl3d",kG="scene";Ev.name=C3;Ev.attr=kG;Ev.idRoot=kG;Ev.idRegex=Ev.attrRegex=IPt.counterRegex("scene");Ev.attributes=F4e();Ev.layoutAttributes=EG();Ev.baseLayoutAttrOverrides=LPt({hoverlabel:PPt.hoverlabel},"plot","nested");Ev.supplyLayoutDefaults=Y4e();Ev.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots[C3],a=0;a<n.length;a++){var o=n[a],s=DPt(i,C3,o),l=r[o],u=l.camera,f=l._scene;f||(f=new RPt({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:u},r),l._scene=f),f.viewInitial||(f.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),f.plot(s,r,t.layout)}};Ev.clean=function(e,t,r,i){for(var n=i._subplots[C3]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._scene&&(i[o]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+o).remove())}};Ev.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[C3],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._scene,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:FPt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}};Ev.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var r=t.substr(5);return r==="1"&&(r=""),kG+r}};Ev.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[C3],i=0;i<r.length;i++){var n=t[r[i]]._scene;n.updateFx(t.dragmode,t.hovermode)}}});var X4e=ne((bvr,W4e)=>{"use strict";W4e.exports={plot:a4e(),attributes:mG(),markerSymbols:nD(),supplyDefaults:c4e(),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:_G(),moduleType:"trace",name:"scatter3d",basePlotModule:i1(),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}});var j4e=ne((wvr,Z4e)=>{"use strict";Z4e.exports=X4e()});var CE=ne((Tvr,Q4e)=>{"use strict";var K4e=_i(),fD=Ps(),CG=kl().axisHoverFormat,qPt=Ba().hovertemplateAttrs,J4e=es(),L3=oa().extendFlat,zPt=Xs().overrideAll;function LG(e){return{valType:"boolean",dflt:!1}}function PG(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:LG("x"),y:LG("y"),z:LG("z")},color:{valType:"color",dflt:K4e.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:K4e.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var cD=Q4e.exports=zPt(L3({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:qPt(),xhoverformat:CG("x"),yhoverformat:CG("y"),zhoverformat:CG("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},fD("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:PG("x"),y:PG("y"),z:PG("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:L3({},fD.zauto,{}),zmin:L3({},fD.zmin,{}),zmax:L3({},fD.zmax,{})},hoverinfo:L3({},J4e.hoverinfo),showlegend:L3({},J4e.showlegend,{dflt:!1})}),"calc","nested");cD.x.editType=cD.y.editType=cD.z.editType="calc+clearAxisTypes";cD.transforms=void 0});var IG=ne((Avr,tLe)=>{"use strict";var OPt=wi(),$4e=Wt(),BPt=Kf(),NPt=CE(),RG=.1;function UPt(e,t){for(var r=[],i=32,n=0;n<i;n++){var a=n/(i-1),o=t+(1-t)*(1-Math.pow(Math.sin(e*a*Math.PI),2));r.push([a,Math.max(0,Math.min(1,o))])}return r}function VPt(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t)return!1;t=+i[0]}return!0}function HPt(e,t,r,i){var n,a;function o(T,g){return $4e.coerce(e,t,NPt,T,g)}var s=o("x"),l=o("y"),u=o("z");if(!u||!u.length||s&&s.length<1||l&&l.length<1){t.visible=!1;return}t._xlength=Array.isArray(s)&&$4e.isArrayOrTypedArray(s[0])?u.length:u[0].length,t._ylength=u.length;var f=OPt.getComponentMethod("calendars","handleTraceDefaults");f(e,t,["x","y","z"],i),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(T){o(T)});var c=o("surfacecolor"),h=["x","y","z"];for(n=0;n<3;++n){var v="contours."+h[n],p=o(v+".show"),_=o(v+".highlight");if(p||_)for(a=0;a<3;++a)o(v+".project."+h[a]);p&&(o(v+".color"),o(v+".width"),o(v+".usecolormap")),_&&(o(v+".highlightcolor"),o(v+".highlightwidth")),o(v+".start"),o(v+".end"),o(v+".size")}c||(DG(e,"zmin","cmin"),DG(e,"zmax","cmax"),DG(e,"zauto","cauto")),BPt(e,t,i,o,{prefix:"",cLetter:"c"}),eLe(e,t,i,o),t._length=null}function eLe(e,t,r,i){var n=i("opacityscale");n==="max"?t.opacityscale=[[0,RG],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,RG]]:n==="extremes"?t.opacityscale=UPt(1,RG):VPt(n)||(t.opacityscale=void 0)}function DG(e,t,r){t in e&&!(r in e)&&(e[r]=e[t])}tLe.exports={supplyDefaults:HPt,opacityscaleDefaults:eLe}});var iLe=ne((Mvr,nLe)=>{"use strict";var rLe=gv();nLe.exports=function(t,r){r.surfacecolor?rLe(t,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):rLe(t,r,{vals:r.z,containerStr:"",cLetter:"c"})}});var fLe=ne((Svr,uLe)=>{"use strict";var GPt=yu().gl_surface3d,P3=yu().ndarray,YPt=yu().ndarray_linear_interpolate.d2,WPt=dP(),XPt=pP(),LE=Wt().isArrayOrTypedArray,ZPt=dy().parseColorScale,aLe=Dp(),jPt=ul().extractOpts;function sLe(e,t,r){this.scene=e,this.uid=r,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var E0=sLe.prototype;E0.getXat=function(e,t,r,i){var n=LE(this.data.x)?LE(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return r===void 0?n:i.d2l(n,0,r)};E0.getYat=function(e,t,r,i){var n=LE(this.data.y)?LE(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return r===void 0?n:i.d2l(n,0,r)};E0.getZat=function(e,t,r,i){var n=this.data.z[t][e];return n===null&&this.data.connectgaps&&this.data._interpolatedZ&&(n=this.data._interpolatedZ[t][e]),r===void 0?n:i.d2l(n,0,r)};E0.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,i=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0),n=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[i,n],e.traceCoordinate=[this.getXat(i,n),this.getYat(i,n),this.getZat(i,n)],e.dataCoordinate=[this.getXat(i,n,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(i,n,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(i,n,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var a=0;a<3;a++){var o=e.dataCoordinate[a];o!=null&&(e.dataCoordinate[a]*=this.scene.dataScale[a])}var s=this.data.hovertext||this.data.text;return LE(s)&&s[n]&&s[n][i]!==void 0?e.textLabel=s[n][i]:s?e.textLabel=s:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}};function KPt(e){var t=e[0].rgb,r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}var R3=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function JPt(e,t){if(e<t)return 0;for(var r=0;Math.floor(e%t)===0;)e/=t,r++;return r}function FG(e){for(var t=[],r=0;r<R3.length;r++){var i=R3[r];t.push(JPt(e,i))}return t}function QPt(e){for(var t=FG(e),r=e,i=0;i<R3.length;i++)if(t[i]>0){r=R3[i];break}return r}function $Pt(e,t){if(!(e<1||t<1)){for(var r=FG(e),i=FG(t),n=1,a=0;a<R3.length;a++)n*=Math.pow(R3[a],Math.max(r[a],i[a]));return n}}function e6t(e){if(e.length!==0){for(var t=1,r=0;r<e.length;r++)t=$Pt(t,e[r]);return t}}E0.calcXnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getXat(t-1,0),n=this.getXat(t,0);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};E0.calcYnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getYat(0,t-1),n=this.getYat(0,t);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};var lLe=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],oLe=lLe[9],hD=lLe[13];E0.estimateScale=function(e,t){for(var r=t===0?this.calcXnums(e):this.calcYnums(e),i=1+e6t(r);i<oLe;)i*=2;for(;i>hD;)i--,i/=QPt(i),i++,i<oLe&&(i=hD);var n=Math.round(i/e);return n>1?n:1};function t6t(e,t,r){var i=r[8]+r[2]*t[0]+r[5]*t[1];return e[0]=(r[6]+r[0]*t[0]+r[3]*t[1])/i,e[1]=(r[7]+r[1]*t[0]+r[4]*t[1])/i,e}function r6t(e,t,r){return n6t(e,t,t6t,r),e}function n6t(e,t,r,i){for(var n=[0,0],a=e.shape[0],o=e.shape[1],s=0;s<a;s++)for(var l=0;l<o;l++)r(n,[s,l],i),e.set(s,l,YPt(t,n[0],n[1]));return e}E0.refineCoords=function(e){for(var t=this.dataScaleX,r=this.dataScaleY,i=e[0].shape[0],n=e[0].shape[1],a=Math.floor(e[0].shape[0]*t+1)|0,o=Math.floor(e[0].shape[1]*r+1)|0,s=1+i+1,l=1+n+1,u=P3(new Float32Array(s*l),[s,l]),f=[1/t,0,0,0,1/r,0,0,0,1],c=0;c<e.length;++c){this.surface.padField(u,e[c]);var h=P3(new Float32Array(a*o),[a,o]);r6t(h,u,f),e[c]=h}};function i6t(e,t){for(var r=!1,i=0;i<e.length;i++)if(t===e[i]){r=!0;break}r===!1&&e.push(t)}E0.setContourLevels=function(){var e=[[],[],[]],t=[!1,!1,!1],r=!1,i,n,a;for(i=0;i<3;++i)if(this.showContour[i]&&(r=!0,this.contourSize[i]>0&&this.contourStart[i]!==null&&this.contourEnd[i]!==null&&this.contourEnd[i]>this.contourStart[i]))for(t[i]=!0,n=this.contourStart[i];n<this.contourEnd[i];n+=this.contourSize[i])a=n*this.scene.dataScale[i],i6t(e[i],a);if(r){var o=[[],[],[]];for(i=0;i<3;++i)this.showContour[i]&&(o[i]=t[i]?e[i]:this.scene.contourLevels[i]);this.surface.update({levels:o})}};E0.update=function(e){var t=this.scene,r=t.fullSceneLayout,i=this.surface,n=ZPt(e),a=t.dataScale,o=e.z[0].length,s=e._ylength,l=t.contourLevels;this.data=e;var u,f,c,h,v=[];for(u=0;u<3;u++)for(v[u]=[],f=0;f<o;f++)v[u][f]=[];for(f=0;f<o;f++)for(c=0;c<s;c++)v[0][f][c]=this.getXat(f,c,e.xcalendar,r.xaxis),v[1][f][c]=this.getYat(f,c,e.ycalendar,r.yaxis),v[2][f][c]=this.getZat(f,c,e.zcalendar,r.zaxis);if(e.connectgaps)for(e._emptypoints=XPt(v[2]),WPt(v[2],e._emptypoints),e._interpolatedZ=[],f=0;f<o;f++)for(e._interpolatedZ[f]=[],c=0;c<s;c++)e._interpolatedZ[f][c]=v[2][f][c];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h==null?v[u][f][c]=NaN:h=v[u][f][c]*=a[u];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(this.minValues[u]>h&&(this.minValues[u]=h),this.maxValues[u]<h&&(this.maxValues[u]=h));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(v[u][f][c]-=this.objectOffset[u]);var p=[P3(new Float32Array(o*s),[o,s]),P3(new Float32Array(o*s),[o,s]),P3(new Float32Array(o*s),[o,s])];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)p[u].set(f,c,v[u][f][c]);v=[];var _={colormap:n,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},T=jPt(e);if(_.intensityBounds=[T.min,T.max],e.surfacecolor){var g=P3(new Float32Array(o*s),[o,s]);for(f=0;f<o;f++)for(c=0;c<s;c++)g.set(f,c,e.surfacecolor[c][f]);p.push(g)}else _.intensityBounds[0]*=a[2],_.intensityBounds[1]*=a[2];(hD<p[0].shape[0]||hD<p[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(p[0].shape[0],0),this.dataScaleY=this.estimateScale(p[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(p)),e.surfacecolor&&(_.intensity=p.pop());var A=[!0,!0,!0],b=["x","y","z"];for(u=0;u<3;++u){var w=e.contours[b[u]];A[u]=w.highlight,_.showContour[u]=w.show||w.highlight,_.showContour[u]&&(_.contourProject[u]=[w.project.x,w.project.y,w.project.z],w.show?(this.showContour[u]=!0,_.levels[u]=l[u],i.highlightColor[u]=_.contourColor[u]=aLe(w.color),w.usecolormap?i.highlightTint[u]=_.contourTint[u]=0:i.highlightTint[u]=_.contourTint[u]=1,_.contourWidth[u]=w.width,this.contourStart[u]=w.start,this.contourEnd[u]=w.end,this.contourSize[u]=w.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),w.highlight&&(_.dynamicColor[u]=aLe(w.highlightcolor),_.dynamicWidth[u]=w.highlightwidth))}KPt(n)&&(_.vertexColor=!0),_.objectOffset=this.objectOffset,_.coords=p,i.update(_),i.visible=e.visible,i.enableDynamic=A,i.enableHighlight=A,i.snapToData=!0,"lighting"in e&&(i.ambientLight=e.lighting.ambient,i.diffuseLight=e.lighting.diffuse,i.specularLight=e.lighting.specular,i.roughness=e.lighting.roughness,i.fresnel=e.lighting.fresnel),"lightposition"in e&&(i.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z])};E0.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function a6t(e,t){var r=e.glplot.gl,i=GPt({gl:r}),n=new sLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}uLe.exports=a6t});var hLe=ne((Evr,cLe)=>{"use strict";cLe.exports={attributes:CE(),supplyDefaults:IG().supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:iLe(),plot:fLe(),moduleType:"trace",name:"surface",basePlotModule:i1(),categories:["gl3d","2dMap","showLegend"],meta:{}}});var dLe=ne((kvr,vLe)=>{"use strict";vLe.exports=hLe()});var D3=ne((Cvr,gLe)=>{"use strict";var o6t=Ps(),qG=kl().axisHoverFormat,s6t=Ba().hovertemplateAttrs,a1=CE(),pLe=es(),o1=oa().extendFlat;gLe.exports=o1({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s6t({editType:"calc"}),xhoverformat:qG("x"),yhoverformat:qG("y"),zhoverformat:qG("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},o6t("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a1.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o1({},a1.contours.x.show,{}),color:a1.contours.x.color,width:a1.contours.x.width,editType:"calc"},lightposition:{x:o1({},a1.lightposition.x,{dflt:1e5}),y:o1({},a1.lightposition.y,{dflt:1e5}),z:o1({},a1.lightposition.z,{dflt:0}),editType:"calc"},lighting:o1({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},a1.lighting),hoverinfo:o1({},pLe.hoverinfo,{editType:"calc"}),showlegend:o1({},pLe.showlegend,{dflt:!1})})});var dD=ne((Lvr,mLe)=>{"use strict";var l6t=Ps(),vD=kl().axisHoverFormat,u6t=Ba().hovertemplateAttrs,PE=D3(),yLe=es(),zG=oa().extendFlat,f6t=Xs().overrideAll;function OG(e){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function BG(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var F_=mLe.exports=f6t(zG({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:OG("x"),y:OG("y"),z:OG("z")},caps:{x:BG("x"),y:BG("y"),z:BG("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:u6t(),xhoverformat:vD("x"),yhoverformat:vD("y"),zhoverformat:vD("z"),valuehoverformat:vD("value",1),showlegend:zG({},yLe.showlegend,{dflt:!1})},l6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:PE.opacity,lightposition:PE.lightposition,lighting:PE.lighting,flatshading:PE.flatshading,contour:PE.contour,hoverinfo:zG({},yLe.hoverinfo)}),"calc","nested");F_.flatshading.dflt=!0;F_.lighting.facenormalsepsilon.dflt=0;F_.x.editType=F_.y.editType=F_.z.editType=F_.value.editType="calc+clearAxisTypes";F_.transforms=void 0});var NG=ne((Pvr,_Le)=>{"use strict";var c6t=Wt(),h6t=wi(),v6t=dD(),d6t=Kf();function p6t(e,t,r,i){function n(a,o){return c6t.coerce(e,t,v6t,a,o)}xLe(e,t,r,i,n)}function xLe(e,t,r,i,n){var a=n("isomin"),o=n("isomax");o!=null&&a!==void 0&&a!==null&&a>o&&(t.isomin=null,t.isomax=null);var s=n("x"),l=n("y"),u=n("z"),f=n("value");if(!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length){t.visible=!1;return}var c=h6t.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(_){n(_+"hoverformat");var T="caps."+_,g=n(T+".show");g&&n(T+".fill");var A="slices."+_,b=n(A+".show");b&&(n(A+".fill"),n(A+".locations"))});var h=n("spaceframe.show");h&&n("spaceframe.fill");var v=n("surface.show");v&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var p=n("contour.show");p&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){n(_)}),d6t(e,t,i,n,{prefix:"",cLetter:"c"}),t._length=null}_Le.exports={supplyDefaults:p6t,supplyIsoDefaults:xLe}});var pD=ne((Rvr,wLe)=>{"use strict";var VG=Wt(),g6t=gv();function y6t(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=fg(t.u,t._len),t._v=fg(t.v,t._len),t._w=fg(t.w,t._len),t._x=fg(t.x,t._len),t._y=fg(t.y,t._len),t._z=fg(t.z,t._len);var r=bLe(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var i=0,n,a,o;t.starts&&(n=fg(t.starts.x||[]),a=fg(t.starts.y||[]),o=fg(t.starts.z||[]),i=Math.min(n.length,a.length,o.length)),t._startsX=n||[],t._startsY=a||[],t._startsZ=o||[];var s=0,l=1/0,u;for(u=0;u<t._len;u++){var f=t._u[u],c=t._v[u],h=t._w[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}for(g6t(e,t,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<i;u++){var p=n[u];r.xMax=Math.max(r.xMax,p),r.xMin=Math.min(r.xMin,p);var _=a[u];r.yMax=Math.max(r.yMax,_),r.yMin=Math.min(r.yMin,_);var T=o[u];r.zMax=Math.max(r.zMax,T),r.zMin=Math.min(r.zMin,T)}t._slen=i,t._normMax=s,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function bLe(e){var t=e._x,r=e._y,i=e._z,n=e._len,a,o,s,l=-1/0,u=1/0,f=-1/0,c=1/0,h=-1/0,v=1/0,p="",_,T,g,A,b,w,k,x,E;for(n&&(A=t[0],w=r[0],x=i[0]),n>1&&(b=t[n-1],k=r[n-1],E=i[n-1]),a=0;a<n;a++)l=Math.max(l,t[a]),u=Math.min(u,t[a]),f=Math.max(f,r[a]),c=Math.min(c,r[a]),h=Math.max(h,i[a]),v=Math.min(v,i[a]),!_&&t[a]!==A&&(_=!0,p+="x"),!T&&r[a]!==w&&(T=!0,p+="y"),!g&&i[a]!==x&&(g=!0,p+="z");_||(p+="x"),T||(p+="y"),g||(p+="z");var M=UG(e._x),d=UG(e._y),C=UG(e._z);p=p.replace("x",(A>b?"-":"+")+"x"),p=p.replace("y",(w>k?"-":"+")+"y"),p=p.replace("z",(x>E?"-":"+")+"z");var S=function(){n=0,M=[],d=[],C=[]};(!n||n<M.length*d.length*C.length)&&S();var P=function(be){return be==="x"?t:be==="y"?r:i},D=function(be){return be==="x"?M:be==="y"?d:C},z=function(be){return be[n-1]<be[0]?-1:1},O=P(p[1]),V=P(p[3]),B=P(p[5]),F=D(p[1]).length,N=D(p[3]).length,Z=D(p[5]).length,J=!1,re=function(be,he,ie){return F*(N*be+he)+ie},le=z(P(p[1])),fe=z(P(p[3])),K=z(P(p[5]));for(a=0;a<Z-1;a++){for(o=0;o<N-1;o++){for(s=0;s<F-1;s++){var X=re(a,o,s),ae=re(a,o,s+1),oe=re(a,o+1,s),_e=re(a+1,o,s);if((!(O[X]*le<O[ae]*le)||!(V[X]*fe<V[oe]*fe)||!(B[X]*K<B[_e]*K))&&(J=!0),J)break}if(J)break}if(J)break}return J&&(VG.warn("Encountered arbitrary coordinates! Unable to input data grid."),S()),{xMin:u,yMin:c,zMin:v,xMax:l,yMax:f,zMax:h,Xs:M,Ys:d,Zs:C,len:n,fill:p}}function UG(e){return VG.distinctVals(e).vals}function fg(e,t){if(t===void 0&&(t=e.length),VG.isTypedArray(e))return e.subarray(0,t);for(var r=[],i=0;i<t;i++)r[i]=+e[i];return r}wLe.exports={calc:y6t,filter:fg,processGrid:bLe}});var HG=ne((Dvr,TLe)=>{"use strict";var m6t=gv(),x6t=pD().processGrid,gD=pD().filter;TLe.exports=function(t,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length),r._x=gD(r.x,r._len),r._y=gD(r.y,r._len),r._z=gD(r.z,r._len),r._value=gD(r.value,r._len);var i=x6t(r);r._gridFill=i.fill,r._Xs=i.Xs,r._Ys=i.Ys,r._Zs=i.Zs,r._len=i.len;for(var n=1/0,a=-1/0,o=0;o<r._len;o++){var s=r._value[o];n=Math.min(n,s),a=Math.max(a,s)}r._minValues=n,r._maxValues=a,r._vMin=r.isomin===void 0||r.isomin===null?n:r.isomin,r._vMax=r.isomax===void 0||r.isomin===null?a:r.isomax,m6t(t,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})}});var I3=ne((Ivr,ALe)=>{"use strict";ALe.exports=function(t,r,i,n){n=n||t.length;for(var a=new Array(n),o=0;o<n;o++)a[o]=[t[o],r[o],i[o]];return a}});var yD=ne((Fvr,kLe)=>{"use strict";var _6t=yu().gl_mesh3d,b6t=dy().parseColorScale,w6t=Wt().isArrayOrTypedArray,T6t=Dp(),A6t=ul().extractOpts,MLe=I3(),RE=function(e,t){for(var r=t.length-1;r>0;r--){var i=Math.min(t[r],t[r-1]),n=Math.max(t[r],t[r-1]);if(n>i&&i<e&&e<=n)return{id:r,distRatio:(n-e)/(n-i)}}return{id:0,distRatio:0}};function SLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var GG=SLe.prototype;GG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=RE(r,this.data._Xs).id,l=RE(i,this.data._Ys).id,u=RE(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return w6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};GG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=ELe(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=MLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=MLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:T6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=A6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=b6t(e),this.mesh.update(o)};GG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var M6t=["xyz","xzy","yxz","yzx","zxy","zyx"];function ELe(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t=e.surface.show,r=e.spaceframe.show,i=e.surface.fill,n=e.spaceframe.fill,a=!1,o=!1,s=0,l,u,f=e._Xs,c=e._Ys,h=e._Zs,v=f.length,p=c.length,_=h.length,T=M6t.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),g=function(ht,nt,lt){switch(T){case 5:return lt+_*nt+_*p*ht;case 4:return lt+_*ht+_*v*nt;case 3:return nt+p*lt+p*_*ht;case 2:return nt+p*ht+p*v*lt;case 1:return ht+v*lt+v*_*nt;default:return ht+v*nt+v*p*lt}},A=e._minValues,b=e._maxValues,w=e._vMin,k=e._vMax,x,E,M,d;function C(ht,nt,lt){for(var rt=d.length,Xe=u;Xe<rt;Xe++)if(ht===x[Xe]&&nt===E[Xe]&&lt===M[Xe])return Xe;return-1}function S(){u=l}function P(){x=[],E=[],M=[],d=[],l=0,S()}function D(ht,nt,lt,rt){return x.push(ht),E.push(nt),M.push(lt),d.push(rt),l++,l-1}function z(ht,nt,lt){return e._meshI.push(ht),e._meshJ.push(nt),e._meshK.push(lt),s++,s-1}function O(ht,nt,lt){for(var rt=[],Xe=0;Xe<ht.length;Xe++)rt[Xe]=(ht[Xe]+nt[Xe]+lt[Xe])/3;return rt}function V(ht,nt,lt){for(var rt=[],Xe=0;Xe<ht.length;Xe++)rt[Xe]=ht[Xe]*(1-lt)+lt*nt[Xe];return rt}var B;function F(ht){B=ht}function N(ht,nt){var lt=ht[0],rt=ht[1],Xe=ht[2],ft=O(lt,rt,Xe),gt=Math.sqrt(1-B),Qt=V(ft,lt,gt),Jt=V(ft,rt,gt),fr=V(ft,Xe,gt),nr=nt[0],ur=nt[1],qt=nt[2];return{xyzv:[[lt,rt,Jt],[Jt,Qt,lt],[rt,Xe,fr],[fr,Jt,rt],[Xe,lt,Qt],[Qt,fr,Xe]],abc:[[nr,ur,-1],[-1,-1,nr],[ur,qt,-1],[-1,-1,ur],[qt,nr,-1],[-1,-1,qt]]}}function Z(ht,nt){return ht==="all"||ht===null?!0:ht.indexOf(nt)>-1}function J(ht,nt){return ht===null?nt:ht}function re(ht,nt,lt){S();var rt=[nt],Xe=[lt];if(B>=1)rt=[nt],Xe=[lt];else if(B>0){var ft=N(nt,lt);rt=ft.xyzv,Xe=ft.abc}for(var gt=0;gt<rt.length;gt++){nt=rt[gt],lt=Xe[gt];for(var Qt=[],Jt=0;Jt<3;Jt++){var fr=nt[Jt][0],nr=nt[Jt][1],ur=nt[Jt][2],qt=nt[Jt][3],xt=lt[Jt]>-1?lt[Jt]:C(fr,nr,ur);xt>-1?Qt[Jt]=xt:Qt[Jt]=D(fr,nr,ur,J(ht,qt))}z(Qt[0],Qt[1],Qt[2])}}function le(ht,nt,lt){var rt=function(Xe,ft,gt){re(ht,[nt[Xe],nt[ft],nt[gt]],[lt[Xe],lt[ft],lt[gt]])};rt(0,1,2),rt(2,3,0)}function fe(ht,nt,lt){var rt=function(Xe,ft,gt){re(ht,[nt[Xe],nt[ft],nt[gt]],[lt[Xe],lt[ft],lt[gt]])};rt(0,1,2),rt(3,0,1),rt(2,3,0),rt(1,2,3)}function K(ht,nt,lt,rt){var Xe=ht[3];Xe<lt&&(Xe=lt),Xe>rt&&(Xe=rt);for(var ft=(ht[3]-Xe)/(ht[3]-nt[3]+1e-9),gt=[],Qt=0;Qt<4;Qt++)gt[Qt]=(1-ft)*ht[Qt]+ft*nt[Qt];return gt}function X(ht,nt,lt){return ht>=nt&&ht<=lt}function ae(ht){var nt=.001*(k-w);return ht>=w-nt&&ht<=k+nt}function oe(ht){for(var nt=[],lt=0;lt<4;lt++){var rt=ht[lt];nt.push([e._x[rt],e._y[rt],e._z[rt],e._value[rt]])}return nt}var _e=3;function be(ht,nt,lt,rt,Xe,ft){ft||(ft=1),lt=[-1,-1,-1];var gt=!1,Qt=[X(nt[0][3],rt,Xe),X(nt[1][3],rt,Xe),X(nt[2][3],rt,Xe)];if(!Qt[0]&&!Qt[1]&&!Qt[2])return!1;var Jt=function(nr,ur,qt){return ae(ur[0][3])&&ae(ur[1][3])&&ae(ur[2][3])?(re(nr,ur,qt),!0):ft<_e?be(nr,ur,qt,w,k,++ft):!1};if(Qt[0]&&Qt[1]&&Qt[2])return Jt(ht,nt,lt)||gt;var fr=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(nr){if(Qt[nr[0]]&&Qt[nr[1]]&&!Qt[nr[2]]){var ur=nt[nr[0]],qt=nt[nr[1]],xt=nt[nr[2]],At=K(xt,ur,rt,Xe),Je=K(xt,qt,rt,Xe);gt=Jt(ht,[Je,At,ur],[-1,-1,lt[nr[0]]])||gt,gt=Jt(ht,[ur,qt,Je],[lt[nr[0]],lt[nr[1]],-1])||gt,fr=!0}}),fr||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(nr){if(Qt[nr[0]]&&!Qt[nr[1]]&&!Qt[nr[2]]){var ur=nt[nr[0]],qt=nt[nr[1]],xt=nt[nr[2]],At=K(qt,ur,rt,Xe),Je=K(xt,ur,rt,Xe);gt=Jt(ht,[Je,At,ur],[-1,-1,lt[nr[0]]])||gt,fr=!0}}),gt}function he(ht,nt,lt,rt){var Xe=!1,ft=oe(nt),gt=[X(ft[0][3],lt,rt),X(ft[1][3],lt,rt),X(ft[2][3],lt,rt),X(ft[3][3],lt,rt)];if(!gt[0]&&!gt[1]&&!gt[2]&&!gt[3])return Xe;if(gt[0]&&gt[1]&&gt[2]&&gt[3])return o&&(Xe=fe(ht,ft,nt)||Xe),Xe;var Qt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Jt){if(gt[Jt[0]]&&gt[Jt[1]]&&gt[Jt[2]]&&!gt[Jt[3]]){var fr=ft[Jt[0]],nr=ft[Jt[1]],ur=ft[Jt[2]],qt=ft[Jt[3]];if(o)Xe=re(ht,[fr,nr,ur],[nt[Jt[0]],nt[Jt[1]],nt[Jt[2]]])||Xe;else{var xt=K(qt,fr,lt,rt),At=K(qt,nr,lt,rt),Je=K(qt,ur,lt,rt);Xe=re(null,[xt,At,Je],[-1,-1,-1])||Xe}Qt=!0}}),Qt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Jt){if(gt[Jt[0]]&&gt[Jt[1]]&&!gt[Jt[2]]&&!gt[Jt[3]]){var fr=ft[Jt[0]],nr=ft[Jt[1]],ur=ft[Jt[2]],qt=ft[Jt[3]],xt=K(ur,fr,lt,rt),At=K(ur,nr,lt,rt),Je=K(qt,nr,lt,rt),xe=K(qt,fr,lt,rt);o?(Xe=re(ht,[fr,xe,xt],[nt[Jt[0]],-1,-1])||Xe,Xe=re(ht,[nr,At,Je],[nt[Jt[1]],-1,-1])||Xe):Xe=le(null,[xt,At,Je,xe],[-1,-1,-1,-1])||Xe,Qt=!0}}),Qt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Jt){if(gt[Jt[0]]&&!gt[Jt[1]]&&!gt[Jt[2]]&&!gt[Jt[3]]){var fr=ft[Jt[0]],nr=ft[Jt[1]],ur=ft[Jt[2]],qt=ft[Jt[3]],xt=K(nr,fr,lt,rt),At=K(ur,fr,lt,rt),Je=K(qt,fr,lt,rt);o?(Xe=re(ht,[fr,xt,At],[nt[Jt[0]],-1,-1])||Xe,Xe=re(ht,[fr,At,Je],[nt[Jt[0]],-1,-1])||Xe,Xe=re(ht,[fr,Je,xt],[nt[Jt[0]],-1,-1])||Xe):Xe=re(null,[xt,At,Je],[-1,-1,-1])||Xe,Qt=!0}}),Xe}function ie(ht,nt,lt,rt,Xe,ft,gt,Qt,Jt,fr,nr){var ur=!1;return a&&(Z(ht,"A")&&(ur=he(null,[nt,lt,rt,ft],fr,nr)||ur),Z(ht,"B")&&(ur=he(null,[lt,rt,Xe,Jt],fr,nr)||ur),Z(ht,"C")&&(ur=he(null,[lt,ft,gt,Jt],fr,nr)||ur),Z(ht,"D")&&(ur=he(null,[rt,ft,Qt,Jt],fr,nr)||ur),Z(ht,"E")&&(ur=he(null,[lt,rt,ft,Jt],fr,nr)||ur)),o&&(ur=he(ht,[lt,rt,ft,Jt],fr,nr)||ur),ur}function ye(ht,nt,lt,rt,Xe,ft,gt,Qt){return[Qt[0]===!0?!0:be(ht,oe([nt,lt,rt]),[nt,lt,rt],ft,gt),Qt[1]===!0?!0:be(ht,oe([rt,Xe,nt]),[rt,Xe,nt],ft,gt)]}function ue(ht,nt,lt,rt,Xe,ft,gt,Qt,Jt){return Qt?ye(ht,nt,lt,Xe,rt,ft,gt,Jt):ye(ht,lt,Xe,rt,nt,ft,gt,Jt)}function Ae(ht,nt,lt,rt,Xe,ft,gt){var Qt=!1,Jt,fr,nr,ur,qt=function(){Qt=be(ht,[Jt,fr,nr],[-1,-1,-1],Xe,ft)||Qt,Qt=be(ht,[nr,ur,Jt],[-1,-1,-1],Xe,ft)||Qt},xt=gt[0],At=gt[1],Je=gt[2];return xt&&(Jt=V(oe([g(nt,lt-0,rt-0)])[0],oe([g(nt-1,lt-0,rt-0)])[0],xt),fr=V(oe([g(nt,lt-0,rt-1)])[0],oe([g(nt-1,lt-0,rt-1)])[0],xt),nr=V(oe([g(nt,lt-1,rt-1)])[0],oe([g(nt-1,lt-1,rt-1)])[0],xt),ur=V(oe([g(nt,lt-1,rt-0)])[0],oe([g(nt-1,lt-1,rt-0)])[0],xt),qt()),At&&(Jt=V(oe([g(nt-0,lt,rt-0)])[0],oe([g(nt-0,lt-1,rt-0)])[0],At),fr=V(oe([g(nt-0,lt,rt-1)])[0],oe([g(nt-0,lt-1,rt-1)])[0],At),nr=V(oe([g(nt-1,lt,rt-1)])[0],oe([g(nt-1,lt-1,rt-1)])[0],At),ur=V(oe([g(nt-1,lt,rt-0)])[0],oe([g(nt-1,lt-1,rt-0)])[0],At),qt()),Je&&(Jt=V(oe([g(nt-0,lt-0,rt)])[0],oe([g(nt-0,lt-0,rt-1)])[0],Je),fr=V(oe([g(nt-0,lt-1,rt)])[0],oe([g(nt-0,lt-1,rt-1)])[0],Je),nr=V(oe([g(nt-1,lt-1,rt)])[0],oe([g(nt-1,lt-1,rt-1)])[0],Je),ur=V(oe([g(nt-1,lt-0,rt)])[0],oe([g(nt-1,lt-0,rt-1)])[0],Je),qt()),Qt}function Re(ht,nt,lt,rt,Xe,ft,gt,Qt,Jt,fr,nr,ur){var qt=ht;return ur?(a&&ht==="even"&&(qt=null),ie(qt,nt,lt,rt,Xe,ft,gt,Qt,Jt,fr,nr)):(a&&ht==="odd"&&(qt=null),ie(qt,Jt,Qt,gt,ft,Xe,rt,lt,nt,fr,nr))}function ze(ht,nt,lt,rt,Xe){for(var ft=[],gt=0,Qt=0;Qt<nt.length;Qt++)for(var Jt=nt[Qt],fr=1;fr<_;fr++)for(var nr=1;nr<p;nr++)ft.push(ue(ht,g(Jt,nr-1,fr-1),g(Jt,nr-1,fr),g(Jt,nr,fr-1),g(Jt,nr,fr),lt,rt,(Jt+nr+fr)%2,Xe&&Xe[gt]?Xe[gt]:[])),gt++;return ft}function et(ht,nt,lt,rt,Xe){for(var ft=[],gt=0,Qt=0;Qt<nt.length;Qt++)for(var Jt=nt[Qt],fr=1;fr<v;fr++)for(var nr=1;nr<_;nr++)ft.push(ue(ht,g(fr-1,Jt,nr-1),g(fr,Jt,nr-1),g(fr-1,Jt,nr),g(fr,Jt,nr),lt,rt,(fr+Jt+nr)%2,Xe&&Xe[gt]?Xe[gt]:[])),gt++;return ft}function Le(ht,nt,lt,rt,Xe){for(var ft=[],gt=0,Qt=0;Qt<nt.length;Qt++)for(var Jt=nt[Qt],fr=1;fr<p;fr++)for(var nr=1;nr<v;nr++)ft.push(ue(ht,g(nr-1,fr-1,Jt),g(nr-1,fr,Jt),g(nr,fr-1,Jt),g(nr,fr,Jt),lt,rt,(nr+fr+Jt)%2,Xe&&Xe[gt]?Xe[gt]:[])),gt++;return ft}function Ie(ht,nt,lt){for(var rt=1;rt<_;rt++)for(var Xe=1;Xe<p;Xe++)for(var ft=1;ft<v;ft++)Re(ht,g(ft-1,Xe-1,rt-1),g(ft-1,Xe-1,rt),g(ft-1,Xe,rt-1),g(ft-1,Xe,rt),g(ft,Xe-1,rt-1),g(ft,Xe-1,rt),g(ft,Xe,rt-1),g(ft,Xe,rt),nt,lt,(ft+Xe+rt)%2)}function dt(ht,nt,lt){o=!0,Ie(ht,nt,lt),o=!1}function ct(ht,nt,lt){a=!0,Ie(ht,nt,lt),a=!1}function Ke(ht,nt,lt,rt,Xe,ft){for(var gt=[],Qt=0,Jt=0;Jt<nt.length;Jt++)for(var fr=nt[Jt],nr=1;nr<_;nr++)for(var ur=1;ur<p;ur++)gt.push(Ae(ht,fr,ur,nr,lt,rt,Xe[Jt],ft&&ft[Qt]?ft[Qt]:[])),Qt++;return gt}function _t(ht,nt,lt,rt,Xe,ft){for(var gt=[],Qt=0,Jt=0;Jt<nt.length;Jt++)for(var fr=nt[Jt],nr=1;nr<v;nr++)for(var ur=1;ur<_;ur++)gt.push(Ae(ht,nr,fr,ur,lt,rt,Xe[Jt],ft&&ft[Qt]?ft[Qt]:[])),Qt++;return gt}function zt(ht,nt,lt,rt,Xe,ft){for(var gt=[],Qt=0,Jt=0;Jt<nt.length;Jt++)for(var fr=nt[Jt],nr=1;nr<p;nr++)for(var ur=1;ur<v;ur++)gt.push(Ae(ht,ur,nr,fr,lt,rt,Xe[Jt],ft&&ft[Qt]?ft[Qt]:[])),Qt++;return gt}function Et(ht,nt){for(var lt=[],rt=ht;rt<nt;rt++)lt.push(rt);return lt}function Se(){for(var ht=0;ht<v;ht++)for(var nt=0;nt<p;nt++)for(var lt=0;lt<_;lt++){var rt=g(ht,nt,lt);D(e._x[rt],e._y[rt],e._z[rt],e._value[rt])}}function je(){P(),Se();var ht=null;if(r&&n&&(F(n),dt(ht,w,k)),t&&i){F(i);for(var nt=e.surface.pattern,lt=e.surface.count,rt=0;rt<lt;rt++){var Xe=lt===1?.5:rt/(lt-1),ft=(1-Xe)*w+Xe*k,gt=Math.abs(ft-A),Qt=Math.abs(ft-b),Jt=gt>Qt?[A,ft]:[ft,b];ct(nt,Jt[0],Jt[1])}}var fr=[[Math.min(w,b),Math.max(w,b)],[Math.min(A,k),Math.max(A,k)]];["x","y","z"].forEach(function(nr){for(var ur=[],qt=0;qt<fr.length;qt++){var xt=0,At=fr[qt][0],Je=fr[qt][1],xe=e.slices[nr];if(xe.show&&xe.fill){F(xe.fill);var ce=[],ge=[],qe=[];if(xe.locations.length)for(var yt=0;yt<xe.locations.length;yt++){var Vt=RE(xe.locations[yt],nr==="x"?f:nr==="y"?c:h);Vt.distRatio===0?ce.push(Vt.id):Vt.id>0&&(ge.push(Vt.id),nr==="x"?qe.push([Vt.distRatio,0,0]):nr==="y"?qe.push([0,Vt.distRatio,0]):qe.push([0,0,Vt.distRatio]))}else nr==="x"?ce=Et(1,v-1):nr==="y"?ce=Et(1,p-1):ce=Et(1,_-1);ge.length>0&&(nr==="x"?ur[xt]=Ke(ht,ge,At,Je,qe,ur[xt]):nr==="y"?ur[xt]=_t(ht,ge,At,Je,qe,ur[xt]):ur[xt]=zt(ht,ge,At,Je,qe,ur[xt]),xt++),ce.length>0&&(nr==="x"?ur[xt]=ze(ht,ce,At,Je,ur[xt]):nr==="y"?ur[xt]=et(ht,ce,At,Je,ur[xt]):ur[xt]=Le(ht,ce,At,Je,ur[xt]),xt++)}var Ut=e.caps[nr];Ut.show&&Ut.fill&&(F(Ut.fill),nr==="x"?ur[xt]=ze(ht,[0,v-1],At,Je,ur[xt]):nr==="y"?ur[xt]=et(ht,[0,p-1],At,Je,ur[xt]):ur[xt]=Le(ht,[0,_-1],At,Je,ur[xt]),xt++)}}),s===0&&P(),e._meshX=x,e._meshY=E,e._meshZ=M,e._meshIntensity=d,e._Xs=f,e._Ys=c,e._Zs=h}return je(),e}function S6t(e,t){var r=e.glplot.gl,i=_6t({gl:r}),n=new SLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}kLe.exports={findNearestOnAxis:RE,generateIsoMeshes:ELe,createIsosurfaceTrace:S6t}});var LLe=ne((qvr,CLe)=>{"use strict";CLe.exports={attributes:dD(),supplyDefaults:NG().supplyDefaults,calc:HG(),colorbar:{min:"cmin",max:"cmax"},plot:yD().createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var RLe=ne((zvr,PLe)=>{"use strict";PLe.exports=LLe()});var WG=ne((Ovr,ILe)=>{"use strict";var E6t=Ps(),af=dD(),k6t=CE(),DLe=es(),YG=oa().extendFlat,C6t=Xs().overrideAll,DE=ILe.exports=C6t(YG({x:af.x,y:af.y,z:af.z,value:af.value,isomin:af.isomin,isomax:af.isomax,surface:af.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:af.slices,caps:af.caps,text:af.text,hovertext:af.hovertext,xhoverformat:af.xhoverformat,yhoverformat:af.yhoverformat,zhoverformat:af.zhoverformat,valuehoverformat:af.valuehoverformat,hovertemplate:af.hovertemplate},E6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:af.colorbar,opacity:af.opacity,opacityscale:k6t.opacityscale,lightposition:af.lightposition,lighting:af.lighting,flatshading:af.flatshading,contour:af.contour,hoverinfo:YG({},DLe.hoverinfo),showlegend:YG({},DLe.showlegend,{dflt:!1})}),"calc","nested");DE.x.editType=DE.y.editType=DE.z.editType=DE.value.editType="calc+clearAxisTypes";DE.transforms=void 0});var qLe=ne((Bvr,FLe)=>{"use strict";var L6t=Wt(),P6t=WG(),R6t=NG().supplyIsoDefaults,D6t=IG().opacityscaleDefaults;FLe.exports=function(t,r,i,n){function a(o,s){return L6t.coerce(t,r,P6t,o,s)}R6t(t,r,i,n,a),D6t(t,r,n,a)}});var NLe=ne((Nvr,BLe)=>{"use strict";var I6t=yu().gl_mesh3d,F6t=dy().parseColorScale,q6t=Wt().isArrayOrTypedArray,z6t=Dp(),O6t=ul().extractOpts,zLe=I3(),XG=yD().findNearestOnAxis,B6t=yD().generateIsoMeshes;function OLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var ZG=OLe.prototype;ZG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=XG(r,this.data._Xs).id,l=XG(i,this.data._Ys).id,u=XG(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return q6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};ZG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=B6t(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=zLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=zLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:z6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=O6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=F6t(e),this.mesh.update(o)};ZG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function N6t(e,t){var r=e.glplot.gl,i=I6t({gl:r}),n=new OLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}BLe.exports=N6t});var VLe=ne((Uvr,ULe)=>{"use strict";ULe.exports={attributes:WG(),supplyDefaults:qLe(),calc:HG(),colorbar:{min:"cmin",max:"cmax"},plot:NLe(),moduleType:"trace",name:"volume",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var GLe=ne((Vvr,HLe)=>{"use strict";HLe.exports=VLe()});var XLe=ne((Hvr,WLe)=>{"use strict";var U6t=wi(),YLe=Wt(),V6t=Kf(),H6t=D3();WLe.exports=function(t,r,i,n){function a(f,c){return YLe.coerce(t,r,H6t,f,c)}function o(f){var c=f.map(function(h){var v=a(h);return v&&YLe.isArrayOrTypedArray(v)?v:null});return c.every(function(h){return h&&h.length===c[0].length})&&c}var s=o(["x","y","z"]);if(!s){r.visible=!1;return}if(o(["i","j","k"]),r.i&&(!r.j||!r.k)||r.j&&(!r.k||!r.i)||r.k&&(!r.i||!r.j)){r.visible=!1;return}var l=U6t.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(f){a(f)});var u=a("contour.show");u&&(a("contour.color"),a("contour.width")),"intensity"in t?(a("intensity"),a("intensitymode"),V6t(t,r,n,a,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in t?a("facecolor"):"vertexcolor"in t?a("vertexcolor"):a("color",i)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var jLe=ne((Gvr,ZLe)=>{"use strict";var G6t=gv();ZLe.exports=function(t,r){r.intensity&&G6t(t,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}});var ePe=ne((Yvr,$Le)=>{"use strict";var Y6t=yu().gl_mesh3d,W6t=yu().delaunay_triangulate,X6t=yu().alpha_shape,Z6t=yu().convex_hull,j6t=dy().parseColorScale,K6t=Wt().isArrayOrTypedArray,QG=Dp(),J6t=ul().extractOpts,KLe=I3();function QLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var $G=QLe.prototype;$G.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var r=this.data.hovertext||this.data.text;return K6t(r)&&r[t]!==void 0?e.textLabel=r[t]:r&&(e.textLabel=r),!0}};function JLe(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=QG(e[i]);return t}function jG(e,t,r,i){for(var n=[],a=t.length,o=0;o<a;o++)n[o]=e.d2l(t[o],0,i)*r;return n}function KG(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=Math.round(e[i]);return t}function Q6t(e,t){for(var r=["x","y","z"].indexOf(e),i=[],n=t.length,a=0;a<n;a++)i[a]=[t[a][(r+1)%3],t[a][(r+2)%3]];return W6t(i)}function JG(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i]<=-.5||e[i]>=t-.5)return!1;return!0}$G.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=e;var i=e.x.length,n=KLe(jG(r.xaxis,e.x,t.dataScale[0],e.xcalendar),jG(r.yaxis,e.y,t.dataScale[1],e.ycalendar),jG(r.zaxis,e.z,t.dataScale[2],e.zcalendar)),a;if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!JG(e.i,i)||!JG(e.j,i)||!JG(e.k,i))return;a=KLe(KG(e.i),KG(e.j),KG(e.k))}else e.alphahull===0?a=Z6t(n):e.alphahull>0?a=X6t(e.alphahull,n):a=Q6t(e.delaunayaxis,n);var o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:QG(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var s=J6t(e);this.color="#fff";var l=e.intensitymode;o[l+"Intensity"]=e.intensity,o[l+"IntensityBounds"]=[s.min,s.max],o.colormap=j6t(e)}else e.vertexcolor?(this.color=e.vertexcolor[0],o.vertexColors=JLe(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],o.cellColors=JLe(e.facecolor)):(this.color=e.color,o.meshColor=QG(e.color));this.mesh.update(o)};$G.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function $6t(e,t){var r=e.glplot.gl,i=Y6t({gl:r}),n=new QLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}$Le.exports=$6t});var rPe=ne((Wvr,tPe)=>{"use strict";tPe.exports={attributes:D3(),supplyDefaults:XLe(),calc:jLe(),colorbar:{min:"cmin",max:"cmax"},plot:ePe(),moduleType:"trace",name:"mesh3d",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var iPe=ne((Xvr,nPe)=>{"use strict";nPe.exports=rPe()});var tY=ne((Zvr,oPe)=>{"use strict";var eRt=Ps(),F3=kl().axisHoverFormat,tRt=Ba().hovertemplateAttrs,rRt=D3(),aPe=es(),eY=oa().extendFlat,IE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:tRt({editType:"calc"},{keys:["norm"]}),uhoverformat:F3("u",1),vhoverformat:F3("v",1),whoverformat:F3("w",1),xhoverformat:F3("x"),yhoverformat:F3("y"),zhoverformat:F3("z"),showlegend:eY({},aPe.showlegend,{dflt:!1})};eY(IE,eRt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var nRt=["opacity","lightposition","lighting"];nRt.forEach(function(e){IE[e]=rRt[e]});IE.hoverinfo=eY({},aPe.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"});IE.transforms=void 0;oPe.exports=IE});var lPe=ne((jvr,sPe)=>{"use strict";var iRt=Wt(),aRt=Kf(),oRt=tY();sPe.exports=function(t,r,i,n){function a(h,v){return iRt.coerce(t,r,oRt,h,v)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),aRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var fPe=ne((Kvr,uPe)=>{"use strict";var sRt=gv();uPe.exports=function(t,r){for(var i=r.u,n=r.v,a=r.w,o=Math.min(r.x.length,r.y.length,r.z.length,i.length,n.length,a.length),s=-1/0,l=1/0,u=0;u<o;u++){var f=i[u],c=n[u],h=a[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}r._len=o,r._normMax=s,sRt(t,r,{vals:[l,s],containerStr:"",cLetter:"c"})}});var pPe=ne((Jvr,dPe)=>{"use strict";var lRt=yu().gl_cone3d,uRt=yu().gl_cone3d.createConeMesh,fRt=Wt().simpleMap,cRt=dy().parseColorScale,hRt=ul().extractOpts,vRt=Wt().isArrayOrTypedArray,cPe=I3();function hPe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var rY=hPe.prototype;rY.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,r=this.data.x[t],i=this.data.y[t],n=this.data.z[t],a=this.data.u[t],o=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[r,i,n,a,o,s,Math.sqrt(a*a+o*o+s*s)];var l=this.data.hovertext||this.data.text;return vRt(l)&&l[t]!==void 0?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var dRt={xaxis:0,yaxis:1,zaxis:2},pRt={tip:1,tail:0,cm:.25,center:.5},gRt={tip:1,tail:1,cm:.75,center:.5};function vPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n={};function a(u,f){var c=r[f],h=i[dRt[f]];return fRt(u,function(v){return c.d2l(v)*h})}n.vectors=cPe(a(t.u,"xaxis"),a(t.v,"yaxis"),a(t.w,"zaxis"),t._len),n.positions=cPe(a(t.x,"xaxis"),a(t.y,"yaxis"),a(t.z,"zaxis"),t._len);var o=hRt(t);n.colormap=cRt(t),n.vertexIntensityBounds=[o.min/t._normMax,o.max/t._normMax],n.coneOffset=pRt[t.anchor],t.sizemode==="scaled"?n.coneSize=t.sizeref||.5:n.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5;var s=lRt(n),l=t.lightposition;return s.lightPosition=[l.x,l.y,l.z],s.ambient=t.lighting.ambient,s.diffuse=t.lighting.diffuse,s.specular=t.lighting.specular,s.roughness=t.lighting.roughness,s.fresnel=t.lighting.fresnel,s.opacity=t.opacity,t._pad=gRt[t.anchor]*s.vectorScale*s.coneScale*t._normMax,s}rY.update=function(e){this.data=e;var t=vPe(this.scene,e);this.mesh.update(t)};rY.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function yRt(e,t){var r=e.glplot.gl,i=vPe(e,t),n=uRt(r,i),a=new hPe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}dPe.exports=yRt});var yPe=ne((Qvr,gPe)=>{"use strict";gPe.exports={moduleType:"trace",name:"cone",basePlotModule:i1(),categories:["gl3d","showLegend"],attributes:tY(),supplyDefaults:lPe(),colorbar:{min:"cmin",max:"cmax"},calc:fPe(),plot:pPe(),eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{}}});var xPe=ne(($vr,mPe)=>{"use strict";mPe.exports=yPe()});var iY=ne((edr,bPe)=>{"use strict";var mRt=Ps(),q3=kl().axisHoverFormat,xRt=Ba().hovertemplateAttrs,_Rt=D3(),_Pe=es(),nY=oa().extendFlat,FE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:xRt({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:q3("u",1),vhoverformat:q3("v",1),whoverformat:q3("w",1),xhoverformat:q3("x"),yhoverformat:q3("y"),zhoverformat:q3("z"),showlegend:nY({},_Pe.showlegend,{dflt:!1})};nY(FE,mRt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var bRt=["opacity","lightposition","lighting"];bRt.forEach(function(e){FE[e]=_Rt[e]});FE.hoverinfo=nY({},_Pe.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"});FE.transforms=void 0;bPe.exports=FE});var TPe=ne((tdr,wPe)=>{"use strict";var wRt=Wt(),TRt=Kf(),ARt=iY();wPe.exports=function(t,r,i,n){function a(h,v){return wRt.coerce(t,r,ARt,h,v)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),TRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var PPe=ne((rdr,LPe)=>{"use strict";var SPe=yu().gl_streamtube3d,MRt=SPe.createTubeMesh,SRt=Wt(),ERt=dy().parseColorScale,kRt=ul().extractOpts,APe=I3(),EPe={xaxis:0,yaxis:1,zaxis:2};function kPe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var oY=kPe.prototype;oY.handlePick=function(e){var t=this.scene.fullSceneLayout,r=this.scene.dataScale;function i(o,s){var l=t[s],u=r[EPe[s]];return l.l2c(o)/u}if(e.object===this.mesh){var n=e.data.position,a=e.data.velocity;return e.traceCoordinate=[i(n[0],"xaxis"),i(n[1],"yaxis"),i(n[2],"zaxis"),i(a[0],"xaxis"),i(a[1],"yaxis"),i(a[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.hovertext||this.data.text,!0}};function MPe(e){var t=e.length,r;return t>2?r=e.slice(1,t-1):t===2?r=[(e[0]+e[1])/2]:r=e,r}function aY(e){var t=e.length;return t===1?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function CPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n=t._len,a={};function o(P,D){var z=r[D],O=i[EPe[D]];return SRt.simpleMap(P,function(V){return z.d2l(V)*O})}if(a.vectors=APe(o(t._u,"xaxis"),o(t._v,"yaxis"),o(t._w,"zaxis"),n),!n)return{positions:[],cells:[]};var s=o(t._Xs,"xaxis"),l=o(t._Ys,"yaxis"),u=o(t._Zs,"zaxis");a.meshgrid=[s,l,u],a.gridFill=t._gridFill;var f=t._slen;if(f)a.startingPositions=APe(o(t._startsX,"xaxis"),o(t._startsY,"yaxis"),o(t._startsZ,"zaxis"));else{for(var c=l[0],h=MPe(s),v=MPe(u),p=new Array(h.length*v.length),_=0,T=0;T<h.length;T++)for(var g=0;g<v.length;g++)p[_++]=[h[T],c,v[g]];a.startingPositions=p}a.colormap=ERt(t),a.tubeSize=t.sizeref,a.maxLength=t.maxdisplayed;var A=o(t._xbnds,"xaxis"),b=o(t._ybnds,"yaxis"),w=o(t._zbnds,"zaxis"),k=aY(s),x=aY(l),E=aY(u),M=[[A[0]-k[0],b[0]-x[0],w[0]-E[0]],[A[1]+k[1],b[1]+x[1],w[1]+E[1]]],d=SPe(a,M),C=kRt(t);d.vertexIntensityBounds=[C.min/t._normMax,C.max/t._normMax];var S=t.lightposition;return d.lightPosition=[S.x,S.y,S.z],d.ambient=t.lighting.ambient,d.diffuse=t.lighting.diffuse,d.specular=t.lighting.specular,d.roughness=t.lighting.roughness,d.fresnel=t.lighting.fresnel,d.opacity=t.opacity,t._pad=d.tubeScale*t.sizeref*2,d}oY.update=function(e){this.data=e;var t=CPe(this.scene,e);this.mesh.update(t)};oY.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function CRt(e,t){var r=e.glplot.gl,i=CPe(e,t),n=MRt(r,i),a=new kPe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}LPe.exports=CRt});var DPe=ne((ndr,RPe)=>{"use strict";RPe.exports={moduleType:"trace",name:"streamtube",basePlotModule:i1(),categories:["gl3d","showLegend"],attributes:iY(),supplyDefaults:TPe(),colorbar:{min:"cmin",max:"cmax"},calc:pD().calc,plot:PPe(),eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{}}});var FPe=ne((idr,IPe)=>{"use strict";IPe.exports=DPe()});var z3=ne((adr,OPe)=>{"use strict";var LRt=Ba().hovertemplateAttrs,PRt=Ba().texttemplateAttrs,RRt=Y0(),cg=cu(),DRt=es(),qPe=Ps(),IRt=hc().dash,q_=oa().extendFlat,FRt=Xs().overrideAll,qp=cg.marker,zPe=cg.line,qRt=qp.line;OPe.exports=FRt({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:q_({},cg.mode,{dflt:"markers"}),text:q_({},cg.text,{}),texttemplate:PRt({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:q_({},cg.hovertext,{}),textfont:cg.textfont,textposition:cg.textposition,line:{color:zPe.color,width:zPe.width,dash:IRt},connectgaps:cg.connectgaps,marker:q_({symbol:qp.symbol,opacity:qp.opacity,angle:qp.angle,angleref:q_({},qp.angleref,{values:["previous","up","north"]}),standoff:qp.standoff,size:qp.size,sizeref:qp.sizeref,sizemin:qp.sizemin,sizemode:qp.sizemode,colorbar:qp.colorbar,line:q_({width:qRt.width},qPe("marker.line")),gradient:qp.gradient},qPe("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:RRt(),selected:cg.selected,unselected:cg.unselected,hoverinfo:q_({},DRt.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:LRt()},"calc","nested")});var NPe=ne((odr,BPe)=>{"use strict";var sY=Wt(),lY=js(),zRt=dp(),ORt=s0(),BRt=l0(),NRt=X0(),URt=z3();BPe.exports=function(t,r,i,n){function a(v,p){return sY.coerce(t,r,URt,v,p)}var o=a("locations"),s;if(o&&o.length){var l=a("geojson"),u;(typeof l=="string"&&l!==""||sY.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),s=o.length}else{var c=a("lon")||[],h=a("lat")||[];s=Math.min(c.length,h.length)}if(!s){r.visible=!1;return}r._length=s,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),lY.hasMarkers(r)&&zRt(t,r,i,n,a,{gradient:!0}),lY.hasLines(r)&&(ORt(t,r,i,n,a),a("connectgaps")),lY.hasText(r)&&(a("texttemplate"),BRt(t,r,n,a)),a("fill"),r.fill!=="none"&&NRt(t,r,i,a),sY.coerceSelectionMarkerOpacity(r,a)}});var HPe=ne((sdr,VPe)=>{"use strict";var UPe=Xi();VPe.exports=function(t,r,i){var n={},a=i[r.geo]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=UPe.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=UPe.tickText(o,o.c2l(s[1]),!0).text,n}});var fY=ne((ldr,XPe)=>{"use strict";var uY=la(),GPe=$a().BADNUM,VRt=pp(),HRt=Z0(),GRt=gp(),YRt=Wt().isArrayOrTypedArray,YPe=Wt()._;function WPe(e){return e&&typeof e=="string"}XPe.exports=function(t,r){var i=YRt(r.locations),n=i?r.locations.length:r._length,a=new Array(n),o;r.geojson?o=function(h){return WPe(h)||uY(h)}:o=WPe;for(var s=0;s<n;s++){var l=a[s]={};if(i){var u=r.locations[s];l.loc=o(u)?u:null}else{var f=r.lon[s],c=r.lat[s];uY(f)&&uY(c)?l.lonlat=[+f,+c]:l.lonlat=[GPe,GPe]}}return HRt(a,r),VRt(t,r),GRt(a,r),n&&(a[0].t={labels:{lat:YPe(t,"lat:")+" ",lon:YPe(t,"lon:")+" "}}),a}});var qE=ne(bh=>{"use strict";bh.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};bh.axesNames=["lonaxis","lataxis"];bh.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};bh.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};bh.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};bh.clipPad=.001;bh.precision=.1;bh.landColor="#F0DC82";bh.waterColor="#3399FF";bh.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};bh.sphereSVG={type:"Sphere"};bh.fillLayers={ocean:1,land:1,lakes:1};bh.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};bh.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];bh.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];bh.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}});var cY=ne((mD,ZPe)=>{(function(e,t){typeof mD=="object"&&typeof ZPe!="undefined"?t(mD):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.topojson=e.topojson||{}))})(mD,function(e){"use strict";function t(b){return b}function r(b){if(b==null)return t;var w,k,x=b.scale[0],E=b.scale[1],M=b.translate[0],d=b.translate[1];return function(C,S){S||(w=k=0);var P=2,D=C.length,z=new Array(D);for(z[0]=(w+=C[0])*x+M,z[1]=(k+=C[1])*E+d;P<D;)z[P]=C[P],++P;return z}}function i(b){var w=r(b.transform),k,x=1/0,E=x,M=-x,d=-x;function C(P){P=w(P),P[0]<x&&(x=P[0]),P[0]>M&&(M=P[0]),P[1]<E&&(E=P[1]),P[1]>d&&(d=P[1])}function S(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(S);break;case"Point":C(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(C);break}}b.arcs.forEach(function(P){for(var D=-1,z=P.length,O;++D<z;)O=w(P[D],D),O[0]<x&&(x=O[0]),O[0]>M&&(M=O[0]),O[1]<E&&(E=O[1]),O[1]>d&&(d=O[1])});for(k in b.objects)S(b.objects[k]);return[x,E,M,d]}function n(b,w){for(var k,x=b.length,E=x-w;E<--x;)k=b[E],b[E++]=b[x],b[x]=k}function a(b,w){return typeof w=="string"&&(w=b.objects[w]),w.type==="GeometryCollection"?{type:"FeatureCollection",features:w.geometries.map(function(k){return o(b,k)})}:o(b,w)}function o(b,w){var k=w.id,x=w.bbox,E=w.properties==null?{}:w.properties,M=s(b,w);return k==null&&x==null?{type:"Feature",properties:E,geometry:M}:x==null?{type:"Feature",id:k,properties:E,geometry:M}:{type:"Feature",id:k,bbox:x,properties:E,geometry:M}}function s(b,w){var k=r(b.transform),x=b.arcs;function E(D,z){z.length&&z.pop();for(var O=x[D<0?~D:D],V=0,B=O.length;V<B;++V)z.push(k(O[V],V));D<0&&n(z,B)}function M(D){return k(D)}function d(D){for(var z=[],O=0,V=D.length;O<V;++O)E(D[O],z);return z.length<2&&z.push(z[0]),z}function C(D){for(var z=d(D);z.length<4;)z.push(z[0]);return z}function S(D){return D.map(C)}function P(D){var z=D.type,O;switch(z){case"GeometryCollection":return{type:z,geometries:D.geometries.map(P)};case"Point":O=M(D.coordinates);break;case"MultiPoint":O=D.coordinates.map(M);break;case"LineString":O=d(D.arcs);break;case"MultiLineString":O=D.arcs.map(d);break;case"Polygon":O=S(D.arcs);break;case"MultiPolygon":O=D.arcs.map(S);break;default:return null}return{type:z,coordinates:O}}return P(w)}function l(b,w){var k={},x={},E={},M=[],d=-1;w.forEach(function(P,D){var z=b.arcs[P<0?~P:P],O;z.length<3&&!z[1][0]&&!z[1][1]&&(O=w[++d],w[d]=P,w[D]=O)}),w.forEach(function(P){var D=C(P),z=D[0],O=D[1],V,B;if(V=E[z])if(delete E[V.end],V.push(P),V.end=O,B=x[O]){delete x[B.start];var F=B===V?V:V.concat(B);x[F.start=V.start]=E[F.end=B.end]=F}else x[V.start]=E[V.end]=V;else if(V=x[O])if(delete x[V.start],V.unshift(P),V.start=z,B=E[z]){delete E[B.end];var N=B===V?V:B.concat(V);x[N.start=B.start]=E[N.end=V.end]=N}else x[V.start]=E[V.end]=V;else V=[P],x[V.start=z]=E[V.end=O]=V});function C(P){var D=b.arcs[P<0?~P:P],z=D[0],O;return b.transform?(O=[0,0],D.forEach(function(V){O[0]+=V[0],O[1]+=V[1]})):O=D[D.length-1],P<0?[O,z]:[z,O]}function S(P,D){for(var z in P){var O=P[z];delete D[O.start],delete O.start,delete O.end,O.forEach(function(V){k[V<0?~V:V]=1}),M.push(O)}}return S(E,x),S(x,E),w.forEach(function(P){k[P<0?~P:P]||M.push([P])}),M}function u(b){return s(b,f.apply(this,arguments))}function f(b,w,k){var x,E,M;if(arguments.length>1)x=c(b,w,k);else for(E=0,x=new Array(M=b.arcs.length);E<M;++E)x[E]=E;return{type:"MultiLineString",arcs:l(b,x)}}function c(b,w,k){var x=[],E=[],M;function d(z){var O=z<0?~z:z;(E[O]||(E[O]=[])).push({i:z,g:M})}function C(z){z.forEach(d)}function S(z){z.forEach(C)}function P(z){z.forEach(S)}function D(z){switch(M=z,z.type){case"GeometryCollection":z.geometries.forEach(D);break;case"LineString":C(z.arcs);break;case"MultiLineString":case"Polygon":S(z.arcs);break;case"MultiPolygon":P(z.arcs);break}}return D(w),E.forEach(k==null?function(z){x.push(z[0].i)}:function(z){k(z[0].g,z[z.length-1].g)&&x.push(z[0].i)}),x}function h(b){for(var w=-1,k=b.length,x,E=b[k-1],M=0;++w<k;)x=E,E=b[w],M+=x[0]*E[1]-x[1]*E[0];return Math.abs(M)}function v(b){return s(b,p.apply(this,arguments))}function p(b,w){var k={},x=[],E=[];w.forEach(M);function M(S){switch(S.type){case"GeometryCollection":S.geometries.forEach(M);break;case"Polygon":d(S.arcs);break;case"MultiPolygon":S.arcs.forEach(d);break}}function d(S){S.forEach(function(P){P.forEach(function(D){(k[D=D<0?~D:D]||(k[D]=[])).push(S)})}),x.push(S)}function C(S){return h(s(b,{type:"Polygon",arcs:[S]}).coordinates[0])}return x.forEach(function(S){if(!S._){var P=[],D=[S];for(S._=1,E.push(P);S=D.pop();)P.push(S),S.forEach(function(z){z.forEach(function(O){k[O<0?~O:O].forEach(function(V){V._||(V._=1,D.push(V))})})})}}),x.forEach(function(S){delete S._}),{type:"MultiPolygon",arcs:E.map(function(S){var P=[],D;if(S.forEach(function(F){F.forEach(function(N){N.forEach(function(Z){k[Z<0?~Z:Z].length<2&&P.push(Z)})})}),P=l(b,P),(D=P.length)>1)for(var z=1,O=C(P[0]),V,B;z<D;++z)(V=C(P[z]))>O&&(B=P[0],P[0]=P[z],P[z]=B,O=V);return P}).filter(function(S){return S.length>0})}}function _(b,w){for(var k=0,x=b.length;k<x;){var E=k+x>>>1;b[E]<w?k=E+1:x=E}return k}function T(b){var w={},k=b.map(function(){return[]});function x(F,N){F.forEach(function(Z){Z<0&&(Z=~Z);var J=w[Z];J?J.push(N):w[Z]=[N]})}function E(F,N){F.forEach(function(Z){x(Z,N)})}function M(F,N){F.type==="GeometryCollection"?F.geometries.forEach(function(Z){M(Z,N)}):F.type in d&&d[F.type](F.arcs,N)}var d={LineString:x,MultiLineString:E,Polygon:E,MultiPolygon:function(F,N){F.forEach(function(Z){E(Z,N)})}};b.forEach(M);for(var C in w)for(var S=w[C],P=S.length,D=0;D<P;++D)for(var z=D+1;z<P;++z){var O=S[D],V=S[z],B;(B=k[O])[C=_(B,V)]!==V&&B.splice(C,0,V),(B=k[V])[C=_(B,O)]!==O&&B.splice(C,0,O)}return k}function g(b){if(b==null)return t;var w,k,x=b.scale[0],E=b.scale[1],M=b.translate[0],d=b.translate[1];return function(C,S){S||(w=k=0);var P=2,D=C.length,z=new Array(D),O=Math.round((C[0]-M)/x),V=Math.round((C[1]-d)/E);for(z[0]=O-w,w=O,z[1]=V-k,k=V;P<D;)z[P]=C[P],++P;return z}}function A(b,w){if(b.transform)throw new Error("already quantized");if(!w||!w.scale){if(!((d=Math.floor(w))>=2))throw new Error("n must be \u22652");S=b.bbox||i(b);var k=S[0],x=S[1],E=S[2],M=S[3],d;w={scale:[E-k?(E-k)/(d-1):1,M-x?(M-x)/(d-1):1],translate:[k,x]}}else S=b.bbox;var C=g(w),S,P,D=b.objects,z={};function O(F){return C(F)}function V(F){var N;switch(F.type){case"GeometryCollection":N={type:"GeometryCollection",geometries:F.geometries.map(V)};break;case"Point":N={type:"Point",coordinates:O(F.coordinates)};break;case"MultiPoint":N={type:"MultiPoint",coordinates:F.coordinates.map(O)};break;default:return F}return F.id!=null&&(N.id=F.id),F.bbox!=null&&(N.bbox=F.bbox),F.properties!=null&&(N.properties=F.properties),N}function B(F){var N=0,Z=1,J=F.length,re,le=new Array(J);for(le[0]=C(F[0],0);++N<J;)((re=C(F[N],N))[0]||re[1])&&(le[Z++]=re);return Z===1&&(le[Z++]=[0,0]),le.length=Z,le}for(P in D)z[P]=V(D[P]);return{type:"Topology",bbox:S,transform:w,objects:z,arcs:b.arcs.map(B)}}e.bbox=i,e.feature=a,e.merge=v,e.mergeArcs=p,e.mesh=u,e.meshArcs=f,e.neighbors=T,e.quantize=A,e.transform=r,e.untransform=g,Object.defineProperty(e,"__esModule",{value:!0})})});var xD=ne((fdr,jPe)=>{"use strict";var hY=jPe.exports={},WRt=qE().locationmodeToLayer,XRt=cY().feature;hY.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};hY.getTopojsonPath=function(e,t){return e+t+".json"};hY.getTopojsonFeatures=function(e,t){var r=WRt[e.locationmode],i=t.objects[r];return XRt(t,i).features}});var OE=ne(zE=>{"use strict";var ZRt=$a().BADNUM;zE.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],n=[],a=0;a<e.length;a++){var o=e[a],s=o.lonlat;s[0]!==ZRt?n.push(s):!r&&n.length>0&&(i.push(n),n=[])}return n.length>0&&i.push(n),i};zE.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};zE.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};zE.makeBlank=function(){return{type:"Point",coordinates:[]}}});var JPe=ne((hdr,KPe)=>{KPe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var n6e=ne(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.earthRadius=63710088e-1;no.factors={centimeters:no.earthRadius*100,centimetres:no.earthRadius*100,degrees:no.earthRadius/111325,feet:no.earthRadius*3.28084,inches:no.earthRadius*39.37,kilometers:no.earthRadius/1e3,kilometres:no.earthRadius/1e3,meters:no.earthRadius,metres:no.earthRadius,miles:no.earthRadius/1609.344,millimeters:no.earthRadius*1e3,millimetres:no.earthRadius*1e3,nauticalmiles:no.earthRadius/1852,radians:1,yards:no.earthRadius*1.0936};no.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/no.earthRadius,yards:1.0936133};no.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}no.feature=s1;function jRt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return vY(t).geometry;case"LineString":return pY(t).geometry;case"Polygon":return dY(t).geometry;case"MultiPoint":return $Pe(t).geometry;case"MultiLineString":return QPe(t).geometry;case"MultiPolygon":return e6e(t).geometry;default:throw new Error(e+" is invalid")}}no.geometry=jRt;function vY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_D(e[0])||!_D(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return s1(i,t,r)}no.point=vY;function KRt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return vY(i,t)}),r)}no.points=KRt;function dY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return s1(s,t,r)}no.polygon=dY;function JRt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return dY(i,t)}),r)}no.polygons=JRt;function pY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return s1(i,t,r)}no.lineString=pY;function QRt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return pY(i,t)}),r)}no.lineStrings=QRt;function bD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}no.featureCollection=bD;function QPe(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return s1(i,t,r)}no.multiLineString=QPe;function $Pe(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return s1(i,t,r)}no.multiPoint=$Pe;function e6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return s1(i,t,r)}no.multiPolygon=e6e;function $Rt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return s1(i,t,r)}no.geometryCollection=$Rt;function eDt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}no.round=eDt;function t6e(e,t){t===void 0&&(t="kilometers");var r=no.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}no.radiansToLength=t6e;function gY(e,t){t===void 0&&(t="kilometers");var r=no.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}no.lengthToRadians=gY;function tDt(e,t){return r6e(gY(e,t))}no.lengthToDegrees=tDt;function rDt(e){var t=e%360;return t<0&&(t+=360),t}no.bearingToAzimuth=rDt;function r6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}no.radiansToDegrees=r6e;function nDt(e){var t=e%360;return t*Math.PI/180}no.degreesToRadians=nDt;function iDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return t6e(gY(e,t),r)}no.convertLength=iDt;function aDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=no.areaFactors[t];if(!i)throw new Error("invalid original units");var n=no.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}no.convertArea=aDt;function _D(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}no.isNumber=_D;function oDt(e){return!!e&&e.constructor===Object}no.isObject=oDt;function sDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!_D(t))throw new Error("bbox must only contain numbers")})}no.validateBBox=sDt;function lDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}no.validateId=lDt});var l6e=ne(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var Qh=n6e();function BE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,p=v==="FeatureCollection",_=v==="Feature",T=p?e.features.length:1,g=0;g<T;g++){u=p?e.features[g].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var A=0;A<s;A++){var b=0,w=0;if(o=h?u.geometries[A]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,g,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,g,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,g,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,g,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(BE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uDt(e,t,r,i){var n=r;return BE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function i6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function fDt(e,t,r){var i=r;return i6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function a6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function cDt(e,t,r){var i=r;return a6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function hDt(e){var t=[];return BE(e,function(r){t.push(r)}),t}function yY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",p=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:p?e.geometry:e,u=v?e.features[r].properties:p?e.properties:{},f=v?e.features[r].bbox:p?e.bbox:void 0,c=v?e.features[r].id:p?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function vDt(e,t,r){var i=r;return yY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function wD(e,t){yY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Qh.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(Qh.feature(c,n),i,u)===!1)return!1}})}function dDt(e,t,r){var i=r;return wD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function o6e(e,t){wD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(BE(r,function(c,h,v,p,_){if(s===void 0||i>l||p>u||_>f){s=c,l=i,u=p,f=_,a=0;return}var T=Qh.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function pDt(e,t,r){var i=r,n=!1;return o6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function s6e(e,t){if(!e)throw new Error("geojson is required");wD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(Qh.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function gDt(e,t,r){var i=r;return s6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function yDt(e,t){if(t=t||{},!Qh.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),Qh.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),Qh.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),Qh.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),Qh.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function mDt(e,t){if(t=t||{},!Qh.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return Qh.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),Qh.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),Qh.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),Qh.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),Qh.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),Qh.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}mc.coordEach=BE;mc.coordReduce=uDt;mc.propEach=i6e;mc.propReduce=fDt;mc.featureEach=a6e;mc.featureReduce=cDt;mc.coordAll=hDt;mc.geomEach=yY;mc.geomReduce=vDt;mc.flattenEach=wD;mc.flattenReduce=dDt;mc.segmentEach=o6e;mc.segmentReduce=pDt;mc.lineEach=s6e;mc.lineReduce=gDt;mc.findSegment=yDt;mc.findPoint=mDt});var h6e=ne(xY=>{"use strict";Object.defineProperty(xY,"__esModule",{value:!0});var xDt=l6e(),u6e=6378137;function _Dt(e){return xDt.geomReduce(e,function(t,r){return t+bDt(r)},0)}xY.default=_Dt;function bDt(e){var t=0,r;switch(e.type){case"Polygon":return f6e(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=f6e(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function f6e(e){var t=0;if(e&&e.length>0){t+=Math.abs(c6e(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(c6e(e[r]))}return t}function c6e(e){var t,r,i,n,a,o,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,a=u-1,o=0):s===u-1?(n=u-1,a=0,o=1):(n=s,a=s+1,o=s+2),t=e[n],r=e[a],i=e[o],l+=(mY(i[0])-mY(t[0]))*Math.sin(mY(r[1]));l=l*u6e*u6e/2}return l}function mY(e){return e*Math.PI/180}});var AY=ne(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.earthRadius=63710088e-1;za.factors={centimeters:za.earthRadius*100,centimetres:za.earthRadius*100,degrees:za.earthRadius/111325,feet:za.earthRadius*3.28084,inches:za.earthRadius*39.37,kilometers:za.earthRadius/1e3,kilometres:za.earthRadius/1e3,meters:za.earthRadius,metres:za.earthRadius,miles:za.earthRadius/1609.344,millimeters:za.earthRadius*1e3,millimetres:za.earthRadius*1e3,nauticalmiles:za.earthRadius/1852,radians:1,yards:za.earthRadius/1.0936};za.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/za.earthRadius,yards:1/1.0936};za.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}za.feature=l1;function wDt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return _Y(t).geometry;case"LineString":return wY(t).geometry;case"Polygon":return bY(t).geometry;case"MultiPoint":return d6e(t).geometry;case"MultiLineString":return v6e(t).geometry;case"MultiPolygon":return p6e(t).geometry;default:throw new Error(e+" is invalid")}}za.geometry=wDt;function _Y(e,t,r){r===void 0&&(r={});var i={type:"Point",coordinates:e};return l1(i,t,r)}za.point=_Y;function TDt(e,t,r){return r===void 0&&(r={}),TD(e.map(function(i){return _Y(i,t)}),r)}za.points=TDt;function bY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return l1(s,t,r)}za.polygon=bY;function ADt(e,t,r){return r===void 0&&(r={}),TD(e.map(function(i){return bY(i,t)}),r)}za.polygons=ADt;function wY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return l1(i,t,r)}za.lineString=wY;function MDt(e,t,r){return r===void 0&&(r={}),TD(e.map(function(i){return wY(i,t)}),r)}za.lineStrings=MDt;function TD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}za.featureCollection=TD;function v6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return l1(i,t,r)}za.multiLineString=v6e;function d6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return l1(i,t,r)}za.multiPoint=d6e;function p6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return l1(i,t,r)}za.multiPolygon=p6e;function SDt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return l1(i,t,r)}za.geometryCollection=SDt;function EDt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}za.round=EDt;function g6e(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}za.radiansToLength=g6e;function TY(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}za.lengthToRadians=TY;function kDt(e,t){return y6e(TY(e,t))}za.lengthToDegrees=kDt;function CDt(e){var t=e%360;return t<0&&(t+=360),t}za.bearingToAzimuth=CDt;function y6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}za.radiansToDegrees=y6e;function LDt(e){var t=e%360;return t*Math.PI/180}za.degreesToRadians=LDt;function PDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return g6e(TY(e,t),r)}za.convertLength=PDt;function RDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=za.areaFactors[t];if(!i)throw new Error("invalid original units");var n=za.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}za.convertArea=RDt;function m6e(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)&&!/^\s*$/.test(e)}za.isNumber=m6e;function DDt(e){return!!e&&e.constructor===Object}za.isObject=DDt;function IDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!m6e(t))throw new Error("bbox must only contain numbers")})}za.validateBBox=IDt;function FDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}za.validateId=FDt;function qDt(){throw new Error("method has been renamed to `radiansToDegrees`")}za.radians2degrees=qDt;function zDt(){throw new Error("method has been renamed to `degreesToRadians`")}za.degrees2radians=zDt;function ODt(){throw new Error("method has been renamed to `lengthToDegrees`")}za.distanceToDegrees=ODt;function BDt(){throw new Error("method has been renamed to `lengthToRadians`")}za.distanceToRadians=BDt;function NDt(){throw new Error("method has been renamed to `radiansToLength`")}za.radiansToDistance=NDt;function UDt(){throw new Error("method has been renamed to `bearingToAzimuth`")}za.bearingToAngle=UDt;function VDt(){throw new Error("method has been renamed to `convertLength`")}za.convertDistance=VDt});var T6e=ne(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var $h=AY();function NE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,p=v==="FeatureCollection",_=v==="Feature",T=p?e.features.length:1,g=0;g<T;g++){u=p?e.features[g].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var A=0;A<s;A++){var b=0,w=0;if(o=h?u.geometries[A]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,g,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,g,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,g,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,g,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(NE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function HDt(e,t,r,i){var n=r;return NE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function x6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function GDt(e,t,r){var i=r;return x6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function _6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function YDt(e,t,r){var i=r;return _6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function WDt(e){var t=[];return NE(e,function(r){t.push(r)}),t}function MY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",p=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:p?e.geometry:e,u=v?e.features[r].properties:p?e.properties:{},f=v?e.features[r].bbox:p?e.bbox:void 0,c=v?e.features[r].id:p?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function XDt(e,t,r){var i=r;return MY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function AD(e,t){MY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t($h.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t($h.feature(c,n),i,u)===!1)return!1}})}function ZDt(e,t,r){var i=r;return AD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function b6e(e,t){AD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(NE(r,function(c,h,v,p,_){if(s===void 0||i>l||p>u||_>f){s=c,l=i,u=p,f=_,a=0;return}var T=$h.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function jDt(e,t,r){var i=r,n=!1;return b6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function w6e(e,t){if(!e)throw new Error("geojson is required");AD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t($h.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function KDt(e,t,r){var i=r;return w6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function JDt(e,t){if(t=t||{},!$h.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),$h.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),$h.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),$h.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),$h.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function QDt(e,t){if(t=t||{},!$h.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return $h.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),$h.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),$h.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),$h.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),$h.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),$h.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}xc.coordEach=NE;xc.coordReduce=HDt;xc.propEach=x6e;xc.propReduce=GDt;xc.featureEach=_6e;xc.featureReduce=YDt;xc.coordAll=WDt;xc.geomEach=MY;xc.geomReduce=XDt;xc.flattenEach=AD;xc.flattenReduce=ZDt;xc.segmentEach=b6e;xc.segmentReduce=jDt;xc.lineEach=w6e;xc.lineReduce=KDt;xc.findSegment=JDt;xc.findPoint=QDt});var A6e=ne(SY=>{"use strict";Object.defineProperty(SY,"__esModule",{value:!0});var $Dt=T6e(),eIt=AY();function tIt(e,t){t===void 0&&(t={});var r=0,i=0,n=0;return $Dt.coordEach(e,function(a){r+=a[0],i+=a[1],n++}),eIt.point([r/n,i/n],t.properties)}SY.default=tIt});var L6e=ne(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.earthRadius=63710088e-1;io.factors={centimeters:io.earthRadius*100,centimetres:io.earthRadius*100,degrees:io.earthRadius/111325,feet:io.earthRadius*3.28084,inches:io.earthRadius*39.37,kilometers:io.earthRadius/1e3,kilometres:io.earthRadius/1e3,meters:io.earthRadius,metres:io.earthRadius,miles:io.earthRadius/1609.344,millimeters:io.earthRadius*1e3,millimetres:io.earthRadius*1e3,nauticalmiles:io.earthRadius/1852,radians:1,yards:io.earthRadius*1.0936};io.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/io.earthRadius,yards:1.0936133};io.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}io.feature=u1;function rIt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return EY(t).geometry;case"LineString":return CY(t).geometry;case"Polygon":return kY(t).geometry;case"MultiPoint":return S6e(t).geometry;case"MultiLineString":return M6e(t).geometry;case"MultiPolygon":return E6e(t).geometry;default:throw new Error(e+" is invalid")}}io.geometry=rIt;function EY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!MD(e[0])||!MD(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return u1(i,t,r)}io.point=EY;function nIt(e,t,r){return r===void 0&&(r={}),SD(e.map(function(i){return EY(i,t)}),r)}io.points=nIt;function kY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return u1(s,t,r)}io.polygon=kY;function iIt(e,t,r){return r===void 0&&(r={}),SD(e.map(function(i){return kY(i,t)}),r)}io.polygons=iIt;function CY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return u1(i,t,r)}io.lineString=CY;function aIt(e,t,r){return r===void 0&&(r={}),SD(e.map(function(i){return CY(i,t)}),r)}io.lineStrings=aIt;function SD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}io.featureCollection=SD;function M6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return u1(i,t,r)}io.multiLineString=M6e;function S6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return u1(i,t,r)}io.multiPoint=S6e;function E6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return u1(i,t,r)}io.multiPolygon=E6e;function oIt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return u1(i,t,r)}io.geometryCollection=oIt;function sIt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}io.round=sIt;function k6e(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}io.radiansToLength=k6e;function LY(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}io.lengthToRadians=LY;function lIt(e,t){return C6e(LY(e,t))}io.lengthToDegrees=lIt;function uIt(e){var t=e%360;return t<0&&(t+=360),t}io.bearingToAzimuth=uIt;function C6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}io.radiansToDegrees=C6e;function fIt(e){var t=e%360;return t*Math.PI/180}io.degreesToRadians=fIt;function cIt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return k6e(LY(e,t),r)}io.convertLength=cIt;function hIt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=io.areaFactors[t];if(!i)throw new Error("invalid original units");var n=io.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}io.convertArea=hIt;function MD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}io.isNumber=MD;function vIt(e){return!!e&&e.constructor===Object}io.isObject=vIt;function dIt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!MD(t))throw new Error("bbox must only contain numbers")})}io.validateBBox=dIt;function pIt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}io.validateId=pIt});var F6e=ne(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var ev=L6e();function UE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,p=v==="FeatureCollection",_=v==="Feature",T=p?e.features.length:1,g=0;g<T;g++){u=p?e.features[g].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var A=0;A<s;A++){var b=0,w=0;if(o=h?u.geometries[A]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,g,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,g,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,g,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,g,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(UE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function gIt(e,t,r,i){var n=r;return UE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function P6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function yIt(e,t,r){var i=r;return P6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function R6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function mIt(e,t,r){var i=r;return R6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function xIt(e){var t=[];return UE(e,function(r){t.push(r)}),t}function PY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",p=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:p?e.geometry:e,u=v?e.features[r].properties:p?e.properties:{},f=v?e.features[r].bbox:p?e.bbox:void 0,c=v?e.features[r].id:p?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function _It(e,t,r){var i=r;return PY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function ED(e,t){PY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(ev.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(ev.feature(c,n),i,u)===!1)return!1}})}function bIt(e,t,r){var i=r;return ED(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function D6e(e,t){ED(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(UE(r,function(c,h,v,p,_){if(s===void 0||i>l||p>u||_>f){s=c,l=i,u=p,f=_,a=0;return}var T=ev.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function wIt(e,t,r){var i=r,n=!1;return D6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function I6e(e,t){if(!e)throw new Error("geojson is required");ED(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(ev.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function TIt(e,t,r){var i=r;return I6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function AIt(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),ev.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),ev.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),ev.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),ev.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function MIt(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return ev.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),ev.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),ev.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),ev.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),ev.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),ev.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}_c.coordEach=UE;_c.coordReduce=gIt;_c.propEach=P6e;_c.propReduce=yIt;_c.featureEach=R6e;_c.featureReduce=mIt;_c.coordAll=xIt;_c.geomEach=PY;_c.geomReduce=_It;_c.flattenEach=ED;_c.flattenReduce=bIt;_c.segmentEach=D6e;_c.segmentReduce=wIt;_c.lineEach=I6e;_c.lineReduce=TIt;_c.findSegment=AIt;_c.findPoint=MIt});var q6e=ne(DY=>{"use strict";Object.defineProperty(DY,"__esModule",{value:!0});var SIt=F6e();function RY(e){var t=[1/0,1/0,-1/0,-1/0];return SIt.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}RY.default=RY;DY.default=RY});var B3=ne((wdr,U6e)=>{"use strict";var EIt=Ai(),B6e=JPe(),kIt=h6e(),CIt=A6e(),LIt=q6e(),z6e=pA(),O3=Wy(),PIt=Lg(),RIt=iA(),kD=eM(),O6e=Object.keys(B6e),DIt={"ISO-3":z6e,"USA-states":z6e,"country names":IIt};function IIt(e){for(var t=0;t<O6e.length;t++){var r=O6e[t],i=new RegExp(B6e[r]);if(i.test(e.trim().toLowerCase()))return r}return O3.log("Unrecognized country name: "+e+"."),!1}function FIt(e,t,r){if(!t||typeof t!="string")return!1;var i=DIt[e](t),n,a,o;if(i){if(e==="USA-states")for(n=[],o=0;o<r.length;o++)a=r[o],a.properties&&a.properties.gu&&a.properties.gu==="USA"&&n.push(a);else n=r;for(o=0;o<n.length;o++)if(a=n[o],a.id===i)return a;O3.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function qIt(e){var t=e.geometry,r=t.coordinates,i=e.id,n=[],a,o,s,l;function u(f){for(var c=0;c<f.length-1;c++)if(f[c][0]>0&&f[c+1][0]<0)return c;return null}switch(i==="RUS"||i==="FJI"?a=function(f){var c;if(u(f)===null)c=f;else for(c=new Array(f.length),l=0;l<f.length;l++)c[l]=[f[l][0]<0?f[l][0]+360:f[l][0],f[l][1]];n.push(kD.tester(c))}:i==="ATA"?a=function(f){var c=u(f);if(c===null)return n.push(kD.tester(f));var h=new Array(f.length+1),v=0;for(l=0;l<f.length;l++)l>c?h[v++]=[f[l][0]+360,f[l][1]]:l===c?(h[v++]=f[l],h[v++]=[f[l][0],-90]):h[v++]=f[l];var p=kD.tester(h);p.pts.pop(),n.push(p)}:a=function(f){n.push(kD.tester(f))},t.type){case"MultiPolygon":for(o=0;o<r.length;o++)for(s=0;s<r[o].length;s++)a(r[o][s]);break;case"Polygon":for(o=0;o<r.length;o++)a(r[o]);break}return n}function N6e(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return PIt(i)?i:(O3.error("Oops ... something went wrong when fetching "+t),!1)}function zIt(e){var t=e[0].trace,r=N6e(t);if(!r)return!1;var i={},n=[],a;for(a=0;a<t._length;a++){var o=e[a];(o.loc||o.loc===0)&&(i[o.loc]=o)}function s(f){var c=RIt(f,t.featureidkey||"id").get(),h=i[c];if(h){var v=f.geometry;if(v.type==="Polygon"||v.type==="MultiPolygon"){var p={type:"Feature",id:c,geometry:v,properties:{}};p.properties.ct=OIt(p),h.fIn=f,h.fOut=p,n.push(p)}else O3.log(["Location",h.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[c]}switch(r.type){case"FeatureCollection":var l=r.features;for(a=0;a<l.length;a++)s(l[a]);break;case"Feature":s(r);break;default:return O3.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var u in i)O3.log(["Location *"+u+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return n}function OIt(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,n=0,a=0;a<i.length;a++){var o={type:"Polygon",coordinates:i[a]},s=kIt.default(o);s>n&&(n=s,r=o)}else r=t;return CIt.default(r).geometry.coordinates}function BIt(e){var t=window.PlotlyGeoAssets||{},r=[];function i(l){return new Promise(function(u,f){EIt.json(l,function(c,h){if(c){delete t[l];var v=c.status===404?'GeoJSON at URL "'+l+'" does not exist.':"Unexpected error while fetching from "+l;return f(new Error(v))}return t[l]=h,u(h)})})}function n(l){return new Promise(function(u,f){var c=0,h=setInterval(function(){if(t[l]&&t[l]!=="pending")return clearInterval(h),u(t[l]);if(c>100)return clearInterval(h),f("Unexpected error while fetching from "+l);c++},50)})}for(var a=0;a<e.length;a++){var o=e[a][0].trace,s=o.geojson;typeof s=="string"&&(t[s]?t[s]==="pending"&&r.push(n(s)):(t[s]="pending",r.push(i(s))))}return r}function NIt(e){return LIt.default(e)}U6e.exports={locationToFeature:FIt,feature2polygons:qIt,getTraceGeojson:N6e,extractTraceFeature:zIt,fetchTraceGeoData:BIt,computeBbox:NIt}});var IY=ne((Tdr,G6e)=>{"use strict";var UIt=Ai(),VIt=aa(),V6e=_i(),H6e=Tv(),HIt=H6e.stylePoints,GIt=H6e.styleText;G6e.exports=function(t,r){r&&YIt(t,r)};function YIt(e,t){var r=t[0].trace,i=t[0].node3;i.style("opacity",t[0].trace.opacity),HIt(i,r,e),GIt(i,r,e),i.selectAll("path.js-line").style("fill","none").each(function(n){var a=UIt.select(this),o=n.trace,s=o.line||{};a.call(V6e.stroke,s.color).call(VIt.dashLine,s.dash||"",s.width||0),o.fill!=="none"&&a.call(V6e.fill,o.fillcolor)})}});var OY=ne((Adr,X6e)=>{"use strict";var Y6e=Ai(),LD=Wt(),WIt=xD().getTopojsonFeatures,FY=OE(),CD=B3(),W6e=Cd().findExtremes,zY=$a().BADNUM,XIt=yp().calcMarkerSize,qY=js(),ZIt=IY();function jIt(e,t,r){var i=t.layers.frontplot.select(".scatterlayer"),n=LD.makeTraceGroups(i,r,"trace scattergeo");function a(o,s){o.lonlat[0]===zY&&Y6e.select(s).remove()}n.selectAll("*").remove(),n.each(function(o){var s=Y6e.select(this),l=o[0].trace;if(qY.hasLines(l)||l.fill!=="none"){var u=FY.calcTraceToLineCoords(o),f=l.fill!=="none"?FY.makePolygon(u):FY.makeLine(u);s.selectAll("path.js-line").data([{geojson:f,trace:l}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}qY.hasMarkers(l)&&s.selectAll("path.point").data(LD.identity).enter().append("path").classed("point",!0).each(function(c){a(c,this)}),qY.hasText(l)&&s.selectAll("g").data(LD.identity).enter().append("g").append("text").each(function(c){a(c,this)}),ZIt(e,o)})}function KIt(e,t){var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r._length,o,s;if(LD.isArrayOrTypedArray(r.locations)){var l=r.locationmode,u=l==="geojson-id"?CD.extractTraceFeature(e):WIt(r,n.topojson);for(o=0;o<a;o++){s=e[o];var f=l==="geojson-id"?s.fOut:CD.locationToFeature(l,s.loc,u);s.lonlat=f?f.properties.ct:[zY,zY]}}var c={padded:!0},h,v;if(i.fitbounds==="geojson"&&r.locationmode==="geojson-id"){var p=CD.computeBbox(CD.getTraceGeojson(r));h=[p[0],p[2]],v=[p[1],p[3]]}else{for(h=new Array(a),v=new Array(a),o=0;o<a;o++)s=e[o],h[o]=s.lonlat[0],v[o]=s.lonlat[1];c.ppad=XIt(r,a)}r._extremes.lon=W6e(i.lonaxis._ax,h,c),r._extremes.lat=W6e(i.lataxis._ax,v,c)}X6e.exports={calcGeoJSON:KIt,plot:jIt}});var j6e=ne((Mdr,Z6e)=>{"use strict";var JIt=Ol(),QIt=$a().BADNUM,$It=j2(),eFt=Wt().fillText,tFt=z3();Z6e.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.xa,s=t.ya,l=t.subplot,u=l.projection.isLonLatOverEdges,f=l.project;function c(A){var b=A.lonlat;if(b[0]===QIt||u(b))return 1/0;var w=f(b),k=f([r,i]),x=Math.abs(w[0]-k[0]),E=Math.abs(w[1]-k[1]),M=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(x*x+E*E)-M,1-3/M)}if(JIt.getClosest(n,c,t),t.index!==!1){var h=n[t.index],v=h.lonlat,p=[o.c2p(v),s.c2p(v)],_=h.mrc||1;t.x0=p[0]-_,t.x1=p[0]+_,t.y0=p[1]-_,t.y1=p[1]+_,t.loc=h.loc,t.lon=v[0],t.lat=v[1];var T={};T[a.geo]={_subplot:l};var g=a._module.formatLabels(h,a,T);return t.lonLabel=g.lonLabel,t.latLabel=g.latLabel,t.color=$It(a,h),t.extraText=rFt(a,h,t,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}};function rFt(e,t,r,i){if(e.hovertemplate)return;var n=t.hi||e.hoverinfo,a=n==="all"?tFt.hoverinfo.flags:n.split("+"),o=a.indexOf("location")!==-1&&Array.isArray(e.locations),s=a.indexOf("lon")!==-1,l=a.indexOf("lat")!==-1,u=a.indexOf("text")!==-1,f=[];function c(h){return h+"\xB0"}return o?f.push(t.loc):s&&l?f.push("("+c(r.latLabel)+", "+c(r.lonLabel)+")"):s?f.push(i.lon+c(r.lonLabel)):l&&f.push(i.lat+c(r.latLabel)),u&&eFt(t,e,f),f.join("<br>")}});var J6e=ne((Sdr,K6e)=>{"use strict";K6e.exports=function(t,r,i,n,a){t.lon=r.lon,t.lat=r.lat,t.location=r.loc?r.loc:null;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t}});var eRe=ne((Edr,$6e)=>{"use strict";var Q6e=js(),nFt=$a().BADNUM;$6e.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h,v=!Q6e.hasMarkers(s)&&!Q6e.hasText(s);if(v)return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)l=i[h],u=l.lonlat,u[0]!==nFt&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,h,t)?(o.push({pointNumber:h,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var VE=ne((PD,tRe)=>{(function(e,t){typeof PD=="object"&&typeof tRe!="undefined"?t(PD):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(PD,function(e){"use strict";function t(oe,_e){return oe<_e?-1:oe>_e?1:oe>=_e?0:NaN}function r(oe){return oe.length===1&&(oe=i(oe)),{left:function(_e,be,he,ie){for(he==null&&(he=0),ie==null&&(ie=_e.length);he<ie;){var ye=he+ie>>>1;oe(_e[ye],be)<0?he=ye+1:ie=ye}return he},right:function(_e,be,he,ie){for(he==null&&(he=0),ie==null&&(ie=_e.length);he<ie;){var ye=he+ie>>>1;oe(_e[ye],be)>0?ie=ye:he=ye+1}return he}}}function i(oe){return function(_e,be){return t(oe(_e),be)}}var n=r(t),a=n.right,o=n.left;function s(oe,_e){_e==null&&(_e=l);for(var be=0,he=oe.length-1,ie=oe[0],ye=new Array(he<0?0:he);be<he;)ye[be]=_e(ie,ie=oe[++be]);return ye}function l(oe,_e){return[oe,_e]}function u(oe,_e,be){var he=oe.length,ie=_e.length,ye=new Array(he*ie),ue,Ae,Re,ze;for(be==null&&(be=l),ue=Re=0;ue<he;++ue)for(ze=oe[ue],Ae=0;Ae<ie;++Ae,++Re)ye[Re]=be(ze,_e[Ae]);return ye}function f(oe,_e){return _e<oe?-1:_e>oe?1:_e>=oe?0:NaN}function c(oe){return oe===null?NaN:+oe}function h(oe,_e){var be=oe.length,he=0,ie=-1,ye=0,ue,Ae,Re=0;if(_e==null)for(;++ie<be;)isNaN(ue=c(oe[ie]))||(Ae=ue-ye,ye+=Ae/++he,Re+=Ae*(ue-ye));else for(;++ie<be;)isNaN(ue=c(_e(oe[ie],ie,oe)))||(Ae=ue-ye,ye+=Ae/++he,Re+=Ae*(ue-ye));if(he>1)return Re/(he-1)}function v(oe,_e){var be=h(oe,_e);return be&&Math.sqrt(be)}function p(oe,_e){var be=oe.length,he=-1,ie,ye,ue;if(_e==null){for(;++he<be;)if((ie=oe[he])!=null&&ie>=ie)for(ye=ue=ie;++he<be;)(ie=oe[he])!=null&&(ye>ie&&(ye=ie),ue<ie&&(ue=ie))}else for(;++he<be;)if((ie=_e(oe[he],he,oe))!=null&&ie>=ie)for(ye=ue=ie;++he<be;)(ie=_e(oe[he],he,oe))!=null&&(ye>ie&&(ye=ie),ue<ie&&(ue=ie));return[ye,ue]}var _=Array.prototype,T=_.slice,g=_.map;function A(oe){return function(){return oe}}function b(oe){return oe}function w(oe,_e,be){oe=+oe,_e=+_e,be=(ie=arguments.length)<2?(_e=oe,oe=0,1):ie<3?1:+be;for(var he=-1,ie=Math.max(0,Math.ceil((_e-oe)/be))|0,ye=new Array(ie);++he<ie;)ye[he]=oe+he*be;return ye}var k=Math.sqrt(50),x=Math.sqrt(10),E=Math.sqrt(2);function M(oe,_e,be){var he,ie=-1,ye,ue,Ae;if(_e=+_e,oe=+oe,be=+be,oe===_e&&be>0)return[oe];if((he=_e<oe)&&(ye=oe,oe=_e,_e=ye),(Ae=d(oe,_e,be))===0||!isFinite(Ae))return[];if(Ae>0)for(oe=Math.ceil(oe/Ae),_e=Math.floor(_e/Ae),ue=new Array(ye=Math.ceil(_e-oe+1));++ie<ye;)ue[ie]=(oe+ie)*Ae;else for(oe=Math.floor(oe*Ae),_e=Math.ceil(_e*Ae),ue=new Array(ye=Math.ceil(oe-_e+1));++ie<ye;)ue[ie]=(oe-ie)/Ae;return he&&ue.reverse(),ue}function d(oe,_e,be){var he=(_e-oe)/Math.max(0,be),ie=Math.floor(Math.log(he)/Math.LN10),ye=he/Math.pow(10,ie);return ie>=0?(ye>=k?10:ye>=x?5:ye>=E?2:1)*Math.pow(10,ie):-Math.pow(10,-ie)/(ye>=k?10:ye>=x?5:ye>=E?2:1)}function C(oe,_e,be){var he=Math.abs(_e-oe)/Math.max(0,be),ie=Math.pow(10,Math.floor(Math.log(he)/Math.LN10)),ye=he/ie;return ye>=k?ie*=10:ye>=x?ie*=5:ye>=E&&(ie*=2),_e<oe?-ie:ie}function S(oe){return Math.ceil(Math.log(oe.length)/Math.LN2)+1}function P(){var oe=b,_e=p,be=S;function he(ie){var ye,ue=ie.length,Ae,Re=new Array(ue);for(ye=0;ye<ue;++ye)Re[ye]=oe(ie[ye],ye,ie);var ze=_e(Re),et=ze[0],Le=ze[1],Ie=be(Re,et,Le);Array.isArray(Ie)||(Ie=C(et,Le,Ie),Ie=w(Math.ceil(et/Ie)*Ie,Le,Ie));for(var dt=Ie.length;Ie[0]<=et;)Ie.shift(),--dt;for(;Ie[dt-1]>Le;)Ie.pop(),--dt;var ct=new Array(dt+1),Ke;for(ye=0;ye<=dt;++ye)Ke=ct[ye]=[],Ke.x0=ye>0?Ie[ye-1]:et,Ke.x1=ye<dt?Ie[ye]:Le;for(ye=0;ye<ue;++ye)Ae=Re[ye],et<=Ae&&Ae<=Le&&ct[a(Ie,Ae,0,dt)].push(ie[ye]);return ct}return he.value=function(ie){return arguments.length?(oe=typeof ie=="function"?ie:A(ie),he):oe},he.domain=function(ie){return arguments.length?(_e=typeof ie=="function"?ie:A([ie[0],ie[1]]),he):_e},he.thresholds=function(ie){return arguments.length?(be=typeof ie=="function"?ie:Array.isArray(ie)?A(T.call(ie)):A(ie),he):be},he}function D(oe,_e,be){if(be==null&&(be=c),!!(he=oe.length)){if((_e=+_e)<=0||he<2)return+be(oe[0],0,oe);if(_e>=1)return+be(oe[he-1],he-1,oe);var he,ie=(he-1)*_e,ye=Math.floor(ie),ue=+be(oe[ye],ye,oe),Ae=+be(oe[ye+1],ye+1,oe);return ue+(Ae-ue)*(ie-ye)}}function z(oe,_e,be){return oe=g.call(oe,c).sort(t),Math.ceil((be-_e)/(2*(D(oe,.75)-D(oe,.25))*Math.pow(oe.length,-1/3)))}function O(oe,_e,be){return Math.ceil((be-_e)/(3.5*v(oe)*Math.pow(oe.length,-1/3)))}function V(oe,_e){var be=oe.length,he=-1,ie,ye;if(_e==null){for(;++he<be;)if((ie=oe[he])!=null&&ie>=ie)for(ye=ie;++he<be;)(ie=oe[he])!=null&&ie>ye&&(ye=ie)}else for(;++he<be;)if((ie=_e(oe[he],he,oe))!=null&&ie>=ie)for(ye=ie;++he<be;)(ie=_e(oe[he],he,oe))!=null&&ie>ye&&(ye=ie);return ye}function B(oe,_e){var be=oe.length,he=be,ie=-1,ye,ue=0;if(_e==null)for(;++ie<be;)isNaN(ye=c(oe[ie]))?--he:ue+=ye;else for(;++ie<be;)isNaN(ye=c(_e(oe[ie],ie,oe)))?--he:ue+=ye;if(he)return ue/he}function F(oe,_e){var be=oe.length,he=-1,ie,ye=[];if(_e==null)for(;++he<be;)isNaN(ie=c(oe[he]))||ye.push(ie);else for(;++he<be;)isNaN(ie=c(_e(oe[he],he,oe)))||ye.push(ie);return D(ye.sort(t),.5)}function N(oe){for(var _e=oe.length,be,he=-1,ie=0,ye,ue;++he<_e;)ie+=oe[he].length;for(ye=new Array(ie);--_e>=0;)for(ue=oe[_e],be=ue.length;--be>=0;)ye[--ie]=ue[be];return ye}function Z(oe,_e){var be=oe.length,he=-1,ie,ye;if(_e==null){for(;++he<be;)if((ie=oe[he])!=null&&ie>=ie)for(ye=ie;++he<be;)(ie=oe[he])!=null&&ye>ie&&(ye=ie)}else for(;++he<be;)if((ie=_e(oe[he],he,oe))!=null&&ie>=ie)for(ye=ie;++he<be;)(ie=_e(oe[he],he,oe))!=null&&ye>ie&&(ye=ie);return ye}function J(oe,_e){for(var be=_e.length,he=new Array(be);be--;)he[be]=oe[_e[be]];return he}function re(oe,_e){if(be=oe.length){var be,he=0,ie=0,ye,ue=oe[ie];for(_e==null&&(_e=t);++he<be;)(_e(ye=oe[he],ue)<0||_e(ue,ue)!==0)&&(ue=ye,ie=he);if(_e(ue,ue)===0)return ie}}function le(oe,_e,be){for(var he=(be==null?oe.length:be)-(_e=_e==null?0:+_e),ie,ye;he;)ye=Math.random()*he--|0,ie=oe[he+_e],oe[he+_e]=oe[ye+_e],oe[ye+_e]=ie;return oe}function fe(oe,_e){var be=oe.length,he=-1,ie,ye=0;if(_e==null)for(;++he<be;)(ie=+oe[he])&&(ye+=ie);else for(;++he<be;)(ie=+_e(oe[he],he,oe))&&(ye+=ie);return ye}function K(oe){if(!(ye=oe.length))return[];for(var _e=-1,be=Z(oe,X),he=new Array(be);++_e<be;)for(var ie=-1,ye,ue=he[_e]=new Array(ye);++ie<ye;)ue[ie]=oe[ie][_e];return he}function X(oe){return oe.length}function ae(){return K(arguments)}e.bisect=a,e.bisectRight=a,e.bisectLeft=o,e.ascending=t,e.bisector=r,e.cross=u,e.descending=f,e.deviation=v,e.extent=p,e.histogram=P,e.thresholdFreedmanDiaconis=z,e.thresholdScott=O,e.thresholdSturges=S,e.max=V,e.mean=B,e.median=F,e.merge=N,e.min=Z,e.pairs=s,e.permute=J,e.quantile=D,e.range=w,e.scan=re,e.shuffle=le,e.sum=fe,e.ticks=M,e.tickIncrement=d,e.tickStep=C,e.transpose=K,e.variance=h,e.zip=ae,Object.defineProperty(e,"__esModule",{value:!0})})});var BY=ne((RD,rRe)=>{(function(e,t){typeof RD=="object"&&typeof rRe!="undefined"?t(RD,VE()):typeof define=="function"&&define.amd?define(["exports","d3-array"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(RD,function(e,t){"use strict";function r(){return new i}function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(Ve){a(n,Ve,this.t),a(this,n.s,this.s),this.s?this.t+=n.t:this.s=n.t},valueOf:function(){return this.s}};var n=new i;function a(Ve,it,Ht){var Rt=Ve.s=it+Ht,lr=Rt-it,Lr=Rt-lr;Ve.t=it-Lr+(Ht-lr)}var o=1e-6,s=1e-12,l=Math.PI,u=l/2,f=l/4,c=l*2,h=180/l,v=l/180,p=Math.abs,_=Math.atan,T=Math.atan2,g=Math.cos,A=Math.ceil,b=Math.exp,w=Math.log,k=Math.pow,x=Math.sin,E=Math.sign||function(Ve){return Ve>0?1:Ve<0?-1:0},M=Math.sqrt,d=Math.tan;function C(Ve){return Ve>1?0:Ve<-1?l:Math.acos(Ve)}function S(Ve){return Ve>1?u:Ve<-1?-u:Math.asin(Ve)}function P(Ve){return(Ve=x(Ve/2))*Ve}function D(){}function z(Ve,it){Ve&&V.hasOwnProperty(Ve.type)&&V[Ve.type](Ve,it)}var O={Feature:function(Ve,it){z(Ve.geometry,it)},FeatureCollection:function(Ve,it){for(var Ht=Ve.features,Rt=-1,lr=Ht.length;++Rt<lr;)z(Ht[Rt].geometry,it)}},V={Sphere:function(Ve,it){it.sphere()},Point:function(Ve,it){Ve=Ve.coordinates,it.point(Ve[0],Ve[1],Ve[2])},MultiPoint:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)Ve=Ht[Rt],it.point(Ve[0],Ve[1],Ve[2])},LineString:function(Ve,it){B(Ve.coordinates,it,0)},MultiLineString:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)B(Ht[Rt],it,0)},Polygon:function(Ve,it){F(Ve.coordinates,it)},MultiPolygon:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)F(Ht[Rt],it)},GeometryCollection:function(Ve,it){for(var Ht=Ve.geometries,Rt=-1,lr=Ht.length;++Rt<lr;)z(Ht[Rt],it)}};function B(Ve,it,Ht){var Rt=-1,lr=Ve.length-Ht,Lr;for(it.lineStart();++Rt<lr;)Lr=Ve[Rt],it.point(Lr[0],Lr[1],Lr[2]);it.lineEnd()}function F(Ve,it){var Ht=-1,Rt=Ve.length;for(it.polygonStart();++Ht<Rt;)B(Ve[Ht],it,1);it.polygonEnd()}function N(Ve,it){Ve&&O.hasOwnProperty(Ve.type)?O[Ve.type](Ve,it):z(Ve,it)}var Z=r(),J=r(),re,le,fe,K,X,ae={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Z.reset(),ae.lineStart=oe,ae.lineEnd=_e},polygonEnd:function(){var Ve=+Z;J.add(Ve<0?c+Ve:Ve),this.lineStart=this.lineEnd=this.point=D},sphere:function(){J.add(c)}};function oe(){ae.point=be}function _e(){he(re,le)}function be(Ve,it){ae.point=he,re=Ve,le=it,Ve*=v,it*=v,fe=Ve,K=g(it=it/2+f),X=x(it)}function he(Ve,it){Ve*=v,it*=v,it=it/2+f;var Ht=Ve-fe,Rt=Ht>=0?1:-1,lr=Rt*Ht,Lr=g(it),Fr=x(it),Zr=X*Fr,nn=K*Lr+Zr*g(lr),An=Zr*Rt*x(lr);Z.add(T(An,nn)),fe=Ve,K=Lr,X=Fr}function ie(Ve){return J.reset(),N(Ve,ae),J*2}function ye(Ve){return[T(Ve[1],Ve[0]),S(Ve[2])]}function ue(Ve){var it=Ve[0],Ht=Ve[1],Rt=g(Ht);return[Rt*g(it),Rt*x(it),x(Ht)]}function Ae(Ve,it){return Ve[0]*it[0]+Ve[1]*it[1]+Ve[2]*it[2]}function Re(Ve,it){return[Ve[1]*it[2]-Ve[2]*it[1],Ve[2]*it[0]-Ve[0]*it[2],Ve[0]*it[1]-Ve[1]*it[0]]}function ze(Ve,it){Ve[0]+=it[0],Ve[1]+=it[1],Ve[2]+=it[2]}function et(Ve,it){return[Ve[0]*it,Ve[1]*it,Ve[2]*it]}function Le(Ve){var it=M(Ve[0]*Ve[0]+Ve[1]*Ve[1]+Ve[2]*Ve[2]);Ve[0]/=it,Ve[1]/=it,Ve[2]/=it}var Ie,dt,ct,Ke,_t,zt,Et,Se,je=r(),ht,nt,lt={point:rt,lineStart:ft,lineEnd:gt,polygonStart:function(){lt.point=Qt,lt.lineStart=Jt,lt.lineEnd=fr,je.reset(),ae.polygonStart()},polygonEnd:function(){ae.polygonEnd(),lt.point=rt,lt.lineStart=ft,lt.lineEnd=gt,Z<0?(Ie=-(ct=180),dt=-(Ke=90)):je>o?Ke=90:je<-o&&(dt=-90),nt[0]=Ie,nt[1]=ct},sphere:function(){Ie=-(ct=180),dt=-(Ke=90)}};function rt(Ve,it){ht.push(nt=[Ie=Ve,ct=Ve]),it<dt&&(dt=it),it>Ke&&(Ke=it)}function Xe(Ve,it){var Ht=ue([Ve*v,it*v]);if(Se){var Rt=Re(Se,Ht),lr=[Rt[1],-Rt[0],0],Lr=Re(lr,Rt);Le(Lr),Lr=ye(Lr);var Fr=Ve-_t,Zr=Fr>0?1:-1,nn=Lr[0]*h*Zr,An,Br=p(Fr)>180;Br^(Zr*_t<nn&&nn<Zr*Ve)?(An=Lr[1]*h,An>Ke&&(Ke=An)):(nn=(nn+360)%360-180,Br^(Zr*_t<nn&&nn<Zr*Ve)?(An=-Lr[1]*h,An<dt&&(dt=An)):(it<dt&&(dt=it),it>Ke&&(Ke=it))),Br?Ve<_t?nr(Ie,Ve)>nr(Ie,ct)&&(ct=Ve):nr(Ve,ct)>nr(Ie,ct)&&(Ie=Ve):ct>=Ie?(Ve<Ie&&(Ie=Ve),Ve>ct&&(ct=Ve)):Ve>_t?nr(Ie,Ve)>nr(Ie,ct)&&(ct=Ve):nr(Ve,ct)>nr(Ie,ct)&&(Ie=Ve)}else ht.push(nt=[Ie=Ve,ct=Ve]);it<dt&&(dt=it),it>Ke&&(Ke=it),Se=Ht,_t=Ve}function ft(){lt.point=Xe}function gt(){nt[0]=Ie,nt[1]=ct,lt.point=rt,Se=null}function Qt(Ve,it){if(Se){var Ht=Ve-_t;je.add(p(Ht)>180?Ht+(Ht>0?360:-360):Ht)}else zt=Ve,Et=it;ae.point(Ve,it),Xe(Ve,it)}function Jt(){ae.lineStart()}function fr(){Qt(zt,Et),ae.lineEnd(),p(je)>o&&(Ie=-(ct=180)),nt[0]=Ie,nt[1]=ct,Se=null}function nr(Ve,it){return(it-=Ve)<0?it+360:it}function ur(Ve,it){return Ve[0]-it[0]}function qt(Ve,it){return Ve[0]<=Ve[1]?Ve[0]<=it&&it<=Ve[1]:it<Ve[0]||Ve[1]<it}function xt(Ve){var it,Ht,Rt,lr,Lr,Fr,Zr;if(Ke=ct=-(Ie=dt=1/0),ht=[],N(Ve,lt),Ht=ht.length){for(ht.sort(ur),it=1,Rt=ht[0],Lr=[Rt];it<Ht;++it)lr=ht[it],qt(Rt,lr[0])||qt(Rt,lr[1])?(nr(Rt[0],lr[1])>nr(Rt[0],Rt[1])&&(Rt[1]=lr[1]),nr(lr[0],Rt[1])>nr(Rt[0],Rt[1])&&(Rt[0]=lr[0])):Lr.push(Rt=lr);for(Fr=-1/0,Ht=Lr.length-1,it=0,Rt=Lr[Ht];it<=Ht;Rt=lr,++it)lr=Lr[it],(Zr=nr(Rt[1],lr[0]))>Fr&&(Fr=Zr,Ie=lr[0],ct=Rt[1])}return ht=nt=null,Ie===1/0||dt===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ie,dt],[ct,Ke]]}var At,Je,xe,ce,ge,qe,yt,Vt,Ut,br,xr,Or,Hr,gr,Ur,_n,si={sphere:D,point:xn,lineStart:Wi,lineEnd:Ei,polygonStart:function(){si.lineStart=at,si.lineEnd=Ne},polygonEnd:function(){si.lineStart=Wi,si.lineEnd=Ei}};function xn(Ve,it){Ve*=v,it*=v;var Ht=g(it);ci(Ht*g(Ve),Ht*x(Ve),x(it))}function ci(Ve,it,Ht){++At,xe+=(Ve-xe)/At,ce+=(it-ce)/At,ge+=(Ht-ge)/At}function Wi(){si.point=oi}function oi(Ve,it){Ve*=v,it*=v;var Ht=g(it);gr=Ht*g(Ve),Ur=Ht*x(Ve),_n=x(it),si.point=Zi,ci(gr,Ur,_n)}function Zi(Ve,it){Ve*=v,it*=v;var Ht=g(it),Rt=Ht*g(Ve),lr=Ht*x(Ve),Lr=x(it),Fr=T(M((Fr=Ur*Lr-_n*lr)*Fr+(Fr=_n*Rt-gr*Lr)*Fr+(Fr=gr*lr-Ur*Rt)*Fr),gr*Rt+Ur*lr+_n*Lr);Je+=Fr,qe+=Fr*(gr+(gr=Rt)),yt+=Fr*(Ur+(Ur=lr)),Vt+=Fr*(_n+(_n=Lr)),ci(gr,Ur,_n)}function Ei(){si.point=xn}function at(){si.point=st}function Ne(){mt(Or,Hr),si.point=xn}function st(Ve,it){Or=Ve,Hr=it,Ve*=v,it*=v,si.point=mt;var Ht=g(it);gr=Ht*g(Ve),Ur=Ht*x(Ve),_n=x(it),ci(gr,Ur,_n)}function mt(Ve,it){Ve*=v,it*=v;var Ht=g(it),Rt=Ht*g(Ve),lr=Ht*x(Ve),Lr=x(it),Fr=Ur*Lr-_n*lr,Zr=_n*Rt-gr*Lr,nn=gr*lr-Ur*Rt,An=M(Fr*Fr+Zr*Zr+nn*nn),Br=S(An),tn=An&&-Br/An;Ut+=tn*Fr,br+=tn*Zr,xr+=tn*nn,Je+=Br,qe+=Br*(gr+(gr=Rt)),yt+=Br*(Ur+(Ur=lr)),Vt+=Br*(_n+(_n=Lr)),ci(gr,Ur,_n)}function Ot(Ve){At=Je=xe=ce=ge=qe=yt=Vt=Ut=br=xr=0,N(Ve,si);var it=Ut,Ht=br,Rt=xr,lr=it*it+Ht*Ht+Rt*Rt;return lr<s&&(it=qe,Ht=yt,Rt=Vt,Je<o&&(it=xe,Ht=ce,Rt=ge),lr=it*it+Ht*Ht+Rt*Rt,lr<s)?[NaN,NaN]:[T(Ht,it)*h,S(Rt/M(lr))*h]}function tr(Ve){return function(){return Ve}}function pr(Ve,it){function Ht(Rt,lr){return Rt=Ve(Rt,lr),it(Rt[0],Rt[1])}return Ve.invert&&it.invert&&(Ht.invert=function(Rt,lr){return Rt=it.invert(Rt,lr),Rt&&Ve.invert(Rt[0],Rt[1])}),Ht}function hr(Ve,it){return[p(Ve)>l?Ve+Math.round(-Ve/c)*c:Ve,it]}hr.invert=hr;function Rr(Ve,it,Ht){return(Ve%=c)?it||Ht?pr(Yr(Ve),vn(it,Ht)):Yr(Ve):it||Ht?vn(it,Ht):hr}function Gr(Ve){return function(it,Ht){return it+=Ve,[it>l?it-c:it<-l?it+c:it,Ht]}}function Yr(Ve){var it=Gr(Ve);return it.invert=Gr(-Ve),it}function vn(Ve,it){var Ht=g(Ve),Rt=x(Ve),lr=g(it),Lr=x(it);function Fr(Zr,nn){var An=g(nn),Br=g(Zr)*An,tn=x(Zr)*An,rn=x(nn),wn=rn*Ht+Br*Rt;return[T(tn*lr-wn*Lr,Br*Ht-rn*Rt),S(wn*lr+tn*Lr)]}return Fr.invert=function(Zr,nn){var An=g(nn),Br=g(Zr)*An,tn=x(Zr)*An,rn=x(nn),wn=rn*lr-tn*Lr;return[T(tn*lr+rn*Lr,Br*Ht+wn*Rt),S(wn*Ht-Br*Rt)]},Fr}function Wr(Ve){Ve=Rr(Ve[0]*v,Ve[1]*v,Ve.length>2?Ve[2]*v:0);function it(Ht){return Ht=Ve(Ht[0]*v,Ht[1]*v),Ht[0]*=h,Ht[1]*=h,Ht}return it.invert=function(Ht){return Ht=Ve.invert(Ht[0]*v,Ht[1]*v),Ht[0]*=h,Ht[1]*=h,Ht},it}function qn(Ve,it,Ht,Rt,lr,Lr){if(Ht){var Fr=g(it),Zr=x(it),nn=Rt*Ht;lr==null?(lr=it+Rt*c,Lr=it-nn/2):(lr=vi(Fr,lr),Lr=vi(Fr,Lr),(Rt>0?lr<Lr:lr>Lr)&&(lr+=Rt*c));for(var An,Br=lr;Rt>0?Br>Lr:Br<Lr;Br-=nn)An=ye([Fr,-Zr*g(Br),-Zr*x(Br)]),Ve.point(An[0],An[1])}}function vi(Ve,it){it=ue(it),it[0]-=Ve,Le(it);var Ht=C(-it[1]);return((-it[2]<0?-Ht:Ht)+c-o)%c}function Mi(){var Ve=tr([0,0]),it=tr(90),Ht=tr(6),Rt,lr,Lr={point:Fr};function Fr(nn,An){Rt.push(nn=lr(nn,An)),nn[0]*=h,nn[1]*=h}function Zr(){var nn=Ve.apply(this,arguments),An=it.apply(this,arguments)*v,Br=Ht.apply(this,arguments)*v;return Rt=[],lr=Rr(-nn[0]*v,-nn[1]*v,0).invert,qn(Lr,An,Br,1),nn={type:"Polygon",coordinates:[Rt]},Rt=lr=null,nn}return Zr.center=function(nn){return arguments.length?(Ve=typeof nn=="function"?nn:tr([+nn[0],+nn[1]]),Zr):Ve},Zr.radius=function(nn){return arguments.length?(it=typeof nn=="function"?nn:tr(+nn),Zr):it},Zr.precision=function(nn){return arguments.length?(Ht=typeof nn=="function"?nn:tr(+nn),Zr):Ht},Zr}function Ui(){var Ve=[],it;return{point:function(Ht,Rt,lr){it.push([Ht,Rt,lr])},lineStart:function(){Ve.push(it=[])},lineEnd:D,rejoin:function(){Ve.length>1&&Ve.push(Ve.pop().concat(Ve.shift()))},result:function(){var Ht=Ve;return Ve=[],it=null,Ht}}}function ji(Ve,it){return p(Ve[0]-it[0])<o&&p(Ve[1]-it[1])<o}function ea(Ve,it,Ht,Rt){this.x=Ve,this.z=it,this.o=Ht,this.e=Rt,this.v=!1,this.n=this.p=null}function Ra(Ve,it,Ht,Rt,lr){var Lr=[],Fr=[],Zr,nn;if(Ve.forEach(function(Gn){if(!((Oi=Gn.length-1)<=0)){var Oi,Ii=Gn[0],Hi=Gn[Oi],Ki;if(ji(Ii,Hi)){if(!Ii[2]&&!Hi[2]){for(lr.lineStart(),Zr=0;Zr<Oi;++Zr)lr.point((Ii=Gn[Zr])[0],Ii[1]);lr.lineEnd();return}Hi[0]+=2*o}Lr.push(Ki=new ea(Ii,Gn,null,!0)),Fr.push(Ki.o=new ea(Ii,null,Ki,!1)),Lr.push(Ki=new ea(Hi,Gn,null,!1)),Fr.push(Ki.o=new ea(Hi,null,Ki,!0))}}),!!Lr.length){for(Fr.sort(it),Li(Lr),Li(Fr),Zr=0,nn=Fr.length;Zr<nn;++Zr)Fr[Zr].e=Ht=!Ht;for(var An=Lr[0],Br,tn;;){for(var rn=An,wn=!0;rn.v;)if((rn=rn.n)===An)return;Br=rn.z,lr.lineStart();do{if(rn.v=rn.o.v=!0,rn.e){if(wn)for(Zr=0,nn=Br.length;Zr<nn;++Zr)lr.point((tn=Br[Zr])[0],tn[1]);else Rt(rn.x,rn.n.x,1,lr);rn=rn.n}else{if(wn)for(Br=rn.p.z,Zr=Br.length-1;Zr>=0;--Zr)lr.point((tn=Br[Zr])[0],tn[1]);else Rt(rn.x,rn.p.x,-1,lr);rn=rn.p}rn=rn.o,Br=rn.z,wn=!wn}while(!rn.v);lr.lineEnd()}}}function Li(Ve){if(it=Ve.length){for(var it,Ht=0,Rt=Ve[0],lr;++Ht<it;)Rt.n=lr=Ve[Ht],lr.p=Rt,Rt=lr;Rt.n=lr=Ve[0],lr.p=Rt}}var Yn=r();function zi(Ve){return p(Ve[0])<=l?Ve[0]:E(Ve[0])*((p(Ve[0])+l)%c-l)}function ya(Ve,it){var Ht=zi(it),Rt=it[1],lr=x(Rt),Lr=[x(Ht),-g(Ht),0],Fr=0,Zr=0;Yn.reset(),lr===1?Rt=u+o:lr===-1&&(Rt=-u-o);for(var nn=0,An=Ve.length;nn<An;++nn)if(tn=(Br=Ve[nn]).length)for(var Br,tn,rn=Br[tn-1],wn=zi(rn),Gn=rn[1]/2+f,Oi=x(Gn),Ii=g(Gn),Hi=0;Hi<tn;++Hi,wn=On,Oi=Ji,Ii=ca,rn=Ki){var Ki=Br[Hi],On=zi(Ki),$n=Ki[1]/2+f,Ji=x($n),ca=g($n),Ka=On-wn,mo=Ka>=0?1:-1,vo=mo*Ka,xo=vo>l,Na=Oi*Ji;if(Yn.add(T(Na*mo*x(vo),Ii*ca+Na*g(vo))),Fr+=xo?Ka+mo*c:Ka,xo^wn>=Ht^On>=Ht){var bs=Re(ue(rn),ue(Ki));Le(bs);var Zo=Re(Lr,bs);Le(Zo);var Bo=(xo^Ka>=0?-1:1)*S(Zo[2]);(Rt>Bo||Rt===Bo&&(bs[0]||bs[1]))&&(Zr+=xo^Ka>=0?1:-1)}}return(Fr<-o||Fr<o&&Yn<-o)^Zr&1}function zn(Ve,it,Ht,Rt){return function(lr){var Lr=it(lr),Fr=Ui(),Zr=it(Fr),nn=!1,An,Br,tn,rn={point:wn,lineStart:Oi,lineEnd:Ii,polygonStart:function(){rn.point=Hi,rn.lineStart=Ki,rn.lineEnd=On,Br=[],An=[]},polygonEnd:function(){rn.point=wn,rn.lineStart=Oi,rn.lineEnd=Ii,Br=t.merge(Br);var $n=ya(An,Rt);Br.length?(nn||(lr.polygonStart(),nn=!0),Ra(Br,Bt,$n,Ht,lr)):$n&&(nn||(lr.polygonStart(),nn=!0),lr.lineStart(),Ht(null,null,1,lr),lr.lineEnd()),nn&&(lr.polygonEnd(),nn=!1),Br=An=null},sphere:function(){lr.polygonStart(),lr.lineStart(),Ht(null,null,1,lr),lr.lineEnd(),lr.polygonEnd()}};function wn($n,Ji){Ve($n,Ji)&&lr.point($n,Ji)}function Gn($n,Ji){Lr.point($n,Ji)}function Oi(){rn.point=Gn,Lr.lineStart()}function Ii(){rn.point=wn,Lr.lineEnd()}function Hi($n,Ji){tn.push([$n,Ji]),Zr.point($n,Ji)}function Ki(){Zr.lineStart(),tn=[]}function On(){Hi(tn[0][0],tn[0][1]),Zr.lineEnd();var $n=Zr.clean(),Ji=Fr.result(),ca,Ka=Ji.length,mo,vo,xo;if(tn.pop(),An.push(tn),tn=null,!!Ka){if($n&1){if(vo=Ji[0],(mo=vo.length-1)>0){for(nn||(lr.polygonStart(),nn=!0),lr.lineStart(),ca=0;ca<mo;++ca)lr.point((xo=vo[ca])[0],xo[1]);lr.lineEnd()}return}Ka>1&&$n&2&&Ji.push(Ji.pop().concat(Ji.shift())),Br.push(Ji.filter(Ze))}}return rn}}function Ze(Ve){return Ve.length>1}function Bt(Ve,it){return((Ve=Ve.x)[0]<0?Ve[1]-u-o:u-Ve[1])-((it=it.x)[0]<0?it[1]-u-o:u-it[1])}var sr=zn(function(){return!0},_r,on,[-l,-u]);function _r(Ve){var it=NaN,Ht=NaN,Rt=NaN,lr;return{lineStart:function(){Ve.lineStart(),lr=1},point:function(Lr,Fr){var Zr=Lr>0?l:-l,nn=p(Lr-it);p(nn-l)<o?(Ve.point(it,Ht=(Ht+Fr)/2>0?u:-u),Ve.point(Rt,Ht),Ve.lineEnd(),Ve.lineStart(),Ve.point(Zr,Ht),Ve.point(Lr,Ht),lr=0):Rt!==Zr&&nn>=l&&(p(it-Rt)<o&&(it-=Rt*o),p(Lr-Zr)<o&&(Lr-=Zr*o),Ht=Jr(it,Ht,Lr,Fr),Ve.point(Rt,Ht),Ve.lineEnd(),Ve.lineStart(),Ve.point(Zr,Ht),lr=0),Ve.point(it=Lr,Ht=Fr),Rt=Zr},lineEnd:function(){Ve.lineEnd(),it=Ht=NaN},clean:function(){return 2-lr}}}function Jr(Ve,it,Ht,Rt){var lr,Lr,Fr=x(Ve-Ht);return p(Fr)>o?_((x(it)*(Lr=g(Rt))*x(Ht)-x(Rt)*(lr=g(it))*x(Ve))/(lr*Lr*Fr)):(it+Rt)/2}function on(Ve,it,Ht,Rt){var lr;if(Ve==null)lr=Ht*u,Rt.point(-l,lr),Rt.point(0,lr),Rt.point(l,lr),Rt.point(l,0),Rt.point(l,-lr),Rt.point(0,-lr),Rt.point(-l,-lr),Rt.point(-l,0),Rt.point(-l,lr);else if(p(Ve[0]-it[0])>o){var Lr=Ve[0]<it[0]?l:-l;lr=Ht*Lr/2,Rt.point(-Lr,lr),Rt.point(0,lr),Rt.point(Lr,lr)}else Rt.point(it[0],it[1])}function pn(Ve){var it=g(Ve),Ht=6*v,Rt=it>0,lr=p(it)>o;function Lr(Br,tn,rn,wn){qn(wn,Ve,Ht,rn,Br,tn)}function Fr(Br,tn){return g(Br)*g(tn)>it}function Zr(Br){var tn,rn,wn,Gn,Oi;return{lineStart:function(){Gn=wn=!1,Oi=1},point:function(Ii,Hi){var Ki=[Ii,Hi],On,$n=Fr(Ii,Hi),Ji=Rt?$n?0:An(Ii,Hi):$n?An(Ii+(Ii<0?l:-l),Hi):0;if(!tn&&(Gn=wn=$n)&&Br.lineStart(),$n!==wn&&(On=nn(tn,Ki),(!On||ji(tn,On)||ji(Ki,On))&&(Ki[2]=1)),$n!==wn)Oi=0,$n?(Br.lineStart(),On=nn(Ki,tn),Br.point(On[0],On[1])):(On=nn(tn,Ki),Br.point(On[0],On[1],2),Br.lineEnd()),tn=On;else if(lr&&tn&&Rt^$n){var ca;!(Ji&rn)&&(ca=nn(Ki,tn,!0))&&(Oi=0,Rt?(Br.lineStart(),Br.point(ca[0][0],ca[0][1]),Br.point(ca[1][0],ca[1][1]),Br.lineEnd()):(Br.point(ca[1][0],ca[1][1]),Br.lineEnd(),Br.lineStart(),Br.point(ca[0][0],ca[0][1],3)))}$n&&(!tn||!ji(tn,Ki))&&Br.point(Ki[0],Ki[1]),tn=Ki,wn=$n,rn=Ji},lineEnd:function(){wn&&Br.lineEnd(),tn=null},clean:function(){return Oi|(Gn&&wn)<<1}}}function nn(Br,tn,rn){var wn=ue(Br),Gn=ue(tn),Oi=[1,0,0],Ii=Re(wn,Gn),Hi=Ae(Ii,Ii),Ki=Ii[0],On=Hi-Ki*Ki;if(!On)return!rn&&Br;var $n=it*Hi/On,Ji=-it*Ki/On,ca=Re(Oi,Ii),Ka=et(Oi,$n),mo=et(Ii,Ji);ze(Ka,mo);var vo=ca,xo=Ae(Ka,vo),Na=Ae(vo,vo),bs=xo*xo-Na*(Ae(Ka,Ka)-1);if(!(bs<0)){var Zo=M(bs),Bo=et(vo,(-xo-Zo)/Na);if(ze(Bo,Ka),Bo=ye(Bo),!rn)return Bo;var hi=Br[0],ta=tn[0],ws=Br[1],Ml=tn[1],Yl;ta<hi&&(Yl=hi,hi=ta,ta=Yl);var iu=ta-hi,Yu=p(iu-l)<o,Hf=Yu||iu<o;if(!Yu&&Ml<ws&&(Yl=ws,ws=Ml,Ml=Yl),Hf?Yu?ws+Ml>0^Bo[1]<(p(Bo[0]-hi)<o?ws:Ml):ws<=Bo[1]&&Bo[1]<=Ml:iu>l^(hi<=Bo[0]&&Bo[0]<=ta)){var au=et(vo,(-xo+Zo)/Na);return ze(au,Ka),[Bo,ye(au)]}}}function An(Br,tn){var rn=Rt?Ve:l-Ve,wn=0;return Br<-rn?wn|=1:Br>rn&&(wn|=2),tn<-rn?wn|=4:tn>rn&&(wn|=8),wn}return zn(Fr,Zr,Lr,Rt?[0,-Ve]:[-l,Ve-l])}function Cr(Ve,it,Ht,Rt,lr,Lr){var Fr=Ve[0],Zr=Ve[1],nn=it[0],An=it[1],Br=0,tn=1,rn=nn-Fr,wn=An-Zr,Gn;if(Gn=Ht-Fr,!(!rn&&Gn>0)){if(Gn/=rn,rn<0){if(Gn<Br)return;Gn<tn&&(tn=Gn)}else if(rn>0){if(Gn>tn)return;Gn>Br&&(Br=Gn)}if(Gn=lr-Fr,!(!rn&&Gn<0)){if(Gn/=rn,rn<0){if(Gn>tn)return;Gn>Br&&(Br=Gn)}else if(rn>0){if(Gn<Br)return;Gn<tn&&(tn=Gn)}if(Gn=Rt-Zr,!(!wn&&Gn>0)){if(Gn/=wn,wn<0){if(Gn<Br)return;Gn<tn&&(tn=Gn)}else if(wn>0){if(Gn>tn)return;Gn>Br&&(Br=Gn)}if(Gn=Lr-Zr,!(!wn&&Gn<0)){if(Gn/=wn,wn<0){if(Gn>tn)return;Gn>Br&&(Br=Gn)}else if(wn>0){if(Gn<Br)return;Gn<tn&&(tn=Gn)}return Br>0&&(Ve[0]=Fr+Br*rn,Ve[1]=Zr+Br*wn),tn<1&&(it[0]=Fr+tn*rn,it[1]=Zr+tn*wn),!0}}}}}var cn=1e9,gi=-cn;function Hn(Ve,it,Ht,Rt){function lr(An,Br){return Ve<=An&&An<=Ht&&it<=Br&&Br<=Rt}function Lr(An,Br,tn,rn){var wn=0,Gn=0;if(An==null||(wn=Fr(An,tn))!==(Gn=Fr(Br,tn))||nn(An,Br)<0^tn>0)do rn.point(wn===0||wn===3?Ve:Ht,wn>1?Rt:it);while((wn=(wn+tn+4)%4)!==Gn);else rn.point(Br[0],Br[1])}function Fr(An,Br){return p(An[0]-Ve)<o?Br>0?0:3:p(An[0]-Ht)<o?Br>0?2:1:p(An[1]-it)<o?Br>0?1:0:Br>0?3:2}function Zr(An,Br){return nn(An.x,Br.x)}function nn(An,Br){var tn=Fr(An,1),rn=Fr(Br,1);return tn!==rn?tn-rn:tn===0?Br[1]-An[1]:tn===1?An[0]-Br[0]:tn===2?An[1]-Br[1]:Br[0]-An[0]}return function(An){var Br=An,tn=Ui(),rn,wn,Gn,Oi,Ii,Hi,Ki,On,$n,Ji,ca,Ka={point:mo,lineStart:bs,lineEnd:Zo,polygonStart:xo,polygonEnd:Na};function mo(hi,ta){lr(hi,ta)&&Br.point(hi,ta)}function vo(){for(var hi=0,ta=0,ws=wn.length;ta<ws;++ta)for(var Ml=wn[ta],Yl=1,iu=Ml.length,Yu=Ml[0],Hf,au,Lc=Yu[0],Pc=Yu[1];Yl<iu;++Yl)Hf=Lc,au=Pc,Yu=Ml[Yl],Lc=Yu[0],Pc=Yu[1],au<=Rt?Pc>Rt&&(Lc-Hf)*(Rt-au)>(Pc-au)*(Ve-Hf)&&++hi:Pc<=Rt&&(Lc-Hf)*(Rt-au)<(Pc-au)*(Ve-Hf)&&--hi;return hi}function xo(){Br=tn,rn=[],wn=[],ca=!0}function Na(){var hi=vo(),ta=ca&&hi,ws=(rn=t.merge(rn)).length;(ta||ws)&&(An.polygonStart(),ta&&(An.lineStart(),Lr(null,null,1,An),An.lineEnd()),ws&&Ra(rn,Zr,hi,Lr,An),An.polygonEnd()),Br=An,rn=wn=Gn=null}function bs(){Ka.point=Bo,wn&&wn.push(Gn=[]),Ji=!0,$n=!1,Ki=On=NaN}function Zo(){rn&&(Bo(Oi,Ii),Hi&&$n&&tn.rejoin(),rn.push(tn.result())),Ka.point=mo,$n&&Br.lineEnd()}function Bo(hi,ta){var ws=lr(hi,ta);if(wn&&Gn.push([hi,ta]),Ji)Oi=hi,Ii=ta,Hi=ws,Ji=!1,ws&&(Br.lineStart(),Br.point(hi,ta));else if(ws&&$n)Br.point(hi,ta);else{var Ml=[Ki=Math.max(gi,Math.min(cn,Ki)),On=Math.max(gi,Math.min(cn,On))],Yl=[hi=Math.max(gi,Math.min(cn,hi)),ta=Math.max(gi,Math.min(cn,ta))];Cr(Ml,Yl,Ve,it,Ht,Rt)?($n||(Br.lineStart(),Br.point(Ml[0],Ml[1])),Br.point(Yl[0],Yl[1]),ws||Br.lineEnd(),ca=!1):ws&&(Br.lineStart(),Br.point(hi,ta),ca=!1)}Ki=hi,On=ta,$n=ws}return Ka}}function qi(){var Ve=0,it=0,Ht=960,Rt=500,lr,Lr,Fr;return Fr={stream:function(Zr){return lr&&Lr===Zr?lr:lr=Hn(Ve,it,Ht,Rt)(Lr=Zr)},extent:function(Zr){return arguments.length?(Ve=+Zr[0][0],it=+Zr[0][1],Ht=+Zr[1][0],Rt=+Zr[1][1],lr=Lr=null,Fr):[[Ve,it],[Ht,Rt]]}}}var fa=r(),eo,ma,so,ja={sphere:D,point:D,lineStart:Xo,lineEnd:D,polygonStart:D,polygonEnd:D};function Xo(){ja.point=ms,ja.lineEnd=Uo}function Uo(){ja.point=ja.lineEnd=D}function ms(Ve,it){Ve*=v,it*=v,eo=Ve,ma=x(it),so=g(it),ja.point=as}function as(Ve,it){Ve*=v,it*=v;var Ht=x(it),Rt=g(it),lr=p(Ve-eo),Lr=g(lr),Fr=x(lr),Zr=Rt*Fr,nn=so*Ht-ma*Rt*Lr,An=ma*Ht+so*Rt*Lr;fa.add(T(M(Zr*Zr+nn*nn),An)),eo=Ve,ma=Ht,so=Rt}function il(Ve){return fa.reset(),N(Ve,ja),+fa}var oo=[null,null],cs={type:"LineString",coordinates:oo};function Eo(Ve,it){return oo[0]=Ve,oo[1]=it,il(cs)}var hs={Feature:function(Ve,it){return Qo(Ve.geometry,it)},FeatureCollection:function(Ve,it){for(var Ht=Ve.features,Rt=-1,lr=Ht.length;++Rt<lr;)if(Qo(Ht[Rt].geometry,it))return!0;return!1}},Jo={Sphere:function(){return!0},Point:function(Ve,it){return Oa(Ve.coordinates,it)},MultiPoint:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)if(Oa(Ht[Rt],it))return!0;return!1},LineString:function(Ve,it){return co(Ve.coordinates,it)},MultiLineString:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)if(co(Ht[Rt],it))return!0;return!1},Polygon:function(Ve,it){return Al(Ve.coordinates,it)},MultiPolygon:function(Ve,it){for(var Ht=Ve.coordinates,Rt=-1,lr=Ht.length;++Rt<lr;)if(Al(Ht[Rt],it))return!0;return!1},GeometryCollection:function(Ve,it){for(var Ht=Ve.geometries,Rt=-1,lr=Ht.length;++Rt<lr;)if(Qo(Ht[Rt],it))return!0;return!1}};function Qo(Ve,it){return Ve&&Jo.hasOwnProperty(Ve.type)?Jo[Ve.type](Ve,it):!1}function Oa(Ve,it){return Eo(Ve,it)===0}function co(Ve,it){for(var Ht,Rt,lr,Lr=0,Fr=Ve.length;Lr<Fr;Lr++){if(Rt=Eo(Ve[Lr],it),Rt===0||Lr>0&&(lr=Eo(Ve[Lr],Ve[Lr-1]),lr>0&&Ht<=lr&&Rt<=lr&&(Ht+Rt-lr)*(1-Math.pow((Ht-Rt)/lr,2))<s*lr))return!0;Ht=Rt}return!1}function Al(Ve,it){return!!ya(Ve.map($l),Nu(it))}function $l(Ve){return Ve=Ve.map(Nu),Ve.pop(),Ve}function Nu(Ve){return[Ve[0]*v,Ve[1]*v]}function os(Ve,it){return(Ve&&hs.hasOwnProperty(Ve.type)?hs[Ve.type]:Qo)(Ve,it)}function hn(Ve,it,Ht){var Rt=t.range(Ve,it-o,Ht).concat(it);return function(lr){return Rt.map(function(Lr){return[lr,Lr]})}}function bi(Ve,it,Ht){var Rt=t.range(Ve,it-o,Ht).concat(it);return function(lr){return Rt.map(function(Lr){return[Lr,lr]})}}function ac(){var Ve,it,Ht,Rt,lr,Lr,Fr,Zr,nn=10,An=nn,Br=90,tn=360,rn,wn,Gn,Oi,Ii=2.5;function Hi(){return{type:"MultiLineString",coordinates:Ki()}}function Ki(){return t.range(A(Rt/Br)*Br,Ht,Br).map(Gn).concat(t.range(A(Zr/tn)*tn,Fr,tn).map(Oi)).concat(t.range(A(it/nn)*nn,Ve,nn).filter(function(On){return p(On%Br)>o}).map(rn)).concat(t.range(A(Lr/An)*An,lr,An).filter(function(On){return p(On%tn)>o}).map(wn))}return Hi.lines=function(){return Ki().map(function(On){return{type:"LineString",coordinates:On}})},Hi.outline=function(){return{type:"Polygon",coordinates:[Gn(Rt).concat(Oi(Fr).slice(1),Gn(Ht).reverse().slice(1),Oi(Zr).reverse().slice(1))]}},Hi.extent=function(On){return arguments.length?Hi.extentMajor(On).extentMinor(On):Hi.extentMinor()},Hi.extentMajor=function(On){return arguments.length?(Rt=+On[0][0],Ht=+On[1][0],Zr=+On[0][1],Fr=+On[1][1],Rt>Ht&&(On=Rt,Rt=Ht,Ht=On),Zr>Fr&&(On=Zr,Zr=Fr,Fr=On),Hi.precision(Ii)):[[Rt,Zr],[Ht,Fr]]},Hi.extentMinor=function(On){return arguments.length?(it=+On[0][0],Ve=+On[1][0],Lr=+On[0][1],lr=+On[1][1],it>Ve&&(On=it,it=Ve,Ve=On),Lr>lr&&(On=Lr,Lr=lr,lr=On),Hi.precision(Ii)):[[it,Lr],[Ve,lr]]},Hi.step=function(On){return arguments.length?Hi.stepMajor(On).stepMinor(On):Hi.stepMinor()},Hi.stepMajor=function(On){return arguments.length?(Br=+On[0],tn=+On[1],Hi):[Br,tn]},Hi.stepMinor=function(On){return arguments.length?(nn=+On[0],An=+On[1],Hi):[nn,An]},Hi.precision=function(On){return arguments.length?(Ii=+On,rn=hn(Lr,lr,90),wn=bi(it,Ve,Ii),Gn=hn(Zr,Fr,90),Oi=bi(Rt,Ht,Ii),Hi):Ii},Hi.extentMajor([[-180,-90+o],[180,90-o]]).extentMinor([[-180,-80-o],[180,80+o]])}function Pl(){return ac()()}function ss(Ve,it){var Ht=Ve[0]*v,Rt=Ve[1]*v,lr=it[0]*v,Lr=it[1]*v,Fr=g(Rt),Zr=x(Rt),nn=g(Lr),An=x(Lr),Br=Fr*g(Ht),tn=Fr*x(Ht),rn=nn*g(lr),wn=nn*x(lr),Gn=2*S(M(P(Lr-Rt)+Fr*nn*P(lr-Ht))),Oi=x(Gn),Ii=Gn?function(Hi){var Ki=x(Hi*=Gn)/Oi,On=x(Gn-Hi)/Oi,$n=On*Br+Ki*rn,Ji=On*tn+Ki*wn,ca=On*Zr+Ki*An;return[T(Ji,$n)*h,T(ca,M($n*$n+Ji*Ji))*h]}:function(){return[Ht*h,Rt*h]};return Ii.distance=Gn,Ii}function vl(Ve){return Ve}var $o=r(),Rl=r(),xu,ni,Aa,Ca,Fs={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Fs.lineStart=Pf,Fs.lineEnd=Wc},polygonEnd:function(){Fs.lineStart=Fs.lineEnd=Fs.point=D,$o.add(p(Rl)),Rl.reset()},result:function(){var Ve=$o/2;return $o.reset(),Ve}};function Pf(){Fs.point=Ma}function Ma(Ve,it){Fs.point=Rf,xu=Aa=Ve,ni=Ca=it}function Rf(Ve,it){Rl.add(Ca*Ve-Aa*it),Aa=Ve,Ca=it}function Wc(){Rf(xu,ni)}var dl=1/0,ff=dl,$s=-dl,ko=$s,eu={point:_u,lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var Ve=[[dl,ff],[$s,ko]];return $s=ko=-(ff=dl=1/0),Ve}};function _u(Ve,it){Ve<dl&&(dl=Ve),Ve>$s&&($s=Ve),it<ff&&(ff=it),it>ko&&(ko=it)}var Ah=0,Uu=0,nv=0,Ac=0,lo=0,Df=0,Mh=0,Us=0,xs=0,Sh,cf,To,vs,po={point:Co,lineStart:Mc,lineEnd:hf,polygonStart:function(){po.lineStart=_d,po.lineEnd=bu},polygonEnd:function(){po.point=Co,po.lineStart=Mc,po.lineEnd=hf},result:function(){var Ve=xs?[Mh/xs,Us/xs]:Df?[Ac/Df,lo/Df]:nv?[Ah/nv,Uu/nv]:[NaN,NaN];return Ah=Uu=nv=Ac=lo=Df=Mh=Us=xs=0,Ve}};function Co(Ve,it){Ah+=Ve,Uu+=it,++nv}function Mc(){po.point=qs}function qs(Ve,it){po.point=Vl,Co(To=Ve,vs=it)}function Vl(Ve,it){var Ht=Ve-To,Rt=it-vs,lr=M(Ht*Ht+Rt*Rt);Ac+=lr*(To+Ve)/2,lo+=lr*(vs+it)/2,Df+=lr,Co(To=Ve,vs=it)}function hf(){po.point=Co}function _d(){po.point=Wp}function bu(){Hl(Sh,cf)}function Wp(Ve,it){po.point=Hl,Co(Sh=To=Ve,cf=vs=it)}function Hl(Ve,it){var Ht=Ve-To,Rt=it-vs,lr=M(Ht*Ht+Rt*Rt);Ac+=lr*(To+Ve)/2,lo+=lr*(vs+it)/2,Df+=lr,lr=vs*Ve-To*it,Mh+=lr*(To+Ve),Us+=lr*(vs+it),xs+=lr*3,Co(To=Ve,vs=it)}function ho(Ve){this._context=Ve}ho.prototype={_radius:4.5,pointRadius:function(Ve){return this._radius=Ve,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Ve,it){switch(this._point){case 0:{this._context.moveTo(Ve,it),this._point=1;break}case 1:{this._context.lineTo(Ve,it);break}default:{this._context.moveTo(Ve+this._radius,it),this._context.arc(Ve,it,this._radius,0,c);break}}},result:D};var Dv=r(),vf,Gl,iv,Eh,av,wu={point:D,lineStart:function(){wu.point=Iv},lineEnd:function(){vf&&ov(Gl,iv),wu.point=D},polygonStart:function(){vf=!0},polygonEnd:function(){vf=null},result:function(){var Ve=+Dv;return Dv.reset(),Ve}};function Iv(Ve,it){wu.point=ov,Gl=Eh=Ve,iv=av=it}function ov(Ve,it){Eh-=Ve,av-=it,Dv.add(M(Eh*Eh+av*av)),Eh=Ve,av=it}function kh(){this._string=[]}kh.prototype={_radius:4.5,_circle:sv(4.5),pointRadius:function(Ve){return(Ve=+Ve)!==this._radius&&(this._radius=Ve,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Ve,it){switch(this._point){case 0:{this._string.push("M",Ve,",",it),this._point=1;break}case 1:{this._string.push("L",Ve,",",it);break}default:{this._circle==null&&(this._circle=sv(this._radius)),this._string.push("M",Ve,",",it,this._circle);break}}},result:function(){if(this._string.length){var Ve=this._string.join("");return this._string=[],Ve}else return null}};function sv(Ve){return"m0,"+Ve+"a"+Ve+","+Ve+" 0 1,1 0,"+-2*Ve+"a"+Ve+","+Ve+" 0 1,1 0,"+2*Ve+"z"}function bd(Ve,it){var Ht=4.5,Rt,lr;function Lr(Fr){return Fr&&(typeof Ht=="function"&&lr.pointRadius(+Ht.apply(this,arguments)),N(Fr,Rt(lr))),lr.result()}return Lr.area=function(Fr){return N(Fr,Rt(Fs)),Fs.result()},Lr.measure=function(Fr){return N(Fr,Rt(wu)),wu.result()},Lr.bounds=function(Fr){return N(Fr,Rt(eu)),eu.result()},Lr.centroid=function(Fr){return N(Fr,Rt(po)),po.result()},Lr.projection=function(Fr){return arguments.length?(Rt=Fr==null?(Ve=null,vl):(Ve=Fr).stream,Lr):Ve},Lr.context=function(Fr){return arguments.length?(lr=Fr==null?(it=null,new kh):new ho(it=Fr),typeof Ht!="function"&&lr.pointRadius(Ht),Lr):it},Lr.pointRadius=function(Fr){return arguments.length?(Ht=typeof Fr=="function"?Fr:(lr.pointRadius(+Fr),+Fr),Lr):Ht},Lr.projection(Ve).context(it)}function Hd(Ve){return{stream:If(Ve)}}function If(Ve){return function(it){var Ht=new Fv;for(var Rt in Ve)Ht[Rt]=Ve[Rt];return Ht.stream=it,Ht}}function Fv(){}Fv.prototype={constructor:Fv,point:function(Ve,it){this.stream.point(Ve,it)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function oc(Ve,it,Ht){var Rt=Ve.clipExtent&&Ve.clipExtent();return Ve.scale(150).translate([0,0]),Rt!=null&&Ve.clipExtent(null),N(Ht,Ve.stream(eu)),it(eu.result()),Rt!=null&&Ve.clipExtent(Rt),Ve}function Ch(Ve,it,Ht){return oc(Ve,function(Rt){var lr=it[1][0]-it[0][0],Lr=it[1][1]-it[0][1],Fr=Math.min(lr/(Rt[1][0]-Rt[0][0]),Lr/(Rt[1][1]-Rt[0][1])),Zr=+it[0][0]+(lr-Fr*(Rt[1][0]+Rt[0][0]))/2,nn=+it[0][1]+(Lr-Fr*(Rt[1][1]+Rt[0][1]))/2;Ve.scale(150*Fr).translate([Zr,nn])},Ht)}function Vu(Ve,it,Ht){return Ch(Ve,[[0,0],it],Ht)}function Sc(Ve,it,Ht){return oc(Ve,function(Rt){var lr=+it,Lr=lr/(Rt[1][0]-Rt[0][0]),Fr=(lr-Lr*(Rt[1][0]+Rt[0][0]))/2,Zr=-Lr*Rt[0][1];Ve.scale(150*Lr).translate([Fr,Zr])},Ht)}function Ff(Ve,it,Ht){return oc(Ve,function(Rt){var lr=+it,Lr=lr/(Rt[1][1]-Rt[0][1]),Fr=-Lr*Rt[0][0],Zr=(lr-Lr*(Rt[1][1]+Rt[0][1]))/2;Ve.scale(150*Lr).translate([Fr,Zr])},Ht)}var qv=16,zv=g(30*v);function Ov(Ve,it){return+it?uv(Ve,it):lv(Ve)}function lv(Ve){return If({point:function(it,Ht){it=Ve(it,Ht),this.stream.point(it[0],it[1])}})}function uv(Ve,it){function Ht(Rt,lr,Lr,Fr,Zr,nn,An,Br,tn,rn,wn,Gn,Oi,Ii){var Hi=An-Rt,Ki=Br-lr,On=Hi*Hi+Ki*Ki;if(On>4*it&&Oi--){var $n=Fr+rn,Ji=Zr+wn,ca=nn+Gn,Ka=M($n*$n+Ji*Ji+ca*ca),mo=S(ca/=Ka),vo=p(p(ca)-1)<o||p(Lr-tn)<o?(Lr+tn)/2:T(Ji,$n),xo=Ve(vo,mo),Na=xo[0],bs=xo[1],Zo=Na-Rt,Bo=bs-lr,hi=Ki*Zo-Hi*Bo;(hi*hi/On>it||p((Hi*Zo+Ki*Bo)/On-.5)>.3||Fr*rn+Zr*wn+nn*Gn<zv)&&(Ht(Rt,lr,Lr,Fr,Zr,nn,Na,bs,vo,$n/=Ka,Ji/=Ka,ca,Oi,Ii),Ii.point(Na,bs),Ht(Na,bs,vo,$n,Ji,ca,An,Br,tn,rn,wn,Gn,Oi,Ii))}}return function(Rt){var lr,Lr,Fr,Zr,nn,An,Br,tn,rn,wn,Gn,Oi,Ii={point:Hi,lineStart:Ki,lineEnd:$n,polygonStart:function(){Rt.polygonStart(),Ii.lineStart=Ji},polygonEnd:function(){Rt.polygonEnd(),Ii.lineStart=Ki}};function Hi(mo,vo){mo=Ve(mo,vo),Rt.point(mo[0],mo[1])}function Ki(){tn=NaN,Ii.point=On,Rt.lineStart()}function On(mo,vo){var xo=ue([mo,vo]),Na=Ve(mo,vo);Ht(tn,rn,Br,wn,Gn,Oi,tn=Na[0],rn=Na[1],Br=mo,wn=xo[0],Gn=xo[1],Oi=xo[2],qv,Rt),Rt.point(tn,rn)}function $n(){Ii.point=Hi,Rt.lineEnd()}function Ji(){Ki(),Ii.point=ca,Ii.lineEnd=Ka}function ca(mo,vo){On(lr=mo,vo),Lr=tn,Fr=rn,Zr=wn,nn=Gn,An=Oi,Ii.point=On}function Ka(){Ht(tn,rn,Br,wn,Gn,Oi,Lr,Fr,lr,Zr,nn,An,qv,Rt),Ii.lineEnd=$n,$n()}return Ii}}var Bv=If({point:function(Ve,it){this.stream.point(Ve*v,it*v)}});function tu(Ve){return If({point:function(it,Ht){var Rt=Ve(it,Ht);return this.stream.point(Rt[0],Rt[1])}})}function fv(Ve,it,Ht,Rt,lr){function Lr(Fr,Zr){return Fr*=Rt,Zr*=lr,[it+Ve*Fr,Ht-Ve*Zr]}return Lr.invert=function(Fr,Zr){return[(Fr-it)/Ve*Rt,(Ht-Zr)/Ve*lr]},Lr}function al(Ve,it,Ht,Rt,lr,Lr){var Fr=g(Lr),Zr=x(Lr),nn=Fr*Ve,An=Zr*Ve,Br=Fr/Ve,tn=Zr/Ve,rn=(Zr*Ht-Fr*it)/Ve,wn=(Zr*it+Fr*Ht)/Ve;function Gn(Oi,Ii){return Oi*=Rt,Ii*=lr,[nn*Oi-An*Ii+it,Ht-An*Oi-nn*Ii]}return Gn.invert=function(Oi,Ii){return[Rt*(Br*Oi-tn*Ii+rn),lr*(wn-tn*Oi-Br*Ii)]},Gn}function ru(Ve){return qf(function(){return Ve})()}function qf(Ve){var it,Ht=150,Rt=480,lr=250,Lr=0,Fr=0,Zr=0,nn=0,An=0,Br,tn=0,rn=1,wn=1,Gn=null,Oi=sr,Ii=null,Hi,Ki,On,$n=vl,Ji=.5,ca,Ka,mo,vo,xo;function Na(hi){return mo(hi[0]*v,hi[1]*v)}function bs(hi){return hi=mo.invert(hi[0],hi[1]),hi&&[hi[0]*h,hi[1]*h]}Na.stream=function(hi){return vo&&xo===hi?vo:vo=Bv(tu(Br)(Oi(ca($n(xo=hi)))))},Na.preclip=function(hi){return arguments.length?(Oi=hi,Gn=void 0,Bo()):Oi},Na.postclip=function(hi){return arguments.length?($n=hi,Ii=Hi=Ki=On=null,Bo()):$n},Na.clipAngle=function(hi){return arguments.length?(Oi=+hi?pn(Gn=hi*v):(Gn=null,sr),Bo()):Gn*h},Na.clipExtent=function(hi){return arguments.length?($n=hi==null?(Ii=Hi=Ki=On=null,vl):Hn(Ii=+hi[0][0],Hi=+hi[0][1],Ki=+hi[1][0],On=+hi[1][1]),Bo()):Ii==null?null:[[Ii,Hi],[Ki,On]]},Na.scale=function(hi){return arguments.length?(Ht=+hi,Zo()):Ht},Na.translate=function(hi){return arguments.length?(Rt=+hi[0],lr=+hi[1],Zo()):[Rt,lr]},Na.center=function(hi){return arguments.length?(Lr=hi[0]%360*v,Fr=hi[1]%360*v,Zo()):[Lr*h,Fr*h]},Na.rotate=function(hi){return arguments.length?(Zr=hi[0]%360*v,nn=hi[1]%360*v,An=hi.length>2?hi[2]%360*v:0,Zo()):[Zr*h,nn*h,An*h]},Na.angle=function(hi){return arguments.length?(tn=hi%360*v,Zo()):tn*h},Na.reflectX=function(hi){return arguments.length?(rn=hi?-1:1,Zo()):rn<0},Na.reflectY=function(hi){return arguments.length?(wn=hi?-1:1,Zo()):wn<0},Na.precision=function(hi){return arguments.length?(ca=Ov(Ka,Ji=hi*hi),Bo()):M(Ji)},Na.fitExtent=function(hi,ta){return Ch(Na,hi,ta)},Na.fitSize=function(hi,ta){return Vu(Na,hi,ta)},Na.fitWidth=function(hi,ta){return Sc(Na,hi,ta)},Na.fitHeight=function(hi,ta){return Ff(Na,hi,ta)};function Zo(){var hi=al(Ht,0,0,rn,wn,tn).apply(null,it(Lr,Fr)),ta=(tn?al:fv)(Ht,Rt-hi[0],lr-hi[1],rn,wn,tn);return Br=Rr(Zr,nn,An),Ka=pr(it,ta),mo=pr(Br,Ka),ca=Ov(Ka,Ji),Bo()}function Bo(){return vo=xo=null,Na}return function(){return it=Ve.apply(this,arguments),Na.invert=it.invert&&bs,Zo()}}function Vs(Ve){var it=0,Ht=l/3,Rt=qf(Ve),lr=Rt(it,Ht);return lr.parallels=function(Lr){return arguments.length?Rt(it=Lr[0]*v,Ht=Lr[1]*v):[it*h,Ht*h]},lr}function Xc(Ve){var it=g(Ve);function Ht(Rt,lr){return[Rt*it,x(lr)/it]}return Ht.invert=function(Rt,lr){return[Rt/it,S(lr*it)]},Ht}function zf(Ve,it){var Ht=x(Ve),Rt=(Ht+x(it))/2;if(p(Rt)<o)return Xc(Ve);var lr=1+Ht*(2*Rt-Ht),Lr=M(lr)/Rt;function Fr(Zr,nn){var An=M(lr-2*Rt*x(nn))/Rt;return[An*x(Zr*=Rt),Lr-An*g(Zr)]}return Fr.invert=function(Zr,nn){var An=Lr-nn,Br=T(Zr,p(An))*E(An);return An*Rt<0&&(Br-=l*E(Zr)*E(An)),[Br/Rt,S((lr-(Zr*Zr+An*An)*Rt*Rt)/(2*Rt))]},Fr}function Dl(){return Vs(zf).scale(155.424).center([0,33.6442])}function zs(){return Dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Gd(Ve){var it=Ve.length;return{point:function(Ht,Rt){for(var lr=-1;++lr<it;)Ve[lr].point(Ht,Rt)},sphere:function(){for(var Ht=-1;++Ht<it;)Ve[Ht].sphere()},lineStart:function(){for(var Ht=-1;++Ht<it;)Ve[Ht].lineStart()},lineEnd:function(){for(var Ht=-1;++Ht<it;)Ve[Ht].lineEnd()},polygonStart:function(){for(var Ht=-1;++Ht<it;)Ve[Ht].polygonStart()},polygonEnd:function(){for(var Ht=-1;++Ht<it;)Ve[Ht].polygonEnd()}}}function Yd(){var Ve,it,Ht=zs(),Rt,lr=Dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Lr,Fr=Dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Zr,nn,An={point:function(rn,wn){nn=[rn,wn]}};function Br(rn){var wn=rn[0],Gn=rn[1];return nn=null,Rt.point(wn,Gn),nn||(Lr.point(wn,Gn),nn)||(Zr.point(wn,Gn),nn)}Br.invert=function(rn){var wn=Ht.scale(),Gn=Ht.translate(),Oi=(rn[0]-Gn[0])/wn,Ii=(rn[1]-Gn[1])/wn;return(Ii>=.12&&Ii<.234&&Oi>=-.425&&Oi<-.214?lr:Ii>=.166&&Ii<.234&&Oi>=-.214&&Oi<-.115?Fr:Ht).invert(rn)},Br.stream=function(rn){return Ve&&it===rn?Ve:Ve=Gd([Ht.stream(it=rn),lr.stream(rn),Fr.stream(rn)])},Br.precision=function(rn){return arguments.length?(Ht.precision(rn),lr.precision(rn),Fr.precision(rn),tn()):Ht.precision()},Br.scale=function(rn){return arguments.length?(Ht.scale(rn),lr.scale(rn*.35),Fr.scale(rn),Br.translate(Ht.translate())):Ht.scale()},Br.translate=function(rn){if(!arguments.length)return Ht.translate();var wn=Ht.scale(),Gn=+rn[0],Oi=+rn[1];return Rt=Ht.translate(rn).clipExtent([[Gn-.455*wn,Oi-.238*wn],[Gn+.455*wn,Oi+.238*wn]]).stream(An),Lr=lr.translate([Gn-.307*wn,Oi+.201*wn]).clipExtent([[Gn-.425*wn+o,Oi+.12*wn+o],[Gn-.214*wn-o,Oi+.234*wn-o]]).stream(An),Zr=Fr.translate([Gn-.205*wn,Oi+.212*wn]).clipExtent([[Gn-.214*wn+o,Oi+.166*wn+o],[Gn-.115*wn-o,Oi+.234*wn-o]]).stream(An),tn()},Br.fitExtent=function(rn,wn){return Ch(Br,rn,wn)},Br.fitSize=function(rn,wn){return Vu(Br,rn,wn)},Br.fitWidth=function(rn,wn){return Sc(Br,rn,wn)},Br.fitHeight=function(rn,wn){return Ff(Br,rn,wn)};function tn(){return Ve=it=null,Br}return Br.scale(1070)}function Tu(Ve){return function(it,Ht){var Rt=g(it),lr=g(Ht),Lr=Ve(Rt*lr);return[Lr*lr*x(it),Lr*x(Ht)]}}function df(Ve){return function(it,Ht){var Rt=M(it*it+Ht*Ht),lr=Ve(Rt),Lr=x(lr),Fr=g(lr);return[T(it*Lr,Rt*Fr),S(Rt&&Ht*Lr/Rt)]}}var nu=Tu(function(Ve){return M(2/(1+Ve))});nu.invert=df(function(Ve){return 2*S(Ve/2)});function Wd(){return ru(nu).scale(124.75).clipAngle(180-.001)}var Zc=Tu(function(Ve){return(Ve=C(Ve))&&Ve/x(Ve)});Zc.invert=df(function(Ve){return Ve});function jc(){return ru(Zc).scale(79.4188).clipAngle(180-.001)}function Au(Ve,it){return[Ve,w(d((u+it)/2))]}Au.invert=function(Ve,it){return[Ve,2*_(b(it))-u]};function Nv(){return cv(Au).scale(961/c)}function cv(Ve){var it=ru(Ve),Ht=it.center,Rt=it.scale,lr=it.translate,Lr=it.clipExtent,Fr=null,Zr,nn,An;it.scale=function(tn){return arguments.length?(Rt(tn),Br()):Rt()},it.translate=function(tn){return arguments.length?(lr(tn),Br()):lr()},it.center=function(tn){return arguments.length?(Ht(tn),Br()):Ht()},it.clipExtent=function(tn){return arguments.length?(tn==null?Fr=Zr=nn=An=null:(Fr=+tn[0][0],Zr=+tn[0][1],nn=+tn[1][0],An=+tn[1][1]),Br()):Fr==null?null:[[Fr,Zr],[nn,An]]};function Br(){var tn=l*Rt(),rn=it(Wr(it.rotate()).invert([0,0]));return Lr(Fr==null?[[rn[0]-tn,rn[1]-tn],[rn[0]+tn,rn[1]+tn]]:Ve===Au?[[Math.max(rn[0]-tn,Fr),Zr],[Math.min(rn[0]+tn,nn),An]]:[[Fr,Math.max(rn[1]-tn,Zr)],[nn,Math.min(rn[1]+tn,An)]])}return Br()}function hv(Ve){return d((u+Ve)/2)}function Uv(Ve,it){var Ht=g(Ve),Rt=Ve===it?x(Ve):w(Ht/g(it))/w(hv(it)/hv(Ve)),lr=Ht*k(hv(Ve),Rt)/Rt;if(!Rt)return Au;function Lr(Fr,Zr){lr>0?Zr<-u+o&&(Zr=-u+o):Zr>u-o&&(Zr=u-o);var nn=lr/k(hv(Zr),Rt);return[nn*x(Rt*Fr),lr-nn*g(Rt*Fr)]}return Lr.invert=function(Fr,Zr){var nn=lr-Zr,An=E(Rt)*M(Fr*Fr+nn*nn),Br=T(Fr,p(nn))*E(nn);return nn*Rt<0&&(Br-=l*E(Fr)*E(nn)),[Br/Rt,2*_(k(lr/An,1/Rt))-u]},Lr}function Kc(){return Vs(Uv).scale(109.5).parallels([30,30])}function Of(Ve,it){return[Ve,it]}Of.invert=Of;function Ec(){return ru(Of).scale(152.63)}function Lh(Ve,it){var Ht=g(Ve),Rt=Ve===it?x(Ve):(Ht-g(it))/(it-Ve),lr=Ht/Rt+Ve;if(p(Rt)<o)return Of;function Lr(Fr,Zr){var nn=lr-Zr,An=Rt*Fr;return[nn*x(An),lr-nn*g(An)]}return Lr.invert=function(Fr,Zr){var nn=lr-Zr,An=T(Fr,p(nn))*E(nn);return nn*Rt<0&&(An-=l*E(Fr)*E(nn)),[An/Rt,lr-E(Rt)*M(Fr*Fr+nn*nn)]},Lr}function wd(){return Vs(Lh).scale(131.154).center([0,13.9389])}var Oo=1.340264,Jc=-.081106,kc=893e-6,Cc=.003796,Qc=M(3)/2,pf=12;function sc(Ve,it){var Ht=S(Qc*x(it)),Rt=Ht*Ht,lr=Rt*Rt*Rt;return[Ve*g(Ht)/(Qc*(Oo+3*Jc*Rt+lr*(7*kc+9*Cc*Rt))),Ht*(Oo+Jc*Rt+lr*(kc+Cc*Rt))]}sc.invert=function(Ve,it){for(var Ht=it,Rt=Ht*Ht,lr=Rt*Rt*Rt,Lr=0,Fr,Zr,nn;Lr<pf&&(Zr=Ht*(Oo+Jc*Rt+lr*(kc+Cc*Rt))-it,nn=Oo+3*Jc*Rt+lr*(7*kc+9*Cc*Rt),Ht-=Fr=Zr/nn,Rt=Ht*Ht,lr=Rt*Rt*Rt,!(p(Fr)<s));++Lr);return[Qc*Ve*(Oo+3*Jc*Rt+lr*(7*kc+9*Cc*Rt))/g(Ht),S(x(Ht)/Qc)]};function Vv(){return ru(sc).scale(177.158)}function Hs(Ve,it){var Ht=g(it),Rt=g(Ve)*Ht;return[Ht*x(Ve)/Rt,x(it)/Rt]}Hs.invert=df(_);function vv(){return ru(Hs).scale(144.049).clipAngle(60)}function Bf(){var Ve=1,it=0,Ht=0,Rt=1,lr=1,Lr=0,Fr,Zr,nn=null,An,Br,tn,rn=1,wn=1,Gn=If({point:function($n,Ji){var ca=On([$n,Ji]);this.stream.point(ca[0],ca[1])}}),Oi=vl,Ii,Hi;function Ki(){return rn=Ve*Rt,wn=Ve*lr,Ii=Hi=null,On}function On($n){var Ji=$n[0]*rn,ca=$n[1]*wn;if(Lr){var Ka=ca*Fr-Ji*Zr;Ji=Ji*Fr+ca*Zr,ca=Ka}return[Ji+it,ca+Ht]}return On.invert=function($n){var Ji=$n[0]-it,ca=$n[1]-Ht;if(Lr){var Ka=ca*Fr+Ji*Zr;Ji=Ji*Fr-ca*Zr,ca=Ka}return[Ji/rn,ca/wn]},On.stream=function($n){return Ii&&Hi===$n?Ii:Ii=Gn(Oi(Hi=$n))},On.postclip=function($n){return arguments.length?(Oi=$n,nn=An=Br=tn=null,Ki()):Oi},On.clipExtent=function($n){return arguments.length?(Oi=$n==null?(nn=An=Br=tn=null,vl):Hn(nn=+$n[0][0],An=+$n[0][1],Br=+$n[1][0],tn=+$n[1][1]),Ki()):nn==null?null:[[nn,An],[Br,tn]]},On.scale=function($n){return arguments.length?(Ve=+$n,Ki()):Ve},On.translate=function($n){return arguments.length?(it=+$n[0],Ht=+$n[1],Ki()):[it,Ht]},On.angle=function($n){return arguments.length?(Lr=$n%360*v,Zr=x(Lr),Fr=g(Lr),Ki()):Lr*h},On.reflectX=function($n){return arguments.length?(Rt=$n?-1:1,Ki()):Rt<0},On.reflectY=function($n){return arguments.length?(lr=$n?-1:1,Ki()):lr<0},On.fitExtent=function($n,Ji){return Ch(On,$n,Ji)},On.fitSize=function($n,Ji){return Vu(On,$n,Ji)},On.fitWidth=function($n,Ji){return Sc(On,$n,Ji)},On.fitHeight=function($n,Ji){return Ff(On,$n,Ji)},On}function Nf(Ve,it){var Ht=it*it,Rt=Ht*Ht;return[Ve*(.8707-.131979*Ht+Rt*(-.013791+Rt*(.003971*Ht-.001529*Rt))),it*(1.007226+Ht*(.015085+Rt*(-.044475+.028874*Ht-.005916*Rt)))]}Nf.invert=function(Ve,it){var Ht=it,Rt=25,lr;do{var Lr=Ht*Ht,Fr=Lr*Lr;Ht-=lr=(Ht*(1.007226+Lr*(.015085+Fr*(-.044475+.028874*Lr-.005916*Fr)))-it)/(1.007226+Lr*(.015085*3+Fr*(-.044475*7+.028874*9*Lr-.005916*11*Fr)))}while(p(lr)>o&&--Rt>0);return[Ve/(.8707+(Lr=Ht*Ht)*(-.131979+Lr*(-.013791+Lr*Lr*Lr*(.003971-.001529*Lr)))),Ht]};function Uf(){return ru(Nf).scale(175.295)}function _s(Ve,it){return[g(it)*x(Ve),x(it)]}_s.invert=df(S);function pl(){return ru(_s).scale(249.5).clipAngle(90+o)}function Hu(Ve,it){var Ht=g(it),Rt=1+g(Ve)*Ht;return[Ht*x(Ve)/Rt,x(it)/Rt]}Hu.invert=df(function(Ve){return 2*_(Ve)});function Vf(){return ru(Hu).scale(250).clipAngle(142)}function Gu(Ve,it){return[w(d((u+it)/2)),-Ve]}Gu.invert=function(Ve,it){return[-it,2*_(b(Ve))-u]};function Ph(){var Ve=cv(Gu),it=Ve.center,Ht=Ve.rotate;return Ve.center=function(Rt){return arguments.length?it([-Rt[1],Rt[0]]):(Rt=it(),[Rt[1],-Rt[0]])},Ve.rotate=function(Rt){return arguments.length?Ht([Rt[0],Rt[1],Rt.length>2?Rt[2]+90:90]):(Rt=Ht(),[Rt[0],Rt[1],Rt[2]-90])},Ht([0,0,90]).scale(159.155)}e.geoAlbers=zs,e.geoAlbersUsa=Yd,e.geoArea=ie,e.geoAzimuthalEqualArea=Wd,e.geoAzimuthalEqualAreaRaw=nu,e.geoAzimuthalEquidistant=jc,e.geoAzimuthalEquidistantRaw=Zc,e.geoBounds=xt,e.geoCentroid=Ot,e.geoCircle=Mi,e.geoClipAntimeridian=sr,e.geoClipCircle=pn,e.geoClipExtent=qi,e.geoClipRectangle=Hn,e.geoConicConformal=Kc,e.geoConicConformalRaw=Uv,e.geoConicEqualArea=Dl,e.geoConicEqualAreaRaw=zf,e.geoConicEquidistant=wd,e.geoConicEquidistantRaw=Lh,e.geoContains=os,e.geoDistance=Eo,e.geoEqualEarth=Vv,e.geoEqualEarthRaw=sc,e.geoEquirectangular=Ec,e.geoEquirectangularRaw=Of,e.geoGnomonic=vv,e.geoGnomonicRaw=Hs,e.geoGraticule=ac,e.geoGraticule10=Pl,e.geoIdentity=Bf,e.geoInterpolate=ss,e.geoLength=il,e.geoMercator=Nv,e.geoMercatorRaw=Au,e.geoNaturalEarth1=Uf,e.geoNaturalEarth1Raw=Nf,e.geoOrthographic=pl,e.geoOrthographicRaw=_s,e.geoPath=bd,e.geoProjection=ru,e.geoProjectionMutator=qf,e.geoRotation=Wr,e.geoStereographic=Vf,e.geoStereographicRaw=Hu,e.geoStream=N,e.geoTransform=Hd,e.geoTransverseMercator=Ph,e.geoTransverseMercatorRaw=Gu,Object.defineProperty(e,"__esModule",{value:!0})})});var iRe=ne((DD,nRe)=>{(function(e,t){typeof DD=="object"&&typeof nRe!="undefined"?t(DD,BY(),VE()):typeof define=="function"&&define.amd?define(["exports","d3-geo","d3-array"],t):t(e.d3=e.d3||{},e.d3,e.d3)})(DD,function(e,t,r){"use strict";var i=Math.abs,n=Math.atan,a=Math.atan2,o=Math.cos,s=Math.exp,l=Math.floor,u=Math.log,f=Math.max,c=Math.min,h=Math.pow,v=Math.round,p=Math.sign||function(de){return de>0?1:de<0?-1:0},_=Math.sin,T=Math.tan,g=1e-6,A=1e-12,b=Math.PI,w=b/2,k=b/4,x=Math.SQRT1_2,E=O(2),M=O(b),d=b*2,C=180/b,S=b/180;function P(de){return de?de/Math.sin(de):1}function D(de){return de>1?w:de<-1?-w:Math.asin(de)}function z(de){return de>1?0:de<-1?b:Math.acos(de)}function O(de){return de>0?Math.sqrt(de):0}function V(de){return de=s(2*de),(de-1)/(de+1)}function B(de){return(s(de)-s(-de))/2}function F(de){return(s(de)+s(-de))/2}function N(de){return u(de+O(de*de+1))}function Z(de){return u(de+O(de*de-1))}function J(de){var Te=T(de/2),Ce=2*u(o(de/2))/(Te*Te);function De(Ge,He){var Qe=o(Ge),Ft=o(He),jt=_(He),It=Ft*Qe,Kt=-((1-It?u((1+It)/2)/(1-It):-.5)+Ce/(1+It));return[Kt*Ft*_(Ge),Kt*jt]}return De.invert=function(Ge,He){var Qe=O(Ge*Ge+He*He),Ft=-de/2,jt=50,It;if(!Qe)return[0,0];do{var Kt=Ft/2,ir=o(Kt),mr=_(Kt),Sr=mr/ir,Vr=-u(i(ir));Ft-=It=(2/Sr*Vr-Ce*Sr-Qe)/(-Vr/(mr*mr)+1-Ce/(2*ir*ir))*(ir<0?.7:1)}while(i(It)>g&&--jt>0);var sn=_(Ft);return[a(Ge*sn,Qe*o(Ft)),D(He*sn/Qe)]},De}function re(){var de=w,Te=t.geoProjectionMutator(J),Ce=Te(de);return Ce.radius=function(De){return arguments.length?Te(de=De*S):de*C},Ce.scale(179.976).clipAngle(147)}function le(de,Te){var Ce=o(Te),De=P(z(Ce*o(de/=2)));return[2*Ce*_(de)*De,_(Te)*De]}le.invert=function(de,Te){if(!(de*de+4*Te*Te>b*b+g)){var Ce=de,De=Te,Ge=25;do{var He=_(Ce),Qe=_(Ce/2),Ft=o(Ce/2),jt=_(De),It=o(De),Kt=_(2*De),ir=jt*jt,mr=It*It,Sr=Qe*Qe,Vr=1-mr*Ft*Ft,sn=Vr?z(It*Ft)*O(kn=1/Vr):kn=0,kn,yi=2*sn*It*Qe-de,Qi=sn*jt-Te,ra=kn*(mr*Sr+sn*It*Ft*ir),sa=kn*(.5*He*Kt-sn*2*jt*Qe),pa=kn*.25*(Kt*Qe-sn*jt*mr*He),Lo=kn*(ir*Ft+sn*Sr*It),jo=sa*pa-Lo*ra;if(!jo)break;var ba=(Qi*sa-yi*Lo)/jo,qa=(yi*pa-Qi*ra)/jo;Ce-=ba,De-=qa}while((i(ba)>g||i(qa)>g)&&--Ge>0);return[Ce,De]}};function fe(){return t.geoProjection(le).scale(152.63)}function K(de){var Te=_(de),Ce=o(de),De=de>=0?1:-1,Ge=T(De*de),He=(1+Te-Ce)/2;function Qe(Ft,jt){var It=o(jt),Kt=o(Ft/=2);return[(1+It)*_(Ft),(De*jt>-a(Kt,Ge)-.001?0:-De*10)+He+_(jt)*Ce-(1+It)*Te*Kt]}return Qe.invert=function(Ft,jt){var It=0,Kt=0,ir=50;do{var mr=o(It),Sr=_(It),Vr=o(Kt),sn=_(Kt),kn=1+Vr,yi=kn*Sr-Ft,Qi=He+sn*Ce-kn*Te*mr-jt,ra=kn*mr/2,sa=-Sr*sn,pa=Te*kn*Sr/2,Lo=Ce*Vr+Te*mr*sn,jo=sa*pa-Lo*ra,ba=(Qi*sa-yi*Lo)/jo/2,qa=(yi*pa-Qi*ra)/jo;i(qa)>2&&(qa/=2),It-=ba,Kt-=qa}while((i(ba)>g||i(qa)>g)&&--ir>0);return De*Kt>-a(o(It),Ge)-.001?[It*2,Kt]:null},Qe}function X(){var de=20*S,Te=de>=0?1:-1,Ce=T(Te*de),De=t.geoProjectionMutator(K),Ge=De(de),He=Ge.stream;return Ge.parallel=function(Qe){return arguments.length?(Ce=T((Te=(de=Qe*S)>=0?1:-1)*de),De(de)):de*C},Ge.stream=function(Qe){var Ft=Ge.rotate(),jt=He(Qe),It=(Ge.rotate([0,0]),He(Qe)),Kt=Ge.precision();return Ge.rotate(Ft),jt.sphere=function(){It.polygonStart(),It.lineStart();for(var ir=Te*-180;Te*ir<180;ir+=Te*90)It.point(ir,Te*90);if(de)for(;Te*(ir-=3*Te*Kt)>=-180;)It.point(ir,Te*-a(o(ir*S/2),Ce)*C);It.lineEnd(),It.polygonEnd()},jt},Ge.scale(218.695).center([0,28.0974])}function ae(de,Te){var Ce=T(Te/2),De=O(1-Ce*Ce),Ge=1+De*o(de/=2),He=_(de)*De/Ge,Qe=Ce/Ge,Ft=He*He,jt=Qe*Qe;return[4/3*He*(3+Ft-3*jt),4/3*Qe*(3+3*Ft-jt)]}ae.invert=function(de,Te){if(de*=3/8,Te*=3/8,!de&&i(Te)>1)return null;var Ce=de*de,De=Te*Te,Ge=1+Ce+De,He=O((Ge-O(Ge*Ge-4*Te*Te))/2),Qe=D(He)/3,Ft=He?Z(i(Te/He))/3:N(i(de))/3,jt=o(Qe),It=F(Ft),Kt=It*It-jt*jt;return[p(de)*2*a(B(Ft)*jt,.25-Kt),p(Te)*2*a(It*_(Qe),.25+Kt)]};function oe(){return t.geoProjection(ae).scale(66.1603)}var _e=O(8),be=u(1+E);function he(de,Te){var Ce=i(Te);return Ce<k?[de,u(T(k+Te/2))]:[de*o(Ce)*(2*E-1/_(Ce)),p(Te)*(2*E*(Ce-k)-u(T(Ce/2)))]}he.invert=function(de,Te){if((He=i(Te))<be)return[de,2*n(s(Te))-w];var Ce=k,De=25,Ge,He;do{var Qe=o(Ce/2),Ft=T(Ce/2);Ce-=Ge=(_e*(Ce-k)-u(Ft)-He)/(_e-Qe*Qe/(2*Ft))}while(i(Ge)>A&&--De>0);return[de/(o(Ce)*(_e-1/_(Ce))),p(Te)*Ce]};function ie(){return t.geoProjection(he).scale(112.314)}function ye(de){var Te=2*b/de;function Ce(De,Ge){var He=t.geoAzimuthalEquidistantRaw(De,Ge);if(i(De)>w){var Qe=a(He[1],He[0]),Ft=O(He[0]*He[0]+He[1]*He[1]),jt=Te*v((Qe-w)/Te)+w,It=a(_(Qe-=jt),2-o(Qe));Qe=jt+D(b/Ft*_(It))-It,He[0]=Ft*o(Qe),He[1]=Ft*_(Qe)}return He}return Ce.invert=function(De,Ge){var He=O(De*De+Ge*Ge);if(He>w){var Qe=a(Ge,De),Ft=Te*v((Qe-w)/Te)+w,jt=Qe>Ft?-1:1,It=He*o(Ft-Qe),Kt=1/T(jt*z((It-b)/O(b*(b-2*It)+He*He)));Qe=Ft+2*n((Kt+jt*O(Kt*Kt-3))/3),De=He*o(Qe),Ge=He*_(Qe)}return t.geoAzimuthalEquidistantRaw.invert(De,Ge)},Ce}function ue(){var de=5,Te=t.geoProjectionMutator(ye),Ce=Te(de),De=Ce.stream,Ge=.01,He=-o(Ge*S),Qe=_(Ge*S);return Ce.lobes=function(Ft){return arguments.length?Te(de=+Ft):de},Ce.stream=function(Ft){var jt=Ce.rotate(),It=De(Ft),Kt=(Ce.rotate([0,0]),De(Ft));return Ce.rotate(jt),It.sphere=function(){Kt.polygonStart(),Kt.lineStart();for(var ir=0,mr=360/de,Sr=2*b/de,Vr=90-180/de,sn=w;ir<de;++ir,Vr-=mr,sn-=Sr)Kt.point(a(Qe*o(sn),He)*C,D(Qe*_(sn))*C),Vr<-90?(Kt.point(-90,-180-Vr-Ge),Kt.point(-90,-180-Vr+Ge)):(Kt.point(90,Vr+Ge),Kt.point(90,Vr-Ge));Kt.lineEnd(),Kt.polygonEnd()},It},Ce.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function Ae(de,Te){if(arguments.length<2&&(Te=de),Te===1)return t.geoAzimuthalEqualAreaRaw;if(Te===1/0)return Re;function Ce(De,Ge){var He=t.geoAzimuthalEqualAreaRaw(De/Te,Ge);return He[0]*=de,He}return Ce.invert=function(De,Ge){var He=t.geoAzimuthalEqualAreaRaw.invert(De/de,Ge);return He[0]*=Te,He},Ce}function Re(de,Te){return[de*o(Te)/o(Te/=2),2*_(Te)]}Re.invert=function(de,Te){var Ce=2*D(Te/2);return[de*o(Ce/2)/o(Ce),Ce]};function ze(){var de=2,Te=t.geoProjectionMutator(Ae),Ce=Te(de);return Ce.coefficient=function(De){return arguments.length?Te(de=+De):de},Ce.scale(169.529)}function et(de,Te,Ce){var De=100,Ge,He,Qe;Ce=Ce===void 0?0:+Ce,Te=+Te;do He=de(Ce),Qe=de(Ce+g),He===Qe&&(Qe=He+g),Ce-=Ge=-1*g*(He-Te)/(He-Qe);while(De-- >0&&i(Ge)>g);return De<0?NaN:Ce}function Le(de,Te,Ce){return Te===void 0&&(Te=40),Ce===void 0&&(Ce=A),function(De,Ge,He,Qe){var Ft,jt,It;He=He===void 0?0:+He,Qe=Qe===void 0?0:+Qe;for(var Kt=0;Kt<Te;Kt++){var ir=de(He,Qe),mr=ir[0]-De,Sr=ir[1]-Ge;if(i(mr)<Ce&&i(Sr)<Ce)break;var Vr=mr*mr+Sr*Sr;if(Vr>Ft){He-=jt/=2,Qe-=It/=2;continue}Ft=Vr;var sn=(He>0?-1:1)*Ce,kn=(Qe>0?-1:1)*Ce,yi=de(He+sn,Qe),Qi=de(He,Qe+kn),ra=(yi[0]-ir[0])/sn,sa=(yi[1]-ir[1])/sn,pa=(Qi[0]-ir[0])/kn,Lo=(Qi[1]-ir[1])/kn,jo=Lo*ra-sa*pa,ba=(i(jo)<.5?.5:1)/jo;if(jt=(Sr*pa-mr*Lo)*ba,It=(mr*sa-Sr*ra)*ba,He+=jt,Qe+=It,i(jt)<Ce&&i(It)<Ce)break}return[He,Qe]}}function Ie(){var de=Ae(1.68,2),Te=1.4,Ce=12;function De(Ge,He){if(Ge+He<-Te){var Qe=(Ge-He+1.6)*(Ge+He+Te)/8;Ge+=Qe,He-=.8*Qe*_(He+b/2)}var Ft=de(Ge,He),jt=(1-o(Ge*He))/Ce;return Ft[1]<0&&(Ft[0]*=1+jt),Ft[1]>0&&(Ft[1]*=1+jt/1.5*Ft[0]*Ft[0]),Ft}return De.invert=Le(De),De}function dt(){return t.geoProjection(Ie()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ct(de,Te){var Ce=de*_(Te),De=30,Ge;do Te-=Ge=(Te+_(Te)-Ce)/(1+o(Te));while(i(Ge)>g&&--De>0);return Te/2}function Ke(de,Te,Ce){function De(Ge,He){return[de*Ge*o(He=ct(Ce,He)),Te*_(He)]}return De.invert=function(Ge,He){return He=D(He/Te),[Ge/(de*o(He)),D((2*He+_(2*He))/Ce)]},De}var _t=Ke(E/w,E,b);function zt(){return t.geoProjection(_t).scale(169.529)}var Et=2.00276,Se=1.11072;function je(de,Te){var Ce=ct(b,Te);return[Et*de/(1/o(Te)+Se/o(Ce)),(Te+E*_(Ce))/Et]}je.invert=function(de,Te){var Ce=Et*Te,De=Te<0?-k:k,Ge=25,He,Qe;do Qe=Ce-E*_(De),De-=He=(_(2*De)+2*De-b*_(Qe))/(2*o(2*De)+2+b*o(Qe)*E*o(De));while(i(He)>g&&--Ge>0);return Qe=Ce-E*_(De),[de*(1/o(Qe)+Se/o(De))/Et,Qe]};function ht(){return t.geoProjection(je).scale(160.857)}function nt(de){var Te=0,Ce=t.geoProjectionMutator(de),De=Ce(Te);return De.parallel=function(Ge){return arguments.length?Ce(Te=Ge*S):Te*C},De}function lt(de,Te){return[de*o(Te),Te]}lt.invert=function(de,Te){return[de/o(Te),Te]};function rt(){return t.geoProjection(lt).scale(152.63)}function Xe(de){if(!de)return lt;var Te=1/T(de);function Ce(De,Ge){var He=Te+de-Ge,Qe=He&&De*o(Ge)/He;return[He*_(Qe),Te-He*o(Qe)]}return Ce.invert=function(De,Ge){var He=O(De*De+(Ge=Te-Ge)*Ge),Qe=Te+de-He;return[He/o(Qe)*a(De,Ge),Qe]},Ce}function ft(){return nt(Xe).scale(123.082).center([0,26.1441]).parallel(45)}function gt(de){function Te(Ce,De){var Ge=w-De,He=Ge&&Ce*de*_(Ge)/Ge;return[Ge*_(He)/de,w-Ge*o(He)]}return Te.invert=function(Ce,De){var Ge=Ce*de,He=w-De,Qe=O(Ge*Ge+He*He),Ft=a(Ge,He);return[(Qe?Qe/_(Qe):1)*Ft/de,w-Qe]},Te}function Qt(){var de=.5,Te=t.geoProjectionMutator(gt),Ce=Te(de);return Ce.fraction=function(De){return arguments.length?Te(de=+De):de},Ce.scale(158.837)}var Jt=Ke(1,4/b,b);function fr(){return t.geoProjection(Jt).scale(152.63)}function nr(de,Te,Ce,De,Ge,He){var Qe=o(He),Ft;if(i(de)>1||i(He)>1)Ft=z(Ce*Ge+Te*De*Qe);else{var jt=_(de/2),It=_(He/2);Ft=2*D(O(jt*jt+Te*De*It*It))}return i(Ft)>g?[Ft,a(De*_(He),Te*Ge-Ce*De*Qe)]:[0,0]}function ur(de,Te,Ce){return z((de*de+Te*Te-Ce*Ce)/(2*de*Te))}function qt(de){return de-2*b*l((de+b)/(2*b))}function xt(de,Te,Ce){for(var De=[[de[0],de[1],_(de[1]),o(de[1])],[Te[0],Te[1],_(Te[1]),o(Te[1])],[Ce[0],Ce[1],_(Ce[1]),o(Ce[1])]],Ge=De[2],He,Qe=0;Qe<3;++Qe,Ge=He)He=De[Qe],Ge.v=nr(He[1]-Ge[1],Ge[3],Ge[2],He[3],He[2],He[0]-Ge[0]),Ge.point=[0,0];var Ft=ur(De[0].v[0],De[2].v[0],De[1].v[0]),jt=ur(De[0].v[0],De[1].v[0],De[2].v[0]),It=b-Ft;De[2].point[1]=0,De[0].point[0]=-(De[1].point[0]=De[0].v[0]/2);var Kt=[De[2].point[0]=De[0].point[0]+De[2].v[0]*o(Ft),2*(De[0].point[1]=De[1].point[1]=De[2].v[0]*_(Ft))];function ir(mr,Sr){var Vr=_(Sr),sn=o(Sr),kn=new Array(3),yi;for(yi=0;yi<3;++yi){var Qi=De[yi];if(kn[yi]=nr(Sr-Qi[1],Qi[3],Qi[2],sn,Vr,mr-Qi[0]),!kn[yi][0])return Qi.point;kn[yi][1]=qt(kn[yi][1]-Qi.v[1])}var ra=Kt.slice();for(yi=0;yi<3;++yi){var sa=yi==2?0:yi+1,pa=ur(De[yi].v[0],kn[yi][0],kn[sa][0]);kn[yi][1]<0&&(pa=-pa),yi?yi==1?(pa=jt-pa,ra[0]-=kn[yi][0]*o(pa),ra[1]-=kn[yi][0]*_(pa)):(pa=It-pa,ra[0]+=kn[yi][0]*o(pa),ra[1]+=kn[yi][0]*_(pa)):(ra[0]+=kn[yi][0]*o(pa),ra[1]-=kn[yi][0]*_(pa))}return ra[0]/=3,ra[1]/=3,ra}return ir}function At(de){return de[0]*=S,de[1]*=S,de}function Je(){return xe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function xe(de,Te,Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:[de,Te,Ce]}),Ge=[-De[0],-De[1]],He=t.geoRotation(Ge),Qe=xt(At(He(de)),At(He(Te)),At(He(Ce)));Qe.invert=Le(Qe);var Ft=t.geoProjection(Qe).rotate(Ge),jt=Ft.center;return delete Ft.rotate,Ft.center=function(It){return arguments.length?jt(He(It)):He.invert(jt())},Ft.clipAngle(90)}function ce(de,Te){var Ce=O(1-_(Te));return[2/M*de*Ce,M*(1-Ce)]}ce.invert=function(de,Te){var Ce=(Ce=Te/M-1)*Ce;return[Ce>0?de*O(b/Ce)/2:0,D(1-Ce)]};function ge(){return t.geoProjection(ce).scale(95.6464).center([0,30])}function qe(de){var Te=T(de);function Ce(De,Ge){return[De,(De?De/_(De):1)*(_(Ge)*o(De)-Te*o(Ge))]}return Ce.invert=Te?function(De,Ge){De&&(Ge*=_(De)/De);var He=o(De);return[De,2*a(O(He*He+Te*Te-Ge*Ge)-He,Te-Ge)]}:function(De,Ge){return[De,D(De?Ge*T(De)/De:Ge)]},Ce}function yt(){return nt(qe).scale(249.828).clipAngle(90)}var Vt=O(3);function Ut(de,Te){return[Vt*de*(2*o(2*Te/3)-1)/M,Vt*M*_(Te/3)]}Ut.invert=function(de,Te){var Ce=3*D(Te/(Vt*M));return[M*de/(Vt*(2*o(2*Ce/3)-1)),Ce]};function br(){return t.geoProjection(Ut).scale(156.19)}function xr(de){var Te=o(de);function Ce(De,Ge){return[De*Te,_(Ge)/Te]}return Ce.invert=function(De,Ge){return[De/Te,D(Ge*Te)]},Ce}function Or(){return nt(xr).parallel(38.58).scale(195.044)}function Hr(de){var Te=o(de);function Ce(De,Ge){return[De*Te,(1+Te)*T(Ge/2)]}return Ce.invert=function(De,Ge){return[De/Te,n(Ge/(1+Te))*2]},Ce}function gr(){return nt(Hr).scale(124.75)}function Ur(de,Te){var Ce=O(8/(3*b));return[Ce*de*(1-i(Te)/b),Ce*Te]}Ur.invert=function(de,Te){var Ce=O(8/(3*b)),De=Te/Ce;return[de/(Ce*(1-i(De)/b)),De]};function _n(){return t.geoProjection(Ur).scale(165.664)}function si(de,Te){var Ce=O(4-3*_(i(Te)));return[2/O(6*b)*de*Ce,p(Te)*O(2*b/3)*(2-Ce)]}si.invert=function(de,Te){var Ce=2-i(Te)/O(2*b/3);return[de*O(6*b)/(2*Ce),p(Te)*D((4-Ce*Ce)/3)]};function xn(){return t.geoProjection(si).scale(165.664)}function ci(de,Te){var Ce=O(b*(4+b));return[2/Ce*de*(1+O(1-4*Te*Te/(b*b))),4/Ce*Te]}ci.invert=function(de,Te){var Ce=O(b*(4+b))/2;return[de*Ce/(1+O(1-Te*Te*(4+b)/(4*b))),Te*Ce/2]};function Wi(){return t.geoProjection(ci).scale(180.739)}function oi(de,Te){var Ce=(2+w)*_(Te);Te/=2;for(var De=0,Ge=1/0;De<10&&i(Ge)>g;De++){var He=o(Te);Te-=Ge=(Te+_(Te)*(He+2)-Ce)/(2*He*(1+He))}return[2/O(b*(4+b))*de*(1+o(Te)),2*O(b/(4+b))*_(Te)]}oi.invert=function(de,Te){var Ce=Te*O((4+b)/b)/2,De=D(Ce),Ge=o(De);return[de/(2/O(b*(4+b))*(1+Ge)),D((De+Ce*(Ge+2))/(2+w))]};function Zi(){return t.geoProjection(oi).scale(180.739)}function Ei(de,Te){return[de*(1+o(Te))/O(2+b),2*Te/O(2+b)]}Ei.invert=function(de,Te){var Ce=O(2+b),De=Te*Ce/2;return[Ce*de/(1+o(De)),De]};function at(){return t.geoProjection(Ei).scale(173.044)}function Ne(de,Te){for(var Ce=(1+w)*_(Te),De=0,Ge=1/0;De<10&&i(Ge)>g;De++)Te-=Ge=(Te+_(Te)-Ce)/(1+o(Te));return Ce=O(2+b),[de*(1+o(Te))/Ce,2*Te/Ce]}Ne.invert=function(de,Te){var Ce=1+w,De=O(Ce/2);return[de*2*De/(1+o(Te*=De)),D((Te+_(Te))/Ce)]};function st(){return t.geoProjection(Ne).scale(173.044)}var mt=3+2*E;function Ot(de,Te){var Ce=_(de/=2),De=o(de),Ge=O(o(Te)),He=o(Te/=2),Qe=_(Te)/(He+E*De*Ge),Ft=O(2/(1+Qe*Qe)),jt=O((E*He+(De+Ce)*Ge)/(E*He+(De-Ce)*Ge));return[mt*(Ft*(jt-1/jt)-2*u(jt)),mt*(Ft*Qe*(jt+1/jt)-2*n(Qe))]}Ot.invert=function(de,Te){if(!(He=ae.invert(de/1.2,Te*1.065)))return null;var Ce=He[0],De=He[1],Ge=20,He;de/=mt,Te/=mt;do{var Qe=Ce/2,Ft=De/2,jt=_(Qe),It=o(Qe),Kt=_(Ft),ir=o(Ft),mr=o(De),Sr=O(mr),Vr=Kt/(ir+E*It*Sr),sn=Vr*Vr,kn=O(2/(1+sn)),yi=E*ir+(It+jt)*Sr,Qi=E*ir+(It-jt)*Sr,ra=yi/Qi,sa=O(ra),pa=sa-1/sa,Lo=sa+1/sa,jo=kn*pa-2*u(sa)-de,ba=kn*Vr*Lo-2*n(Vr)-Te,qa=Kt&&x*Sr*jt*sn/Kt,ds=(E*It*ir+Sr)/(2*(ir+E*It*Sr)*(ir+E*It*Sr)*Sr),ol=-.5*Vr*kn*kn*kn,el=ol*qa,to=ol*ds,Ya=(Ya=2*ir+E*Sr*(It-jt))*Ya*sa,Il=(E*It*ir*Sr+mr)/Ya,Sl=-(E*jt*Kt)/(Sr*Ya),Su=pa*el-2*Il/sa+kn*(Il+Il/ra),su=pa*to-2*Sl/sa+kn*(Sl+Sl/ra),Fl=Vr*Lo*el-2*qa/(1+sn)+kn*Lo*qa+kn*Vr*(Il-Il/ra),El=Vr*Lo*to-2*ds/(1+sn)+kn*Lo*ds+kn*Vr*(Sl-Sl/ra),yf=su*Fl-El*Su;if(!yf)break;var Xu=(ba*su-jo*El)/yf,Zu=(jo*Fl-ba*Su)/yf;Ce-=Xu,De=f(-w,c(w,De-Zu))}while((i(Xu)>g||i(Zu)>g)&&--Ge>0);return i(i(De)-w)<g?[0,De]:Ge&&[Ce,De]};function tr(){return t.geoProjection(Ot).scale(62.5271)}var pr=o(35*S);function hr(de,Te){var Ce=T(Te/2);return[de*pr*O(1-Ce*Ce),(1+pr)*Ce]}hr.invert=function(de,Te){var Ce=Te/(1+pr);return[de&&de/(pr*O(1-Ce*Ce)),2*n(Ce)]};function Rr(){return t.geoProjection(hr).scale(137.152)}function Gr(de,Te){var Ce=Te/2,De=o(Ce);return[2*de/M*o(Te)*De*De,M*T(Ce)]}Gr.invert=function(de,Te){var Ce=n(Te/M),De=o(Ce),Ge=2*Ce;return[de*M/2/(o(Ge)*De*De),Ge]};function Yr(){return t.geoProjection(Gr).scale(135.264)}function vn(de){var Te=1-de,Ce=He(b,0)[0]-He(-b,0)[0],De=He(0,w)[1]-He(0,-w)[1],Ge=O(2*De/Ce);function He(jt,It){var Kt=o(It),ir=_(It);return[Kt/(Te+de*Kt)*jt,Te*It+de*ir]}function Qe(jt,It){var Kt=He(jt,It);return[Kt[0]*Ge,Kt[1]/Ge]}function Ft(jt){return Qe(0,jt)[1]}return Qe.invert=function(jt,It){var Kt=et(Ft,It),ir=jt/Ge*(de+Te/o(Kt));return[ir,Kt]},Qe}function Wr(){var de=.5,Te=t.geoProjectionMutator(vn),Ce=Te(de);return Ce.alpha=function(De){return arguments.length?Te(de=+De):de},Ce.scale(168.725)}function qn(de){return[de[0]/2,D(T(de[1]/2*S))*C]}function vi(de){return[de[0]*2,2*n(_(de[1]*S))*C]}function Mi(de){de==null&&(de=t.geoOrthographic);var Te=de(),Ce=t.geoEquirectangular().scale(C).precision(0).clipAngle(null).translate([0,0]);function De(He){return Te(qn(He))}Te.invert&&(De.invert=function(He){return vi(Te.invert(He))}),De.stream=function(He){var Qe=Te.stream(He),Ft=Ce.stream({point:function(jt,It){Qe.point(jt/2,D(T(-It/2*S))*C)},lineStart:function(){Qe.lineStart()},lineEnd:function(){Qe.lineEnd()},polygonStart:function(){Qe.polygonStart()},polygonEnd:function(){Qe.polygonEnd()}});return Ft.sphere=Qe.sphere,Ft};function Ge(He){De[He]=function(){return arguments.length?(Te[He].apply(Te,arguments),De):Te[He]()}}return De.rotate=function(He){return arguments.length?(Ce.rotate(He),De):Ce.rotate()},De.center=function(He){return arguments.length?(Te.center(qn(He)),De):vi(Te.center())},Ge("angle"),Ge("clipAngle"),Ge("clipExtent"),Ge("fitExtent"),Ge("fitHeight"),Ge("fitSize"),Ge("fitWidth"),Ge("scale"),Ge("translate"),Ge("precision"),De.scale(249.5)}function Ui(de,Te){var Ce=2*b/Te,De=de*de;function Ge(He,Qe){var Ft=t.geoAzimuthalEquidistantRaw(He,Qe),jt=Ft[0],It=Ft[1],Kt=jt*jt+It*It;if(Kt>De){var ir=O(Kt),mr=a(It,jt),Sr=Ce*v(mr/Ce),Vr=mr-Sr,sn=de*o(Vr),kn=(de*_(Vr)-Vr*_(sn))/(w-sn),yi=ji(Vr,kn),Qi=(b-de)/ea(yi,sn,b);jt=ir;var ra=50,sa;do jt-=sa=(de+ea(yi,sn,jt)*Qi-ir)/(yi(jt)*Qi);while(i(sa)>g&&--ra>0);It=Vr*_(jt),jt<w&&(It-=kn*(jt-w));var pa=_(Sr),Lo=o(Sr);Ft[0]=jt*Lo-It*pa,Ft[1]=jt*pa+It*Lo}return Ft}return Ge.invert=function(He,Qe){var Ft=He*He+Qe*Qe;if(Ft>De){var jt=O(Ft),It=a(Qe,He),Kt=Ce*v(It/Ce),ir=It-Kt;He=jt*o(ir),Qe=jt*_(ir);for(var mr=He-w,Sr=_(He),Vr=Qe/Sr,sn=He<w?1/0:0,kn=10;;){var yi=de*_(Vr),Qi=de*o(Vr),ra=_(Qi),sa=w-Qi,pa=(yi-Vr*ra)/sa,Lo=ji(Vr,pa);if(i(sn)<A||!--kn)break;Vr-=sn=(Vr*Sr-pa*mr-Qe)/(Sr-mr*2*(sa*(Qi+Vr*yi*o(Qi)-ra)-yi*(yi-Vr*ra))/(sa*sa))}jt=de+ea(Lo,Qi,He)*(b-de)/ea(Lo,Qi,b),It=Kt+Vr,He=jt*o(It),Qe=jt*_(It)}return t.geoAzimuthalEquidistantRaw.invert(He,Qe)},Ge}function ji(de,Te){return function(Ce){var De=de*o(Ce);return Ce<w&&(De-=Te),O(1+De*De)}}function ea(de,Te,Ce){for(var De=50,Ge=(Ce-Te)/De,He=de(Te)+de(Ce),Qe=1,Ft=Te;Qe<De;++Qe)He+=2*de(Ft+=Ge);return He*.5*Ge}function Ra(){var de=6,Te=30*S,Ce=o(Te),De=_(Te),Ge=t.geoProjectionMutator(Ui),He=Ge(Te,de),Qe=He.stream,Ft=.01,jt=-o(Ft*S),It=_(Ft*S);return He.radius=function(Kt){return arguments.length?(Ce=o(Te=Kt*S),De=_(Te),Ge(Te,de)):Te*C},He.lobes=function(Kt){return arguments.length?Ge(Te,de=+Kt):de},He.stream=function(Kt){var ir=He.rotate(),mr=Qe(Kt),Sr=(He.rotate([0,0]),Qe(Kt));return He.rotate(ir),mr.sphere=function(){Sr.polygonStart(),Sr.lineStart();for(var Vr=0,sn=2*b/de,kn=0;Vr<de;++Vr,kn-=sn)Sr.point(a(It*o(kn),jt)*C,D(It*_(kn))*C),Sr.point(a(De*o(kn-sn/2),Ce)*C,D(De*_(kn-sn/2))*C);Sr.lineEnd(),Sr.polygonEnd()},mr},He.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Li(de,Te,Ce,De,Ge,He,Qe,Ft){arguments.length<8&&(Ft=0);function jt(It,Kt){if(!Kt)return[de*It/b,0];var ir=Kt*Kt,mr=de+ir*(Te+ir*(Ce+ir*De)),Sr=Kt*(Ge-1+ir*(He-Ft+ir*Qe)),Vr=(mr*mr+Sr*Sr)/(2*Sr),sn=It*D(mr/Vr)/b;return[Vr*_(sn),Kt*(1+ir*Ft)+Vr*(1-o(sn))]}return jt.invert=function(It,Kt){var ir=b*It/de,mr=Kt,Sr,Vr,sn=50;do{var kn=mr*mr,yi=de+kn*(Te+kn*(Ce+kn*De)),Qi=mr*(Ge-1+kn*(He-Ft+kn*Qe)),ra=yi*yi+Qi*Qi,sa=2*Qi,pa=ra/sa,Lo=pa*pa,jo=D(yi/pa)/b,ba=ir*jo,qa=yi*yi,ds=(2*Te+kn*(4*Ce+kn*6*De))*mr,ol=Ge+kn*(3*He+kn*5*Qe),el=2*(yi*ds+Qi*(ol-1)),to=2*(ol-1),Ya=(el*sa-ra*to)/(sa*sa),Il=o(ba),Sl=_(ba),Su=pa*Il,su=pa*Sl,Fl=ir/b*(1/O(1-qa/Lo))*(ds*pa-yi*Ya)/Lo,El=su-It,yf=mr*(1+kn*Ft)+pa-Su-Kt,Xu=Ya*Sl+Su*Fl,Zu=Su*jo,U=1+Ya-(Ya*Il-su*Fl),Q=su*jo,se=Xu*Q-U*Zu;if(!se)break;ir-=Sr=(yf*Xu-El*U)/se,mr-=Vr=(El*Q-yf*Zu)/se}while((i(Sr)>g||i(Vr)>g)&&--sn>0);return[ir,mr]},jt}var Yn=Li(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function zi(){return t.geoProjection(Yn).scale(149.995)}var ya=Li(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function zn(){return t.geoProjection(ya).scale(153.93)}var Ze=Li(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Bt(){return t.geoProjection(Ze).scale(130.945)}function sr(de,Te){var Ce=de*de,De=Te*Te;return[de*(1-.162388*De)*(.87-952426e-9*Ce*Ce),Te*(1+De/12)]}sr.invert=function(de,Te){var Ce=de,De=Te,Ge=50,He;do{var Qe=De*De;De-=He=(De*(1+Qe/12)-Te)/(1+Qe/4)}while(i(He)>g&&--Ge>0);Ge=50,de/=1-.162388*Qe;do{var Ft=(Ft=Ce*Ce)*Ft;Ce-=He=(Ce*(.87-952426e-9*Ft)-de)/(.87-.00476213*Ft)}while(i(He)>g&&--Ge>0);return[Ce,De]};function _r(){return t.geoProjection(sr).scale(131.747)}var Jr=Li(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function on(){return t.geoProjection(Jr).scale(131.087)}function pn(de){var Te=de(w,0)[0]-de(-w,0)[0];function Ce(De,Ge){var He=De>0?-.5:.5,Qe=de(De+He*b,Ge);return Qe[0]-=He*Te,Qe}return de.invert&&(Ce.invert=function(De,Ge){var He=De>0?-.5:.5,Qe=de.invert(De+He*Te,Ge),Ft=Qe[0]-He*b;return Ft<-b?Ft+=2*b:Ft>b&&(Ft-=2*b),Qe[0]=Ft,Qe}),Ce}function Cr(de,Te){var Ce=p(de),De=p(Te),Ge=o(Te),He=o(de)*Ge,Qe=_(de)*Ge,Ft=_(De*Te);de=i(a(Qe,Ft)),Te=D(He),i(de-w)>g&&(de%=w);var jt=cn(de>b/4?w-de:de,Te);return de>b/4&&(Ft=jt[0],jt[0]=-jt[1],jt[1]=-Ft),jt[0]*=Ce,jt[1]*=-De,jt}Cr.invert=function(de,Te){i(de)>1&&(de=p(de)*2-de),i(Te)>1&&(Te=p(Te)*2-Te);var Ce=p(de),De=p(Te),Ge=-Ce*de,He=-De*Te,Qe=He/Ge<1,Ft=gi(Qe?He:Ge,Qe?Ge:He),jt=Ft[0],It=Ft[1],Kt=o(It);return Qe&&(jt=-w-jt),[Ce*(a(_(jt)*Kt,-_(It))+b),De*D(o(jt)*Kt)]};function cn(de,Te){if(Te===w)return[0,0];var Ce=_(Te),De=Ce*Ce,Ge=De*De,He=1+Ge,Qe=1+3*Ge,Ft=1-Ge,jt=D(1/O(He)),It=Ft+De*He*jt,Kt=(1-Ce)/It,ir=O(Kt),mr=Kt*He,Sr=O(mr),Vr=ir*Ft,sn,kn;if(de===0)return[0,-(Vr+De*Sr)];var yi=o(Te),Qi=1/yi,ra=2*Ce*yi,sa=(-3*De+jt*Qe)*ra,pa=(-It*yi-(1-Ce)*sa)/(It*It),Lo=.5*pa/ir,jo=Ft*Lo-2*De*ir*ra,ba=De*He*pa+Kt*Qe*ra,qa=-Qi*ra,ds=-Qi*ba,ol=-2*Qi*jo,el=4*de/b,to;if(de>.222*b||Te<b/4&&de>.175*b){if(sn=(Vr+De*O(mr*(1+Ge)-Vr*Vr))/(1+Ge),de>b/4)return[sn,sn];var Ya=sn,Il=.5*sn;sn=.5*(Il+Ya),kn=50;do{var Sl=O(mr-sn*sn),Su=sn*(ol+qa*Sl)+ds*D(sn/Sr)-el;if(!Su)break;Su<0?Il=sn:Ya=sn,sn=.5*(Il+Ya)}while(i(Ya-Il)>g&&--kn>0)}else{sn=g,kn=25;do{var su=sn*sn,Fl=O(mr-su),El=ol+qa*Fl,yf=sn*El+ds*D(sn/Sr)-el,Xu=El+(ds-qa*su)/Fl;sn-=to=Fl?yf/Xu:0}while(i(to)>g&&--kn>0)}return[sn,-Vr-De*O(mr-sn*sn)]}function gi(de,Te){for(var Ce=0,De=1,Ge=.5,He=50;;){var Qe=Ge*Ge,Ft=O(Ge),jt=D(1/O(1+Qe)),It=1-Qe+Ge*(1+Qe)*jt,Kt=(1-Ft)/It,ir=O(Kt),mr=Kt*(1+Qe),Sr=ir*(1-Qe),Vr=mr-de*de,sn=O(Vr),kn=Te+Sr+Ge*sn;if(i(De-Ce)<A||--He===0||kn===0)break;kn>0?Ce=Ge:De=Ge,Ge=.5*(Ce+De)}if(!He)return null;var yi=D(Ft),Qi=o(yi),ra=1/Qi,sa=2*Ft*Qi,pa=(-3*Ge+jt*(1+3*Qe))*sa,Lo=(-It*Qi-(1-Ft)*pa)/(It*It),jo=.5*Lo/ir,ba=(1-Qe)*jo-2*Ge*ir*sa,qa=-2*ra*ba,ds=-ra*sa,ol=-ra*(Ge*(1+Qe)*Lo+Kt*(1+3*Qe)*sa);return[b/4*(de*(qa+ds*sn)+ol*D(de/O(mr))),yi]}function Hn(){return t.geoProjection(pn(Cr)).scale(239.75)}function qi(de,Te,Ce){var De,Ge,He;return de?(De=fa(de,Ce),Te?(Ge=fa(Te,1-Ce),He=Ge[1]*Ge[1]+Ce*De[0]*De[0]*Ge[0]*Ge[0],[[De[0]*Ge[2]/He,De[1]*De[2]*Ge[0]*Ge[1]/He],[De[1]*Ge[1]/He,-De[0]*De[2]*Ge[0]*Ge[2]/He],[De[2]*Ge[1]*Ge[2]/He,-Ce*De[0]*De[1]*Ge[0]/He]]):[[De[0],0],[De[1],0],[De[2],0]]):(Ge=fa(Te,1-Ce),[[0,Ge[0]/Ge[1]],[1/Ge[1],0],[Ge[2]/Ge[1],0]])}function fa(de,Te){var Ce,De,Ge,He,Qe;if(Te<g)return He=_(de),De=o(de),Ce=Te*(de-He*De)/4,[He-Ce*De,De+Ce*He,1-Te*He*He/2,de-Ce];if(Te>=1-g)return Ce=(1-Te)/4,De=F(de),He=V(de),Ge=1/De,Qe=De*B(de),[He+Ce*(Qe-de)/(De*De),Ge-Ce*He*Ge*(Qe-de),Ge+Ce*He*Ge*(Qe+de),2*n(s(de))-w+Ce*(Qe-de)/De];var Ft=[1,0,0,0,0,0,0,0,0],jt=[O(Te),0,0,0,0,0,0,0,0],It=0;for(De=O(1-Te),Qe=1;i(jt[It]/Ft[It])>g&&It<8;)Ce=Ft[It++],jt[It]=(Ce-De)/2,Ft[It]=(Ce+De)/2,De=O(Ce*De),Qe*=2;Ge=Qe*Ft[It]*de;do He=jt[It]*_(De=Ge)/Ft[It],Ge=(D(He)+Ge)/2;while(--It);return[_(Ge),He=o(Ge),He/o(Ge-De),Ge]}function eo(de,Te,Ce){var De=i(de),Ge=i(Te),He=B(Ge);if(De){var Qe=1/_(De),Ft=1/(T(De)*T(De)),jt=-(Ft+Ce*(He*He*Qe*Qe)-1+Ce),It=(Ce-1)*Ft,Kt=(-jt+O(jt*jt-4*It))/2;return[ma(n(1/O(Kt)),Ce)*p(de),ma(n(O((Kt/Ft-1)/Ce)),1-Ce)*p(Te)]}return[0,ma(n(He),1-Ce)*p(Te)]}function ma(de,Te){if(!Te)return de;if(Te===1)return u(T(de/2+k));for(var Ce=1,De=O(1-Te),Ge=O(Te),He=0;i(Ge)>g;He++){if(de%b){var Qe=n(De*T(de)/Ce);Qe<0&&(Qe+=b),de+=Qe+~~(de/b)*b}else de+=de;Ge=(Ce+De)/2,De=O(Ce*De),Ge=((Ce=Ge)-De)/2}return de/(h(2,He)*Ce)}function so(de,Te){var Ce=(E-1)/(E+1),De=O(1-Ce*Ce),Ge=ma(w,De*De),He=-1,Qe=u(T(b/4+i(Te)/2)),Ft=s(He*Qe)/O(Ce),jt=ja(Ft*o(He*de),Ft*_(He*de)),It=eo(jt[0],jt[1],De*De);return[-It[1],(Te>=0?1:-1)*(.5*Ge-It[0])]}function ja(de,Te){var Ce=de*de,De=Te+1,Ge=1-Ce-Te*Te;return[.5*((de>=0?w:-w)-a(Ge,2*de)),-.25*u(Ge*Ge+4*Ce)+.5*u(De*De+Ce)]}function Xo(de,Te){var Ce=Te[0]*Te[0]+Te[1]*Te[1];return[(de[0]*Te[0]+de[1]*Te[1])/Ce,(de[1]*Te[0]-de[0]*Te[1])/Ce]}so.invert=function(de,Te){var Ce=(E-1)/(E+1),De=O(1-Ce*Ce),Ge=ma(w,De*De),He=-1,Qe=qi(.5*Ge-Te,-de,De*De),Ft=Xo(Qe[0],Qe[1]),jt=a(Ft[1],Ft[0])/He;return[jt,2*n(s(.5/He*u(Ce*Ft[0]*Ft[0]+Ce*Ft[1]*Ft[1])))-w]};function Uo(){return t.geoProjection(pn(so)).scale(151.496)}function ms(de){var Te=_(de),Ce=o(de),De=as(de);De.invert=as(-de);function Ge(He,Qe){var Ft=De(He,Qe);He=Ft[0],Qe=Ft[1];var jt=_(Qe),It=o(Qe),Kt=o(He),ir=z(Te*jt+Ce*It*Kt),mr=_(ir),Sr=i(mr)>g?ir/mr:1;return[Sr*Ce*_(He),(i(He)>w?Sr:-Sr)*(Te*It-Ce*jt*Kt)]}return Ge.invert=function(He,Qe){var Ft=O(He*He+Qe*Qe),jt=-_(Ft),It=o(Ft),Kt=Ft*It,ir=-Qe*jt,mr=Ft*Te,Sr=O(Kt*Kt+ir*ir-mr*mr),Vr=a(Kt*mr+ir*Sr,ir*mr-Kt*Sr),sn=(Ft>w?-1:1)*a(He*jt,Ft*o(Vr)*It+Qe*_(Vr)*jt);return De.invert(sn,Vr)},Ge}function as(de){var Te=_(de),Ce=o(de);return function(De,Ge){var He=o(Ge),Qe=o(De)*He,Ft=_(De)*He,jt=_(Ge);return[a(Ft,Qe*Ce-jt*Te),D(jt*Ce+Qe*Te)]}}function il(){var de=0,Te=t.geoProjectionMutator(ms),Ce=Te(de),De=Ce.rotate,Ge=Ce.stream,He=t.geoCircle();return Ce.parallel=function(Qe){if(!arguments.length)return de*C;var Ft=Ce.rotate();return Te(de=Qe*S).rotate(Ft)},Ce.rotate=function(Qe){return arguments.length?(De.call(Ce,[Qe[0],Qe[1]-de*C]),He.center([-Qe[0],-Qe[1]]),Ce):(Qe=De.call(Ce),Qe[1]+=de*C,Qe)},Ce.stream=function(Qe){return Qe=Ge(Qe),Qe.sphere=function(){Qe.polygonStart();var Ft=.01,jt=He.radius(90-Ft)().coordinates[0],It=jt.length-1,Kt=-1,ir;for(Qe.lineStart();++Kt<It;)Qe.point((ir=jt[Kt])[0],ir[1]);for(Qe.lineEnd(),jt=He.radius(90+Ft)().coordinates[0],It=jt.length-1,Qe.lineStart();--Kt>=0;)Qe.point((ir=jt[Kt])[0],ir[1]);Qe.lineEnd(),Qe.polygonEnd()},Qe},Ce.scale(79.4187).parallel(45).clipAngle(180-.001)}var oo=3,cs=D(1-1/oo)*C,Eo=xr(0);function hs(de){var Te=cs*S,Ce=ce(b,Te)[0]-ce(-b,Te)[0],De=Eo(0,Te)[1],Ge=ce(0,Te)[1],He=M-Ge,Qe=d/de,Ft=4/d,jt=De+He*He*4/d;function It(Kt,ir){var mr,Sr=i(ir);if(Sr>Te){var Vr=c(de-1,f(0,l((Kt+b)/Qe)));Kt+=b*(de-1)/de-Vr*Qe,mr=ce(Kt,Sr),mr[0]=mr[0]*d/Ce-d*(de-1)/(2*de)+Vr*d/de,mr[1]=De+(mr[1]-Ge)*4*He/d,ir<0&&(mr[1]=-mr[1])}else mr=Eo(Kt,ir);return mr[0]*=Ft,mr[1]/=jt,mr}return It.invert=function(Kt,ir){Kt/=Ft,ir*=jt;var mr=i(ir);if(mr>De){var Sr=c(de-1,f(0,l((Kt+b)/Qe)));Kt=(Kt+b*(de-1)/de-Sr*Qe)*Ce/d;var Vr=ce.invert(Kt,.25*(mr-De)*d/He+Ge);return Vr[0]-=b*(de-1)/de-Sr*Qe,ir<0&&(Vr[1]=-Vr[1]),Vr}return Eo.invert(Kt,ir)},It}function Jo(de,Te){return[de,Te&1?90-g:cs]}function Qo(de,Te){return[de,Te&1?-90+g:-cs]}function Oa(de){return[de[0]*(1-g),de[1]]}function co(de){var Te=[].concat(r.range(-180,180+de/2,de).map(Jo),r.range(180,-180-de/2,-de).map(Qo));return{type:"Polygon",coordinates:[de===180?Te.map(Oa):Te]}}function Al(){var de=4,Te=t.geoProjectionMutator(hs),Ce=Te(de),De=Ce.stream;return Ce.lobes=function(Ge){return arguments.length?Te(de=+Ge):de},Ce.stream=function(Ge){var He=Ce.rotate(),Qe=De(Ge),Ft=(Ce.rotate([0,0]),De(Ge));return Ce.rotate(He),Qe.sphere=function(){t.geoStream(co(180/de),Ft)},Qe},Ce.scale(239.75)}function $l(de){var Te=1+de,Ce=_(1/Te),De=D(Ce),Ge=2*O(b/(He=b+4*De*Te)),He,Qe=.5*Ge*(Te+O(de*(2+de))),Ft=de*de,jt=Te*Te;function It(Kt,ir){var mr=1-_(ir),Sr,Vr;if(mr&&mr<2){var sn=w-ir,kn=25,yi;do{var Qi=_(sn),ra=o(sn),sa=De+a(Qi,Te-ra),pa=1+jt-2*Te*ra;sn-=yi=(sn-Ft*De-Te*Qi+pa*sa-.5*mr*He)/(2*Te*Qi*sa)}while(i(yi)>A&&--kn>0);Sr=Ge*O(pa),Vr=Kt*sa/b}else Sr=Ge*(de+mr),Vr=Kt*De/b;return[Sr*_(Vr),Qe-Sr*o(Vr)]}return It.invert=function(Kt,ir){var mr=Kt*Kt+(ir-=Qe)*ir,Sr=(1+jt-mr/(Ge*Ge))/(2*Te),Vr=z(Sr),sn=_(Vr),kn=De+a(sn,Te-Sr);return[D(Kt/O(mr))*b/kn,D(1-2*(Vr-Ft*De-Te*sn+(1+jt-2*Te*Sr)*kn)/He)]},It}function Nu(){var de=1,Te=t.geoProjectionMutator($l),Ce=Te(de);return Ce.ratio=function(De){return arguments.length?Te(de=+De):de},Ce.scale(167.774).center([0,18.67])}var os=.7109889596207567,hn=.0528035274542;function bi(de,Te){return Te>-os?(de=_t(de,Te),de[1]+=hn,de):lt(de,Te)}bi.invert=function(de,Te){return Te>-os?_t.invert(de,Te-hn):lt.invert(de,Te)};function ac(){return t.geoProjection(bi).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Pl(de,Te){return i(Te)>os?(de=_t(de,Te),de[1]-=Te>0?hn:-hn,de):lt(de,Te)}Pl.invert=function(de,Te){return i(Te)>os?_t.invert(de,Te+(Te>0?hn:-hn)):lt.invert(de,Te)};function ss(){return t.geoProjection(Pl).scale(152.63)}function vl(de,Te,Ce,De){var Ge=O(4*b/(2*Ce+(1+de-Te/2)*_(2*Ce)+(de+Te)/2*_(4*Ce)+Te/2*_(6*Ce))),He=O(De*_(Ce)*O((1+de*o(2*Ce)+Te*o(4*Ce))/(1+de+Te))),Qe=Ce*jt(1);function Ft(ir){return O(1+de*o(2*ir)+Te*o(4*ir))}function jt(ir){var mr=ir*Ce;return(2*mr+(1+de-Te/2)*_(2*mr)+(de+Te)/2*_(4*mr)+Te/2*_(6*mr))/Ce}function It(ir){return Ft(ir)*_(ir)}var Kt=function(ir,mr){var Sr=Ce*et(jt,Qe*_(mr)/Ce,mr/b);isNaN(Sr)&&(Sr=Ce*p(mr));var Vr=Ge*Ft(Sr);return[Vr*He*ir/b*o(Sr),Vr/He*_(Sr)]};return Kt.invert=function(ir,mr){var Sr=et(It,mr*He/Ge);return[ir*b/(o(Sr)*Ge*He*Ft(Sr)),D(Ce*jt(Sr/Ce)/Qe)]},Ce===0&&(Ge=O(De/b),Kt=function(ir,mr){return[ir*Ge,_(mr)/Ge]},Kt.invert=function(ir,mr){return[ir/Ge,D(mr*Ge)]}),Kt}function $o(){var de=1,Te=0,Ce=45*S,De=2,Ge=t.geoProjectionMutator(vl),He=Ge(de,Te,Ce,De);return He.a=function(Qe){return arguments.length?Ge(de=+Qe,Te,Ce,De):de},He.b=function(Qe){return arguments.length?Ge(de,Te=+Qe,Ce,De):Te},He.psiMax=function(Qe){return arguments.length?Ge(de,Te,Ce=+Qe*S,De):Ce*C},He.ratio=function(Qe){return arguments.length?Ge(de,Te,Ce,De=+Qe):De},He.scale(180.739)}function Rl(de,Te,Ce,De,Ge,He,Qe,Ft,jt,It,Kt){if(Kt.nanEncountered)return NaN;var ir,mr,Sr,Vr,sn,kn,yi,Qi,ra,sa;if(ir=Ce-Te,mr=de(Te+ir*.25),Sr=de(Ce-ir*.25),isNaN(mr)){Kt.nanEncountered=!0;return}if(isNaN(Sr)){Kt.nanEncountered=!0;return}return Vr=ir*(De+4*mr+Ge)/12,sn=ir*(Ge+4*Sr+He)/12,kn=Vr+sn,sa=(kn-Qe)/15,It>jt?(Kt.maxDepthCount++,kn+sa):Math.abs(sa)<Ft?kn+sa:(yi=Te+ir*.5,Qi=Rl(de,Te,yi,De,mr,Ge,Vr,Ft*.5,jt,It+1,Kt),isNaN(Qi)?(Kt.nanEncountered=!0,NaN):(ra=Rl(de,yi,Ce,Ge,Sr,He,sn,Ft*.5,jt,It+1,Kt),isNaN(ra)?(Kt.nanEncountered=!0,NaN):Qi+ra))}function xu(de,Te,Ce,De,Ge){var He={maxDepthCount:0,nanEncountered:!1};De===void 0&&(De=1e-8),Ge===void 0&&(Ge=20);var Qe=de(Te),Ft=de(.5*(Te+Ce)),jt=de(Ce),It=(Qe+4*Ft+jt)*(Ce-Te)/6,Kt=Rl(de,Te,Ce,Qe,Ft,jt,It,De,Ge,1,He);return Kt}function ni(de,Te,Ce){function De(Sr){return de+(1-de)*h(1-h(Sr,Te),1/Te)}function Ge(Sr){return xu(De,0,Sr,1e-4)}for(var He=1/Ge(1),Qe=1e3,Ft=(1+1e-8)*He,jt=[],It=0;It<=Qe;It++)jt.push(Ge(It/Qe)*Ft);function Kt(Sr){var Vr=0,sn=Qe,kn=Qe>>1;do jt[kn]>Sr?sn=kn:Vr=kn,kn=Vr+sn>>1;while(kn>Vr);var yi=jt[kn+1]-jt[kn];return yi&&(yi=(Sr-jt[kn+1])/yi),(kn+1+yi)/Qe}var ir=2*Kt(1)/b*He/Ce,mr=function(Sr,Vr){var sn=Kt(i(_(Vr))),kn=De(sn)*Sr;return sn/=ir,[kn,Vr>=0?sn:-sn]};return mr.invert=function(Sr,Vr){var sn;return Vr*=ir,i(Vr)<1&&(sn=p(Vr)*D(Ge(i(Vr))*He)),[Sr/De(i(Vr)),sn]},mr}function Aa(){var de=0,Te=2.5,Ce=1.183136,De=t.geoProjectionMutator(ni),Ge=De(de,Te,Ce);return Ge.alpha=function(He){return arguments.length?De(de=+He,Te,Ce):de},Ge.k=function(He){return arguments.length?De(de,Te=+He,Ce):Te},Ge.gamma=function(He){return arguments.length?De(de,Te,Ce=+He):Ce},Ge.scale(152.63)}function Ca(de,Te){return i(de[0]-Te[0])<g&&i(de[1]-Te[1])<g}function Fs(de,Te){for(var Ce=-1,De=de.length,Ge=de[0],He,Qe,Ft,jt=[];++Ce<De;){He=de[Ce],Qe=(He[0]-Ge[0])/Te,Ft=(He[1]-Ge[1])/Te;for(var It=0;It<Te;++It)jt.push([Ge[0]+It*Qe,Ge[1]+It*Ft]);Ge=He}return jt.push(He),jt}function Pf(de){var Te=[],Ce,De,Ge,He,Qe,Ft,jt,It=de[0].length;for(jt=0;jt<It;++jt)Ce=de[0][jt],De=Ce[0][0],Ge=Ce[0][1],He=Ce[1][1],Qe=Ce[2][0],Ft=Ce[2][1],Te.push(Fs([[De+g,Ge+g],[De+g,He-g],[Qe-g,He-g],[Qe-g,Ft+g]],30));for(jt=de[1].length-1;jt>=0;--jt)Ce=de[1][jt],De=Ce[0][0],Ge=Ce[0][1],He=Ce[1][1],Qe=Ce[2][0],Ft=Ce[2][1],Te.push(Fs([[Qe-g,Ft-g],[Qe-g,He+g],[De+g,He+g],[De+g,Ge-g]],30));return{type:"Polygon",coordinates:[r.merge(Te)]}}function Ma(de,Te,Ce){var De,Ge;function He(jt,It){for(var Kt=It<0?-1:1,ir=Te[+(It<0)],mr=0,Sr=ir.length-1;mr<Sr&&jt>ir[mr][2][0];++mr);var Vr=de(jt-ir[mr][1][0],It);return Vr[0]+=de(ir[mr][1][0],Kt*It>Kt*ir[mr][0][1]?ir[mr][0][1]:It)[0],Vr}Ce?He.invert=Ce(He):de.invert&&(He.invert=function(jt,It){for(var Kt=Ge[+(It<0)],ir=Te[+(It<0)],mr=0,Sr=Kt.length;mr<Sr;++mr){var Vr=Kt[mr];if(Vr[0][0]<=jt&&jt<Vr[1][0]&&Vr[0][1]<=It&&It<Vr[1][1]){var sn=de.invert(jt-de(ir[mr][1][0],0)[0],It);return sn[0]+=ir[mr][1][0],Ca(He(sn[0],sn[1]),[jt,It])?sn:null}}});var Qe=t.geoProjection(He),Ft=Qe.stream;return Qe.stream=function(jt){var It=Qe.rotate(),Kt=Ft(jt),ir=(Qe.rotate([0,0]),Ft(jt));return Qe.rotate(It),Kt.sphere=function(){t.geoStream(De,ir)},Kt},Qe.lobes=function(jt){return arguments.length?(De=Pf(jt),Te=jt.map(function(It){return It.map(function(Kt){return[[Kt[0][0]*S,Kt[0][1]*S],[Kt[1][0]*S,Kt[1][1]*S],[Kt[2][0]*S,Kt[2][1]*S]]})}),Ge=Te.map(function(It){return It.map(function(Kt){var ir=de(Kt[0][0],Kt[0][1])[0],mr=de(Kt[2][0],Kt[2][1])[0],Sr=de(Kt[1][0],Kt[0][1])[1],Vr=de(Kt[1][0],Kt[1][1])[1],sn;return Sr>Vr&&(sn=Sr,Sr=Vr,Vr=sn),[[ir,Sr],[mr,Vr]]})}),Qe):Te.map(function(It){return It.map(function(Kt){return[[Kt[0][0]*C,Kt[0][1]*C],[Kt[1][0]*C,Kt[1][1]*C],[Kt[2][0]*C,Kt[2][1]*C]]})})},Te!=null&&Qe.lobes(Te),Qe}var Rf=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Wc(){return Ma(je,Rf).scale(160.857)}var dl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ff(){return Ma(Pl,dl).scale(152.63)}var $s=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ko(){return Ma(_t,$s).scale(169.529)}var eu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function _u(){return Ma(_t,eu).scale(169.529).rotate([20,0])}var Ah=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Uu(){return Ma(bi,Ah,Le).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var nv=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ac(){return Ma(lt,nv).scale(152.63).rotate([-20,0])}function lo(de,Te){return[3/d*de*O(b*b/3-Te*Te),Te]}lo.invert=function(de,Te){return[d/3*de/O(b*b/3-Te*Te),Te]};function Df(){return t.geoProjection(lo).scale(158.837)}function Mh(de){function Te(Ce,De){if(i(i(De)-w)<g)return[0,De<0?-2:2];var Ge=_(De),He=h((1+Ge)/(1-Ge),de/2),Qe=.5*(He+1/He)+o(Ce*=de);return[2*_(Ce)/Qe,(He-1/He)/Qe]}return Te.invert=function(Ce,De){var Ge=i(De);if(i(Ge-2)<g)return Ce?null:[0,p(De)*w];if(Ge>2)return null;Ce/=2,De/=2;var He=Ce*Ce,Qe=De*De,Ft=2*De/(1+He+Qe);return Ft=h((1+Ft)/(1-Ft),1/de),[a(2*Ce,1-He-Qe)/de,D((Ft-1)/(Ft+1))]},Te}function Us(){var de=.5,Te=t.geoProjectionMutator(Mh),Ce=Te(de);return Ce.spacing=function(De){return arguments.length?Te(de=+De):de},Ce.scale(124.75)}var xs=b/E;function Sh(de,Te){return[de*(1+O(o(Te)))/2,Te/(o(Te/2)*o(de/6))]}Sh.invert=function(de,Te){var Ce=i(de),De=i(Te),Ge=g,He=w;De<xs?He*=De/xs:Ge+=6*z(xs/De);for(var Qe=0;Qe<25;Qe++){var Ft=_(He),jt=O(o(He)),It=_(He/2),Kt=o(He/2),ir=_(Ge/6),mr=o(Ge/6),Sr=.5*Ge*(1+jt)-Ce,Vr=He/(Kt*mr)-De,sn=jt?-.25*Ge*Ft/jt:0,kn=.5*(1+jt),yi=(1+.5*He*It/Kt)/(Kt*mr),Qi=He/Kt*(ir/6)/(mr*mr),ra=sn*Qi-yi*kn,sa=(Sr*Qi-Vr*kn)/ra,pa=(Vr*sn-Sr*yi)/ra;if(He-=sa,Ge-=pa,i(sa)<g&&i(pa)<g)break}return[de<0?-Ge:Ge,Te<0?-He:He]};function cf(){return t.geoProjection(Sh).scale(97.2672)}function To(de,Te){var Ce=de*de,De=Te*Te;return[de*(.975534+De*(-.119161+Ce*-.0143059+De*-.0547009)),Te*(1.00384+Ce*(.0802894+De*-.02855+Ce*199025e-9)+De*(.0998909+De*-.0491032))]}To.invert=function(de,Te){var Ce=p(de)*b,De=Te/2,Ge=50;do{var He=Ce*Ce,Qe=De*De,Ft=Ce*De,jt=Ce*(.975534+Qe*(-.119161+He*-.0143059+Qe*-.0547009))-de,It=De*(1.00384+He*(.0802894+Qe*-.02855+He*199025e-9)+Qe*(.0998909+Qe*-.0491032))-Te,Kt=.975534-Qe*(.119161+3*He*.0143059+Qe*.0547009),ir=-Ft*(2*.119161+4*.0547009*Qe+2*.0143059*He),mr=Ft*(2*.0802894+4*199025e-9*He+2*-.02855*Qe),Sr=1.00384+He*(.0802894+199025e-9*He)+Qe*(3*(.0998909-.02855*He)-5*.0491032*Qe),Vr=ir*mr-Sr*Kt,sn=(It*ir-jt*Sr)/Vr,kn=(jt*mr-It*Kt)/Vr;Ce-=sn,De-=kn}while((i(sn)>g||i(kn)>g)&&--Ge>0);return Ge&&[Ce,De]};function vs(){return t.geoProjection(To).scale(139.98)}function po(de,Te){return[_(de)/o(Te),T(Te)*o(de)]}po.invert=function(de,Te){var Ce=de*de,De=Te*Te,Ge=De+1,He=Ce+Ge,Qe=de?x*O((He-O(He*He-4*Ce))/Ce):1/O(Ge);return[D(de*Qe),p(Te)*z(Qe)]};function Co(){return t.geoProjection(po).scale(144.049).clipAngle(90-.001)}function Mc(de){var Te=o(de),Ce=T(k+de/2);function De(Ge,He){var Qe=He-de,Ft=i(Qe)<g?Ge*Te:i(Ft=k+He/2)<g||i(i(Ft)-w)<g?0:Ge*Qe/u(T(Ft)/Ce);return[Ft,Qe]}return De.invert=function(Ge,He){var Qe,Ft=He+de;return[i(He)<g?Ge/Te:i(Qe=k+Ft/2)<g||i(i(Qe)-w)<g?0:Ge*u(T(Qe)/Ce)/He,Ft]},De}function qs(){return nt(Mc).parallel(40).scale(158.837)}function Vl(de,Te){return[de,1.25*u(T(k+.4*Te))]}Vl.invert=function(de,Te){return[de,2.5*n(s(.8*Te))-.625*b]};function hf(){return t.geoProjection(Vl).scale(108.318)}function _d(de){var Te=de.length-1;function Ce(De,Ge){for(var He=o(Ge),Qe=2/(1+He*o(De)),Ft=Qe*He*_(De),jt=Qe*_(Ge),It=Te,Kt=de[It],ir=Kt[0],mr=Kt[1],Sr;--It>=0;)Kt=de[It],ir=Kt[0]+Ft*(Sr=ir)-jt*mr,mr=Kt[1]+Ft*mr+jt*Sr;return ir=Ft*(Sr=ir)-jt*mr,mr=Ft*mr+jt*Sr,[ir,mr]}return Ce.invert=function(De,Ge){var He=20,Qe=De,Ft=Ge;do{for(var jt=Te,It=de[jt],Kt=It[0],ir=It[1],mr=0,Sr=0,Vr;--jt>=0;)It=de[jt],mr=Kt+Qe*(Vr=mr)-Ft*Sr,Sr=ir+Qe*Sr+Ft*Vr,Kt=It[0]+Qe*(Vr=Kt)-Ft*ir,ir=It[1]+Qe*ir+Ft*Vr;mr=Kt+Qe*(Vr=mr)-Ft*Sr,Sr=ir+Qe*Sr+Ft*Vr,Kt=Qe*(Vr=Kt)-Ft*ir-De,ir=Qe*ir+Ft*Vr-Ge;var sn=mr*mr+Sr*Sr,kn,yi;Qe-=kn=(Kt*mr+ir*Sr)/sn,Ft-=yi=(ir*mr-Kt*Sr)/sn}while(i(kn)+i(yi)>g*g&&--He>0);if(He){var Qi=O(Qe*Qe+Ft*Ft),ra=2*n(Qi*.5),sa=_(ra);return[a(Qe*sa,Qi*o(ra)),Qi?D(Ft*sa/Qi):0]}},Ce}var bu=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Wp=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Hl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ho=[[.9245,0],[0,0],[.01943,0]],Dv=[[.721316,0],[0,0],[-.00881625,-.00617325]];function vf(){return wu(bu,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Gl(){return wu(Wp,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function iv(){return wu(Hl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Eh(){return wu(ho,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function av(){return wu(Dv,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function wu(de,Te){var Ce=t.geoProjection(_d(de)).rotate(Te).clipAngle(90),De=t.geoRotation(Te),Ge=Ce.center;return delete Ce.rotate,Ce.center=function(He){return arguments.length?Ge(De(He)):De.invert(Ge())},Ce}var Iv=O(6),ov=O(7);function kh(de,Te){var Ce=D(7*_(Te)/(3*Iv));return[Iv*de*(2*o(2*Ce/3)-1)/ov,9*_(Ce/3)/ov]}kh.invert=function(de,Te){var Ce=3*D(Te*ov/9);return[de*ov/(Iv*(2*o(2*Ce/3)-1)),D(_(Ce)*3*Iv/7)]};function sv(){return t.geoProjection(kh).scale(164.859)}function bd(de,Te){for(var Ce=(1+x)*_(Te),De=Te,Ge=0,He;Ge<25&&(De-=He=(_(De/2)+_(De)-Ce)/(.5*o(De/2)+o(De)),!(i(He)<g));Ge++);return[de*(1+2*o(De)/o(De/2))/(3*E),2*O(3)*_(De/2)/O(2+E)]}bd.invert=function(de,Te){var Ce=Te*O(2+E)/(2*O(3)),De=2*D(Ce);return[3*E*de/(1+2*o(De)/o(De/2)),D((Ce+_(De))/(1+x))]};function Hd(){return t.geoProjection(bd).scale(188.209)}function If(de,Te){for(var Ce=O(6/(4+b)),De=(1+b/4)*_(Te),Ge=Te/2,He=0,Qe;He<25&&(Ge-=Qe=(Ge/2+_(Ge)-De)/(.5+o(Ge)),!(i(Qe)<g));He++);return[Ce*(.5+o(Ge))*de/1.5,Ce*Ge]}If.invert=function(de,Te){var Ce=O(6/(4+b)),De=Te/Ce;return i(i(De)-w)<g&&(De=De<0?-w:w),[1.5*de/(Ce*(.5+o(De))),D((De/2+_(De))/(1+b/4))]};function Fv(){return t.geoProjection(If).scale(166.518)}function oc(de,Te){var Ce=Te*Te,De=Ce*Ce,Ge=Ce*De;return[de*(.84719-.13063*Ce+Ge*Ge*(-.04515+.05494*Ce-.02326*De+.00331*Ge)),Te*(1.01183+De*De*(-.02625+.01926*Ce-.00396*De))]}oc.invert=function(de,Te){var Ce=Te,De=25,Ge,He,Qe,Ft;do He=Ce*Ce,Qe=He*He,Ce-=Ge=(Ce*(1.01183+Qe*Qe*(-.02625+.01926*He-.00396*Qe))-Te)/(1.01183+Qe*Qe*(9*-.02625+11*.01926*He+13*-.00396*Qe));while(i(Ge)>A&&--De>0);return He=Ce*Ce,Qe=He*He,Ft=He*Qe,[de/(.84719-.13063*He+Ft*Ft*(-.04515+.05494*He-.02326*Qe+.00331*Ft)),Ce]};function Ch(){return t.geoProjection(oc).scale(175.295)}function Vu(de,Te){return[de*(1+o(Te))/2,2*(Te-T(Te/2))]}Vu.invert=function(de,Te){for(var Ce=Te/2,De=0,Ge=1/0;De<10&&i(Ge)>g;++De){var He=o(Te/2);Te-=Ge=(Te-T(Te/2)-Ce)/(1-.5/(He*He))}return[2*de/(1+o(Te)),Te]};function Sc(){return t.geoProjection(Vu).scale(152.63)}var Ff=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function qv(){return Ma(Ae(1/0),Ff).rotate([20,0]).scale(152.63)}function zv(de,Te){var Ce=_(Te),De=o(Te),Ge=p(de);if(de===0||i(Te)===w)return[0,Te];if(Te===0)return[de,0];if(i(de)===w)return[de*De,w*Ce];var He=b/(2*de)-2*de/b,Qe=2*Te/b,Ft=(1-Qe*Qe)/(Ce-Qe),jt=He*He,It=Ft*Ft,Kt=1+jt/It,ir=1+It/jt,mr=(He*Ce/Ft-He/2)/Kt,Sr=(It*Ce/jt+Ft/2)/ir,Vr=mr*mr+De*De/Kt,sn=Sr*Sr-(It*Ce*Ce/jt+Ft*Ce-1)/ir;return[w*(mr+O(Vr)*Ge),w*(Sr+O(sn<0?0:sn)*p(-Te*He)*Ge)]}zv.invert=function(de,Te){de/=w,Te/=w;var Ce=de*de,De=Te*Te,Ge=Ce+De,He=b*b;return[de?(Ge-1+O((1-Ge)*(1-Ge)+4*Ce))/(2*de)*w:0,et(function(Qe){return Ge*(b*_(Qe)-2*Qe)*b+4*Qe*Qe*(Te-_(Qe))+2*b*Qe-He*Te},0)]};function Ov(){return t.geoProjection(zv).scale(127.267)}var lv=1.0148,uv=.23185,Bv=-.14499,tu=.02406,fv=lv,al=5*uv,ru=7*Bv,qf=9*tu,Vs=1.790857183;function Xc(de,Te){var Ce=Te*Te;return[de,Te*(lv+Ce*Ce*(uv+Ce*(Bv+tu*Ce)))]}Xc.invert=function(de,Te){Te>Vs?Te=Vs:Te<-Vs&&(Te=-Vs);var Ce=Te,De;do{var Ge=Ce*Ce;Ce-=De=(Ce*(lv+Ge*Ge*(uv+Ge*(Bv+tu*Ge)))-Te)/(fv+Ge*Ge*(al+Ge*(ru+qf*Ge)))}while(i(De)>g);return[de,Ce]};function zf(){return t.geoProjection(Xc).scale(139.319)}function Dl(de,Te){if(i(Te)<g)return[de,0];var Ce=T(Te),De=de*_(Te);return[_(De)/Ce,Te+(1-o(De))/Ce]}Dl.invert=function(de,Te){if(i(Te)<g)return[de,0];var Ce=de*de+Te*Te,De=Te*.5,Ge=10,He;do{var Qe=T(De),Ft=1/o(De),jt=Ce-2*Te*De+De*De;De-=He=(Qe*jt+2*(De-Te))/(2+jt*Ft*Ft+2*(De-Te)*Qe)}while(i(He)>g&&--Ge>0);return Qe=T(De),[(i(Te)<i(De+1/Qe)?D(de*Qe):p(Te)*p(de)*(z(i(de*Qe))+w))/_(De),De]};function zs(){return t.geoProjection(Dl).scale(103.74)}function Gd(de,Te){var Ce=df(de[1],de[0]),De=df(Te[1],Te[0]),Ge=Wd(Ce,De),He=nu(Ce)/nu(De);return Tu([1,0,de[0][0],0,1,de[0][1]],Tu([He,0,0,0,He,0],Tu([o(Ge),_(Ge),0,-_(Ge),o(Ge),0],[1,0,-Te[0][0],0,1,-Te[0][1]])))}function Yd(de){var Te=1/(de[0]*de[4]-de[1]*de[3]);return[Te*de[4],-Te*de[1],Te*(de[1]*de[5]-de[2]*de[4]),-Te*de[3],Te*de[0],Te*(de[2]*de[3]-de[0]*de[5])]}function Tu(de,Te){return[de[0]*Te[0]+de[1]*Te[3],de[0]*Te[1]+de[1]*Te[4],de[0]*Te[2]+de[1]*Te[5]+de[2],de[3]*Te[0]+de[4]*Te[3],de[3]*Te[1]+de[4]*Te[4],de[3]*Te[2]+de[4]*Te[5]+de[5]]}function df(de,Te){return[de[0]-Te[0],de[1]-Te[1]]}function nu(de){return O(de[0]*de[0]+de[1]*de[1])}function Wd(de,Te){return a(de[0]*Te[1]-de[1]*Te[0],de[0]*Te[0]+de[1]*Te[1])}function Zc(de,Te,Ce){De(de,{transform:null});function De(It,Kt){if(It.edges=cv(It.face),Kt.face){var ir=It.shared=Nv(It.face,Kt.face),mr=Gd(ir.map(Kt.project),ir.map(It.project));It.transform=Kt.transform?Tu(Kt.transform,mr):mr;for(var Sr=Kt.edges,Vr=0,sn=Sr.length;Vr<sn;++Vr)Au(ir[0],Sr[Vr][1])&&Au(ir[1],Sr[Vr][0])&&(Sr[Vr]=It),Au(ir[0],Sr[Vr][0])&&Au(ir[1],Sr[Vr][1])&&(Sr[Vr]=It);for(Sr=It.edges,Vr=0,sn=Sr.length;Vr<sn;++Vr)Au(ir[0],Sr[Vr][0])&&Au(ir[1],Sr[Vr][1])&&(Sr[Vr]=Kt),Au(ir[0],Sr[Vr][1])&&Au(ir[1],Sr[Vr][0])&&(Sr[Vr]=Kt)}else It.transform=Kt.transform;return It.children&&It.children.forEach(function(kn){De(kn,It)}),It}function Ge(It,Kt){var ir=Te(It,Kt),mr=ir.project([It*C,Kt*C]),Sr;return(Sr=ir.transform)?[Sr[0]*mr[0]+Sr[1]*mr[1]+Sr[2],-(Sr[3]*mr[0]+Sr[4]*mr[1]+Sr[5])]:(mr[1]=-mr[1],mr)}hv(de)&&(Ge.invert=function(It,Kt){var ir=He(de,[It,-Kt]);return ir&&(ir[0]*=S,ir[1]*=S,ir)});function He(It,Kt){var ir=It.project.invert,mr=It.transform,Sr=Kt;if(mr&&(mr=Yd(mr),Sr=[mr[0]*Sr[0]+mr[1]*Sr[1]+mr[2],mr[3]*Sr[0]+mr[4]*Sr[1]+mr[5]]),ir&&It===Qe(Vr=ir(Sr)))return Vr;for(var Vr,sn=It.children,kn=0,yi=sn&&sn.length;kn<yi;++kn)if(Vr=He(sn[kn],Kt))return Vr}function Qe(It){return Te(It[0]*S,It[1]*S)}var Ft=t.geoProjection(Ge),jt=Ft.stream;return Ft.stream=function(It){var Kt=Ft.rotate(),ir=jt(It),mr=(Ft.rotate([0,0]),jt(It));return Ft.rotate(Kt),ir.sphere=function(){mr.polygonStart(),mr.lineStart(),jc(mr,de),mr.lineEnd(),mr.polygonEnd()},ir},Ft.angle(Ce==null?-30:Ce*C)}function jc(de,Te,Ce){var De,Ge=Te.edges,He=Ge.length,Qe,Ft={type:"MultiPoint",coordinates:Te.face},jt=Te.face.filter(function(sn){return i(sn[1])!==90}),It=t.geoBounds({type:"MultiPoint",coordinates:jt}),Kt=!1,ir=-1,mr=It[1][0]-It[0][0],Sr=mr===180||mr===360?[(It[0][0]+It[1][0])/2,(It[0][1]+It[1][1])/2]:t.geoCentroid(Ft);if(Ce)for(;++ir<He&&Ge[ir]!==Ce;);++ir;for(var Vr=0;Vr<He;++Vr)Qe=Ge[(Vr+ir)%He],Array.isArray(Qe)?(Kt||(de.point((De=t.geoInterpolate(Qe[0],Sr)(g))[0],De[1]),Kt=!0),de.point((De=t.geoInterpolate(Qe[1],Sr)(g))[0],De[1])):(Kt=!1,Qe!==Ce&&jc(de,Qe,Te))}function Au(de,Te){return de&&Te&&de[0]===Te[0]&&de[1]===Te[1]}function Nv(de,Te){for(var Ce,De,Ge=de.length,He=null,Qe=0;Qe<Ge;++Qe){Ce=de[Qe];for(var Ft=Te.length;--Ft>=0;)if(De=Te[Ft],Ce[0]===De[0]&&Ce[1]===De[1]){if(He)return[He,Ce];He=Ce}}}function cv(de){for(var Te=de.length,Ce=[],De=de[Te-1],Ge=0;Ge<Te;++Ge)Ce.push([De,De=de[Ge]]);return Ce}function hv(de){return de.project.invert||de.children&&de.children.some(hv)}var Uv=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Kc=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(de){return de.map(function(Te){return Uv[Te]})});function Of(de){de=de||function(Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:Ce});return t.geoGnomonic().scale(1).translate([0,0]).rotate([-De[0],-De[1]])};var Te=Kc.map(function(Ce){return{face:Ce,project:de(Ce)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ce,De){var Ge=Te[Ce];Ge&&(Ge.children||(Ge.children=[])).push(Te[De])}),Zc(Te[0],function(Ce,De){return Te[Ce<-b/2?De<0?6:4:Ce<0?De<0?2:0:Ce<b/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ec=2/O(3);function Lh(de,Te){var Ce=ce(de,Te);return[Ce[0]*Ec,Ce[1]]}Lh.invert=function(de,Te){return ce.invert(de/Ec,Te)};function wd(de){de=de||function(Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:Ce});return t.geoProjection(Lh).translate([0,0]).scale(1).rotate(De[1]>0?[-De[0],0]:[180-De[0],180])};var Te=Kc.map(function(Ce){return{face:Ce,project:de(Ce)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ce,De){var Ge=Te[Ce];Ge&&(Ge.children||(Ge.children=[])).push(Te[De])}),Zc(Te[0],function(Ce,De){return Te[Ce<-b/2?De<0?6:4:Ce<0?De<0?2:0:Ce<b/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Oo(de){de=de||function(Qe){var Ft=Qe.length===6?t.geoCentroid({type:"MultiPoint",coordinates:Qe}):Qe[0];return t.geoGnomonic().scale(1).translate([0,0]).rotate([-Ft[0],-Ft[1]])};var Te=Kc.map(function(Qe){for(var Ft=Qe.map(Qc),jt=Ft.length,It=Ft[jt-1],Kt,ir=[],mr=0;mr<jt;++mr)Kt=Ft[mr],ir.push(Cc([It[0]*.9486832980505138+Kt[0]*.31622776601683794,It[1]*.9486832980505138+Kt[1]*.31622776601683794,It[2]*.9486832980505138+Kt[2]*.31622776601683794]),Cc([Kt[0]*.9486832980505138+It[0]*.31622776601683794,Kt[1]*.9486832980505138+It[1]*.31622776601683794,Kt[2]*.9486832980505138+It[2]*.31622776601683794])),It=Kt;return ir}),Ce=[],De=[-1,0,0,1,0,1,4,5];Te.forEach(function(Qe,Ft){for(var jt=Kc[Ft],It=jt.length,Kt=Ce[Ft]=[],ir=0;ir<It;++ir)Te.push([jt[ir],Qe[(ir*2+2)%(2*It)],Qe[(ir*2+1)%(2*It)]]),De.push(Ft),Kt.push(kc(Qc(Qe[(ir*2+2)%(2*It)]),Qc(Qe[(ir*2+1)%(2*It)])))});var Ge=Te.map(function(Qe){return{project:de(Qe),face:Qe}});De.forEach(function(Qe,Ft){var jt=Ge[Qe];jt&&(jt.children||(jt.children=[])).push(Ge[Ft])});function He(Qe,Ft){var jt=o(Ft),It=[jt*o(Qe),jt*_(Qe),_(Ft)],Kt=Qe<-b/2?Ft<0?6:4:Qe<0?Ft<0?2:0:Qe<b/2?Ft<0?3:1:Ft<0?7:5,ir=Ce[Kt];return Ge[Jc(ir[0],It)<0?8+3*Kt:Jc(ir[1],It)<0?8+3*Kt+1:Jc(ir[2],It)<0?8+3*Kt+2:Kt]}return Zc(Ge[0],He).angle(-30).scale(110.625).center([0,45])}function Jc(de,Te){for(var Ce=0,De=de.length,Ge=0;Ce<De;++Ce)Ge+=de[Ce]*Te[Ce];return Ge}function kc(de,Te){return[de[1]*Te[2]-de[2]*Te[1],de[2]*Te[0]-de[0]*Te[2],de[0]*Te[1]-de[1]*Te[0]]}function Cc(de){return[a(de[1],de[0])*C,D(f(-1,c(1,de[2])))*C]}function Qc(de){var Te=de[0]*S,Ce=de[1]*S,De=o(Ce);return[De*o(Te),De*_(Te),_(Ce)]}function pf(){}function sc(de){if((Ce=de.length)<4)return!1;for(var Te=0,Ce,De=de[Ce-1][1]*de[0][0]-de[Ce-1][0]*de[0][1];++Te<Ce;)De+=de[Te-1][1]*de[Te][0]-de[Te-1][0]*de[Te][1];return De<=0}function Vv(de,Te){for(var Ce=Te[0],De=Te[1],Ge=!1,He=0,Qe=de.length,Ft=Qe-1;He<Qe;Ft=He++){var jt=de[He],It=jt[0],Kt=jt[1],ir=de[Ft],mr=ir[0],Sr=ir[1];Kt>De^Sr>De&&Ce<(mr-It)*(De-Kt)/(Sr-Kt)+It&&(Ge=!Ge)}return Ge}function Hs(de,Te){var Ce=Te.stream,De;if(!Ce)throw new Error("invalid projection");switch(de&&de.type){case"Feature":De=Bf;break;case"FeatureCollection":De=vv;break;default:De=Uf;break}return De(de,Ce)}function vv(de,Te){return{type:"FeatureCollection",features:de.features.map(function(Ce){return Bf(Ce,Te)})}}function Bf(de,Te){return{type:"Feature",id:de.id,properties:de.properties,geometry:Uf(de.geometry,Te)}}function Nf(de,Te){return{type:"GeometryCollection",geometries:de.geometries.map(function(Ce){return Uf(Ce,Te)})}}function Uf(de,Te){if(!de)return null;if(de.type==="GeometryCollection")return Nf(de,Te);var Ce;switch(de.type){case"Point":Ce=Hu;break;case"MultiPoint":Ce=Hu;break;case"LineString":Ce=Vf;break;case"MultiLineString":Ce=Vf;break;case"Polygon":Ce=Gu;break;case"MultiPolygon":Ce=Gu;break;case"Sphere":Ce=Gu;break;default:return null}return t.geoStream(de,Te(Ce)),Ce.result()}var _s=[],pl=[],Hu={point:function(de,Te){_s.push([de,Te])},result:function(){var de=_s.length?_s.length<2?{type:"Point",coordinates:_s[0]}:{type:"MultiPoint",coordinates:_s}:null;return _s=[],de}},Vf={lineStart:pf,point:function(de,Te){_s.push([de,Te])},lineEnd:function(){_s.length&&(pl.push(_s),_s=[])},result:function(){var de=pl.length?pl.length<2?{type:"LineString",coordinates:pl[0]}:{type:"MultiLineString",coordinates:pl}:null;return pl=[],de}},Gu={polygonStart:pf,lineStart:pf,point:function(de,Te){_s.push([de,Te])},lineEnd:function(){var de=_s.length;if(de){do _s.push(_s[0].slice());while(++de<4);pl.push(_s),_s=[]}},polygonEnd:pf,result:function(){if(!pl.length)return null;var de=[],Te=[];return pl.forEach(function(Ce){sc(Ce)?de.push([Ce]):Te.push(Ce)}),Te.forEach(function(Ce){var De=Ce[0];de.some(function(Ge){if(Vv(Ge[0],De))return Ge.push(Ce),!0})||de.push([Ce])}),pl=[],de.length?de.length>1?{type:"MultiPolygon",coordinates:de}:{type:"Polygon",coordinates:de[0]}:null}};function Ph(de){var Te=de(w,0)[0]-de(-w,0)[0];function Ce(De,Ge){var He=i(De)<w,Qe=de(He?De:De>0?De-b:De+b,Ge),Ft=(Qe[0]-Qe[1])*x,jt=(Qe[0]+Qe[1])*x;if(He)return[Ft,jt];var It=Te*x,Kt=Ft>0^jt>0?-1:1;return[Kt*Ft-p(jt)*It,Kt*jt-p(Ft)*It]}return de.invert&&(Ce.invert=function(De,Ge){var He=(De+Ge)*x,Qe=(Ge-De)*x,Ft=i(He)<.5*Te&&i(Qe)<.5*Te;if(!Ft){var jt=Te*x,It=He>0^Qe>0?-1:1,Kt=-It*De+(Qe>0?1:-1)*jt,ir=-It*Ge+(He>0?1:-1)*jt;He=(-Kt-ir)*x,Qe=(Kt-ir)*x}var mr=de.invert(He,Qe);return Ft||(mr[0]+=He>0?b:-b),mr}),t.geoProjection(Ce).rotate([-90,-90,45]).clipAngle(180-.001)}function Ve(){return Ph(Cr).scale(176.423)}function it(){return Ph(so).scale(111.48)}function Ht(de,Te){if(!(0<=(Te=+Te)&&Te<=20))throw new Error("invalid digits");function Ce(It){var Kt=It.length,ir=2,mr=new Array(Kt);for(mr[0]=+It[0].toFixed(Te),mr[1]=+It[1].toFixed(Te);ir<Kt;)mr[ir]=It[ir],++ir;return mr}function De(It){return It.map(Ce)}function Ge(It){for(var Kt=Ce(It[0]),ir=[Kt],mr=1;mr<It.length;mr++){var Sr=Ce(It[mr]);(Sr.length>2||Sr[0]!=Kt[0]||Sr[1]!=Kt[1])&&(ir.push(Sr),Kt=Sr)}return ir.length===1&&It.length>1&&ir.push(Ce(It[It.length-1])),ir}function He(It){return It.map(Ge)}function Qe(It){if(It==null)return It;var Kt;switch(It.type){case"GeometryCollection":Kt={type:"GeometryCollection",geometries:It.geometries.map(Qe)};break;case"Point":Kt={type:"Point",coordinates:Ce(It.coordinates)};break;case"MultiPoint":Kt={type:It.type,coordinates:De(It.coordinates)};break;case"LineString":Kt={type:It.type,coordinates:Ge(It.coordinates)};break;case"MultiLineString":case"Polygon":Kt={type:It.type,coordinates:He(It.coordinates)};break;case"MultiPolygon":Kt={type:"MultiPolygon",coordinates:It.coordinates.map(He)};break;default:return It}return It.bbox!=null&&(Kt.bbox=It.bbox),Kt}function Ft(It){var Kt={type:"Feature",properties:It.properties,geometry:Qe(It.geometry)};return It.id!=null&&(Kt.id=It.id),It.bbox!=null&&(Kt.bbox=It.bbox),Kt}if(de!=null)switch(de.type){case"Feature":return Ft(de);case"FeatureCollection":{var jt={type:"FeatureCollection",features:de.features.map(Ft)};return de.bbox!=null&&(jt.bbox=de.bbox),jt}default:return Qe(de)}return de}function Rt(de){var Te=_(de);function Ce(De,Ge){var He=Te?T(De*Te/2)/Te:De/2;if(!Ge)return[2*He,-de];var Qe=2*n(He*_(Ge)),Ft=1/T(Ge);return[_(Qe)*Ft,Ge+(1-o(Qe))*Ft-de]}return Ce.invert=function(De,Ge){if(i(Ge+=de)<g)return[Te?2*n(Te*De/2)/Te:De,0];var He=De*De+Ge*Ge,Qe=0,Ft=10,jt;do{var It=T(Qe),Kt=1/o(Qe),ir=He-2*Ge*Qe+Qe*Qe;Qe-=jt=(It*ir+2*(Qe-Ge))/(2+ir*Kt*Kt+2*(Qe-Ge)*It)}while(i(jt)>g&&--Ft>0);var mr=De*(It=T(Qe)),Sr=T(i(Ge)<i(Qe+1/It)?D(mr)*.5:z(mr)*.5+b/4)/_(Qe);return[Te?2*n(Te*Sr)/Te:2*Sr,Qe]},Ce}function lr(){return nt(Rt).scale(131.215)}var Lr=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Lr.forEach(function(de){de[1]*=1.0144});function Fr(de,Te){var Ce=c(18,i(Te)*36/b),De=l(Ce),Ge=Ce-De,He=(ir=Lr[De])[0],Qe=ir[1],Ft=(ir=Lr[++De])[0],jt=ir[1],It=(ir=Lr[c(19,++De)])[0],Kt=ir[1],ir;return[de*(Ft+Ge*(It-He)/2+Ge*Ge*(It-2*Ft+He)/2),(Te>0?w:-w)*(jt+Ge*(Kt-Qe)/2+Ge*Ge*(Kt-2*jt+Qe)/2)]}Fr.invert=function(de,Te){var Ce=Te/w,De=Ce*90,Ge=c(18,i(De/5)),He=f(0,l(Ge));do{var Qe=Lr[He][1],Ft=Lr[He+1][1],jt=Lr[c(19,He+2)][1],It=jt-Qe,Kt=jt-2*Ft+Qe,ir=2*(i(Ce)-Ft)/It,mr=Kt/It,Sr=ir*(1-mr*ir*(1-2*mr*ir));if(Sr>=0||He===1){De=(Te>=0?5:-5)*(Sr+Ge);var Vr=50,sn;do Ge=c(18,i(De)/5),He=l(Ge),Sr=Ge-He,Qe=Lr[He][1],Ft=Lr[He+1][1],jt=Lr[c(19,He+2)][1],De-=(sn=(Te>=0?w:-w)*(Ft+Sr*(jt-Qe)/2+Sr*Sr*(jt-2*Ft+Qe)/2)-Te)*C;while(i(sn)>A&&--Vr>0);break}}while(--He>=0);var kn=Lr[He][0],yi=Lr[He+1][0],Qi=Lr[c(19,He+2)][0];return[de/(yi+Sr*(Qi-kn)/2+Sr*Sr*(Qi-2*yi+kn)/2),De*S]};function Zr(){return t.geoProjection(Fr).scale(152.63)}function nn(de){function Te(Ce,De){var Ge=o(De),He=(de-1)/(de-Ge*o(Ce));return[He*Ge*_(Ce),He*_(De)]}return Te.invert=function(Ce,De){var Ge=Ce*Ce+De*De,He=O(Ge),Qe=(de-O(1-Ge*(de+1)/(de-1)))/((de-1)/He+He/(de-1));return[a(Ce*Qe,He*O(1-Qe*Qe)),He?D(De*Qe/He):0]},Te}function An(de,Te){var Ce=nn(de);if(!Te)return Ce;var De=o(Te),Ge=_(Te);function He(Qe,Ft){var jt=Ce(Qe,Ft),It=jt[1],Kt=It*Ge/(de-1)+De;return[jt[0]*De/Kt,It/Kt]}return He.invert=function(Qe,Ft){var jt=(de-1)/(de-1-Ft*Ge);return Ce.invert(jt*Qe,jt*Ft*De)},He}function Br(){var de=2,Te=0,Ce=t.geoProjectionMutator(An),De=Ce(de,Te);return De.distance=function(Ge){return arguments.length?Ce(de=+Ge,Te):de},De.tilt=function(Ge){return arguments.length?Ce(de,Te=Ge*S):Te*C},De.scale(432.147).clipAngle(z(1/de)*C-1e-6)}var tn=1e-4,rn=1e4,wn=-180,Gn=wn+tn,Oi=180,Ii=Oi-tn,Hi=-90,Ki=Hi+tn,On=90,$n=On-tn;function Ji(de){return de.length>0}function ca(de){return Math.floor(de*rn)/rn}function Ka(de){return de===Hi||de===On?[0,de]:[wn,ca(de)]}function mo(de){var Te=de[0],Ce=de[1],De=!1;return Te<=Gn?(Te=wn,De=!0):Te>=Ii&&(Te=Oi,De=!0),Ce<=Ki?(Ce=Hi,De=!0):Ce>=$n&&(Ce=On,De=!0),De?[Te,Ce]:de}function vo(de){return de.map(mo)}function xo(de,Te,Ce){for(var De=0,Ge=de.length;De<Ge;++De){var He=de[De].slice();Ce.push({index:-1,polygon:Te,ring:He});for(var Qe=0,Ft=He.length;Qe<Ft;++Qe){var jt=He[Qe],It=jt[0],Kt=jt[1];if(It<=Gn||It>=Ii||Kt<=Ki||Kt>=$n){He[Qe]=mo(jt);for(var ir=Qe+1;ir<Ft;++ir){var mr=He[ir],Sr=mr[0],Vr=mr[1];if(Sr>Gn&&Sr<Ii&&Vr>Ki&&Vr<$n)break}if(ir===Qe+1)continue;if(Qe){var sn={index:-1,polygon:Te,ring:He.slice(0,Qe+1)};sn.ring[sn.ring.length-1]=Ka(Kt),Ce[Ce.length-1]=sn}else Ce.pop();if(ir>=Ft)break;Ce.push({index:-1,polygon:Te,ring:He=He.slice(ir-1)}),He[0]=Ka(He[0][1]),Qe=-1,Ft=He.length}}}}function Na(de){var Te,Ce=de.length,De={},Ge={},He,Qe,Ft,jt,It;for(Te=0;Te<Ce;++Te){if(He=de[Te],Qe=He.ring[0],jt=He.ring[He.ring.length-1],Qe[0]===jt[0]&&Qe[1]===jt[1]){He.polygon.push(He.ring),de[Te]=null;continue}He.index=Te,De[Qe]=Ge[jt]=He}for(Te=0;Te<Ce;++Te)if(He=de[Te],He){if(Qe=He.ring[0],jt=He.ring[He.ring.length-1],Ft=Ge[Qe],It=De[jt],delete De[Qe],delete Ge[jt],Qe[0]===jt[0]&&Qe[1]===jt[1]){He.polygon.push(He.ring);continue}Ft?(delete Ge[Qe],delete De[Ft.ring[0]],Ft.ring.pop(),de[Ft.index]=null,He={index:-1,polygon:Ft.polygon,ring:Ft.ring.concat(He.ring)},Ft===It?He.polygon.push(He.ring):(He.index=Ce++,de.push(De[He.ring[0]]=Ge[He.ring[He.ring.length-1]]=He))):It?(delete De[jt],delete Ge[It.ring[It.ring.length-1]],He.ring.pop(),He={index:Ce++,polygon:It.polygon,ring:He.ring.concat(It.ring)},de[It.index]=null,de.push(De[He.ring[0]]=Ge[He.ring[He.ring.length-1]]=He)):(He.ring.push(He.ring[0]),He.polygon.push(He.ring))}}function bs(de){var Te={type:"Feature",geometry:Zo(de.geometry)};return de.id!=null&&(Te.id=de.id),de.bbox!=null&&(Te.bbox=de.bbox),de.properties!=null&&(Te.properties=de.properties),Te}function Zo(de){if(de==null)return de;var Te,Ce,De,Ge;switch(de.type){case"GeometryCollection":Te={type:"GeometryCollection",geometries:de.geometries.map(Zo)};break;case"Point":Te={type:"Point",coordinates:mo(de.coordinates)};break;case"MultiPoint":case"LineString":Te={type:de.type,coordinates:vo(de.coordinates)};break;case"MultiLineString":Te={type:"MultiLineString",coordinates:de.coordinates.map(vo)};break;case"Polygon":{var He=[];xo(de.coordinates,He,Ce=[]),Na(Ce),Te={type:"Polygon",coordinates:He};break}case"MultiPolygon":{Ce=[],De=-1,Ge=de.coordinates.length;for(var Qe=new Array(Ge);++De<Ge;)xo(de.coordinates[De],Qe[De]=[],Ce);Na(Ce),Te={type:"MultiPolygon",coordinates:Qe.filter(Ji)};break}default:return de}return de.bbox!=null&&(Te.bbox=de.bbox),Te}function Bo(de){if(de==null)return de;switch(de.type){case"Feature":return bs(de);case"FeatureCollection":{var Te={type:"FeatureCollection",features:de.features.map(bs)};return de.bbox!=null&&(Te.bbox=de.bbox),Te}default:return Zo(de)}}function hi(de,Te){var Ce=T(Te/2),De=_(k*Ce);return[de*(.74482-.34588*De*De),1.70711*Ce]}hi.invert=function(de,Te){var Ce=Te/1.70711,De=_(k*Ce);return[de/(.74482-.34588*De*De),2*n(Ce)]};function ta(){return t.geoProjection(hi).scale(146.153)}function ws(de,Te,Ce){var De=t.geoInterpolate(Te,Ce),Ge=De(.5),He=t.geoRotation([-Ge[0],-Ge[1]])(Te),Qe=De.distance/2,Ft=-D(_(He[1]*S)/_(Qe)),jt=[-Ge[0],-Ge[1],-(He[0]>0?b-Ft:Ft)*C],It=t.geoProjection(de(Qe)).rotate(jt),Kt=t.geoRotation(jt),ir=It.center;return delete It.rotate,It.center=function(mr){return arguments.length?ir(Kt(mr)):Kt.invert(ir())},It.clipAngle(90)}function Ml(de){var Te=o(de);function Ce(De,Ge){var He=t.geoGnomonicRaw(De,Ge);return He[0]*=Te,He}return Ce.invert=function(De,Ge){return t.geoGnomonicRaw.invert(De/Te,Ge)},Ce}function Yl(){return iu([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function iu(de,Te){return ws(Ml,de,Te)}function Yu(de){if(!(de*=2))return t.geoAzimuthalEquidistantRaw;var Te=-de/2,Ce=-Te,De=de*de,Ge=T(Ce),He=.5/_(Ce);function Qe(Ft,jt){var It=z(o(jt)*o(Ft-Te)),Kt=z(o(jt)*o(Ft-Ce)),ir=jt<0?-1:1;return It*=It,Kt*=Kt,[(It-Kt)/(2*de),ir*O(4*De*Kt-(De-It+Kt)*(De-It+Kt))/(2*de)]}return Qe.invert=function(Ft,jt){var It=jt*jt,Kt=o(O(It+(mr=Ft+Te)*mr)),ir=o(O(It+(mr=Ft+Ce)*mr)),mr,Sr;return[a(Sr=Kt-ir,mr=(Kt+ir)*Ge),(jt<0?-1:1)*z(O(mr*mr+Sr*Sr)*He)]},Qe}function Hf(){return au([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function au(de,Te){return ws(Yu,de,Te)}function Lc(de,Te){if(i(Te)<g)return[de,0];var Ce=i(Te/w),De=D(Ce);if(i(de)<g||i(i(Te)-w)<g)return[0,p(Te)*b*T(De/2)];var Ge=o(De),He=i(b/de-de/b)/2,Qe=He*He,Ft=Ge/(Ce+Ge-1),jt=Ft*(2/Ce-1),It=jt*jt,Kt=It+Qe,ir=Ft-It,mr=Qe+Ft;return[p(de)*b*(He*ir+O(Qe*ir*ir-Kt*(Ft*Ft-It)))/Kt,p(Te)*b*(jt*mr-He*O((Qe+1)*Kt-mr*mr))/Kt]}Lc.invert=function(de,Te){if(i(Te)<g)return[de,0];if(i(de)<g)return[0,w*_(2*n(Te/b))];var Ce=(de/=b)*de,De=(Te/=b)*Te,Ge=Ce+De,He=Ge*Ge,Qe=-i(Te)*(1+Ge),Ft=Qe-2*De+Ce,jt=-2*Qe+1+2*De+He,It=De/jt+(2*Ft*Ft*Ft/(jt*jt*jt)-9*Qe*Ft/(jt*jt))/27,Kt=(Qe-Ft*Ft/(3*jt))/jt,ir=2*O(-Kt/3),mr=z(3*It/(Kt*ir))/3;return[b*(Ge-1+O(1+2*(Ce-De)+He))/(2*de),p(Te)*b*(-ir*o(mr+b/3)-Ft/(3*jt))]};function Pc(){return t.geoProjection(Lc).scale(79.4183)}function lc(de,Te){if(i(Te)<g)return[de,0];var Ce=i(Te/w),De=D(Ce);if(i(de)<g||i(i(Te)-w)<g)return[0,p(Te)*b*T(De/2)];var Ge=o(De),He=i(b/de-de/b)/2,Qe=He*He,Ft=Ge*(O(1+Qe)-He*Ge)/(1+Qe*Ce*Ce);return[p(de)*b*Ft,p(Te)*b*O(1-Ft*(2*He+Ft))]}lc.invert=function(de,Te){if(!de)return[0,w*_(2*n(Te/b))];var Ce=i(de/b),De=(1-Ce*Ce-(Te/=b)*Te)/(2*Ce),Ge=De*De,He=O(Ge+1);return[p(de)*b*(He-De),p(Te)*w*_(2*a(O((1-2*De*Ce)*(De+He)-Ce),O(He+De+Ce)))]};function Rh(){return t.geoProjection(lc).scale(79.4183)}function $c(de,Te){if(i(Te)<g)return[de,0];var Ce=Te/w,De=D(Ce);if(i(de)<g||i(i(Te)-w)<g)return[0,b*T(De/2)];var Ge=(b/de-de/b)/2,He=Ce/(1+o(De));return[b*(p(de)*O(Ge*Ge+1-He*He)-Ge),b*He]}$c.invert=function(de,Te){if(!Te)return[de,0];var Ce=Te/b,De=(b*b*(1-Ce*Ce)-de*de)/(2*b*de);return[de?b*(p(de)*O(De*De+1)-De):0,w*_(2*n(Ce))]};function uc(){return t.geoProjection($c).scale(79.4183)}function gf(de,Te){if(!Te)return[de,0];var Ce=i(Te);if(!de||Ce===w)return[0,Te];var De=Ce/w,Ge=De*De,He=(8*De-Ge*(Ge+2)-5)/(2*Ge*(De-1)),Qe=He*He,Ft=De*He,jt=Ge+Qe+2*Ft,It=De+3*He,Kt=de/w,ir=Kt+1/Kt,mr=p(i(de)-w)*O(ir*ir-4),Sr=mr*mr,Vr=jt*(Ge+Qe*Sr-1)+(1-Ge)*(Ge*(It*It+4*Qe)+12*Ft*Qe+4*Qe*Qe),sn=(mr*(jt+Qe-1)+2*O(Vr))/(4*jt+Sr);return[p(de)*w*sn,p(Te)*w*O(1+mr*i(sn)-sn*sn)]}gf.invert=function(de,Te){var Ce;if(!de||!Te)return[de,Te];Te/=b;var De=p(de)*de/w,Ge=(De*De-1+4*Te*Te)/i(De),He=Ge*Ge,Qe=2*Te,Ft=50;do{var jt=Qe*Qe,It=(8*Qe-jt*(jt+2)-5)/(2*jt*(Qe-1)),Kt=(3*Qe-jt*Qe-10)/(2*jt*Qe),ir=It*It,mr=Qe*It,Sr=Qe+It,Vr=Sr*Sr,sn=Qe+3*It,kn=Vr*(jt+ir*He-1)+(1-jt)*(jt*(sn*sn+4*ir)+ir*(12*mr+4*ir)),yi=-2*Sr*(4*mr*ir+(1-4*jt+3*jt*jt)*(1+Kt)+ir*(-6+14*jt-He+(-8+8*jt-2*He)*Kt)+mr*(-8+12*jt+(-10+10*jt-He)*Kt)),Qi=O(kn),ra=Ge*(Vr+ir-1)+2*Qi-De*(4*Vr+He),sa=Ge*(2*It*Kt+2*Sr*(1+Kt))+yi/Qi-8*Sr*(Ge*(-1+ir+Vr)+2*Qi)*(1+Kt)/(He+4*Vr);Qe-=Ce=ra/sa}while(Ce>g&&--Ft>0);return[p(de)*(O(Ge*Ge+4)+Ge)*b/4,w*Qe]};function Wu(){return t.geoProjection(gf).scale(127.16)}function Dh(de,Te,Ce,De,Ge){function He(Qe,Ft){var jt=Ce*_(De*Ft),It=O(1-jt*jt),Kt=O(2/(1+It*o(Qe*=Ge)));return[de*It*Kt*_(Qe),Te*jt*Kt]}return He.invert=function(Qe,Ft){var jt=Qe/de,It=Ft/Te,Kt=O(jt*jt+It*It),ir=2*D(Kt/2);return[a(Qe*T(ir),de*Kt)/Ge,Kt&&D(Ft*_(ir)/(Te*Ce*Kt))/De]},He}function Hv(de,Te,Ce,De){var Ge=b/3;de=f(de,g),Te=f(Te,g),de=c(de,w),Te=c(Te,b-g),Ce=f(Ce,0),Ce=c(Ce,100-g),De=f(De,g);var He=Ce/100+1,Qe=De/100,Ft=z(He*o(Ge))/Ge,jt=_(de)/_(Ft*w),It=Te/b,Kt=O(Qe*_(de/2)/_(Te/2)),ir=Kt/O(It*jt*Ft),mr=1/(Kt*O(It*jt*Ft));return Dh(ir,mr,jt,Ft,It)}function Ih(){var de=65*S,Te=60*S,Ce=20,De=200,Ge=t.geoProjectionMutator(Hv),He=Ge(de,Te,Ce,De);return He.poleline=function(Qe){return arguments.length?Ge(de=+Qe*S,Te,Ce,De):de*C},He.parallels=function(Qe){return arguments.length?Ge(de,Te=+Qe*S,Ce,De):Te*C},He.inflation=function(Qe){return arguments.length?Ge(de,Te,Ce=+Qe,De):Ce},He.ratio=function(Qe){return arguments.length?Ge(de,Te,Ce,De=+Qe):De},He.scale(163.775)}function Gv(){return Ih().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Rc=4*b+3*O(3),Mu=2*O(2*b*O(3)/Rc),eh=Ke(Mu*O(3)/b,Mu,Rc/6);function th(){return t.geoProjection(eh).scale(176.84)}function rh(de,Te){return[de*O(1-3*Te*Te/(b*b)),Te]}rh.invert=function(de,Te){return[de/O(1-3*Te*Te/(b*b)),Te]};function Gf(){return t.geoProjection(rh).scale(152.63)}function Fh(de,Te){var Ce=o(Te),De=o(de)*Ce,Ge=1-De,He=o(de=a(_(de)*Ce,-_(Te))),Qe=_(de);return Ce=O(1-De*De),[Qe*Ce-He*Ge,-He*Ce-Qe*Ge]}Fh.invert=function(de,Te){var Ce=(de*de+Te*Te)/-2,De=O(-Ce*(2+Ce)),Ge=Te*Ce+de*De,He=de*Ce-Te*De,Qe=O(He*He+Ge*Ge);return[a(De*Ge,Qe*(1+Ce)),Qe?-D(De*He/Qe):0]};function Yv(){return t.geoProjection(Fh).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function qh(de,Te){var Ce=le(de,Te);return[(Ce[0]+de/w)/2,(Ce[1]+Te)/2]}qh.invert=function(de,Te){var Ce=de,De=Te,Ge=25;do{var He=o(De),Qe=_(De),Ft=_(2*De),jt=Qe*Qe,It=He*He,Kt=_(Ce),ir=o(Ce/2),mr=_(Ce/2),Sr=mr*mr,Vr=1-It*ir*ir,sn=Vr?z(He*ir)*O(kn=1/Vr):kn=0,kn,yi=.5*(2*sn*He*mr+Ce/w)-de,Qi=.5*(sn*Qe+De)-Te,ra=.5*kn*(It*Sr+sn*He*ir*jt)+.5/w,sa=kn*(Kt*Ft/4-sn*Qe*mr),pa=.125*kn*(Ft*mr-sn*Qe*It*Kt),Lo=.5*kn*(jt*ir+sn*Sr*He)+.5,jo=sa*pa-Lo*ra,ba=(Qi*sa-yi*Lo)/jo,qa=(yi*pa-Qi*ra)/jo;Ce-=ba,De-=qa}while((i(ba)>g||i(qa)>g)&&--Ge>0);return[Ce,De]};function ou(){return t.geoProjection(qh).scale(158.837)}e.geoNaturalEarth=t.geoNaturalEarth1,e.geoNaturalEarthRaw=t.geoNaturalEarth1Raw,e.geoAiry=re,e.geoAiryRaw=J,e.geoAitoff=fe,e.geoAitoffRaw=le,e.geoArmadillo=X,e.geoArmadilloRaw=K,e.geoAugust=oe,e.geoAugustRaw=ae,e.geoBaker=ie,e.geoBakerRaw=he,e.geoBerghaus=ue,e.geoBerghausRaw=ye,e.geoBertin1953=dt,e.geoBertin1953Raw=Ie,e.geoBoggs=ht,e.geoBoggsRaw=je,e.geoBonne=ft,e.geoBonneRaw=Xe,e.geoBottomley=Qt,e.geoBottomleyRaw=gt,e.geoBromley=fr,e.geoBromleyRaw=Jt,e.geoChamberlin=xe,e.geoChamberlinRaw=xt,e.geoChamberlinAfrica=Je,e.geoCollignon=ge,e.geoCollignonRaw=ce,e.geoCraig=yt,e.geoCraigRaw=qe,e.geoCraster=br,e.geoCrasterRaw=Ut,e.geoCylindricalEqualArea=Or,e.geoCylindricalEqualAreaRaw=xr,e.geoCylindricalStereographic=gr,e.geoCylindricalStereographicRaw=Hr,e.geoEckert1=_n,e.geoEckert1Raw=Ur,e.geoEckert2=xn,e.geoEckert2Raw=si,e.geoEckert3=Wi,e.geoEckert3Raw=ci,e.geoEckert4=Zi,e.geoEckert4Raw=oi,e.geoEckert5=at,e.geoEckert5Raw=Ei,e.geoEckert6=st,e.geoEckert6Raw=Ne,e.geoEisenlohr=tr,e.geoEisenlohrRaw=Ot,e.geoFahey=Rr,e.geoFaheyRaw=hr,e.geoFoucaut=Yr,e.geoFoucautRaw=Gr,e.geoFoucautSinusoidal=Wr,e.geoFoucautSinusoidalRaw=vn,e.geoGilbert=Mi,e.geoGingery=Ra,e.geoGingeryRaw=Ui,e.geoGinzburg4=zi,e.geoGinzburg4Raw=Yn,e.geoGinzburg5=zn,e.geoGinzburg5Raw=ya,e.geoGinzburg6=Bt,e.geoGinzburg6Raw=Ze,e.geoGinzburg8=_r,e.geoGinzburg8Raw=sr,e.geoGinzburg9=on,e.geoGinzburg9Raw=Jr,e.geoGringorten=Hn,e.geoGringortenRaw=Cr,e.geoGuyou=Uo,e.geoGuyouRaw=so,e.geoHammer=ze,e.geoHammerRaw=Ae,e.geoHammerRetroazimuthal=il,e.geoHammerRetroazimuthalRaw=ms,e.geoHealpix=Al,e.geoHealpixRaw=hs,e.geoHill=Nu,e.geoHillRaw=$l,e.geoHomolosine=ss,e.geoHomolosineRaw=Pl,e.geoHufnagel=$o,e.geoHufnagelRaw=vl,e.geoHyperelliptical=Aa,e.geoHyperellipticalRaw=ni,e.geoInterrupt=Ma,e.geoInterruptedBoggs=Wc,e.geoInterruptedHomolosine=ff,e.geoInterruptedMollweide=ko,e.geoInterruptedMollweideHemispheres=_u,e.geoInterruptedSinuMollweide=Uu,e.geoInterruptedSinusoidal=Ac,e.geoKavrayskiy7=Df,e.geoKavrayskiy7Raw=lo,e.geoLagrange=Us,e.geoLagrangeRaw=Mh,e.geoLarrivee=cf,e.geoLarriveeRaw=Sh,e.geoLaskowski=vs,e.geoLaskowskiRaw=To,e.geoLittrow=Co,e.geoLittrowRaw=po,e.geoLoximuthal=qs,e.geoLoximuthalRaw=Mc,e.geoMiller=hf,e.geoMillerRaw=Vl,e.geoModifiedStereographic=wu,e.geoModifiedStereographicRaw=_d,e.geoModifiedStereographicAlaska=vf,e.geoModifiedStereographicGs48=Gl,e.geoModifiedStereographicGs50=iv,e.geoModifiedStereographicMiller=Eh,e.geoModifiedStereographicLee=av,e.geoMollweide=zt,e.geoMollweideRaw=_t,e.geoMtFlatPolarParabolic=sv,e.geoMtFlatPolarParabolicRaw=kh,e.geoMtFlatPolarQuartic=Hd,e.geoMtFlatPolarQuarticRaw=bd,e.geoMtFlatPolarSinusoidal=Fv,e.geoMtFlatPolarSinusoidalRaw=If,e.geoNaturalEarth2=Ch,e.geoNaturalEarth2Raw=oc,e.geoNellHammer=Sc,e.geoNellHammerRaw=Vu,e.geoInterruptedQuarticAuthalic=qv,e.geoNicolosi=Ov,e.geoNicolosiRaw=zv,e.geoPatterson=zf,e.geoPattersonRaw=Xc,e.geoPolyconic=zs,e.geoPolyconicRaw=Dl,e.geoPolyhedral=Zc,e.geoPolyhedralButterfly=Of,e.geoPolyhedralCollignon=wd,e.geoPolyhedralWaterman=Oo,e.geoProject=Hs,e.geoGringortenQuincuncial=Ve,e.geoPeirceQuincuncial=it,e.geoPierceQuincuncial=it,e.geoQuantize=Ht,e.geoQuincuncial=Ph,e.geoRectangularPolyconic=lr,e.geoRectangularPolyconicRaw=Rt,e.geoRobinson=Zr,e.geoRobinsonRaw=Fr,e.geoSatellite=Br,e.geoSatelliteRaw=An,e.geoSinuMollweide=ac,e.geoSinuMollweideRaw=bi,e.geoSinusoidal=rt,e.geoSinusoidalRaw=lt,e.geoStitch=Bo,e.geoTimes=ta,e.geoTimesRaw=hi,e.geoTwoPointAzimuthal=iu,e.geoTwoPointAzimuthalRaw=Ml,e.geoTwoPointAzimuthalUsa=Yl,e.geoTwoPointEquidistant=au,e.geoTwoPointEquidistantRaw=Yu,e.geoTwoPointEquidistantUsa=Hf,e.geoVanDerGrinten=Pc,e.geoVanDerGrintenRaw=Lc,e.geoVanDerGrinten2=Rh,e.geoVanDerGrinten2Raw=lc,e.geoVanDerGrinten3=uc,e.geoVanDerGrinten3Raw=$c,e.geoVanDerGrinten4=Wu,e.geoVanDerGrinten4Raw=gf,e.geoWagner=Ih,e.geoWagner7=Gv,e.geoWagnerRaw=Hv,e.geoWagner4=th,e.geoWagner4Raw=eh,e.geoWagner6=Gf,e.geoWagner6Raw=rh,e.geoWiechel=Yv,e.geoWiechelRaw=Fh,e.geoWinkel3=ou,e.geoWinkel3Raw=qh,Object.defineProperty(e,"__esModule",{value:!0})})});var uRe=ne((kdr,lRe)=>{"use strict";var Cf=Ai(),NY=Wt(),iFt=wi(),N3=Math.PI/180,z_=180/Math.PI,VY={cursor:"pointer"},HY={cursor:"auto"};function aFt(e,t){var r=e.projection,i;return t._isScoped?i=oFt:t._isClipped?i=lFt:i=sFt,i(e,r)}lRe.exports=aFt;function GY(e,t){return Cf.behavior.zoom().translate(t.translate()).scale(t.scale())}function YY(e,t,r){var i=e.id,n=e.graphDiv,a=n.layout,o=a[i],s=n._fullLayout,l=s[i],u={},f={};function c(h,v){u[i+"."+h]=NY.nestedProperty(o,h).get(),iFt.call("_storeDirectGUIEdit",a,s._preGUI,u);var p=NY.nestedProperty(l,h);p.get()!==v&&(p.set(v),NY.nestedProperty(o,h).set(v),f[i+"."+h]=v)}r(c),c("projection.scale",t.scale()/e.fitScale),c("fitbounds",!1),n.emit("plotly_relayout",f)}function oFt(e,t){var r=GY(e,t);function i(){Cf.select(this).style(VY)}function n(){t.scale(Cf.event.scale).translate(Cf.event.translate),e.render(!0);var s=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}function a(s){var l=t.invert(e.midPt);s("center.lon",l[0]),s("center.lat",l[1])}function o(){Cf.select(this).style(HY),YY(e,t,a)}return r.on("zoomstart",i).on("zoom",n).on("zoomend",o),r}function sFt(e,t){var r=GY(e,t),i=2,n,a,o,s,l,u,f,c,h;function v(b){return t.invert(b)}function p(b){var w=v(b);if(!w)return!0;var k=t(w);return Math.abs(k[0]-b[0])>i||Math.abs(k[1]-b[1])>i}function _(){Cf.select(this).style(VY),n=Cf.mouse(this),a=t.rotate(),o=t.translate(),s=a,l=v(n)}function T(){if(u=Cf.mouse(this),p(n)){r.scale(t.scale()),r.translate(t.translate());return}t.scale(Cf.event.scale),t.translate([o[0],Cf.event.translate[1]]),l?v(u)&&(c=v(u),f=[s[0]+(c[0]-l[0]),a[1],a[2]],t.rotate(f),s=f):(n=u,l=v(n)),h=!0,e.render(!0);var b=t.rotate(),w=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":w[0],"geo.center.lat":w[1],"geo.projection.rotation.lon":-b[0]})}function g(){Cf.select(this).style(HY),h&&YY(e,t,A)}function A(b){var w=t.rotate(),k=t.invert(e.midPt);b("projection.rotation.lon",-w[0]),b("center.lon",k[0]),b("center.lat",k[1])}return r.on("zoomstart",_).on("zoom",T).on("zoomend",g),r}function lFt(e,t){var r={r:t.rotate(),k:t.scale()},i=GY(e,t),n=gFt(i,"zoomstart","zoom","zoomend"),a=0,o=i.on,s;i.on("zoomstart",function(){Cf.select(this).style(VY);var h=Cf.mouse(this),v=t.rotate(),p=v,_=t.translate(),T=uFt(v);s=ID(t,h),o.call(i,"zoom",function(){var g=Cf.mouse(this);if(t.scale(r.k=Cf.event.scale),!s)h=g,s=ID(t,h);else if(ID(t,g)){t.rotate(v).translate(_);var A=ID(t,g),b=cFt(s,A),w=vFt(fFt(T,b)),k=r.r=hFt(w,s,p);(!isFinite(k[0])||!isFinite(k[1])||!isFinite(k[2]))&&(k=p),t.rotate(k),p=k}u(n.of(this,arguments))}),l(n.of(this,arguments))}).on("zoomend",function(){Cf.select(this).style(HY),o.call(i,"zoom",null),f(n.of(this,arguments)),YY(e,t,c)}).on("zoom.redraw",function(){e.render(!0);var h=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-h[0],"geo.projection.rotation.lat":-h[1]})});function l(h){a++||h({type:"zoomstart"})}function u(h){h({type:"zoom"})}function f(h){--a||h({type:"zoomend"})}function c(h){var v=t.rotate();h("projection.rotation.lon",-v[0]),h("projection.rotation.lat",-v[1])}return Cf.rebind(i,n,"on")}function ID(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&dFt(r)}function uFt(e){var t=.5*e[0]*N3,r=.5*e[1]*N3,i=.5*e[2]*N3,n=Math.sin(t),a=Math.cos(t),o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i);return[a*s*u+n*o*l,n*s*u-a*o*l,a*o*u+n*s*l,a*s*l-n*o*u]}function fFt(e,t){var r=e[0],i=e[1],n=e[2],a=e[3],o=t[0],s=t[1],l=t[2],u=t[3];return[r*o-i*s-n*l-a*u,r*s+i*o+n*u-a*l,r*l-i*u+n*o+a*s,r*u+i*l-n*s+a*o]}function cFt(e,t){if(!(!e||!t)){var r=pFt(e,t),i=Math.sqrt(sRe(r,r)),n=.5*Math.acos(Math.max(-1,Math.min(1,sRe(e,t)))),a=Math.sin(n)/i;return i&&[Math.cos(n),r[2]*a,-r[1]*a,r[0]*a]}}function hFt(e,t,r){var i=UY(t,2,e[0]);i=UY(i,1,e[1]),i=UY(i,0,e[2]-r[2]);var n=t[0],a=t[1],o=t[2],s=i[0],l=i[1],u=i[2],f=Math.atan2(a,n)*z_,c=Math.sqrt(n*n+a*a),h,v;Math.abs(l)>c?(v=(l>0?90:-90)-f,h=0):(v=Math.asin(l/c)*z_-f,h=Math.sqrt(c*c-l*l));var p=180-v-2*f,_=(Math.atan2(u,s)-Math.atan2(o,h))*z_,T=(Math.atan2(u,s)-Math.atan2(o,-h))*z_,g=aRe(r[0],r[1],v,_),A=aRe(r[0],r[1],p,T);return g<=A?[v,_,r[2]]:[p,T,r[2]]}function aRe(e,t,r,i){var n=oRe(r-e),a=oRe(i-t);return Math.sqrt(n*n+a*a)}function oRe(e){return(e%360+540)%360-180}function UY(e,t,r){var i=r*N3,n=e.slice(),a=t===0?1:0,o=t===2?1:2,s=Math.cos(i),l=Math.sin(i);return n[a]=e[a]*s-e[o]*l,n[o]=e[o]*s+e[a]*l,n}function vFt(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*z_,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*z_,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*z_]}function dFt(e){var t=e[0]*N3,r=e[1]*N3,i=Math.cos(r);return[i*Math.cos(t),i*Math.sin(t),Math.sin(r)]}function sRe(e,t){for(var r=0,i=0,n=e.length;i<n;++i)r+=e[i]*t[i];return r}function pFt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gFt(e){for(var t=0,r=arguments.length,i=[];++t<r;)i.push(arguments[t]);var n=Cf.dispatch.apply(null,i);return n.of=function(a,o){return function(s){var l;try{l=s.sourceEvent=Cf.event,s.target=e,Cf.event=s,n[s.type].apply(a,o)}finally{Cf.event=l}}},n}});var gRe=ne((Cdr,pRe)=>{"use strict";var gy=Ai(),ZY=BY(),yFt=ZY.geoPath,mFt=ZY.geoDistance,xFt=iRe(),_Ft=wi(),GE=Wt(),bFt=GE.strTranslate,FD=_i(),HE=aa(),fRe=Ol(),wFt=Zs(),XY=Xi(),cRe=Cd().getAutoRange,WY=Hh(),TFt=Mf().prepSelect,AFt=Mf().clearOutline,MFt=Mf().selectOnClick,SFt=uRe(),kv=qE(),EFt=B3(),vRe=xD(),kFt=cY().feature;function dRe(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var k0=dRe.prototype;pRe.exports=function(t){return new dRe(t)};k0.plot=function(e,t,r,i){var n=this;if(i)return n.update(e,t,!0);n._geoCalcData=e,n._fullLayout=t;var a=t[this.id],o=[],s=!1;for(var l in kv.layerNameToAdjective)if(l!=="frame"&&a["show"+l]){s=!0;break}for(var u=!1,f=0;f<e.length;f++){var c=e[0][0].trace;c._geo=n,c.locationmode&&(s=!0);var h=c.marker;if(h){var v=h.angle,p=h.angleref;(v||p==="north"||p==="previous")&&(u=!0)}}if(this._hasMarkerAngles=u,s){var _=vRe.getTopojsonName(a);(n.topojson===null||_!==n.topojsonName)&&(n.topojsonName=_,PlotlyGeoAssets.topojson[n.topojsonName]===void 0&&o.push(n.fetchTopojson()))}o=o.concat(EFt.fetchTraceGeoData(e)),r.push(new Promise(function(T,g){Promise.all(o).then(function(){n.topojson=PlotlyGeoAssets.topojson[n.topojsonName],n.update(e,t),T()}).catch(g)}))};k0.fetchTopojson=function(){var e=this,t=vRe.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise(function(r,i){gy.json(t,function(n,a){if(n)return n.status===404?i(new Error(["plotly.js could not find topojson file at",t+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):i(new Error(["unexpected error while fetching topojson file at",t].join(" ")));PlotlyGeoAssets.topojson[e.topojsonName]=a,r()})})};k0.update=function(e,t,r){var i=t[this.id];this.hasChoropleth=!1;for(var n=0;n<e.length;n++){var a=e[n],o=a[0].trace;o.type==="choropleth"&&(this.hasChoropleth=!0),o.visible===!0&&o._length>0&&o._module.calcGeoJSON(a,t)}if(!r){var s=this.updateProjection(e,t);if(s)return;(!this.viewInitial||this.scope!==i.scope)&&this.saveViewInitial(i)}this.scope=i.scope,this.updateBaseLayers(t,i),this.updateDims(t,i),this.updateFx(t,i),wFt.generalUpdatePerTraceModule(this.graphDiv,this,e,i);var l=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=l.selectAll(".point"),this.dataPoints.text=l.selectAll("text"),this.dataPaths.line=l.selectAll(".js-line");var u=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=u.selectAll("path"),this._render()};k0.updateProjection=function(e,t){var r=this.graphDiv,i=t[this.id],n=t._size,a=i.domain,o=i.projection,s=i.lonaxis,l=i.lataxis,u=s._ax,f=l._ax,c=this.projection=CFt(i),h=[[n.l+n.w*a.x[0],n.t+n.h*(1-a.y[1])],[n.l+n.w*a.x[1],n.t+n.h*(1-a.y[0])]],v=i.center||{},p=o.rotation||{},_=s.range||[],T=l.range||[];if(i.fitbounds){u._length=h[1][0]-h[0][0],f._length=h[1][1]-h[0][1],u.range=cRe(r,u),f.range=cRe(r,f);var g=(u.range[0]+u.range[1])/2,A=(f.range[0]+f.range[1])/2;if(i._isScoped)v={lon:g,lat:A};else if(i._isClipped){v={lon:g,lat:A},p={lon:g,lat:A,roll:p.roll};var b=o.type,w=kv.lonaxisSpan[b]/2||180,k=kv.lataxisSpan[b]/2||90;_=[g-w,g+w],T=[A-k,A+k]}else v={lon:g,lat:A},p={lon:g,lat:p.lat,roll:p.roll}}c.center([v.lon-p.lon,v.lat-p.lat]).rotate([-p.lon,-p.lat,p.roll]).parallels(o.parallels);var x=hRe(_,T);c.fitExtent(h,x);var E=this.bounds=c.getBounds(x),M=this.fitScale=c.scale(),d=c.translate();if(i.fitbounds){var C=c.getBounds(hRe(u.range,f.range)),S=Math.min((E[1][0]-E[0][0])/(C[1][0]-C[0][0]),(E[1][1]-E[0][1])/(C[1][1]-C[0][1]));isFinite(S)?c.scale(S*M):GE.warn("Something went wrong during"+this.id+"fitbounds computations.")}else c.scale(o.scale*M);var P=this.midPt=[(E[0][0]+E[1][0])/2,(E[0][1]+E[1][1])/2];if(c.translate([d[0]+(P[0]-d[0]),d[1]+(P[1]-d[1])]).clipExtent(E),i._isAlbersUsa){var D=c([v.lon,v.lat]),z=c.translate();c.translate([z[0]-(D[0]-z[0]),z[1]-(D[1]-z[1])])}};k0.updateBaseLayers=function(e,t){var r=this,i=r.topojson,n=r.layers,a=r.basePaths;function o(h){return h==="lonaxis"||h==="lataxis"}function s(h){return!!kv.lineLayers[h]}function l(h){return!!kv.fillLayers[h]}var u=this.hasChoropleth?kv.layersForChoropleth:kv.layers,f=u.filter(function(h){return s(h)||l(h)?t["show"+h]:o(h)?t[h].showgrid:!0}),c=r.framework.selectAll(".layer").data(f,String);c.exit().each(function(h){delete n[h],delete a[h],gy.select(this).remove()}),c.enter().append("g").attr("class",function(h){return"layer "+h}).each(function(h){var v=n[h]=gy.select(this);h==="bg"?r.bgRect=v.append("rect").style("pointer-events","all"):o(h)?a[h]=v.append("path").style("fill","none"):h==="backplot"?v.append("g").classed("choroplethlayer",!0):h==="frontplot"?v.append("g").classed("scatterlayer",!0):s(h)?a[h]=v.append("path").style("fill","none").style("stroke-miterlimit",2):l(h)&&(a[h]=v.append("path").style("stroke","none"))}),c.order(),c.each(function(h){var v=a[h],p=kv.layerNameToAdjective[h];h==="frame"?v.datum(kv.sphereSVG):s(h)||l(h)?v.datum(kFt(i,i.objects[h])):o(h)&&v.datum(LFt(h,t,e)).call(FD.stroke,t[h].gridcolor).call(HE.dashLine,t[h].griddash,t[h].gridwidth),s(h)?v.call(FD.stroke,t[p+"color"]).call(HE.dashLine,"",t[p+"width"]):l(h)&&v.call(FD.fill,t[p+"color"])})};k0.updateDims=function(e,t){var r=this.bounds,i=(t.framewidth||0)/2,n=r[0][0]-i,a=r[0][1]-i,o=r[1][0]-n+i,s=r[1][1]-a+i;HE.setRect(this.clipRect,n,a,o,s),this.bgRect.call(HE.setRect,n,a,o,s).call(FD.fill,t.bgcolor),this.xaxis._offset=n,this.xaxis._length=o,this.yaxis._offset=a,this.yaxis._length=s};k0.updateFx=function(e,t){var r=this,i=r.graphDiv,n=r.bgRect,a=e.dragmode,o=e.clickmode;if(r.isStatic)return;function s(){var c=r.viewInitial,h={};for(var v in c)h[r.id+"."+v]=c[v];_Ft.call("_guiRelayout",i,h),i.emit("plotly_doubleclick",null)}function l(c){return r.projection.invert([c[0]+r.xaxis._offset,c[1]+r.yaxis._offset])}var u=function(c,h){if(h.isRect){var v=c.range={};v[r.id]=[l([h.xmin,h.ymin]),l([h.xmax,h.ymax])]}else{var p=c.lassoPoints={};p[r.id]=h.map(l)}},f={element:r.bgRect.node(),gd:i,plotinfo:{id:r.id,xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:u},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(c){c===2&&AFt(i)}};a==="pan"?(n.node().onmousedown=null,n.call(SFt(r,t)),n.on("dblclick.zoom",s),i._context._scrollZoom.geo||n.on("wheel.zoom",null)):(a==="select"||a==="lasso")&&(n.on(".zoom",null),f.prepFn=function(c,h,v){TFt(c,h,v,f,a)},WY.init(f)),n.on("mousemove",function(){var c=r.projection.invert(GE.getPositionFromD3Event());if(!c)return WY.unhover(i,gy.event);r.xaxis.p2c=function(){return c[0]},r.yaxis.p2c=function(){return c[1]},fRe.hover(i,gy.event,r.id)}),n.on("mouseout",function(){i._dragging||WY.unhover(i,gy.event)}),n.on("click",function(){a!=="select"&&a!=="lasso"&&(o.indexOf("select")>-1&&MFt(gy.event,i,[r.xaxis],[r.yaxis],r.id,f),o.indexOf("event")>-1&&fRe.click(i,gy.event))})};k0.makeFramework=function(){var e=this,t=e.graphDiv,r=t._fullLayout,i="clip"+r._uid+e.id;e.clipDef=r._clips.append("clipPath").attr("id",i),e.clipRect=e.clipDef.append("rect"),e.framework=gy.select(e.container).append("g").attr("class","geo "+e.id).call(HE.setClipUrl,i,t),e.project=function(n){var a=e.projection(n);return a?[a[0]-e.xaxis._offset,a[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(n){return e.project(n)[0]}},e.yaxis={_id:"y",c2p:function(n){return e.project(n)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},XY.setConvert(e.mockAxis,r)};k0.saveViewInitial=function(e){var t=e.center||{},r=e.projection,i=r.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":r.scale};var n;e._isScoped?n={"center.lon":t.lon,"center.lat":t.lat}:e._isClipped?n={"projection.rotation.lon":i.lon,"projection.rotation.lat":i.lat}:n={"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":i.lon},GE.extendFlat(this.viewInitial,n)};k0.render=function(e){this._hasMarkerAngles&&e?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()};k0._render=function(){var e=this.projection,t=e.getPath(),r;function i(a){var o=e(a.lonlat);return o?bFt(o[0],o[1]):null}function n(a){return e.isLonLatOverEdges(a.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",t);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(a){return t(a.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",n).attr("transform",i)};function CFt(e){var t=e.projection,r=t.type,i=kv.projNames[r];i="geo"+GE.titleCase(i);for(var n=ZY[i]||xFt[i],a=n(),o=e._isSatellite?Math.acos(1/t.distance)*180/Math.PI:e._isClipped?kv.lonaxisSpan[r]/2:null,s=["center","rotate","parallels","clipExtent"],l=function(c){return c?a:[]},u=0;u<s.length;u++){var f=s[u];typeof a[f]!="function"&&(a[f]=l)}return a.isLonLatOverEdges=function(c){if(a(c)===null)return!0;if(o){var h=a.rotate(),v=mFt(c,[-h[0],-h[1]]),p=o*Math.PI/180;return v>p}else return!1},a.getPath=function(){return yFt().projection(a)},a.getBounds=function(c){return a.getPath().bounds(c)},a.precision(kv.precision),e._isSatellite&&a.tilt(t.tilt).distance(t.distance),o&&a.clipAngle(o-kv.clipPad),a}function LFt(e,t,r){var i=1e-6,n=2.5,a=t[e],o=kv.scopeDefaults[t.scope],s,l,u;e==="lonaxis"?(s=o.lonaxisRange,l=o.lataxisRange,u=function(A,b){return[A,b]}):e==="lataxis"&&(s=o.lataxisRange,l=o.lonaxisRange,u=function(A,b){return[b,A]});var f={type:"linear",range:[s[0],s[1]-i],tick0:a.tick0,dtick:a.dtick};XY.setConvert(f,r);var c=XY.calcTicks(f);!t.isScoped&&e==="lonaxis"&&c.pop();for(var h=c.length,v=new Array(h),p=0;p<h;p++)for(var _=c[p].x,T=v[p]=[],g=l[0];g<l[1]+n;g+=n)T.push(u(_,g));return{type:"MultiLineString",coordinates:v}}function hRe(e,t){var r=kv.clipPad,i=e[0]+r,n=e[1]-r,a=t[0]+r,o=t[1]-r;i>0&&n<0&&(n+=360);var s=(n-i)/4;return{type:"Polygon",coordinates:[[[i,a],[i,o],[i+s,o],[i+2*s,o],[i+3*s,o],[n,o],[n,a],[n-s,a],[n-2*s,a],[n-3*s,a],[i,a]]]}}});var jY=ne((Ldr,xRe)=>{"use strict";var V3=Ku(),PFt=fl().attributes,RFt=hc().dash,U3=qE(),DFt=Xs().overrideAll,yRe=rx(),mRe={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:V3.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:RFt},IFt=xRe.exports=DFt({domain:PFt({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:yRe(U3.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:yRe(U3.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:V3.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:U3.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:U3.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:U3.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:U3.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:V3.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:V3.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:V3.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:V3.background},lonaxis:mRe,lataxis:mRe},"plot","from-root");IFt.uirevision={valType:"any",editType:"none"}});var wRe=ne((Pdr,bRe)=>{"use strict";var qD=Wt(),FFt=Kx(),qFt=vc().getSubplotData,zD=qE(),zFt=jY(),_Re=zD.axesNames;bRe.exports=function(t,r,i){FFt(t,r,i,{type:"geo",attributes:zFt,handleDefaults:OFt,fullData:i,partition:"y"})};function OFt(e,t,r,i){var n=qFt(i.fullData,"geo",i.id),a=n.map(function(J){return J._expandedIndex}),o=r("resolution"),s=r("scope"),l=zD.scopeDefaults[s],u=r("projection.type",l.projType),f=t._isAlbersUsa=u==="albers usa";f&&(s=t.scope="usa");var c=t._isScoped=s!=="world",h=t._isSatellite=u==="satellite",v=t._isConic=u.indexOf("conic")!==-1||u==="albers",p=t._isClipped=!!zD.lonaxisSpan[u];if(e.visible===!1){var _=qD.extendDeep({},t._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),t._template=_}for(var T=r("visible"),g,A=0;A<_Re.length;A++){var b=_Re[A],w=[30,10][A],k;if(c)k=l[b+"Range"];else{var x=zD[b+"Span"],E=(x[u]||x["*"])/2,M=r("projection.rotation."+b.substr(0,3),l.projRotate[A]);k=[M-E,M+E]}var d=r(b+".range",k);r(b+".tick0"),r(b+".dtick",w),g=r(b+".showgrid",T?void 0:!1),g&&(r(b+".gridcolor"),r(b+".gridwidth"),r(b+".griddash")),t[b]._ax={type:"linear",_id:b.slice(0,3),_traceIndices:a,setScale:qD.identity,c2l:qD.identity,r2l:qD.identity,autorange:!0,range:d.slice(),_m:1,_input:{}}}var C=t.lonaxis.range,S=t.lataxis.range,P=C[0],D=C[1];P>0&&D<0&&(D+=360);var z=(P+D)/2,O;if(!f){var V=c?l.projRotate:[z,0,0];O=r("projection.rotation.lon",V[0]),r("projection.rotation.lat",V[1]),r("projection.rotation.roll",V[2]),g=r("showcoastlines",!c&&T),g&&(r("coastlinecolor"),r("coastlinewidth")),g=r("showocean",T?void 0:!1),g&&r("oceancolor")}var B,F;if(f?(B=-96.6,F=38.7):(B=c?z:O,F=(S[0]+S[1])/2),r("center.lon",B),r("center.lat",F),h&&(r("projection.tilt"),r("projection.distance")),v){var N=l.projParallels||[0,60];r("projection.parallels",N)}r("projection.scale"),g=r("showland",T?void 0:!1),g&&r("landcolor"),g=r("showlakes",T?void 0:!1),g&&r("lakecolor"),g=r("showrivers",T?void 0:!1),g&&(r("rivercolor"),r("riverwidth")),g=r("showcountries",c&&s!=="usa"&&T),g&&(r("countrycolor"),r("countrywidth")),(s==="usa"||s==="north america"&&o===50)&&(r("showsubunits",T),r("subunitcolor"),r("subunitwidth")),c||(g=r("showframe",T),g&&(r("framecolor"),r("framewidth"))),r("bgcolor");var Z=r("fitbounds");Z&&(delete t.projection.scale,c?(delete t.center.lon,delete t.center.lat):p?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}});var KY=ne((Rdr,MRe)=>{"use strict";var BFt=vc().getSubplotCalcData,NFt=Wt().counterRegex,UFt=gRe(),hg="geo",TRe=NFt(hg),ARe={};ARe[hg]={valType:"subplotid",dflt:hg,editType:"calc"};function VFt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[hg],n=0;n<i.length;n++){var a=i[n],o=BFt(r,hg,a),s=t[a],l=s._subplot;l||(l=UFt({id:a,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[a]._subplot=l),l.plot(o,t,e._promises)}}function HFt(e,t,r,i){for(var n=i._subplots[hg]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.framework.remove(),s.clipDef.remove())}}function GFt(e){for(var t=e._fullLayout,r=t._subplots[hg],i=0;i<r.length;i++){var n=t[r[i]],a=n._subplot;a.updateFx(t,n)}}MRe.exports={attr:hg,name:hg,idRoot:hg,idRegex:TRe,attrRegex:TRe,attributes:ARe,layoutAttributes:jY(),supplyLayoutDefaults:wRe(),plot:VFt,updateFx:GFt,clean:HFt}});var ERe=ne((Ddr,SRe)=>{"use strict";SRe.exports={attributes:z3(),supplyDefaults:NPe(),colorbar:ph(),formatLabels:HPe(),calc:fY(),calcGeoJSON:OY().calcGeoJSON,plot:OY().plot,style:IY(),styleOnSelect:Tv().styleOnSelect,hoverPoints:j6e(),eventData:J6e(),selectPoints:eRe(),moduleType:"trace",name:"scattergeo",basePlotModule:KY(),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}});var CRe=ne((Idr,kRe)=>{"use strict";kRe.exports=ERe()});var YE=ne((Fdr,RRe)=>{"use strict";var YFt=Ba().hovertemplateAttrs,c1=z3(),WFt=Ps(),LRe=es(),XFt=Ku().defaultLine,f1=oa().extendFlat,PRe=c1.marker.line;RRe.exports=f1({locations:{valType:"data_array",editType:"calc"},locationmode:c1.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f1({},c1.geojson,{}),featureidkey:c1.featureidkey,text:f1({},c1.text,{}),hovertext:f1({},c1.hovertext,{}),marker:{line:{color:f1({},PRe.color,{dflt:XFt}),width:f1({},PRe.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:c1.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c1.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f1({},LRe.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:YFt(),showlegend:f1({},LRe.showlegend,{dflt:!1})},WFt("",{cLetter:"z",editTypeOverride:"calc"}))});var IRe=ne((qdr,DRe)=>{"use strict";var OD=Wt(),ZFt=Kf(),jFt=YE();DRe.exports=function(t,r,i,n){function a(h,v){return OD.coerce(t,r,jFt,h,v)}var o=a("locations"),s=a("z");if(!(o&&o.length&&OD.isArrayOrTypedArray(s)&&s.length)){r.visible=!1;return}r._length=Math.min(o.length,s.length);var l=a("geojson"),u;(typeof l=="string"&&l!==""||OD.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate");var c=a("marker.line.width");c&&a("marker.line.color"),a("marker.opacity"),ZFt(t,r,n,a,{prefix:"",cLetter:"z"}),OD.coerceSelectionMarkerOpacity(r,a)}});var JY=ne((zdr,zRe)=>{"use strict";var FRe=la(),KFt=$a().BADNUM,JFt=gv(),QFt=Z0(),$Ft=gp();function qRe(e){return e&&typeof e=="string"}zRe.exports=function(t,r){var i=r._length,n=new Array(i),a;r.geojson?a=function(f){return qRe(f)||FRe(f)}:a=qRe;for(var o=0;o<i;o++){var s=n[o]={},l=r.locations[o],u=r.z[o];a(l)&&FRe(u)?(s.loc=l,s.z=u):(s.loc=null,s.z=KFt),s.index=o}return QFt(n,r),JFt(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),$Ft(n,r),n}});var BD=ne((Odr,BRe)=>{"use strict";var e8t=Ai(),t8t=_i(),QY=aa(),r8t=ul();function n8t(e,t){t&&ORe(e,t)}function ORe(e,t){var r=t[0].trace,i=t[0].node3,n=i.selectAll(".choroplethlocation"),a=r.marker||{},o=a.line||{},s=r8t.makeColorScaleFuncFromTrace(r);n.each(function(l){e8t.select(this).attr("fill",s(l.z)).call(t8t.stroke,l.mlc||o.color).call(QY.dashLine,"",l.mlw||o.width||0).style("opacity",a.opacity)}),QY.selectedPointStyle(n,r)}function i8t(e,t){var r=t[0].node3,i=t[0].trace;i.selectedpoints?QY.selectedPointStyle(r.selectAll(".choroplethlocation"),i):ORe(e,t)}BRe.exports={style:n8t,styleOnSelect:i8t}});var $Y=ne((Bdr,VRe)=>{"use strict";var a8t=Ai(),NRe=Wt(),H3=B3(),o8t=xD().getTopojsonFeatures,URe=Cd().findExtremes,s8t=BD().style;function l8t(e,t,r){var i=t.layers.backplot.select(".choroplethlayer");NRe.makeTraceGroups(i,r,"trace choropleth").each(function(n){var a=a8t.select(this),o=a.selectAll("path.choroplethlocation").data(NRe.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),s8t(e,n)})}function u8t(e,t){for(var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r.locationmode,o=r._length,s=a==="geojson-id"?H3.extractTraceFeature(e):o8t(r,n.topojson),l=[],u=[],f=0;f<o;f++){var c=e[f],h=a==="geojson-id"?c.fOut:H3.locationToFeature(a,c.loc,s);if(h){c.geojson=h,c.ct=h.properties.ct,c._polygons=H3.feature2polygons(h);var v=H3.computeBbox(h);l.push(v[0],v[2]),u.push(v[1],v[3])}else c.geojson=null}if(i.fitbounds==="geojson"&&a==="geojson-id"){var p=H3.computeBbox(H3.getTraceGeojson(r));l=[p[0],p[2]],u=[p[1],p[3]]}var _={padded:!0};r._extremes.lon=URe(i.lonaxis._ax,l,_),r._extremes.lat=URe(i.lataxis._ax,u,_)}VRe.exports={calcGeoJSON:u8t,plot:l8t}});var eW=ne((Ndr,HRe)=>{"use strict";var f8t=Xi(),c8t=YE(),h8t=Wt().fillText;HRe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s,l,u,f,c=[r,i],h=[r+360,i];for(l=0;l<n.length;l++)if(s=n[l],f=!1,s._polygons){for(u=0;u<s._polygons.length;u++)s._polygons[u].contains(c)&&(f=!f),s._polygons[u].contains(h)&&(f=!f);if(f)break}if(!(!f||!s))return t.x0=t.x1=t.xa.c2p(s.ct),t.y0=t.y1=t.ya.c2p(s.ct),t.index=s.index,t.location=s.loc,t.z=s.z,t.zLabel=f8t.tickText(o.mockAxis,o.mockAxis.c2l(s.z),"hover").text,t.hovertemplate=s.hovertemplate,v8t(t,a,s),[t]};function v8t(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,n=String(r.loc),a=i==="all"?c8t.hoverinfo.flags:i.split("+"),o=a.indexOf("name")!==-1,s=a.indexOf("location")!==-1,l=a.indexOf("z")!==-1,u=a.indexOf("text")!==-1,f=!o&&s,c=[];f?e.nameOverride=n:(o&&(e.nameOverride=t.name),s&&c.push(n)),l&&c.push(e.zLabel),u&&h8t(r,t,c),e.extraText=c.join("<br>")}}});var tW=ne((Udr,GRe)=>{"use strict";GRe.exports=function(t,r,i,n,a){t.location=r.location,t.z=r.z;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t.ct=o.ct,t}});var rW=ne((Vdr,YRe)=>{"use strict";YRe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l,u,f,c;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++)l=i[s],u=l.ct,u&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,s,t)?(o.push({pointNumber:s,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var XRe=ne((Hdr,WRe)=>{"use strict";WRe.exports={attributes:YE(),supplyDefaults:IRe(),colorbar:jx(),calc:JY(),calcGeoJSON:$Y().calcGeoJSON,plot:$Y().plot,style:BD().style,styleOnSelect:BD().styleOnSelect,hoverPoints:eW(),eventData:tW(),selectPoints:rW(),moduleType:"trace",name:"choropleth",basePlotModule:KY(),categories:["geo","noOpacity","showLegend"],meta:{}}});var jRe=ne((Gdr,ZRe)=>{"use strict";ZRe.exports=XRe()});var ND=ne((Ydr,JRe)=>{"use strict";var d8t=wi(),zp=Wt(),p8t=j2();function g8t(e,t,r,i){var n=e.cd,a=n[0].t,o=n[0].trace,s=e.xa,l=e.ya,u=a.x,f=a.y,c=s.c2p(t),h=l.c2p(r),v=e.distance,p;if(a.tree){var _=s.p2c(c-v),T=s.p2c(c+v),g=l.p2c(h-v),A=l.p2c(h+v);i==="x"?p=a.tree.range(Math.min(_,T),Math.min(l._rl[0],l._rl[1]),Math.max(_,T),Math.max(l._rl[0],l._rl[1])):p=a.tree.range(Math.min(_,T),Math.min(g,A),Math.max(_,T),Math.max(g,A))}else p=a.ids;var b,w,k,x,E,M,d,C,S,P=v;if(i==="x"){var D=!!o.xperiodalignment,z=!!o.yperiodalignment;for(E=0;E<p.length;E++){if(b=p[E],k=u[b],M=Math.abs(s.c2p(k)-c),D){var O=s.c2p(o._xStarts[b]),V=s.c2p(o._xEnds[b]);M=c>=Math.min(O,V)&&c<=Math.max(O,V)?0:1/0}if(M<P){if(P=M,x=f[b],d=l.c2p(x)-h,z){var B=l.c2p(o._yStarts[b]),F=l.c2p(o._yEnds[b]);d=h>=Math.min(B,F)&&h<=Math.max(B,F)?0:1/0}S=Math.sqrt(M*M+d*d),w=p[E]}}}else for(E=p.length-1;E>-1;E--)b=p[E],k=u[b],x=f[b],M=s.c2p(k)-c,d=l.c2p(x)-h,C=Math.sqrt(M*M+d*d),C<P&&(P=S=C,w=b);return e.index=w,e.distance=P,e.dxy=S,w===void 0?[e]:[KRe(e,u,f,o)]}function KRe(e,t,r,i){var n=e.xa,a=e.ya,o=e.distance,s=e.dxy,l=e.index,u={pointNumber:l,x:t[l],y:r[l]};u.tx=zp.isArrayOrTypedArray(i.text)?i.text[l]:i.text,u.htx=Array.isArray(i.hovertext)?i.hovertext[l]:i.hovertext,u.data=Array.isArray(i.customdata)?i.customdata[l]:i.customdata,u.tp=Array.isArray(i.textposition)?i.textposition[l]:i.textposition;var f=i.textfont;f&&(u.ts=zp.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.tc=Array.isArray(f.color)?f.color[l]:f.color,u.tf=Array.isArray(f.family)?f.family[l]:f.family);var c=i.marker;c&&(u.ms=zp.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=zp.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=zp.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=zp.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=zp.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var h=c&&c.line;h&&(u.mlc=Array.isArray(h.color)?h.color[l]:h.color,u.mlw=zp.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var v=c&&c.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[l]:v.type,u.mgc=Array.isArray(v.color)?v.color[l]:v.color);var p=n.c2p(u.x,!0),_=a.c2p(u.y,!0),T=u.mrc||1,g=i.hoverlabel;g&&(u.hbg=Array.isArray(g.bgcolor)?g.bgcolor[l]:g.bgcolor,u.hbc=Array.isArray(g.bordercolor)?g.bordercolor[l]:g.bordercolor,u.hts=zp.isArrayOrTypedArray(g.font.size)?g.font.size[l]:g.font.size,u.htc=Array.isArray(g.font.color)?g.font.color[l]:g.font.color,u.htf=Array.isArray(g.font.family)?g.font.family[l]:g.font.family,u.hnl=zp.isArrayOrTypedArray(g.namelength)?g.namelength[l]:g.namelength);var A=i.hoverinfo;A&&(u.hi=Array.isArray(A)?A[l]:A);var b=i.hovertemplate;b&&(u.ht=Array.isArray(b)?b[l]:b);var w={};w[e.index]=u;var k=i._origX,x=i._origY,E=zp.extendFlat({},e,{color:p8t(i,u),x0:p-T,x1:p+T,xLabelVal:k?k[l]:u.x,y0:_-T,y1:_+T,yLabelVal:x?x[l]:u.y,cd:w,distance:o,spikeDistance:s,hovertemplate:u.ht});return u.htx?E.text=u.htx:u.tx?E.text=u.tx:i.text&&(E.text=i.text),zp.fillText(u,i,E),d8t.getComponentMethod("errorbars","hoverInfo")(u,i,E),E}JRe.exports={hoverPoints:g8t,calcHover:KRe}});var h1=ne((Wdr,$Re)=>{"use strict";var QRe=20;$Re.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:QRe,SYMBOL_STROKE:QRe/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}});var WE=ne((Xdr,nDe)=>{"use strict";var y8t=es(),m8t=Y0(),Ul=cu(),eDe=kl().axisHoverFormat,tDe=Ps(),x8t=rx(),nW=oa().extendFlat,_8t=Xs().overrideAll,b8t=h1().DASHES,rDe=Ul.line,yy=Ul.marker,w8t=yy.line,G3=nDe.exports=_8t({x:Ul.x,x0:Ul.x0,dx:Ul.dx,y:Ul.y,y0:Ul.y0,dy:Ul.dy,xperiod:Ul.xperiod,yperiod:Ul.yperiod,xperiod0:Ul.xperiod0,yperiod0:Ul.yperiod0,xperiodalignment:Ul.xperiodalignment,yperiodalignment:Ul.yperiodalignment,xhoverformat:eDe("x"),yhoverformat:eDe("y"),text:Ul.text,hovertext:Ul.hovertext,textposition:Ul.textposition,textfont:Ul.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:rDe.color,width:rDe.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:x8t(b8t),dflt:"solid"}},marker:nW({},tDe("marker"),{symbol:yy.symbol,angle:yy.angle,size:yy.size,sizeref:yy.sizeref,sizemin:yy.sizemin,sizemode:yy.sizemode,opacity:yy.opacity,colorbar:yy.colorbar,line:nW({},tDe("marker.line"),{width:w8t.width})}),connectgaps:Ul.connectgaps,fill:nW({},Ul.fill,{dflt:"none"}),fillcolor:m8t(),selected:{marker:Ul.selected.marker,textfont:Ul.selected.textfont},unselected:{marker:Ul.unselected.marker,textfont:Ul.unselected.textfont},opacity:y8t.opacity},"calc","nested");G3.x.editType=G3.y.editType=G3.x0.editType=G3.y0.editType="calc+clearAxisTypes";G3.hovertemplate=Ul.hovertemplate;G3.texttemplate=Ul.texttemplate});var UD=ne(iW=>{"use strict";var iDe=h1();iW.isOpenSymbol=function(e){return typeof e=="string"?iDe.OPEN_RE.test(e):e%200>100};iW.isDotSymbol=function(e){return typeof e=="string"?iDe.DOT_RE.test(e):e>200}});var sDe=ne((jdr,oDe)=>{"use strict";var aDe=Wt(),T8t=wi(),A8t=UD(),M8t=WE(),S8t=G0(),VD=js(),E8t=B2(),k8t=o0(),C8t=dp(),L8t=s0(),P8t=X0(),R8t=l0();oDe.exports=function(t,r,i,n){function a(v,p){return aDe.coerce(t,r,M8t,v,p)}var o=t.marker?A8t.isOpenSymbol(t.marker.symbol):!1,s=VD.isBubble(t),l=E8t(t,r,n,a);if(!l){r.visible=!1;return}k8t(t,r,n,a),a("xhoverformat"),a("yhoverformat");var u=l<S8t.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("hovertemplate"),a("mode",u),VD.hasMarkers(r)&&(C8t(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),a("marker.line.width",o||s?1:0)),VD.hasLines(r)&&(a("connectgaps"),L8t(t,r,i,n,a),a("line.shape")),VD.hasText(r)&&(a("texttemplate"),R8t(t,r,n,a));var f=(r.line||{}).color,c=(r.marker||{}).color;a("fill"),r.fill!=="none"&&P8t(t,r,i,a);var h=T8t.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),aDe.coerceSelectionMarkerOpacity(r,a)}});var uDe=ne((Kdr,lDe)=>{"use strict";var D8t=vL();lDe.exports=function(t,r,i){var n=t.i;return"x"in t||(t.x=r._x[n]),"y"in t||(t.y=r._y[n]),D8t(t,r,i)}});var cDe=ne((Jdr,fDe)=>{"use strict";function I8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>=0?(a=o,n=o-1):i=o+1}return a}function F8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>0?(a=o,n=o-1):i=o+1}return a}function q8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<0?(a=o,i=o+1):n=o-1}return a}function z8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<=0?(a=o,i=o+1):n=o-1}return a}function O8t(e,t,r,i,n){for(;i<=n;){var a=i+n>>>1,o=e[a],s=r!==void 0?r(o,t):o-t;if(s===0)return a;s<=0?i=a+1:n=a-1}return-1}function XE(e,t,r,i,n,a){return typeof r=="function"?a(e,t,r,i===void 0?0:i|0,n===void 0?e.length-1:n|0):a(e,t,void 0,r===void 0?0:r|0,i===void 0?e.length-1:i|0)}fDe.exports={ge:function(e,t,r,i,n){return XE(e,t,r,i,n,I8t)},gt:function(e,t,r,i,n){return XE(e,t,r,i,n,F8t)},lt:function(e,t,r,i,n){return XE(e,t,r,i,n,q8t)},le:function(e,t,r,i,n){return XE(e,t,r,i,n,z8t)},eq:function(e,t,r,i,n){return XE(e,t,r,i,n,O8t)}}});var vg=ne((Qdr,vDe)=>{"use strict";vDe.exports=function(t,r,i){var n={},a,o;if(typeof r=="string"&&(r=hDe(r)),Array.isArray(r)){var s={};for(o=0;o<r.length;o++)s[r[o]]=!0;r=s}for(a in r)r[a]=hDe(r[a]);var l={};for(a in r){var u=r[a];if(Array.isArray(u))for(o=0;o<u.length;o++){var f=u[o];if(i&&(l[f]=!0),f in t){if(n[a]=t[f],i)for(var c=o;c<u.length;c++)l[u[c]]=!0;break}}else a in t&&(r[a]&&(n[a]=t[a]),i&&(l[a]=!0))}if(i)for(a in t)l[a]||(n[a]=t[a]);return n};var aW={};function hDe(e){return aW[e]?aW[e]:(typeof e=="string"&&(e=aW[e]=e.split(/\s*,\s*|\s+/)),e)}});var Y3=ne(($dr,dDe)=>{"use strict";var B8t=vg();dDe.exports=N8t;function N8t(e){var t;return arguments.length>1&&(e=arguments),typeof e=="string"?e=e.split(/\s/).map(parseFloat):typeof e=="number"&&(e=[e]),e.length&&typeof e[0]=="number"?e.length===1?t={width:e[0],height:e[0],x:0,y:0}:e.length===2?t={width:e[0],height:e[1],x:0,y:0}:t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=B8t(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),t={x:e.left||0,y:e.top||0},e.width==null?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,e.height==null?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}});var O_=ne((epr,pDe)=>{"use strict";pDe.exports=U8t;function U8t(e,t){if(!e||e.length==null)throw Error("Argument should be an array");t==null?t=1:t=Math.floor(t);for(var r=Array(t*2),i=0;i<t;i++){for(var n=-1/0,a=1/0,o=i,s=e.length;o<s;o+=t)e[o]>n&&(n=e[o]),e[o]<a&&(a=e[o]);r[i]=a,r[t+i]=n}return r}});var B_=ne((tpr,yDe)=>{var gDe=$R();yDe.exports=V8t;function V8t(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=+(r||0)|0,Array.isArray(e)&&e[0]&&typeof e[0][0]=="number"){var i=e[0].length,n=e.length*i,a,o,s,l;(!t||typeof t=="string")&&(t=new(gDe(t||"float32"))(n+r));var u=t.length-r;if(n!==u)throw new Error("source length "+n+" ("+i+"x"+e.length+") does not match destination length "+u);for(a=0,s=r;a<e.length;a++)for(o=0;o<i;o++)t[s++]=e[a][o]===null?NaN:e[a][o]}else if(!t||typeof t=="string"){var f=gDe(t||"float32");if(Array.isArray(e)||t==="array")for(t=new f(e.length+r),a=0,s=r,l=t.length;s<l;s++,a++)t[s]=e[a]===null?NaN:e[a];else r===0?t=new f(e):(t=new f(e.length+r),t.set(e,r))}else t.set(e,r);return t}});var xDe=ne((rpr,mDe)=>{"use strict";mDe.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}});var bDe=ne((npr,_De)=>{"use strict";_De.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}});var kDe=ne((ipr,EDe)=>{"use strict";var wDe=cDe(),TDe=k3(),H8t=Y3(),G8t=O_(),ADe=vg(),oW=oG(),Y8t=B_(),W8t=xDe(),X8t=$R(),MDe=bDe(),Z8t=1073741824;EDe.exports=function(t,r){r||(r={}),t=Y8t(t,"float64"),r=ADe(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let i=oW(r.maxDepth,255),n=oW(r.bounds,G8t(t,2));n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++;let a=SDe(t,n),o=t.length>>>1,s;r.dtype||(r.dtype="array"),typeof r.dtype=="string"?s=new(X8t(r.dtype))(o):r.dtype&&(s=r.dtype,Array.isArray(s)&&(s.length=o));for(let g=0;g<o;++g)s[g]=g;let l=[],u=[],f=[],c=[];v(0,0,1,s,0,1);let h=0;for(let g=0;g<l.length;g++){let A=l[g];if(s.set)s.set(A,h);else for(let w=0,k=A.length;w<k;w++)s[w+h]=A[w];let b=h+l[g].length;c[g]=[h,b],h=b}return s.range=p,s;function v(g,A,b,w,k,x){if(!w.length)return null;let E=l[k]||(l[k]=[]),M=f[k]||(f[k]=[]),d=u[k]||(u[k]=[]),C=E.length;if(k++,k>i||x>Z8t){for(let F=0;F<w.length;F++)E.push(w[F]),M.push(x),d.push(null,null,null,null);return C}if(E.push(w[0]),M.push(x),w.length<=1)return d.push(null,null,null,null),C;let S=b*.5,P=g+S,D=A+S,z=[],O=[],V=[],B=[];for(let F=1,N=w.length;F<N;F++){let Z=w[F],J=a[Z*2],re=a[Z*2+1];J<P?re<D?z.push(Z):O.push(Z):re<D?V.push(Z):B.push(Z)}return x<<=2,d.push(v(g,A,S,z,k,x),v(g,D,S,O,k,x+1),v(P,A,S,V,k,x+2),v(P,D,S,B,k,x+3)),C}function p(...g){let A;if(W8t(g[g.length-1])){let V=g.pop();!g.length&&(V.x!=null||V.l!=null||V.left!=null)&&(g=[V],A={}),A=ADe(V,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else A={};g.length||(g=n);let b=H8t(...g),[w,k,x,E]=[Math.min(b.x,b.x+b.width),Math.min(b.y,b.y+b.height),Math.max(b.x,b.x+b.width),Math.max(b.y,b.y+b.height)],[M,d,C,S]=SDe([w,k,x,E],n),P=oW(A.level,l.length);if(A.d!=null){let V;typeof A.d=="number"?V=[A.d,A.d]:A.d.length&&(V=A.d),P=Math.min(Math.max(Math.ceil(-MDe(Math.abs(V[0])/(n[2]-n[0]))),Math.ceil(-MDe(Math.abs(V[1])/(n[3]-n[1])))),P)}if(P=Math.min(P,l.length),A.lod)return _(M,d,C,S,P);let D=[];z(0,0,1,0,0,1);function z(V,B,F,N,Z,J){if(Z===null||J===null)return;let re=V+F,le=B+F;if(M>re||d>le||C<V||S<B||N>=P||Z===J)return;let fe=l[N];J===void 0&&(J=fe.length);for(let ye=Z;ye<J;ye++){let ue=fe[ye],Ae=t[ue*2],Re=t[ue*2+1];Ae>=w&&Ae<=x&&Re>=k&&Re<=E&&D.push(ue)}let K=u[N],X=K[Z*4+0],ae=K[Z*4+1],oe=K[Z*4+2],_e=K[Z*4+3],be=O(K,Z+1),he=F*.5,ie=N+1;z(V,B,he,ie,X,ae||oe||_e||be),z(V,B+he,he,ie,ae,oe||_e||be),z(V+he,B,he,ie,oe,_e||be),z(V+he,B+he,he,ie,_e,be)}function O(V,B){let F=null,N=0;for(;F===null;)if(F=V[B*4+N],N++,N>V.length)return null;return F}return D}function _(g,A,b,w,k){let x=[];for(let E=0;E<k;E++){let M=f[E],d=c[E][0],C=T(g,A,E),S=T(b,w,E),P=wDe.ge(M,C),D=wDe.gt(M,S,P,M.length-1);x[E]=[P+d,D+d]}return x}function T(g,A,b){let w=1,k=.5,x=.5,E=.5;for(let M=0;M<b;M++)w<<=2,w+=g<k?A<x?0:1:A<x?2:3,E*=.5,k+=g<k?-E:E,x+=A<x?-E:E;return w}};function SDe(e,t){let[r,i,n,a]=t,o=1/(n-r),s=1/(a-i),l=new Array(e.length);for(let u=0,f=e.length/2;u<f;u++)l[2*u]=TDe((e[2*u]-r)*o,0,1),l[2*u+1]=TDe((e[2*u+1]-i)*s,0,1);return l}});var HD=ne((apr,CDe)=>{"use strict";CDe.exports=kDe()});var sW=ne((opr,LDe)=>{LDe.exports=j8t;function j8t(e){var t=0,r=0,i=0,n=0;return e.map(function(a){a=a.slice();var o=a[0],s=o.toUpperCase();if(o!=s)switch(a[0]=s,o){case"a":a[6]+=i,a[7]+=n;break;case"v":a[1]+=n;break;case"h":a[1]+=i;break;default:for(var l=1;l<a.length;)a[l++]+=i,a[l++]+=n}switch(s){case"Z":i=t,n=r;break;case"H":i=a[1];break;case"V":n=a[1];break;case"M":i=t=a[1],n=r=a[2];break;default:i=a[a.length-2],n=a[a.length-1]}return a})}});var DDe=ne((GD,RDe)=>{"use strict";Object.defineProperty(GD,"__esModule",{value:!0});var K8t=function(){function e(t,r){var i=[],n=!0,a=!1,o=void 0;try{for(var s=t[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(i.push(l.value),!(r&&i.length===r));n=!0);}catch(u){a=!0,o=u}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ZE=Math.PI*2,lW=function(t,r,i,n,a,o,s){var l=t.x,u=t.y;l*=r,u*=i;var f=n*l-a*u,c=a*l+n*u;return{x:f+o,y:c+s}},J8t=function(t,r){var i=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(r/4),n=Math.cos(t),a=Math.sin(t),o=Math.cos(t+r),s=Math.sin(t+r);return[{x:n-a*i,y:a+n*i},{x:o+s*i,y:s-o*i},{x:o,y:s}]},PDe=function(t,r,i,n){var a=t*n-r*i<0?-1:1,o=t*i+r*n;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},Q8t=function(t,r,i,n,a,o,s,l,u,f,c,h){var v=Math.pow(a,2),p=Math.pow(o,2),_=Math.pow(c,2),T=Math.pow(h,2),g=v*p-v*T-p*_;g<0&&(g=0),g/=v*T+p*_,g=Math.sqrt(g)*(s===l?-1:1);var A=g*a/o*h,b=g*-o/a*c,w=f*A-u*b+(t+i)/2,k=u*A+f*b+(r+n)/2,x=(c-A)/a,E=(h-b)/o,M=(-c-A)/a,d=(-h-b)/o,C=PDe(1,0,x,E),S=PDe(x,E,M,d);return l===0&&S>0&&(S-=ZE),l===1&&S<0&&(S+=ZE),[w,k,C,S]},$8t=function(t){var r=t.px,i=t.py,n=t.cx,a=t.cy,o=t.rx,s=t.ry,l=t.xAxisRotation,u=l===void 0?0:l,f=t.largeArcFlag,c=f===void 0?0:f,h=t.sweepFlag,v=h===void 0?0:h,p=[];if(o===0||s===0)return[];var _=Math.sin(u*ZE/360),T=Math.cos(u*ZE/360),g=T*(r-n)/2+_*(i-a)/2,A=-_*(r-n)/2+T*(i-a)/2;if(g===0&&A===0)return[];o=Math.abs(o),s=Math.abs(s);var b=Math.pow(g,2)/Math.pow(o,2)+Math.pow(A,2)/Math.pow(s,2);b>1&&(o*=Math.sqrt(b),s*=Math.sqrt(b));var w=Q8t(r,i,n,a,o,s,c,v,_,T,g,A),k=K8t(w,4),x=k[0],E=k[1],M=k[2],d=k[3],C=Math.abs(d)/(ZE/4);Math.abs(1-C)<1e-7&&(C=1);var S=Math.max(Math.ceil(C),1);d/=S;for(var P=0;P<S;P++)p.push(J8t(M,d)),M+=d;return p.map(function(D){var z=lW(D[0],o,s,T,_,x,E),O=z.x,V=z.y,B=lW(D[1],o,s,T,_,x,E),F=B.x,N=B.y,Z=lW(D[2],o,s,T,_,x,E),J=Z.x,re=Z.y;return{x1:O,y1:V,x2:F,y2:N,x:J,y:re}})};GD.default=$8t;RDe.exports=GD.default});var qDe=ne((spr,FDe)=>{"use strict";FDe.exports=tqt;var eqt=DDe();function tqt(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],p=v[0];switch(p){case"M":a=v[1],o=v[2];break;case"A":var _=eqt({px:u,py:f,cx:v[6],cy:v[7],rx:v[1],ry:v[2],xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5]});if(!_.length)continue;for(var T=0,g;T<_.length;T++)g=_[T],v=["C",g.x1,g.y1,g.x2,g.y2,g.x,g.y],T<_.length-1&&r.push(v);break;case"S":var A=u,b=f;(t=="C"||t=="S")&&(A+=A-i,b+=b-n),v=["C",A,b,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=IDe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=IDe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=YD(u,f,v[1],v[2]);break;case"H":v=YD(u,f,v[1],f);break;case"V":v=YD(u,f,u,v[1]);break;case"Z":v=YD(u,f,a,o);break}t=p,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function YD(e,t,r,i){return["C",e,t,r,i,r,i]}function IDe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}});var uW=ne((lpr,zDe)=>{"use strict";zDe.exports=function(t){return typeof t!="string"?!1:(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}});var NDe=ne((upr,BDe)=>{"use strict";var rqt=CA(),nqt=sW(),iqt=qDe(),aqt=uW(),ODe=NS();BDe.exports=oqt;function oqt(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]=="string"&&(e=e[0]),typeof e=="string"&&(ODe(aqt(e),"String is not an SVG path."),e=rqt(e)),ODe(Array.isArray(e),"Argument should be a string or an array of path segments."),e=nqt(e),e=iqt(e),!e.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],r=0,i=e.length;r<i;r++)for(var n=e[r].slice(1),a=0;a<n.length;a+=2)n[a+0]<t[0]&&(t[0]=n[a+0]),n[a+1]<t[1]&&(t[1]=n[a+1]),n[a+0]>t[2]&&(t[2]=n[a+0]),n[a+1]>t[3]&&(t[3]=n[a+1]);return t}});var WDe=ne((fpr,YDe)=>{var N_=Math.PI,UDe=GDe(120);YDe.exports=sqt;function sqt(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],p=v[0];switch(p){case"M":a=v[1],o=v[2];break;case"A":v=HDe(u,f,v[1],v[2],GDe(v[3]),v[4],v[5],v[6],v[7]),v.unshift("C"),v.length>7&&(r.push(v.splice(0,7)),v.unshift("C"));break;case"S":var _=u,T=f;(t=="C"||t=="S")&&(_+=_-i,T+=T-n),v=["C",_,T,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=VDe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=VDe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=WD(u,f,v[1],v[2]);break;case"H":v=WD(u,f,v[1],f);break;case"V":v=WD(u,f,u,v[1]);break;case"Z":v=WD(u,f,a,o);break}t=p,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function WD(e,t,r,i){return["C",e,t,r,i,r,i]}function VDe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}function HDe(e,t,r,i,n,a,o,s,l,u){if(u)b=u[0],w=u[1],g=u[2],A=u[3];else{var f=fW(e,t,-n);e=f.x,t=f.y,f=fW(s,l,-n),s=f.x,l=f.y;var c=(e-s)/2,h=(t-l)/2,v=c*c/(r*r)+h*h/(i*i);v>1&&(v=Math.sqrt(v),r=v*r,i=v*i);var p=r*r,_=i*i,T=(a==o?-1:1)*Math.sqrt(Math.abs((p*_-p*h*h-_*c*c)/(p*h*h+_*c*c)));T==1/0&&(T=1);var g=T*r*h/i+(e+s)/2,A=T*-i*c/r+(t+l)/2,b=Math.asin(((t-A)/i).toFixed(9)),w=Math.asin(((l-A)/i).toFixed(9));b=e<g?N_-b:b,w=s<g?N_-w:w,b<0&&(b=N_*2+b),w<0&&(w=N_*2+w),o&&b>w&&(b=b-N_*2),!o&&w>b&&(w=w-N_*2)}if(Math.abs(w-b)>UDe){var k=w,x=s,E=l;w=b+UDe*(o&&w>b?1:-1),s=g+r*Math.cos(w),l=A+i*Math.sin(w);var M=HDe(s,l,r,i,n,0,o,x,E,[w,k,g,A])}var d=Math.tan((w-b)/4),C=4/3*r*d,S=4/3*i*d,P=[2*e-(e+C*Math.sin(b)),2*t-(t-S*Math.cos(b)),s+C*Math.sin(w),l-S*Math.cos(w),s,l];if(u)return P;M&&(P=P.concat(M));for(var D=0;D<P.length;){var z=fW(P[D],P[D+1],n);P[D++]=z.x,P[D++]=z.y}return P}function fW(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function GDe(e){return e*(N_/180)}});var ZDe=ne((cpr,XDe)=>{var lqt=sW(),uqt=WDe(),fqt={M:"moveTo",C:"bezierCurveTo"};XDe.exports=function(e,t){e.beginPath(),uqt(lqt(t)).forEach(function(r){var i=r[0],n=r.slice(1);e[fqt[i]].apply(e,n)}),e.closePath()}});var QDe=ne((hpr,JDe)=>{"use strict";var cqt=k3();JDe.exports=hqt;var jE=1e20;function hqt(e,t){t||(t={});var r=t.cutoff==null?.25:t.cutoff,i=t.radius==null?8:t.radius,n=t.channel||0,a,o,s,l,u,f,c,h,v,p,_;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");a=t.width,o=t.height,l=e,t.stride?f=t.stride:f=Math.floor(e.length/a/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=e,c=h.getContext("2d"),a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(h=e.canvas,c=e,a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.ImageData&&e instanceof window.ImageData&&(v=e,a=e.width,o=e.height,l=v.data,f=4);if(s=Math.max(a,o),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(u=l,l=Array(a*o),p=0,_=u.length;p<_;p++)l[p]=u[p*f+n]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var T=Array(a*o),g=Array(a*o),A=Array(s),b=Array(s),w=Array(s+1),k=Array(s);for(p=0,_=a*o;p<_;p++){var x=l[p];T[p]=x===1?0:x===0?jE:Math.pow(Math.max(0,.5-x),2),g[p]=x===1?jE:x===0?0:Math.pow(Math.max(0,x-.5),2)}jDe(T,a,o,A,b,k,w),jDe(g,a,o,A,b,k,w);var E=window.Float32Array?new Float32Array(a*o):new Array(a*o);for(p=0,_=a*o;p<_;p++)E[p]=cqt(1-((T[p]-g[p])/i+r),0,1);return E}function jDe(e,t,r,i,n,a,o){for(var s=0;s<t;s++){for(var l=0;l<r;l++)i[l]=e[l*t+s];for(KDe(i,n,a,o,r),l=0;l<r;l++)e[l*t+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)i[s]=e[l*t+s];for(KDe(i,n,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(n[s])}}function KDe(e,t,r,i,n){r[0]=0,i[0]=-jE,i[1]=+jE;for(var a=1,o=0;a<n;a++){for(var s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=i[o];)o--,s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);o++,r[o]=a,i[o]=s,i[o+1]=+jE}for(a=0,o=0;a<n;a++){for(;i[o+1]<a;)o++;t[a]=(a-r[o])*(a-r[o])+e[r[o]]}}});var eIe=ne((vpr,$De)=>{"use strict";var vqt=NDe(),dqt=CA(),pqt=ZDe(),gqt=uW(),yqt=QDe(),cW=document.createElement("canvas"),Cv=cW.getContext("2d");$De.exports=mqt;function mqt(e,t){if(!gqt(e))throw Error("Argument should be valid svg path string");t||(t={});var r,i;t.shape?(r=t.shape[0],i=t.shape[1]):(r=cW.width=t.w||t.width||200,i=cW.height=t.h||t.height||200);var n=Math.min(r,i),a=t.stroke||0,o=t.viewbox||t.viewBox||vqt(e),s=[r/(o[2]-o[0]),i/(o[3]-o[1])],l=Math.min(s[0]||0,s[1]||0)/2;if(Cv.fillStyle="black",Cv.fillRect(0,0,r,i),Cv.fillStyle="white",a&&(typeof a!="number"&&(a=1),a>0?Cv.strokeStyle="white":Cv.strokeStyle="black",Cv.lineWidth=Math.abs(a)),Cv.translate(r*.5,i*.5),Cv.scale(l,l),xqt()){var u=new Path2D(e);Cv.fill(u),a&&Cv.stroke(u)}else{var f=dqt(e);pqt(Cv,f),Cv.fill(),a&&Cv.stroke()}Cv.setTransform(1,0,0,1,0,0);var c=yqt(Cv,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:n*.5});return c}var XD;function xqt(){if(XD!=null)return XD;var e=document.createElement("canvas").getContext("2d");if(e.canvas.width=e.canvas.height=1,!window.Path2D)return XD=!1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var r=e.getImageData(0,0,1,1);return XD=r&&r.data&&r.data[3]===255}});var V_=ne((dpr,fIe)=>{"use strict";var jD=la(),_qt=eIe(),ZD=n1(),bqt=wi(),Z3=Wt(),zu=Z3.isArrayOrTypedArray,W3=aa(),tIe=zl(),rIe=dy().formatColor,X3=js(),wqt=kA(),vW=UD(),KE=h1(),Tqt=Yy().DESELECTDIM,nIe={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},Aqt=td().appendArrayPointValue;function Mqt(e,t){var r,i={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},n=e._context.plotGlPixelRatio;if(t.visible!==!0)return i;if(X3.hasText(t)&&(i.text=uIe(e,t),i.textSel=iIe(e,t,t.selected),i.textUnsel=iIe(e,t,t.unselected)),X3.hasMarkers(t)&&(i.marker=pW(e,t),i.markerSel=dW(e,t,t.selected),i.markerUnsel=dW(e,t,t.unselected),!t.unselected&&zu(t.marker.opacity))){var a=t.marker.opacity;for(i.markerUnsel.opacity=new Array(a.length),r=0;r<a.length;r++)i.markerUnsel.opacity[r]=Tqt*a[r]}if(X3.hasLines(t)){i.line={overlay:!0,thickness:t.line.width*n,color:t.line.color,opacity:t.opacity};var o=(KE.DASHES[t.line.dash]||[1]).slice();for(r=0;r<o.length;++r)o[r]*=t.line.width*n;i.line.dashes=o}return t.error_x&&t.error_x.visible&&(i.errorX=aIe(t,t.error_x,n)),t.error_y&&t.error_y.visible&&(i.errorY=aIe(t,t.error_y,n)),t.fill&&t.fill!=="none"&&(i.fill={closed:!0,fill:t.fillcolor,thickness:0}),i}function uIe(e,t){var r=e._fullLayout,i=t._length,n=t.textfont,a=t.textposition,o=zu(a)?a:[a],s=n.color,l=n.size,u=n.family,f={},c,h=e._context.plotGlPixelRatio,v=t.texttemplate;if(v){f.text=[];var p=r._d3locale,_=Array.isArray(v),T=_?Math.min(v.length,i):i,g=_?function(M){return v[M]}:function(){return v};for(c=0;c<T;c++){var A={i:c},b=t._module.formatLabels(A,t,r),w={};Aqt(w,t,c);var k=t._meta||{};f.text.push(Z3.texttemplateString(g(c),b,p,w,A,k))}}else zu(t.text)&&t.text.length<i?f.text=t.text.slice():f.text=t.text;if(zu(f.text))for(c=f.text.length;c<i;c++)f.text[c]="";for(f.opacity=t.opacity,f.font={},f.align=[],f.baseline=[],c=0;c<o.length;c++){var x=o[c].split(/\s+/);switch(x[1]){case"left":f.align.push("right");break;case"right":f.align.push("left");break;default:f.align.push(x[1])}switch(x[0]){case"top":f.baseline.push("bottom");break;case"bottom":f.baseline.push("top");break;default:f.baseline.push(x[0])}}if(zu(s))for(f.color=new Array(i),c=0;c<i;c++)f.color[c]=s[c];else f.color=s;if(zu(l)||zu(u))for(f.font=new Array(i),c=0;c<i;c++){var E=f.font[c]={};E.size=(Z3.isTypedArray(l)?l[c]:zu(l)?jD(l[c])?l[c]:0:l)*h,E.family=zu(u)?u[c]:u}else f.font={size:l*h,family:u};return f}function pW(e,t){var r=t._length,i=t.marker,n={},a,o=zu(i.symbol),s=zu(i.angle),l=zu(i.color),u=zu(i.line.color),f=zu(i.opacity),c=zu(i.size),h=zu(i.line.width),v;if(o||(v=vW.isOpenSymbol(i.symbol)),o||l||u||f||s){n.symbols=new Array(r),n.angles=new Array(r),n.colors=new Array(r),n.borderColors=new Array(r);var p=i.symbol,_=i.angle,T=rIe(i,i.opacity,r),g=rIe(i.line,i.opacity,r);if(!zu(g[0])){var A=g;for(g=Array(r),a=0;a<r;a++)g[a]=A}if(!zu(T[0])){var b=T;for(T=Array(r),a=0;a<r;a++)T[a]=b}if(!zu(p)){var w=p;for(p=Array(r),a=0;a<r;a++)p[a]=w}if(!zu(_)){var k=_;for(_=Array(r),a=0;a<r;a++)_[a]=k}for(n.symbols=p,n.angles=_,n.colors=T,n.borderColors=g,a=0;a<r;a++)o&&(v=vW.isOpenSymbol(i.symbol[a])),v&&(g[a]=T[a].slice(),T[a]=T[a].slice(),T[a][3]=0);for(n.opacity=t.opacity,n.markers=new Array(r),a=0;a<r;a++)n.markers[a]=lIe({mx:n.symbols[a],ma:n.angles[a]},t)}else v?(n.color=ZD(i.color,"uint8"),n.color[3]=0,n.borderColor=ZD(i.color,"uint8")):(n.color=ZD(i.color,"uint8"),n.borderColor=ZD(i.line.color,"uint8")),n.opacity=t.opacity*i.opacity,n.marker=lIe({mx:i.symbol,ma:i.angle},t);var x=1,E=wqt(t,x),M;if(c||h){var d=n.sizes=new Array(r),C=n.borderSizes=new Array(r),S=0,P;if(c){for(a=0;a<r;a++)d[a]=E(i.size[a]),S+=d[a];P=S/r}else for(M=E(i.size),a=0;a<r;a++)d[a]=M;if(h)for(a=0;a<r;a++)C[a]=i.line.width[a];else for(M=i.line.width,a=0;a<r;a++)C[a]=M;n.sizeAvg=P}else n.size=E(i&&i.size||10),n.borderSizes=E(i.line.width);return n}function dW(e,t,r){var i=t.marker,n={};return r&&(r.marker&&r.marker.symbol?n=pW(e,Z3.extendFlat({},i,r.marker)):r.marker&&(r.marker.size&&(n.size=r.marker.size),r.marker.color&&(n.colors=r.marker.color),r.marker.opacity!==void 0&&(n.opacity=r.marker.opacity))),n}function iIe(e,t,r){var i={};if(!r)return i;if(r.textfont){var n={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:Z3.extendFlat({},t.textfont)};r.textfont&&Z3.extendFlat(n.textfont,r.textfont),i=uIe(e,n)}return i}function aIe(e,t,r){var i={capSize:t.width*2*r,lineWidth:t.thickness*r,color:t.color};return t.copy_ystyle&&(i=e.error_y),i}var oIe=KE.SYMBOL_SDF_SIZE,U_=KE.SYMBOL_SIZE,sIe=KE.SYMBOL_STROKE,hW={},Sqt=W3.symbolFuncs[0](U_*.05);function lIe(e,t){var r=e.mx;if(r==="circle")return null;var i,n,a=W3.symbolNumber(r),o=W3.symbolFuncs[a%100],s=!!W3.symbolNoDot[a%100],l=!!W3.symbolNoFill[a%100],u=vW.isDotSymbol(r);if(e.ma&&(r+="_"+e.ma),hW[r])return hW[r];var f=W3.getMarkerAngle(e,t);return u&&!s?i=o(U_*1.1,f)+Sqt:i=o(U_,f),n=_qt(i,{w:oIe,h:oIe,viewBox:[-U_,-U_,U_,U_],stroke:l?sIe:-sIe}),hW[r]=n,n||null}function Eqt(e,t,r){var i=r.length,n=i/2,a,o;if(X3.hasLines(t)&&n)if(t.line.shape==="hv"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2+2],r[o*2+1]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else if(t.line.shape==="hvh"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var s=(r[o*2]+r[o*2+2])/2;a.push(r[o*2],r[o*2+1],s,r[o*2+1],s,r[o*2+3])}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vhv"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var l=(r[o*2+1]+r[o*2+3])/2;a.push(r[o*2],r[o*2+1],r[o*2],l,r[o*2+2],l)}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vh"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2],r[o*2+3]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else a=r;var u=!1;for(o=0;o<a.length;o++)if(isNaN(a[o])){u=!0;break}var f=u||a.length>KE.TOO_MANY_POINTS||X3.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var c=a[0],h=a[1];for(o=0;o<a.length;o+=2)isNaN(a[o])||isNaN(a[o+1])?(a[o]=c,a[o+1]=h):(c=a[o],h=a[o+1])}return{join:f,positions:a}}function kqt(e,t,r,i,n){var a=bqt.getComponentMethod("errorbars","makeComputeError"),o=tIe.getFromId(e,t.xaxis,"x"),s=tIe.getFromId(e,t.yaxis,"y"),l=r.length/2,u={};function f(c,h){var v=h._id.charAt(0),p=t["error_"+v];if(p&&p.visible&&(h.type==="linear"||h.type==="log")){for(var _=a(p),T={x:0,y:1}[v],g={x:[0,1,2,3],y:[2,3,0,1]}[v],A=new Float64Array(4*l),b=1/0,w=-1/0,k=0,x=0;k<l;k++,x+=4){var E=c[k];if(jD(E)){var M=r[k*2+T],d=_(E,k),C=d[0],S=d[1];if(jD(C)&&jD(S)){var P=E-C,D=E+S;A[x+g[0]]=M-h.c2l(P),A[x+g[1]]=h.c2l(D)-M,A[x+g[2]]=0,A[x+g[3]]=0,b=Math.min(b,E-C),w=Math.max(w,E+S)}}}u[v]={positions:r,errors:A,_bnds:[b,w]}}}return f(i,o),f(n,s),u}function Cqt(e,t,r,i){var n=t._length,a={},o;if(X3.hasMarkers(t)){var s=r.font,l=r.align,u=r.baseline;for(a.offset=new Array(n),o=0;o<n;o++){var f=i.sizes?i.sizes[o]:i.size,c=zu(s)?s[o].size:s.size,h=zu(l)?l.length>1?l[o]:l[0]:l,v=zu(u)?u.length>1?u[o]:u[0]:u,p=nIe[h],_=nIe[v],T=f?f/.8+1:0,g=-_*T-_*.5;a.offset[o]=[p*T/c,g/c]}}return a}fIe.exports={style:Mqt,markerStyle:pW,markerSelection:dW,linePositions:Eqt,errorBarPositions:kqt,textPosition:Cqt}});var gW=ne((ppr,cIe)=>{"use strict";var KD=Wt();cIe.exports=function(t,r){var i=r._scene,n={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||(i=r._scene={},i.init=function(){KD.extendFlat(i,a,n)},i.init(),i.update=function(s){var l=KD.repeat(s,i.count);if(i.fill2d&&i.fill2d.update(l),i.scatter2d&&i.scatter2d.update(l),i.line2d&&i.line2d.update(l),i.error2d&&i.error2d.update(l.concat(l)),i.select2d&&i.select2d.update(l),i.glText)for(var u=0;u<i.count;u++)i.glText[u].update(s)},i.draw=function(){for(var s=i.count,l=i.fill2d,u=i.error2d,f=i.line2d,c=i.scatter2d,h=i.glText,v=i.select2d,p=i.selectBatch,_=i.unselectBatch,T=0;T<s;T++){if(l&&i.fillOrder[T]&&l.draw(i.fillOrder[T]),f&&i.lineOptions[T]&&f.draw(T),u&&(i.errorXOptions[T]&&u.draw(T),i.errorYOptions[T]&&u.draw(T+s)),c&&i.markerOptions[T])if(_[T].length){var g=KD.repeat([],i.count);g[T]=_[T],c.draw(g)}else p[T].length||c.draw(T);h[T]&&i.textOptions[T]&&h[T].render()}v&&v.draw(p),i.dirty=!1},i.destroy=function(){i.fill2d&&i.fill2d.destroy&&i.fill2d.destroy(),i.scatter2d&&i.scatter2d.destroy&&i.scatter2d.destroy(),i.error2d&&i.error2d.destroy&&i.error2d.destroy(),i.line2d&&i.line2d.destroy&&i.line2d.destroy(),i.select2d&&i.select2d.destroy&&i.select2d.destroy(),i.glText&&i.glText.forEach(function(s){s.destroy&&s.destroy()}),i.lineOptions=null,i.fillOptions=null,i.markerOptions=null,i.markerSelectedOptions=null,i.markerUnselectedOptions=null,i.errorXOptions=null,i.errorYOptions=null,i.textOptions=null,i.textSelectedOptions=null,i.textUnselectedOptions=null,i.selectBatch=null,i.unselectBatch=null,r._scene=null}),i.dirty||KD.extendFlat(i,n),i}});var yIe=ne((gpr,gIe)=>{"use strict";var Lqt=HD(),j3=Wt(),hIe=zl(),Pqt=Cd().findExtremes,vIe=u0(),yW=yp(),Rqt=yW.calcMarkerSize,Dqt=yW.calcAxisExpansion,Iqt=yW.setFirstScatter,Fqt=pp(),K3=V_(),qqt=gW(),dIe=$a().BADNUM,zqt=h1().TOO_MANY_POINTS;gIe.exports=function(t,r){var i=t._fullLayout,n=r._xA=hIe.getFromId(t,r.xaxis,"x"),a=r._yA=hIe.getFromId(t,r.yaxis,"y"),o=i._plots[r.xaxis+r.yaxis],s=r._length,l=s>=zqt,u=s*2,f={},c,h=n.makeCalcdata(r,"x"),v=a.makeCalcdata(r,"y"),p=vIe(r,n,"x",h),_=vIe(r,a,"y",v),T=p.vals,g=_.vals;r._x=T,r._y=g,r.xperiodalignment&&(r._origX=h,r._xStarts=p.starts,r._xEnds=p.ends),r.yperiodalignment&&(r._origY=v,r._yStarts=_.starts,r._yEnds=_.ends);var A=new Array(u),b=new Array(s);for(c=0;c<s;c++)A[c*2]=T[c]===dIe?NaN:T[c],A[c*2+1]=g[c]===dIe?NaN:g[c],b[c]=c;if(n.type==="log")for(c=0;c<u;c+=2)A[c]=n.c2l(A[c]);if(a.type==="log")for(c=1;c<u;c+=2)A[c]=a.c2l(A[c]);l&&n.type!=="log"&&a.type!=="log"?f.tree=Lqt(A):f.ids=b,Fqt(t,r);var w=Oqt(t,o,r,A,T,g),k=qqt(t,o);Iqt(i,r);var x;return l?w.marker&&(x=w.marker.sizeAvg||Math.max(w.marker.size,3)):x=Rqt(r,s),Dqt(t,r,n,a,T,g,x),w.errorX&&pIe(r,n,w.errorX),w.errorY&&pIe(r,a,w.errorY),w.fill&&!k.fill2d&&(k.fill2d=!0),w.marker&&!k.scatter2d&&(k.scatter2d=!0),w.line&&!k.line2d&&(k.line2d=!0),(w.errorX||w.errorY)&&!k.error2d&&(k.error2d=!0),w.text&&!k.glText&&(k.glText=!0),w.marker&&(w.marker.snap=s),k.lineOptions.push(w.line),k.errorXOptions.push(w.errorX),k.errorYOptions.push(w.errorY),k.fillOptions.push(w.fill),k.markerOptions.push(w.marker),k.markerSelectedOptions.push(w.markerSel),k.markerUnselectedOptions.push(w.markerUnsel),k.textOptions.push(w.text),k.textSelectedOptions.push(w.textSel),k.textUnselectedOptions.push(w.textUnsel),k.selectBatch.push([]),k.unselectBatch.push([]),f._scene=k,f.index=k.count,f.x=T,f.y=g,f.positions=A,k.count++,[{x:!1,y:!1,t:f,trace:r}]};function pIe(e,t,r){var i=e._extremes[t._id],n=Pqt(t,r._bnds,{padded:!0});i.min=i.min.concat(n.min),i.max=i.max.concat(n.max)}function Oqt(e,t,r,i,n,a){var o=K3.style(e,r);if(o.marker&&(o.marker.positions=i),o.line&&i.length>1&&j3.extendFlat(o.line,K3.linePositions(e,r,i)),o.errorX||o.errorY){var s=K3.errorBarPositions(e,r,i,n,a);o.errorX&&j3.extendFlat(o.errorX,s.x),o.errorY&&j3.extendFlat(o.errorY,s.y)}return o.text&&(j3.extendFlat(o.text,{positions:i},K3.textPosition(e,r,o.text,o.marker)),j3.extendFlat(o.textSel,{positions:i},K3.textPosition(e,r,o.text,o.markerSel)),j3.extendFlat(o.textUnsel,{positions:i},K3.textPosition(e,r,o.text,o.markerUnsel))),o}});var mW=ne((ypr,xIe)=>{"use strict";var mIe=Wt(),Bqt=_i(),Nqt=Yy().DESELECTDIM;function Uqt(e){var t=e[0],r=t.trace,i=t.t,n=i._scene,a=i.index,o=n.selectBatch[a],s=n.unselectBatch[a],l=n.textOptions[a],u=n.textSelectedOptions[a]||{},f=n.textUnselectedOptions[a]||{},c=mIe.extendFlat({},l),h,v;if(o.length||s.length){var p=u.color,_=f.color,T=l.color,g=mIe.isArrayOrTypedArray(T);for(c.color=new Array(r._length),h=0;h<o.length;h++)v=o[h],c.color[v]=p||(g?T[v]:T);for(h=0;h<s.length;h++){v=s[h];var A=g?T[v]:T;c.color[v]=_||(p?A:Bqt.addOpacity(A,Nqt))}}n.glText[a].update(c)}xIe.exports={styleTextSelection:Uqt}});var xW=ne((mpr,bIe)=>{"use strict";var _Ie=js(),Vqt=mW().styleTextSelection;bIe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l=i[0].t,u=s._length,f=l.x,c=l.y,h=l._scene,v=l.index;if(!h)return o;var p=_Ie.hasText(s),_=_Ie.hasMarkers(s),T=!_&&!p;if(s.visible!==!0||T)return o;var g=[],A=[];if(r!==!1&&!r.degenerate)for(var b=0;b<u;b++)r.contains([l.xpx[b],l.ypx[b]],!1,b,t)?(g.push(b),o.push({pointNumber:b,x:n.c2d(f[b]),y:a.c2d(c[b])})):A.push(b);if(_){var w=h.scatter2d;if(!g.length&&!A.length){var k=new Array(h.count);k[v]=h.markerOptions[v],w.update.apply(w,k)}else if(!h.selectBatch[v].length&&!h.unselectBatch[v].length){var x=new Array(h.count);x[v]=h.markerUnselectedOptions[v],w.update.apply(w,x)}}return h.selectBatch[v]=g,h.unselectBatch[v]=A,p&&Vqt(i),o}});var TIe=ne((xpr,wIe)=>{"use strict";var Hqt=ND();wIe.exports={moduleType:"trace",name:"scattergl",basePlotModule:vu(),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:WE(),supplyDefaults:sDe(),crossTraceDefaults:J7(),colorbar:ph(),formatLabels:uDe(),calc:yIe(),hoverPoints:Hqt.hoverPoints,selectPoints:xW(),meta:{}}});var MIe=ne((_pr,QD)=>{"use strict";var JD=k3();QD.exports=AIe;QD.exports.to=AIe;QD.exports.from=Gqt;function AIe(e,t){t==null&&(t=!0);var r=e[0],i=e[1],n=e[2],a=e[3];a==null&&(a=t?1:255),t&&(r*=255,i*=255,n*=255,a*=255),r=JD(r,0,255)&255,i=JD(i,0,255)&255,n=JD(n,0,255)&255,a=JD(a,0,255)&255;var o=r*16777216+(i<<16)+(n<<8)+a;return o}function Gqt(e,t){e=+e;var r=e>>>24,i=(e&16711680)>>>16,n=(e&65280)>>>8,a=e&255;return t===!1?[r,i,n,a]:[r/255,i/255,n/255,a/255]}});var of=ne((bpr,EIe)=>{"use strict";var SIe=Object.getOwnPropertySymbols,Yqt=Object.prototype.hasOwnProperty,Wqt=Object.prototype.propertyIsEnumerable;function Xqt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Zqt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}EIe.exports=Zqt()?Object.assign:function(e,t){for(var r,i=Xqt(e),n,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)Yqt.call(r,o)&&(i[o]=r[o]);if(SIe){n=SIe(r);for(var s=0;s<n.length;s++)Wqt.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}});var CIe=ne((wpr,kIe)=>{kIe.exports=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],i=0;i<e.length-1;i++)r.push(e[i],t[i]||"");return r.push(e[i]),r.join("")}});var _W=ne((Tpr,LIe)=>{"use strict";LIe.exports=function(t,r,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var n=0,a=i.length;n<a;n++){var o=i[n];for(var s in o)if(!(r[s]!==void 0&&!Array.isArray(r[s])&&t[s]===r[s])&&s in r){var l;if(o[s]===!0)l=r[s];else{if(o[s]===!1)continue;if(typeof o[s]=="function"&&(l=o[s](r[s],t,r),l===void 0))continue}t[s]=l}}return t}});var RIe=ne((Apr,PIe)=>{"use strict";PIe.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))});var $D=ne((Mpr,J3)=>{"use strict";J3.exports=JE;J3.exports.float32=J3.exports.float=JE;J3.exports.fract32=J3.exports.fract=jqt;var DIe=new Float32Array(1);function jqt(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);t instanceof Float32Array||(t=JE(e));for(var r=0,i=t.length;r<i;r++)t[r]=e[r]-t[r];return t}return JE(e-JE(e))}function JE(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(DIe[0]=e,DIe[0])}});var wW=ne((Spr,qIe)=>{"use strict";function Kqt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function Jqt(e,t){return ezt(e)||Kqt(e,t)||FIe(e,t)||nzt()}function Qqt(e){return $qt(e)||tzt(e)||FIe(e)||rzt()}function $qt(e){if(Array.isArray(e))return bW(e)}function ezt(e){if(Array.isArray(e))return e}function tzt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FIe(e,t){if(e){if(typeof e=="string")return bW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bW(e,t)}}function bW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function rzt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nzt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var izt=n1(),azt=O_(),ozt=MIe(),szt=HD(),H_=of(),eI=CIe(),lzt=vg(),uzt=_W(),fzt=B_(),IIe=RIe(),tI=$D(),czt=Y3(),hzt=Vc;function Vc(e,t){var r=this;if(!(this instanceof Vc))return new Vc(e,t);typeof e=="function"?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t),e=t.regl;var i=e._gl,n,a=[],o={},s=[],l=[null],u=[null],f=255,c=100;this.tooManyColors=IIe,n=e.texture({data:new Uint8Array(f*4),width:f,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),H_(this,{regl:e,gl:i,groups:s,markerCache:u,markerTextures:l,palette:a,paletteIds:o,paletteTexture:n,maxColors:f,maxSize:c,canvas:i.canvas}),this.update(t);var h={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(T,g){return[r.tooManyColors?0:f,n.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:n},attributes:{x:function(T,g){return g.xAttr||{buffer:g.positionBuffer,stride:8,offset:0}},y:function(T,g){return g.yAttr||{buffer:g.positionBuffer,stride:8,offset:4}},xFract:function(T,g){return g.xAttr?{constant:[0,0]}:{buffer:g.positionFractBuffer,stride:8,offset:0}},yFract:function(T,g){return g.yAttr?{constant:[0,0]}:{buffer:g.positionFractBuffer,stride:8,offset:4}},size:function(T,g){return g.size.length?{buffer:g.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(g.size*255/r.maxSize)]}},borderSize:function(T,g){return g.borderSize.length?{buffer:g.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(g.borderSize*255/r.maxSize)]}},colorId:function(T,g){return g.color.length?{buffer:g.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?a.slice(g.color*4,g.color*4+4):[g.color]}},borderColorId:function(T,g){return g.borderColor.length?{buffer:g.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?a.slice(g.borderColor*4,g.borderColor*4+4):[g.borderColor]}},isActive:function(T,g){return g.activation===!0?{constant:[1]}:g.activation?g.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},v=H_({},h);v.frag=eI([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),v.vert=eI([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=e(v);var p=H_({},h);p.frag=eI([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),p.vert=eI([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),IIe&&(p.frag=p.frag.replace("smoothstep","smoothStep"),v.frag=v.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(p)}Vc.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};Vc.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this};Vc.prototype.draw=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=this.groups;if(r.length===1&&Array.isArray(r[0])&&(r[0][0]===null||Array.isArray(r[0][0]))&&(r=r[0]),this.regl._refresh(),r.length)for(var a=0;a<r.length;a++)this.drawItem(a,r[a]);else n.forEach(function(o,s){e.drawItem(s)});return this};Vc.prototype.drawItem=function(e,t){var r=this.groups,i=r[e];if(typeof t=="number"&&(e=t,i=r[t],t=null),!!(i&&i.count&&i.opacity)){i.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,i,t));for(var n=[],a=1;a<i.activation.length;a++)!i.activation[a]||i.activation[a]!==!0&&!i.activation[a].data.length||n.push.apply(n,Qqt(this.getMarkerDrawOptions(a,i,t)));n.length&&this.drawMarker(n)}};Vc.prototype.getMarkerDrawOptions=function(e,t,r){var i=t.range,n=t.tree,a=t.viewport,o=t.activation,s=t.selectionBuffer,l=t.count,u=this.regl;if(!n)return r?[H_({},t,{markerTexture:this.markerTextures[e],activation:o[e],count:r.length,elements:r,offset:0})]:[H_({},t,{markerTexture:this.markerTextures[e],activation:o[e],offset:0})];var f=[],c=n.range(i,{lod:!0,px:[(i[2]-i[0])/a.width,(i[3]-i[1])/a.height]});if(r){for(var h=o[e],v=h.data,p=new Uint8Array(l),_=0;_<r.length;_++){var T=r[_];p[T]=v?v[T]:1}s.subdata(p)}for(var g=c.length;g--;){var A=Jqt(c[g],2),b=A[0],w=A[1];f.push(H_({},t,{markerTexture:this.markerTextures[e],activation:r?s:o[e],offset:b,count:w-b}))}return f};Vc.prototype.update=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(r.length){r.length===1&&Array.isArray(r[0])&&(r=r[0]);var n=this.groups,a=this.gl,o=this.regl,s=this.maxSize,l=this.maxColors,u=this.palette;this.groups=n=r.map(function(f,c){var h=n[c];if(f===void 0)return h;f===null?f={positions:null}:typeof f=="function"?f={ondraw:f}:typeof f[0]=="number"&&(f={positions:f}),f=lzt(f,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),f.positions===null&&(f.positions=[]),f.tooManyColors!=null&&(e.tooManyColors=f.tooManyColors),h||(n[c]=h={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:o.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},f=H_({},Vc.defaults,f)),f.positions&&!("marker"in f)&&(f.marker=h.marker,delete h.marker),f.marker&&!("positions"in f)&&(f.positions=h.positions,delete h.positions);var v=0,p=0;if(uzt(h,f,[{snap:!0,size:function(B,F){return B==null&&(B=Vc.defaults.size),v+=B&&B.length?1:0,B},borderSize:function(B,F){return B==null&&(B=Vc.defaults.borderSize),v+=B&&B.length?1:0,B},opacity:parseFloat,color:function(B,F){return B==null&&(B=Vc.defaults.color),B=e.updateColor(B),p++,B},borderColor:function(B,F){return B==null&&(B=Vc.defaults.borderColor),B=e.updateColor(B),p++,B},bounds:function(B,F,N){return"range"in N||(N.range=null),B},positions:function(B,F,N){var Z=F.snap,J=F.positionBuffer,re=F.positionFractBuffer,le=F.selectionBuffer;if(B.x||B.y)return B.x.length?F.xAttr={buffer:o.buffer(B.x),offset:0,stride:4,count:B.x.length}:F.xAttr={buffer:B.x.buffer,offset:B.x.offset*4||0,stride:(B.x.stride||1)*4,count:B.x.count},B.y.length?F.yAttr={buffer:o.buffer(B.y),offset:0,stride:4,count:B.y.length}:F.yAttr={buffer:B.y.buffer,offset:B.y.offset*4||0,stride:(B.y.stride||1)*4,count:B.y.count},F.count=Math.max(F.xAttr.count,F.yAttr.count),B;B=fzt(B,"float64");var fe=F.count=Math.floor(B.length/2),K=F.bounds=fe?azt(B,2):null;if(!N.range&&!F.range&&(delete F.range,N.range=K),!N.marker&&!F.marker&&(delete F.marker,N.marker=null),Z&&(Z===!0||fe>Z)?F.tree=szt(B,{bounds:K}):Z&&Z.length&&(F.tree=Z),F.tree){var X={primitive:"points",usage:"static",data:F.tree,type:"uint32"};F.elements?F.elements(X):F.elements=o.elements(X)}var ae=tI.float32(B);J({data:ae,usage:"dynamic"});var oe=tI.fract32(B,ae);return re({data:oe,usage:"dynamic"}),le({data:new Uint8Array(fe),type:"uint8",usage:"stream"}),B}},{marker:function(B,F,N){var Z=F.activation;if(Z.forEach(function(oe){return oe&&oe.destroy&&oe.destroy()}),Z.length=0,!B||typeof B[0]=="number"){var J=e.addMarker(B);Z[J]=!0}else{for(var re=[],le=0,fe=Math.min(B.length,F.count);le<fe;le++){var K=e.addMarker(B[le]);re[K]||(re[K]=new Uint8Array(F.count)),re[K][le]=1}for(var X=0;X<re.length;X++)if(re[X]){var ae={data:re[X],type:"uint8",usage:"static"};Z[X]?Z[X](ae):Z[X]=o.buffer(ae),Z[X].data=re[X]}}return B},range:function(B,F,N){var Z=F.bounds;if(Z)return B||(B=Z),F.scale=[1/(B[2]-B[0]),1/(B[3]-B[1])],F.translate=[-B[0],-B[1]],F.scaleFract=tI.fract(F.scale),F.translateFract=tI.fract(F.translate),B},viewport:function(B){var F=czt(B||[a.drawingBufferWidth,a.drawingBufferHeight]);return F}}]),v){var _=h,T=_.count,g=_.size,A=_.borderSize,b=_.sizeBuffer,w=new Uint8Array(T*2);if(g.length||A.length)for(var k=0;k<T;k++)w[k*2]=Math.round((g[k]==null?g:g[k])*255/s),w[k*2+1]=Math.round((A[k]==null?A:A[k])*255/s);b({data:w,usage:"dynamic"})}if(p){var x=h,E=x.count,M=x.color,d=x.borderColor,C=x.colorBuffer,S;if(e.tooManyColors){if(M.length||d.length){S=new Uint8Array(E*8);for(var P=0;P<E;P++){var D=M[P];S[P*8]=u[D*4],S[P*8+1]=u[D*4+1],S[P*8+2]=u[D*4+2],S[P*8+3]=u[D*4+3];var z=d[P];S[P*8+4]=u[z*4],S[P*8+5]=u[z*4+1],S[P*8+6]=u[z*4+2],S[P*8+7]=u[z*4+3]}}}else if(M.length||d.length){S=new Uint8Array(E*4+2);for(var O=0;O<E;O++)M[O]!=null&&(S[O*4]=M[O]%l,S[O*4+1]=Math.floor(M[O]/l)),d[O]!=null&&(S[O*4+2]=d[O]%l,S[O*4+3]=Math.floor(d[O]/l))}C({data:S||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return h})}};Vc.prototype.addMarker=function(e){var t=this.markerTextures,r=this.regl,i=this.markerCache,n=e==null?0:i.indexOf(e);if(n>=0)return n;var a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)a=e;else{a=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++)a[o]=e[o]*255}var l=Math.floor(Math.sqrt(a.length));return n=t.length,i.push(e),t.push(r.texture({channels:1,data:a,radius:l,mag:"linear",min:"linear"})),n};Vc.prototype.updateColor=function(e){var t=this.paletteIds,r=this.palette,i=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if(typeof e[0]=="number"){var a=[];if(Array.isArray(e))for(var o=0;o<e.length;o+=4)a.push(e.slice(o,o+4));else for(var s=0;s<e.length;s+=4)a.push(e.subarray(s,s+4));e=a}for(var l=0;l<e.length;l++){var u=e[l];u=izt(u,"uint8");var f=ozt(u,!1);if(t[f]==null){var c=r.length;t[f]=Math.floor(c/4),r[c]=u[0],r[c+1]=u[1],r[c+2]=u[2],r[c+3]=u[3]}n[l]=t[f]}return!this.tooManyColors&&r.length>i*4&&(this.tooManyColors=!0),this.updatePalette(r),n.length===1?n[0]:n};Vc.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,r=this.paletteTexture,i=Math.ceil(e.length*.25/t);if(i>1){e=e.slice();for(var n=e.length*.25%t;n<i*t;n++)e.push(0,0,0,0)}r.height<i&&r.resize(t,i),r.subimage({width:Math.min(e.length*.25,t),height:i,data:e},0,0)}};Vc.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this};var vzt=of(),dzt=function(t,r){var i=new hzt(t,r),n=i.render.bind(i);return vzt(n,{render:n,update:i.update.bind(i),draw:i.draw.bind(i),destroy:i.destroy.bind(i),regl:i.regl,gl:i.gl,canvas:i.gl.canvas,groups:i.groups,markers:i.markerCache,palette:i.palette}),n};qIe.exports=dzt});var UIe=ne((Epr,SW)=>{"use strict";SW.exports=iI;SW.exports.default=iI;function iI(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,a=OIe(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,l,u,f,c,h,v;if(i&&(a=xzt(e,t,a,r)),e.length>80*r){s=u=e[0],l=f=e[1];for(var p=r;p<n;p+=r)c=e[p],h=e[p+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>f&&(f=h);v=Math.max(u-s,f-l),v=v!==0?1/v:0}return QE(a,o,r,s,l,v),o}function OIe(e,t,r,i,n){var a,o;if(n===MW(e,t,r,i)>0)for(a=t;a<r;a+=i)o=zIe(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=zIe(a,e[a],e[a+1],o);return o&&aI(o,o.next)&&(e5(o),o=o.next),o}function v1(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(aI(r,r.next)||Ou(r.prev,r,r.next)===0)){if(e5(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function QE(e,t,r,i,n,a,o){if(e){!o&&a&&Azt(e,i,n,a);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,a?gzt(e,i,n,a):pzt(e)){t.push(l.i/r),t.push(e.i/r),t.push(u.i/r),e5(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=yzt(v1(e),t,r),QE(e,t,r,i,n,a,2)):o===2&&mzt(e,t,r,i,n,a):QE(v1(e),t,r,i,n,a,1);break}}}}function pzt(e){var t=e.prev,r=e,i=e.next;if(Ou(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(Q3(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Ou(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function gzt(e,t,r,i){var n=e.prev,a=e,o=e.next;if(Ou(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,f=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,c=TW(s,l,t,r,i),h=TW(u,f,t,r,i),v=e.prevZ,p=e.nextZ;v&&v.z>=c&&p&&p.z<=h;){if(v!==e.prev&&v!==e.next&&Q3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Ou(v.prev,v,v.next)>=0||(v=v.prevZ,p!==e.prev&&p!==e.next&&Q3(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ou(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;v&&v.z>=c;){if(v!==e.prev&&v!==e.next&&Q3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Ou(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Q3(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ou(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function yzt(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;!aI(n,a)&&BIe(n,i,i.next,a)&&$E(n,a)&&$E(a,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(a.i/r),e5(i),e5(i.next),i=e=a),i=i.next}while(i!==e);return v1(i)}function mzt(e,t,r,i,n,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ezt(o,s)){var l=NIe(o,s);o=v1(o,o.next),l=v1(l,l.next),QE(o,t,r,i,n,a),QE(l,t,r,i,n,a);return}s=s.next}o=o.next}while(o!==e)}function xzt(e,t,r,i){var n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=OIe(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Szt(u));for(n.sort(_zt),a=0;a<n.length;a++)bzt(n[a],r),r=v1(r,r.next);return r}function _zt(e,t){return e.x-t.x}function bzt(e,t){if(t=wzt(e,t),t){var r=NIe(t,e);v1(t,t.next),v1(r,r.next)}}function wzt(e,t){var r=t,i=e.x,n=e.y,a=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===a)return o;var l=o,u=o.x,f=o.y,c=1/0,h;r=o;do i>=r.x&&r.x>=u&&i!==r.x&&Q3(n<f?i:a,n,u,f,n<f?a:i,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(i-r.x),$E(r,e)&&(h<c||h===c&&(r.x>o.x||r.x===o.x&&Tzt(o,r)))&&(o=r,c=h)),r=r.next;while(r!==l);return o}function Tzt(e,t){return Ou(e.prev,e,t.prev)<0&&Ou(t.next,e,e.next)<0}function Azt(e,t,r,i){var n=e;do n.z===null&&(n.z=TW(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Mzt(n)}function Mzt(e){var t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function TW(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Szt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Q3(e,t,r,i,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function Ezt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!kzt(e,t)&&($E(e,t)&&$E(t,e)&&Czt(e,t)&&(Ou(e.prev,e,t.prev)||Ou(e,t.prev,t))||aI(e,t)&&Ou(e.prev,e,e.next)>0&&Ou(t.prev,t,t.next)>0)}function Ou(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function aI(e,t){return e.x===t.x&&e.y===t.y}function BIe(e,t,r,i){var n=nI(Ou(e,t,r)),a=nI(Ou(e,t,i)),o=nI(Ou(r,i,e)),s=nI(Ou(r,i,t));return!!(n!==a&&o!==s||n===0&&rI(e,r,t)||a===0&&rI(e,i,t)||o===0&&rI(r,e,i)||s===0&&rI(r,t,i))}function rI(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function nI(e){return e>0?1:e<0?-1:0}function kzt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&BIe(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function $E(e,t){return Ou(e.prev,e,e.next)<0?Ou(e,t,e.next)>=0&&Ou(e,e.prev,t)>=0:Ou(e,t,e.prev)<0||Ou(e,e.next,t)<0}function Czt(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function NIe(e,t){var r=new AW(e.i,e.x,e.y),i=new AW(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function zIe(e,t,r,i){var n=new AW(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function e5(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function AW(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}iI.deviation=function(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,o=Math.abs(MW(e,0,a,r));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(MW(e,u,f,r))}var c=0;for(s=0;s<i.length;s+=3){var h=i[s]*r,v=i[s+1]*r,p=i[s+2]*r;c+=Math.abs((e[h]-e[p])*(e[v+1]-e[h+1])-(e[h]-e[v])*(e[p+1]-e[h+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function MW(e,t,r,i){for(var n=0,a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}iI.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[n][a][o]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r}});var HIe=ne((kpr,VIe)=>{"use strict";var Lzt=O_();VIe.exports=Pzt;function Pzt(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");t==null&&(t=1),r==null&&(r=Lzt(e,t));for(var i=0;i<t;i++){var n=r[t+i],a=r[i],o=i,s=e.length;if(n===1/0&&a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:e[o]===a?0:.5;else if(n===1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:0;else if(a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===a?0:1;else{var l=n-a;for(o=i;o<s;o+=t)isNaN(e[o])||(e[o]=l===0?.5:(e[o]-a)/l)}}return e}});var YIe=ne((Cpr,GIe)=>{"use strict";GIe.exports=function(){var e,t;if(typeof WeakMap!="function")return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return!(String(e)!=="[object WeakMap]"||typeof e.set!="function"||e.set({},1)!==e||typeof e.delete!="function"||typeof e.has!="function"||e.get(t)!=="one")}});var XIe=ne((Lpr,WIe)=>{"use strict";WIe.exports=function(){}});var d1=ne((Ppr,ZIe)=>{"use strict";var Rzt=XIe()();ZIe.exports=function(e){return e!==Rzt&&e!==null}});var EW=ne((Rpr,KIe)=>{"use strict";var Dzt=Object.create,Izt=Object.getPrototypeOf,jIe={};KIe.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||Dzt;return typeof e!="function"?!1:Izt(e(t(null),jIe))===jIe}});var kW=ne((Dpr,JIe)=>{"use strict";var Fzt=d1(),qzt={function:!0,object:!0};JIe.exports=function(e){return Fzt(e)&&qzt[typeof e]||!1}});var my=ne((Ipr,QIe)=>{"use strict";var zzt=d1();QIe.exports=function(e){if(!zzt(e))throw new TypeError("Cannot use null or undefined");return e}});var eFe=ne((Fpr,$Ie)=>{"use strict";var CW=Object.create,oI;EW()()||(oI=LW());$Ie.exports=function(){var e,t,r;return!oI||oI.level!==1?CW:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if(i==="__proto__"){t[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}t[i]=r}),Object.defineProperties(e,t),Object.defineProperty(oI,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(i,n){return CW(i===null?e:i,n)})}()});var LW=ne((qpr,tFe)=>{"use strict";var Ozt=kW(),Bzt=my(),Nzt=Object.prototype.isPrototypeOf,Uzt=Object.defineProperty,Vzt={configurable:!0,enumerable:!1,writable:!0,value:void 0},sI;sI=function(e,t){if(Bzt(e),t===null||Ozt(t))return e;throw new TypeError("Prototype must be null or an object")};tFe.exports=function(e){var t,r;return e?(e.level===2?e.set?(r=e.set,t=function(i,n){return r.call(sI(i,n),n),i}):t=function(i,n){return sI(i,n).__proto__=n,i}:t=function i(n,a){var o;return sI(n,a),o=Nzt.call(i.nullPolyfill,n),o&&delete i.nullPolyfill.__proto__,a===null&&(a=i.nullPolyfill),n.__proto__=a,o&&Uzt(i.nullPolyfill,"__proto__",Vzt),n},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e=Object.create(null),t={},r,i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{r=i.set,r.call(e,t)}catch(n){}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}return e.__proto__=t,Object.getPrototypeOf(e)===t?{level:2}:(e={},e.__proto__=t,Object.getPrototypeOf(e)===t?{level:1}:!1)}());eFe()});var lI=ne((zpr,rFe)=>{"use strict";rFe.exports=EW()()?Object.setPrototypeOf:LW()});var iFe=ne((Opr,nFe)=>{"use strict";var Hzt=kW();nFe.exports=function(e){if(!Hzt(e))throw new TypeError(e+" is not an Object");return e}});var oFe=ne((Bpr,aFe)=>{"use strict";var Gzt=Object.create(null),Yzt=Math.random;aFe.exports=function(){var e;do e=Yzt().toString(36).slice(2);while(Gzt[e]);return e}});var G_=ne((Npr,sFe)=>{"use strict";var Wzt=void 0;sFe.exports=function(e){return e!==Wzt&&e!==null}});var uI=ne((Upr,lFe)=>{"use strict";var Xzt=G_(),Zzt={object:!0,function:!0,undefined:!0};lFe.exports=function(e){return Xzt(e)?hasOwnProperty.call(Zzt,typeof e):!1}});var fFe=ne((Vpr,uFe)=>{"use strict";var jzt=uI();uFe.exports=function(e){if(!jzt(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(t){return!1}}});var hFe=ne((Hpr,cFe)=>{"use strict";var Kzt=fFe();cFe.exports=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch(t){return!1}return!Kzt(e)}});var PW=ne((Gpr,vFe)=>{"use strict";var Jzt=hFe(),Qzt=/^\s*class[\s{/}]/,$zt=Function.prototype.toString;vFe.exports=function(e){return!(!Jzt(e)||Qzt.test($zt.call(e)))}});var pFe=ne((Ypr,dFe)=>{"use strict";dFe.exports=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}});var yFe=ne((Wpr,gFe)=>{"use strict";gFe.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}});var xFe=ne((Xpr,mFe)=>{"use strict";var eOt=d1(),tOt=Object.keys;mFe.exports=function(e){return tOt(eOt(e)?Object(e):e)}});var bFe=ne((Zpr,_Fe)=>{"use strict";_Fe.exports=yFe()()?Object.keys:xFe()});var TFe=ne((jpr,wFe)=>{"use strict";var rOt=bFe(),nOt=my(),iOt=Math.max;wFe.exports=function(e,t){var r,i,n=iOt(arguments.length,2),a;for(e=Object(nOt(e)),a=function(o){try{e[o]=t[o]}catch(s){r||(r=s)}},i=1;i<n;++i)t=arguments[i],rOt(t).forEach(a);if(r!==void 0)throw r;return e}});var fI=ne((Kpr,AFe)=>{"use strict";AFe.exports=pFe()()?Object.assign:TFe()});var RW=ne((Jpr,MFe)=>{"use strict";var aOt=d1(),oOt=Array.prototype.forEach,sOt=Object.create,lOt=function(e,t){var r;for(r in e)t[r]=e[r]};MFe.exports=function(e){var t=sOt(null);return oOt.call(arguments,function(r){aOt(r)&&lOt(Object(r),t)}),t}});var EFe=ne((Qpr,SFe)=>{"use strict";var DW="razdwatrzy";SFe.exports=function(){return typeof DW.contains!="function"?!1:DW.contains("dwa")===!0&&DW.contains("foo")===!1}});var CFe=ne(($pr,kFe)=>{"use strict";var uOt=String.prototype.indexOf;kFe.exports=function(e){return uOt.call(this,e,arguments[1])>-1}});var IW=ne((e0r,LFe)=>{"use strict";LFe.exports=EFe()()?String.prototype.contains:CFe()});var xy=ne((t0r,IFe)=>{"use strict";var cI=G_(),PFe=PW(),RFe=fI(),DFe=RW(),t5=IW(),fOt=IFe.exports=function(e,t){var r,i,n,a,o;return arguments.length<2||typeof e!="string"?(a=t,t=e,e=null):a=arguments[2],cI(e)?(r=t5.call(e,"c"),i=t5.call(e,"e"),n=t5.call(e,"w")):(r=n=!0,i=!1),o={value:t,configurable:r,enumerable:i,writable:n},a?RFe(DFe(a),o):o};fOt.gs=function(e,t,r){var i,n,a,o;return typeof e!="string"?(a=r,r=t,t=e,e=null):a=arguments[3],cI(t)?PFe(t)?cI(r)?PFe(r)||(a=r,r=void 0):r=void 0:(a=t,t=r=void 0):t=void 0,cI(e)?(i=t5.call(e,"c"),n=t5.call(e,"e")):(i=!0,n=!1),o={get:t,set:r,configurable:i,enumerable:n},a?RFe(DFe(a),o):o}});var r5=ne((r0r,qFe)=>{"use strict";var FFe=Object.prototype.toString,cOt=FFe.call(function(){return arguments}());qFe.exports=function(e){return FFe.call(e)===cOt}});var n5=ne((n0r,OFe)=>{"use strict";var zFe=Object.prototype.toString,hOt=zFe.call("");OFe.exports=function(e){return typeof e=="string"||e&&typeof e=="object"&&(e instanceof String||zFe.call(e)===hOt)||!1}});var NFe=ne((i0r,BFe)=>{"use strict";BFe.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var HFe=ne((a0r,VFe)=>{var UFe=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};VFe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return UFe()}try{return __global__||UFe()}finally{delete Object.prototype.__global__}}()});var i5=ne((o0r,GFe)=>{"use strict";GFe.exports=NFe()()?globalThis:HFe()});var WFe=ne((s0r,YFe)=>{"use strict";var vOt=i5(),FW={object:!0,symbol:!0};YFe.exports=function(){var e=vOt.Symbol,t;if(typeof e!="function")return!1;t=e("test symbol");try{String(t)}catch(r){return!1}return!(!FW[typeof e.iterator]||!FW[typeof e.toPrimitive]||!FW[typeof e.toStringTag])}});var ZFe=ne((l0r,XFe)=>{"use strict";XFe.exports=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1}});var qW=ne((u0r,jFe)=>{"use strict";var dOt=ZFe();jFe.exports=function(e){if(!dOt(e))throw new TypeError(e+" is not a symbol");return e}});var e8e=ne((f0r,$Fe)=>{"use strict";var KFe=xy(),pOt=Object.create,JFe=Object.defineProperty,gOt=Object.prototype,QFe=pOt(null);$Fe.exports=function(e){for(var t=0,r,i;QFe[e+(t||"")];)++t;return e+=t||"",QFe[e]=!0,r="@@"+e,JFe(gOt,r,KFe.gs(null,function(n){i||(i=!0,JFe(this,r,KFe(n)),i=!1)})),r}});var r8e=ne((c0r,t8e)=>{"use strict";var C0=xy(),sf=i5().Symbol;t8e.exports=function(e){return Object.defineProperties(e,{hasInstance:C0("",sf&&sf.hasInstance||e("hasInstance")),isConcatSpreadable:C0("",sf&&sf.isConcatSpreadable||e("isConcatSpreadable")),iterator:C0("",sf&&sf.iterator||e("iterator")),match:C0("",sf&&sf.match||e("match")),replace:C0("",sf&&sf.replace||e("replace")),search:C0("",sf&&sf.search||e("search")),species:C0("",sf&&sf.species||e("species")),split:C0("",sf&&sf.split||e("split")),toPrimitive:C0("",sf&&sf.toPrimitive||e("toPrimitive")),toStringTag:C0("",sf&&sf.toStringTag||e("toStringTag")),unscopables:C0("",sf&&sf.unscopables||e("unscopables"))})}});var a8e=ne((h0r,i8e)=>{"use strict";var n8e=xy(),yOt=qW(),a5=Object.create(null);i8e.exports=function(e){return Object.defineProperties(e,{for:n8e(function(t){return a5[t]?a5[t]:a5[t]=e(String(t))}),keyFor:n8e(function(t){var r;yOt(t);for(r in a5)if(a5[r]===t)return r})})}});var l8e=ne((v0r,s8e)=>{"use strict";var dg=xy(),zW=qW(),hI=i5().Symbol,mOt=e8e(),xOt=r8e(),_Ot=a8e(),bOt=Object.create,OW=Object.defineProperties,vI=Object.defineProperty,tv,$3,o8e;if(typeof hI=="function")try{String(hI()),o8e=!0}catch(e){}else hI=null;$3=function(t){if(this instanceof $3)throw new TypeError("Symbol is not a constructor");return tv(t)};s8e.exports=tv=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o8e?hI(t):(r=bOt($3.prototype),t=t===void 0?"":String(t),OW(r,{__description__:dg("",t),__name__:dg("",mOt(t))}))};xOt(tv);_Ot(tv);OW($3.prototype,{constructor:dg(tv),toString:dg("",function(){return this.__name__})});OW(tv.prototype,{toString:dg(function(){return"Symbol ("+zW(this).__description__+")"}),valueOf:dg(function(){return zW(this)})});vI(tv.prototype,tv.toPrimitive,dg("",function(){var e=zW(this);return typeof e=="symbol"?e:e.toString()}));vI(tv.prototype,tv.toStringTag,dg("c","Symbol"));vI($3.prototype,tv.toStringTag,dg("c",tv.prototype[tv.toStringTag]));vI($3.prototype,tv.toPrimitive,dg("c",tv.prototype[tv.toPrimitive]))});var p1=ne((d0r,u8e)=>{"use strict";u8e.exports=WFe()()?i5().Symbol:l8e()});var c8e=ne((p0r,f8e)=>{"use strict";var wOt=my();f8e.exports=function(){return wOt(this).length=0,this}});var eT=ne((g0r,h8e)=>{"use strict";h8e.exports=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}});var d8e=ne((y0r,v8e)=>{"use strict";var TOt=G_(),AOt=uI(),MOt=Object.prototype.toString;v8e.exports=function(e){if(!TOt(e))return null;if(AOt(e)){var t=e.toString;if(typeof t!="function"||t===MOt)return null}try{return""+e}catch(r){return null}}});var g8e=ne((m0r,p8e)=>{"use strict";p8e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(r){return null}}}});var m8e=ne((x0r,y8e)=>{"use strict";var SOt=g8e(),EOt=/[\n\r\u2028\u2029]/g;y8e.exports=function(e){var t=SOt(e);return t===null?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"\u2026"),t=t.replace(EOt,function(r){switch(r){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),t)}});var BW=ne((_0r,b8e)=>{"use strict";var x8e=G_(),kOt=uI(),COt=d8e(),LOt=m8e(),_8e=function(e,t){return e.replace("%v",LOt(t))};b8e.exports=function(e,t,r){if(!kOt(r))throw new TypeError(_8e(t,e));if(!x8e(e)){if("default"in r)return r.default;if(r.isOptional)return null}var i=COt(r.errorMessage);throw x8e(i)||(i=t),new TypeError(_8e(i,e))}});var T8e=ne((b0r,w8e)=>{"use strict";var POt=BW(),ROt=G_();w8e.exports=function(e){return ROt(e)?e:POt(e,"Cannot use %v",arguments[1])}});var M8e=ne((w0r,A8e)=>{"use strict";var DOt=BW(),IOt=PW();A8e.exports=function(e){return IOt(e)?e:DOt(e,"%v is not a plain function",arguments[1])}});var E8e=ne((T0r,S8e)=>{"use strict";S8e.exports=function(){var e=Array.from,t,r;return typeof e!="function"?!1:(t=["raz","dwa"],r=e(t),!!(r&&r!==t&&r[1]==="dwa"))}});var C8e=ne((A0r,k8e)=>{"use strict";var FOt=Object.prototype.toString,qOt=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);k8e.exports=function(e){return typeof e=="function"&&qOt(FOt.call(e))}});var P8e=ne((M0r,L8e)=>{"use strict";L8e.exports=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1}});var D8e=ne((S0r,R8e)=>{"use strict";R8e.exports=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1}});var F8e=ne((E0r,I8e)=>{"use strict";I8e.exports=P8e()()?Math.sign:D8e()});var z8e=ne((k0r,q8e)=>{"use strict";var zOt=F8e(),OOt=Math.abs,BOt=Math.floor;q8e.exports=function(e){return isNaN(e)?0:(e=Number(e),e===0||!isFinite(e)?e:zOt(e)*BOt(OOt(e)))}});var B8e=ne((C0r,O8e)=>{"use strict";var NOt=z8e(),UOt=Math.max;O8e.exports=function(e){return UOt(0,NOt(e))}});var H8e=ne((L0r,V8e)=>{"use strict";var VOt=p1().iterator,HOt=r5(),GOt=C8e(),YOt=B8e(),N8e=eT(),WOt=my(),XOt=d1(),ZOt=n5(),U8e=Array.isArray,NW=Function.prototype.call,Y_={configurable:!0,enumerable:!0,writable:!0,value:null},UW=Object.defineProperty;V8e.exports=function(e){var t=arguments[1],r=arguments[2],i,n,a,o,s,l,u,f,c,h;if(e=Object(WOt(e)),XOt(t)&&N8e(t),!this||this===Array||!GOt(this)){if(!t){if(HOt(e))return s=e.length,s!==1?Array.apply(null,e):(o=new Array(1),o[0]=e[0],o);if(U8e(e)){for(o=new Array(s=e.length),n=0;n<s;++n)o[n]=e[n];return o}}o=[]}else i=this;if(!U8e(e)){if((c=e[VOt])!==void 0){for(u=N8e(c).call(e),i&&(o=new i),f=u.next(),n=0;!f.done;)h=t?NW.call(t,r,f.value,n):f.value,i?(Y_.value=h,UW(o,n,Y_)):o[n]=h,f=u.next(),++n;s=n}else if(ZOt(e)){for(s=e.length,i&&(o=new i),n=0,a=0;n<s;++n)h=e[n],n+1<s&&(l=h.charCodeAt(0),l>=55296&&l<=56319&&(h+=e[++n])),h=t?NW.call(t,r,h,a):h,i?(Y_.value=h,UW(o,a,Y_)):o[a]=h,++a;s=a}}if(s===void 0)for(s=YOt(e.length),i&&(o=new i(s)),n=0;n<s;++n)h=t?NW.call(t,r,e[n],n):e[n],i?(Y_.value=h,UW(o,n,Y_)):o[n]=h;return i&&(Y_.value=null,o.length=s),o}});var Y8e=ne((P0r,G8e)=>{"use strict";G8e.exports=E8e()()?Array.from:H8e()});var X8e=ne((R0r,W8e)=>{"use strict";var jOt=Y8e(),KOt=fI(),JOt=my();W8e.exports=function(e){var t=Object(JOt(e)),r=arguments[1],i=Object(arguments[2]);if(t!==e&&!r)return t;var n={};return r?jOt(r,function(a){(i.ensure||a in e)&&(n[a]=e[a])}):KOt(n,e),n}});var K8e=ne((D0r,j8e)=>{"use strict";var QOt=eT(),$Ot=my(),e7t=Function.prototype.bind,Z8e=Function.prototype.call,t7t=Object.keys,r7t=Object.prototype.propertyIsEnumerable;j8e.exports=function(e,t){return function(r,i){var n,a=arguments[2],o=arguments[3];return r=Object($Ot(r)),QOt(i),n=t7t(r),o&&n.sort(typeof o=="function"?e7t.call(o,r):void 0),typeof e!="function"&&(e=n[e]),Z8e.call(e,n,function(s,l){return r7t.call(r,s)?Z8e.call(i,a,r[s],s,r,l):t})}}});var Q8e=ne((I0r,J8e)=>{"use strict";J8e.exports=K8e()("forEach")});var eqe=ne((F0r,$8e)=>{"use strict";var n7t=eT(),i7t=Q8e(),a7t=Function.prototype.call;$8e.exports=function(e,t){var r={},i=arguments[2];return n7t(t),i7t(e,function(n,a,o,s){r[a]=a7t.call(t,i,n,a,o,s)}),r}});var iqe=ne((q0r,nqe)=>{"use strict";var o7t=G_(),s7t=T8e(),tqe=M8e(),l7t=X8e(),u7t=RW(),f7t=eqe(),c7t=Function.prototype.bind,h7t=Object.defineProperty,v7t=Object.prototype.hasOwnProperty,rqe;rqe=function(e,t,r){var i=s7t(t)&&tqe(t.value),n;return n=l7t(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&v7t.call(this,e)?i:(t.value=c7t.call(i,r.resolveContext?r.resolveContext(this):this),h7t(this,e,t),this[e])},n};nqe.exports=function(e){var t=u7t(arguments[1]);return o7t(t.resolveContext)&&tqe(t.resolveContext),f7t(e,function(r,i){return rqe(i,r,t)})}});var VW=ne((z0r,lqe)=>{"use strict";var d7t=c8e(),p7t=fI(),g7t=eT(),y7t=my(),dd=xy(),m7t=iqe(),aqe=p1(),oqe=Object.defineProperty,sqe=Object.defineProperties,o5;lqe.exports=o5=function(e,t){if(!(this instanceof o5))throw new TypeError("Constructor requires 'new'");sqe(this,{__list__:dd("w",y7t(e)),__context__:dd("w",t),__nextIndex__:dd("w",0)}),t&&(g7t(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))};delete o5.prototype.constructor;sqe(o5.prototype,p7t({_next:dd(function(){var e;if(this.__list__){if(this.__redo__&&(e=this.__redo__.shift(),e!==void 0))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:dd(function(){return this._createResult(this._next())}),_createResult:dd(function(e){return e===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:dd(function(e){return this.__list__[e]}),_unBind:dd(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:dd(function(){return"[object "+(this[aqe.toStringTag]||"Object")+"]"})},m7t({_onAdd:dd(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){oqe(this,"__redo__",dd("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:dd(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(r,i){r>e&&(this.__redo__[i]=--r)},this)))}),_onClear:dd(function(){this.__redo__&&d7t.call(this.__redo__),this.__nextIndex__=0})})));oqe(o5.prototype,aqe.iterator,dd(function(){return this}))});var vqe=ne((O0r,hqe)=>{"use strict";var uqe=lI(),fqe=IW(),HW=xy(),x7t=p1(),GW=VW(),cqe=Object.defineProperty,tT;tT=hqe.exports=function(e,t){if(!(this instanceof tT))throw new TypeError("Constructor requires 'new'");GW.call(this,e),t?fqe.call(t,"key+value")?t="key+value":fqe.call(t,"key")?t="key":t="value":t="value",cqe(this,"__kind__",HW("",t))};uqe&&uqe(tT,GW);delete tT.prototype.constructor;tT.prototype=Object.create(GW.prototype,{_resolve:HW(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})});cqe(tT.prototype,x7t.toStringTag,HW("c","Array Iterator"))});var yqe=ne((B0r,gqe)=>{"use strict";var dqe=lI(),dI=xy(),_7t=p1(),YW=VW(),pqe=Object.defineProperty,rT;rT=gqe.exports=function(e){if(!(this instanceof rT))throw new TypeError("Constructor requires 'new'");e=String(e),YW.call(this,e),pqe(this,"__length__",dI("",e.length))};dqe&&dqe(rT,YW);delete rT.prototype.constructor;rT.prototype=Object.create(YW.prototype,{_next:dI(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:dI(function(e){var t=this.__list__[e],r;return this.__nextIndex__===this.__length__?t:(r=t.charCodeAt(0),r>=55296&&r<=56319?t+this.__list__[this.__nextIndex__++]:t)})});pqe(rT.prototype,_7t.toStringTag,dI("c","String Iterator"))});var xqe=ne((N0r,mqe)=>{"use strict";var b7t=r5(),w7t=d1(),T7t=n5(),A7t=p1().iterator,M7t=Array.isArray;mqe.exports=function(e){return w7t(e)?M7t(e)||T7t(e)||b7t(e)?!0:typeof e[A7t]=="function":!1}});var bqe=ne((U0r,_qe)=>{"use strict";var S7t=xqe();_qe.exports=function(e){if(!S7t(e))throw new TypeError(e+" is not iterable");return e}});var WW=ne((V0r,Aqe)=>{"use strict";var E7t=r5(),k7t=n5(),wqe=vqe(),C7t=yqe(),L7t=bqe(),Tqe=p1().iterator;Aqe.exports=function(e){return typeof L7t(e)[Tqe]=="function"?e[Tqe]():E7t(e)?new wqe(e):k7t(e)?new C7t(e):new wqe(e)}});var Sqe=ne((H0r,Mqe)=>{"use strict";var P7t=r5(),R7t=eT(),D7t=n5(),I7t=WW(),F7t=Array.isArray,XW=Function.prototype.call,q7t=Array.prototype.some;Mqe.exports=function(e,t){var r,i=arguments[2],n,a,o,s,l,u,f;if(F7t(e)||P7t(e)?r="array":D7t(e)?r="string":e=I7t(e),R7t(t),a=function(){o=!0},r==="array"){q7t.call(e,function(c){return XW.call(t,i,c,a),o});return}if(r==="string"){for(l=e.length,s=0;s<l&&(u=e[s],s+1<l&&(f=u.charCodeAt(0),f>=55296&&f<=56319&&(u+=e[++s])),XW.call(t,i,u,a),!o);++s);return}for(n=e.next();!n.done;){if(XW.call(t,i,n.value,a),o)return;n=e.next()}}});var kqe=ne((G0r,Eqe)=>{"use strict";Eqe.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()});var Pqe=ne((Y0r,Lqe)=>{"use strict";var z7t=d1(),gI=lI(),pI=iFe(),O7t=my(),B7t=oFe(),_y=xy(),N7t=WW(),U7t=Sqe(),V7t=p1().toStringTag,Cqe=kqe(),H7t=Array.isArray,jW=Object.defineProperty,ZW=Object.prototype.hasOwnProperty,G7t=Object.getPrototypeOf,g1;Lqe.exports=g1=function(){var e=arguments[0],t;if(!(this instanceof g1))throw new TypeError("Constructor requires 'new'");return t=Cqe&&gI&&WeakMap!==g1?gI(new WeakMap,G7t(this)):this,z7t(e)&&(H7t(e)||(e=N7t(e))),jW(t,"__weakMapData__",_y("c","$weakMap$"+B7t())),e&&U7t(e,function(r){O7t(r),t.set(r[0],r[1])}),t};Cqe&&(gI&&gI(g1,WeakMap),g1.prototype=Object.create(WeakMap.prototype,{constructor:_y(g1)}));Object.defineProperties(g1.prototype,{delete:_y(function(e){return ZW.call(pI(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:_y(function(e){if(ZW.call(pI(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:_y(function(e){return ZW.call(pI(e),this.__weakMapData__)}),set:_y(function(e,t){return jW(pI(e),this.__weakMapData__,_y("c",t)),this}),toString:_y(function(){return"[object WeakMap]"})});jW(g1.prototype,V7t,_y("c","WeakMap"))});var KW=ne((W0r,Rqe)=>{"use strict";Rqe.exports=YIe()()?WeakMap:Pqe()});var Iqe=ne((X0r,Dqe)=>{"use strict";Dqe.exports=function(e,t,r){if(typeof Array.prototype.findIndex=="function")return e.findIndex(t,r);if(typeof t!="function")throw new TypeError("predicate must be a function");var i=Object(e),n=i.length;if(n===0)return-1;for(var a=0;a<n;a++)if(t.call(r,i[a],a,i))return a;return-1}});var $W=ne((Z0r,zqe)=>{"use strict";var yI=n1(),Y7t=O_(),QW=of(),W7t=vg(),X7t=B_(),Fqe=UIe(),Z7t=HIe(),{float32:j7t,fract32:JW}=$D(),K7t=KW(),qqe=Y3(),J7t=Iqe(),Q7t=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,$7t=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,eBt=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,tBt=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,rBt=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,nBt=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;zqe.exports=cl;function cl(e,t){if(!(this instanceof cl))return new cl(e,t);if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=cl.shaders.has(e)?cl.shaders.get(e):cl.shaders.set(e,cl.createShaders(e)).get(e),this.update(t)}cl.dashMult=2;cl.maxPatternLength=256;cl.precisionThreshold=3e6;cl.maxPoints=1e4;cl.maxLines=2048;cl.shaders=new K7t;cl.createShaders=function(e){let t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:(o,s)=>s.join==="round"?2:1,miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight],depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(o,s)=>!s.overlay},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},i=e(QW({vert:Q7t,frag:$7t,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r)),n;try{n=e(QW({cull:{enable:!0,face:"back"},vert:rBt,frag:nBt,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(o){n=i}return{fill:e({primitive:"triangle",elements:(o,s)=>s.triangles,offset:0,vert:eBt,frag:tBt,uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight]},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport}),rect:i,miter:n}};cl.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};cl.prototype.render=function(...e){e.length&&this.update(...e),this.draw()};cl.prototype.draw=function(...e){return(e.length?e:this.passes).forEach((t,r)=>{if(t&&Array.isArray(t))return this.draw(...t);typeof t=="number"&&(t=this.passes[t]),t&&t.count>1&&t.opacity&&(this.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&this.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>cl.precisionThreshold||t.scale[1]*t.viewport.height>cl.precisionThreshold?this.shaders.rect(t):t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=cl.maxPoints)?this.shaders.rect(t):this.shaders.miter(t)))}),this};cl.prototype.update=function(e){if(!e)return;e.length!=null?typeof e[0]=="number"&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);let{regl:t,gl:r}=this;if(e.forEach((n,a)=>{let o=this.passes[a];if(n!==void 0){if(n===null){this.passes[a]=null;return}if(typeof n[0]=="number"&&(n={positions:n}),n=W7t(n,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),o||(this.passes[a]=o={id:a,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},n=QW({},cl.defaults,n)),n.thickness!=null&&(o.thickness=parseFloat(n.thickness)),n.opacity!=null&&(o.opacity=parseFloat(n.opacity)),n.miterLimit!=null&&(o.miterLimit=parseFloat(n.miterLimit)),n.overlay!=null&&(o.overlay=!!n.overlay,a<cl.maxLines&&(o.depth=2*(cl.maxLines-1-a%cl.maxLines)/cl.maxLines-1)),n.join!=null&&(o.join=n.join),n.hole!=null&&(o.hole=n.hole),n.fill!=null&&(o.fill=n.fill?yI(n.fill,"uint8"):null),n.viewport!=null&&(o.viewport=qqe(n.viewport)),o.viewport||(o.viewport=qqe([r.drawingBufferWidth,r.drawingBufferHeight])),n.close!=null&&(o.close=n.close),n.positions===null&&(n.positions=[]),n.positions){let u,f;if(n.positions.x&&n.positions.y){let p=n.positions.x,_=n.positions.y;f=o.count=Math.max(p.length,_.length),u=new Float64Array(f*2);for(let T=0;T<f;T++)u[T*2]=p[T],u[T*2+1]=_[T]}else u=X7t(n.positions,"float64"),f=o.count=Math.floor(u.length/2);let c=o.bounds=Y7t(u,2);if(o.fill){let p=[],_={},T=0;for(let g=0,A=0,b=o.count;g<b;g++){let w=u[g*2],k=u[g*2+1];isNaN(w)||isNaN(k)||w==null||k==null?(w=u[T*2],k=u[T*2+1],_[g]=T):T=g,p[A++]=w,p[A++]=k}if(n.splitNull){o.count-1 in _||(_[o.count]=o.count-1);let g=Object.keys(_).map(Number).sort((k,x)=>k-x),A=[],b=0,w=o.hole!=null?o.hole[0]:null;if(w!=null){let k=J7t(g,x=>x>=w);g=g.slice(0,k),g.push(w)}for(let k=0;k<g.length;k++){let x=p.slice(b*2,g[k]*2).concat(w?p.slice(w*2):[]),E=(o.hole||[]).map(d=>d-w+(g[k]-b)),M=Fqe(x,E);M=M.map(d=>d+b+(d+b<g[k]?0:w-g[k])),A.push(...M),b=g[k]+1}for(let k=0,x=A.length;k<x;k++)_[A[k]]!=null&&(A[k]=_[A[k]]);o.triangles=A}else{let g=Fqe(p,o.hole||[]);for(let A=0,b=g.length;A<b;A++)_[g[A]]!=null&&(g[A]=_[g[A]]);o.triangles=g}}let h=new Float64Array(u);Z7t(h,2,c);let v=new Float64Array(f*2+6);o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[0]=h[f*2-4],v[1]=h[f*2-3]):(v[0]=h[f*2-2],v[1]=h[f*2-1]):(v[0]=h[0],v[1]=h[1]),v.set(h,2),o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[f*2+2]=h[2],v[f*2+3]=h[3],o.count-=1):(v[f*2+2]=h[0],v[f*2+3]=h[1],v[f*2+4]=h[2],v[f*2+5]=h[3]):(v[f*2+2]=h[f*2-2],v[f*2+3]=h[f*2-1],v[f*2+4]=h[f*2-2],v[f*2+5]=h[f*2-1]);var s=j7t(v);o.positionBuffer(s);var l=JW(v,s);o.positionFractBuffer(l)}if(n.range?o.range=n.range:o.range||(o.range=o.bounds),(n.range||n.positions)&&o.count){let u=o.bounds,f=u[2]-u[0],c=u[3]-u[1],h=o.range[2]-o.range[0],v=o.range[3]-o.range[1];o.scale=[f/h,c/v],o.translate=[-o.range[0]/h+u[0]/h||0,-o.range[1]/v+u[1]/v||0],o.scaleFract=JW(o.scale),o.translateFract=JW(o.translate)}if(n.dashes){let u=0,f;if(!n.dashes||n.dashes.length<2)u=1,f=new Uint8Array([255,255,255,255,255,255,255,255]);else{u=0;for(let v=0;v<n.dashes.length;++v)u+=n.dashes[v];f=new Uint8Array(u*cl.dashMult);let c=0,h=255;for(let v=0;v<2;v++)for(let p=0;p<n.dashes.length;++p){for(let _=0,T=n.dashes[p]*cl.dashMult*.5;_<T;++_)f[c++]=h;h^=255}}o.dashLength=u,o.dashTexture({channels:1,data:f,width:f.length,height:1,mag:"linear",min:"linear"},0,0)}if(n.color){let u=o.count,f=n.color;f||(f="transparent");let c=new Uint8Array(u*4+4);if(!Array.isArray(f)||typeof f[0]=="number"){let h=yI(f,"uint8");for(let v=0;v<u+1;v++)c.set(h,v*4)}else{for(let h=0;h<u;h++){let v=yI(f[h],"uint8");c.set(v,h*4)}c.set(yI(f[0],"uint8"),u*4)}o.colorBuffer({usage:"dynamic",type:"uint8",data:c})}}}),e.length<this.passes.length){for(let n=e.length;n<this.passes.length;n++){let a=this.passes[n];a&&(a.colorBuffer.destroy(),a.positionBuffer.destroy(),a.dashTexture.destroy())}this.passes.length=e.length}let i=[];for(let n=0;n<this.passes.length;n++)this.passes[n]!==null&&i.push(this.passes[n]);return this.passes=i,this};cl.prototype.destroy=function(){return this.passes.forEach(e=>{e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this}});var Vqe=ne((j0r,Uqe)=>{"use strict";var iBt=O_(),aBt=n1(),oBt=_W(),sBt=vg(),Oqe=of(),Bqe=B_(),{float32:lBt,fract32:eX}=$D();Uqe.exports=uBt;var Nqe=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function uBt(e,t){if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let r=e._gl,i,n,a,o,s,l,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},f=[];return o=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),n=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=e.buffer({usage:"static",type:"float",data:Nqe}),p(t),i=e({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:(T,g)=>[g.viewport.x,g.viewport.y,T.viewportWidth,T.viewportHeight]},attributes:{color:{buffer:o,offset:(T,g)=>g.offset*4,divisor:1},position:{buffer:n,offset:(T,g)=>g.offset*8,divisor:1},positionFract:{buffer:a,offset:(T,g)=>g.offset*8,divisor:1},error:{buffer:s,offset:(T,g)=>g.offset*16,divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:Nqe.length}),Oqe(c,{update:p,draw:h,destroy:_,regl:e,gl:r,canvas:r.canvas,groups:f}),c;function c(T){T?p(T):T===null&&_(),h()}function h(T){if(typeof T=="number")return v(T);T&&!Array.isArray(T)&&(T=[T]),e._refresh(),f.forEach((g,A)=>{if(g){if(T&&(T[A]?g.draw=!0:g.draw=!1),!g.draw){g.draw=!0;return}v(A)}})}function v(T){typeof T=="number"&&(T=f[T]),T!=null&&T&&T.count&&T.color&&T.opacity&&T.positions&&T.positions.length>1&&(T.scaleRatio=[T.scale[0]*T.viewport.width,T.scale[1]*T.viewport.height],i(T),T.after&&T.after(T))}function p(T){if(!T)return;T.length!=null?typeof T[0]=="number"&&(T=[{positions:T}]):Array.isArray(T)||(T=[T]);let g=0,A=0;if(c.groups=f=T.map((k,x)=>{let E=f[x];if(k)typeof k=="function"?k={after:k}:typeof k[0]=="number"&&(k={positions:k});else return E;return k=sBt(k,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),E||(f[x]=E={id:x,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},k=Oqe({},u,k)),oBt(E,k,[{lineWidth:M=>+M*.5,capSize:M=>+M*.5,opacity:parseFloat,errors:M=>(M=Bqe(M),A+=M.length,M),positions:(M,d)=>(M=Bqe(M,"float64"),d.count=Math.floor(M.length/2),d.bounds=iBt(M,2),d.offset=g,g+=d.count,M)},{color:(M,d)=>{let C=d.count;if(M||(M="transparent"),!Array.isArray(M)||typeof M[0]=="number"){let P=M;M=Array(C);for(let D=0;D<C;D++)M[D]=P}if(M.length<C)throw Error("Not enough colors");let S=new Uint8Array(C*4);for(let P=0;P<C;P++){let D=aBt(M[P],"uint8");S.set(D,P*4)}return S},range:(M,d,C)=>{let S=d.bounds;return M||(M=S),d.scale=[1/(M[2]-M[0]),1/(M[3]-M[1])],d.translate=[-M[0],-M[1]],d.scaleFract=eX(d.scale),d.translateFract=eX(d.translate),M},viewport:M=>{let d;return Array.isArray(M)?d={x:M[0],y:M[1],width:M[2]-M[0],height:M[3]-M[1]}:M?(d={x:M.x||M.left||0,y:M.y||M.top||0},M.right?d.width=M.right-d.x:d.width=M.w||M.width||0,M.bottom?d.height=M.bottom-d.y:d.height=M.h||M.height||0):d={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight},d}}]),E}),g||A){let k=f.reduce((d,C,S)=>d+(C?C.count:0),0),x=new Float64Array(k*2),E=new Uint8Array(k*4),M=new Float32Array(k*4);f.forEach((d,C)=>{if(!d)return;let{positions:S,count:P,offset:D,color:z,errors:O}=d;P&&(E.set(z,D*4),M.set(O,D*4),x.set(S,D*2))});var b=lBt(x);n(b);var w=eX(x,b);a(w),o(E),s(M)}}function _(){n.destroy(),a.destroy(),o.destroy(),s.destroy(),l.destroy()}}});var Yqe=ne((K0r,Gqe)=>{var Hqe=/[\'\"]/;Gqe.exports=function(t){return t?(Hqe.test(t.charAt(0))&&(t=t.substr(1)),Hqe.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}});var tX=ne(()=>{});var rX=ne(()=>{});var nX=ne(()=>{});var iX=ne(()=>{});var aX=ne(()=>{});var jqe=ne((sgr,Zqe)=>{"use strict";function Wqe(e,t){if(typeof e!="string")return[e];var r=[e];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],n=t.escape||"___",a=!!t.flat;i.forEach(function(l){var u=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),f=[];function c(h,v,p){var _=r.push(h.slice(l[0].length,-l[1].length))-1;return f.push(_),n+_+n}r.forEach(function(h,v){for(var p,_=0;h!=p;)if(p=h,h=h.replace(u,c),_++>1e4)throw Error("References have circular dependency. Please, check them.");r[v]=h}),f=f.reverse(),r=r.map(function(h){return f.forEach(function(v){h=h.replace(new RegExp("(\\"+n+v+"\\"+n+")","g"),l[0]+"$1"+l[1])}),h})});var o=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(l,u,f){for(var c=[],h,v=0;h=o.exec(l);){if(v++>1e4)throw Error("Circular references in parenthesis");c.push(l.slice(0,h.index)),c.push(s(u[h[1]],u)),l=l.slice(h.index+h[0].length)}return c.push(l),c}return a?r:s(r[0],r)}function Xqe(e,t){if(t&&t.flat){var r=t&&t.escape||"___",i=e[0],n;if(!i)return"";for(var a=new RegExp("\\"+r+"([0-9]+)\\"+r),o=0;i!=n;){if(o++>1e4)throw Error("Circular references in "+e);n=i,i=i.replace(a,s)}return i}return e.reduce(function l(u,f){return Array.isArray(f)&&(f=f.reduce(l,"")),u+f},"");function s(l,u){if(e[u]==null)throw Error("Reference "+u+"is undefined");return e[u]}}function oX(e,t){return Array.isArray(e)?Xqe(e,t):Wqe(e,t)}oX.parse=Wqe;oX.stringify=Xqe;Zqe.exports=oX});var Qqe=ne((lgr,Jqe)=>{"use strict";var Kqe=jqe();Jqe.exports=function(t,r,i){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");i?(typeof i=="string"||Array.isArray(i))&&(i={ignore:i}):i={},i.escape==null&&(i.escape=!0),i.ignore==null?i.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof i.ignore=="string"&&(i.ignore=[i.ignore]),i.ignore=i.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var n=Kqe.parse(t,{flat:!0,brackets:i.ignore}),a=n[0],o=a.split(r);if(i.escape){for(var s=[],l=0;l<o.length;l++){var u=o[l],f=o[l+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(s.push(u+r+f),l++):s.push(u)}o=s}for(var l=0;l<o.length;l++)n[0]=o[l],o[l]=Kqe.stringify(n,{flat:!0});return o}});var $qe=ne(()=>{});var sX=ne((cgr,eze)=>{"use strict";var fBt=$qe();eze.exports={isSize:function(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||fBt.indexOf(t)!==-1}}});var ize=ne((hgr,nze)=>{"use strict";var cBt=Yqe(),hBt=tX(),vBt=rX(),dBt=nX(),pBt=iX(),gBt=aX(),lX=Qqe(),yBt=sX().isSize;nze.exports=rze;var s5=rze.cache={};function rze(e){if(typeof e!="string")throw new Error("Font argument must be a string.");if(s5[e])return s5[e];if(e==="")throw new Error("Cannot parse an empty string.");if(vBt.indexOf(e)!==-1)return s5[e]={system:e};for(var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=lX(e,/\s+/),i;i=r.shift();){if(hBt.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(a){t[a]=i}),s5[e]=t;if(pBt.indexOf(i)!==-1){t.style=i;continue}if(i==="normal"||i==="small-caps"){t.variant=i;continue}if(gBt.indexOf(i)!==-1){t.stretch=i;continue}if(dBt.indexOf(i)!==-1){t.weight=i;continue}if(yBt(i)){var n=lX(i,"/");if(t.size=n[0],n[1]!=null?t.lineHeight=tze(n[1]):r[0]==="/"&&(r.shift(),t.lineHeight=tze(r.shift())),!r.length)throw new Error("Missing required font-family.");return t.family=lX(r.join(" "),/\s*,\s*/).map(cBt),s5[e]=t}throw new Error("Unknown or unsupported font token: "+i)}throw new Error("Missing required font-size.")}function tze(e){var t=parseFloat(e);return t.toString()===e?t:e}});var fX=ne((vgr,aze)=>{"use strict";var mBt=vg(),xBt=sX().isSize,_Bt=u5(tX()),bBt=u5(rX()),wBt=u5(nX()),TBt=u5(iX()),ABt=u5(aX()),MBt={normal:1,"small-caps":1},SBt={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},uX={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};aze.exports=function(t){if(t=mBt(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),t.system)return t.system&&l5(t.system,bBt),t.system;if(l5(t.style,TBt),l5(t.variant,MBt),l5(t.weight,wBt),l5(t.stretch,ABt),t.size==null&&(t.size=uX.size),typeof t.size=="number"&&(t.size+="px"),!xBt)throw Error("Bad size value `"+t.size+"`");t.family||(t.family=uX.family),Array.isArray(t.family)&&(t.family.length||(t.family=[uX.family]),t.family=t.family.map(function(i){return SBt[i]?i:'"'+i+'"'}).join(", "));var r=[];return r.push(t.style),t.variant!==t.style&&r.push(t.variant),t.weight!==t.variant&&t.weight!==t.style&&r.push(t.weight),t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style&&r.push(t.stretch),r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""=="1"?"":"/"+t.lineHeight)),r.push(t.family),r.filter(Boolean).join(" ")};function l5(e,t){if(e&&!t[e]&&!_Bt[e])throw Error("Unknown keyword `"+e+"`");return e}function u5(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=1;return t}});var sze=ne((dgr,oze)=>{"use strict";oze.exports={parse:ize(),stringify:fX()}});var vX=ne((cX,hX)=>{(function(e,t){typeof cX=="object"&&typeof hX!="undefined"?hX.exports=t():typeof define=="function"&&define.amd?define(t):e.createREGL=t()})(cX,function(){"use strict";var e=function(We,Gt){for(var or=Object.keys(Gt),qr=0;qr<or.length;++qr)We[or[qr]]=Gt[or[qr]];return We},t=0,r=0,i=5,n=6;function a(We,Gt){this.id=t++,this.type=We,this.data=Gt}function o(We){return We.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(We){if(We.length===0)return[];var Gt=We.charAt(0),or=We.charAt(We.length-1);if(We.length>1&&Gt===or&&(Gt==='"'||Gt==="'"))return['"'+o(We.substr(1,We.length-2))+'"'];var qr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(We);if(qr)return s(We.substr(0,qr.index)).concat(s(qr[1])).concat(s(We.substr(qr.index+qr[0].length)));var $r=We.split(".");if($r.length===1)return['"'+o(We)+'"'];for(var jr=[],Kr=0;Kr<$r.length;++Kr)jr=jr.concat(s($r[Kr]));return jr}function l(We){return"["+s(We).join("][")+"]"}function u(We,Gt){return new a(We,l(Gt+""))}function f(We){return typeof We=="function"&&!We._reglType||We instanceof a}function c(We,Gt){if(typeof We=="function")return new a(r,We);if(typeof We=="number"||typeof We=="boolean")return new a(i,We);if(Array.isArray(We))return new a(n,We.map(function(or,qr){return c(or,Gt+"["+qr+"]")}));if(We instanceof a)return We}var h={DynamicVariable:a,define:u,isDynamic:f,unbox:c,accessor:l},v={next:typeof requestAnimationFrame=="function"?function(We){return requestAnimationFrame(We)}:function(We){return setTimeout(We,16)},cancel:typeof cancelAnimationFrame=="function"?function(We){return cancelAnimationFrame(We)}:clearTimeout},p=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function _(){var We={"":0},Gt=[""];return{id:function(or){var qr=We[or];return qr||(qr=We[or]=Gt.length,Gt.push(or),qr)},str:function(or){return Gt[or]}}}function T(We,Gt,or){var qr=document.createElement("canvas");e(qr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),We.appendChild(qr),We===document.body&&(qr.style.position="absolute",e(We.style,{margin:0,padding:0}));function $r(){var yn=window.innerWidth,Qn=window.innerHeight;if(We!==document.body){var Wn=qr.getBoundingClientRect();yn=Wn.right-Wn.left,Qn=Wn.bottom-Wn.top}qr.width=or*yn,qr.height=or*Qn}var jr;We!==document.body&&typeof ResizeObserver=="function"?(jr=new ResizeObserver(function(){setTimeout($r)}),jr.observe(We)):window.addEventListener("resize",$r,!1);function Kr(){jr?jr.disconnect():window.removeEventListener("resize",$r),We.removeChild(qr)}return $r(),{canvas:qr,onDestroy:Kr}}function g(We,Gt){function or(qr){try{return We.getContext(qr,Gt)}catch($r){return null}}return or("webgl")||or("experimental-webgl")||or("webgl-experimental")}function A(We){return typeof We.nodeName=="string"&&typeof We.appendChild=="function"&&typeof We.getBoundingClientRect=="function"}function b(We){return typeof We.drawArrays=="function"||typeof We.drawElements=="function"}function w(We){return typeof We=="string"?We.split():We}function k(We){return typeof We=="string"?document.querySelector(We):We}function x(We){var Gt=We||{},or,qr,$r,jr,Kr={},yn=[],Qn=[],Wn=typeof window=="undefined"?1:window.devicePixelRatio,Rn=!1,ia={},Un=function(zr){},Bn=function(){};if(typeof Gt=="string"?or=document.querySelector(Gt):typeof Gt=="object"&&(A(Gt)?or=Gt:b(Gt)?(jr=Gt,$r=jr.canvas):("gl"in Gt?jr=Gt.gl:"canvas"in Gt?$r=k(Gt.canvas):"container"in Gt&&(qr=k(Gt.container)),"attributes"in Gt&&(Kr=Gt.attributes),"extensions"in Gt&&(yn=w(Gt.extensions)),"optionalExtensions"in Gt&&(Qn=w(Gt.optionalExtensions)),"onDone"in Gt&&(Un=Gt.onDone),"profile"in Gt&&(Rn=!!Gt.profile),"pixelRatio"in Gt&&(Wn=+Gt.pixelRatio),"cachedCode"in Gt&&(ia=Gt.cachedCode))),or&&(or.nodeName.toLowerCase()==="canvas"?$r=or:qr=or),!jr){if(!$r){var mn=T(qr||document.body,Un,Wn);if(!mn)return null;$r=mn.canvas,Bn=mn.onDestroy}Kr.premultipliedAlpha===void 0&&(Kr.premultipliedAlpha=!0),jr=g($r,Kr)}return jr?{gl:jr,canvas:$r,container:qr,extensions:yn,optionalExtensions:Qn,pixelRatio:Wn,profile:Rn,cachedCode:ia,onDone:Un,onDestroy:Bn}:(Bn(),Un("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function E(We,Gt){var or={};function qr(Kr){var yn=Kr.toLowerCase(),Qn;try{Qn=or[yn]=We.getExtension(yn)}catch(Wn){}return!!Qn}for(var $r=0;$r<Gt.extensions.length;++$r){var jr=Gt.extensions[$r];if(!qr(jr))return Gt.onDestroy(),Gt.onDone('"'+jr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Gt.optionalExtensions.forEach(qr),{extensions:or,restore:function(){Object.keys(or).forEach(function(Kr){if(or[Kr]&&!qr(Kr))throw new Error("(regl): error restoring extension "+Kr)})}}}function M(We,Gt){for(var or=Array(We),qr=0;qr<We;++qr)or[qr]=Gt(qr);return or}var d=5120,C=5121,S=5122,P=5123,D=5124,z=5125,O=5126;function V(We){for(var Gt=16;Gt<=1<<28;Gt*=16)if(We<=Gt)return Gt;return 0}function B(We){var Gt,or;return Gt=(We>65535)<<4,We>>>=Gt,or=(We>255)<<3,We>>>=or,Gt|=or,or=(We>15)<<2,We>>>=or,Gt|=or,or=(We>3)<<1,We>>>=or,Gt|=or,Gt|We>>1}function F(){var We=M(8,function(){return[]});function Gt(jr){var Kr=V(jr),yn=We[B(Kr)>>2];return yn.length>0?yn.pop():new ArrayBuffer(Kr)}function or(jr){We[B(jr.byteLength)>>2].push(jr)}function qr(jr,Kr){var yn=null;switch(jr){case d:yn=new Int8Array(Gt(Kr),0,Kr);break;case C:yn=new Uint8Array(Gt(Kr),0,Kr);break;case S:yn=new Int16Array(Gt(2*Kr),0,Kr);break;case P:yn=new Uint16Array(Gt(2*Kr),0,Kr);break;case D:yn=new Int32Array(Gt(4*Kr),0,Kr);break;case z:yn=new Uint32Array(Gt(4*Kr),0,Kr);break;case O:yn=new Float32Array(Gt(4*Kr),0,Kr);break;default:return null}return yn.length!==Kr?yn.subarray(0,Kr):yn}function $r(jr){or(jr.buffer)}return{alloc:Gt,free:or,allocType:qr,freeType:$r}}var N=F();N.zero=F();var Z=3408,J=3410,re=3411,le=3412,fe=3413,K=3414,X=3415,ae=33901,oe=33902,_e=3379,be=3386,he=34921,ie=36347,ye=36348,ue=35661,Ae=35660,Re=34930,ze=36349,et=34076,Le=34024,Ie=7936,dt=7937,ct=7938,Ke=35724,_t=34047,zt=36063,Et=34852,Se=3553,je=34067,ht=34069,nt=33984,lt=6408,rt=5126,Xe=5121,ft=36160,gt=36053,Qt=36064,Jt=16384,fr=function(We,Gt){var or=1;Gt.ext_texture_filter_anisotropic&&(or=We.getParameter(_t));var qr=1,$r=1;Gt.webgl_draw_buffers&&(qr=We.getParameter(Et),$r=We.getParameter(zt));var jr=!!Gt.oes_texture_float;if(jr){var Kr=We.createTexture();We.bindTexture(Se,Kr),We.texImage2D(Se,0,lt,1,1,0,lt,rt,null);var yn=We.createFramebuffer();if(We.bindFramebuffer(ft,yn),We.framebufferTexture2D(ft,Qt,Se,Kr,0),We.bindTexture(Se,null),We.checkFramebufferStatus(ft)!==gt)jr=!1;else{We.viewport(0,0,1,1),We.clearColor(1,0,0,1),We.clear(Jt);var Qn=N.allocType(rt,4);We.readPixels(0,0,1,1,lt,rt,Qn),We.getError()?jr=!1:(We.deleteFramebuffer(yn),We.deleteTexture(Kr),jr=Qn[0]===1),N.freeType(Qn)}}var Wn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Rn=!0;if(!Wn){var ia=We.createTexture(),Un=N.allocType(Xe,36);We.activeTexture(nt),We.bindTexture(je,ia),We.texImage2D(ht,0,lt,3,3,0,lt,Xe,Un),N.freeType(Un),We.bindTexture(je,null),We.deleteTexture(ia),Rn=!We.getError()}return{colorBits:[We.getParameter(J),We.getParameter(re),We.getParameter(le),We.getParameter(fe)],depthBits:We.getParameter(K),stencilBits:We.getParameter(X),subpixelBits:We.getParameter(Z),extensions:Object.keys(Gt).filter(function(Bn){return!!Gt[Bn]}),maxAnisotropic:or,maxDrawbuffers:qr,maxColorAttachments:$r,pointSizeDims:We.getParameter(ae),lineWidthDims:We.getParameter(oe),maxViewportDims:We.getParameter(be),maxCombinedTextureUnits:We.getParameter(ue),maxCubeMapSize:We.getParameter(et),maxRenderbufferSize:We.getParameter(Le),maxTextureUnits:We.getParameter(Re),maxTextureSize:We.getParameter(_e),maxAttributes:We.getParameter(he),maxVertexUniforms:We.getParameter(ie),maxVertexTextureUnits:We.getParameter(Ae),maxVaryingVectors:We.getParameter(ye),maxFragmentUniforms:We.getParameter(ze),glsl:We.getParameter(Ke),renderer:We.getParameter(dt),vendor:We.getParameter(Ie),version:We.getParameter(ct),readFloat:jr,npotTextureCube:Rn}},nr=function(We){return We instanceof Uint8Array||We instanceof Uint16Array||We instanceof Uint32Array||We instanceof Int8Array||We instanceof Int16Array||We instanceof Int32Array||We instanceof Float32Array||We instanceof Float64Array||We instanceof Uint8ClampedArray};function ur(We){return!!We&&typeof We=="object"&&Array.isArray(We.shape)&&Array.isArray(We.stride)&&typeof We.offset=="number"&&We.shape.length===We.stride.length&&(Array.isArray(We.data)||nr(We.data))}var qt=function(We){return Object.keys(We).map(function(Gt){return We[Gt]})},xt={shape:qe,flatten:ge};function At(We,Gt,or){for(var qr=0;qr<Gt;++qr)or[qr]=We[qr]}function Je(We,Gt,or,qr){for(var $r=0,jr=0;jr<Gt;++jr)for(var Kr=We[jr],yn=0;yn<or;++yn)qr[$r++]=Kr[yn]}function xe(We,Gt,or,qr,$r,jr){for(var Kr=jr,yn=0;yn<Gt;++yn)for(var Qn=We[yn],Wn=0;Wn<or;++Wn)for(var Rn=Qn[Wn],ia=0;ia<qr;++ia)$r[Kr++]=Rn[ia]}function ce(We,Gt,or,qr,$r){for(var jr=1,Kr=or+1;Kr<Gt.length;++Kr)jr*=Gt[Kr];var yn=Gt[or];if(Gt.length-or===4){var Qn=Gt[or+1],Wn=Gt[or+2],Rn=Gt[or+3];for(Kr=0;Kr<yn;++Kr)xe(We[Kr],Qn,Wn,Rn,qr,$r),$r+=jr}else for(Kr=0;Kr<yn;++Kr)ce(We[Kr],Gt,or+1,qr,$r),$r+=jr}function ge(We,Gt,or,qr){var $r=1;if(Gt.length)for(var jr=0;jr<Gt.length;++jr)$r*=Gt[jr];else $r=0;var Kr=qr||N.allocType(or,$r);switch(Gt.length){case 0:break;case 1:At(We,Gt[0],Kr);break;case 2:Je(We,Gt[0],Gt[1],Kr);break;case 3:xe(We,Gt[0],Gt[1],Gt[2],Kr,0);break;default:ce(We,Gt,0,Kr,0)}return Kr}function qe(We){for(var Gt=[],or=We;or.length;or=or[0])Gt.push(or.length);return Gt}var yt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Vt=5120,Ut=5122,br=5124,xr=5121,Or=5123,Hr=5125,gr=5126,Ur=5126,_n={int8:Vt,int16:Ut,int32:br,uint8:xr,uint16:Or,uint32:Hr,float:gr,float32:Ur},si=35048,xn=35040,ci={dynamic:si,stream:xn,static:35044},Wi=xt.flatten,oi=xt.shape,Zi=35044,Ei=35040,at=5121,Ne=5126,st=[];st[5120]=1,st[5122]=2,st[5124]=4,st[5121]=1,st[5123]=2,st[5125]=4,st[5126]=4;function mt(We){return yt[Object.prototype.toString.call(We)]|0}function Ot(We,Gt){for(var or=0;or<Gt.length;++or)We[or]=Gt[or]}function tr(We,Gt,or,qr,$r,jr,Kr){for(var yn=0,Qn=0;Qn<or;++Qn)for(var Wn=0;Wn<qr;++Wn)We[yn++]=Gt[$r*Qn+jr*Wn+Kr]}function pr(We,Gt,or,qr){var $r=0,jr={};function Kr(zr){this.id=$r++,this.buffer=We.createBuffer(),this.type=zr,this.usage=Zi,this.byteLength=0,this.dimension=1,this.dtype=at,this.persistentData=null,or.profile&&(this.stats={size:0})}Kr.prototype.bind=function(){We.bindBuffer(this.type,this.buffer)},Kr.prototype.destroy=function(){Un(this)};var yn=[];function Qn(zr,fn){var Vn=yn.pop();return Vn||(Vn=new Kr(zr)),Vn.bind(),ia(Vn,fn,Ei,0,1,!1),Vn}function Wn(zr){yn.push(zr)}function Rn(zr,fn,Vn){zr.byteLength=fn.byteLength,We.bufferData(zr.type,fn,Vn)}function ia(zr,fn,Vn,Zn,En,mi){var ri;if(zr.usage=Vn,Array.isArray(fn)){if(zr.dtype=Zn||Ne,fn.length>0){var $i;if(Array.isArray(fn[0])){ri=oi(fn);for(var Cn=1,Tn=1;Tn<ri.length;++Tn)Cn*=ri[Tn];zr.dimension=Cn,$i=Wi(fn,ri,zr.dtype),Rn(zr,$i,Vn),mi?zr.persistentData=$i:N.freeType($i)}else if(typeof fn[0]=="number"){zr.dimension=En;var Pi=N.allocType(zr.dtype,fn.length);Ot(Pi,fn),Rn(zr,Pi,Vn),mi?zr.persistentData=Pi:N.freeType(Pi)}else nr(fn[0])&&(zr.dimension=fn[0].length,zr.dtype=Zn||mt(fn[0])||Ne,$i=Wi(fn,[fn.length,fn[0].length],zr.dtype),Rn(zr,$i,Vn),mi?zr.persistentData=$i:N.freeType($i))}}else if(nr(fn))zr.dtype=Zn||mt(fn),zr.dimension=En,Rn(zr,fn,Vn),mi&&(zr.persistentData=new Uint8Array(new Uint8Array(fn.buffer)));else if(ur(fn)){ri=fn.shape;var di=fn.stride,ei=fn.offset,jn=0,Si=0,na=0,Ea=0;ri.length===1?(jn=ri[0],Si=1,na=di[0],Ea=0):ri.length===2&&(jn=ri[0],Si=ri[1],na=di[0],Ea=di[1]),zr.dtype=Zn||mt(fn.data)||Ne,zr.dimension=Si;var pi=N.allocType(zr.dtype,jn*Si);tr(pi,fn.data,jn,Si,na,Ea,ei),Rn(zr,pi,Vn),mi?zr.persistentData=pi:N.freeType(pi)}else fn instanceof ArrayBuffer&&(zr.dtype=at,zr.dimension=En,Rn(zr,fn,Vn),mi&&(zr.persistentData=new Uint8Array(new Uint8Array(fn))))}function Un(zr){Gt.bufferCount--,qr(zr);var fn=zr.buffer;We.deleteBuffer(fn),zr.buffer=null,delete jr[zr.id]}function Bn(zr,fn,Vn,Zn){Gt.bufferCount++;var En=new Kr(fn);jr[En.id]=En;function mi(Cn){var Tn=Zi,Pi=null,di=0,ei=0,jn=1;return Array.isArray(Cn)||nr(Cn)||ur(Cn)||Cn instanceof ArrayBuffer?Pi=Cn:typeof Cn=="number"?di=Cn|0:Cn&&("data"in Cn&&(Pi=Cn.data),"usage"in Cn&&(Tn=ci[Cn.usage]),"type"in Cn&&(ei=_n[Cn.type]),"dimension"in Cn&&(jn=Cn.dimension|0),"length"in Cn&&(di=Cn.length|0)),En.bind(),Pi?ia(En,Pi,Tn,ei,jn,Zn):(di&&We.bufferData(En.type,di,Tn),En.dtype=ei||at,En.usage=Tn,En.dimension=jn,En.byteLength=di),or.profile&&(En.stats.size=En.byteLength*st[En.dtype]),mi}function ri(Cn,Tn){We.bufferSubData(En.type,Tn,Cn)}function $i(Cn,Tn){var Pi=(Tn||0)|0,di;if(En.bind(),nr(Cn)||Cn instanceof ArrayBuffer)ri(Cn,Pi);else if(Array.isArray(Cn)){if(Cn.length>0){if(typeof Cn[0]=="number"){var ei=N.allocType(En.dtype,Cn.length);Ot(ei,Cn),ri(ei,Pi),N.freeType(ei)}else if(Array.isArray(Cn[0])||nr(Cn[0])){di=oi(Cn);var jn=Wi(Cn,di,En.dtype);ri(jn,Pi),N.freeType(jn)}}}else if(ur(Cn)){di=Cn.shape;var Si=Cn.stride,na=0,Ea=0,pi=0,Vi=0;di.length===1?(na=di[0],Ea=1,pi=Si[0],Vi=0):di.length===2&&(na=di[0],Ea=di[1],pi=Si[0],Vi=Si[1]);var ha=Array.isArray(Cn.data)?En.dtype:mt(Cn.data),_a=N.allocType(ha,na*Ea);tr(_a,Cn.data,na,Ea,pi,Vi,Cn.offset),ri(_a,Pi),N.freeType(_a)}return mi}return Vn||mi(zr),mi._reglType="buffer",mi._buffer=En,mi.subdata=$i,or.profile&&(mi.stats=En.stats),mi.destroy=function(){Un(En)},mi}function mn(){qt(jr).forEach(function(zr){zr.buffer=We.createBuffer(),We.bindBuffer(zr.type,zr.buffer),We.bufferData(zr.type,zr.persistentData||zr.byteLength,zr.usage)})}return or.profile&&(Gt.getTotalBufferSize=function(){var zr=0;return Object.keys(jr).forEach(function(fn){zr+=jr[fn].stats.size}),zr}),{create:Bn,createStream:Qn,destroyStream:Wn,clear:function(){qt(jr).forEach(Un),yn.forEach(Un)},getBuffer:function(zr){return zr&&zr._buffer instanceof Kr?zr._buffer:null},restore:mn,_initBuffer:ia}}var hr=0,Rr=0,Gr=1,Yr=1,vn=4,Wr=4,qn={points:hr,point:Rr,lines:Gr,line:Yr,triangles:vn,triangle:Wr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},vi=0,Mi=1,Ui=4,ji=5120,ea=5121,Ra=5122,Li=5123,Yn=5124,zi=5125,ya=34963,zn=35040,Ze=35044;function Bt(We,Gt,or,qr){var $r={},jr=0,Kr={uint8:ea,uint16:Li};Gt.oes_element_index_uint&&(Kr.uint32=zi);function yn(mn){this.id=jr++,$r[this.id]=this,this.buffer=mn,this.primType=Ui,this.vertCount=0,this.type=0}yn.prototype.bind=function(){this.buffer.bind()};var Qn=[];function Wn(mn){var zr=Qn.pop();return zr||(zr=new yn(or.create(null,ya,!0,!1)._buffer)),ia(zr,mn,zn,-1,-1,0,0),zr}function Rn(mn){Qn.push(mn)}function ia(mn,zr,fn,Vn,Zn,En,mi){mn.buffer.bind();var ri;if(zr){var $i=mi;!mi&&(!nr(zr)||ur(zr)&&!nr(zr.data))&&($i=Gt.oes_element_index_uint?zi:Li),or._initBuffer(mn.buffer,zr,fn,$i,3)}else We.bufferData(ya,En,fn),mn.buffer.dtype=ri||ea,mn.buffer.usage=fn,mn.buffer.dimension=3,mn.buffer.byteLength=En;if(ri=mi,!mi){switch(mn.buffer.dtype){case ea:case ji:ri=ea;break;case Li:case Ra:ri=Li;break;case zi:case Yn:ri=zi;break;default:}mn.buffer.dtype=ri}mn.type=ri;var Cn=Zn;Cn<0&&(Cn=mn.buffer.byteLength,ri===Li?Cn>>=1:ri===zi&&(Cn>>=2)),mn.vertCount=Cn;var Tn=Vn;if(Vn<0){Tn=Ui;var Pi=mn.buffer.dimension;Pi===1&&(Tn=vi),Pi===2&&(Tn=Mi),Pi===3&&(Tn=Ui)}mn.primType=Tn}function Un(mn){qr.elementsCount--,delete $r[mn.id],mn.buffer.destroy(),mn.buffer=null}function Bn(mn,zr){var fn=or.create(null,ya,!0),Vn=new yn(fn._buffer);qr.elementsCount++;function Zn(En){if(!En)fn(),Vn.primType=Ui,Vn.vertCount=0,Vn.type=ea;else if(typeof En=="number")fn(En),Vn.primType=Ui,Vn.vertCount=En|0,Vn.type=ea;else{var mi=null,ri=Ze,$i=-1,Cn=-1,Tn=0,Pi=0;Array.isArray(En)||nr(En)||ur(En)?mi=En:("data"in En&&(mi=En.data),"usage"in En&&(ri=ci[En.usage]),"primitive"in En&&($i=qn[En.primitive]),"count"in En&&(Cn=En.count|0),"type"in En&&(Pi=Kr[En.type]),"length"in En?Tn=En.length|0:(Tn=Cn,Pi===Li||Pi===Ra?Tn*=2:(Pi===zi||Pi===Yn)&&(Tn*=4))),ia(Vn,mi,ri,$i,Cn,Tn,Pi)}return Zn}return Zn(mn),Zn._reglType="elements",Zn._elements=Vn,Zn.subdata=function(En,mi){return fn.subdata(En,mi),Zn},Zn.destroy=function(){Un(Vn)},Zn}return{create:Bn,createStream:Wn,destroyStream:Rn,getElements:function(mn){return typeof mn=="function"&&mn._elements instanceof yn?mn._elements:null},clear:function(){qt($r).forEach(Un)}}}var sr=new Float32Array(1),_r=new Uint32Array(sr.buffer),Jr=5123;function on(We){for(var Gt=N.allocType(Jr,We.length),or=0;or<We.length;++or)if(isNaN(We[or]))Gt[or]=65535;else if(We[or]===1/0)Gt[or]=31744;else if(We[or]===-1/0)Gt[or]=64512;else{sr[0]=We[or];var qr=_r[0],$r=qr>>>31<<15,jr=(qr<<1>>>24)-127,Kr=qr>>13&1023;if(jr<-24)Gt[or]=$r;else if(jr<-14){var yn=-14-jr;Gt[or]=$r+(Kr+1024>>yn)}else jr>15?Gt[or]=$r+31744:Gt[or]=$r+(jr+15<<10)+Kr}return Gt}function pn(We){return Array.isArray(We)||nr(We)}var Cr=34467,cn=3553,gi=34067,Hn=34069,qi=6408,fa=6406,eo=6407,ma=6409,so=6410,ja=32854,Xo=32855,Uo=36194,ms=32819,as=32820,il=33635,oo=34042,cs=6402,Eo=34041,hs=35904,Jo=35906,Qo=36193,Oa=33776,co=33777,Al=33778,$l=33779,Nu=35986,os=35987,hn=34798,bi=35840,ac=35841,Pl=35842,ss=35843,vl=36196,$o=5121,Rl=5123,xu=5125,ni=5126,Aa=10242,Ca=10243,Fs=10497,Pf=33071,Ma=33648,Rf=10240,Wc=10241,dl=9728,ff=9729,$s=9984,ko=9985,eu=9986,_u=9987,Ah=33170,Uu=4352,nv=4353,Ac=4354,lo=34046,Df=3317,Mh=37440,Us=37441,xs=37443,Sh=37444,cf=33984,To=[$s,eu,ko,_u],vs=[0,ma,so,eo,qi],po={};po[ma]=po[fa]=po[cs]=1,po[Eo]=po[so]=2,po[eo]=po[hs]=3,po[qi]=po[Jo]=4;function Co(We){return"[object "+We+"]"}var Mc=Co("HTMLCanvasElement"),qs=Co("OffscreenCanvas"),Vl=Co("CanvasRenderingContext2D"),hf=Co("ImageBitmap"),_d=Co("HTMLImageElement"),bu=Co("HTMLVideoElement"),Wp=Object.keys(yt).concat([Mc,qs,Vl,hf,_d,bu]),Hl=[];Hl[$o]=1,Hl[ni]=4,Hl[Qo]=2,Hl[Rl]=2,Hl[xu]=4;var ho=[];ho[ja]=2,ho[Xo]=2,ho[Uo]=2,ho[Eo]=4,ho[Oa]=.5,ho[co]=.5,ho[Al]=1,ho[$l]=1,ho[Nu]=.5,ho[os]=1,ho[hn]=1,ho[bi]=.5,ho[ac]=.25,ho[Pl]=.5,ho[ss]=.25,ho[vl]=.5;function Dv(We){return Array.isArray(We)&&(We.length===0||typeof We[0]=="number")}function vf(We){if(!Array.isArray(We))return!1;var Gt=We.length;return!(Gt===0||!pn(We[0]))}function Gl(We){return Object.prototype.toString.call(We)}function iv(We){return Gl(We)===Mc}function Eh(We){return Gl(We)===qs}function av(We){return Gl(We)===Vl}function wu(We){return Gl(We)===hf}function Iv(We){return Gl(We)===_d}function ov(We){return Gl(We)===bu}function kh(We){if(!We)return!1;var Gt=Gl(We);return Wp.indexOf(Gt)>=0?!0:Dv(We)||vf(We)||ur(We)}function sv(We){return yt[Object.prototype.toString.call(We)]|0}function bd(We,Gt){var or=Gt.length;switch(We.type){case $o:case Rl:case xu:case ni:var qr=N.allocType(We.type,or);qr.set(Gt),We.data=qr;break;case Qo:We.data=on(Gt);break;default:}}function Hd(We,Gt){return N.allocType(We.type===Qo?ni:We.type,Gt)}function If(We,Gt){We.type===Qo?(We.data=on(Gt),N.freeType(Gt)):We.data=Gt}function Fv(We,Gt,or,qr,$r,jr){for(var Kr=We.width,yn=We.height,Qn=We.channels,Wn=Kr*yn*Qn,Rn=Hd(We,Wn),ia=0,Un=0;Un<yn;++Un)for(var Bn=0;Bn<Kr;++Bn)for(var mn=0;mn<Qn;++mn)Rn[ia++]=Gt[or*Bn+qr*Un+$r*mn+jr];If(We,Rn)}function oc(We,Gt,or,qr,$r,jr){var Kr;if(typeof ho[We]!="undefined"?Kr=ho[We]:Kr=po[We]*Hl[Gt],jr&&(Kr*=6),$r){for(var yn=0,Qn=or;Qn>=1;)yn+=Kr*Qn*Qn,Qn/=2;return yn}else return Kr*or*qr}function Ch(We,Gt,or,qr,$r,jr,Kr){var yn={"don't care":Uu,"dont care":Uu,nice:Ac,fast:nv},Qn={repeat:Fs,clamp:Pf,mirror:Ma},Wn={nearest:dl,linear:ff},Rn=e({mipmap:_u,"nearest mipmap nearest":$s,"linear mipmap nearest":ko,"nearest mipmap linear":eu,"linear mipmap linear":_u},Wn),ia={none:0,browser:Sh},Un={uint8:$o,rgba4:ms,rgb565:il,"rgb5 a1":as},Bn={alpha:fa,luminance:ma,"luminance alpha":so,rgb:eo,rgba:qi,rgba4:ja,"rgb5 a1":Xo,rgb565:Uo},mn={};Gt.ext_srgb&&(Bn.srgb=hs,Bn.srgba=Jo),Gt.oes_texture_float&&(Un.float32=Un.float=ni),Gt.oes_texture_half_float&&(Un.float16=Un["half float"]=Qo),Gt.webgl_depth_texture&&(e(Bn,{depth:cs,"depth stencil":Eo}),e(Un,{uint16:Rl,uint32:xu,"depth stencil":oo})),Gt.webgl_compressed_texture_s3tc&&e(mn,{"rgb s3tc dxt1":Oa,"rgba s3tc dxt1":co,"rgba s3tc dxt3":Al,"rgba s3tc dxt5":$l}),Gt.webgl_compressed_texture_atc&&e(mn,{"rgb atc":Nu,"rgba atc explicit alpha":os,"rgba atc interpolated alpha":hn}),Gt.webgl_compressed_texture_pvrtc&&e(mn,{"rgb pvrtc 4bppv1":bi,"rgb pvrtc 2bppv1":ac,"rgba pvrtc 4bppv1":Pl,"rgba pvrtc 2bppv1":ss}),Gt.webgl_compressed_texture_etc1&&(mn["rgb etc1"]=vl);var zr=Array.prototype.slice.call(We.getParameter(Cr));Object.keys(mn).forEach(function(ee){var ve=mn[ee];zr.indexOf(ve)>=0&&(Bn[ee]=ve)});var fn=Object.keys(Bn);or.textureFormats=fn;var Vn=[];Object.keys(Bn).forEach(function(ee){var ve=Bn[ee];Vn[ve]=ee});var Zn=[];Object.keys(Un).forEach(function(ee){var ve=Un[ee];Zn[ve]=ee});var En=[];Object.keys(Wn).forEach(function(ee){var ve=Wn[ee];En[ve]=ee});var mi=[];Object.keys(Rn).forEach(function(ee){var ve=Rn[ee];mi[ve]=ee});var ri=[];Object.keys(Qn).forEach(function(ee){var ve=Qn[ee];ri[ve]=ee});var $i=fn.reduce(function(ee,ve){var Ee=Bn[ve];return Ee===ma||Ee===fa||Ee===ma||Ee===so||Ee===cs||Ee===Eo||Gt.ext_srgb&&(Ee===hs||Ee===Jo)?ee[Ee]=Ee:Ee===Xo||ve.indexOf("rgba")>=0?ee[Ee]=qi:ee[Ee]=eo,ee},{});function Cn(){this.internalformat=qi,this.format=qi,this.type=$o,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Sh,this.width=0,this.height=0,this.channels=0}function Tn(ee,ve){ee.internalformat=ve.internalformat,ee.format=ve.format,ee.type=ve.type,ee.compressed=ve.compressed,ee.premultiplyAlpha=ve.premultiplyAlpha,ee.flipY=ve.flipY,ee.unpackAlignment=ve.unpackAlignment,ee.colorSpace=ve.colorSpace,ee.width=ve.width,ee.height=ve.height,ee.channels=ve.channels}function Pi(ee,ve){if(!(typeof ve!="object"||!ve)){if("premultiplyAlpha"in ve&&(ee.premultiplyAlpha=ve.premultiplyAlpha),"flipY"in ve&&(ee.flipY=ve.flipY),"alignment"in ve&&(ee.unpackAlignment=ve.alignment),"colorSpace"in ve&&(ee.colorSpace=ia[ve.colorSpace]),"type"in ve){var Ee=ve.type;ee.type=Un[Ee]}var Oe=ee.width,vt=ee.height,wt=ee.channels,pt=!1;"shape"in ve?(Oe=ve.shape[0],vt=ve.shape[1],ve.shape.length===3&&(wt=ve.shape[2],pt=!0)):("radius"in ve&&(Oe=vt=ve.radius),"width"in ve&&(Oe=ve.width),"height"in ve&&(vt=ve.height),"channels"in ve&&(wt=ve.channels,pt=!0)),ee.width=Oe|0,ee.height=vt|0,ee.channels=wt|0;var Be=!1;if("format"in ve){var $e=ve.format,ot=ee.internalformat=Bn[$e];ee.format=$i[ot],$e in Un&&("type"in ve||(ee.type=Un[$e])),$e in mn&&(ee.compressed=!0),Be=!0}!pt&&Be?ee.channels=po[ee.format]:pt&&!Be&&ee.channels!==vs[ee.format]&&(ee.format=ee.internalformat=vs[ee.channels])}}function di(ee){We.pixelStorei(Mh,ee.flipY),We.pixelStorei(Us,ee.premultiplyAlpha),We.pixelStorei(xs,ee.colorSpace),We.pixelStorei(Df,ee.unpackAlignment)}function ei(){Cn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function jn(ee,ve){var Ee=null;if(kh(ve)?Ee=ve:ve&&(Pi(ee,ve),"x"in ve&&(ee.xOffset=ve.x|0),"y"in ve&&(ee.yOffset=ve.y|0),kh(ve.data)&&(Ee=ve.data)),ve.copy){var Oe=$r.viewportWidth,vt=$r.viewportHeight;ee.width=ee.width||Oe-ee.xOffset,ee.height=ee.height||vt-ee.yOffset,ee.needsCopy=!0}else if(!Ee)ee.width=ee.width||1,ee.height=ee.height||1,ee.channels=ee.channels||4;else if(nr(Ee))ee.channels=ee.channels||4,ee.data=Ee,!("type"in ve)&&ee.type===$o&&(ee.type=sv(Ee));else if(Dv(Ee))ee.channels=ee.channels||4,bd(ee,Ee),ee.alignment=1,ee.needsFree=!0;else if(ur(Ee)){var wt=Ee.data;!Array.isArray(wt)&&ee.type===$o&&(ee.type=sv(wt));var pt=Ee.shape,Be=Ee.stride,$e,ot,Tt,Lt,Pt,Xt;pt.length===3?(Tt=pt[2],Xt=Be[2]):(Tt=1,Xt=1),$e=pt[0],ot=pt[1],Lt=Be[0],Pt=Be[1],ee.alignment=1,ee.width=$e,ee.height=ot,ee.channels=Tt,ee.format=ee.internalformat=vs[Tt],ee.needsFree=!0,Fv(ee,wt,Lt,Pt,Xt,Ee.offset)}else if(iv(Ee)||Eh(Ee)||av(Ee))iv(Ee)||Eh(Ee)?ee.element=Ee:ee.element=Ee.canvas,ee.width=ee.element.width,ee.height=ee.element.height,ee.channels=4;else if(wu(Ee))ee.element=Ee,ee.width=Ee.width,ee.height=Ee.height,ee.channels=4;else if(Iv(Ee))ee.element=Ee,ee.width=Ee.naturalWidth,ee.height=Ee.naturalHeight,ee.channels=4;else if(ov(Ee))ee.element=Ee,ee.width=Ee.videoWidth,ee.height=Ee.videoHeight,ee.channels=4;else if(vf(Ee)){var Nt=ee.width||Ee[0].length,Dt=ee.height||Ee.length,Zt=ee.channels;pn(Ee[0][0])?Zt=Zt||Ee[0][0].length:Zt=Zt||1;for(var Ct=xt.shape(Ee),ar=1,yr=0;yr<Ct.length;++yr)ar*=Ct[yr];var Dr=Hd(ee,ar);xt.flatten(Ee,Ct,"",Dr),If(ee,Dr),ee.alignment=1,ee.width=Nt,ee.height=Dt,ee.channels=Zt,ee.format=ee.internalformat=vs[Zt],ee.needsFree=!0}ee.type===ni||ee.type}function Si(ee,ve,Ee){var Oe=ee.element,vt=ee.data,wt=ee.internalformat,pt=ee.format,Be=ee.type,$e=ee.width,ot=ee.height;di(ee),Oe?We.texImage2D(ve,Ee,pt,pt,Be,Oe):ee.compressed?We.compressedTexImage2D(ve,Ee,wt,$e,ot,0,vt):ee.needsCopy?(qr(),We.copyTexImage2D(ve,Ee,pt,ee.xOffset,ee.yOffset,$e,ot,0)):We.texImage2D(ve,Ee,pt,$e,ot,0,pt,Be,vt||null)}function na(ee,ve,Ee,Oe,vt){var wt=ee.element,pt=ee.data,Be=ee.internalformat,$e=ee.format,ot=ee.type,Tt=ee.width,Lt=ee.height;di(ee),wt?We.texSubImage2D(ve,vt,Ee,Oe,$e,ot,wt):ee.compressed?We.compressedTexSubImage2D(ve,vt,Ee,Oe,Be,Tt,Lt,pt):ee.needsCopy?(qr(),We.copyTexSubImage2D(ve,vt,Ee,Oe,ee.xOffset,ee.yOffset,Tt,Lt)):We.texSubImage2D(ve,vt,Ee,Oe,Tt,Lt,$e,ot,pt)}var Ea=[];function pi(){return Ea.pop()||new ei}function Vi(ee){ee.needsFree&&N.freeType(ee.data),ei.call(ee),Ea.push(ee)}function ha(){Cn.call(this),this.genMipmaps=!1,this.mipmapHint=Uu,this.mipmask=0,this.images=Array(16)}function _a(ee,ve,Ee){var Oe=ee.images[0]=pi();ee.mipmask=1,Oe.width=ee.width=ve,Oe.height=ee.height=Ee,Oe.channels=ee.channels=4}function Wa(ee,ve){var Ee=null;if(kh(ve))Ee=ee.images[0]=pi(),Tn(Ee,ee),jn(Ee,ve),ee.mipmask=1;else if(Pi(ee,ve),Array.isArray(ve.mipmap))for(var Oe=ve.mipmap,vt=0;vt<Oe.length;++vt)Ee=ee.images[vt]=pi(),Tn(Ee,ee),Ee.width>>=vt,Ee.height>>=vt,jn(Ee,Oe[vt]),ee.mipmask|=1<<vt;else Ee=ee.images[0]=pi(),Tn(Ee,ee),jn(Ee,ve),ee.mipmask=1;Tn(ee,ee.images[0]),ee.compressed&&(ee.internalformat===Oa||ee.internalformat===co||ee.internalformat===Al||ee.internalformat)}function Ls(ee,ve){for(var Ee=ee.images,Oe=0;Oe<Ee.length;++Oe){if(!Ee[Oe])return;Si(Ee[Oe],ve,Oe)}}var lu=[];function uo(){var ee=lu.pop()||new ha;Cn.call(ee),ee.mipmask=0;for(var ve=0;ve<16;++ve)ee.images[ve]=null;return ee}function uu(ee){for(var ve=ee.images,Ee=0;Ee<ve.length;++Ee)ve[Ee]&&Vi(ve[Ee]),ve[Ee]=null;lu.push(ee)}function ps(){this.minFilter=dl,this.magFilter=dl,this.wrapS=Pf,this.wrapT=Pf,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Uu}function Xl(ee,ve){if("min"in ve){var Ee=ve.min;ee.minFilter=Rn[Ee],To.indexOf(ee.minFilter)>=0&&!("faces"in ve)&&(ee.genMipmaps=!0)}if("mag"in ve){var Oe=ve.mag;ee.magFilter=Wn[Oe]}var vt=ee.wrapS,wt=ee.wrapT;if("wrap"in ve){var pt=ve.wrap;typeof pt=="string"?vt=wt=Qn[pt]:Array.isArray(pt)&&(vt=Qn[pt[0]],wt=Qn[pt[1]])}else{if("wrapS"in ve){var Be=ve.wrapS;vt=Qn[Be]}if("wrapT"in ve){var $e=ve.wrapT;wt=Qn[$e]}}if(ee.wrapS=vt,ee.wrapT=wt,"anisotropic"in ve){var ot=ve.anisotropic;ee.anisotropic=ve.anisotropic}if("mipmap"in ve){var Tt=!1;switch(typeof ve.mipmap){case"string":ee.mipmapHint=yn[ve.mipmap],ee.genMipmaps=!0,Tt=!0;break;case"boolean":Tt=ee.genMipmaps=ve.mipmap;break;case"object":ee.genMipmaps=!1,Tt=!0;break;default:}Tt&&!("min"in ve)&&(ee.minFilter=$s)}}function Yf(ee,ve){We.texParameteri(ve,Wc,ee.minFilter),We.texParameteri(ve,Rf,ee.magFilter),We.texParameteri(ve,Aa,ee.wrapS),We.texParameteri(ve,Ca,ee.wrapT),Gt.ext_texture_filter_anisotropic&&We.texParameteri(ve,lo,ee.anisotropic),ee.genMipmaps&&(We.hint(Ah,ee.mipmapHint),We.generateMipmap(ve))}var fc=0,As={},Zl=or.maxTextureUnits,fu=Array(Zl).map(function(){return null});function ro(ee){Cn.call(this),this.mipmask=0,this.internalformat=qi,this.id=fc++,this.refCount=1,this.target=ee,this.texture=We.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ps,Kr.profile&&(this.stats={size:0})}function Eu(ee){We.activeTexture(cf),We.bindTexture(ee.target,ee.texture)}function Ja(){var ee=fu[0];ee?We.bindTexture(ee.target,ee.texture):We.bindTexture(cn,null)}function H(ee){var ve=ee.texture,Ee=ee.unit,Oe=ee.target;Ee>=0&&(We.activeTexture(cf+Ee),We.bindTexture(Oe,null),fu[Ee]=null),We.deleteTexture(ve),ee.texture=null,ee.params=null,ee.pixels=null,ee.refCount=0,delete As[ee.id],jr.textureCount--}e(ro.prototype,{bind:function(){var ee=this;ee.bindCount+=1;var ve=ee.unit;if(ve<0){for(var Ee=0;Ee<Zl;++Ee){var Oe=fu[Ee];if(Oe){if(Oe.bindCount>0)continue;Oe.unit=-1}fu[Ee]=ee,ve=Ee;break}ve>=Zl,Kr.profile&&jr.maxTextureUnits<ve+1&&(jr.maxTextureUnits=ve+1),ee.unit=ve,We.activeTexture(cf+ve),We.bindTexture(ee.target,ee.texture)}return ve},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&H(this)}});function R(ee,ve){var Ee=new ro(cn);As[Ee.id]=Ee,jr.textureCount++;function Oe(pt,Be){var $e=Ee.texInfo;ps.call($e);var ot=uo();return typeof pt=="number"?typeof Be=="number"?_a(ot,pt|0,Be|0):_a(ot,pt|0,pt|0):pt?(Xl($e,pt),Wa(ot,pt)):_a(ot,1,1),$e.genMipmaps&&(ot.mipmask=(ot.width<<1)-1),Ee.mipmask=ot.mipmask,Tn(Ee,ot),Ee.internalformat=ot.internalformat,Oe.width=ot.width,Oe.height=ot.height,Eu(Ee),Ls(ot,cn),Yf($e,cn),Ja(),uu(ot),Kr.profile&&(Ee.stats.size=oc(Ee.internalformat,Ee.type,ot.width,ot.height,$e.genMipmaps,!1)),Oe.format=Vn[Ee.internalformat],Oe.type=Zn[Ee.type],Oe.mag=En[$e.magFilter],Oe.min=mi[$e.minFilter],Oe.wrapS=ri[$e.wrapS],Oe.wrapT=ri[$e.wrapT],Oe}function vt(pt,Be,$e,ot){var Tt=Be|0,Lt=$e|0,Pt=ot|0,Xt=pi();return Tn(Xt,Ee),Xt.width=0,Xt.height=0,jn(Xt,pt),Xt.width=Xt.width||(Ee.width>>Pt)-Tt,Xt.height=Xt.height||(Ee.height>>Pt)-Lt,Eu(Ee),na(Xt,cn,Tt,Lt,Pt),Ja(),Vi(Xt),Oe}function wt(pt,Be){var $e=pt|0,ot=Be|0||$e;if($e===Ee.width&&ot===Ee.height)return Oe;Oe.width=Ee.width=$e,Oe.height=Ee.height=ot,Eu(Ee);for(var Tt=0;Ee.mipmask>>Tt;++Tt){var Lt=$e>>Tt,Pt=ot>>Tt;if(!Lt||!Pt)break;We.texImage2D(cn,Tt,Ee.format,Lt,Pt,0,Ee.format,Ee.type,null)}return Ja(),Kr.profile&&(Ee.stats.size=oc(Ee.internalformat,Ee.type,$e,ot,!1,!1)),Oe}return Oe(ee,ve),Oe.subimage=vt,Oe.resize=wt,Oe._reglType="texture2d",Oe._texture=Ee,Kr.profile&&(Oe.stats=Ee.stats),Oe.destroy=function(){Ee.decRef()},Oe}function G(ee,ve,Ee,Oe,vt,wt){var pt=new ro(gi);As[pt.id]=pt,jr.cubeCount++;var Be=new Array(6);function $e(Lt,Pt,Xt,Nt,Dt,Zt){var Ct,ar=pt.texInfo;for(ps.call(ar),Ct=0;Ct<6;++Ct)Be[Ct]=uo();if(typeof Lt=="number"||!Lt){var yr=Lt|0||1;for(Ct=0;Ct<6;++Ct)_a(Be[Ct],yr,yr)}else if(typeof Lt=="object")if(Pt)Wa(Be[0],Lt),Wa(Be[1],Pt),Wa(Be[2],Xt),Wa(Be[3],Nt),Wa(Be[4],Dt),Wa(Be[5],Zt);else if(Xl(ar,Lt),Pi(pt,Lt),"faces"in Lt){var Dr=Lt.faces;for(Ct=0;Ct<6;++Ct)Tn(Be[Ct],pt),Wa(Be[Ct],Dr[Ct])}else for(Ct=0;Ct<6;++Ct)Wa(Be[Ct],Lt);for(Tn(pt,Be[0]),ar.genMipmaps?pt.mipmask=(Be[0].width<<1)-1:pt.mipmask=Be[0].mipmask,pt.internalformat=Be[0].internalformat,$e.width=Be[0].width,$e.height=Be[0].height,Eu(pt),Ct=0;Ct<6;++Ct)Ls(Be[Ct],Hn+Ct);for(Yf(ar,gi),Ja(),Kr.profile&&(pt.stats.size=oc(pt.internalformat,pt.type,$e.width,$e.height,ar.genMipmaps,!0)),$e.format=Vn[pt.internalformat],$e.type=Zn[pt.type],$e.mag=En[ar.magFilter],$e.min=mi[ar.minFilter],$e.wrapS=ri[ar.wrapS],$e.wrapT=ri[ar.wrapT],Ct=0;Ct<6;++Ct)uu(Be[Ct]);return $e}function ot(Lt,Pt,Xt,Nt,Dt){var Zt=Xt|0,Ct=Nt|0,ar=Dt|0,yr=pi();return Tn(yr,pt),yr.width=0,yr.height=0,jn(yr,Pt),yr.width=yr.width||(pt.width>>ar)-Zt,yr.height=yr.height||(pt.height>>ar)-Ct,Eu(pt),na(yr,Hn+Lt,Zt,Ct,ar),Ja(),Vi(yr),$e}function Tt(Lt){var Pt=Lt|0;if(Pt!==pt.width){$e.width=pt.width=Pt,$e.height=pt.height=Pt,Eu(pt);for(var Xt=0;Xt<6;++Xt)for(var Nt=0;pt.mipmask>>Nt;++Nt)We.texImage2D(Hn+Xt,Nt,pt.format,Pt>>Nt,Pt>>Nt,0,pt.format,pt.type,null);return Ja(),Kr.profile&&(pt.stats.size=oc(pt.internalformat,pt.type,$e.width,$e.height,!1,!0)),$e}}return $e(ee,ve,Ee,Oe,vt,wt),$e.subimage=ot,$e.resize=Tt,$e._reglType="textureCube",$e._texture=pt,Kr.profile&&($e.stats=pt.stats),$e.destroy=function(){pt.decRef()},$e}function I(){for(var ee=0;ee<Zl;++ee)We.activeTexture(cf+ee),We.bindTexture(cn,null),fu[ee]=null;qt(As).forEach(H),jr.cubeCount=0,jr.textureCount=0}Kr.profile&&(jr.getTotalTextureSize=function(){var ee=0;return Object.keys(As).forEach(function(ve){ee+=As[ve].stats.size}),ee});function W(){for(var ee=0;ee<Zl;++ee){var ve=fu[ee];ve&&(ve.bindCount=0,ve.unit=-1,fu[ee]=null)}qt(As).forEach(function(Ee){Ee.texture=We.createTexture(),We.bindTexture(Ee.target,Ee.texture);for(var Oe=0;Oe<32;++Oe)if(Ee.mipmask&1<<Oe)if(Ee.target===cn)We.texImage2D(cn,Oe,Ee.internalformat,Ee.width>>Oe,Ee.height>>Oe,0,Ee.internalformat,Ee.type,null);else for(var vt=0;vt<6;++vt)We.texImage2D(Hn+vt,Oe,Ee.internalformat,Ee.width>>Oe,Ee.height>>Oe,0,Ee.internalformat,Ee.type,null);Yf(Ee.texInfo,Ee.target)})}function te(){for(var ee=0;ee<Zl;++ee){var ve=fu[ee];ve&&(ve.bindCount=0,ve.unit=-1,fu[ee]=null),We.activeTexture(cf+ee),We.bindTexture(cn,null),We.bindTexture(gi,null)}}return{create2D:R,createCube:G,clear:I,getTexture:function(ee){return null},restore:W,refresh:te}}var Vu=36161,Sc=32854,Ff=32855,qv=36194,zv=33189,Ov=36168,lv=34041,uv=35907,Bv=34836,tu=34842,fv=34843,al=[];al[Sc]=2,al[Ff]=2,al[qv]=2,al[zv]=2,al[Ov]=1,al[lv]=4,al[uv]=4,al[Bv]=16,al[tu]=8,al[fv]=6;function ru(We,Gt,or){return al[We]*Gt*or}var qf=function(We,Gt,or,qr,$r){var jr={rgba4:Sc,rgb565:qv,"rgb5 a1":Ff,depth:zv,stencil:Ov,"depth stencil":lv};Gt.ext_srgb&&(jr.srgba=uv),Gt.ext_color_buffer_half_float&&(jr.rgba16f=tu,jr.rgb16f=fv),Gt.webgl_color_buffer_float&&(jr.rgba32f=Bv);var Kr=[];Object.keys(jr).forEach(function(Bn){var mn=jr[Bn];Kr[mn]=Bn});var yn=0,Qn={};function Wn(Bn){this.id=yn++,this.refCount=1,this.renderbuffer=Bn,this.format=Sc,this.width=0,this.height=0,$r.profile&&(this.stats={size:0})}Wn.prototype.decRef=function(){--this.refCount<=0&&Rn(this)};function Rn(Bn){var mn=Bn.renderbuffer;We.bindRenderbuffer(Vu,null),We.deleteRenderbuffer(mn),Bn.renderbuffer=null,Bn.refCount=0,delete Qn[Bn.id],qr.renderbufferCount--}function ia(Bn,mn){var zr=new Wn(We.createRenderbuffer());Qn[zr.id]=zr,qr.renderbufferCount++;function fn(Zn,En){var mi=0,ri=0,$i=Sc;if(typeof Zn=="object"&&Zn){var Cn=Zn;if("shape"in Cn){var Tn=Cn.shape;mi=Tn[0]|0,ri=Tn[1]|0}else"radius"in Cn&&(mi=ri=Cn.radius|0),"width"in Cn&&(mi=Cn.width|0),"height"in Cn&&(ri=Cn.height|0);"format"in Cn&&($i=jr[Cn.format])}else typeof Zn=="number"?(mi=Zn|0,typeof En=="number"?ri=En|0:ri=mi):Zn||(mi=ri=1);if(!(mi===zr.width&&ri===zr.height&&$i===zr.format))return fn.width=zr.width=mi,fn.height=zr.height=ri,zr.format=$i,We.bindRenderbuffer(Vu,zr.renderbuffer),We.renderbufferStorage(Vu,$i,mi,ri),$r.profile&&(zr.stats.size=ru(zr.format,zr.width,zr.height)),fn.format=Kr[zr.format],fn}function Vn(Zn,En){var mi=Zn|0,ri=En|0||mi;return mi===zr.width&&ri===zr.height||(fn.width=zr.width=mi,fn.height=zr.height=ri,We.bindRenderbuffer(Vu,zr.renderbuffer),We.renderbufferStorage(Vu,zr.format,mi,ri),$r.profile&&(zr.stats.size=ru(zr.format,zr.width,zr.height))),fn}return fn(Bn,mn),fn.resize=Vn,fn._reglType="renderbuffer",fn._renderbuffer=zr,$r.profile&&(fn.stats=zr.stats),fn.destroy=function(){zr.decRef()},fn}$r.profile&&(qr.getTotalRenderbufferSize=function(){var Bn=0;return Object.keys(Qn).forEach(function(mn){Bn+=Qn[mn].stats.size}),Bn});function Un(){qt(Qn).forEach(function(Bn){Bn.renderbuffer=We.createRenderbuffer(),We.bindRenderbuffer(Vu,Bn.renderbuffer),We.renderbufferStorage(Vu,Bn.format,Bn.width,Bn.height)}),We.bindRenderbuffer(Vu,null)}return{create:ia,clear:function(){qt(Qn).forEach(Rn)},restore:Un}},Vs=36160,Xc=36161,zf=3553,Dl=34069,zs=36064,Gd=36096,Yd=36128,Tu=33306,df=36053,nu=36193,Wd=5121,Zc=5126,jc=6407,Au=6408,Nv=[];Nv[Au]=4,Nv[jc]=3;var cv=[];cv[Wd]=1,cv[Zc]=4,cv[nu]=2;function hv(We,Gt,or,qr,$r,jr){var Kr={cur:null,next:null,dirty:!1,setFBO:null},yn=["rgba"],Qn=["rgba4","rgb565","rgb5 a1"];Gt.ext_srgb&&Qn.push("srgba"),Gt.ext_color_buffer_half_float&&Qn.push("rgba16f","rgb16f"),Gt.webgl_color_buffer_float&&Qn.push("rgba32f");var Wn=["uint8"];Gt.oes_texture_half_float&&Wn.push("half float","float16"),Gt.oes_texture_float&&Wn.push("float","float32");function Rn(ei,jn,Si){this.target=ei,this.texture=jn,this.renderbuffer=Si;var na=0,Ea=0;jn?(na=jn.width,Ea=jn.height):Si&&(na=Si.width,Ea=Si.height),this.width=na,this.height=Ea}function ia(ei){ei&&(ei.texture&&ei.texture._texture.decRef(),ei.renderbuffer&&ei.renderbuffer._renderbuffer.decRef())}function Un(ei,jn,Si){if(ei)if(ei.texture){var na=ei.texture._texture,Ea=Math.max(1,na.width),pi=Math.max(1,na.height);na.refCount+=1}else{var Vi=ei.renderbuffer._renderbuffer;Vi.refCount+=1}}function Bn(ei,jn){jn&&(jn.texture?We.framebufferTexture2D(Vs,ei,jn.target,jn.texture._texture.texture,0):We.framebufferRenderbuffer(Vs,ei,Xc,jn.renderbuffer._renderbuffer.renderbuffer))}function mn(ei){var jn=zf,Si=null,na=null,Ea=ei;typeof ei=="object"&&(Ea=ei.data,"target"in ei&&(jn=ei.target|0));var pi=Ea._reglType;return pi==="texture2d"||pi==="textureCube"?Si=Ea:pi==="renderbuffer"&&(na=Ea,jn=Xc),new Rn(jn,Si,na)}function zr(ei,jn,Si,na,Ea){if(Si){var pi=qr.create2D({width:ei,height:jn,format:na,type:Ea});return pi._texture.refCount=0,new Rn(zf,pi,null)}else{var Vi=$r.create({width:ei,height:jn,format:na});return Vi._renderbuffer.refCount=0,new Rn(Xc,null,Vi)}}function fn(ei){return ei&&(ei.texture||ei.renderbuffer)}function Vn(ei,jn,Si){ei&&(ei.texture?ei.texture.resize(jn,Si):ei.renderbuffer&&ei.renderbuffer.resize(jn,Si),ei.width=jn,ei.height=Si)}var Zn=0,En={};function mi(){this.id=Zn++,En[this.id]=this,this.framebuffer=We.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ri(ei){ei.colorAttachments.forEach(ia),ia(ei.depthAttachment),ia(ei.stencilAttachment),ia(ei.depthStencilAttachment)}function $i(ei){var jn=ei.framebuffer;We.deleteFramebuffer(jn),ei.framebuffer=null,jr.framebufferCount--,delete En[ei.id]}function Cn(ei){var jn;We.bindFramebuffer(Vs,ei.framebuffer);var Si=ei.colorAttachments;for(jn=0;jn<Si.length;++jn)Bn(zs+jn,Si[jn]);for(jn=Si.length;jn<or.maxColorAttachments;++jn)We.framebufferTexture2D(Vs,zs+jn,zf,null,0);We.framebufferTexture2D(Vs,Tu,zf,null,0),We.framebufferTexture2D(Vs,Gd,zf,null,0),We.framebufferTexture2D(Vs,Yd,zf,null,0),Bn(Gd,ei.depthAttachment),Bn(Yd,ei.stencilAttachment),Bn(Tu,ei.depthStencilAttachment);var na=We.checkFramebufferStatus(Vs);We.isContextLost(),We.bindFramebuffer(Vs,Kr.next?Kr.next.framebuffer:null),Kr.cur=Kr.next,We.getError()}function Tn(ei,jn){var Si=new mi;jr.framebufferCount++;function na(pi,Vi){var ha,_a=0,Wa=0,Ls=!0,lu=!0,uo=null,uu=!0,ps="rgba",Xl="uint8",Yf=1,fc=null,As=null,Zl=null,fu=!1;if(typeof pi=="number")_a=pi|0,Wa=Vi|0||_a;else if(!pi)_a=Wa=1;else{var ro=pi;if("shape"in ro){var Eu=ro.shape;_a=Eu[0],Wa=Eu[1]}else"radius"in ro&&(_a=Wa=ro.radius),"width"in ro&&(_a=ro.width),"height"in ro&&(Wa=ro.height);("color"in ro||"colors"in ro)&&(uo=ro.color||ro.colors,Array.isArray(uo)),uo||("colorCount"in ro&&(Yf=ro.colorCount|0),"colorTexture"in ro&&(uu=!!ro.colorTexture,ps="rgba4"),"colorType"in ro&&(Xl=ro.colorType,uu||(Xl==="half float"||Xl==="float16"?ps="rgba16f":(Xl==="float"||Xl==="float32")&&(ps="rgba32f"))),"colorFormat"in ro&&(ps=ro.colorFormat,yn.indexOf(ps)>=0?uu=!0:Qn.indexOf(ps)>=0&&(uu=!1))),("depthTexture"in ro||"depthStencilTexture"in ro)&&(fu=!!(ro.depthTexture||ro.depthStencilTexture)),"depth"in ro&&(typeof ro.depth=="boolean"?Ls=ro.depth:(fc=ro.depth,lu=!1)),"stencil"in ro&&(typeof ro.stencil=="boolean"?lu=ro.stencil:(As=ro.stencil,Ls=!1)),"depthStencil"in ro&&(typeof ro.depthStencil=="boolean"?Ls=lu=ro.depthStencil:(Zl=ro.depthStencil,Ls=!1,lu=!1))}var Ja=null,H=null,R=null,G=null;if(Array.isArray(uo))Ja=uo.map(mn);else if(uo)Ja=[mn(uo)];else for(Ja=new Array(Yf),ha=0;ha<Yf;++ha)Ja[ha]=zr(_a,Wa,uu,ps,Xl);_a=_a||Ja[0].width,Wa=Wa||Ja[0].height,fc?H=mn(fc):Ls&&!lu&&(H=zr(_a,Wa,fu,"depth","uint32")),As?R=mn(As):lu&&!Ls&&(R=zr(_a,Wa,!1,"stencil","uint8")),Zl?G=mn(Zl):!fc&&!As&&lu&&Ls&&(G=zr(_a,Wa,fu,"depth stencil","depth stencil"));var I=null;for(ha=0;ha<Ja.length;++ha)if(Un(Ja[ha],_a,Wa),Ja[ha]&&Ja[ha].texture){var W=Nv[Ja[ha].texture._texture.format]*cv[Ja[ha].texture._texture.type];I===null&&(I=W)}return Un(H,_a,Wa),Un(R,_a,Wa),Un(G,_a,Wa),ri(Si),Si.width=_a,Si.height=Wa,Si.colorAttachments=Ja,Si.depthAttachment=H,Si.stencilAttachment=R,Si.depthStencilAttachment=G,na.color=Ja.map(fn),na.depth=fn(H),na.stencil=fn(R),na.depthStencil=fn(G),na.width=Si.width,na.height=Si.height,Cn(Si),na}function Ea(pi,Vi){var ha=Math.max(pi|0,1),_a=Math.max(Vi|0||ha,1);if(ha===Si.width&&_a===Si.height)return na;for(var Wa=Si.colorAttachments,Ls=0;Ls<Wa.length;++Ls)Vn(Wa[Ls],ha,_a);return Vn(Si.depthAttachment,ha,_a),Vn(Si.stencilAttachment,ha,_a),Vn(Si.depthStencilAttachment,ha,_a),Si.width=na.width=ha,Si.height=na.height=_a,Cn(Si),na}return na(ei,jn),e(na,{resize:Ea,_reglType:"framebuffer",_framebuffer:Si,destroy:function(){$i(Si),ri(Si)},use:function(pi){Kr.setFBO({framebuffer:na},pi)}})}function Pi(ei){var jn=Array(6);function Si(Ea){var pi,Vi={color:null},ha=0,_a=null,Wa="rgba",Ls="uint8",lu=1;if(typeof Ea=="number")ha=Ea|0;else if(!Ea)ha=1;else{var uo=Ea;if("shape"in uo){var uu=uo.shape;ha=uu[0]}else"radius"in uo&&(ha=uo.radius|0),"width"in uo?(ha=uo.width|0,"height"in uo):"height"in uo&&(ha=uo.height|0);("color"in uo||"colors"in uo)&&(_a=uo.color||uo.colors,Array.isArray(_a)),_a||("colorCount"in uo&&(lu=uo.colorCount|0),"colorType"in uo&&(Ls=uo.colorType),"colorFormat"in uo&&(Wa=uo.colorFormat)),"depth"in uo&&(Vi.depth=uo.depth),"stencil"in uo&&(Vi.stencil=uo.stencil),"depthStencil"in uo&&(Vi.depthStencil=uo.depthStencil)}var ps;if(_a)if(Array.isArray(_a))for(ps=[],pi=0;pi<_a.length;++pi)ps[pi]=_a[pi];else ps=[_a];else{ps=Array(lu);var Xl={radius:ha,format:Wa,type:Ls};for(pi=0;pi<lu;++pi)ps[pi]=qr.createCube(Xl)}for(Vi.color=Array(ps.length),pi=0;pi<ps.length;++pi){var Yf=ps[pi];ha=ha||Yf.width,Vi.color[pi]={target:Dl,data:ps[pi]}}for(pi=0;pi<6;++pi){for(var fc=0;fc<ps.length;++fc)Vi.color[fc].target=Dl+pi;pi>0&&(Vi.depth=jn[0].depth,Vi.stencil=jn[0].stencil,Vi.depthStencil=jn[0].depthStencil),jn[pi]?jn[pi](Vi):jn[pi]=Tn(Vi)}return e(Si,{width:ha,height:ha,color:ps})}function na(Ea){var pi,Vi=Ea|0;if(Vi===Si.width)return Si;var ha=Si.color;for(pi=0;pi<ha.length;++pi)ha[pi].resize(Vi);for(pi=0;pi<6;++pi)jn[pi].resize(Vi);return Si.width=Si.height=Vi,Si}return Si(ei),e(Si,{faces:jn,resize:na,_reglType:"framebufferCube",destroy:function(){jn.forEach(function(Ea){Ea.destroy()})}})}function di(){Kr.cur=null,Kr.next=null,Kr.dirty=!0,qt(En).forEach(function(ei){ei.framebuffer=We.createFramebuffer(),Cn(ei)})}return e(Kr,{getFramebuffer:function(ei){if(typeof ei=="function"&&ei._reglType==="framebuffer"){var jn=ei._framebuffer;if(jn instanceof mi)return jn}return null},create:Tn,createCube:Pi,clear:function(){qt(En).forEach($i)},restore:di})}var Uv=5126,Kc=34962,Of=34963;function Ec(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Uv,this.offset=0,this.stride=0,this.divisor=0}function Lh(We,Gt,or,qr,$r,jr,Kr){for(var yn=or.maxAttributes,Qn=new Array(yn),Wn=0;Wn<yn;++Wn)Qn[Wn]=new Ec;var Rn=0,ia={},Un={Record:Ec,scope:{},state:Qn,currentVAO:null,targetVAO:null,restore:mn()?ri:function(){},createVAO:$i,getVAO:fn,destroyBuffer:Bn,setVAO:mn()?Vn:Zn,clear:mn()?En:function(){}};function Bn(Cn){for(var Tn=0;Tn<Qn.length;++Tn){var Pi=Qn[Tn];Pi.buffer===Cn&&(We.disableVertexAttribArray(Tn),Pi.buffer=null)}}function mn(){return Gt.oes_vertex_array_object}function zr(){return Gt.angle_instanced_arrays}function fn(Cn){return typeof Cn=="function"&&Cn._vao?Cn._vao:null}function Vn(Cn){if(Cn!==Un.currentVAO){var Tn=mn();Cn?Tn.bindVertexArrayOES(Cn.vao):Tn.bindVertexArrayOES(null),Un.currentVAO=Cn}}function Zn(Cn){if(Cn!==Un.currentVAO){if(Cn)Cn.bindAttrs();else{for(var Tn=zr(),Pi=0;Pi<Qn.length;++Pi){var di=Qn[Pi];di.buffer?(We.enableVertexAttribArray(Pi),di.buffer.bind(),We.vertexAttribPointer(Pi,di.size,di.type,di.normalized,di.stride,di.offfset),Tn&&di.divisor&&Tn.vertexAttribDivisorANGLE(Pi,di.divisor)):(We.disableVertexAttribArray(Pi),We.vertexAttrib4f(Pi,di.x,di.y,di.z,di.w))}Kr.elements?We.bindBuffer(Of,Kr.elements.buffer.buffer):We.bindBuffer(Of,null)}Un.currentVAO=Cn}}function En(){qt(ia).forEach(function(Cn){Cn.destroy()})}function mi(){this.id=++Rn,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Cn=mn();Cn?this.vao=Cn.createVertexArrayOES():this.vao=null,ia[this.id]=this,this.buffers=[]}mi.prototype.bindAttrs=function(){for(var Cn=zr(),Tn=this.attributes,Pi=0;Pi<Tn.length;++Pi){var di=Tn[Pi];di.buffer?(We.enableVertexAttribArray(Pi),We.bindBuffer(Kc,di.buffer.buffer),We.vertexAttribPointer(Pi,di.size,di.type,di.normalized,di.stride,di.offset),Cn&&di.divisor&&Cn.vertexAttribDivisorANGLE(Pi,di.divisor)):(We.disableVertexAttribArray(Pi),We.vertexAttrib4f(Pi,di.x,di.y,di.z,di.w))}for(var ei=Tn.length;ei<yn;++ei)We.disableVertexAttribArray(ei);var jn=jr.getElements(this.elements);jn?We.bindBuffer(Of,jn.buffer.buffer):We.bindBuffer(Of,null)},mi.prototype.refresh=function(){var Cn=mn();Cn&&(Cn.bindVertexArrayOES(this.vao),this.bindAttrs(),Un.currentVAO=null,Cn.bindVertexArrayOES(null))},mi.prototype.destroy=function(){if(this.vao){var Cn=mn();this===Un.currentVAO&&(Un.currentVAO=null,Cn.bindVertexArrayOES(null)),Cn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ia[this.id]&&(delete ia[this.id],qr.vaoCount-=1)};function ri(){var Cn=mn();Cn&&qt(ia).forEach(function(Tn){Tn.refresh()})}function $i(Cn){var Tn=new mi;qr.vaoCount+=1;function Pi(di){var ei;if(Array.isArray(di))ei=di,Tn.elements&&Tn.ownsElements&&Tn.elements.destroy(),Tn.elements=null,Tn.ownsElements=!1,Tn.offset=0,Tn.count=0,Tn.instances=-1,Tn.primitive=4;else{if(di.elements){var jn=di.elements;Tn.ownsElements?typeof jn=="function"&&jn._reglType==="elements"?(Tn.elements.destroy(),Tn.ownsElements=!1):(Tn.elements(jn),Tn.ownsElements=!1):jr.getElements(di.elements)?(Tn.elements=di.elements,Tn.ownsElements=!1):(Tn.elements=jr.create(di.elements),Tn.ownsElements=!0)}else Tn.elements=null,Tn.ownsElements=!1;ei=di.attributes,Tn.offset=0,Tn.count=-1,Tn.instances=-1,Tn.primitive=4,Tn.elements&&(Tn.count=Tn.elements._elements.vertCount,Tn.primitive=Tn.elements._elements.primType),"offset"in di&&(Tn.offset=di.offset|0),"count"in di&&(Tn.count=di.count|0),"instances"in di&&(Tn.instances=di.instances|0),"primitive"in di&&(Tn.primitive=qn[di.primitive])}var Si={},na=Tn.attributes;na.length=ei.length;for(var Ea=0;Ea<ei.length;++Ea){var pi=ei[Ea],Vi=na[Ea]=new Ec,ha=pi.data||pi;if(Array.isArray(ha)||nr(ha)||ur(ha)){var _a;Tn.buffers[Ea]&&(_a=Tn.buffers[Ea],nr(ha)&&_a._buffer.byteLength>=ha.byteLength?_a.subdata(ha):(_a.destroy(),Tn.buffers[Ea]=null)),Tn.buffers[Ea]||(_a=Tn.buffers[Ea]=$r.create(pi,Kc,!1,!0)),Vi.buffer=$r.getBuffer(_a),Vi.size=Vi.buffer.dimension|0,Vi.normalized=!1,Vi.type=Vi.buffer.dtype,Vi.offset=0,Vi.stride=0,Vi.divisor=0,Vi.state=1,Si[Ea]=1}else $r.getBuffer(pi)?(Vi.buffer=$r.getBuffer(pi),Vi.size=Vi.buffer.dimension|0,Vi.normalized=!1,Vi.type=Vi.buffer.dtype,Vi.offset=0,Vi.stride=0,Vi.divisor=0,Vi.state=1):$r.getBuffer(pi.buffer)?(Vi.buffer=$r.getBuffer(pi.buffer),Vi.size=(+pi.size||Vi.buffer.dimension)|0,Vi.normalized=!!pi.normalized||!1,"type"in pi?Vi.type=_n[pi.type]:Vi.type=Vi.buffer.dtype,Vi.offset=(pi.offset||0)|0,Vi.stride=(pi.stride||0)|0,Vi.divisor=(pi.divisor||0)|0,Vi.state=1):"x"in pi&&(Vi.x=+pi.x||0,Vi.y=+pi.y||0,Vi.z=+pi.z||0,Vi.w=+pi.w||0,Vi.state=2)}for(var Wa=0;Wa<Tn.buffers.length;++Wa)!Si[Wa]&&Tn.buffers[Wa]&&(Tn.buffers[Wa].destroy(),Tn.buffers[Wa]=null);return Tn.refresh(),Pi}return Pi.destroy=function(){for(var di=0;di<Tn.buffers.length;++di)Tn.buffers[di]&&Tn.buffers[di].destroy();Tn.buffers.length=0,Tn.ownsElements&&(Tn.elements.destroy(),Tn.elements=null,Tn.ownsElements=!1),Tn.destroy()},Pi._vao=Tn,Pi._reglType="vao",Pi(Cn)}return Un}var wd=35632,Oo=35633,Jc=35718,kc=35721;function Cc(We,Gt,or,qr){var $r={},jr={};function Kr(zr,fn,Vn,Zn){this.name=zr,this.id=fn,this.location=Vn,this.info=Zn}function yn(zr,fn){for(var Vn=0;Vn<zr.length;++Vn)if(zr[Vn].id===fn.id){zr[Vn].location=fn.location;return}zr.push(fn)}function Qn(zr,fn,Vn){var Zn=zr===wd?$r:jr,En=Zn[fn];if(!En){var mi=Gt.str(fn);En=We.createShader(zr),We.shaderSource(En,mi),We.compileShader(En),Zn[fn]=En}return En}var Wn={},Rn=[],ia=0;function Un(zr,fn){this.id=ia++,this.fragId=zr,this.vertId=fn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,qr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Bn(zr,fn,Vn){var Zn,En,mi=Qn(wd,zr.fragId),ri=Qn(Oo,zr.vertId),$i=zr.program=We.createProgram();if(We.attachShader($i,mi),We.attachShader($i,ri),Vn)for(Zn=0;Zn<Vn.length;++Zn){var Cn=Vn[Zn];We.bindAttribLocation($i,Cn[0],Cn[1])}We.linkProgram($i);var Tn=We.getProgramParameter($i,Jc);qr.profile&&(zr.stats.uniformsCount=Tn);var Pi=zr.uniforms;for(Zn=0;Zn<Tn;++Zn)if(En=We.getActiveUniform($i,Zn),En)if(En.size>1)for(var di=0;di<En.size;++di){var ei=En.name.replace("[0]","["+di+"]");yn(Pi,new Kr(ei,Gt.id(ei),We.getUniformLocation($i,ei),En))}else yn(Pi,new Kr(En.name,Gt.id(En.name),We.getUniformLocation($i,En.name),En));var jn=We.getProgramParameter($i,kc);qr.profile&&(zr.stats.attributesCount=jn);var Si=zr.attributes;for(Zn=0;Zn<jn;++Zn)En=We.getActiveAttrib($i,Zn),En&&yn(Si,new Kr(En.name,Gt.id(En.name),We.getAttribLocation($i,En.name),En))}qr.profile&&(or.getMaxUniformsCount=function(){var zr=0;return Rn.forEach(function(fn){fn.stats.uniformsCount>zr&&(zr=fn.stats.uniformsCount)}),zr},or.getMaxAttributesCount=function(){var zr=0;return Rn.forEach(function(fn){fn.stats.attributesCount>zr&&(zr=fn.stats.attributesCount)}),zr});function mn(){$r={},jr={};for(var zr=0;zr<Rn.length;++zr)Bn(Rn[zr],null,Rn[zr].attributes.map(function(fn){return[fn.location,fn.name]}))}return{clear:function(){var zr=We.deleteShader.bind(We);qt($r).forEach(zr),$r={},qt(jr).forEach(zr),jr={},Rn.forEach(function(fn){We.deleteProgram(fn.program)}),Rn.length=0,Wn={},or.shaderCount=0},program:function(zr,fn,Vn,Zn){var En=Wn[fn];En||(En=Wn[fn]={});var mi=En[zr];if(mi&&(mi.refCount++,!Zn))return mi;var ri=new Un(fn,zr);return or.shaderCount++,Bn(ri,Vn,Zn),mi||(En[zr]=ri),Rn.push(ri),e(ri,{destroy:function(){if(ri.refCount--,ri.refCount<=0){We.deleteProgram(ri.program);var $i=Rn.indexOf(ri);Rn.splice($i,1),or.shaderCount--}En[ri.vertId].refCount<=0&&(We.deleteShader(jr[ri.vertId]),delete jr[ri.vertId],delete Wn[ri.fragId][ri.vertId]),Object.keys(Wn[ri.fragId]).length||(We.deleteShader($r[ri.fragId]),delete $r[ri.fragId],delete Wn[ri.fragId])}})},restore:mn,shader:Qn,frag:-1,vert:-1}}var Qc=6408,pf=5121,sc=3333,Vv=5126;function Hs(We,Gt,or,qr,$r,jr,Kr){function yn(Rn){var ia;Gt.next===null?ia=pf:ia=Gt.next.colorAttachments[0].texture._texture.type;var Un=0,Bn=0,mn=qr.framebufferWidth,zr=qr.framebufferHeight,fn=null;nr(Rn)?fn=Rn:Rn&&(Un=Rn.x|0,Bn=Rn.y|0,mn=(Rn.width||qr.framebufferWidth-Un)|0,zr=(Rn.height||qr.framebufferHeight-Bn)|0,fn=Rn.data||null),or();var Vn=mn*zr*4;return fn||(ia===pf?fn=new Uint8Array(Vn):ia===Vv&&(fn=fn||new Float32Array(Vn))),We.pixelStorei(sc,4),We.readPixels(Un,Bn,mn,zr,Qc,ia,fn),fn}function Qn(Rn){var ia;return Gt.setFBO({framebuffer:Rn.framebuffer},function(){ia=yn(Rn)}),ia}function Wn(Rn){return!Rn||!("framebuffer"in Rn)?yn(Rn):Qn(Rn)}return Wn}var vv=0,Bf="";function Nf(We){return pl(Uf(Gu(We)))}function Uf(We){return Ve(Br(Ph(We),We.length*8))}function _s(We,Gt){var or=Ph(We);or.length>16&&(or=Br(or,We.length*8));for(var qr=Array(16),$r=Array(16),jr=0;jr<16;jr++)qr[jr]=or[jr]^909522486,$r[jr]=or[jr]^1549556828;var Kr=Br(qr.concat(Ph(Gt)),512+Gt.length*8);return Ve(Br($r.concat(Kr),768))}function pl(We){for(var Gt=vv?"0123456789ABCDEF":"0123456789abcdef",or="",qr,$r=0;$r<We.length;$r++)qr=We.charCodeAt($r),or+=Gt.charAt(qr>>>4&15)+Gt.charAt(qr&15);return or}function Hu(We){for(var Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",or="",qr=We.length,$r=0;$r<qr;$r+=3)for(var jr=We.charCodeAt($r)<<16|($r+1<qr?We.charCodeAt($r+1)<<8:0)|($r+2<qr?We.charCodeAt($r+2):0),Kr=0;Kr<4;Kr++)$r*8+Kr*6>We.length*8?or+=Bf:or+=Gt.charAt(jr>>>6*(3-Kr)&63);return or}function Vf(We,Gt){var or=Gt.length,qr=Array(),$r,jr,Kr,yn,Qn=Array(Math.ceil(We.length/2));for($r=0;$r<Qn.length;$r++)Qn[$r]=We.charCodeAt($r*2)<<8|We.charCodeAt($r*2+1);for(;Qn.length>0;){for(yn=Array(),Kr=0,$r=0;$r<Qn.length;$r++)Kr=(Kr<<16)+Qn[$r],jr=Math.floor(Kr/or),Kr-=jr*or,(yn.length>0||jr>0)&&(yn[yn.length]=jr);qr[qr.length]=Kr,Qn=yn}var Wn="";for($r=qr.length-1;$r>=0;$r--)Wn+=Gt.charAt(qr[$r]);var Rn=Math.ceil(We.length*8/(Math.log(Gt.length)/Math.log(2)));for($r=Wn.length;$r<Rn;$r++)Wn=Gt[0]+Wn;return Wn}function Gu(We){for(var Gt="",or=-1,qr,$r;++or<We.length;)qr=We.charCodeAt(or),$r=or+1<We.length?We.charCodeAt(or+1):0,55296<=qr&&qr<=56319&&56320<=$r&&$r<=57343&&(qr=65536+((qr&1023)<<10)+($r&1023),or++),qr<=127?Gt+=String.fromCharCode(qr):qr<=2047?Gt+=String.fromCharCode(192|qr>>>6&31,128|qr&63):qr<=65535?Gt+=String.fromCharCode(224|qr>>>12&15,128|qr>>>6&63,128|qr&63):qr<=2097151&&(Gt+=String.fromCharCode(240|qr>>>18&7,128|qr>>>12&63,128|qr>>>6&63,128|qr&63));return Gt}function Ph(We){for(var Gt=Array(We.length>>2),or=0;or<Gt.length;or++)Gt[or]=0;for(var or=0;or<We.length*8;or+=8)Gt[or>>5]|=(We.charCodeAt(or/8)&255)<<24-or%32;return Gt}function Ve(We){for(var Gt="",or=0;or<We.length*32;or+=8)Gt+=String.fromCharCode(We[or>>5]>>>24-or%32&255);return Gt}function it(We,Gt){return We>>>Gt|We<<32-Gt}function Ht(We,Gt){return We>>>Gt}function Rt(We,Gt,or){return We&Gt^~We&or}function lr(We,Gt,or){return We&Gt^We&or^Gt&or}function Lr(We){return it(We,2)^it(We,13)^it(We,22)}function Fr(We){return it(We,6)^it(We,11)^it(We,25)}function Zr(We){return it(We,7)^it(We,18)^Ht(We,3)}function nn(We){return it(We,17)^it(We,19)^Ht(We,10)}var An=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function Br(We,Gt){var or=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),qr=new Array(64),$r,jr,Kr,yn,Qn,Wn,Rn,ia,Un,Bn,mn,zr;for(We[Gt>>5]|=128<<24-Gt%32,We[(Gt+64>>9<<4)+15]=Gt,Un=0;Un<We.length;Un+=16){for($r=or[0],jr=or[1],Kr=or[2],yn=or[3],Qn=or[4],Wn=or[5],Rn=or[6],ia=or[7],Bn=0;Bn<64;Bn++)Bn<16?qr[Bn]=We[Bn+Un]:qr[Bn]=tn(tn(tn(nn(qr[Bn-2]),qr[Bn-7]),Zr(qr[Bn-15])),qr[Bn-16]),mn=tn(tn(tn(tn(ia,Fr(Qn)),Rt(Qn,Wn,Rn)),An[Bn]),qr[Bn]),zr=tn(Lr($r),lr($r,jr,Kr)),ia=Rn,Rn=Wn,Wn=Qn,Qn=tn(yn,mn),yn=Kr,Kr=jr,jr=$r,$r=tn(mn,zr);or[0]=tn($r,or[0]),or[1]=tn(jr,or[1]),or[2]=tn(Kr,or[2]),or[3]=tn(yn,or[3]),or[4]=tn(Qn,or[4]),or[5]=tn(Wn,or[5]),or[6]=tn(Rn,or[6]),or[7]=tn(ia,or[7])}return or}function tn(We,Gt){var or=(We&65535)+(Gt&65535),qr=(We>>16)+(Gt>>16)+(or>>16);return qr<<16|or&65535}function rn(We){return Array.prototype.slice.call(We)}function wn(We){return rn(We).join("")}function Gn(We){var Gt=We&&We.cache,or=0,qr=[],$r=[],jr=[];function Kr(mn,zr){var fn=zr&&zr.stable;if(!fn){for(var Vn=0;Vn<$r.length;++Vn)if($r[Vn]===mn&&!jr[Vn])return qr[Vn]}var Zn="g"+or++;return qr.push(Zn),$r.push(mn),jr.push(fn),Zn}function yn(){var mn=[];function zr(){mn.push.apply(mn,rn(arguments))}var fn=[];function Vn(){var Zn="v"+or++;return fn.push(Zn),arguments.length>0&&(mn.push(Zn,"="),mn.push.apply(mn,rn(arguments)),mn.push(";")),Zn}return e(zr,{def:Vn,toString:function(){return wn([fn.length>0?"var "+fn.join(",")+";":"",wn(mn)])}})}function Qn(){var mn=yn(),zr=yn(),fn=mn.toString,Vn=zr.toString;function Zn(En,mi){zr(En,mi,"=",mn.def(En,mi),";")}return e(function(){mn.apply(mn,rn(arguments))},{def:mn.def,entry:mn,exit:zr,save:Zn,set:function(En,mi,ri){Zn(En,mi),mn(En,mi,"=",ri,";")},toString:function(){return fn()+Vn()}})}function Wn(){var mn=wn(arguments),zr=Qn(),fn=Qn(),Vn=zr.toString,Zn=fn.toString;return e(zr,{then:function(){return zr.apply(zr,rn(arguments)),this},else:function(){return fn.apply(fn,rn(arguments)),this},toString:function(){var En=Zn();return En&&(En="else{"+En+"}"),wn(["if(",mn,"){",Vn(),"}",En])}})}var Rn=yn(),ia={};function Un(mn,zr){var fn=[];function Vn(){var $i="a"+fn.length;return fn.push($i),$i}zr=zr||0;for(var Zn=0;Zn<zr;++Zn)Vn();var En=Qn(),mi=En.toString,ri=ia[mn]=e(En,{arg:Vn,toString:function(){return wn(["function(",fn.join(),"){",mi(),"}"])}});return ri}function Bn(){var mn=['"use strict";',Rn,"return {"];Object.keys(ia).forEach(function(Zn){mn.push('"',Zn,'":',ia[Zn].toString(),",")}),mn.push("}");var zr=wn(mn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),fn;if(Gt&&(fn=Nf(zr),Gt[fn]))return Gt[fn].apply(null,$r);var Vn=Function.apply(null,qr.concat(zr));return Gt&&(Gt[fn]=Vn),Vn.apply(null,$r)}return{global:Rn,link:Kr,block:yn,proc:Un,scope:Qn,cond:Wn,compile:Bn}}var Oi="xyzw".split(""),Ii=5121,Hi=1,Ki=2,On=0,$n=1,Ji=2,ca=3,Ka=4,mo=5,vo=6,xo="dither",Na="blend.enable",bs="blend.color",Zo="blend.equation",Bo="blend.func",hi="depth.enable",ta="depth.func",ws="depth.range",Ml="depth.mask",Yl="colorMask",iu="cull.enable",Yu="cull.face",Hf="frontFace",au="lineWidth",Lc="polygonOffset.enable",Pc="polygonOffset.offset",lc="sample.alpha",Rh="sample.enable",$c="sample.coverage",uc="stencil.enable",gf="stencil.mask",Wu="stencil.func",Dh="stencil.opFront",Hv="stencil.opBack",Ih="scissor.enable",Gv="scissor.box",Rc="viewport",Mu="profile",eh="framebuffer",th="vert",rh="frag",Gf="elements",Fh="primitive",Yv="count",qh="offset",ou="instances",de="vao",Te="Width",Ce="Height",De=eh+Te,Ge=eh+Ce,He=Rc+Te,Qe=Rc+Ce,Ft="drawingBuffer",jt=Ft+Te,It=Ft+Ce,Kt=[Bo,Zo,Wu,Dh,Hv,$c,Rc,Gv,Pc],ir=34962,mr=34963,Sr=2884,Vr=3042,sn=3024,kn=2960,yi=2929,Qi=3089,ra=32823,sa=32926,pa=32928,Lo=5126,jo=35664,ba=35665,qa=35666,ds=5124,ol=35667,el=35668,to=35669,Ya=35670,Il=35671,Sl=35672,Su=35673,su=35674,Fl=35675,El=35676,yf=35678,Xu=35680,Zu=4,U=1028,Q=1029,se=2304,me=2305,we=32775,Me=32776,Ye=519,Pe=7680,tt=0,Mt=1,kt=32774,er=513,$t=36160,Tr=36064,Er={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},dr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},wr={cw:se,ccw:me};function Pr(We){return Array.isArray(We)||nr(We)||ur(We)}function kr(We){return We.sort(function(Gt,or){return Gt===Rc?-1:or===Rc?1:Gt<or?-1:1})}function vr(We,Gt,or,qr){this.thisDep=We,this.contextDep=Gt,this.propDep=or,this.append=qr}function gn(We){return We&&!(We.thisDep||We.contextDep||We.propDep)}function bn(We){return new vr(!1,!1,!1,We)}function In(We,Gt){var or=We.type;if(or===On){var qr=We.data.length;return new vr(!0,qr>=1,qr>=2,Gt)}else if(or===Ka){var $r=We.data;return new vr($r.thisDep,$r.contextDep,$r.propDep,Gt)}else{if(or===mo)return new vr(!1,!1,!1,Gt);if(or===vo){for(var jr=!1,Kr=!1,yn=!1,Qn=0;Qn<We.data.length;++Qn){var Wn=We.data[Qn];if(Wn.type===$n)yn=!0;else if(Wn.type===Ji)Kr=!0;else if(Wn.type===ca)jr=!0;else if(Wn.type===On){jr=!0;var Rn=Wn.data;Rn>=1&&(Kr=!0),Rn>=2&&(yn=!0)}else Wn.type===Ka&&(jr=jr||Wn.data.thisDep,Kr=Kr||Wn.data.contextDep,yn=yn||Wn.data.propDep)}return new vr(jr,Kr,yn,Gt)}else return new vr(or===ca,or===Ji,or===$n,Gt)}}var Xn=new vr(!1,!1,!1,function(){});function Ci(We,Gt,or,qr,$r,jr,Kr,yn,Qn,Wn,Rn,ia,Un,Bn,mn,zr){var fn=Wn.Record,Vn={add:32774,subtract:32778,"reverse subtract":32779};or.ext_blend_minmax&&(Vn.min=we,Vn.max=Me);var Zn=or.angle_instanced_arrays,En=or.webgl_draw_buffers,mi=or.oes_vertex_array_object,ri={dirty:!0,profile:zr.profile},$i={},Cn=[],Tn={},Pi={};function di(Be){return Be.replace(".","_")}function ei(Be,$e,ot){var Tt=di(Be);Cn.push(Be),$i[Tt]=ri[Tt]=!!ot,Tn[Tt]=$e}function jn(Be,$e,ot){var Tt=di(Be);Cn.push(Be),Array.isArray(ot)?(ri[Tt]=ot.slice(),$i[Tt]=ot.slice()):ri[Tt]=$i[Tt]=ot,Pi[Tt]=$e}function Si(Be){return!!isNaN(Be)}ei(xo,sn),ei(Na,Vr),jn(bs,"blendColor",[0,0,0,0]),jn(Zo,"blendEquationSeparate",[kt,kt]),jn(Bo,"blendFuncSeparate",[Mt,tt,Mt,tt]),ei(hi,yi,!0),jn(ta,"depthFunc",er),jn(ws,"depthRange",[0,1]),jn(Ml,"depthMask",!0),jn(Yl,Yl,[!0,!0,!0,!0]),ei(iu,Sr),jn(Yu,"cullFace",Q),jn(Hf,Hf,me),jn(au,au,1),ei(Lc,ra),jn(Pc,"polygonOffset",[0,0]),ei(lc,sa),ei(Rh,pa),jn($c,"sampleCoverage",[1,!1]),ei(uc,kn),jn(gf,"stencilMask",-1),jn(Wu,"stencilFunc",[Ye,0,-1]),jn(Dh,"stencilOpSeparate",[U,Pe,Pe,Pe]),jn(Hv,"stencilOpSeparate",[Q,Pe,Pe,Pe]),ei(Ih,Qi),jn(Gv,"scissor",[0,0,We.drawingBufferWidth,We.drawingBufferHeight]),jn(Rc,Rc,[0,0,We.drawingBufferWidth,We.drawingBufferHeight]);var na={gl:We,context:Un,strings:Gt,next:$i,current:ri,draw:ia,elements:jr,buffer:$r,shader:Rn,attributes:Wn.state,vao:Wn,uniforms:Qn,framebuffer:yn,extensions:or,timer:Bn,isBufferArgs:Pr},Ea={primTypes:qn,compareFuncs:rr,blendFuncs:Er,blendEquations:Vn,stencilOps:dr,glTypes:_n,orientationType:wr};En&&(Ea.backBuffer=[Q],Ea.drawBuffer=M(qr.maxDrawbuffers,function(Be){return Be===0?[0]:M(Be,function($e){return Tr+$e})}));var pi=0;function Vi(){var Be=Gn({cache:mn}),$e=Be.link,ot=Be.global;Be.id=pi++,Be.batchId="0";var Tt=$e(na),Lt=Be.shared={props:"a0"};Object.keys(na).forEach(function(Zt){Lt[Zt]=ot.def(Tt,".",Zt)});var Pt=Be.next={},Xt=Be.current={};Object.keys(Pi).forEach(function(Zt){Array.isArray(ri[Zt])&&(Pt[Zt]=ot.def(Lt.next,".",Zt),Xt[Zt]=ot.def(Lt.current,".",Zt))});var Nt=Be.constants={};Object.keys(Ea).forEach(function(Zt){Nt[Zt]=ot.def(JSON.stringify(Ea[Zt]))}),Be.invoke=function(Zt,Ct){switch(Ct.type){case On:var ar=["this",Lt.context,Lt.props,Be.batchId];return Zt.def($e(Ct.data),".call(",ar.slice(0,Math.max(Ct.data.length+1,4)),")");case $n:return Zt.def(Lt.props,Ct.data);case Ji:return Zt.def(Lt.context,Ct.data);case ca:return Zt.def("this",Ct.data);case Ka:return Ct.data.append(Be,Zt),Ct.data.ref;case mo:return Ct.data.toString();case vo:return Ct.data.map(function(yr){return Be.invoke(Zt,yr)})}},Be.attribCache={};var Dt={};return Be.scopeAttrib=function(Zt){var Ct=Gt.id(Zt);if(Ct in Dt)return Dt[Ct];var ar=Wn.scope[Ct];ar||(ar=Wn.scope[Ct]=new fn);var yr=Dt[Ct]=$e(ar);return yr},Be}function ha(Be){var $e=Be.static,ot=Be.dynamic,Tt;if(Mu in $e){var Lt=!!$e[Mu];Tt=bn(function(Xt,Nt){return Lt}),Tt.enable=Lt}else if(Mu in ot){var Pt=ot[Mu];Tt=In(Pt,function(Xt,Nt){return Xt.invoke(Nt,Pt)})}return Tt}function _a(Be,$e){var ot=Be.static,Tt=Be.dynamic;if(eh in ot){var Lt=ot[eh];return Lt?(Lt=yn.getFramebuffer(Lt),bn(function(Xt,Nt){var Dt=Xt.link(Lt),Zt=Xt.shared;Nt.set(Zt.framebuffer,".next",Dt);var Ct=Zt.context;return Nt.set(Ct,"."+De,Dt+".width"),Nt.set(Ct,"."+Ge,Dt+".height"),Dt})):bn(function(Xt,Nt){var Dt=Xt.shared;Nt.set(Dt.framebuffer,".next","null");var Zt=Dt.context;return Nt.set(Zt,"."+De,Zt+"."+jt),Nt.set(Zt,"."+Ge,Zt+"."+It),"null"})}else if(eh in Tt){var Pt=Tt[eh];return In(Pt,function(Xt,Nt){var Dt=Xt.invoke(Nt,Pt),Zt=Xt.shared,Ct=Zt.framebuffer,ar=Nt.def(Ct,".getFramebuffer(",Dt,")");Nt.set(Ct,".next",ar);var yr=Zt.context;return Nt.set(yr,"."+De,ar+"?"+ar+".width:"+yr+"."+jt),Nt.set(yr,"."+Ge,ar+"?"+ar+".height:"+yr+"."+It),ar})}else return null}function Wa(Be,$e,ot){var Tt=Be.static,Lt=Be.dynamic;function Pt(Dt){if(Dt in Tt){var Zt=Tt[Dt],Ct=!0,ar=Zt.x|0,yr=Zt.y|0,Dr,ln;return"width"in Zt?Dr=Zt.width|0:Ct=!1,"height"in Zt?ln=Zt.height|0:Ct=!1,new vr(!Ct&&$e&&$e.thisDep,!Ct&&$e&&$e.contextDep,!Ct&&$e&&$e.propDep,function(ii,Nn){var un=ii.shared.context,Ln=Dr;"width"in Zt||(Ln=Nn.def(un,".",De,"-",ar));var Mn=ln;return"height"in Zt||(Mn=Nn.def(un,".",Ge,"-",yr)),[ar,yr,Ln,Mn]})}else if(Dt in Lt){var Xr=Lt[Dt],dn=In(Xr,function(ii,Nn){var un=ii.invoke(Nn,Xr),Ln=ii.shared.context,Mn=Nn.def(un,".x|0"),Kn=Nn.def(un,".y|0"),xi=Nn.def('"width" in ',un,"?",un,".width|0:","(",Ln,".",De,"-",Mn,")"),Da=Nn.def('"height" in ',un,"?",un,".height|0:","(",Ln,".",Ge,"-",Kn,")");return[Mn,Kn,xi,Da]});return $e&&(dn.thisDep=dn.thisDep||$e.thisDep,dn.contextDep=dn.contextDep||$e.contextDep,dn.propDep=dn.propDep||$e.propDep),dn}else return $e?new vr($e.thisDep,$e.contextDep,$e.propDep,function(ii,Nn){var un=ii.shared.context;return[0,0,Nn.def(un,".",De),Nn.def(un,".",Ge)]}):null}var Xt=Pt(Rc);if(Xt){var Nt=Xt;Xt=new vr(Xt.thisDep,Xt.contextDep,Xt.propDep,function(Dt,Zt){var Ct=Nt.append(Dt,Zt),ar=Dt.shared.context;return Zt.set(ar,"."+He,Ct[2]),Zt.set(ar,"."+Qe,Ct[3]),Ct})}return{viewport:Xt,scissor_box:Pt(Gv)}}function Ls(Be,$e){var ot=Be.static,Tt=typeof ot[rh]=="string"&&typeof ot[th]=="string";if(Tt){if(Object.keys($e.dynamic).length>0)return null;var Lt=$e.static,Pt=Object.keys(Lt);if(Pt.length>0&&typeof Lt[Pt[0]]=="number"){for(var Xt=[],Nt=0;Nt<Pt.length;++Nt)Xt.push([Lt[Pt[Nt]]|0,Pt[Nt]]);return Xt}}return null}function lu(Be,$e,ot){var Tt=Be.static,Lt=Be.dynamic;function Pt(Ct){if(Ct in Tt){var ar=Gt.id(Tt[Ct]),yr=bn(function(){return ar});return yr.id=ar,yr}else if(Ct in Lt){var Dr=Lt[Ct];return In(Dr,function(ln,Xr){var dn=ln.invoke(Xr,Dr),ii=Xr.def(ln.shared.strings,".id(",dn,")");return ii})}return null}var Xt=Pt(rh),Nt=Pt(th),Dt=null,Zt;return gn(Xt)&&gn(Nt)?(Dt=Rn.program(Nt.id,Xt.id,null,ot),Zt=bn(function(Ct,ar){return Ct.link(Dt)})):Zt=new vr(Xt&&Xt.thisDep||Nt&&Nt.thisDep,Xt&&Xt.contextDep||Nt&&Nt.contextDep,Xt&&Xt.propDep||Nt&&Nt.propDep,function(Ct,ar){var yr=Ct.shared.shader,Dr;Xt?Dr=Xt.append(Ct,ar):Dr=ar.def(yr,".",rh);var ln;Nt?ln=Nt.append(Ct,ar):ln=ar.def(yr,".",th);var Xr=yr+".program("+ln+","+Dr;return ar.def(Xr+")")}),{frag:Xt,vert:Nt,progVar:Zt,program:Dt}}function uo(Be,$e){var ot=Be.static,Tt=Be.dynamic,Lt={},Pt=!1;function Xt(){if(de in ot){var Nn=ot[de];return Nn!==null&&Wn.getVAO(Nn)===null&&(Nn=Wn.createVAO(Nn)),Pt=!0,Lt.vao=Nn,bn(function(Ln){var Mn=Wn.getVAO(Nn);return Mn?Ln.link(Mn):"null"})}else if(de in Tt){Pt=!0;var un=Tt[de];return In(un,function(Ln,Mn){var Kn=Ln.invoke(Mn,un);return Mn.def(Ln.shared.vao+".getVAO("+Kn+")")})}return null}var Nt=Xt(),Dt=!1;function Zt(){if(Gf in ot){var Nn=ot[Gf];if(Lt.elements=Nn,Pr(Nn)){var un=Lt.elements=jr.create(Nn,!0);Nn=jr.getElements(un),Dt=!0}else Nn&&(Nn=jr.getElements(Nn),Dt=!0);var Ln=bn(function(Kn,xi){if(Nn){var Da=Kn.link(Nn);return Kn.ELEMENTS=Da,Da}return Kn.ELEMENTS=null,null});return Ln.value=Nn,Ln}else if(Gf in Tt){Dt=!0;var Mn=Tt[Gf];return In(Mn,function(Kn,xi){var Da=Kn.shared,Pa=Da.isBufferArgs,_o=Da.elements,ua=Kn.invoke(xi,Mn),Qa=xi.def("null"),Vo=xi.def(Pa,"(",ua,")"),ml=Kn.cond(Vo).then(Qa,"=",_o,".createStream(",ua,");").else(Qa,"=",_o,".getElements(",ua,");");return xi.entry(ml),xi.exit(Kn.cond(Vo).then(_o,".destroyStream(",Qa,");")),Kn.ELEMENTS=Qa,Qa})}else if(Pt)return new vr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")});return null}var Ct=Zt();function ar(){if(Fh in ot){var Nn=ot[Fh];return Lt.primitive=Nn,bn(function(Ln,Mn){return qn[Nn]})}else if(Fh in Tt){var un=Tt[Fh];return In(un,function(Ln,Mn){var Kn=Ln.constants.primTypes,xi=Ln.invoke(Mn,un);return Mn.def(Kn,"[",xi,"]")})}else{if(Dt)return gn(Ct)?Ct.value?bn(function(Ln,Mn){return Mn.def(Ln.ELEMENTS,".primType")}):bn(function(){return Zu}):new vr(Ct.thisDep,Ct.contextDep,Ct.propDep,function(Ln,Mn){var Kn=Ln.ELEMENTS;return Mn.def(Kn,"?",Kn,".primType:",Zu)});if(Pt)return new vr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Ln,Mn){return Mn.def(Ln.shared.vao+".currentVAO?"+Ln.shared.vao+".currentVAO.primitive:"+Zu)})}return null}function yr(Nn,un){if(Nn in ot){var Ln=ot[Nn]|0;return un?Lt.offset=Ln:Lt.instances=Ln,bn(function(Kn,xi){return un&&(Kn.OFFSET=Ln),Ln})}else if(Nn in Tt){var Mn=Tt[Nn];return In(Mn,function(Kn,xi){var Da=Kn.invoke(xi,Mn);return un&&(Kn.OFFSET=Da),Da})}else if(un){if(Dt)return bn(function(Kn,xi){return Kn.OFFSET=0,0});if(Pt)return new vr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.offset:0")})}else if(Pt)return new vr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.instances:-1")});return null}var Dr=yr(qh,!0);function ln(){if(Yv in ot){var Nn=ot[Yv]|0;return Lt.count=Nn,bn(function(){return Nn})}else if(Yv in Tt){var un=Tt[Yv];return In(un,function(xi,Da){var Pa=xi.invoke(Da,un);return Pa})}else if(Dt)if(gn(Ct)){if(Ct)return Dr?new vr(Dr.thisDep,Dr.contextDep,Dr.propDep,function(xi,Da){var Pa=Da.def(xi.ELEMENTS,".vertCount-",xi.OFFSET);return Pa}):bn(function(xi,Da){return Da.def(xi.ELEMENTS,".vertCount")});var Ln=bn(function(){return-1});return Ln}else{var Mn=new vr(Ct.thisDep||Dr.thisDep,Ct.contextDep||Dr.contextDep,Ct.propDep||Dr.propDep,function(xi,Da){var Pa=xi.ELEMENTS;return xi.OFFSET?Da.def(Pa,"?",Pa,".vertCount-",xi.OFFSET,":-1"):Da.def(Pa,"?",Pa,".vertCount:-1")});return Mn}else if(Pt){var Kn=new vr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(xi,Da){return Da.def(xi.shared.vao,".currentVAO?",xi.shared.vao,".currentVAO.count:-1")});return Kn}return null}var Xr=ar(),dn=ln(),ii=yr(ou,!1);return{elements:Ct,primitive:Xr,count:dn,instances:ii,offset:Dr,vao:Nt,vaoActive:Pt,elementsActive:Dt,static:Lt}}function uu(Be,$e){var ot=Be.static,Tt=Be.dynamic,Lt={};return Cn.forEach(function(Pt){var Xt=di(Pt);function Nt(Dt,Zt){if(Pt in ot){var Ct=Dt(ot[Pt]);Lt[Xt]=bn(function(){return Ct})}else if(Pt in Tt){var ar=Tt[Pt];Lt[Xt]=In(ar,function(yr,Dr){return Zt(yr,Dr,yr.invoke(Dr,ar))})}}switch(Pt){case iu:case Na:case xo:case uc:case hi:case Ih:case Lc:case lc:case Rh:case Ml:return Nt(function(Dt){return Dt},function(Dt,Zt,Ct){return Ct});case ta:return Nt(function(Dt){return rr[Dt]},function(Dt,Zt,Ct){var ar=Dt.constants.compareFuncs;return Zt.def(ar,"[",Ct,"]")});case ws:return Nt(function(Dt){return Dt},function(Dt,Zt,Ct){var ar=Zt.def("+",Ct,"[0]"),yr=Zt.def("+",Ct,"[1]");return[ar,yr]});case Bo:return Nt(function(Dt){var Zt="srcRGB"in Dt?Dt.srcRGB:Dt.src,Ct="srcAlpha"in Dt?Dt.srcAlpha:Dt.src,ar="dstRGB"in Dt?Dt.dstRGB:Dt.dst,yr="dstAlpha"in Dt?Dt.dstAlpha:Dt.dst;return[Er[Zt],Er[ar],Er[Ct],Er[yr]]},function(Dt,Zt,Ct){var ar=Dt.constants.blendFuncs;function yr(un,Ln){var Mn=Zt.def('"',un,Ln,'" in ',Ct,"?",Ct,".",un,Ln,":",Ct,".",un);return Mn}var Dr=yr("src","RGB"),ln=yr("dst","RGB"),Xr=Zt.def(ar,"[",Dr,"]"),dn=Zt.def(ar,"[",yr("src","Alpha"),"]"),ii=Zt.def(ar,"[",ln,"]"),Nn=Zt.def(ar,"[",yr("dst","Alpha"),"]");return[Xr,ii,dn,Nn]});case Zo:return Nt(function(Dt){if(typeof Dt=="string")return[Vn[Dt],Vn[Dt]];if(typeof Dt=="object")return[Vn[Dt.rgb],Vn[Dt.alpha]]},function(Dt,Zt,Ct){var ar=Dt.constants.blendEquations,yr=Zt.def(),Dr=Zt.def(),ln=Dt.cond("typeof ",Ct,'==="string"');return ln.then(yr,"=",Dr,"=",ar,"[",Ct,"];"),ln.else(yr,"=",ar,"[",Ct,".rgb];",Dr,"=",ar,"[",Ct,".alpha];"),Zt(ln),[yr,Dr]});case bs:return Nt(function(Dt){return M(4,function(Zt){return+Dt[Zt]})},function(Dt,Zt,Ct){return M(4,function(ar){return Zt.def("+",Ct,"[",ar,"]")})});case gf:return Nt(function(Dt){return Dt|0},function(Dt,Zt,Ct){return Zt.def(Ct,"|0")});case Wu:return Nt(function(Dt){var Zt=Dt.cmp||"keep",Ct=Dt.ref||0,ar="mask"in Dt?Dt.mask:-1;return[rr[Zt],Ct,ar]},function(Dt,Zt,Ct){var ar=Dt.constants.compareFuncs,yr=Zt.def('"cmp" in ',Ct,"?",ar,"[",Ct,".cmp]",":",Pe),Dr=Zt.def(Ct,".ref|0"),ln=Zt.def('"mask" in ',Ct,"?",Ct,".mask|0:-1");return[yr,Dr,ln]});case Dh:case Hv:return Nt(function(Dt){var Zt=Dt.fail||"keep",Ct=Dt.zfail||"keep",ar=Dt.zpass||"keep";return[Pt===Hv?Q:U,dr[Zt],dr[Ct],dr[ar]]},function(Dt,Zt,Ct){var ar=Dt.constants.stencilOps;function yr(Dr){return Zt.def('"',Dr,'" in ',Ct,"?",ar,"[",Ct,".",Dr,"]:",Pe)}return[Pt===Hv?Q:U,yr("fail"),yr("zfail"),yr("zpass")]});case Pc:return Nt(function(Dt){var Zt=Dt.factor|0,Ct=Dt.units|0;return[Zt,Ct]},function(Dt,Zt,Ct){var ar=Zt.def(Ct,".factor|0"),yr=Zt.def(Ct,".units|0");return[ar,yr]});case Yu:return Nt(function(Dt){var Zt=0;return Dt==="front"?Zt=U:Dt==="back"&&(Zt=Q),Zt},function(Dt,Zt,Ct){return Zt.def(Ct,'==="front"?',U,":",Q)});case au:return Nt(function(Dt){return Dt},function(Dt,Zt,Ct){return Ct});case Hf:return Nt(function(Dt){return wr[Dt]},function(Dt,Zt,Ct){return Zt.def(Ct+'==="cw"?'+se+":"+me)});case Yl:return Nt(function(Dt){return Dt.map(function(Zt){return!!Zt})},function(Dt,Zt,Ct){return M(4,function(ar){return"!!"+Ct+"["+ar+"]"})});case $c:return Nt(function(Dt){var Zt="value"in Dt?Dt.value:1,Ct=!!Dt.invert;return[Zt,Ct]},function(Dt,Zt,Ct){var ar=Zt.def('"value" in ',Ct,"?+",Ct,".value:1"),yr=Zt.def("!!",Ct,".invert");return[ar,yr]})}}),Lt}function ps(Be,$e){var ot=Be.static,Tt=Be.dynamic,Lt={};return Object.keys(ot).forEach(function(Pt){var Xt=ot[Pt],Nt;if(typeof Xt=="number"||typeof Xt=="boolean")Nt=bn(function(){return Xt});else if(typeof Xt=="function"){var Dt=Xt._reglType;Dt==="texture2d"||Dt==="textureCube"?Nt=bn(function(Zt){return Zt.link(Xt)}):(Dt==="framebuffer"||Dt==="framebufferCube")&&(Nt=bn(function(Zt){return Zt.link(Xt.color[0])}))}else pn(Xt)&&(Nt=bn(function(Zt){var Ct=Zt.global.def("[",M(Xt.length,function(ar){return Xt[ar]}),"]");return Ct}));Nt.value=Xt,Lt[Pt]=Nt}),Object.keys(Tt).forEach(function(Pt){var Xt=Tt[Pt];Lt[Pt]=In(Xt,function(Nt,Dt){return Nt.invoke(Dt,Xt)})}),Lt}function Xl(Be,$e){var ot=Be.static,Tt=Be.dynamic,Lt={};return Object.keys(ot).forEach(function(Pt){var Xt=ot[Pt],Nt=Gt.id(Pt),Dt=new fn;if(Pr(Xt))Dt.state=Hi,Dt.buffer=$r.getBuffer($r.create(Xt,ir,!1,!0)),Dt.type=0;else{var Zt=$r.getBuffer(Xt);if(Zt)Dt.state=Hi,Dt.buffer=Zt,Dt.type=0;else if("constant"in Xt){var Ct=Xt.constant;Dt.buffer="null",Dt.state=Ki,typeof Ct=="number"?Dt.x=Ct:Oi.forEach(function(ii,Nn){Nn<Ct.length&&(Dt[ii]=Ct[Nn])})}else{Pr(Xt.buffer)?Zt=$r.getBuffer($r.create(Xt.buffer,ir,!1,!0)):Zt=$r.getBuffer(Xt.buffer);var ar=Xt.offset|0,yr=Xt.stride|0,Dr=Xt.size|0,ln=!!Xt.normalized,Xr=0;"type"in Xt&&(Xr=_n[Xt.type]);var dn=Xt.divisor|0;Dt.buffer=Zt,Dt.state=Hi,Dt.size=Dr,Dt.normalized=ln,Dt.type=Xr||Zt.dtype,Dt.offset=ar,Dt.stride=yr,Dt.divisor=dn}}Lt[Pt]=bn(function(ii,Nn){var un=ii.attribCache;if(Nt in un)return un[Nt];var Ln={isStream:!1};return Object.keys(Dt).forEach(function(Mn){Ln[Mn]=Dt[Mn]}),Dt.buffer&&(Ln.buffer=ii.link(Dt.buffer),Ln.type=Ln.type||Ln.buffer+".dtype"),un[Nt]=Ln,Ln})}),Object.keys(Tt).forEach(function(Pt){var Xt=Tt[Pt];function Nt(Dt,Zt){var Ct=Dt.invoke(Zt,Xt),ar=Dt.shared,yr=Dt.constants,Dr=ar.isBufferArgs,ln=ar.buffer,Xr={isStream:Zt.def(!1)},dn=new fn;dn.state=Hi,Object.keys(dn).forEach(function(Ln){Xr[Ln]=Zt.def(""+dn[Ln])});var ii=Xr.buffer,Nn=Xr.type;Zt("if(",Dr,"(",Ct,")){",Xr.isStream,"=true;",ii,"=",ln,".createStream(",ir,",",Ct,");",Nn,"=",ii,".dtype;","}else{",ii,"=",ln,".getBuffer(",Ct,");","if(",ii,"){",Nn,"=",ii,".dtype;",'}else if("constant" in ',Ct,"){",Xr.state,"=",Ki,";","if(typeof "+Ct+'.constant === "number"){',Xr[Oi[0]],"=",Ct,".constant;",Oi.slice(1).map(function(Ln){return Xr[Ln]}).join("="),"=0;","}else{",Oi.map(function(Ln,Mn){return Xr[Ln]+"="+Ct+".constant.length>"+Mn+"?"+Ct+".constant["+Mn+"]:0;"}).join(""),"}}else{","if(",Dr,"(",Ct,".buffer)){",ii,"=",ln,".createStream(",ir,",",Ct,".buffer);","}else{",ii,"=",ln,".getBuffer(",Ct,".buffer);","}",Nn,'="type" in ',Ct,"?",yr.glTypes,"[",Ct,".type]:",ii,".dtype;",Xr.normalized,"=!!",Ct,".normalized;");function un(Ln){Zt(Xr[Ln],"=",Ct,".",Ln,"|0;")}return un("size"),un("offset"),un("stride"),un("divisor"),Zt("}}"),Zt.exit("if(",Xr.isStream,"){",ln,".destroyStream(",ii,");","}"),Xr}Lt[Pt]=In(Xt,Nt)}),Lt}function Yf(Be){var $e=Be.static,ot=Be.dynamic,Tt={};return Object.keys($e).forEach(function(Lt){var Pt=$e[Lt];Tt[Lt]=bn(function(Xt,Nt){return typeof Pt=="number"||typeof Pt=="boolean"?""+Pt:Xt.link(Pt)})}),Object.keys(ot).forEach(function(Lt){var Pt=ot[Lt];Tt[Lt]=In(Pt,function(Xt,Nt){return Xt.invoke(Nt,Pt)})}),Tt}function fc(Be,$e,ot,Tt,Lt){var Pt=Be.static,Xt=Be.dynamic,Nt=Ls(Be,$e),Dt=_a(Be,Lt),Zt=Wa(Be,Dt,Lt),Ct=uo(Be,Lt),ar=uu(Be,Lt),yr=lu(Be,Lt,Nt);function Dr(un){var Ln=Zt[un];Ln&&(ar[un]=Ln)}Dr(Rc),Dr(di(Gv));var ln=Object.keys(ar).length>0,Xr={framebuffer:Dt,draw:Ct,shader:yr,state:ar,dirty:ln,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Xr.profile=ha(Be,Lt),Xr.uniforms=ps(ot,Lt),Xr.drawVAO=Xr.scopeVAO=Ct.vao,!Xr.drawVAO&&yr.program&&!Nt&&or.angle_instanced_arrays&&Ct.static.elements){var dn=!0,ii=yr.program.attributes.map(function(un){var Ln=$e.static[un];return dn=dn&&!!Ln,Ln});if(dn&&ii.length>0){var Nn=Wn.getVAO(Wn.createVAO({attributes:ii,elements:Ct.static.elements}));Xr.drawVAO=new vr(null,null,null,function(un,Ln){return un.link(Nn)}),Xr.useVAO=!0}}return Nt?Xr.useVAO=!0:Xr.attributes=Xl($e,Lt),Xr.context=Yf(Tt,Lt),Xr}function As(Be,$e,ot){var Tt=Be.shared,Lt=Tt.context,Pt=Be.scope();Object.keys(ot).forEach(function(Xt){$e.save(Lt,"."+Xt);var Nt=ot[Xt],Dt=Nt.append(Be,$e);Array.isArray(Dt)?Pt(Lt,".",Xt,"=[",Dt.join(),"];"):Pt(Lt,".",Xt,"=",Dt,";")}),$e(Pt)}function Zl(Be,$e,ot,Tt){var Lt=Be.shared,Pt=Lt.gl,Xt=Lt.framebuffer,Nt;En&&(Nt=$e.def(Lt.extensions,".webgl_draw_buffers"));var Dt=Be.constants,Zt=Dt.drawBuffer,Ct=Dt.backBuffer,ar;ot?ar=ot.append(Be,$e):ar=$e.def(Xt,".next"),Tt||$e("if(",ar,"!==",Xt,".cur){"),$e("if(",ar,"){",Pt,".bindFramebuffer(",$t,",",ar,".framebuffer);"),En&&$e(Nt,".drawBuffersWEBGL(",Zt,"[",ar,".colorAttachments.length]);"),$e("}else{",Pt,".bindFramebuffer(",$t,",null);"),En&&$e(Nt,".drawBuffersWEBGL(",Ct,");"),$e("}",Xt,".cur=",ar,";"),Tt||$e("}")}function fu(Be,$e,ot){var Tt=Be.shared,Lt=Tt.gl,Pt=Be.current,Xt=Be.next,Nt=Tt.current,Dt=Tt.next,Zt=Be.cond(Nt,".dirty");Cn.forEach(function(Ct){var ar=di(Ct);if(!(ar in ot.state)){var yr,Dr;if(ar in Xt){yr=Xt[ar],Dr=Pt[ar];var ln=M(ri[ar].length,function(dn){return Zt.def(yr,"[",dn,"]")});Zt(Be.cond(ln.map(function(dn,ii){return dn+"!=="+Dr+"["+ii+"]"}).join("||")).then(Lt,".",Pi[ar],"(",ln,");",ln.map(function(dn,ii){return Dr+"["+ii+"]="+dn}).join(";"),";"))}else{yr=Zt.def(Dt,".",ar);var Xr=Be.cond(yr,"!==",Nt,".",ar);Zt(Xr),ar in Tn?Xr(Be.cond(yr).then(Lt,".enable(",Tn[ar],");").else(Lt,".disable(",Tn[ar],");"),Nt,".",ar,"=",yr,";"):Xr(Lt,".",Pi[ar],"(",yr,");",Nt,".",ar,"=",yr,";")}}}),Object.keys(ot.state).length===0&&Zt(Nt,".dirty=false;"),$e(Zt)}function ro(Be,$e,ot,Tt){var Lt=Be.shared,Pt=Be.current,Xt=Lt.current,Nt=Lt.gl,Dt;kr(Object.keys(ot)).forEach(function(Zt){var Ct=ot[Zt];if(!(Tt&&!Tt(Ct))){var ar=Ct.append(Be,$e);if(Tn[Zt]){var yr=Tn[Zt];gn(Ct)?(Dt=Be.link(ar,{stable:!0}),$e(Be.cond(Dt).then(Nt,".enable(",yr,");").else(Nt,".disable(",yr,");")),$e(Xt,".",Zt,"=",Dt,";")):($e(Be.cond(ar).then(Nt,".enable(",yr,");").else(Nt,".disable(",yr,");")),$e(Xt,".",Zt,"=",ar,";"))}else if(pn(ar)){var Dr=Pt[Zt];$e(Nt,".",Pi[Zt],"(",ar,");",ar.map(function(ln,Xr){return Dr+"["+Xr+"]="+ln}).join(";"),";")}else gn(Ct)?(Dt=Be.link(ar,{stable:!0}),$e(Nt,".",Pi[Zt],"(",Dt,");",Xt,".",Zt,"=",Dt,";")):$e(Nt,".",Pi[Zt],"(",ar,");",Xt,".",Zt,"=",ar,";")}})}function Eu(Be,$e){Zn&&(Be.instancing=$e.def(Be.shared.extensions,".angle_instanced_arrays"))}function Ja(Be,$e,ot,Tt,Lt){var Pt=Be.shared,Xt=Be.stats,Nt=Pt.current,Dt=Pt.timer,Zt=ot.profile;function Ct(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var ar,yr;function Dr(un){ar=$e.def(),un(ar,"=",Ct(),";"),typeof Lt=="string"?un(Xt,".count+=",Lt,";"):un(Xt,".count++;"),Bn&&(Tt?(yr=$e.def(),un(yr,"=",Dt,".getNumPendingQueries();")):un(Dt,".beginQuery(",Xt,");"))}function ln(un){un(Xt,".cpuTime+=",Ct(),"-",ar,";"),Bn&&(Tt?un(Dt,".pushScopeStats(",yr,",",Dt,".getNumPendingQueries(),",Xt,");"):un(Dt,".endQuery();"))}function Xr(un){var Ln=$e.def(Nt,".profile");$e(Nt,".profile=",un,";"),$e.exit(Nt,".profile=",Ln,";")}var dn;if(Zt){if(gn(Zt)){Zt.enable?(Dr($e),ln($e.exit),Xr("true")):Xr("false");return}dn=Zt.append(Be,$e),Xr(dn)}else dn=$e.def(Nt,".profile");var ii=Be.block();Dr(ii),$e("if(",dn,"){",ii,"}");var Nn=Be.block();ln(Nn),$e.exit("if(",dn,"){",Nn,"}")}function H(Be,$e,ot,Tt,Lt){var Pt=Be.shared;function Xt(Dt){switch(Dt){case jo:case ol:case Il:return 2;case ba:case el:case Sl:return 3;case qa:case to:case Su:return 4;default:return 1}}function Nt(Dt,Zt,Ct){var ar=Pt.gl,yr=$e.def(Dt,".location"),Dr=$e.def(Pt.attributes,"[",yr,"]"),ln=Ct.state,Xr=Ct.buffer,dn=[Ct.x,Ct.y,Ct.z,Ct.w],ii=["buffer","normalized","offset","stride"];function Nn(){$e("if(!",Dr,".buffer){",ar,".enableVertexAttribArray(",yr,");}");var Ln=Ct.type,Mn;if(Ct.size?Mn=$e.def(Ct.size,"||",Zt):Mn=Zt,$e("if(",Dr,".type!==",Ln,"||",Dr,".size!==",Mn,"||",ii.map(function(xi){return Dr+"."+xi+"!=="+Ct[xi]}).join("||"),"){",ar,".bindBuffer(",ir,",",Xr,".buffer);",ar,".vertexAttribPointer(",[yr,Mn,Ln,Ct.normalized,Ct.stride,Ct.offset],");",Dr,".type=",Ln,";",Dr,".size=",Mn,";",ii.map(function(xi){return Dr+"."+xi+"="+Ct[xi]+";"}).join(""),"}"),Zn){var Kn=Ct.divisor;$e("if(",Dr,".divisor!==",Kn,"){",Be.instancing,".vertexAttribDivisorANGLE(",[yr,Kn],");",Dr,".divisor=",Kn,";}")}}function un(){$e("if(",Dr,".buffer){",ar,".disableVertexAttribArray(",yr,");",Dr,".buffer=null;","}if(",Oi.map(function(Ln,Mn){return Dr+"."+Ln+"!=="+dn[Mn]}).join("||"),"){",ar,".vertexAttrib4f(",yr,",",dn,");",Oi.map(function(Ln,Mn){return Dr+"."+Ln+"="+dn[Mn]+";"}).join(""),"}")}ln===Hi?Nn():ln===Ki?un():($e("if(",ln,"===",Hi,"){"),Nn(),$e("}else{"),un(),$e("}"))}Tt.forEach(function(Dt){var Zt=Dt.name,Ct=ot.attributes[Zt],ar;if(Ct){if(!Lt(Ct))return;ar=Ct.append(Be,$e)}else{if(!Lt(Xn))return;var yr=Be.scopeAttrib(Zt);ar={},Object.keys(new fn).forEach(function(Dr){ar[Dr]=$e.def(yr,".",Dr)})}Nt(Be.link(Dt),Xt(Dt.info.type),ar)})}function R(Be,$e,ot,Tt,Lt,Pt){for(var Xt=Be.shared,Nt=Xt.gl,Dt,Zt=0;Zt<Tt.length;++Zt){var Ct=Tt[Zt],ar=Ct.name,yr=Ct.info.type,Dr=ot.uniforms[ar],ln=Be.link(Ct),Xr=ln+".location",dn;if(Dr){if(!Lt(Dr))continue;if(gn(Dr)){var ii=Dr.value;if(yr===yf||yr===Xu){var Nn=Be.link(ii._texture||ii.color[0]._texture);$e(Nt,".uniform1i(",Xr,",",Nn+".bind());"),$e.exit(Nn,".unbind();")}else if(yr===su||yr===Fl||yr===El){var un=Be.global.def("new Float32Array(["+Array.prototype.slice.call(ii)+"])"),Ln=2;yr===Fl?Ln=3:yr===El&&(Ln=4),$e(Nt,".uniformMatrix",Ln,"fv(",Xr,",false,",un,");")}else{switch(yr){case Lo:Dt="1f";break;case jo:Dt="2f";break;case ba:Dt="3f";break;case qa:Dt="4f";break;case Ya:Dt="1i";break;case ds:Dt="1i";break;case Il:Dt="2i";break;case ol:Dt="2i";break;case Sl:Dt="3i";break;case el:Dt="3i";break;case Su:Dt="4i";break;case to:Dt="4i";break}$e(Nt,".uniform",Dt,"(",Xr,",",pn(ii)?Array.prototype.slice.call(ii):ii,");")}continue}else dn=Dr.append(Be,$e)}else{if(!Lt(Xn))continue;dn=$e.def(Xt.uniforms,"[",Gt.id(ar),"]")}yr===yf?$e("if(",dn,"&&",dn,'._reglType==="framebuffer"){',dn,"=",dn,".color[0];","}"):yr===Xu&&$e("if(",dn,"&&",dn,'._reglType==="framebufferCube"){',dn,"=",dn,".color[0];","}");var Mn=1;switch(yr){case yf:case Xu:var Kn=$e.def(dn,"._texture");$e(Nt,".uniform1i(",Xr,",",Kn,".bind());"),$e.exit(Kn,".unbind();");continue;case ds:case Ya:Dt="1i";break;case ol:case Il:Dt="2i",Mn=2;break;case el:case Sl:Dt="3i",Mn=3;break;case to:case Su:Dt="4i",Mn=4;break;case Lo:Dt="1f";break;case jo:Dt="2f",Mn=2;break;case ba:Dt="3f",Mn=3;break;case qa:Dt="4f",Mn=4;break;case su:Dt="Matrix2fv";break;case Fl:Dt="Matrix3fv";break;case El:Dt="Matrix4fv";break}if(Dt.charAt(0)==="M"){$e(Nt,".uniform",Dt,"(",Xr,",");var xi=Math.pow(yr-su+2,2),Da=Be.global.def("new Float32Array(",xi,")");Array.isArray(dn)?$e("false,(",M(xi,function(Vo){return Da+"["+Vo+"]="+dn[Vo]}),",",Da,")"):$e("false,(Array.isArray(",dn,")||",dn," instanceof Float32Array)?",dn,":(",M(xi,function(Vo){return Da+"["+Vo+"]="+dn+"["+Vo+"]"}),",",Da,")"),$e(");")}else if(Mn>1){for(var Pa=[],_o=[],ua=0;ua<Mn;++ua)Array.isArray(dn)?_o.push(dn[ua]):_o.push($e.def(dn+"["+ua+"]")),Pt&&Pa.push($e.def());Pt&&$e("if(!",Be.batchId,"||",Pa.map(function(Vo,ml){return Vo+"!=="+_o[ml]}).join("||"),"){",Pa.map(function(Vo,ml){return Vo+"="+_o[ml]+";"}).join("")),$e(Nt,".uniform",Dt,"(",Xr,",",_o.join(","),");"),Pt&&$e("}")}else{if(Pt){var Qa=$e.def();$e("if(!",Be.batchId,"||",Qa,"!==",dn,"){",Qa,"=",dn,";")}$e(Nt,".uniform",Dt,"(",Xr,",",dn,");"),Pt&&$e("}")}}}function G(Be,$e,ot,Tt){var Lt=Be.shared,Pt=Lt.gl,Xt=Lt.draw,Nt=Tt.draw;function Dt(){var Mn=Nt.elements,Kn,xi=$e;return Mn?((Mn.contextDep&&Tt.contextDynamic||Mn.propDep)&&(xi=ot),Kn=Mn.append(Be,xi),Nt.elementsActive&&xi("if("+Kn+")"+Pt+".bindBuffer("+mr+","+Kn+".buffer.buffer);")):(Kn=xi.def(),xi(Kn,"=",Xt,".",Gf,";","if(",Kn,"){",Pt,".bindBuffer(",mr,",",Kn,".buffer.buffer);}","else if(",Lt.vao,".currentVAO){",Kn,"=",Be.shared.elements+".getElements("+Lt.vao,".currentVAO.elements);",mi?"":"if("+Kn+")"+Pt+".bindBuffer("+mr+","+Kn+".buffer.buffer);","}")),Kn}function Zt(){var Mn=Nt.count,Kn,xi=$e;return Mn?((Mn.contextDep&&Tt.contextDynamic||Mn.propDep)&&(xi=ot),Kn=Mn.append(Be,xi)):Kn=xi.def(Xt,".",Yv),Kn}var Ct=Dt();function ar(Mn){var Kn=Nt[Mn];return Kn?Kn.contextDep&&Tt.contextDynamic||Kn.propDep?Kn.append(Be,ot):Kn.append(Be,$e):$e.def(Xt,".",Mn)}var yr=ar(Fh),Dr=ar(qh),ln=Zt();if(typeof ln=="number"){if(ln===0)return}else ot("if(",ln,"){"),ot.exit("}");var Xr,dn;Zn&&(Xr=ar(ou),dn=Be.instancing);var ii=Ct+".type",Nn=Nt.elements&&gn(Nt.elements)&&!Nt.vaoActive;function un(){function Mn(){ot(dn,".drawElementsInstancedANGLE(",[yr,ln,ii,Dr+"<<(("+ii+"-"+Ii+")>>1)",Xr],");")}function Kn(){ot(dn,".drawArraysInstancedANGLE(",[yr,Dr,ln,Xr],");")}Ct&&Ct!=="null"?Nn?Mn():(ot("if(",Ct,"){"),Mn(),ot("}else{"),Kn(),ot("}")):Kn()}function Ln(){function Mn(){ot(Pt+".drawElements("+[yr,ln,ii,Dr+"<<(("+ii+"-"+Ii+")>>1)"]+");")}function Kn(){ot(Pt+".drawArrays("+[yr,Dr,ln]+");")}Ct&&Ct!=="null"?Nn?Mn():(ot("if(",Ct,"){"),Mn(),ot("}else{"),Kn(),ot("}")):Kn()}Zn&&(typeof Xr!="number"||Xr>=0)?typeof Xr=="string"?(ot("if(",Xr,">0){"),un(),ot("}else if(",Xr,"<0){"),Ln(),ot("}")):un():Ln()}function I(Be,$e,ot,Tt,Lt){var Pt=Vi(),Xt=Pt.proc("body",Lt);return Zn&&(Pt.instancing=Xt.def(Pt.shared.extensions,".angle_instanced_arrays")),Be(Pt,Xt,ot,Tt),Pt.compile().body}function W(Be,$e,ot,Tt){Eu(Be,$e),ot.useVAO?ot.drawVAO?$e(Be.shared.vao,".setVAO(",ot.drawVAO.append(Be,$e),");"):$e(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):($e(Be.shared.vao,".setVAO(null);"),H(Be,$e,ot,Tt.attributes,function(){return!0})),R(Be,$e,ot,Tt.uniforms,function(){return!0},!1),G(Be,$e,$e,ot)}function te(Be,$e){var ot=Be.proc("draw",1);Eu(Be,ot),As(Be,ot,$e.context),Zl(Be,ot,$e.framebuffer),fu(Be,ot,$e),ro(Be,ot,$e.state),Ja(Be,ot,$e,!1,!0);var Tt=$e.shader.progVar.append(Be,ot);if(ot(Be.shared.gl,".useProgram(",Tt,".program);"),$e.shader.program)W(Be,ot,$e,$e.shader.program);else{ot(Be.shared.vao,".setVAO(null);");var Lt=Be.global.def("{}"),Pt=ot.def(Tt,".id"),Xt=ot.def(Lt,"[",Pt,"]");ot(Be.cond(Xt).then(Xt,".call(this,a0);").else(Xt,"=",Lt,"[",Pt,"]=",Be.link(function(Nt){return I(W,Be,$e,Nt,1)}),"(",Tt,");",Xt,".call(this,a0);"))}Object.keys($e.state).length>0&&ot(Be.shared.current,".dirty=true;"),Be.shared.vao&&ot(Be.shared.vao,".setVAO(null);")}function ee(Be,$e,ot,Tt){Be.batchId="a1",Eu(Be,$e);function Lt(){return!0}H(Be,$e,ot,Tt.attributes,Lt),R(Be,$e,ot,Tt.uniforms,Lt,!1),G(Be,$e,$e,ot)}function ve(Be,$e,ot,Tt){Eu(Be,$e);var Lt=ot.contextDep,Pt=$e.def(),Xt="a0",Nt="a1",Dt=$e.def();Be.shared.props=Dt,Be.batchId=Pt;var Zt=Be.scope(),Ct=Be.scope();$e(Zt.entry,"for(",Pt,"=0;",Pt,"<",Nt,";++",Pt,"){",Dt,"=",Xt,"[",Pt,"];",Ct,"}",Zt.exit);function ar(ii){return ii.contextDep&&Lt||ii.propDep}function yr(ii){return!ar(ii)}if(ot.needsContext&&As(Be,Ct,ot.context),ot.needsFramebuffer&&Zl(Be,Ct,ot.framebuffer),ro(Be,Ct,ot.state,ar),ot.profile&&ar(ot.profile)&&Ja(Be,Ct,ot,!1,!0),Tt)ot.useVAO?ot.drawVAO?ar(ot.drawVAO)?Ct(Be.shared.vao,".setVAO(",ot.drawVAO.append(Be,Ct),");"):Zt(Be.shared.vao,".setVAO(",ot.drawVAO.append(Be,Zt),");"):Zt(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(Zt(Be.shared.vao,".setVAO(null);"),H(Be,Zt,ot,Tt.attributes,yr),H(Be,Ct,ot,Tt.attributes,ar)),R(Be,Zt,ot,Tt.uniforms,yr,!1),R(Be,Ct,ot,Tt.uniforms,ar,!0),G(Be,Zt,Ct,ot);else{var Dr=Be.global.def("{}"),ln=ot.shader.progVar.append(Be,Ct),Xr=Ct.def(ln,".id"),dn=Ct.def(Dr,"[",Xr,"]");Ct(Be.shared.gl,".useProgram(",ln,".program);","if(!",dn,"){",dn,"=",Dr,"[",Xr,"]=",Be.link(function(ii){return I(ee,Be,ot,ii,2)}),"(",ln,");}",dn,".call(this,a0[",Pt,"],",Pt,");")}}function Ee(Be,$e){var ot=Be.proc("batch",2);Be.batchId="0",Eu(Be,ot);var Tt=!1,Lt=!0;Object.keys($e.context).forEach(function(Dr){Tt=Tt||$e.context[Dr].propDep}),Tt||(As(Be,ot,$e.context),Lt=!1);var Pt=$e.framebuffer,Xt=!1;Pt?(Pt.propDep?Tt=Xt=!0:Pt.contextDep&&Tt&&(Xt=!0),Xt||Zl(Be,ot,Pt)):Zl(Be,ot,null),$e.state.viewport&&$e.state.viewport.propDep&&(Tt=!0);function Nt(Dr){return Dr.contextDep&&Tt||Dr.propDep}fu(Be,ot,$e),ro(Be,ot,$e.state,function(Dr){return!Nt(Dr)}),(!$e.profile||!Nt($e.profile))&&Ja(Be,ot,$e,!1,"a1"),$e.contextDep=Tt,$e.needsContext=Lt,$e.needsFramebuffer=Xt;var Dt=$e.shader.progVar;if(Dt.contextDep&&Tt||Dt.propDep)ve(Be,ot,$e,null);else{var Zt=Dt.append(Be,ot);if(ot(Be.shared.gl,".useProgram(",Zt,".program);"),$e.shader.program)ve(Be,ot,$e,$e.shader.program);else{ot(Be.shared.vao,".setVAO(null);");var Ct=Be.global.def("{}"),ar=ot.def(Zt,".id"),yr=ot.def(Ct,"[",ar,"]");ot(Be.cond(yr).then(yr,".call(this,a0,a1);").else(yr,"=",Ct,"[",ar,"]=",Be.link(function(Dr){return I(ve,Be,$e,Dr,2)}),"(",Zt,");",yr,".call(this,a0,a1);"))}}Object.keys($e.state).length>0&&ot(Be.shared.current,".dirty=true;"),Be.shared.vao&&ot(Be.shared.vao,".setVAO(null);")}function Oe(Be,$e){var ot=Be.proc("scope",3);Be.batchId="a2";var Tt=Be.shared,Lt=Tt.current;if(As(Be,ot,$e.context),$e.framebuffer&&$e.framebuffer.append(Be,ot),kr(Object.keys($e.state)).forEach(function(Nt){var Dt=$e.state[Nt],Zt=Dt.append(Be,ot);pn(Zt)?Zt.forEach(function(Ct,ar){Si(Ct)?ot.set(Be.next[Nt],"["+ar+"]",Ct):ot.set(Be.next[Nt],"["+ar+"]",Be.link(Ct,{stable:!0}))}):gn(Dt)?ot.set(Tt.next,"."+Nt,Be.link(Zt,{stable:!0})):ot.set(Tt.next,"."+Nt,Zt)}),Ja(Be,ot,$e,!0,!0),[Gf,qh,Yv,ou,Fh].forEach(function(Nt){var Dt=$e.draw[Nt];if(Dt){var Zt=Dt.append(Be,ot);Si(Zt)?ot.set(Tt.draw,"."+Nt,Zt):ot.set(Tt.draw,"."+Nt,Be.link(Zt),{stable:!0})}}),Object.keys($e.uniforms).forEach(function(Nt){var Dt=$e.uniforms[Nt].append(Be,ot);Array.isArray(Dt)&&(Dt="["+Dt.map(function(Zt){return Si(Zt)?Zt:Be.link(Zt,{stable:!0})})+"]"),ot.set(Tt.uniforms,"["+Be.link(Gt.id(Nt),{stable:!0})+"]",Dt)}),Object.keys($e.attributes).forEach(function(Nt){var Dt=$e.attributes[Nt].append(Be,ot),Zt=Be.scopeAttrib(Nt);Object.keys(new fn).forEach(function(Ct){ot.set(Zt,"."+Ct,Dt[Ct])})}),$e.scopeVAO){var Pt=$e.scopeVAO.append(Be,ot);Si(Pt)?ot.set(Tt.vao,".targetVAO",Pt):ot.set(Tt.vao,".targetVAO",Be.link(Pt,{stable:!0}))}function Xt(Nt){var Dt=$e.shader[Nt];if(Dt){var Zt=Dt.append(Be,ot);Si(Zt)?ot.set(Tt.shader,"."+Nt,Zt):ot.set(Tt.shader,"."+Nt,Be.link(Zt,{stable:!0}))}}Xt(th),Xt(rh),Object.keys($e.state).length>0&&(ot(Lt,".dirty=true;"),ot.exit(Lt,".dirty=true;")),ot("a1(",Be.shared.context,",a0,",Be.batchId,");")}function vt(Be){if(!(typeof Be!="object"||pn(Be))){for(var $e=Object.keys(Be),ot=0;ot<$e.length;++ot)if(h.isDynamic(Be[$e[ot]]))return!0;return!1}}function wt(Be,$e,ot){var Tt=$e.static[ot];if(!Tt||!vt(Tt))return;var Lt=Be.global,Pt=Object.keys(Tt),Xt=!1,Nt=!1,Dt=!1,Zt=Be.global.def("{}");Pt.forEach(function(ar){var yr=Tt[ar];if(h.isDynamic(yr)){typeof yr=="function"&&(yr=Tt[ar]=h.unbox(yr));var Dr=In(yr,null);Xt=Xt||Dr.thisDep,Dt=Dt||Dr.propDep,Nt=Nt||Dr.contextDep}else{switch(Lt(Zt,".",ar,"="),typeof yr){case"number":Lt(yr);break;case"string":Lt('"',yr,'"');break;case"object":Array.isArray(yr)&&Lt("[",yr.join(),"]");break;default:Lt(Be.link(yr));break}Lt(";")}});function Ct(ar,yr){Pt.forEach(function(Dr){var ln=Tt[Dr];if(h.isDynamic(ln)){var Xr=ar.invoke(yr,ln);yr(Zt,".",Dr,"=",Xr,";")}})}$e.dynamic[ot]=new h.DynamicVariable(Ka,{thisDep:Xt,contextDep:Nt,propDep:Dt,ref:Zt,append:Ct}),delete $e.static[ot]}function pt(Be,$e,ot,Tt,Lt){var Pt=Vi();Pt.stats=Pt.link(Lt),Object.keys($e.static).forEach(function(Nt){wt(Pt,$e,Nt)}),Kt.forEach(function(Nt){wt(Pt,Be,Nt)});var Xt=fc(Be,$e,ot,Tt,Pt);return Xt.shader.program&&(Xt.shader.program.attributes.sort(function(Nt,Dt){return Nt.name<Dt.name?-1:1}),Xt.shader.program.uniforms.sort(function(Nt,Dt){return Nt.name<Dt.name?-1:1})),te(Pt,Xt),Oe(Pt,Xt),Ee(Pt,Xt),e(Pt.compile(),{destroy:function(){Xt.shader.program.destroy()}})}return{next:$i,current:ri,procs:function(){var Be=Vi(),$e=Be.proc("poll"),ot=Be.proc("refresh"),Tt=Be.block();$e(Tt),ot(Tt);var Lt=Be.shared,Pt=Lt.gl,Xt=Lt.next,Nt=Lt.current;Tt(Nt,".dirty=false;"),Zl(Be,$e),Zl(Be,ot,null,!0);var Dt;Zn&&(Dt=Be.link(Zn)),or.oes_vertex_array_object&&ot(Be.link(or.oes_vertex_array_object),".bindVertexArrayOES(null);");var Zt=ot.def(Lt.attributes),Ct=ot.def(0),ar=Be.cond(Ct,".buffer");ar.then(Pt,".enableVertexAttribArray(i);",Pt,".bindBuffer(",ir,",",Ct,".buffer.buffer);",Pt,".vertexAttribPointer(i,",Ct,".size,",Ct,".type,",Ct,".normalized,",Ct,".stride,",Ct,".offset);").else(Pt,".disableVertexAttribArray(i);",Pt,".vertexAttrib4f(i,",Ct,".x,",Ct,".y,",Ct,".z,",Ct,".w);",Ct,".buffer=null;");var yr=Be.link(qr.maxAttributes,{stable:!0});return ot("for(var i=0;i<",yr,";++i){",Ct,"=",Zt,"[i];",ar,"}"),Zn&&ot("for(var i=0;i<",yr,";++i){",Dt,".vertexAttribDivisorANGLE(i,",Zt,"[i].divisor);","}"),ot(Be.shared.vao,".currentVAO=null;",Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"),Object.keys(Tn).forEach(function(Dr){var ln=Tn[Dr],Xr=Tt.def(Xt,".",Dr),dn=Be.block();dn("if(",Xr,"){",Pt,".enable(",ln,")}else{",Pt,".disable(",ln,")}",Nt,".",Dr,"=",Xr,";"),ot(dn),$e("if(",Xr,"!==",Nt,".",Dr,"){",dn,"}")}),Object.keys(Pi).forEach(function(Dr){var ln=Pi[Dr],Xr=ri[Dr],dn,ii,Nn=Be.block();if(Nn(Pt,".",ln,"("),pn(Xr)){var un=Xr.length;dn=Be.global.def(Xt,".",Dr),ii=Be.global.def(Nt,".",Dr),Nn(M(un,function(Ln){return dn+"["+Ln+"]"}),");",M(un,function(Ln){return ii+"["+Ln+"]="+dn+"["+Ln+"];"}).join("")),$e("if(",M(un,function(Ln){return dn+"["+Ln+"]!=="+ii+"["+Ln+"]"}).join("||"),"){",Nn,"}")}else dn=Tt.def(Xt,".",Dr),ii=Tt.def(Nt,".",Dr),Nn(dn,");",Nt,".",Dr,"=",dn,";"),$e("if(",dn,"!==",ii,"){",Nn,"}");ot(Nn)}),Be.compile()}(),compile:pt}}function Fi(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xa=34918,Gi=34919,va=35007,go=function(We,Gt){if(!Gt.ext_disjoint_timer_query)return null;var or=[];function qr(){return or.pop()||Gt.ext_disjoint_timer_query.createQueryEXT()}function $r(Vn){or.push(Vn)}var jr=[];function Kr(Vn){var Zn=qr();Gt.ext_disjoint_timer_query.beginQueryEXT(va,Zn),jr.push(Zn),Bn(jr.length-1,jr.length,Vn)}function yn(){Gt.ext_disjoint_timer_query.endQueryEXT(va)}function Qn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Wn=[];function Rn(){return Wn.pop()||new Qn}function ia(Vn){Wn.push(Vn)}var Un=[];function Bn(Vn,Zn,En){var mi=Rn();mi.startQueryIndex=Vn,mi.endQueryIndex=Zn,mi.sum=0,mi.stats=En,Un.push(mi)}var mn=[],zr=[];function fn(){var Vn,Zn,En=jr.length;if(En!==0){zr.length=Math.max(zr.length,En+1),mn.length=Math.max(mn.length,En+1),mn[0]=0,zr[0]=0;var mi=0;for(Vn=0,Zn=0;Zn<jr.length;++Zn){var ri=jr[Zn];Gt.ext_disjoint_timer_query.getQueryObjectEXT(ri,Gi)?(mi+=Gt.ext_disjoint_timer_query.getQueryObjectEXT(ri,xa),$r(ri)):jr[Vn++]=ri,mn[Zn+1]=mi,zr[Zn+1]=Vn}for(jr.length=Vn,Vn=0,Zn=0;Zn<Un.length;++Zn){var $i=Un[Zn],Cn=$i.startQueryIndex,Tn=$i.endQueryIndex;$i.sum+=mn[Tn]-mn[Cn];var Pi=zr[Cn],di=zr[Tn];di===Pi?($i.stats.gpuTime+=$i.sum/1e6,ia($i)):($i.startQueryIndex=Pi,$i.endQueryIndex=di,Un[Vn++]=$i)}Un.length=Vn}}return{beginQuery:Kr,endQuery:yn,pushScopeStats:Bn,update:fn,getNumPendingQueries:function(){return jr.length},clear:function(){or.push.apply(or,jr);for(var Vn=0;Vn<or.length;Vn++)Gt.ext_disjoint_timer_query.deleteQueryEXT(or[Vn]);jr.length=0,or.length=0},restore:function(){jr.length=0,or.length=0}}},Po=16384,Ao=256,Sn=1024,da=34962,Sa="webglcontextlost",La="webglcontextrestored",Ts=1,Gs=2,yl=3;function ls(We,Gt){for(var or=0;or<We.length;++or)if(We[or]===Gt)return or;return-1}function Wl(We){var Gt=x(We);if(!Gt)return null;var or=Gt.gl,qr=or.getContextAttributes(),$r=or.isContextLost(),jr=E(or,Gt);if(!jr)return null;var Kr=_(),yn=Fi(),Qn=Gt.cachedCode||{},Wn=jr.extensions,Rn=go(or,Wn),ia=p(),Un=or.drawingBufferWidth,Bn=or.drawingBufferHeight,mn={tick:0,time:0,viewportWidth:Un,viewportHeight:Bn,framebufferWidth:Un,framebufferHeight:Bn,drawingBufferWidth:Un,drawingBufferHeight:Bn,pixelRatio:Gt.pixelRatio},zr={},fn={elements:null,primitive:4,count:-1,offset:0,instances:-1},Vn=fr(or,Wn),Zn=pr(or,yn,Gt,ri),En=Bt(or,Wn,Zn,yn),mi=Lh(or,Wn,Vn,yn,Zn,En,fn);function ri(I){return mi.destroyBuffer(I)}var $i=Cc(or,Kr,yn,Gt),Cn=Ch(or,Wn,Vn,function(){di.procs.poll()},mn,yn,Gt),Tn=qf(or,Wn,Vn,yn,Gt),Pi=hv(or,Wn,Vn,Cn,Tn,yn),di=Ci(or,Kr,Wn,Vn,Zn,En,Cn,Pi,zr,mi,$i,fn,mn,Rn,Qn,Gt),ei=Hs(or,Pi,di.procs.poll,mn,qr,Wn,Vn),jn=di.next,Si=or.canvas,na=[],Ea=[],pi=[],Vi=[Gt.onDestroy],ha=null;function _a(){if(na.length===0){Rn&&Rn.update(),ha=null;return}ha=v.next(_a),fu();for(var I=na.length-1;I>=0;--I){var W=na[I];W&&W(mn,null,0)}or.flush(),Rn&&Rn.update()}function Wa(){!ha&&na.length>0&&(ha=v.next(_a))}function Ls(){ha&&(v.cancel(_a),ha=null)}function lu(I){I.preventDefault(),$r=!0,Ls(),Ea.forEach(function(W){W()})}function uo(I){or.getError(),$r=!1,jr.restore(),$i.restore(),Zn.restore(),Cn.restore(),Tn.restore(),Pi.restore(),mi.restore(),Rn&&Rn.restore(),di.procs.refresh(),Wa(),pi.forEach(function(W){W()})}Si&&(Si.addEventListener(Sa,lu,!1),Si.addEventListener(La,uo,!1));function uu(){na.length=0,Ls(),Si&&(Si.removeEventListener(Sa,lu),Si.removeEventListener(La,uo)),$i.clear(),Pi.clear(),Tn.clear(),mi.clear(),Cn.clear(),En.clear(),Zn.clear(),Rn&&Rn.clear(),Vi.forEach(function(I){I()})}function ps(I){function W(Pt){var Xt=e({},Pt);delete Xt.uniforms,delete Xt.attributes,delete Xt.context,delete Xt.vao,"stencil"in Xt&&Xt.stencil.op&&(Xt.stencil.opBack=Xt.stencil.opFront=Xt.stencil.op,delete Xt.stencil.op);function Nt(Dt){if(Dt in Xt){var Zt=Xt[Dt];delete Xt[Dt],Object.keys(Zt).forEach(function(Ct){Xt[Dt+"."+Ct]=Zt[Ct]})}}return Nt("blend"),Nt("depth"),Nt("cull"),Nt("stencil"),Nt("polygonOffset"),Nt("scissor"),Nt("sample"),"vao"in Pt&&(Xt.vao=Pt.vao),Xt}function te(Pt,Xt){var Nt={},Dt={};return Object.keys(Pt).forEach(function(Zt){var Ct=Pt[Zt];if(h.isDynamic(Ct)){Dt[Zt]=h.unbox(Ct,Zt);return}else if(Xt&&Array.isArray(Ct)){for(var ar=0;ar<Ct.length;++ar)if(h.isDynamic(Ct[ar])){Dt[Zt]=h.unbox(Ct,Zt);return}}Nt[Zt]=Ct}),{dynamic:Dt,static:Nt}}var ee=te(I.context||{},!0),ve=te(I.uniforms||{},!0),Ee=te(I.attributes||{},!1),Oe=te(W(I),!1),vt={gpuTime:0,cpuTime:0,count:0},wt=di.compile(Oe,Ee,ve,ee,vt),pt=wt.draw,Be=wt.batch,$e=wt.scope,ot=[];function Tt(Pt){for(;ot.length<Pt;)ot.push(null);return ot}function Lt(Pt,Xt){var Nt;if(typeof Pt=="function")return $e.call(this,null,Pt,0);if(typeof Xt=="function")if(typeof Pt=="number")for(Nt=0;Nt<Pt;++Nt)$e.call(this,null,Xt,Nt);else if(Array.isArray(Pt))for(Nt=0;Nt<Pt.length;++Nt)$e.call(this,Pt[Nt],Xt,Nt);else return $e.call(this,Pt,Xt,0);else if(typeof Pt=="number"){if(Pt>0)return Be.call(this,Tt(Pt|0),Pt|0)}else if(Array.isArray(Pt)){if(Pt.length)return Be.call(this,Pt,Pt.length)}else return pt.call(this,Pt)}return e(Lt,{stats:vt,destroy:function(){wt.destroy()}})}var Xl=Pi.setFBO=ps({framebuffer:h.define.call(null,Ts,"framebuffer")});function Yf(I,W){var te=0;di.procs.poll();var ee=W.color;ee&&(or.clearColor(+ee[0]||0,+ee[1]||0,+ee[2]||0,+ee[3]||0),te|=Po),"depth"in W&&(or.clearDepth(+W.depth),te|=Ao),"stencil"in W&&(or.clearStencil(W.stencil|0),te|=Sn),or.clear(te)}function fc(I){if("framebuffer"in I)if(I.framebuffer&&I.framebuffer_reglType==="framebufferCube")for(var W=0;W<6;++W)Xl(e({framebuffer:I.framebuffer.faces[W]},I),Yf);else Xl(I,Yf);else Yf(null,I)}function As(I){na.push(I);function W(){var te=ls(na,I);function ee(){var ve=ls(na,ee);na[ve]=na[na.length-1],na.length-=1,na.length<=0&&Ls()}na[te]=ee}return Wa(),{cancel:W}}function Zl(){var I=jn.viewport,W=jn.scissor_box;I[0]=I[1]=W[0]=W[1]=0,mn.viewportWidth=mn.framebufferWidth=mn.drawingBufferWidth=I[2]=W[2]=or.drawingBufferWidth,mn.viewportHeight=mn.framebufferHeight=mn.drawingBufferHeight=I[3]=W[3]=or.drawingBufferHeight}function fu(){mn.tick+=1,mn.time=Eu(),Zl(),di.procs.poll()}function ro(){Cn.refresh(),Zl(),di.procs.refresh(),Rn&&Rn.update()}function Eu(){return(p()-ia)/1e3}ro();function Ja(I,W){var te;switch(I){case"frame":return As(W);case"lost":te=Ea;break;case"restore":te=pi;break;case"destroy":te=Vi;break;default:}return te.push(W),{cancel:function(){for(var ee=0;ee<te.length;++ee)if(te[ee]===W){te[ee]=te[te.length-1],te.pop();return}}}}function H(){return Qn}function R(I){Object.entries(I).forEach(function(W){Qn[W[0]]=W[1]})}var G=e(ps,{clear:fc,prop:h.define.bind(null,Ts),context:h.define.bind(null,Gs),this:h.define.bind(null,yl),draw:ps({}),buffer:function(I){return Zn.create(I,da,!1,!1)},elements:function(I){return En.create(I,!1)},texture:Cn.create2D,cube:Cn.createCube,renderbuffer:Tn.create,framebuffer:Pi.create,framebufferCube:Pi.createCube,vao:mi.createVAO,attributes:qr,frame:As,on:Ja,limits:Vn,hasExtension:function(I){return Vn.extensions.indexOf(I.toLowerCase())>=0},read:ei,destroy:uu,_gl:or,_refresh:ro,poll:function(){fu(),Rn&&Rn.update()},now:Eu,stats:yn,getCachedCode:H,preloadCachedCode:R});return Gt.onDone(null,G),G}return Wl})});var hze=ne((pgr,cze)=>{"use strict";var EBt=vg();cze.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},uze(t)?t={container:t}:kBt(t)?t={container:t}:CBt(t)?t={gl:t}:t=EBt(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=window.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var r=document.querySelector(t.container);if(!r)throw Error("Element "+t.container+" is not found");t.container=r}uze(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=fze(),t.container.appendChild(t.canvas),lze(t))}else if(!t.canvas)if(typeof document!="undefined")t.container=document.body||document.documentElement,t.canvas=fze(),t.container.appendChild(t.canvas),lze(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{t.gl=t.canvas.getContext(i,t.attrs)}catch(n){}return t.gl}),t.gl};function lze(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*window.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*window.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function uze(e){return typeof e.getContext=="function"&&"width"in e&&"height"in e}function kBt(e){return typeof e.nodeName=="string"&&typeof e.appendChild=="function"&&typeof e.getBoundingClientRect=="function"}function CBt(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}function fze(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}});var dze=ne((ggr,vze)=>{"use strict";var LBt=fX(),PBt=[32,126];vze.exports=RBt;function RBt(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],r=e.canvas||document.createElement("canvas"),i=e.font,n=typeof e.step=="number"?[e.step,e.step]:e.step||[32,32],a=e.chars||PBt;if(i&&typeof i!="string"&&(i=LBt(i)),!Array.isArray(a))a=String(a).split("");else if(a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"){for(var o=[],s=a[0],l=0;s<=a[1];s++)o[l++]=String.fromCharCode(s);a=o}t=t.slice(),r.width=t[0],r.height=t[1];var u=r.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,r.width,r.height),u.font=i,u.textAlign="center",u.textBaseline="middle",u.fillStyle="#fff";for(var f=n[0]/2,c=n[1]/2,s=0;s<a.length;s++)u.fillText(a[s],f,c),(f+=n[0])>t[0]-n[0]/2&&(f=n[0]/2,c+=n[1]);return r}});var pX=ne(lf=>{"use strict";"use restrict";var dX=32;lf.INT_BITS=dX;lf.INT_MAX=2147483647;lf.INT_MIN=-1<<dX-1;lf.sign=function(e){return(e>0)-(e<0)};lf.abs=function(e){var t=e>>dX-1;return(e^t)-t};lf.min=function(e,t){return t^(e^t)&-(e<t)};lf.max=function(e,t){return e^(e^t)&-(e<t)};lf.isPow2=function(e){return!(e&e-1)&&!!e};lf.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1};lf.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};lf.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function pze(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}lf.countTrailingZeros=pze;lf.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};lf.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};lf.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var f5=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=r&1,--n;e[t]=i<<n&255}})(f5);lf.reverse=function(e){return f5[e&255]<<24|f5[e>>>8&255]<<16|f5[e>>>16&255]<<8|f5[e>>>24&255]};lf.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};lf.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};lf.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};lf.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};lf.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>pze(e)+1}});var mze=ne((mgr,yze)=>{"use strict";function gze(e,t,r){var i=e[r]|0;if(i<=0)return[];var n=new Array(i),a;if(r===e.length-1)for(a=0;a<i;++a)n[a]=t;else for(a=0;a<i;++a)n[a]=gze(e,t,r+1);return n}function DBt(e,t){var r,i;for(r=new Array(e),i=0;i<e;++i)r[i]=t;return r}function IBt(e,t){switch(typeof t=="undefined"&&(t=0),typeof e){case"number":if(e>0)return DBt(e|0,t);break;case"object":if(typeof e.length=="number")return gze(e,t,0);break}return[]}yze.exports=IBt});var Dze=ne(fs=>{"use strict";var y1=pX(),wh=mze(),xze=e_().Buffer;window.__TYPEDARRAY_POOL||(window.__TYPEDARRAY_POOL={UINT8:wh([32,0]),UINT16:wh([32,0]),UINT32:wh([32,0]),BIGUINT64:wh([32,0]),INT8:wh([32,0]),INT16:wh([32,0]),INT32:wh([32,0]),BIGINT64:wh([32,0]),FLOAT:wh([32,0]),DOUBLE:wh([32,0]),DATA:wh([32,0]),UINT8C:wh([32,0]),BUFFER:wh([32,0])});var FBt=typeof Uint8ClampedArray!="undefined",qBt=typeof BigUint64Array!="undefined",zBt=typeof BigInt64Array!="undefined",Lf=window.__TYPEDARRAY_POOL;Lf.UINT8C||(Lf.UINT8C=wh([32,0]));Lf.BIGUINT64||(Lf.BIGUINT64=wh([32,0]));Lf.BIGINT64||(Lf.BIGINT64=wh([32,0]));Lf.BUFFER||(Lf.BUFFER=wh([32,0]));var mI=Lf.DATA,xI=Lf.BUFFER;fs.free=function(t){if(xze.isBuffer(t))xI[y1.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,i=y1.log2(r)|0;mI[i].push(t)}};function _ze(e){if(e){var t=e.length||e.byteLength,r=y1.log2(t);mI[r].push(e)}}function OBt(e){_ze(e.buffer)}fs.freeUint8=fs.freeUint16=fs.freeUint32=fs.freeBigUint64=fs.freeInt8=fs.freeInt16=fs.freeInt32=fs.freeBigInt64=fs.freeFloat32=fs.freeFloat=fs.freeFloat64=fs.freeDouble=fs.freeUint8Clamped=fs.freeDataView=OBt;fs.freeArrayBuffer=_ze;fs.freeBuffer=function(t){xI[y1.log2(t.length)].push(t)};fs.malloc=function(t,r){if(r===void 0||r==="arraybuffer")return pd(t);switch(r){case"uint8":return gX(t);case"uint16":return bze(t);case"uint32":return wze(t);case"int8":return Tze(t);case"int16":return Aze(t);case"int32":return Mze(t);case"float":case"float32":return Sze(t);case"double":case"float64":return Eze(t);case"uint8_clamped":return kze(t);case"bigint64":return Lze(t);case"biguint64":return Cze(t);case"buffer":return Rze(t);case"data":case"dataview":return Pze(t);default:return null}return null};function pd(t){var t=y1.nextPow2(t),r=y1.log2(t),i=mI[r];return i.length>0?i.pop():new ArrayBuffer(t)}fs.mallocArrayBuffer=pd;function gX(e){return new Uint8Array(pd(e),0,e)}fs.mallocUint8=gX;function bze(e){return new Uint16Array(pd(2*e),0,e)}fs.mallocUint16=bze;function wze(e){return new Uint32Array(pd(4*e),0,e)}fs.mallocUint32=wze;function Tze(e){return new Int8Array(pd(e),0,e)}fs.mallocInt8=Tze;function Aze(e){return new Int16Array(pd(2*e),0,e)}fs.mallocInt16=Aze;function Mze(e){return new Int32Array(pd(4*e),0,e)}fs.mallocInt32=Mze;function Sze(e){return new Float32Array(pd(4*e),0,e)}fs.mallocFloat32=fs.mallocFloat=Sze;function Eze(e){return new Float64Array(pd(8*e),0,e)}fs.mallocFloat64=fs.mallocDouble=Eze;function kze(e){return FBt?new Uint8ClampedArray(pd(e),0,e):gX(e)}fs.mallocUint8Clamped=kze;function Cze(e){return qBt?new BigUint64Array(pd(8*e),0,e):null}fs.mallocBigUint64=Cze;function Lze(e){return zBt?new BigInt64Array(pd(8*e),0,e):null}fs.mallocBigInt64=Lze;function Pze(e){return new DataView(pd(e),0,e)}fs.mallocDataView=Pze;function Rze(e){e=y1.nextPow2(e);var t=y1.log2(e),r=xI[t];return r.length>0?r.pop():new xze(e)}fs.mallocBuffer=Rze;fs.clearCache=function(){for(var t=0;t<32;++t)Lf.UINT8[t].length=0,Lf.UINT16[t].length=0,Lf.UINT32[t].length=0,Lf.INT8[t].length=0,Lf.INT16[t].length=0,Lf.INT32[t].length=0,Lf.FLOAT[t].length=0,Lf.DOUBLE[t].length=0,Lf.BIGUINT64[t].length=0,Lf.BIGINT64[t].length=0,Lf.UINT8C[t].length=0,mI[t].length=0,xI[t].length=0}});var yX=ne((_gr,Ize)=>{Ize.exports=function(t,r){r||(r=[0,""]),t=String(t);var i=parseFloat(t,10);return r[0]=i,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}});var xX=ne((bgr,qze)=>{"use strict";var BBt=yX();qze.exports=Fze;var c5=96;function mX(e,t){var r=BBt(getComputedStyle(e).getPropertyValue(t));return r[0]*Fze(r[1],e)}function NBt(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var i=mX(r,"font-size")/128;return t.removeChild(r),i}function Fze(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return NBt(e,t);case"em":return mX(t,"font-size");case"rem":return mX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return c5;case"cm":return c5/2.54;case"mm":return c5/25.4;case"pt":return c5/72;case"pc":return c5/6}return 1}});var Bze=ne((wgr,Oze)=>{"use strict";Oze.exports=wI;var UBt=wI.canvas=document.createElement("canvas"),_I=UBt.getContext("2d"),zze=bI([32,126]);wI.createPairs=bI;wI.ascii=zze;function wI(e,t){Array.isArray(e)&&(e=e.join(", "));var r={},i,n=16,a=.05;t&&(t.length===2&&typeof t[0]=="number"?i=bI(t):Array.isArray(t)?i=t:(t.o?i=bI(t.o):t.pairs&&(i=t.pairs),t.fontSize&&(n=t.fontSize),t.threshold!=null&&(a=t.threshold))),i||(i=zze),_I.font=n+"px "+e;for(var o=0;o<i.length;o++){var s=i[o],l=_I.measureText(s[0]).width+_I.measureText(s[1]).width,u=_I.measureText(s).width;if(Math.abs(l-u)>n*a){var f=(u-l)/n;r[s]=f*1e3}}return r}function bI(e){for(var t=[],r=e[0];r<=e[1];r++)for(var i=String.fromCharCode(r),n=e[0];n<e[1];n++){var a=String.fromCharCode(n),o=i+a;t.push(o)}return t}});var Hze=ne((Tgr,Vze)=>{"use strict";Vze.exports=m1;m1.canvas=document.createElement("canvas");m1.cache={};function m1(o,t){t||(t={}),(typeof o=="string"||Array.isArray(o))&&(t.family=o);var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var i=t.size||t.fontSize||t.em||48,n=t.weight||t.fontWeight||"",a=t.style||t.fontStyle||"",o=[a,n,i].join(" ")+"px "+r,s=t.origin||"top";if(m1.cache[r]&&i<=m1.cache[r].em)return Nze(m1.cache[r],s);var l=t.canvas||m1.canvas,u=l.getContext("2d"),f={upper:t.upper!==void 0?t.upper:"H",lower:t.lower!==void 0?t.lower:"x",descent:t.descent!==void 0?t.descent:"p",ascent:t.ascent!==void 0?t.ascent:"h",tittle:t.tittle!==void 0?t.tittle:"i",overshoot:t.overshoot!==void 0?t.overshoot:"O"},c=Math.ceil(i*1.5);l.height=c,l.width=c*.5,u.font=o;var h="H",v={top:0};u.clearRect(0,0,c,c),u.textBaseline="top",u.fillStyle="black",u.fillText(h,0,0);var p=pg(u.getImageData(0,0,c,c));u.clearRect(0,0,c,c),u.textBaseline="bottom",u.fillText(h,0,c);var _=pg(u.getImageData(0,0,c,c));v.lineHeight=v.bottom=c-_+p,u.clearRect(0,0,c,c),u.textBaseline="alphabetic",u.fillText(h,0,c);var T=pg(u.getImageData(0,0,c,c)),g=c-T-1+p;v.baseline=v.alphabetic=g,u.clearRect(0,0,c,c),u.textBaseline="middle",u.fillText(h,0,c*.5);var A=pg(u.getImageData(0,0,c,c));v.median=v.middle=c-A-1+p-c*.5,u.clearRect(0,0,c,c),u.textBaseline="hanging",u.fillText(h,0,c*.5);var b=pg(u.getImageData(0,0,c,c));v.hanging=c-b-1+p-c*.5,u.clearRect(0,0,c,c),u.textBaseline="ideographic",u.fillText(h,0,c);var w=pg(u.getImageData(0,0,c,c));if(v.ideographic=c-w-1+p,f.upper&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.upper,0,0),v.upper=pg(u.getImageData(0,0,c,c)),v.capHeight=v.baseline-v.upper),f.lower&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.lower,0,0),v.lower=pg(u.getImageData(0,0,c,c)),v.xHeight=v.baseline-v.lower),f.tittle&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.tittle,0,0),v.tittle=pg(u.getImageData(0,0,c,c))),f.ascent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.ascent,0,0),v.ascent=pg(u.getImageData(0,0,c,c))),f.descent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.descent,0,0),v.descent=Uze(u.getImageData(0,0,c,c))),f.overshoot){u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.overshoot,0,0);var k=Uze(u.getImageData(0,0,c,c));v.overshoot=k-g}for(var x in v)v[x]/=i;return v.em=i,m1.cache[r]=v,Nze(v,s)}function Nze(e,t){var r={};typeof t=="string"&&(t=e[t]);for(var i in e)i!=="em"&&(r[i]=e[i]-t);return r}function pg(e){for(var t=e.height,r=e.data,i=3;i<r.length;i+=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}function Uze(e){for(var t=e.height,r=e.data,i=r.length-1;i>0;i-=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}});var Xze=ne((Agr,Wze)=>{"use strict";var nT=sze(),VBt=vg(),HBt=vX(),GBt=hze(),YBt=KW(),_X=n1(),WBt=dze(),x1=Dze(),XBt=Y3(),ZBt=aG(),jBt=yX(),KBt=xX(),JBt=Bze(),QBt=of(),$Bt=Hze(),e9t=B_(),t9t=pX(),Gze=t9t.nextPow2,Yze=new YBt,AI=!1;document.body&&(TI=document.body.appendChild(document.createElement("div")),TI.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(TI).fontStretch&&(AI=!0),document.body.removeChild(TI));var TI,Qs=function(t){r9t(t)?(t={regl:t},this.gl=t.regl._gl):this.gl=GBt(t),this.shader=Yze.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=t.regl||HBt({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),Yze.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(ZBt(t)?t:{})};Qs.prototype.createShader=function(){var t=this.regl,r=t({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(n,a){return[a.atlas.width,a.atlas.height]},atlasDim:function(n,a){return[a.atlas.cols,a.atlas.rows]},atlas:function(n,a){return a.atlas.texture},charStep:function(n,a){return a.atlas.step},em:function(n,a){return a.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),i={};return{regl:t,draw:r,atlas:i}};Qs.prototype.update=function(t){var r=this;if(typeof t=="string")t={text:t};else if(!t)return;t=VBt(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),t.opacity!=null&&(Array.isArray(t.opacity)?this.opacity=t.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(t.opacity)),t.viewport!=null&&(this.viewport=XBt(t.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),t.kerning!=null&&(this.kerning=t.kerning),t.offset!=null&&(typeof t.offset=="number"&&(t.offset=[t.offset,0]),this.positionOffset=e9t(t.offset)),t.direction&&(this.direction=t.direction),t.range&&(this.range=t.range,this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])],this.translate=[-t.range[0],-t.range[1]]),t.scale&&(this.scale=t.scale),t.translate&&(this.translate=t.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!t.font&&(t.font=Qs.baseFontSize+"px sans-serif");var i=!1,n=!1;if(t.font&&(Array.isArray(t.font)?t.font:[t.font]).forEach(function(fe,K){if(typeof fe=="string")try{fe=nT.parse(fe)}catch(he){fe=nT.parse(Qs.baseFontSize+"px "+fe)}else fe=nT.parse(nT.stringify(fe));var X=nT.stringify({size:Qs.baseFontSize,family:fe.family,stretch:AI?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),ae=jBt(fe.size),oe=Math.round(ae[0]*KBt(ae[1]));if(oe!==r.fontSize[K]&&(n=!0,r.fontSize[K]=oe),(!r.font[K]||X!=r.font[K].baseString)&&(i=!0,r.font[K]=Qs.fonts[X],!r.font[K])){var _e=fe.family.join(", "),be=[fe.style];fe.style!=fe.variant&&be.push(fe.variant),fe.variant!=fe.weight&&be.push(fe.weight),AI&&fe.weight!=fe.stretch&&be.push(fe.stretch),r.font[K]={baseString:X,family:_e,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:$Bt(_e,{origin:"top",fontSize:Qs.baseFontSize,fontStyle:be.join(" ")})},Qs.fonts[X]=r.font[K]}}),(i||n)&&this.font.forEach(function(fe,K){var X=nT.stringify({size:r.fontSize[K],family:fe.family,stretch:AI?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(r.fontAtlas[K]=r.shader.atlas[X],!r.fontAtlas[K]){var ae=fe.metrics;r.shader.atlas[X]=r.fontAtlas[K]={fontString:X,step:Math.ceil(r.fontSize[K]*ae.bottom*.5)*2,em:r.fontSize[K],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}t.text==null&&(t.text=r.text)}),typeof t.text=="string"&&t.position&&t.position.length>2){for(var a=Array(t.position.length*.5),o=0;o<a.length;o++)a[o]=t.text;t.text=a}var s;if(t.text!=null||i){if(this.textOffsets=[0],Array.isArray(t.text)){this.count=t.text[0].length,this.counts=[this.count];for(var l=1;l<t.text.length;l++)this.textOffsets[l]=this.textOffsets[l-1]+t.text[l-1].length,this.count+=t.text[l].length,this.counts.push(t.text[l].length);this.text=t.text.join("")}else this.text=t.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(fe,K){Qs.atlasContext.font=fe.baseString;for(var X=r.fontAtlas[K],ae=0;ae<r.text.length;ae++){var oe=r.text.charAt(ae);if(X.ids[oe]==null&&(X.ids[oe]=X.chars.length,X.chars.push(oe),s.push(oe)),fe.width[oe]==null&&(fe.width[oe]=Qs.atlasContext.measureText(oe).width/Qs.baseFontSize,r.kerning)){var _e=[];for(var be in fe.width)_e.push(be+oe,oe+be);QBt(fe.kerning,JBt(fe.family,{pairs:_e}))}}})}if(t.position)if(t.position.length>2){for(var u=!t.position[0].length,f=x1.mallocFloat(this.count*2),c=0,h=0;c<this.counts.length;c++){var v=this.counts[c];if(u)for(var p=0;p<v;p++)f[h++]=t.position[c*2],f[h++]=t.position[c*2+1];else for(var _=0;_<v;_++)f[h++]=t.position[c][0],f[h++]=t.position[c][1]}this.position.call?this.position({type:"float",data:f}):this.position=this.regl.buffer({type:"float",data:f}),x1.freeFloat(f)}else this.position.destroy&&this.position.destroy(),this.position={constant:t.position};if(t.text||i){var T=x1.mallocUint8(this.count),g=x1.mallocFloat(this.count*2);this.textWidth=[];for(var A=0,b=0;A<this.counts.length;A++){for(var w=this.counts[A],k=this.font[A]||this.font[0],x=this.fontAtlas[A]||this.fontAtlas[0],E=0;E<w;E++){var M=this.text.charAt(b),d=this.text.charAt(b-1);if(T[b]=x.ids[M],g[b*2]=k.width[M],E){var C=g[b*2-2],S=g[b*2],P=g[b*2-1],D=P+C*.5+S*.5;if(this.kerning){var z=k.kerning[d+M];z&&(D+=z*.001)}g[b*2+1]=D}else g[b*2+1]=g[b*2]*.5;b++}this.textWidth.push(g.length?g[b*2-2]*.5+g[b*2-1]:0)}t.align||(t.align=this.align),this.charBuffer({data:T,type:"uint8",usage:"stream"}),this.sizeBuffer({data:g,type:"float",usage:"stream"}),x1.freeUint8(T),x1.freeFloat(g),s.length&&this.font.forEach(function(fe,K){var X=r.fontAtlas[K],ae=X.step,oe=Math.floor(Qs.maxAtlasSize/ae),_e=Math.min(oe,X.chars.length),be=Math.ceil(X.chars.length/_e),he=Gze(_e*ae),ie=Gze(be*ae);X.width=he,X.height=ie,X.rows=be,X.cols=_e,X.em&&X.texture({data:WBt({canvas:Qs.atlasCanvas,font:X.fontString,chars:X.chars,shape:[he,ie],step:[ae,ae]})})})}if(t.align&&(this.align=t.align,this.alignOffset=this.textWidth.map(function(fe,K){var X=Array.isArray(r.align)?r.align.length>1?r.align[K]:r.align[0]:r.align;if(typeof X=="number")return X;switch(X){case"right":case"end":return-fe;case"center":case"centre":case"middle":return-fe*.5}return 0})),this.baseline==null&&t.baseline==null&&(t.baseline=0),t.baseline!=null&&(this.baseline=t.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,K){var X=(r.font[K]||r.font[0]).metrics,ae=0;return ae+=X.bottom*.5,typeof fe=="number"?ae+=fe-X.baseline:ae+=-X[fe],ae*=-1,ae})),t.color!=null)if(t.color||(t.color="transparent"),typeof t.color=="string"||!isNaN(t.color))this.color=_X(t.color,"uint8");else{var O;if(typeof t.color[0]=="number"&&t.color.length>this.counts.length){var V=t.color.length;O=x1.mallocUint8(V);for(var B=(t.color.subarray||t.color.slice).bind(t.color),F=0;F<V;F+=4)O.set(_X(B(F,F+4),"uint8"),F)}else{var N=t.color.length;O=x1.mallocUint8(N*4);for(var Z=0;Z<N;Z++)O.set(_X(t.color[Z]||0,"uint8"),Z*4)}this.color=O}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var J=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(J){var re=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(re);for(var le=0;le<this.batch.length;le++)this.batch[le]={count:this.counts.length>1?this.counts[le]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[le]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(le*4,le*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[le]:this.opacity,baseline:this.baselineOffset[le]!=null?this.baselineOffset[le]:this.baselineOffset[0],align:this.align?this.alignOffset[le]!=null?this.alignOffset[le]:this.alignOffset[0]:0,atlas:this.fontAtlas[le]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(le*2,le*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}};Qs.prototype.destroy=function(){};Qs.prototype.kerning=!0;Qs.prototype.position={constant:new Float32Array(2)};Qs.prototype.translate=null;Qs.prototype.scale=null;Qs.prototype.font=null;Qs.prototype.text="";Qs.prototype.positionOffset=[0,0];Qs.prototype.opacity=1;Qs.prototype.color=new Uint8Array([0,0,0,255]);Qs.prototype.alignOffset=[0,0];Qs.maxAtlasSize=1024;Qs.atlasCanvas=document.createElement("canvas");Qs.atlasContext=Qs.atlasCanvas.getContext("2d",{alpha:!1});Qs.baseFontSize=64;Qs.fonts={};function r9t(e){return typeof e=="function"&&e._gl&&e.prop&&e.texture&&e.buffer}Wze.exports=Qs});var MI=ne((Mgr,Zze)=>{"use strict";var n9t=aD(),i9t=vX();Zze.exports=function(t,r,i){var n=t._fullLayout,a=!0;return n._glcanvas.each(function(o){if(o.regl){o.regl.preloadCachedCode(i);return}if(!(o.pick&&!n._has("parcoords"))){try{o.regl=i9t({canvas:this,attributes:{antialias:!o.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||window.devicePixelRatio,extensions:r||[],cachedCode:i||{}})}catch(s){a=!1}o.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(s){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:s,layer:o.key})},!1)}}),a||n9t({container:n._glcontainer.node()}),a}});var TX=ne((wX,$ze)=>{"use strict";var jze=wW(),Kze=$W(),a9t=Vqe(),Jze=Xze(),bX=Wt(),o9t=r0().selectMode,s9t=MI(),l9t=js(),u9t=fB(),f9t=mW().styleTextSelection,Qze={};function c9t(e,t,r,i){var n=e._size,a=e.width*i,o=e.height*i,s=n.l*i,l=n.b*i,u=n.r*i,f=n.t*i,c=n.w*i,h=n.h*i;return[s+t.domain[0]*c,l+r.domain[0]*h,a-u-(1-t.domain[1])*c,o-f-(1-r.domain[1])*h]}var wX=$ze.exports=function(t,r,i){if(i.length){var n=t._fullLayout,a=r._scene,o=r.xaxis,s=r.yaxis,l,u;if(a){var f=s9t(t,["ANGLE_instanced_arrays","OES_element_index_uint"],Qze);if(!f){a.init();return}var c=a.count,h=n._glcanvas.data()[0].regl;if(u9t(t,r,i),a.dirty){if((a.line2d||a.error2d)&&!(a.scatter2d||a.fill2d||a.glText)&&h.clear({}),a.error2d===!0&&(a.error2d=a9t(h)),a.line2d===!0&&(a.line2d=Kze(h)),a.scatter2d===!0&&(a.scatter2d=jze(h)),a.fill2d===!0&&(a.fill2d=Kze(h)),a.glText===!0)for(a.glText=new Array(c),l=0;l<c;l++)a.glText[l]=new Jze(h);if(a.glText){if(c>a.glText.length){var v=c-a.glText.length;for(l=0;l<v;l++)a.glText.push(new Jze(h))}else if(c<a.glText.length){var p=a.glText.length-c,_=a.glText.splice(c,p);_.forEach(function(N){N.destroy()})}for(l=0;l<c;l++)a.glText[l].update(a.textOptions[l])}if(a.line2d&&(a.line2d.update(a.lineOptions),a.lineOptions=a.lineOptions.map(function(N){if(N&&N.positions){for(var Z=N.positions,J=0;J<Z.length&&(isNaN(Z[J])||isNaN(Z[J+1]));)J+=2;for(var re=Z.length-2;re>J&&(isNaN(Z[re])||isNaN(Z[re+1]));)re-=2;N.positions=Z.slice(J,re+2)}return N}),a.line2d.update(a.lineOptions)),a.error2d){var T=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(T)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fillOrder=bX.repeat(null,c),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(N,Z){var J=i[Z];if(!(!N||!J||!J[0]||!J[0].trace)){var re=J[0],le=re.trace,fe=re.t,K=a.lineOptions[Z],X,ae,oe=[];le._ownfill&&oe.push(Z),le._nexttrace&&oe.push(Z+1),oe.length&&(a.fillOrder[Z]=oe);var _e=[],be=K&&K.positions||fe.positions,he,ie;if(le.fill==="tozeroy"){for(he=0;he<be.length&&isNaN(be[he+1]);)he+=2;for(ie=be.length-2;ie>he&&isNaN(be[ie+1]);)ie-=2;be[he+1]!==0&&(_e=[be[he],0]),_e=_e.concat(be.slice(he,ie+2)),be[ie+1]!==0&&(_e=_e.concat([be[ie],0]))}else if(le.fill==="tozerox"){for(he=0;he<be.length&&isNaN(be[he]);)he+=2;for(ie=be.length-2;ie>he&&isNaN(be[ie]);)ie-=2;be[he]!==0&&(_e=[0,be[he+1]]),_e=_e.concat(be.slice(he,ie+2)),be[ie]!==0&&(_e=_e.concat([0,be[ie+1]]))}else if(le.fill==="toself"||le.fill==="tonext"){for(_e=[],X=0,N.splitNull=!0,ae=0;ae<be.length;ae+=2)(isNaN(be[ae])||isNaN(be[ae+1]))&&(_e=_e.concat(be.slice(X,ae)),_e.push(be[X],be[X+1]),_e.push(null,null),X=ae+2);_e=_e.concat(be.slice(X)),X&&_e.push(be[X],be[X+1])}else{var ye=le._nexttrace;if(ye){var ue=a.lineOptions[Z+1];if(ue){var Ae=ue.positions;if(le.fill==="tonexty"){for(_e=be.slice(),Z=Math.floor(Ae.length/2);Z--;){var Re=Ae[Z*2],ze=Ae[Z*2+1];isNaN(Re)||isNaN(ze)||_e.push(Re,ze)}N.fill=ye.fillcolor}}}}if(le._prevtrace&&le._prevtrace.fill==="tonext"){var et=a.lineOptions[Z-1].positions,Le=_e.length/2;X=Le;var Ie=[X];for(ae=0;ae<et.length;ae+=2)(isNaN(et[ae])||isNaN(et[ae+1]))&&(Ie.push(ae/2+Le+1),X=ae+2);_e=_e.concat(et),N.hole=Ie}return N.fillmode=le.fill,N.opacity=le.opacity,N.positions=_e,N}}),a.fill2d.update(a.fillOptions))}var g=n.dragmode,A=o9t(g),b=n.clickmode.indexOf("select")>-1;for(l=0;l<c;l++){var w=i[l][0],k=w.trace,x=w.t,E=x.index,M=k._length,d=x.x,C=x.y;if(k.selectedpoints||A||b){if(A||(A=!0),k.selectedpoints){var S=a.selectBatch[E]=bX.selIndices2selPoints(k),P={};for(u=0;u<S.length;u++)P[S[u]]=1;var D=[];for(u=0;u<M;u++)P[u]||D.push(u);a.unselectBatch[E]=D}var z=x.xpx=new Array(M),O=x.ypx=new Array(M);for(u=0;u<M;u++)z[u]=o.c2p(d[u]),O[u]=s.c2p(C[u])}else x.xpx=x.ypx=null}if(A){if(a.select2d||(a.select2d=jze(n._glcanvas.data()[1].regl)),a.scatter2d){var V=new Array(c);for(l=0;l<c;l++)V[l]=a.selectBatch[l].length||a.unselectBatch[l].length?a.markerUnselectedOptions[l]:{};a.scatter2d.update(V)}a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.markerSelectedOptions)),a.glText&&i.forEach(function(N){var Z=((N||[])[0]||{}).trace||{};l9t.hasText(Z)&&f9t(N)})}else a.scatter2d&&a.scatter2d.update(a.markerOptions);var B={viewport:c9t(n,o,s,t._context.plotGlPixelRatio),range:[(o._rl||o.range)[0],(s._rl||s.range)[0],(o._rl||o.range)[1],(s._rl||s.range)[1]]},F=bX.repeat(B,a.count);a.fill2d&&a.fill2d.update(F),a.line2d&&a.line2d.update(F),a.error2d&&a.error2d.update(F.concat(F)),a.scatter2d&&a.scatter2d.update(F),a.select2d&&a.select2d.update(F),a.glText&&a.glText.forEach(function(N){N.update(B)})}}};wX.reglPrecompiled=Qze});var rOe=ne((Sgr,tOe)=>{"use strict";var eOe=TIe();eOe.plot=TX();tOe.exports=eOe});var iOe=ne((Egr,nOe)=>{"use strict";nOe.exports=rOe()});var AX=ne((kgr,lOe)=>{"use strict";var h9t=cu(),sOe=Ps(),aOe=kl().axisHoverFormat,v9t=Ba().hovertemplateAttrs,h5=WE(),d9t=wf().idRegex,p9t=So().templatedArray,iT=oa().extendFlat,by=h9t.marker,g9t=by.line,y9t=iT(sOe("marker.line",{editTypeOverride:"calc"}),{width:iT({},g9t.width,{editType:"calc"}),editType:"calc"}),SI=iT(sOe("marker"),{symbol:by.symbol,angle:by.angle,size:iT({},by.size,{editType:"markerSize"}),sizeref:by.sizeref,sizemin:by.sizemin,sizemode:by.sizemode,opacity:by.opacity,colorbar:by.colorbar,line:y9t,editType:"calc"});SI.color.editType=SI.cmin.editType=SI.cmax.editType="style";function oOe(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d9t[e],editType:"plot"}}}lOe.exports={dimensions:p9t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:iT({},h5.text,{}),hovertext:iT({},h5.hovertext,{}),hovertemplate:v9t(),xhoverformat:aOe("x"),yhoverformat:aOe("y"),marker:SI,xaxes:oOe("x"),yaxes:oOe("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h5.selected.marker,editType:"calc"},unselected:{marker:h5.unselected.marker,editType:"calc"},opacity:h5.opacity}});var EI=ne((Cgr,uOe)=>{"use strict";uOe.exports=function(e,t,r,i){i||(i=1/0);var n,a;for(n=0;n<t.length;n++)a=t[n],a.visible&&(i=Math.min(i,a[r].length));for(i===1/0&&(i=0),e._length=i,n=0;n<t.length;n++)a=t[n],a.visible&&(a._length=i);return i}});var hOe=ne((Lgr,cOe)=>{"use strict";var MX=Wt(),m9t=ch(),fOe=AX(),x9t=js(),_9t=dp(),b9t=EI(),w9t=UD().isOpenSymbol;cOe.exports=function(t,r,i,n){function a(v,p){return MX.coerce(t,r,fOe,v,p)}var o=m9t(t,r,{name:"dimensions",handleItemDefaults:T9t}),s=a("diagonal.visible"),l=a("showupperhalf"),u=a("showlowerhalf"),f=b9t(r,o,"values");if(!f||!s&&!l&&!u){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),_9t(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0});var c=w9t(r.marker.symbol),h=x9t.isBubble(r);a("marker.line.width",c||h?1:0),A9t(t,r,n,a),MX.coerceSelectionMarkerOpacity(r,a)};function T9t(e,t){function r(n,a){return MX.coerce(e,t,fOe.dimensions,n,a)}r("label");var i=r("values");i&&i.length?r("visible"):t.visible=!1,r("axis.type"),r("axis.matches")}function A9t(e,t,r,i){var n=t.dimensions,a=n.length,o=t.showupperhalf,s=t.showlowerhalf,l=t.diagonal.visible,u,f,c=new Array(a),h=new Array(a);for(u=0;u<a;u++){var v=u?u+1:"";c[u]="x"+v,h[u]="y"+v}var p=i("xaxes",c),_=i("yaxes",h),T=t._diag=new Array(a);t._xaxes={},t._yaxes={};var g=[],A=[];function b(P,D,z,O){if(P){var V=P.charAt(0),B=r._splomAxes[V];if(t["_"+V+"axes"][P]=1,O.push(P),!(P in B)){var F=B[P]={};z&&(F.label=z.label||"",z.visible&&z.axis&&(z.axis.type&&(F.type=z.axis.type),z.axis.matches&&(F.matches=D)))}}}var w=!l&&!s,k=!l&&!o;for(t._axesDim={},u=0;u<a;u++){var x=n[u],E=u===0,M=u===a-1,d=E&&w||M&&k?void 0:p[u],C=E&&k||M&&w?void 0:_[u];b(d,C,x,g),b(C,d,x,A),T[u]=[d,C],t._axesDim[d]=u,t._axesDim[C]=u}for(u=0;u<g.length;u++)for(f=0;f<A.length;f++){var S=g[u]+A[f];(u>f&&o||u<f&&s||u===f&&(l||!s||!o))&&(r._splomSubplots[S]=1)}(!s||!l&&o&&s)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}});var pOe=ne((Pgr,dOe)=>{"use strict";var vOe=Wt();dOe.exports=function(t,r){var i=t._fullLayout,n=r.uid,a=i._splomScenes;a||(a=i._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},s={matrix:!1,selectBatch:[],unselectBatch:[]},l=a[r.uid];return l||(l=a[n]=vOe.extendFlat({},o,s),l.draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||vOe.extendFlat(l,o),l}});var mOe=ne((Rgr,yOe)=>{"use strict";var SX=Wt(),kI=zl(),M9t=yp().calcMarkerSize,S9t=yp().calcAxisExpansion,E9t=pp(),gOe=V_().markerSelection,k9t=V_().markerStyle,C9t=pOe(),L9t=$a().BADNUM,P9t=h1().TOO_MANY_POINTS;yOe.exports=function(t,r){var i=r.dimensions,n=r._length,a={},o=a.cdata=[],s=a.data=[],l=r._visibleDims=[],u,f,c,h,v;function p(b,w){for(var k=b.makeCalcdata({v:w.values,vcalendar:r.calendar},"v"),x=0;x<k.length;x++)k[x]=k[x]===L9t?NaN:k[x];o.push(k),s.push(b.type==="log"?SX.simpleMap(k,b.c2l):k)}for(u=0;u<i.length;u++)if(c=i[u],c.visible){if(h=kI.getFromId(t,r._diag[u][0]),v=kI.getFromId(t,r._diag[u][1]),h&&v&&h.type!==v.type){SX.log("Skipping splom dimension "+u+" with conflicting axis types");continue}h?(p(h,c),v&&v.type==="category"&&(v._categories=h._categories.slice())):p(v,c),l.push(u)}E9t(t,r),SX.extendFlat(a,k9t(t,r));var _=o.length,T=_*n>P9t,g;for(T?g=a.sizeAvg||Math.max(a.size,3):g=M9t(r,n),f=0;f<l.length;f++)u=l[f],c=i[u],h=kI.getFromId(t,r._diag[u][0])||{},v=kI.getFromId(t,r._diag[u][1])||{},S9t(t,r,h,v,o[f],o[f],g);var A=C9t(t,r);return A.matrix||(A.matrix=!0),A.matrixOptions=a,A.selectedOptions=gOe(t,r,r.selected),A.unselectedOptions=gOe(t,r,r.unselected),[{x:!1,y:!1,t:{},trace:r}]}});var _Oe=ne((xOe,v5)=>{(function(){var e,t,r,i,n,a;typeof performance!="undefined"&&performance!==null&&performance.now?v5.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(v5.exports=function(){return(e()-n)/1e6},t=process.hrtime,e=function(){var o;return o=t(),o[0]*1e9+o[1]},i=e(),a=process.uptime()*1e9,n=i-a):Date.now?(v5.exports=function(){return Date.now()-r},r=Date.now()):(v5.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(xOe)});var wOe=ne((Dgr,PI)=>{var R9t=_Oe(),wy=window,CI=["moz","webkit"],oT="AnimationFrame",sT=wy["request"+oT],d5=wy["cancel"+oT]||wy["cancelRequest"+oT];for(aT=0;!sT&&aT<CI.length;aT++)sT=wy[CI[aT]+"Request"+oT],d5=wy[CI[aT]+"Cancel"+oT]||wy[CI[aT]+"CancelRequest"+oT];var aT;(!sT||!d5)&&(LI=0,EX=0,_1=[],bOe=1e3/60,sT=function(e){if(_1.length===0){var t=R9t(),r=Math.max(0,bOe-(t-LI));LI=r+t,setTimeout(function(){var i=_1.slice(0);_1.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(LI)}catch(a){setTimeout(function(){throw a},0)}},Math.round(r))}return _1.push({handle:++EX,callback:e,cancelled:!1}),EX},d5=function(e){for(var t=0;t<_1.length;t++)_1[t].handle===e&&(_1[t].cancelled=!0)});var LI,EX,_1,bOe;PI.exports=function(e){return sT.call(wy,e)};PI.exports.cancel=function(){d5.apply(wy,arguments)};PI.exports.polyfill=function(e){e||(e=wy),e.requestAnimationFrame=sT,e.cancelAnimationFrame=d5}});var AOe=ne((Igr,TOe)=>{TOe.exports=function(t,r){var i=typeof t=="number",n=typeof r=="number";i&&!n?(r=t,t=0):!i&&!n&&(t=0,r=0),t=t|0,r=r|0;var a=r-t;if(a<0)throw new Error("array length must be positive");for(var o=new Array(a),s=0,l=t;s<a;s++,l++)o[s]=l;return o}});var kOe=ne((Fgr,EOe)=>{"use strict";var D9t=wW(),I9t=vg(),F9t=O_(),MOe=wOe(),q9t=AOe(),kX=Y3(),z9t=B_();EOe.exports=b1;function b1(e,t){if(!(this instanceof b1))return new b1(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=D9t(e),this.canvas=this.scatter.canvas}b1.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=MOe(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,MOe(()=>{this.dirty=!1})),this)};b1.prototype.update=function(...e){if(!e.length)return;for(let i=0;i<e.length;i++)this.updateItem(i,e[i]);this.traces=this.traces.filter(Boolean);let t=[],r=0;for(let i=0;i<this.traces.length;i++){let n=this.traces[i],a=this.traces[i].passes;for(let o=0;o<a.length;o++)t.push(this.passes[a[o]]);n.passOffset=r,r+=n.passes.length}return this.scatter.update(...t),this};b1.prototype.updateItem=function(e,t){let{regl:r}=this;if(t===null)return this.traces[e]=null,this;if(!t)return this;let i=I9t(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:kX([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(i.color!=null&&(n.color=i.color),i.size!=null&&(n.size=i.size),i.marker!=null&&(n.marker=i.marker),i.borderColor!=null&&(n.borderColor=i.borderColor),i.borderSize!=null&&(n.borderSize=i.borderSize),i.opacity!=null&&(n.opacity=i.opacity),i.viewport&&(n.viewport=kX(i.viewport)),i.diagonal!=null&&(n.diagonal=i.diagonal),i.upper!=null&&(n.upper=i.upper),i.lower!=null&&(n.lower=i.lower),i.data){n.buffer(z9t(i.data)),n.columns=i.data.length,n.count=i.data[0].length,n.bounds=[];for(let _=0;_<n.columns;_++)n.bounds[_]=F9t(i.data[_],1)}let a;i.range&&(n.range=i.range,a=n.range&&typeof n.range[0]!="number"),i.domain&&(n.domain=i.domain);let o=!1;i.padding!=null&&(Array.isArray(i.padding)&&i.padding.length===n.columns&&typeof i.padding[i.padding.length-1]=="number"?(n.padding=i.padding.map(SOe),o=!0):n.padding=SOe(i.padding));let s=n.columns,l=n.count,u=n.viewport.width,f=n.viewport.height,c=n.viewport.x,h=n.viewport.y,v=u/s,p=f/s;n.passes=[];for(let _=0;_<s;_++)for(let T=0;T<s;T++){if(!n.diagonal&&T===_||!n.upper&&_>T||!n.lower&&_<T)continue;let g=O9t(n.id,_,T),A=this.passes[g]||(this.passes[g]={});if(i.data&&(i.transpose?A.positions={x:{buffer:n.buffer,offset:T,count:l,stride:s},y:{buffer:n.buffer,offset:_,count:l,stride:s}}:A.positions={x:{buffer:n.buffer,offset:T*l,count:l},y:{buffer:n.buffer,offset:_*l,count:l}},A.bounds=RI(n.bounds,_,T)),i.domain||i.viewport||i.data){let b=o?RI(n.padding,_,T):n.padding;if(n.domain){let[w,k,x,E]=RI(n.domain,_,T);A.viewport=[c+w*u+b[0],h+k*f+b[1],c+x*u-b[2],h+E*f-b[3]]}else A.viewport=[c+T*v+v*b[0],h+_*p+p*b[1],c+(T+1)*v-v*b[2],h+(_+1)*p-p*b[3]]}i.color&&(A.color=n.color),i.size&&(A.size=n.size),i.marker&&(A.marker=n.marker),i.borderSize&&(A.borderSize=n.borderSize),i.borderColor&&(A.borderColor=n.borderColor),i.opacity&&(A.opacity=n.opacity),i.range&&(A.range=a?RI(n.range,_,T):n.range||A.bounds),n.passes.push(g)}return this};b1.prototype.draw=function(...e){if(!e.length)this.scatter.draw();else{let t=[];for(let r=0;r<e.length;r++)if(typeof e[r]=="number"){let{passes:i,passOffset:n}=this.traces[e[r]];t.push(...q9t(n,n+i.length))}else if(e[r].length){let i=e[r],{passes:n,passOffset:a}=this.traces[r];n=n.map((o,s)=>{t[a+s]=i})}this.scatter.draw(...t)}return this};b1.prototype.destroy=function(){return this.traces.forEach(e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function O9t(e,t,r){let i=e.id!=null?e.id:e,n=t,a=r;return i<<16|(n&255)<<8|a&255}function RI(e,t,r){let i,n,a,o,s,l,u,f,c=e[t],h=e[r];return c.length>2?(i=c[0],a=c[2],n=c[1],o=c[3]):c.length?(i=n=c[0],a=o=c[1]):(i=c.x,n=c.y,a=c.x+c.width,o=c.y+c.height),h.length>2?(s=h[0],u=h[2],l=h[1],f=h[3]):h.length?(s=l=h[0],u=f=h[1]):(s=h.x,l=h.y,u=h.x+h.width,f=h.y+h.height),[s,n,u,o]}function SOe(e){if(typeof e=="number")return[e,e,e,e];if(e.length===2)return[e[0],e[1],e[0],e[1]];{let t=kX(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}});var LOe=ne((qgr,COe)=>{"use strict";var B9t=kOe(),CX=Wt(),DI=zl(),N9t=r0().selectMode;COe.exports=function(t,r,i){if(i.length)for(var n=0;n<i.length;n++)U9t(t,i[n][0])};function U9t(e,t){var r=e._fullLayout,i=r._size,n=t.trace,a=t.t,o=r._splomScenes[n.uid],s=o.matrixOptions,l=s.cdata,u=r._glcanvas.data()[0].regl,f=r.dragmode,c,h,v,p,_;if(l.length!==0){s.lower=n.showupperhalf,s.upper=n.showlowerhalf,s.diagonal=n.diagonal.visible;var T=n._visibleDims,g=l.length,A=o.viewOpts={};for(A.ranges=new Array(g),A.domains=new Array(g),_=0;_<T.length;_++){v=T[_];var b=A.ranges[_]=new Array(4),w=A.domains[_]=new Array(4);c=DI.getFromId(e,n._diag[v][0]),c&&(b[0]=c._rl[0],b[2]=c._rl[1],w[0]=c.domain[0],w[2]=c.domain[1]),h=DI.getFromId(e,n._diag[v][1]),h&&(b[1]=h._rl[0],b[3]=h._rl[1],w[1]=h.domain[0],w[3]=h.domain[1])}var k=e._context.plotGlPixelRatio,x=i.l*k,E=i.b*k,M=i.w*k,d=i.h*k;A.viewport=[x,E,M+x,d+E],o.matrix===!0&&(o.matrix=B9t(u));var C=r.clickmode.indexOf("select")>-1,S=N9t(f)||!!n.selectedpoints||C,P=!0;if(S){var D=n._length;if(n.selectedpoints){o.selectBatch=n.selectedpoints;var z=n.selectedpoints,O={};for(v=0;v<z.length;v++)O[z[v]]=!0;var V=[];for(v=0;v<D;v++)O[v]||V.push(v);o.unselectBatch=V}var B=a.xpx=new Array(g),F=a.ypx=new Array(g);for(_=0;_<T.length;_++){if(v=T[_],c=DI.getFromId(e,n._diag[v][0]),c)for(B[_]=new Array(D),p=0;p<D;p++)B[_][p]=c.c2p(l[_][p]);if(h=DI.getFromId(e,n._diag[v][1]),h)for(F[_]=new Array(D),p=0;p<D;p++)F[_][p]=h.c2p(l[_][p])}if(o.selectBatch.length||o.unselectBatch.length){var N=CX.extendFlat({},s,o.unselectedOptions,A),Z=CX.extendFlat({},s,o.selectedOptions,A);o.matrix.update(N,Z),P=!1}}else a.xpx=a.ypx=null;if(P){var J=CX.extendFlat({},s,A);o.matrix.update(J,null)}}}});var LX=ne(POe=>{"use strict";POe.getDimIndex=function(t,r){for(var i=r._id,n=i.charAt(0),a={x:0,y:1}[n],o=t._visibleDims,s=0;s<o.length;s++){var l=o[s];if(t._diag[l][a]===i)return s}return!1}});var IOe=ne((Ogr,DOe)=>{"use strict";var ROe=LX(),V9t=ND().calcHover;function H9t(e,t,r){var i=e.cd,n=i[0].trace,a=e.scene,o=a.matrixOptions.cdata,s=e.xa,l=e.ya,u=s.c2p(t),f=l.c2p(r),c=e.distance,h=ROe.getDimIndex(n,s),v=ROe.getDimIndex(n,l);if(h===!1||v===!1)return[e];for(var p=o[h],_=o[v],T,g,A=c,b=0;b<p.length;b++){var w=p[b],k=_[b],x=s.c2p(w)-u,E=l.c2p(k)-f,M=Math.sqrt(x*x+E*E);M<A&&(A=g=M,T=b)}return e.index=T,e.distance=A,e.dxy=g,T===void 0?[e]:[V9t(e,p,_,n)]}DOe.exports={hoverPoints:H9t}});var NOe=ne((Bgr,BOe)=>{"use strict";var OOe=Wt(),FOe=OOe.pushUnique,qOe=js(),zOe=LX();BOe.exports=function(t,r){var i=t.cd,n=i[0].trace,a=i[0].t,o=t.scene,s=o.matrixOptions.cdata,l=t.xaxis,u=t.yaxis,f=[];if(!o)return f;var c=!qOe.hasMarkers(n)&&!qOe.hasText(n);if(n.visible!==!0||c)return f;var h=zOe.getDimIndex(n,l),v=zOe.getDimIndex(n,u);if(h===!1||v===!1)return f;var p=a.xpx[h],_=a.ypx[v],T=s[h],g=s[v],A=(t.scene.selectBatch||[]).slice(),b=[];if(r!==!1&&!r.degenerate)for(var w=0;w<T.length;w++)r.contains([p[w],_[w]],null,w,t)?(f.push({pointNumber:w,x:T[w],y:g[w]}),FOe(A,w)):A.indexOf(w)!==-1?FOe(A,w):b.push(w);var k=o.matrixOptions;return!A.length&&!b.length?o.matrix.update(k,null):!o.selectBatch.length&&!o.unselectBatch.length&&o.matrix.update(o.unselectedOptions,OOe.extendFlat({},k,o.selectedOptions,o.viewOpts)),o.selectBatch=A,o.unselectBatch=b,f}});var HOe=ne((Ngr,VOe)=>{"use strict";var UOe=Wt(),G9t=pp(),Y9t=V_().markerStyle;VOe.exports=function(t,r){var i=r.trace,n=t._fullLayout._splomScenes[i.uid];if(n){G9t(t,i),UOe.extendFlat(n.matrixOptions,Y9t(t,i));var a=UOe.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(a,null)}}});var YOe=ne((Ugr,GOe)=>{"use strict";var W9t=wi(),X9t=r9();GOe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:AX(),supplyDefaults:hOe(),colorbar:ph(),calc:mOe(),plot:LOe(),hoverPoints:IOe().hoverPoints,selectPoints:NOe(),editStyle:HOe(),meta:{}};W9t.register(X9t)});var JOe=ne((Vgr,KOe)=>{"use strict";var Z9t=$W(),j9t=wi(),K9t=MI(),J9t=vc().getModuleCalcData,w1=vu(),WOe=zl().getFromId,XOe=Xi().shouldShowZeroLine,ZOe="splom",jOe={};function Q9t(e){var t=e._fullLayout,r=j9t.getModule(ZOe),i=J9t(e.calcdata,r)[0],n=K9t(e,["ANGLE_instanced_arrays","OES_element_index_uint"],jOe);n&&(t._hasOnlyLargeSploms&&PX(e),r.plot(e,{},i))}function $9t(e){var t=e.calcdata,r=e._fullLayout;r._hasOnlyLargeSploms&&PX(e);for(var i=0;i<t.length;i++){var n=t[i][0],a=n.trace,o=r._splomScenes[a.uid];a.type==="splom"&&o&&o.matrix&&eNt(e,a,o)}}function eNt(e,t,r){for(var i=r.matrixOptions.data.length,n=t._visibleDims,a=r.viewOpts.ranges=new Array(i),o=0;o<n.length;o++){var s=n[o],l=a[o]=new Array(4),u=WOe(e,t._diag[s][0]);u&&(l[0]=u.r2l(u.range[0]),l[2]=u.r2l(u.range[1]));var f=WOe(e,t._diag[s][1]);f&&(l[1]=f.r2l(f.range[0]),l[3]=f.r2l(f.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:a},{ranges:a}):r.matrix.update({ranges:a})}function PX(e){var t=e._fullLayout,r=t._glcanvas.data()[0].regl,i=t._splomGrid;i||(i=t._splomGrid=Z9t(r)),i.update(tNt(e))}function tNt(e){var t=e._context.plotGlPixelRatio,r=e._fullLayout,i=r._size,n=[0,0,r.width*t,r.height*t],a={},o;function s(x,E,M,d,C,S){M*=t,d*=t,C*=t,S*=t;var P=E[x+"color"],D=E[x+"width"],z=String(P+D);z in a?a[z].data.push(NaN,NaN,M,d,C,S):a[z]={data:[M,d,C,S],join:"rect",thickness:D*t,color:P,viewport:n,range:n,overlay:!1}}for(o in r._splomSubplots){var l=r._plots[o],u=l.xaxis,f=l.yaxis,c=u._gridVals,h=f._gridVals,v=u._offset,p=u._length,_=f._length,T=i.b+f.domain[0]*i.h,g=-f._m,A=-g*f.r2l(f.range[0],f.calendar),b,w;if(u.showgrid)for(o=0;o<c.length;o++)b=v+u.l2p(c[o].x),s("grid",u,b,T,b,T+_);if(f.showgrid)for(o=0;o<h.length;o++)w=T+A+g*h[o].x,s("grid",f,v,w,v+p,w);XOe(e,u,f)&&(b=v+u.l2p(0),s("zeroline",u,b,T,b,T+_)),XOe(e,f,u)&&(w=T+A+0,s("zeroline",f,v,w,v+p,w))}var k=[];for(o in a)k.push(a[o]);return k}function rNt(e,t,r,i){var n={},a;if(i._splomScenes){for(a=0;a<e.length;a++){var o=e[a];o.type==="splom"&&(n[o.uid]=1)}for(a=0;a<r.length;a++){var s=r[a];if(!n[s.uid]){var l=i._splomScenes[s.uid];l&&l.destroy&&l.destroy(),i._splomScenes[s.uid]=null,delete i._splomScenes[s.uid]}}}Object.keys(i._splomScenes||{}).length===0&&delete i._splomScenes,i._splomGrid&&!t._hasOnlyLargeSploms&&i._hasOnlyLargeSploms&&(i._splomGrid.destroy(),i._splomGrid=null,delete i._splomGrid),w1.clean(e,t,r,i)}KOe.exports={name:ZOe,attr:w1.attr,attrRegex:w1.attrRegex,layoutAttributes:w1.layoutAttributes,supplyLayoutDefaults:w1.supplyLayoutDefaults,drawFramework:w1.drawFramework,plot:Q9t,drag:$9t,updateGrid:PX,clean:rNt,updateFx:w1.updateFx,toSVG:w1.toSVG,reglPrecompiled:jOe}});var e7e=ne((Hgr,$Oe)=>{"use strict";var QOe=YOe();QOe.basePlotModule=JOe(),$Oe.exports=QOe});var r7e=ne((Ggr,t7e)=>{"use strict";t7e.exports=e7e()});var DX=ne((Ygr,n7e)=>{"use strict";var RX=cu();n7e.exports={x:RX.x,y:RX.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:RX.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}});var a7e=ne((Wgr,i7e)=>{"use strict";var nNt=Wt(),iNt=DX();i7e.exports=function(t,r,i){function n(a,o){return nNt.coerce(t,r,iNt,a,o)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(r.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(r.indices=t.indices),n("text"),n("marker.color",i),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",i),n("marker.border.arearatio"),r._length=null}});var f7e=ne((Xgr,u7e)=>{"use strict";var aNt=yu().gl_pointcloud2d,oNt=Wt().isArrayOrTypedArray,o7e=Dp(),s7e=Cd().findExtremes,sNt=j2();function l7e(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=aNt(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var II=l7e.prototype;II.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:oNt(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};II.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=sNt(e,{})};II.updateFast=function(e){var t=this.xData=this.pickXData=e.x,r=this.yData=this.pickYData=e.y,i=this.pickXYData=e.xy,n=e.xbounds&&e.ybounds,a=e.indices,o,s,l,u=this.bounds,f,c,h;if(i){if(l=i,o=i.length>>>1,n)u[0]=e.xbounds[0],u[2]=e.xbounds[1],u[1]=e.ybounds[0],u[3]=e.ybounds[1];else for(h=0;h<o;h++)f=l[h*2],c=l[h*2+1],f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);if(a)s=a;else for(s=new Int32Array(o),h=0;h<o;h++)s[h]=h}else for(o=t.length,l=new Float32Array(2*o),s=new Int32Array(o),h=0;h<o;h++)f=t[h],c=r[h],s[h]=h,l[h*2]=f,l[h*2+1]=c,f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=l;var v=o7e(e.marker.color),p=o7e(e.marker.border.color),_=e.opacity*e.marker.opacity;v[3]*=_,this.pointcloudOptions.color=v;var T=e.marker.blend;if(T===null){var g=100;T=t.length<g||r.length<g}this.pointcloudOptions.blend=T,p[3]*=_,this.pointcloudOptions.borderColor=p;var A=e.marker.sizemin,b=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=A,this.pointcloudOptions.sizeMax=b,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,k=this.scene.yaxis,x=b/2||.5;e._extremes[w._id]=s7e(w,[u[0],u[2]],{ppad:x}),e._extremes[k._id]=s7e(k,[u[1],u[3]],{ppad:x})};II.dispose=function(){this.pointcloud.dispose()};function lNt(e,t){var r=new l7e(e,t.uid);return r.update(t),r}u7e.exports=lNt});var v7e=ne((Zgr,h7e)=>{"use strict";var uNt=Xi(),W_=Dp();function c7e(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var X_=c7e.prototype,fNt=["xaxis","yaxis"];X_.merge=function(e){this.titleEnable=!1,this.backgroundColor=W_(e.plot_bgcolor);var t,r,i,n,a,o,s,l,u,f,c;for(f=0;f<2;++f){t=fNt[f];var h=t.charAt(0);for(r=e[this.scene[t]._name],i=r.title.text===this.scene.fullLayout._dfltTitle[h]?"":r.title.text,c=0;c<=2;c+=2)this.labelEnable[f+c]=!1,this.labels[f+c]=i,this.labelColor[f+c]=W_(r.title.font.color),this.labelFont[f+c]=r.title.font.family,this.labelSize[f+c]=r.title.font.size,this.labelPad[f+c]=this.getLabelPad(t,r),this.tickEnable[f+c]=!1,this.tickColor[f+c]=W_((r.tickfont||{}).color),this.tickAngle[f+c]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[f+c]=this.getTickPad(r),this.tickMarkLength[f+c]=0,this.tickMarkWidth[f+c]=r.tickwidth||0,this.tickMarkColor[f+c]=W_(r.tickcolor),this.borderLineEnable[f+c]=!1,this.borderLineColor[f+c]=W_(r.linecolor),this.borderLineWidth[f+c]=r.linewidth||0;s=this.hasSharedAxis(r),a=this.hasAxisInDfltPos(t,r)&&!s,o=this.hasAxisInAltrPos(t,r)&&!s,n=r.mirror||!1,l=s?String(n).indexOf("all")!==-1:!!n,u=s?n==="allticks":String(n).indexOf("ticks")!==-1,a?this.labelEnable[f]=!0:o&&(this.labelEnable[f+2]=!0),a?this.tickEnable[f]=r.showticklabels:o&&(this.tickEnable[f+2]=r.showticklabels),(a||l)&&(this.borderLineEnable[f]=r.showline),(o||l)&&(this.borderLineEnable[f+2]=r.showline),(a||u)&&(this.tickMarkLength[f]=this.getTickMarkLength(r)),(o||u)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(r)),this.gridLineEnable[f]=r.showgrid,this.gridLineColor[f]=W_(r.gridcolor),this.gridLineWidth[f]=r.gridwidth,this.zeroLineEnable[f]=r.zeroline,this.zeroLineColor[f]=W_(r.zerolinecolor),this.zeroLineWidth[f]=r.zerolinewidth}};X_.hasSharedAxis=function(e){var t=this.scene,r=t.fullLayout._subplots.gl2d,i=uNt.findSubplotsWithAxis(r,e);return i.indexOf(t.id)!==0};X_.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";if(e==="yaxis")return r==="left"};X_.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";if(e==="yaxis")return r==="right"};X_.getLabelPad=function(e,t){var r=1.5,i=t.title.font.size,n=t.showticklabels;if(e==="xaxis")return t.side==="top"?-10+i*(r+(n?1:0)):-10+i*(r+(n?.5:0));if(e==="yaxis")return t.side==="right"?10+i*(r+(n?1:.5)):10+i*(r+(n?.5:0))};X_.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};X_.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function cNt(e){return new c7e(e)}h7e.exports=cNt});var d7e=ne(p5=>{"use strict";function hNt(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(t===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(t===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0}p5.buttons=hNt;function IX(e){return e.target||e.srcElement||window}p5.element=IX;function vNt(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var t=IX(e),r=t.getBoundingClientRect();return e.clientX-r.left}return 0}p5.x=vNt;function dNt(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var t=IX(e),r=t.getBoundingClientRect();return e.clientY-r.top}return 0}p5.y=dNt});var g7e=ne((Kgr,p7e)=>{"use strict";p7e.exports=pNt;var g5=d7e();function pNt(e,t){t||(t=e,e=window);var r=0,i=0,n=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function s(A){var b=!1;return"altKey"in A&&(b=b||A.altKey!==a.alt,a.alt=!!A.altKey),"shiftKey"in A&&(b=b||A.shiftKey!==a.shift,a.shift=!!A.shiftKey),"ctrlKey"in A&&(b=b||A.ctrlKey!==a.control,a.control=!!A.ctrlKey),"metaKey"in A&&(b=b||A.metaKey!==a.meta,a.meta=!!A.metaKey),b}function l(A,b){var w=g5.x(b),k=g5.y(b);"buttons"in b&&(A=b.buttons|0),(A!==r||w!==i||k!==n||s(b))&&(r=A|0,i=w||0,n=k||0,t&&t(r,i,n,a))}function u(A){l(0,A)}function f(){(r||i||n||a.shift||a.alt||a.meta||a.control)&&(i=n=0,r=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function c(A){s(A)&&t&&t(r,i,n,a)}function h(A){g5.buttons(A)===0?l(0,A):l(r,A)}function v(A){l(r|g5.buttons(A),A)}function p(A){l(r&~g5.buttons(A),A)}function _(){o||(o=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",v),e.addEventListener("mouseup",p),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",f),e.addEventListener("keyup",c),e.addEventListener("keydown",c),e.addEventListener("keypress",c),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}function T(){o&&(o=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",p),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",f),e.removeEventListener("keyup",c),e.removeEventListener("keydown",c),e.removeEventListener("keypress",c),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))}_();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return o},set:function(A){A?_():T()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),g}});var m7e=ne((Jgr,y7e)=>{"use strict";var gNt=xX();y7e.exports=yNt;function yNt(e,t,r){typeof e=="function"&&(r=!!t,t=e,e=window);var i=gNt("ex",e),n=function(a){r&&a.preventDefault();var o=a.deltaX||0,s=a.deltaY||0,l=a.deltaZ||0,u=a.deltaMode,f=1;switch(u){case 1:f=i;break;case 2:f=window.innerHeight;break}if(o*=f,s*=f,l*=f,o||s||l)return t(o,s,l,a)};return e.addEventListener("wheel",n),n}});var w7e=ne((Qgr,b7e)=>{"use strict";var mNt=g7e(),xNt=m7e(),x7e=hO(),_7e=wf(),FX=zA();b7e.exports=bNt;function _Nt(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function bNt(e){var t=e.mouseContainer,r=e.glplot,i=new _Nt(t,r);function n(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function a(){for(var s=e.graphDiv._fullLayout._axisConstraintGroups,l=e.xaxis._id,u=e.yaxis._id,f=0;f<s.length;f++)if(s[f][l]!==-1){if(s[f][u]!==-1)return!0;break}return!1}i.mouseListener=mNt(t,o),t.addEventListener("touchstart",function(s){var l=x7e(s.changedTouches[0],t);o(0,l[0],l[1]),o(1,l[0],l[1]),s.preventDefault()},FX?{passive:!1}:!1),t.addEventListener("touchmove",function(s){s.preventDefault();var l=x7e(s.changedTouches[0],t);o(1,l[0],l[1]),s.preventDefault()},FX?{passive:!1}:!1),t.addEventListener("touchend",function(s){o(0,i.lastPos[0],i.lastPos[1]),s.preventDefault()},FX?{passive:!1}:!1);function o(s,l,u){var f=e.calcDataBox(),c=r.viewBox,h=i.lastPos[0],v=i.lastPos[1],p=_7e.MINDRAG*r.pixelRatio,_=_7e.MINZOOM*r.pixelRatio,T,g;l*=r.pixelRatio,u*=r.pixelRatio,u=c[3]-c[1]-u;function A(M,d,C){var S=Math.min(d,C),P=Math.max(d,C);S!==P?(f[M]=S,f[M+2]=P,i.dataBox=f,e.setRanges(f)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(e.fullLayout.dragmode){case"zoom":if(s){var b=l/(c[2]-c[0])*(f[2]-f[0])+f[0],w=u/(c[3]-c[1])*(f[3]-f[1])+f[1];i.boxInited||(i.boxStart[0]=b,i.boxStart[1]=w,i.dragStart[0]=l,i.dragStart[1]=u),i.boxEnd[0]=b,i.boxEnd[1]=w,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var k=Math.abs(i.dragStart[0]-l)<_,x=Math.abs(i.dragStart[1]-u)<_;if(a()&&!(k&&x)){T=i.boxEnd[0]-i.boxStart[0],g=i.boxEnd[1]-i.boxStart[1];var E=(f[3]-f[1])/(f[2]-f[0]);Math.abs(T*E)>Math.abs(g)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(T)*E*(g>=0?1:-1),i.boxEnd[1]<f[1]?(i.boxEnd[1]=f[1],i.boxEnd[0]=i.boxStart[0]+(f[1]-i.boxStart[1])/Math.abs(E)):i.boxEnd[1]>f[3]&&(i.boxEnd[1]=f[3],i.boxEnd[0]=i.boxStart[0]+(f[3]-i.boxStart[1])/Math.abs(E))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(g)/E*(T>=0?1:-1),i.boxEnd[0]<f[0]?(i.boxEnd[0]=f[0],i.boxEnd[1]=i.boxStart[1]+(f[0]-i.boxStart[0])*Math.abs(E)):i.boxEnd[0]>f[2]&&(i.boxEnd[0]=f[2],i.boxEnd[1]=i.boxStart[1]+(f[2]-i.boxStart[0])*Math.abs(E)))}else k&&(i.boxEnd[0]=i.boxStart[0]),x&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(T=i.boxStart[0]!==i.boxEnd[0],g=i.boxStart[1]!==i.boxEnd[1],T||g?(T&&(A(0,i.boxStart[0],i.boxEnd[0]),e.xaxis.autorange=!1),g&&(A(1,i.boxStart[1],i.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,s?(i.panning||(i.dragStart[0]=l,i.dragStart[1]=u),Math.abs(i.dragStart[0]-l)<p&&(l=i.dragStart[0]),Math.abs(i.dragStart[1]-u)<p&&(u=i.dragStart[1]),T=(h-l)*(f[2]-f[0])/(r.viewBox[2]-r.viewBox[0]),g=(v-u)*(f[3]-f[1])/(r.viewBox[3]-r.viewBox[1]),f[0]+=T,f[2]+=T,f[1]+=g,f[3]+=g,e.setRanges(f),i.panning=!0,i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations()):i.panning&&(i.panning=!1,e.relayoutCallback());break}i.lastPos[0]=l,i.lastPos[1]=u}return i.wheelListener=xNt(t,function(s,l){if(!e.scrollZoom)return!1;var u=e.calcDataBox(),f=r.viewBox,c=i.lastPos[0],h=i.lastPos[1],v=Math.exp(5*l/(f[3]-f[1])),p=c/(f[2]-f[0])*(u[2]-u[0])+u[0],_=h/(f[3]-f[1])*(u[3]-u[1])+u[1];return u[0]=(u[0]-p)*v+p,u[2]=(u[2]-p)*v+p,u[1]=(u[1]-_)*v+_,u[3]=(u[3]-_)*v+_,e.setRanges(u),i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),i}});var L7e=ne(($gr,C7e)=>{"use strict";var M7e=wi(),qX=Xi(),L0=Ol(),wNt=yu().gl_plot2d,TNt=yu().gl_spikes2d,ANt=yu().gl_select_box,T7e=bG(),MNt=v7e(),SNt=w7e(),ENt=aD(),S7e=mm(),kNt=S7e.enforce,A7e=S7e.clean,CNt=Cd().doAutoRange,E7e=r0(),LNt=E7e.drawMode,PNt=E7e.selectMode,RNt=["xaxis","yaxis"],y5,FI,DNt=wf().SUBPLOT_PATTERN;function k7e(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(t),this.makeFramework(),!this.stopped&&(this.glplotOptions=MNt(this),this.glplotOptions.merge(t),this.glplot=wNt(this.glplotOptions),this.camera=SNt(this),this.traces={},this.spikes=TNt(this.glplot),this.selectBox=ANt(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}C7e.exports=k7e;var Hc=k7e.prototype;Hc.makeFramework=function(){if(this.staticPlot){if(!FI&&(y5=document.createElement("canvas"),FI=T7e({canvas:y5,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!FI))throw new Error("Error creating static canvas/context for image server");this.canvas=y5,this.gl=FI}else{var e=this.container.querySelector(".gl-canvas-focus"),t=T7e({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!t){ENt(this),this.stopped=!0;return}this.canvas=e,this.gl=t}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r);var i=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none";var n=this.mouseContainer=document.createElement("div");n.style.position="absolute",n.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var a=this.container;a.appendChild(i),a.appendChild(n);var o=this;n.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),n.addEventListener("mouseover",function(){o.isMouseOver=!0})};Hc.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(y5),this.updateSize(this.canvas);var t=this.glplot.gl,r=t.drawingBufferWidth,i=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new Uint8Array(r*i*4);t.readPixels(0,0,r,i,t.RGBA,t.UNSIGNED_BYTE,n);for(var a=0,o=i-1;a<o;++a,--o)for(var s=0;s<r;++s)for(var l=0;l<4;++l){var u=n[4*(r*a+s)+l];n[4*(r*a+s)+l]=n[4*(r*o+s)+l],n[4*(r*o+s)+l]=u}var f=document.createElement("canvas");f.width=r,f.height=i;var c=f.getContext("2d",{willReadFrequently:!0}),h=c.createImageData(r,i);h.data.set(n),c.putImageData(h,0,0);var v;switch(e){case"jpeg":v=f.toDataURL("image/jpeg");break;case"webp":v=f.toDataURL("image/webp");break;default:v=f.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(y5),v};Hc.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,r=this.fullLayout,i=r.width,n=r.height,a=Math.ceil(t*i)|0,o=Math.ceil(t*n)|0;return(e.width!==a||e.height!==o)&&(e.width=a,e.height=o),e};Hc.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[qX.calcTicks(this.xaxis),qX.calcTicks(this.yaxis)],t=0;t<2;++t)for(var r=0;r<e[t].length;++r)e[t][r].text=e[t][r].text+"";return e};function INt(e,t){for(var r=0;r<2;++r){var i=e[r],n=t[r];if(i.length!==n.length)return!0;for(var a=0;a<i.length;++a)if(i[a].x!==n[a].x)return!0}return!1}Hc.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(DNt),r="xaxis"+t[1],i="yaxis"+t[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[i]};Hc.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,r=this.yaxis,i=e.layout,n={},a=n[t._name+".range"]=t.range.slice(),o=n[r._name+".range"]=r.range.slice();n[t._name+".autorange"]=t.autorange,n[r._name+".autorange"]=r.autorange,M7e.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);var s=i[t._name];s.range=a,s.autorange=t.autorange;var l=i[r._name];l.range=o,l.autorange=r.autorange,n.lastInputTime=this.camera.lastInputTime,e.emit("plotly_relayout",n)};Hc.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),r=this.glplotOptions.ticks;INt(t,r)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};Hc.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,r=0;r<t.length;r++){var i=t[r];i.xref===this.xaxis._id&&i.yref===this.yaxis._id&&M7e.getComponentMethod("annotations","drawOne")(e,r)}};Hc.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}};Hc.plot=function(e,t,r){var i=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(r.dragmode);var n=r.width,a=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r),o.screenBox=[0,0,n,a];var s={_fullLayout:{_axisConstraintGroups:r._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:r._size}};A7e(s,this.xaxis),A7e(s,this.yaxis);var l=r._size,u=this.xaxis.domain,f=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,n-l.r-(1-u[1])*l.w,a-l.t-(1-f[1])*l.h],this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px",this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px",this.mouseContainer.height=l.h*(f[1]-f[0]),this.mouseContainer.style.left=l.l+u[0]*l.w+"px",this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,h;for(h=0;h<2;++h)c=this[RNt[h]],c._length=o.viewBox[h+2]-o.viewBox[h],CNt(this.graphDiv,c),c.setScale();kNt(s),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(r),i.update(o),this.glplot.draw()};Hc.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,r=e.range,i=t.range,n=e.r2l,a=t.r2l;return[n(r[0]),a(i[0]),n(r[1]),a(i[1])]};Hc.setRanges=function(e){var t=this.xaxis,r=this.yaxis,i=t.l2r,n=r.l2r;t.range=[i(e[0]),i(e[2])],r.range=[n(e[1]),n(e[3])]};Hc.updateTraces=function(e,t){var r=Object.keys(this.traces),i,n,a;this.fullData=e;e:for(i=0;i<r.length;i++){var o=r[i],s=this.traces[o];for(n=0;n<e.length;n++)if(a=e[n],a.uid===o&&a.type===s.type)continue e;s.dispose(),delete this.traces[o]}for(i=0;i<e.length;i++){a=e[i];var l=t[i],u=this.traces[a.uid];u?u.update(a,l):(u=a._module.plot(this,a,l),this.traces[a.uid]=u)}this.glplot.objects.sort(function(f,c){return f._trace.index-c._trace.index})};Hc.updateFx=function(e){PNt(e)||LNt(e)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),e==="pan"?this.mouseContainer.style.cursor="move":e==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null};Hc.emitPointAction=function(e,t){for(var r=e.trace.uid,i=e.pointIndex,n,a=0;a<this.fullData.length;a++)this.fullData[a].uid===r&&(n=this.fullData[a]);var o={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:i,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};L0.appendArrayPointValue(o,n,i),this.graphDiv.emit(t,{points:[o]})};Hc.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,r=t.mouseListener,i=this.lastButtonState===1&&r.buttons===0,n=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var a=r.x*e.pixelRatio,o=this.canvas.height-e.pixelRatio*r.y,s;if(t.boxEnabled&&n.dragmode==="zoom"){this.selectBox.enabled=!0;for(var l=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],u=0;u<2;u++)t.boxStart[u]===t.boxEnd[u]&&(l[u]=e.dataBox[u],l[u+2]=e.dataBox[u+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var f=n._size,c=this.xaxis.domain,h=this.yaxis.domain;s=e.pick(a/e.pixelRatio+f.l+c[0]*f.w,o/e.pixelRatio-(f.t+(1-h[1])*f.h));var v=s&&s.object._trace.handlePick(s);if(v&&i&&this.emitPointAction(v,"plotly_click"),s&&s.object._trace.hoverinfo!=="skip"&&n.hovermode&&v&&(!this.lastPickResult||this.lastPickResult.traceUid!==v.trace.uid||this.lastPickResult.dataCoord[0]!==v.dataCoord[0]||this.lastPickResult.dataCoord[1]!==v.dataCoord[1])){var p=v;this.lastPickResult={traceUid:v.trace?v.trace.uid:null,dataCoord:v.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),p.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(s.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(s.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(v,"plotly_hover");var _=this.fullData[p.trace.index]||{},T=p.pointIndex,g=L0.castHoverinfo(_,n,T);if(g&&g!=="all"){var A=g.split("+");A.indexOf("x")===-1&&(p.traceCoord[0]=void 0),A.indexOf("y")===-1&&(p.traceCoord[1]=void 0),A.indexOf("z")===-1&&(p.traceCoord[2]=void 0),A.indexOf("text")===-1&&(p.textLabel=void 0),A.indexOf("name")===-1&&(p.name=void 0)}L0.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:L0.castHoverOption(_,T,"bgcolor")||p.color,borderColor:L0.castHoverOption(_,T,"bordercolor"),fontFamily:L0.castHoverOption(_,T,"font.family"),fontSize:L0.castHoverOption(_,T,"font.size"),fontColor:L0.castHoverOption(_,T,"font.color"),nameLength:L0.castHoverOption(_,T,"namelength"),textAlign:L0.castHoverOption(_,T,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),e.draw()}};Hc.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),L0.loneUnhover(this.svgContainer))};Hc.hoverFormatter=function(e,t){if(t!==void 0){var r=this[e];return qX.tickText(r,r.c2l(t),"hover").text}}});var zX=ne(Lv=>{"use strict";var P7e=Xs().overrideAll,FNt=L7e(),qNt=tx(),zNt=kd(),R7e=wf(),qI=vu(),ONt=Pg(),D7e=vc().getSubplotData;Lv.name="gl2d";Lv.attr=["xaxis","yaxis"];Lv.idRoot=["x","y"];Lv.idRegex=R7e.idRegex;Lv.attrRegex=R7e.attrRegex;Lv.attributes=pB();Lv.supplyLayoutDefaults=function(e,t,r){t._has("cartesian")||qI.supplyLayoutDefaults(e,t,r)};Lv.layoutAttrOverrides=P7e(qI.layoutAttributes,"plot","from-root");Lv.baseLayoutAttrOverrides=P7e({plot_bgcolor:qNt.plot_bgcolor,hoverlabel:ONt.hoverlabel},"plot","nested");Lv.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots.gl2d,a=0;a<n.length;a++){var o=n[a],s=r._plots[o],l=D7e(i,"gl2d",o),u=s._scene2d;u===void 0&&(u=new FNt({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r),s._scene2d=u),u.plot(l,t.calcdata,r,t.layout)}};Lv.clean=function(e,t,r,i){for(var n=i._subplots.gl2d||[],a=0;a<n.length;a++){var o=n[a],s=i._plots[o];if(s._scene2d){var l=D7e(e,"gl2d",o);l.length===0&&(s._scene2d.destroy(),delete i._plots[o])}}qI.clean.apply(this,arguments)};Lv.drawFramework=function(e){e._context.staticPlot||qI.drawFramework(e)};Lv.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]],a=n._scene2d,o=a.toImage("png"),s=t._glimages.append("svg:image");s.attr({xmlns:zNt.svg,"xlink:href":o,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}};Lv.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]]._scene2d;n.updateFx(t.dragmode)}}});var F7e=ne((ryr,I7e)=>{"use strict";var tyr=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");I7e.exports={attributes:DX(),supplyDefaults:a7e(),calc:_G(),plot:f7e(),moduleType:"trace",name:"pointcloud",basePlotModule:zX(),categories:["gl","gl2d","showLegend"],meta:{}}});var z7e=ne((nyr,q7e)=>{"use strict";q7e.exports=F7e()});var BX=ne((iyr,B7e)=>{"use strict";var BNt=Xx(),NNt=Ps(),UNt=oa().extendFlat,VNt=Xs().overrideAll,O7e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],OI={};for(zI=0;zI<O7e.length;zI++)OX=O7e[zI],OI[OX]=BNt[OX];var OX,zI;OI.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};UNt(OI,NNt("",{cLetter:"z",autoColorDflt:!1}));B7e.exports=VNt(OI,"calc","nested")});var U7e=ne((ayr,N7e)=>{"use strict";var HNt=Wt(),GNt=$M(),YNt=Kf(),WNt=BX();N7e.exports=function(t,r,i,n){function a(s,l){return HNt.coerce(t,r,WNt,s,l)}var o=GNt(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("zsmooth"),YNt(t,r,n,a,{prefix:"",cLetter:"z"})}});var Y7e=ne((oyr,G7e)=>{"use strict";var XNt=yu().gl_heatmap2d,V7e=Xi(),ZNt=Dp();function H7e(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=XNt(e.glplot,this.options),this.heatmap._trace=this}var NX=H7e.prototype;NX.handlePick=function(e){var t=this.options,r=t.shape,i=e.pointId,n=i%r[0],a=Math.floor(i/r[0]),o=i;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[n],t.y[a],t.z[o]],textLabel:this.textLabels[i],name:this.name,pointIndex:[a,n],hoverinfo:this.hoverinfo}};NX.update=function(e,t){var r=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var i=r.z;this.options.z=[].concat.apply([],i);var n=i[0].length,a=i.length;this.options.shape=[n,a],this.options.x=r.x,this.options.y=r.y,this.options.zsmooth=e.zsmooth;var o=jNt(e);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var s=this.scene.xaxis,l=this.scene.yaxis,u,f;e.zsmooth===!1&&(u={ppad:r.x[1]-r.x[0]},f={ppad:r.y[1]-r.y[0]}),e._extremes[s._id]=V7e.findExtremes(s,r.x,u),e._extremes[l._id]=V7e.findExtremes(l,r.y,f)};NX.dispose=function(){this.heatmap.dispose()};function jNt(e){for(var t=e.colorscale,r=e.zmin,i=e.zmax,n=t.length,a=new Array(n),o=new Array(4*n),s=0;s<n;s++){var l=t[s],u=ZNt(l[1]);a[s]=r+l[0]*(i-r);for(var f=0;f<4;f++)o[4*s+f]=u[f]}return{colorLevels:a,colorValues:o}}function KNt(e,t,r){var i=new H7e(e,t.uid);return i.update(t,r),i}G7e.exports=KNt});var X7e=ne((lyr,W7e)=>{"use strict";var syr=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");W7e.exports={attributes:BX(),supplyDefaults:U7e(),colorbar:jx(),calc:tS(),plot:Y7e(),moduleType:"trace",name:"heatmapgl",basePlotModule:zX(),categories:["gl","gl2d","2dMap"],meta:{}}});var j7e=ne((uyr,Z7e)=>{"use strict";Z7e.exports=X7e()});var HX=ne((fyr,K7e)=>{"use strict";var JNt=Ps(),UX=dc(),VX=ll(),QNt=fl().attributes,BI=oa().extendFlat,$Nt=So().templatedArray;K7e.exports={domain:QNt({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:VX({editType:"plot"}),tickfont:VX({editType:"plot"}),rangefont:VX({editType:"plot"}),dimensions:$Nt("dimension",{label:{valType:"string",editType:"plot"},tickvals:BI({},UX.tickvals,{editType:"plot"}),ticktext:BI({},UX.ticktext,{editType:"plot"}),tickformat:BI({},UX.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:BI({editType:"calc"},JNt("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}});var m5=ne((cyr,J7e)=>{"use strict";J7e.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}});var gg=ne((hyr,$7e)=>{"use strict";var eUt=pA();function Q7e(e){return[e]}$7e.exports={keyFun:function(e){return e.key},repeat:Q7e,descend:eUt,wrap:Q7e,unwrap:function(e){return e[0]}}});var WX=ne((vyr,fBe)=>{"use strict";var Bu=m5(),P0=Ai(),tUt=gg().keyFun,NI=gg().repeat,lT=Wt().sorterAsc,rUt=Wt().strTranslate,eBe=Bu.bar.snapRatio;function tBe(e,t){return e*(1-eBe)+t*eBe}var rBe=Bu.bar.snapClose;function nUt(e,t){return e*(1-rBe)+t*rBe}function VI(e,t,r,i){if(iUt(r,i))return r;var n=e?-1:1,a=0,o=t.length-1;if(n<0){var s=a;a=o,o=s}for(var l=t[a],u=l,f=a;n*f<n*o;f+=n){var c=f+n,h=t[c];if(n*r<n*nUt(l,h))return tBe(l,u);if(n*r<n*h||c===o)return tBe(h,l);u=l,l=h}}function iUt(e,t){for(var r=0;r<t.length;r++)if(e>=t[r][0]&&e<=t[r][1])return!0;return!1}function aUt(e){e.attr("x",-Bu.bar.captureWidth/2).attr("width",Bu.bar.captureWidth)}function oUt(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function sUt(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var t=nBe(e.brush.filter.getConsolidated(),e.height),r=[0],i,n,a,o=t.length?t[0][0]:null,s=0;s<t.length;s++)i=t[s],n=i[1]-i[0],r.push(o),r.push(n),a=s+1,a<t.length&&(o=t[a][0]-i[1]);return r.push(e.height),r}function nBe(e,t){return e.map(function(r){return r.map(function(i){return Math.max(0,i*t)}).sort(lT)})}function lUt(e,t){var r=Bu.bar.handleHeight;if(!(t>e[1]+r||t<e[0]-r))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}function iBe(){P0.select(document.body).style("cursor",null)}function YX(e){e.attr("stroke-dasharray",sUt)}function UI(e,t){var r=P0.select(e).selectAll(".highlight, .highlight-shadow"),i=t?r.transition().duration(Bu.bar.snapDuration).each("end",t):r;YX(i)}function aBe(e,t){var r=e.brush,i=r.filterSpecified,n=NaN,a={},o;if(i){var s=e.height,l=r.filter.getConsolidated(),u=nBe(l,s),f=NaN,c=NaN,h=NaN;for(o=0;o<=u.length;o++){var v=u[o];if(v&&v[0]<=t&&t<=v[1]){f=o;break}else if(c=o?o-1:NaN,v&&v[0]>t){h=o;break}}if(n=f,isNaN(n)&&(isNaN(c)||isNaN(h)?n=isNaN(c)?h:c:n=t-u[c][1]<u[h][0]-t?c:h),!isNaN(n)){var p=u[n],_=lUt(p,t);_&&(a.interval=l[n],a.intervalPix=p,a.region=_)}}if(e.ordinal&&!a.region){var T=e.unitTickvals,g=e.unitToPaddedPx.invert(t);for(o=0;o<T.length;o++){var A=[T[Math.max(o-1,0)]*.25+T[o]*.75,T[Math.min(o+1,T.length-1)]*.25+T[o]*.75];if(g>=A[0]&&g<=A[1]){a.clickableOrdinalRange=A;break}}}return a}function uUt(e,t){P0.event.sourceEvent.stopPropagation();var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=t.unitToPaddedPx.invert(r),n=t.brush,a=aBe(t,r),o=a.interval,s=n.svgBrush;if(s.wasDragged=!1,s.grabbingBar=a.region==="ns",s.grabbingBar){var l=o.map(t.unitToPaddedPx);s.grabPoint=r-l[0]-Bu.verticalPadding,s.barLength=l[1]-l[0]}s.clickableOrdinalRange=a.clickableOrdinalRange,s.stayingIntervals=t.multiselect&&n.filterSpecified?n.filter.getConsolidated():[],o&&(s.stayingIntervals=s.stayingIntervals.filter(function(u){return u[0]!==o[0]&&u[1]!==o[1]})),s.startExtent=a.region?o[a.region==="s"?1:0]:i,t.parent.inBrushDrag=!0,s.brushStartCallback()}function oBe(e,t){P0.event.sourceEvent.stopPropagation();var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=t.brush.svgBrush;i.wasDragged=!0,i._dragging=!0,i.grabbingBar?i.newExtent=[r-i.grabPoint,r+i.barLength-i.grabPoint].map(t.unitToPaddedPx.invert):i.newExtent=[i.startExtent,t.unitToPaddedPx.invert(r)].sort(lT),t.brush.filterSpecified=!0,i.extent=i.stayingIntervals.concat([i.newExtent]),i.brushCallback(t),UI(e.parentNode)}function fUt(e,t){var r=t.brush,i=r.filter,n=r.svgBrush;n._dragging||(sBe(e,t),oBe(e,t),t.brush.svgBrush.wasDragged=!1),n._dragging=!1;var a=P0.event;a.sourceEvent.stopPropagation();var o=n.grabbingBar;if(n.grabbingBar=!1,n.grabLocation=void 0,t.parent.inBrushDrag=!1,iBe(),!n.wasDragged){n.wasDragged=void 0,n.clickableOrdinalRange?r.filterSpecified&&t.multiselect?n.extent.push(n.clickableOrdinalRange):(n.extent=[n.clickableOrdinalRange],r.filterSpecified=!0):o?(n.extent=n.stayingIntervals,n.extent.length===0&&GX(r)):GX(r),n.brushCallback(t),UI(e.parentNode),n.brushEndCallback(r.filterSpecified?i.getConsolidated():[]);return}var s=function(){i.set(i.getConsolidated())};if(t.ordinal){var l=t.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),n.newExtent=[VI(0,l,n.newExtent[0],n.stayingIntervals),VI(1,l,n.newExtent[1],n.stayingIntervals)];var u=n.newExtent[1]>n.newExtent[0];n.extent=n.stayingIntervals.concat(u?[n.newExtent]:[]),n.extent.length||GX(r),n.brushCallback(t),u?UI(e.parentNode,s):(s(),UI(e.parentNode))}else s();n.brushEndCallback(r.filterSpecified?i.getConsolidated():[])}function sBe(e,t){var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=aBe(t,r),n="crosshair";i.clickableOrdinalRange?n="pointer":i.region&&(n=i.region+"-resize"),P0.select(document.body).style("cursor",n)}function cUt(e){e.on("mousemove",function(t){P0.event.preventDefault(),t.parent.inBrushDrag||sBe(this,t)}).on("mouseleave",function(t){t.parent.inBrushDrag||iBe()}).call(P0.behavior.drag().on("dragstart",function(t){uUt(this,t)}).on("drag",function(t){oBe(this,t)}).on("dragend",function(t){fUt(this,t)}))}function lBe(e,t){return e[0]-t[0]}function hUt(e,t,r){var i=r._context.staticPlot,n=e.selectAll(".background").data(NI);n.enter().append("rect").classed("background",!0).call(aUt).call(oUt).style("pointer-events",i?"none":"auto").attr("transform",rUt(0,Bu.verticalPadding)),n.call(cUt).attr("height",function(s){return s.height-Bu.verticalPadding});var a=e.selectAll(".highlight-shadow").data(NI);a.enter().append("line").classed("highlight-shadow",!0).attr("x",-Bu.bar.width/2).attr("stroke-width",Bu.bar.width+Bu.bar.strokeWidth).attr("stroke",t).attr("opacity",Bu.bar.strokeOpacity).attr("stroke-linecap","butt"),a.attr("y1",function(s){return s.height}).call(YX);var o=e.selectAll(".highlight").data(NI);o.enter().append("line").classed("highlight",!0).attr("x",-Bu.bar.width/2).attr("stroke-width",Bu.bar.width-Bu.bar.strokeWidth).attr("stroke",Bu.bar.fillColor).attr("opacity",Bu.bar.fillOpacity).attr("stroke-linecap","butt"),o.attr("y1",function(s){return s.height}).call(YX)}function vUt(e,t,r){var i=e.selectAll("."+Bu.cn.axisBrush).data(NI,tUt);i.enter().append("g").classed(Bu.cn.axisBrush,!0),hUt(i,t,r)}function dUt(e){return e.svgBrush.extent.map(function(t){return t.slice()})}function GX(e){e.filterSpecified=!1,e.svgBrush.extent=[[-1/0,1/0]]}function pUt(e){return function(r){var i=r.brush,n=dUt(i),a=n.slice();i.filter.set(a),e()}}function uBe(e){for(var t=e.slice(),r=[],i,n=t.shift();n;){for(i=n.slice();(n=t.shift())&&n[0]<=i[1];)i[1]=Math.max(i[1],n[1]);r.push(i)}return r.length===1&&r[0][0]>r[0][1]&&(r=[]),r}function gUt(){var e=[],t,r;return{set:function(i){e=i.map(function(n){return n.slice().sort(lT)}).sort(lBe),e.length===1&&e[0][0]===-1/0&&e[0][1]===1/0&&(e=[[0,-1]]),t=uBe(e),r=e.reduce(function(n,a){return[Math.min(n[0],a[0]),Math.max(n[1],a[1])]},[1/0,-1/0])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function yUt(e,t,r,i,n,a){var o=gUt();return o.set(r),{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:i,brushCallback:pUt(n),brushEndCallback:a}}}function mUt(e,t){if(Array.isArray(e[0])?(e=e.map(function(i){return i.sort(lT)}),t.multiselect?e=uBe(e.sort(lBe)):e=[e[0]]):e=[e.sort(lT)],t.tickvals){var r=t.tickvals.slice().sort(lT);if(e=e.map(function(i){var n=[VI(0,r,i[0],[]),VI(1,r,i[1],[])];if(n[1]>n[0])return n}).filter(function(i){return i}),!e.length)return}return e.length>1?e:e[0]}fBe.exports={makeBrush:yUt,ensureAxisBrush:vUt,cleanRanges:mUt}});var vBe=ne((dyr,hBe)=>{"use strict";var Z_=Wt(),xUt=Uh().hasColorscale,_Ut=Kf(),bUt=fl().defaults,wUt=ch(),TUt=Xi(),cBe=HX(),AUt=WX(),XX=m5().maxDimensionCount,MUt=EI();function SUt(e,t,r,i,n){var a=n("line.color",r);if(xUt(e,"line")&&Z_.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),_Ut(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function EUt(e,t,r,i){function n(u,f){return Z_.coerce(e,t,cBe.dimensions,u,f)}var a=n("values"),o=n("visible");if(a&&a.length||(o=t.visible=!1),o){n("label"),n("tickvals"),n("ticktext"),n("tickformat");var s=n("range");t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},TUt.setConvert(t._ax,i.layout),n("multiselect");var l=n("constraintrange");l&&(t.constraintrange=AUt.cleanRanges(l,t))}}hBe.exports=function(t,r,i,n){function a(f,c){return Z_.coerce(t,r,cBe,f,c)}var o=t.dimensions;Array.isArray(o)&&o.length>XX&&(Z_.log("parcoords traces support up to "+XX+" dimensions at the moment"),o.splice(XX));var s=wUt(t,r,{name:"dimensions",layout:n,handleItemDefaults:EUt}),l=SUt(t,r,i,n,a);bUt(r,n,a),(!Array.isArray(s)||!s.length)&&(r.visible=!1),MUt(r,s,"values",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};Z_.coerceFont(a,"labelfont",u),Z_.coerceFont(a,"tickfont",u),Z_.coerceFont(a,"rangefont",u),a("labelangle"),a("labelside"),a("unselected.line.color"),a("unselected.line.opacity")}});var pBe=ne((pyr,dBe)=>{"use strict";var kUt=Wt().isArrayOrTypedArray,ZX=ul(),CUt=gg().wrap;dBe.exports=function(t,r){var i,n;return ZX.hasColorscale(r,"line")&&kUt(r.line.color)?(i=r.line.color,n=ZX.extractOpts(r.line).colorscale,ZX.calc(t,r,{vals:i,containerStr:"line",cLetter:"c"})):(i=LUt(r._length),n=[[0,r.line.color],[1,r.line.color]]),CUt({lineColor:i,cscale:n})};function LUt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=.5;return t}});var jX=ne(HI=>{"use strict";var PUt=Wt().isTypedArray;HI.convertTypedArray=function(e){return PUt(e)?Array.prototype.slice.call(e):e};HI.isOrdinal=function(e){return!!e.tickvals};HI.isVisible=function(e){return e.visible||!("visible"in e)}});var MBe=ne((yyr,ABe)=>{"use strict";var RUt=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),DUt=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),x5=m5().maxDimensionCount,bBe=Wt(),gBe=1e-6,GI=2048,IUt=new Uint8Array(4),yBe=new Uint8Array(4),mBe={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function FUt(e){e.read({x:0,y:0,width:1,height:1,data:IUt})}function wBe(e,t,r,i,n){var a=e._gl;a.enable(a.SCISSOR_TEST),a.scissor(t,r,i,n),e.clear({color:[0,0,0,0],depth:1})}function qUt(e,t,r,i,n,a){var o=a.key;function s(l){var u=Math.min(i,n-l*i);l===0&&(window.cancelAnimationFrame(r.currentRafs[o]),delete r.currentRafs[o],wBe(e,a.scissorX,a.scissorY,a.scissorWidth,a.viewBoxSize[1])),!r.clearOnly&&(a.count=2*u,a.offset=2*l*i,t(a),l*i+u<n&&(r.currentRafs[o]=window.requestAnimationFrame(function(){s(l+1)})),r.drawCompleted=!1)}r.drawCompleted||(FUt(e),r.drawCompleted=!0),s(0)}function zUt(e){return Math.max(gBe,Math.min(1-gBe,e))}function OUt(e,t){for(var r=new Array(256),i=0;i<256;i++)r[i]=e(i/255).concat(t);return r}function KX(e,t){return(e>>>8*t)%256/255}function BUt(e,t,r){for(var i=new Array(e*(x5+4)),n=0,a=0;a<e;a++){for(var o=0;o<x5;o++)i[n++]=o<t.length?t[o].paddedUnitValues[a]:.5;i[n++]=KX(a,2),i[n++]=KX(a,1),i[n++]=KX(a,0),i[n++]=zUt(r[a])}return i}function NUt(e,t,r){for(var i=new Array(t*8),n=0,a=0;a<t;a++)for(var o=0;o<2;o++)for(var s=0;s<4;s++){var l=e*4+s,u=r[a*64+l];l===63&&o===0&&(u*=-1),i[n++]=u}return i}function xBe(e){var t="0"+e;return t.substr(t.length-2)}function TBe(e){return e<x5?"p"+xBe(e+1)+"_"+xBe(e+4):"colors"}function UUt(e,t,r){for(var i=0;i<=x5;i+=4)e[TBe(i)](NUt(i/4,t,r))}function VUt(e){for(var t={},r=0;r<=x5;r+=4)t[TBe(r)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return t}function HUt(e,t,r,i,n,a,o,s,l,u,f,c,h,v){for(var p=[[],[]],_=0;_<64;_++)p[0][_]=_===n?1:0,p[1][_]=_===a?1:0;o*=v,s*=v,l*=v,u*=v;var T=e.lines.canvasOverdrag*v,g=e.domain,A=e.canvasWidth*v,b=e.canvasHeight*v,w=e.pad.l*v,k=e.pad.b*v,x=e.layoutHeight*v,E=e.layoutWidth*v,M=e.deselectedLines.color,d=e.deselectedLines.opacity,C=bBe.extendFlat({key:f,resolution:[A,b],viewBoxPos:[o+T,s],viewBoxSize:[l,u],i0:n,i1:a,dim0A:p[0].slice(0,16),dim0B:p[0].slice(16,32),dim0C:p[0].slice(32,48),dim0D:p[0].slice(48,64),dim1A:p[1].slice(0,16),dim1B:p[1].slice(16,32),dim1C:p[1].slice(32,48),dim1D:p[1].slice(48,64),drwLayer:c,contextColor:[M[0]/255,M[1]/255,M[2]/255,d!=="auto"?M[3]*d:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(i===t?0:o+T)+(w-T)+E*g.x[0],scissorWidth:(i===r?A-o+T:l+.5)+(i===t?o+T:0),scissorY:s+k+x*g.y[0],scissorHeight:u,viewportX:w-T+E*g.x[0],viewportY:k+x*g.y[0],viewportWidth:A,viewportHeight:b},h);return C}function _Be(e){var t=GI-1,r=Math.max(0,Math.floor(e[0]*t),0),i=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(r,i),Math.max(r,i)]}ABe.exports=function(e,t){var r=t.context,i=t.pick,n=t.regl,a=n._gl,o=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE),s=Math.max(o[0],Math.min(o[1],t.viewModel.plotGlPixelRatio)),l={currentRafs:{},drawCompleted:!0,clearOnly:!1},u,f,c,h,v=VUt(n),p,_=n.texture(mBe),T=[];A(t);var g=n({profile:!1,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:n.prop("scissorX"),y:n.prop("scissorY"),width:n.prop("scissorWidth"),height:n.prop("scissorHeight")}},viewport:{x:n.prop("viewportX"),y:n.prop("viewportY"),width:n.prop("viewportWidth"),height:n.prop("viewportHeight")},dither:!1,vert:RUt,frag:DUt,primitive:"lines",lineWidth:s,attributes:v,uniforms:{resolution:n.prop("resolution"),viewBoxPos:n.prop("viewBoxPos"),viewBoxSize:n.prop("viewBoxSize"),dim0A:n.prop("dim0A"),dim1A:n.prop("dim1A"),dim0B:n.prop("dim0B"),dim1B:n.prop("dim1B"),dim0C:n.prop("dim0C"),dim1C:n.prop("dim1C"),dim0D:n.prop("dim0D"),dim1D:n.prop("dim1D"),loA:n.prop("loA"),hiA:n.prop("hiA"),loB:n.prop("loB"),hiB:n.prop("hiB"),loC:n.prop("loC"),hiC:n.prop("hiC"),loD:n.prop("loD"),hiD:n.prop("hiD"),palette:_,contextColor:n.prop("contextColor"),maskTexture:n.prop("maskTexture"),drwLayer:n.prop("drwLayer"),maskHeight:n.prop("maskHeight")},offset:n.prop("offset"),count:n.prop("count")});function A(M){u=M.model,f=M.viewModel,c=f.dimensions.slice(),h=c[0]?c[0].values.length:0;var d=u.lines,C=i?d.color.map(function(P,D){return D/d.color.length}):d.color,S=BUt(h,c,C);UUt(v,h,S),!r&&!i&&(_=n.texture(bBe.extendFlat({data:OUt(u.unitToColor,255)},mBe)))}function b(M){var d,C,S,P=[[],[]];for(S=0;S<64;S++){var D=!M&&S<c.length?c[S].brush.filter.getBounds():[-1/0,1/0];P[0][S]=D[0],P[1][S]=D[1]}var z=GI*8,O=new Array(z);for(d=0;d<z;d++)O[d]=255;if(!M)for(d=0;d<c.length;d++){var V=d%8,B=(d-V)/8,F=Math.pow(2,V),N=c[d],Z=N.brush.filter.get();if(!(Z.length<2)){var J=_Be(Z[0])[1];for(C=1;C<Z.length;C++){var re=_Be(Z[C]);for(S=J+1;S<re[0];S++)O[S*8+B]&=~F;J=Math.max(J,re[1])}}}var le={shape:[8,GI],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:O};return p?p(le):p=n.texture(le),{maskTexture:p,maskHeight:GI,loA:P[0].slice(0,16),loB:P[0].slice(16,32),loC:P[0].slice(32,48),loD:P[0].slice(48,64),hiA:P[1].slice(0,16),hiB:P[1].slice(16,32),hiC:P[1].slice(32,48),hiD:P[1].slice(48,64)}}function w(M,d,C){var S=M.length,P,D,z,O=1/0,V=-1/0;for(P=0;P<S;P++)M[P].dim0.canvasX<O&&(O=M[P].dim0.canvasX,D=P),M[P].dim1.canvasX>V&&(V=M[P].dim1.canvasX,z=P);S===0&&wBe(n,0,0,u.canvasWidth,u.canvasHeight);var B=b(r);for(P=0;P<S;P++){var F=M[P],N=F.dim0.crossfilterDimensionIndex,Z=F.dim1.crossfilterDimensionIndex,J=F.canvasX,re=F.canvasY,le=J+F.panelSizeX,fe=F.plotGlPixelRatio;if(d||!T[N]||T[N][0]!==J||T[N][1]!==le){T[N]=[J,le];var K=HUt(u,D,z,P,N,Z,J,re,F.panelSizeX,F.panelSizeY,F.dim0.crossfilterDimensionIndex,r?0:i?2:1,B,fe);l.clearOnly=C;var X=d?u.lines.blockLineCount:h;qUt(n,g,l,X,h,K)}}}function k(M,d){return n.read({x:M,y:d,width:1,height:1,data:yBe}),yBe}function x(M,d,C,S){var P=new Uint8Array(4*C*S);return n.read({x:M,y:d,width:C,height:S,data:P}),P}function E(){e.style["pointer-events"]="none",_.destroy(),p&&p.destroy();for(var M in v)v[M].destroy()}return{render:w,readPixel:k,readPixels:x,destroy:E,update:A}}});var NBe=ne((myr,BBe)=>{"use strict";var bc=Ai(),Ty=Wt(),JX=Ty.isArrayOrTypedArray,RBe=Ty.numberFormat,DBe=sG(),IBe=Xi(),GUt=Ty.strRotate,yg=Ty.strTranslate,SBe=Es(),YI=aa(),EBe=ul(),eZ=gg(),Op=eZ.keyFun,mg=eZ.repeat,FBe=eZ.unwrap,uT=jX(),qo=m5(),qBe=WX(),YUt=MBe();function kBe(e,t,r){return Ty.aggNums(e,null,t,r)}function zBe(e,t){return tZ(kBe(Math.min,e,t),kBe(Math.max,e,t))}function WI(e){var t=e.range;return t?tZ(t[0],t[1]):zBe(e.values,e._length)}function tZ(e,t){return(isNaN(e)||!isFinite(e))&&(e=0),(isNaN(t)||!isFinite(t))&&(t=0),e===t&&(e===0?(e-=1,t+=1):(e*=.9,t*=1.1)),[e,t]}function WUt(e,t){return t?function(r,i){var n=t[i];return n==null?e(r):n}:e}function XUt(e,t,r,i,n){var a=WI(r);return i?bc.scale.ordinal().domain(i.map(WUt(RBe(r.tickformat),n))).range(i.map(function(o){var s=(o-a[0])/(a[1]-a[0]);return e-t+s*(2*t-e)})):bc.scale.linear().domain(a).range([e-t,t])}function ZUt(e,t){return bc.scale.linear().range([t,e-t])}function jUt(e,t){return bc.scale.linear().domain(WI(e)).range([t,1-t])}function KUt(e){if(e.tickvals){var t=WI(e);return bc.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(r){return(r-t[0])/(t[1]-t[0])}))}}function JUt(e){var t=e.map(function(a){return a[0]}),r=e.map(function(a){var o=DBe(a[1]);return bc.rgb("rgb("+o[0]+","+o[1]+","+o[2]+")")}),i=function(a){return function(o){return o[a]}},n="rgb".split("").map(function(a){return bc.scale.linear().clamp(!0).domain(t).range(r.map(i(a)))});return function(a){return n.map(function(o){return o(a)})}}function $X(e){return e.dimensions.some(function(t){return t.brush.filterSpecified})}function QUt(e,t,r){var i=FBe(t),n=i.trace,a=uT.convertTypedArray(i.lineColor),o=n.line,s={color:DBe(n.unselected.line.color),opacity:n.unselected.line.opacity},l=EBe.extractOpts(o),u=l.reversescale?EBe.flipScale(i.cscale):i.cscale,f=n.domain,c=n.dimensions,h=e.width,v=n.labelangle,p=n.labelside,_=n.labelfont,T=n.tickfont,g=n.rangefont,A=Ty.extendDeepNoArrays({},o,{color:a.map(bc.scale.linear().domain(WI({values:a,range:[l.min,l.max],_length:n._length}))),blockLineCount:qo.blockLineCount,canvasOverdrag:qo.overdrag*qo.canvasPixelRatio}),b=Math.floor(h*(f.x[1]-f.x[0])),w=Math.floor(e.height*(f.y[1]-f.y[0])),k=e.margin||{l:80,r:80,t:100,b:80},x=b,E=w;return{key:r,colCount:c.filter(uT.isVisible).length,dimensions:c,tickDistance:qo.tickDistance,unitToColor:JUt(u),lines:A,deselectedLines:s,labelAngle:v,labelSide:p,labelFont:_,tickFont:T,rangeFont:g,layoutWidth:h,layoutHeight:e.height,domain:f,translateX:f.x[0]*h,translateY:e.height-f.y[1]*e.height,pad:k,canvasWidth:x*qo.canvasPixelRatio+2*A.canvasOverdrag,canvasHeight:E*qo.canvasPixelRatio,width:x,height:E,canvasPixelRatio:qo.canvasPixelRatio}}function $Ut(e,t,r){var i=r.width,n=r.height,a=r.dimensions,o=r.canvasPixelRatio,s=function(h){return i*h/Math.max(1,r.colCount-1)},l=qo.verticalPadding/n,u=ZUt(n,qo.verticalPadding),f={key:r.key,xScale:s,model:r,inBrushDrag:!1},c={};return f.dimensions=a.filter(uT.isVisible).map(function(h,v){var p=jUt(h,l),_=c[h.label];c[h.label]=(_||0)+1;var T=h.label+(_?"__"+_:""),g=h.constraintrange,A=g&&g.length;A&&!JX(g[0])&&(g=[g]);var b=A?g.map(function(D){return D.map(p)}):[[-1/0,1/0]],w=function(){var D=f;D.focusLayer&&D.focusLayer.render(D.panels,!0);var z=$X(D);!e.contextShown()&&z?(D.contextLayer&&D.contextLayer.render(D.panels,!0),e.contextShown(!0)):e.contextShown()&&!z&&(D.contextLayer&&D.contextLayer.render(D.panels,!0,!0),e.contextShown(!1))},k=h.values;k.length>h._length&&(k=k.slice(0,h._length));var x=h.tickvals,E;function M(D,z){return{val:D,text:E[z]}}function d(D,z){return D.val-z.val}if(JX(x)&&x.length){Ty.isTypedArray(x)&&(x=Array.from(x)),E=h.ticktext,!JX(E)||!E.length?E=x.map(RBe(h.tickformat)):E.length>x.length?E=E.slice(0,x.length):x.length>E.length&&(x=x.slice(0,E.length));for(var C=1;C<x.length;C++)if(x[C]<x[C-1]){for(var S=x.map(M).sort(d),P=0;P<x.length;P++)x[P]=S[P].val,E[P]=S[P].text;break}}else x=void 0;return k=uT.convertTypedArray(k),{key:T,label:h.label,tickFormat:h.tickformat,tickvals:x,ticktext:E,ordinal:uT.isOrdinal(h),multiselect:h.multiselect,xIndex:v,crossfilterDimensionIndex:v,visibleIndex:h._index,height:n,values:k,paddedUnitValues:k.map(p),unitTickvals:x&&x.map(p),xScale:s,x:s(v),canvasX:s(v)*o,unitToPaddedPx:u,domainScale:XUt(n,qo.verticalPadding,h,x,E),ordinalScale:KUt(h),parent:f,model:r,brush:qBe.makeBrush(e,A,b,function(){e.linePickActive(!1)},w,function(D){if(f.focusLayer.render(f.panels,!0),f.pickLayer&&f.pickLayer.render(f.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var z=p.invert,O=D.map(function(V){return V.map(z).sort(Ty.sorterAsc)}).sort(function(V,B){return V[0]-B[0]});t.filterChanged(f.key,h._index,O)}})}}),f}function CBe(e){e.classed(qo.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function eVt(){var e=!0,t=!1;return{linePickActive:function(r){return arguments.length?e=!!r:e},contextShown:function(r){return arguments.length?t=!!r:t}}}function LBe(e,t){var r=t==="top"?1:-1,i=e*Math.PI/180,n=Math.sin(i),a=Math.cos(i);return{dir:r,dx:n,dy:a,degrees:e}}function QX(e,t,r){for(var i=t.panels||(t.panels=[]),n=e.data(),a=0;a<n.length-1;a++){var o=i[a]||(i[a]={}),s=n[a],l=n[a+1];o.dim0=s,o.dim1=l,o.canvasX=s.canvasX,o.panelSizeX=l.canvasX-s.canvasX,o.panelSizeY=t.model.canvasHeight,o.y=0,o.canvasY=0,o.plotGlPixelRatio=r}}function tVt(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)for(var i=e[t][r].trace,n=i.dimensions,a=0;a<n.length;a++){var o=n[a].values,s=n[a]._ax;s&&(s.range?s.range=tZ(s.range[0],s.range[1]):s.range=zBe(o,i._length),s.dtick||(s.dtick=.01*(Math.abs(s.range[1]-s.range[0])||1)),s.tickformat=n[a].tickformat,IBe.calcTicks(s),s.cleanRange())}}function OBe(e,t){return IBe.tickText(e._ax,t,!1).text}function PBe(e,t){if(e.ordinal)return"";var r=e.domainScale.domain(),i=r[t?r.length-1:0];return OBe(e.model.dimensions[e.visibleIndex],i)}BBe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=o._toppaper,l=o._glcontainer,u=t._context.plotGlPixelRatio,f=t._fullLayout.paper_bgcolor;tVt(r);var c=eVt(),h=r.filter(function(P){return FBe(P).trace.visible}).map(QUt.bind(0,i)).map($Ut.bind(0,c,n));l.each(function(P,D){return Ty.extendFlat(P,h[D])});var v=l.selectAll(".gl-canvas").each(function(P){P.viewModel=h[0],P.viewModel.plotGlPixelRatio=u,P.viewModel.paperColor=f,P.model=P.viewModel?P.viewModel.model:null}),p=null,_=v.filter(function(P){return P.pick});_.style("pointer-events",a?"none":"auto").on("mousemove",function(P){if(c.linePickActive()&&P.lineLayer&&n&&n.hover){var D=bc.event,z=this.width,O=this.height,V=bc.mouse(this),B=V[0],F=V[1];if(B<0||F<0||B>=z||F>=O)return;var N=P.lineLayer.readPixel(B,O-1-F),Z=N[3]!==0,J=Z?N[2]+256*(N[1]+256*N[0]):null,re={x:B,y:F,clientX:D.clientX,clientY:D.clientY,dataIndex:P.model.key,curveNumber:J};J!==p&&(Z?n.hover(re):n.unhover&&n.unhover(re),p=J)}}),v.style("opacity",function(P){return P.pick?0:1}),s.style("background","rgba(255, 255, 255, 0)");var T=s.selectAll("."+qo.cn.parcoords).data(h,Op);T.exit().remove(),T.enter().append("g").classed(qo.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),T.attr("transform",function(P){return yg(P.model.translateX,P.model.translateY)});var g=T.selectAll("."+qo.cn.parcoordsControlView).data(mg,Op);g.enter().append("g").classed(qo.cn.parcoordsControlView,!0),g.attr("transform",function(P){return yg(P.model.pad.l,P.model.pad.t)});var A=g.selectAll("."+qo.cn.yAxis).data(function(P){return P.dimensions},Op);A.enter().append("g").classed(qo.cn.yAxis,!0),g.each(function(P){QX(A,P,u)}),v.each(function(P){if(P.viewModel){!P.lineLayer||n?P.lineLayer=YUt(this,P):P.lineLayer.update(P),(P.key||P.key===0)&&(P.viewModel[P.key]=P.lineLayer);var D=!P.context||n;P.lineLayer.render(P.viewModel.panels,D)}}),A.attr("transform",function(P){return yg(P.xScale(P.xIndex),0)}),A.call(bc.behavior.drag().origin(function(P){return P}).on("drag",function(P){var D=P.parent;c.linePickActive(!1),P.x=Math.max(-qo.overdrag,Math.min(P.model.width+qo.overdrag,bc.event.x)),P.canvasX=P.x*P.model.canvasPixelRatio,A.sort(function(z,O){return z.x-O.x}).each(function(z,O){z.xIndex=O,z.x=P===z?z.x:z.xScale(z.xIndex),z.canvasX=z.x*z.model.canvasPixelRatio}),QX(A,D,u),A.filter(function(z){return Math.abs(P.xIndex-z.xIndex)!==0}).attr("transform",function(z){return yg(z.xScale(z.xIndex),0)}),bc.select(this).attr("transform",yg(P.x,0)),A.each(function(z,O,V){V===P.parent.key&&(D.dimensions[O]=z)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!$X(D)),D.focusLayer.render&&D.focusLayer.render(D.panels)}).on("dragend",function(P){var D=P.parent;P.x=P.xScale(P.xIndex),P.canvasX=P.x*P.model.canvasPixelRatio,QX(A,D,u),bc.select(this).attr("transform",function(z){return yg(z.x,0)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!$X(D)),D.focusLayer&&D.focusLayer.render(D.panels),D.pickLayer&&D.pickLayer.render(D.panels,!0),c.linePickActive(!0),n&&n.axesMoved&&n.axesMoved(D.key,D.dimensions.map(function(z){return z.crossfilterDimensionIndex}))})),A.exit().remove();var b=A.selectAll("."+qo.cn.axisOverlays).data(mg,Op);b.enter().append("g").classed(qo.cn.axisOverlays,!0),b.selectAll("."+qo.cn.axis).remove();var w=b.selectAll("."+qo.cn.axis).data(mg,Op);w.enter().append("g").classed(qo.cn.axis,!0),w.each(function(P){var D=P.model.height/P.model.tickDistance,z=P.domainScale,O=z.domain();bc.select(this).call(bc.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(D,P.tickFormat).tickValues(P.ordinal?O:null).tickFormat(function(V){return uT.isOrdinal(P)?V:OBe(P.model.dimensions[P.visibleIndex],V)}).scale(z)),YI.font(w.selectAll("text"),P.model.tickFont)}),w.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),w.selectAll("text").style("text-shadow",SBe.makeTextShadow(f)).style("cursor","default");var k=b.selectAll("."+qo.cn.axisHeading).data(mg,Op);k.enter().append("g").classed(qo.cn.axisHeading,!0);var x=k.selectAll("."+qo.cn.axisTitle).data(mg,Op);x.enter().append("text").classed(qo.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",a?"none":"auto"),x.text(function(P){return P.label}).each(function(P){var D=bc.select(this);YI.font(D,P.model.labelFont),SBe.convertToTspans(D,t)}).attr("transform",function(P){var D=LBe(P.model.labelAngle,P.model.labelSide),z=qo.axisTitleOffset;return(D.dir>0?"":yg(0,2*z+P.model.height))+GUt(D.degrees)+yg(-z*D.dx,-z*D.dy)}).attr("text-anchor",function(P){var D=LBe(P.model.labelAngle,P.model.labelSide),z=Math.abs(D.dx),O=Math.abs(D.dy);return 2*z>O?D.dir*D.dx<0?"start":"end":"middle"});var E=b.selectAll("."+qo.cn.axisExtent).data(mg,Op);E.enter().append("g").classed(qo.cn.axisExtent,!0);var M=E.selectAll("."+qo.cn.axisExtentTop).data(mg,Op);M.enter().append("g").classed(qo.cn.axisExtentTop,!0),M.attr("transform",yg(0,-qo.axisExtentOffset));var d=M.selectAll("."+qo.cn.axisExtentTopText).data(mg,Op);d.enter().append("text").classed(qo.cn.axisExtentTopText,!0).call(CBe),d.text(function(P){return PBe(P,!0)}).each(function(P){YI.font(bc.select(this),P.model.rangeFont)});var C=E.selectAll("."+qo.cn.axisExtentBottom).data(mg,Op);C.enter().append("g").classed(qo.cn.axisExtentBottom,!0),C.attr("transform",function(P){return yg(0,P.model.height+qo.axisExtentOffset)});var S=C.selectAll("."+qo.cn.axisExtentBottomText).data(mg,Op);S.enter().append("text").classed(qo.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(CBe),S.text(function(P){return PBe(P,!1)}).each(function(P){YI.font(bc.select(this),P.model.rangeFont)}),qBe.ensureAxisBrush(b,f,t)}});var nZ=ne((rZ,GBe)=>{"use strict";var rVt=NBe(),nVt=MI(),UBe=jX().isVisible,HBe={};function VBe(e,t,r){var i=t.indexOf(r),n=e.indexOf(i);return n===-1&&(n+=t.length),n}function iVt(e,t){return function(i,n){return VBe(e,t,i)-VBe(e,t,n)}}var rZ=GBe.exports=function(t,r){var i=t._fullLayout,n=nVt(t,[],HBe);if(n){var a={},o={},s={},l={},u=i._size;r.forEach(function(p,_){var T=p[0].trace;s[_]=T.index;var g=l[_]=T._fullInput.index;a[_]=t.data[g].dimensions,o[_]=t.data[g].dimensions.slice()});var f=function(p,_,T){var g=o[p][_],A=T.map(function(M){return M.slice()}),b="dimensions["+_+"].constraintrange",w=i._tracePreGUI[t._fullData[s[p]]._fullInput.uid];if(w[b]===void 0){var k=g.constraintrange;w[b]=k||null}var x=t._fullData[s[p]].dimensions[_];A.length?(A.length===1&&(A=A[0]),g.constraintrange=A,x.constraintrange=A.slice(),A=[A]):(delete g.constraintrange,delete x.constraintrange,A=null);var E={};E[b]=A,t.emit("plotly_restyle",[E,[l[p]]])},c=function(p){t.emit("plotly_hover",p)},h=function(p){t.emit("plotly_unhover",p)},v=function(p,_){var T=iVt(_,o[p].filter(UBe));a[p].sort(T),o[p].filter(function(g){return!UBe(g)}).sort(function(g){return o[p].indexOf(g)}).forEach(function(g){a[p].splice(a[p].indexOf(g),1),a[p].splice(o[p].indexOf(g),0,g)}),t.emit("plotly_restyle",[{dimensions:[a[p]]},[l[p]]])};rVt(t,r,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:f,hover:c,unhover:h,axesMoved:v})}};rZ.reglPrecompiled=HBe});var WBe=ne(_5=>{"use strict";var YBe=Ai(),aVt=vc().getModuleCalcData,oVt=nZ(),sVt=kd();_5.name="parcoords";_5.plot=function(e){var t=aVt(e.calcdata,"parcoords")[0];t.length&&oVt(e,t)};_5.clean=function(e,t,r,i){var n=i._has&&i._has("parcoords"),a=t._has&&t._has("parcoords");n&&!a&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())};_5.toSVG=function(e){var t=e._fullLayout._glimages,r=YBe.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:sVt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n),window.setTimeout(function(){YBe.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}});var ZBe=ne((_yr,XBe)=>{"use strict";XBe.exports={attributes:HX(),supplyDefaults:vBe(),calc:pBe(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:WBe(),categories:["gl","regl","noOpacity","noHover"],meta:{}}});var JBe=ne((byr,KBe)=>{"use strict";var jBe=ZBe();jBe.plot=nZ();KBe.exports=jBe});var $Be=ne((wyr,QBe)=>{"use strict";QBe.exports=JBe()});var iZ=ne((Tyr,n9e)=>{"use strict";var t9e=oa().extendFlat,lVt=es(),e9e=ll(),uVt=Ps(),r9e=Ba().hovertemplateAttrs,fVt=fl().attributes,cVt=t9e({editType:"calc"},uVt("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:r9e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});n9e.exports={domain:fVt({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:t9e({},lVt.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:r9e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:e9e({editType:"calc"}),tickfont:e9e({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:cVt,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}});var o9e=ne((Ayr,a9e)=>{"use strict";var fT=Wt(),hVt=Uh().hasColorscale,vVt=Kf(),dVt=fl().defaults,pVt=ch(),i9e=iZ(),gVt=EI(),yVt=uh().isTypedArraySpec;function mVt(e,t,r,i,n){n("line.shape"),n("line.hovertemplate");var a=n("line.color",i.colorway[0]);if(hVt(e,"line")&&fT.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),vVt(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function xVt(e,t){function r(u,f){return fT.coerce(e,t,i9e.dimensions,u,f)}var i=r("values"),n=r("visible");if(i&&i.length||(n=t.visible=!1),n){r("label"),r("displayindex",t._index);var a=e.categoryarray,o=fT.isArrayOrTypedArray(a)&&a.length>0||yVt(a),s;o&&(s="array");var l=r("categoryorder",s);l==="array"?(r("categoryarray"),r("ticktext")):(delete e.categoryarray,delete e.ticktext),!o&&l==="array"&&(t.categoryorder="trace")}}a9e.exports=function(t,r,i,n){function a(f,c){return fT.coerce(t,r,i9e,f,c)}var o=pVt(t,r,{name:"dimensions",handleItemDefaults:xVt}),s=mVt(t,r,i,n,a);dVt(r,n,a),(!Array.isArray(o)||!o.length)&&(r.visible=!1),gVt(r,o,"values",s),a("hoveron"),a("hovertemplate"),a("arrangement"),a("bundlecolors"),a("sortpaths"),a("counts");var l={family:n.font.family,size:Math.round(n.font.size),color:n.font.color};fT.coerceFont(a,"labelfont",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};fT.coerceFont(a,"tickfont",u)}});var l9e=ne((Myr,s9e)=>{"use strict";var _Vt=gg().wrap,bVt=Uh().hasColorscale,wVt=gv(),TVt=zq(),AVt=aa(),b5=Wt(),MVt=la();s9e.exports=function(t,r){var i=b5.filterVisible(r.dimensions);if(i.length===0)return[];var n=i.map(function(d){var C;if(d.categoryorder==="trace")C=null;else if(d.categoryorder==="array")C=d.categoryarray;else{C=TVt(d.values);for(var S=!0,P=0;P<C.length;P++)if(!MVt(C[P])){S=!1;break}C.sort(S?b5.sorterAsc:void 0),d.categoryorder==="category descending"&&(C=C.reverse())}return RVt(d.values,C)}),a,o,s;b5.isArrayOrTypedArray(r.counts)?a=r.counts:a=[r.counts],DVt(i),i.forEach(function(d,C){IVt(d,n[C])});var l=r.line,u;l?(bVt(r,"line")&&wVt(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),u=AVt.tryColorscale(l)):u=b5.identity;function f(d){var C,S;return b5.isArrayOrTypedArray(l.color)?(C=l.color[d%l.color.length],S=C):C=l.color,{color:u(C),rawColor:S}}var c=i[0].values.length,h={},v=n.map(function(d){return d.inds});s=0;var p,_;for(p=0;p<c;p++){var T=[];for(_=0;_<v.length;_++)T.push(v[_][p]);o=a[p%a.length],s+=o;var g=f(p),A=T+"-"+g.rawColor;h[A]===void 0&&(h[A]=LVt(T,g.color,g.rawColor)),PVt(h[A],p,o)}var b=i.map(function(d,C){return EVt(C,d._index,d._displayindex,d.label,s)});for(p=0;p<c;p++)for(o=a[p%a.length],_=0;_<b.length;_++){var w=b[_].containerInd,k=n[_].inds[p],x=b[_].categories;if(x[k]===void 0){var E=r.dimensions[w]._categoryarray[k],M=r.dimensions[w]._ticktext[k];x[k]=kVt(_,k,E,M)}CVt(x[k],p,o)}return _Vt(SVt(b,h,s))};function SVt(e,t,r){var i=e.map(function(n){return n.categories.length}).reduce(function(n,a){return Math.max(n,a)});return{dimensions:e,paths:t,trace:void 0,maxCats:i,count:r}}function EVt(e,t,r,i,n){return{dimensionInd:e,containerInd:t,displayInd:r,dimensionLabel:i,count:n,categories:[],dragX:null}}function kVt(e,t,r,i){return{dimensionInd:e,categoryInd:t,categoryValue:r,displayInd:t,categoryLabel:i,valueInds:[],count:0,dragY:null}}function CVt(e,t,r){e.valueInds.push(t),e.count+=r}function LVt(e,t,r){return{categoryInds:e,color:t,rawColor:r,valueInds:[],count:0}}function PVt(e,t,r){e.valueInds.push(t),e.count+=r}function RVt(e,t){t==null?t=[]:t=t.map(function(u){return u});var r={},i={},n=[];t.forEach(function(u,f){r[u]=0,i[u]=f});for(var a=0;a<e.length;a++){var o=e[a],s;r[o]===void 0?(r[o]=1,s=t.push(o)-1,i[o]=s):(r[o]++,s=i[o]),n.push(s)}var l=t.map(function(u){return r[u]});return{uniqueValues:t,uniqueCounts:l,inds:n}}function DVt(e){var t=e.map(function(i){return i.displayindex}),r;if(FVt(t))for(r=0;r<e.length;r++)e[r]._displayindex=e[r].displayindex;else for(r=0;r<e.length;r++)e[r]._displayindex=r}function IVt(e,t){e._categoryarray=t.uniqueValues,e.ticktext===null||e.ticktext===void 0?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var r=e._ticktext.length;r<t.uniqueValues.length;r++)e._ticktext.push(t.uniqueValues[r])}function FVt(e){for(var t=new Array(e.length),r=0;r<e.length;r++){if(e[r]<0||e[r]>=e.length||t[e[r]]!==void 0)return!1;t[e[r]]=!0}return!0}});var m9e=ne((Syr,y9e)=>{"use strict";var zo=Ai(),qVt=(M_(),Wb(A_)).interpolateNumber,zVt=eL(),A5=Ol(),T1=Wt(),w5=T1.strTranslate,u9e=aa(),aZ=Xf(),f9e=Es();function OVt(e,t,r,i){var n=t._context.staticPlot,a=e.map($Vt.bind(0,t,r)),o=i.selectAll("g.parcatslayer").data([null]);o.enter().append("g").attr("class","parcatslayer").style("pointer-events",n?"none":"all");var s=o.selectAll("g.trace.parcats").data(a,Ay),l=s.enter().append("g").attr("class","trace parcats");s.attr("transform",function(b){return w5(b.x,b.y)}),l.append("g").attr("class","paths");var u=s.select("g.paths"),f=u.selectAll("path.path").data(function(b){return b.paths},Ay);f.attr("fill",function(b){return b.model.color});var c=f.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(b){return b.model.color}).attr("fill-opacity",0);lZ(c),f.attr("d",function(b){return b.svgD}),c.empty()||f.sort(oZ),f.exit().remove(),f.on("mouseover",BVt).on("mouseout",NVt).on("click",UVt),l.append("g").attr("class","dimensions");var h=s.select("g.dimensions"),v=h.selectAll("g.dimension").data(function(b){return b.dimensions},Ay);v.enter().append("g").attr("class","dimension"),v.attr("transform",function(b){return w5(b.x,0)}),v.exit().remove();var p=v.selectAll("g.category").data(function(b){return b.categories},Ay),_=p.enter().append("g").attr("class","category");p.attr("transform",function(b){return w5(0,b.y)}),_.append("rect").attr("class","catrect").attr("pointer-events","none"),p.select("rect.catrect").attr("fill","none").attr("width",function(b){return b.width}).attr("height",function(b){return b.height}),h9e(_);var T=p.selectAll("rect.bandrect").data(function(b){return b.bands},Ay);T.each(function(){T1.raiseToTop(this)}),T.attr("fill",function(b){return b.color});var g=T.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(b){return b.color}).attr("fill-opacity",0);T.attr("fill",function(b){return b.color}).attr("width",function(b){return b.width}).attr("height",function(b){return b.height}).attr("y",function(b){return b.y}).attr("cursor",function(b){return b.parcatsViewModel.arrangement==="fixed"?"default":b.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),fZ(g),T.exit().remove(),_.append("text").attr("class","catlabel").attr("pointer-events","none");var A=t._fullLayout.paper_bgcolor;p.select("text.catlabel").attr("text-anchor",function(b){return T5(b)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",f9e.makeTextShadow(A)).style("fill","rgb(0, 0, 0)").attr("x",function(b){return T5(b)?b.width+5:-5}).attr("y",function(b){return b.height/2}).text(function(b){return b.model.categoryLabel}).each(function(b){u9e.font(zo.select(this),b.parcatsViewModel.categorylabelfont),f9e.convertToTspans(zo.select(this),t)}),_.append("text").attr("class","dimlabel"),p.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(b){return b.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(b){return b.width/2}).attr("y",-5).text(function(b,w){return w===0?b.parcatsViewModel.model.dimensions[b.model.dimensionInd].dimensionLabel:null}).each(function(b){u9e.font(zo.select(this),b.parcatsViewModel.labelfont)}),p.selectAll("rect.bandrect").on("mouseover",ZVt).on("mouseout",jVt),p.exit().remove(),v.call(zo.behavior.drag().origin(function(b){return{x:b.x,y:0}}).on("dragstart",KVt).on("drag",JVt).on("dragend",QVt)),s.each(function(b){b.traceSelection=zo.select(this),b.pathSelection=zo.select(this).selectAll("g.paths").selectAll("path.path"),b.dimensionSelection=zo.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),s.exit().remove()}y9e.exports=function(e,t,r,i){OVt(r,e,i,t)};function Ay(e){return e.key}function T5(e){var t=e.parcatsViewModel.dimensions.length,r=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===r}function oZ(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function BVt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){T1.raiseToTop(this),uZ(zo.select(this));var t=M5(e),r=sZ(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:zo.event,constraints:r}),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var i=zo.mouse(this)[0],n=e.parcatsViewModel.graphDiv,a=e.parcatsViewModel.trace,o=n._fullLayout,s=o._paperdiv.node().getBoundingClientRect(),l=e.parcatsViewModel.graphDiv.getBoundingClientRect(),u,f,c;for(c=0;c<e.leftXs.length-1;c++)if(e.leftXs[c]+e.dimWidths[c]-2<=i&&i<=e.leftXs[c+1]+2){var h=e.parcatsViewModel.dimensions[c],v=e.parcatsViewModel.dimensions[c+1];u=(h.x+h.width+v.x)/2,f=(e.topYs[c]+e.topYs[c+1]+e.height)/2;break}var p=e.parcatsViewModel.x+u,_=e.parcatsViewModel.y+f,T=aZ.mostReadable(e.model.color,["black","white"]),g=e.model.count,A=g/e.parcatsViewModel.model.count,b={countLabel:g,probabilityLabel:A.toFixed(3)},w=[];e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&w.push(["Count:",b.countLabel].join(" ")),e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&w.push(["P:",b.probabilityLabel].join(" "));var k=w.join("<br>"),x=zo.mouse(n)[0];A5.loneHover({trace:a,x:p-s.left+l.left,y:_-s.top+l.top,text:k,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:T,idealAlign:x<p?"right":"left",hovertemplate:(a.line||{}).hovertemplate,hovertemplateLabels:b,eventData:[{data:a._input,fullData:a,count:g,probability:A}]},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:n})}}}function NVt(e){if(!e.parcatsViewModel.dragDimension&&(lZ(zo.select(this)),A5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(oZ),e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var t=M5(e),r=sZ(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:zo.event,constraints:r})}}function M5(e){for(var t=[],r=d9e(e.parcatsViewModel),i=0;i<e.model.valueInds.length;i++){var n=e.model.valueInds[i];t.push({curveNumber:r,pointNumber:n})}return t}function sZ(e){for(var t={},r=e.parcatsViewModel.model.dimensions,i=0;i<r.length;i++){var n=r[i],a=n.categories[e.model.categoryInds[i]];t[n.containerInd]=a.categoryValue}return e.model.rawColor!==void 0&&(t.color=e.model.rawColor),t}function UVt(e){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=M5(e),r=sZ(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:zo.event,constraints:r})}}function lZ(e){e.attr("fill",function(t){return t.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function uZ(e){e.attr("fill-opacity",.8).attr("stroke",function(t){return aZ.mostReadable(t.model.color,["black","white"])}).attr("stroke-width",.3)}function VVt(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function h9e(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function HVt(e){e.attr("stroke","black").attr("stroke-width",1.5)}function fZ(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function XI(e){var t=e.parcatsViewModel.pathSelection,r=e.categoryViewModel.model.dimensionInd,i=e.categoryViewModel.model.categoryInd;return t.filter(function(n){return n.model.categoryInds[r]===i&&n.model.color===e.color})}function GVt(e){var t=zo.select(e.parentNode).selectAll("rect.bandrect");t.each(function(r){var i=XI(r);uZ(i),i.each(function(){T1.raiseToTop(this)})}),VVt(zo.select(e.parentNode))}function YVt(e){var t=zo.select(e).datum(),r=XI(t);uZ(r),r.each(function(){T1.raiseToTop(this)}),zo.select(e.parentNode).selectAll("rect.bandrect").filter(function(i){return i.color===t.color}).each(function(){T1.raiseToTop(this),HVt(zo.select(this))})}function cZ(e,t,r){var i=zo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=zo.select(e.parentNode).selectAll("rect.bandrect"),s=[];o.each(function(u){var f=XI(u);f.each(function(c){Array.prototype.push.apply(s,M5(c))})});var l={};l[n.dimensionInd]=n.categoryValue,a.emit(t,{points:s,event:r,constraints:l})}function hZ(e,t,r){var i=zo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=XI(i),s=[];o.each(function(u){Array.prototype.push.apply(s,M5(u))});var l={};l[n.dimensionInd]=n.categoryValue,i.rawColor!==void 0&&(l.color=i.rawColor),a.emit(t,{points:s,event:r,constraints:l})}function v9e(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=zo.select(r.parentNode).select("rect.catrect"),o=a.node().getBoundingClientRect(),s=a.datum(),l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=o.top+o.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=o.left,v="left"):(h=o.left+o.width,v="right");var p=s.model.count,_=s.model.categoryLabel,T=p/s.parcatsViewModel.model.count,g={countLabel:p,categoryLabel:_,probabilityLabel:T.toFixed(3)},A=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&A.push(["Count:",g.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&A.push(["P("+g.categoryLabel+"):",g.probabilityLabel].join(" "));var b=A.join("<br>");return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:b,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:g,eventData:[{data:f._input,fullData:f,count:p,category:_,probability:T}]}}function WVt(e,t,r){var i=[];return zo.select(r.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var n=this;i.push(v9e(e,t,n))}),i}function XVt(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=r.getBoundingClientRect(),o=zo.select(r).datum(),s=o.categoryViewModel,l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=a.y+a.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=a.left,v="left"):(h=a.left+a.width,v="right");var p=s.model.categoryLabel,_=o.parcatsViewModel.model.count,T=0;o.categoryViewModel.bands.forEach(function(C){C.color===o.color&&(T+=C.count)});var g=s.model.count,A=0;l.pathSelection.each(function(C){C.model.color===o.color&&(A+=C.model.count)});var b=T/_,w=T/A,k=T/g,x={countLabel:_,categoryLabel:p,probabilityLabel:b.toFixed(3)},E=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&E.push(["Count:",x.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(E.push("P(color \u2229 "+p+"): "+x.probabilityLabel),E.push("P("+p+" | color): "+w.toFixed(3)),E.push("P(color | "+p+"): "+k.toFixed(3)));var M=E.join("<br>"),d=aZ.mostReadable(o.color,["black","white"]);return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:M,color:o.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:d,fontSize:10,idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:x,eventData:[{data:f._input,fullData:f,category:p,count:_,probability:b,categorycount:g,colorcount:A,bandcolorcount:T}]}}function ZVt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=zo.mouse(this)[1];if(t<-1)return;var r=e.parcatsViewModel.graphDiv,i=r._fullLayout,n=i._paperdiv.node().getBoundingClientRect(),a=e.parcatsViewModel.hoveron,o=this;if(a==="color"?(YVt(o),hZ(o,"plotly_hover",zo.event)):(GVt(o),cZ(o,"plotly_hover",zo.event)),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var s;a==="category"?s=v9e(r,n,o):a==="color"?s=XVt(r,n,o):a==="dimension"&&(s=WVt(r,n,o)),s&&A5.loneHover(s,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r})}}}function jVt(e){var t=e.parcatsViewModel;if(!t.dragDimension&&(lZ(t.pathSelection),h9e(t.dimensionSelection.selectAll("g.category")),fZ(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),A5.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(oZ),t.hoverinfoItems.indexOf("skip")===-1)){var r=e.parcatsViewModel.hoveron,i=this;r==="color"?hZ(i,"plotly_unhover",zo.event):cZ(i,"plotly_unhover",zo.event)}}function KVt(e){e.parcatsViewModel.arrangement!=="fixed"&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(t){return t.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,zo.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var r=zo.mouse(this)[0],i=zo.mouse(this)[1];-2<=r&&r<=t.width+2&&-2<=i&&i<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(n){return n.displayInd}),t.model.dragY=t.y,T1.raiseToTop(this.parentNode),zo.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<i&&i<=n.y+n.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,A5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function JVt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&(e.dragHasMoved=!0,e.dragDimensionDisplayInd!==null)){var t=e.dragDimensionDisplayInd,r=t-1,i=t+1,n=e.parcatsViewModel.dimensions[t];if(e.dragCategoryDisplayInd!==null){var a=n.categories[e.dragCategoryDisplayInd];a.model.dragY+=zo.event.dy;var o=a.model.dragY,s=a.model.displayInd,l=n.categories,u=l[s-1],f=l[s+1];u!==void 0&&o<u.y+u.height/2&&(a.model.displayInd=u.model.displayInd,u.model.displayInd=s),f!==void 0&&o+a.height>f.y+f.height/2&&(a.model.displayInd=f.model.displayInd,f.model.displayInd=s),e.dragCategoryDisplayInd=a.model.displayInd}if(e.dragCategoryDisplayInd===null||e.parcatsViewModel.arrangement==="freeform"){n.model.dragX=zo.event.x;var c=e.parcatsViewModel.dimensions[r],h=e.parcatsViewModel.dimensions[i];c!==void 0&&n.model.dragX<c.x+c.width&&(n.model.displayInd=c.model.displayInd,c.model.displayInd=t),h!==void 0&&n.model.dragX+n.width>h.x&&(n.model.displayInd=h.model.displayInd,h.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=n.model.displayInd}dZ(e.parcatsViewModel),vZ(e.parcatsViewModel),g9e(e.parcatsViewModel),p9e(e.parcatsViewModel)}}function QVt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&e.dragDimensionDisplayInd!==null){zo.select(this).selectAll("text").attr("font-weight","normal");var t={},r=d9e(e.parcatsViewModel),i=e.parcatsViewModel.model.dimensions.map(function(h){return h.displayInd}),n=e.initialDragDimensionDisplayInds.some(function(h,v){return h!==i[v]});n&&i.forEach(function(h,v){var p=e.parcatsViewModel.model.dimensions[v].containerInd;t["dimensions["+p+"].displayindex"]=h});var a=!1;if(e.dragCategoryDisplayInd!==null){var o=e.model.categories.map(function(h){return h.displayInd});if(a=e.initialDragCategoryDisplayInds.some(function(h,v){return h!==o[v]}),a){var s=e.model.categories.slice().sort(function(h,v){return h.displayInd-v.displayInd}),l=s.map(function(h){return h.categoryValue}),u=s.map(function(h){return h.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[l],t["dimensions["+e.model.containerInd+"].ticktext"]=[u],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!e.dragHasMoved&&e.potentialClickBand&&(e.parcatsViewModel.hoveron==="color"?hZ(e.potentialClickBand,"plotly_click",zo.event.sourceEvent):cZ(e.potentialClickBand,"plotly_click",zo.event.sourceEvent)),e.model.dragX=null,e.dragCategoryDisplayInd!==null){var f=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];f.model.dragY=null,e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,dZ(e.parcatsViewModel),vZ(e.parcatsViewModel);var c=zo.transition().duration(300).ease("cubic-in-out");c.each(function(){g9e(e.parcatsViewModel,!0),p9e(e.parcatsViewModel,!0)}).each("end",function(){(n||a)&&zVt.restyle(e.parcatsViewModel.graphDiv,t,[r])})}}function d9e(e){for(var t,r=e.graphDiv._fullData,i=0;i<r.length;i++)if(e.key===r[i].uid){t=i;break}return t}function p9e(e,t){t===void 0&&(t=!1);function r(i){return t?i.transition():i}e.pathSelection.data(function(i){return i.paths},Ay),r(e.pathSelection).attr("d",function(i){return i.svgD})}function g9e(e,t){t===void 0&&(t=!1);function r(l){return t?l.transition():l}e.dimensionSelection.data(function(l){return l.dimensions},Ay);var i=e.dimensionSelection.selectAll("g.category").data(function(l){return l.categories},Ay);r(e.dimensionSelection).attr("transform",function(l){return w5(l.x,0)}),r(i).attr("transform",function(l){return w5(0,l.y)});var n=i.select(".dimlabel");n.text(function(l,u){return u===0?l.parcatsViewModel.model.dimensions[l.model.dimensionInd].dimensionLabel:null});var a=i.select(".catlabel");a.attr("text-anchor",function(l){return T5(l)?"start":"end"}).attr("x",function(l){return T5(l)?l.width+5:-5}).each(function(l){var u,f;T5(l)?(u=l.width+5,f="start"):(u=-5,f="end"),zo.select(this).selectAll("tspan").attr("x",u).attr("text-anchor",f)});var o=i.selectAll("rect.bandrect").data(function(l){return l.bands},Ay),s=o.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(l){return l.color}).attr("fill-opacity",0);o.attr("fill",function(l){return l.color}).attr("width",function(l){return l.width}).attr("height",function(l){return l.height}).attr("y",function(l){return l.y}),fZ(s),o.each(function(){T1.raiseToTop(this)}),o.exit().remove()}function $Vt(e,t,r){var i=r[0],n=t.margin||{l:80,r:80,t:100,b:80},a=i.trace,o=a.domain,s=t.width,l=t.height,u=Math.floor(s*(o.x[1]-o.x[0])),f=Math.floor(l*(o.y[1]-o.y[0])),c=o.x[0]*s+n.l,h=t.height-o.y[1]*t.height+n.t,v=a.line.shape,p;a.hoverinfo==="all"?p=["count","probability"]:p=(a.hoverinfo||"").split("+");var _={trace:a,key:a.uid,model:i,x:c,y:h,width:u,height:f,hoveron:a.hoveron,hoverinfoItems:p,arrangement:a.arrangement,bundlecolors:a.bundlecolors,sortpaths:a.sortpaths,labelfont:a.labelfont,categorylabelfont:a.tickfont,pathShape:v,dragDimension:null,margin:n,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return i.dimensions&&(dZ(_),vZ(_)),_}function c9e(e,t,r,i,n){var a=[],o=[],s,l;for(l=0;l<r.length-1;l++)s=qVt(r[l]+e[l],e[l+1]),a.push(s(n)),o.push(s(1-n));var u="M "+e[0]+","+t[0];for(u+="l"+r[0]+",0 ",l=1;l<r.length;l++)u+="C"+a[l-1]+","+t[l-1]+" "+o[l-1]+","+t[l]+" "+e[l]+","+t[l],u+="l"+r[l]+",0 ";for(u+="l0,"+i+" ",u+="l -"+r[r.length-1]+",0 ",l=r.length-2;l>=0;l--)u+="C"+o[l]+","+(t[l+1]+i)+" "+a[l]+","+(t[l]+i)+" "+(e[l]+r[l])+","+(t[l]+i),u+="l-"+r[l]+",0 ";return u+="Z",u}function vZ(e){var t=e.dimensions,r=e.model,i=t.map(function(D){return D.categories.map(function(z){return z.y})}),n=e.model.dimensions.map(function(D){return D.categories.map(function(z){return z.displayInd})}),a=e.model.dimensions.map(function(D){return D.displayInd}),o=e.dimensions.map(function(D){return D.model.dimensionInd}),s=t.map(function(D){return D.x}),l=t.map(function(D){return D.width}),u=[];for(var f in r.paths)r.paths.hasOwnProperty(f)&&u.push(r.paths[f]);function c(D){var z=D.categoryInds.map(function(V,B){return n[B][V]}),O=o.map(function(V){return z[V]});return O}u.sort(function(D,z){var O=c(D),V=c(z);return e.sortpaths==="backward"&&(O.reverse(),V.reverse()),O.push(D.valueInds[0]),V.push(z.valueInds[0]),e.bundlecolors&&(O.unshift(D.rawColor),V.unshift(z.rawColor)),O<V?-1:O>V?1:0});for(var h=new Array(u.length),v=t[0].model.count,p=t[0].categories.map(function(D){return D.height}).reduce(function(D,z){return D+z}),_=0;_<u.length;_++){var T=u[_],g;v>0?g=p*(T.count/v):g=0;for(var A=new Array(i.length),b=0;b<T.categoryInds.length;b++){var w=T.categoryInds[b],k=n[b][w],x=a[b];A[x]=i[x][k],i[x][k]+=g;var E=e.dimensions[x].categories[k],M=E.bands.length,d=E.bands[M-1];if(d===void 0||T.rawColor!==d.rawColor){var C=d===void 0?0:d.y+d.height;E.bands.push({key:C,color:T.color,rawColor:T.rawColor,height:g,width:E.width,count:T.count,y:C,categoryViewModel:E,parcatsViewModel:e})}else{var S=E.bands[M-1];S.height+=g,S.count+=T.count}}var P;e.pathShape==="hspline"?P=c9e(s,A,l,g,.5):P=c9e(s,A,l,g,0),h[_]={key:T.valueInds[0],model:T,height:g,leftXs:s,topYs:A,dimWidths:l,svgD:P,parcatsViewModel:e}}e.paths=h}function dZ(e){var t=e.model.dimensions.map(function(o){return{displayInd:o.displayInd,dimensionInd:o.dimensionInd}});t.sort(function(o,s){return o.displayInd-s.displayInd});var r=[];for(var i in t){var n=t[i].dimensionInd,a=e.model.dimensions[n];r.push(eHt(e,a))}e.dimensions=r}function eHt(e,t){var r=40,i=16,n=e.model.dimensions.length,a=t.displayInd,o,s,l;n>1?o=(e.width-2*r-i)/(n-1):o=0,s=r,l=s+o*a;var u=[],f=e.model.maxCats,c=t.categories.length,h=8,v=t.count,p=e.height-h*(f-1),_,T,g,A,b,w=(f-c)*h/2,k=t.categories.map(function(x){return{displayInd:x.displayInd,categoryInd:x.categoryInd}});for(k.sort(function(x,E){return x.displayInd-E.displayInd}),b=0;b<c;b++)A=k[b].categoryInd,T=t.categories[A],v>0?_=T.count/v*p:_=0,g={key:T.valueInds[0],model:T,width:i,height:_,y:T.dragY!==null?T.dragY:w,bands:[],parcatsViewModel:e},w=w+_+h,u.push(g);return{key:t.dimensionInd,x:t.dragX!==null?t.dragX:l,y:0,width:i,model:t,categories:u,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}});var pZ=ne((Eyr,x9e)=>{"use strict";var tHt=m9e();x9e.exports=function(t,r,i,n){var a=t._fullLayout,o=a._paper,s=a._size;tHt(t,o,r,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},i,n)}});var b9e=ne(ZI=>{"use strict";var rHt=vc().getModuleCalcData,nHt=pZ(),_9e="parcats";ZI.name=_9e;ZI.plot=function(e,t,r,i){var n=rHt(e.calcdata,_9e);if(n.length){var a=n[0];nHt(e,a,r,i)}};ZI.clean=function(e,t,r,i){var n=i._has&&i._has("parcats"),a=t._has&&t._has("parcats");n&&!a&&i._paperdiv.selectAll(".parcats").remove()}});var T9e=ne((Cyr,w9e)=>{"use strict";w9e.exports={attributes:iZ(),supplyDefaults:o9e(),calc:l9e(),plot:pZ(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b9e(),categories:["noOpacity"],meta:{}}});var M9e=ne((Lyr,A9e)=>{"use strict";A9e.exports=T9e()});var My=ne((Pyr,R9e)=>{"use strict";var iHt=rx(),S9e="1.13.4",L9e='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',E9e=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',L9e].join(" "),k9e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),aHt=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),P9e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:L9e,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:E9e,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:E9e,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:k9e,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:k9e,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:aHt,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},C9e=iHt(P9e);R9e.exports={requiredVersion:S9e,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:P9e,styleValuesNonMapbox:C9e,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+S9e+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",C9e.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var S5=ne((Ryr,q9e)=>{"use strict";var D9e=Wt(),I9e=_i().defaultLine,oHt=fl().attributes,sHt=ll(),lHt=cu().textposition,uHt=Xs().overrideAll,fHt=So().templatedArray,gZ=My(),F9e=sHt({});F9e.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var cHt=q9e.exports=uHt({_arrayAttrRegexps:[D9e.counterRegex("mapbox",".layers",!0)],domain:oHt({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:gZ.styleValuesMapbox.concat(gZ.styleValuesNonMapbox),dflt:gZ.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:fHt("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:I9e},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:I9e}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:F9e,textposition:D9e.extendFlat({},lHt,{arrayOk:!1})}})},"plot","from-root");cHt.uirevision={valType:"any",editType:"none"}});var jI=ne((Dyr,B9e)=>{"use strict";var hHt=Ba().hovertemplateAttrs,vHt=Ba().texttemplateAttrs,dHt=Y0(),E5=z3(),cT=cu(),z9e=S5(),pHt=es(),gHt=Ps(),j_=oa().extendFlat,yHt=Xs().overrideAll,mHt=S5(),O9e=E5.line,hT=E5.marker;B9e.exports=yHt({lon:E5.lon,lat:E5.lat,cluster:{enabled:{valType:"boolean"},maxzoom:j_({},mHt.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:j_({},hT.opacity,{dflt:1})},mode:j_({},cT.mode,{dflt:"markers"}),text:j_({},cT.text,{}),texttemplate:vHt({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:j_({},cT.hovertext,{}),line:{color:O9e.color,width:O9e.width},connectgaps:cT.connectgaps,marker:j_({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:hT.opacity,size:hT.size,sizeref:hT.sizeref,sizemin:hT.sizemin,sizemode:hT.sizemode},gHt("marker")),fill:E5.fill,fillcolor:dHt(),textfont:z9e.layers.symbol.textfont,textposition:z9e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:cT.selected.marker},unselected:{marker:cT.unselected.marker},hoverinfo:j_({},pHt.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:hHt()},"calc","nested")});var V9e=ne((Iyr,U9e)=>{"use strict";var k5=Wt(),yZ=js(),xHt=dp(),_Ht=s0(),bHt=l0(),wHt=X0(),N9e=jI(),THt=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];U9e.exports=function(t,r,i,n){function a(_,T){return k5.coerce(t,r,N9e,_,T)}function o(_,T){return k5.coerce2(t,r,N9e,_,T)}var s=AHt(t,r,a);if(!s){r.visible=!1;return}if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),yZ.hasMarkers(r)){xHt(t,r,i,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var l=r.marker;l.symbol!=="circle"&&(k5.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),k5.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}yZ.hasLines(r)&&(_Ht(t,r,i,n,a,{noDash:!0}),a("connectgaps"));var u=o("cluster.maxzoom"),f=o("cluster.step"),c=o("cluster.color",r.marker&&r.marker.color||i),h=o("cluster.size"),v=o("cluster.opacity"),p=u!==!1||f!==!1||c!==!1||h!==!1||v!==!1;a("cluster.enabled",p),yZ.hasText(r)&&bHt(t,r,n,a,{noSelect:!0,font:{family:THt.indexOf(n.font.family)!==-1?n.font.family:"Open Sans Regular",size:n.font.size,color:n.font.color}}),a("fill"),r.fill!=="none"&&wHt(t,r,i,a),k5.coerceSelectionMarkerOpacity(r,a)};function AHt(e,t,r){var i=r("lon")||[],n=r("lat")||[],a=Math.min(i.length,n.length);return t._length=a,a}});var mZ=ne((Fyr,G9e)=>{"use strict";var H9e=Xi();G9e.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=H9e.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=H9e.tickText(o,o.c2l(s[1]),!0).text,n}});var xZ=ne((qyr,W9e)=>{"use strict";var Y9e=Wt();W9e.exports=function(t,r){var i=t.split(" "),n=i[0],a=i[1],o=Y9e.isArrayOrTypedArray(r)?Y9e.mean(r):r,s=.5+o/100,l=1.5+o/100,u=["",""],f=[0,0];switch(n){case"top":u[0]="top",f[1]=-l;break;case"bottom":u[0]="bottom",f[1]=l;break}switch(a){case"left":u[1]="right",f[0]=-s;break;case"right":u[1]="left",f[0]=s;break}var c;return u[0]&&u[1]?c=u.join("-"):u[0]?c=u[0]:u[1]?c=u[1]:c="center",{anchor:c,offset:f}}});var J9e=ne((zyr,K9e)=>{"use strict";var Z9e=la(),Gc=Wt(),MHt=$a().BADNUM,JI=OE(),X9e=ul(),SHt=aa(),EHt=kA(),QI=js(),kHt=xZ(),CHt=td().appendArrayPointValue,LHt=Es().NEWLINES,PHt=Es().BR_TAG_ALL;K9e.exports=function(t,r){var i=r[0].trace,n=i.visible===!0&&i._length!==0,a=i.fill!=="none",o=QI.hasLines(i),s=QI.hasMarkers(i),l=QI.hasText(i),u=s&&i.marker.symbol==="circle",f=s&&i.marker.symbol!=="circle",c=i.cluster&&i.cluster.enabled,h=KI("fill"),v=KI("line"),p=KI("circle"),_=KI("symbol"),T={fill:h,line:v,circle:p,symbol:_};if(!n)return T;var g;if((a||o)&&(g=JI.calcTraceToLineCoords(r)),a&&(h.geojson=JI.makePolygon(g),h.layout.visibility="visible",Gc.extendFlat(h.paint,{"fill-color":i.fillcolor})),o&&(v.geojson=JI.makeLine(g),v.layout.visibility="visible",Gc.extendFlat(v.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),u){var A=RHt(r);p.geojson=A.geojson,p.layout.visibility="visible",c&&(p.filter=["!",["has","point_count"]],T.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":bZ(i.cluster.color,i.cluster.step),"circle-radius":bZ(i.cluster.size,i.cluster.step),"circle-opacity":bZ(i.cluster.opacity,i.cluster.step)}},T.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),Gc.extendFlat(p.paint,{"circle-color":A.mcc,"circle-radius":A.mrc,"circle-opacity":A.mo})}if(u&&c&&(p.filter=["!",["has","point_count"]]),(f||l)&&(_.geojson=DHt(r,t),Gc.extendFlat(_.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),f&&(Gc.extendFlat(_.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&Gc.extendFlat(_.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),_.layout["icon-allow-overlap"]=i.marker.allowoverlap,Gc.extendFlat(_.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),l)){var b=(i.marker||{}).size,w=kHt(i.textposition,b);Gc.extendFlat(_.layout,{"text-size":i.textfont.size,"text-anchor":w.anchor,"text-offset":w.offset,"text-font":i.textfont.family.split(", ")}),Gc.extendFlat(_.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return T};function KI(e){return{type:e,geojson:JI.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function RHt(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,n=Gc.isArrayOrTypedArray(r.color),a=Gc.isArrayOrTypedArray(r.size),o=Gc.isArrayOrTypedArray(r.opacity),s;function l(b){return t.opacity*b}function u(b){return b/2}var f;n&&(X9e.hasColorscale(t,"marker")?f=X9e.makeColorScaleFuncFromTrace(r):f=Gc.identity);var c;a&&(c=EHt(t));var h;o&&(h=function(b){var w=Z9e(b)?+Gc.constrain(b,0,1):0;return l(w)});var v=[];for(s=0;s<e.length;s++){var p=e[s],_=p.lonlat;if(!j9e(_)){var T={};f&&(T.mcc=p.mcc=f(p.mc)),c&&(T.mrc=p.mrc=c(p.ms)),h&&(T.mo=h(p.mo)),i&&(T.selected=p.selected||0),v.push({type:"Feature",id:s+1,geometry:{type:"Point",coordinates:_},properties:T})}}var g;if(i)for(g=SHt.makeSelectedPointStyleFns(t),s=0;s<v.length;s++){var A=v[s].properties;g.selectedOpacityFn&&(A.mo=l(g.selectedOpacityFn(A))),g.selectedColorFn&&(A.mcc=g.selectedColorFn(A)),g.selectedSizeFn&&(A.mrc=g.selectedSizeFn(A))}return{geojson:{type:"FeatureCollection",features:v},mcc:n||g&&g.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:a||g&&g.selectedSizeFn?{type:"identity",property:"mrc"}:u(r.size),mo:o||g&&g.selectedOpacityFn?{type:"identity",property:"mo"}:l(r.opacity)}}function DHt(e,t){for(var r=t._fullLayout,i=e[0].trace,n=i.marker||{},a=n.symbol,o=n.angle,s=a!=="circle"?_Z(a):$I,l=o!=="auto"?_Z(o,!0):$I,u=QI.hasText(i)?_Z(i.text):$I,f=[],c=0;c<e.length;c++){var h=e[c];if(!j9e(h.lonlat)){var v=i.texttemplate,p;if(v){var _=Array.isArray(v)?v[c]||"":v,T=i._module.formatLabels(h,i,r),g={};CHt(g,i,h.i);var A=i._meta||{};p=Gc.texttemplateString(_,T,r._d3locale,g,h,A)}else p=u(c);p&&(p=p.replace(LHt,"").replace(PHt,`
`)),f.push({type:"Feature",geometry:{type:"Point",coordinates:h.lonlat},properties:{symbol:s(c),angle:l(c),text:p}})}}return{type:"FeatureCollection",features:f}}function _Z(e,t){return Gc.isArrayOrTypedArray(e)?t?function(r){return Z9e(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:$I}function $I(){return""}function j9e(e){return e[0]===MHt}function bZ(e,t){var r;if(Gc.isArrayOrTypedArray(e)&&Gc.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}});var tNe=ne((Oyr,eNe)=>{"use strict";var IHt=Wt(),Q9e=J9e(),vT=My().traceLayerPrefix,Bp={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function $9e(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:vT+t+"-fill",line:vT+t+"-line",circle:vT+t+"-circle",symbol:vT+t+"-symbol",cluster:vT+t+"-cluster",clusterCount:vT+t+"-cluster-count"},this.below=null}var C5=$9e.prototype;C5.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&IHt.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[e]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};C5.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};C5.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var n=this.layerIds[e],a,o=this.subplot.getMapLayers(),s=0;s<o.length;s++)if(o[s].id===n){a=!0;break}a?(this.subplot.setOptions(n,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};C5.update=function(t){var r=t[0].trace,i=this.subplot,n=i.map,a=Q9e(i.gd,t),o=i.belowLookup["trace-"+this.uid],s=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled,u=this;function f(b){b||u.addSource("circle",a.circle,r.cluster);for(var w=Bp.cluster,k=0;k<w.length;k++){var x=w[k],E=a[x];u.addLayer(x,E,o)}}function c(b){for(var w=Bp.cluster,k=w.length-1;k>=0;k--){var x=w[k];n.removeLayer(u.layerIds[x])}b||n.removeSource(u.sourceIds.circle)}function h(b){for(var w=Bp.nonCluster,k=0;k<w.length;k++){var x=w[k],E=a[x];b||u.addSource(x,E),u.addLayer(x,E,o)}}function v(b){for(var w=Bp.nonCluster,k=w.length-1;k>=0;k--){var x=w[k];n.removeLayer(u.layerIds[x]),b||n.removeSource(u.sourceIds[x])}}function p(b){l?c(b):v(b)}function _(b){s?f(b):h(b)}function T(){for(var b=s?Bp.cluster:Bp.nonCluster,w=0;w<b.length;w++){var k=b[w],x=a[k];x&&(i.setOptions(u.layerIds[k],"setLayoutProperty",x.layout),x.layout.visibility==="visible"&&(k!=="cluster"&&u.setSourceData(k,x),i.setOptions(u.layerIds[k],"setPaintProperty",x.paint)))}}var g=this.isHidden,A=r.visible!==!0;A?g||p():g?A||_():l!==s?(p(),_()):(this.below!==o&&(p(!0),_(!0)),T()),this.clusterEnabled=s,this.isHidden=A,this.below=o,t[0].trace._glTrace=this};C5.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?Bp.cluster:Bp.nonCluster,i=r.length-1;i>=0;i--){var n=r[i];t.removeLayer(this.layerIds[n]),t.removeSource(this.sourceIds[n])}};eNe.exports=function(t,r){var i=r[0].trace,n=i.cluster&&i.cluster.enabled,a=i.visible!==!0,o=new $9e(t,i.uid,n,a),s=Q9e(t.gd,r),l=o.below=t.belowLookup["trace-"+i.uid],u,f,c;if(n)for(o.addSource("circle",s.circle,i.cluster),u=0;u<Bp.cluster.length;u++)f=Bp.cluster[u],c=s[f],o.addLayer(f,c,l);else for(u=0;u<Bp.nonCluster.length;u++)f=Bp.nonCluster[u],c=s[f],o.addSource(f,c,i.cluster),o.addLayer(f,c,l);return r[0].trace._glTrace=o,o}});var eF=ne((Byr,nNe)=>{"use strict";var FHt=Ol(),wZ=Wt(),qHt=j2(),zHt=wZ.fillText,OHt=$a().BADNUM,BHt=My().traceLayerPrefix;function NHt(e,t,r){var i=e.cd,n=i[0].trace,a=e.xa,o=e.ya,s=e.subplot,l=[],u=BHt+n.uid+"-circle",f=n.cluster&&n.cluster.enabled;if(f){var c=s.map.queryRenderedFeatures(null,{layers:[u]});l=c.map(function(M){return M.id})}var h=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),v=h*360,p=t-v;function _(M){var d=M.lonlat;if(d[0]===OHt||f&&l.indexOf(M.i+1)===-1)return 1/0;var C=wZ.modHalf(d[0],360),S=d[1],P=s.project([C,S]),D=P.x-a.c2p([p,S]),z=P.y-o.c2p([C,r]),O=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(D*D+z*z)-O,1-3/O)}if(FHt.getClosest(i,_,e),e.index!==!1){var T=i[e.index],g=T.lonlat,A=[wZ.modHalf(g[0],360)+v,g[1]],b=a.c2p(A),w=o.c2p(A),k=T.mrc||1;e.x0=b-k,e.x1=b+k,e.y0=w-k,e.y1=w+k;var x={};x[n.subplot]={_subplot:s};var E=n._module.formatLabels(T,n,x);return e.lonLabel=E.lonLabel,e.latLabel=E.latLabel,e.color=qHt(n,T),e.extraText=rNe(n,T,i[0].t.labels),e.hovertemplate=n.hovertemplate,[e]}}function rNe(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,n=i.split("+"),a=n.indexOf("all")!==-1,o=n.indexOf("lon")!==-1,s=n.indexOf("lat")!==-1,l=t.lonlat,u=[];function f(c){return c+"\xB0"}return a||o&&s?u.push("("+f(l[1])+", "+f(l[0])+")"):o?u.push(r.lon+f(l[0])):s&&u.push(r.lat+f(l[1])),(a||n.indexOf("text")!==-1)&&zHt(t,e,u),u.join("<br>")}nNe.exports={hoverPoints:NHt,getExtraText:rNe}});var aNe=ne((Nyr,iNe)=>{"use strict";iNe.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var sNe=ne((Uyr,oNe)=>{"use strict";var UHt=Wt(),VHt=js(),HHt=$a().BADNUM;oNe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l;if(!VHt.hasMarkers(s))return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var u=i[l],f=u.lonlat;if(f[0]!==HHt){var c=[UHt.modHalf(f[0],360),f[1]],h=[n.c2p(c),a.c2p(c)];r.contains(h,null,l,t)?(o.push({pointNumber:l,lon:f[0],lat:f[1]}),u.selected=1):u.selected=0}}return o}});var MZ=ne((TZ,AZ)=>{(function(e,t){typeof TZ=="object"&&typeof AZ!="undefined"?AZ.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mapboxgl=t())})(TZ,function(){"use strict";var e,t,r;function i(n,a){if(!e)e=a;else if(!t)t=a;else{var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",s={};e(s),r=a(s),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}}return i(["exports"],function(n){"use strict";function a(y,m){return m={exports:{}},y(m,m.exports),m.exports}var o="1.13.4",s=l;function l(y,m,L,q){this.cx=3*y,this.bx=3*(L-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*m,this.by=3*(q-m)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=q,this.p2x=L,this.p2y=q}l.prototype.sampleCurveX=function(y){return((this.ax*y+this.bx)*y+this.cx)*y},l.prototype.sampleCurveY=function(y){return((this.ay*y+this.by)*y+this.cy)*y},l.prototype.sampleCurveDerivativeX=function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},l.prototype.solveCurveX=function(y,m){typeof m=="undefined"&&(m=1e-6);var L,q,Y,j,$;for(Y=y,$=0;$<8;$++){if(j=this.sampleCurveX(Y)-y,Math.abs(j)<m)return Y;var pe=this.sampleCurveDerivativeX(Y);if(Math.abs(pe)<1e-6)break;Y=Y-j/pe}if(L=0,q=1,Y=y,Y<L)return L;if(Y>q)return q;for(;L<q;){if(j=this.sampleCurveX(Y),Math.abs(j-y)<m)return Y;y>j?L=Y:q=Y,Y=(q-L)*.5+L}return Y},l.prototype.solve=function(y,m){return this.sampleCurveY(this.solveCurveX(y,m))};var u=f;function f(y,m){this.x=y,this.y=m}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,m){return this.clone()._rotateAround(y,m)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var m=y.x-this.x,L=y.y-this.y;return m*m+L*L},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,m){return Math.atan2(this.x*m-this.y*y,this.x*y+this.y*m)},_matMult:function(y){var m=y[0]*this.x+y[1]*this.y,L=y[2]*this.x+y[3]*this.y;return this.x=m,this.y=L,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var m=Math.cos(y),L=Math.sin(y),q=m*this.x-L*this.y,Y=L*this.x+m*this.y;return this.x=q,this.y=Y,this},_rotateAround:function(y,m){var L=Math.cos(y),q=Math.sin(y),Y=m.x+L*(this.x-m.x)-q*(this.y-m.y),j=m.y+q*(this.x-m.x)+L*(this.y-m.y);return this.x=Y,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(y){return y instanceof f?y:Array.isArray(y)?new f(y[0],y[1]):y};var c=typeof self!="undefined"?self:{};function h(y,m){if(Array.isArray(y)){if(!Array.isArray(m)||y.length!==m.length)return!1;for(var L=0;L<y.length;L++)if(!h(y[L],m[L]))return!1;return!0}if(typeof y=="object"&&y!==null&&m!==null){if(typeof m!="object")return!1;var q=Object.keys(y);if(q.length!==Object.keys(m).length)return!1;for(var Y in y)if(!h(y[Y],m[Y]))return!1;return!0}return y===m}var v=Math.pow(2,53)-1;function p(y){if(y<=0)return 0;if(y>=1)return 1;var m=y*y,L=m*y;return 4*(y<.5?L:3*(y-m)+L-.75)}function _(y,m,L,q){var Y=new s(y,m,L,q);return function(j){return Y.solve(j)}}var T=_(.25,.1,.25,1);function g(y,m,L){return Math.min(L,Math.max(m,y))}function A(y,m,L){var q=L-m,Y=((y-m)%q+q)%q+m;return Y===m?L:Y}function b(y,m,L){if(!y.length)return L(null,[]);var q=y.length,Y=new Array(y.length),j=null;y.forEach(function($,pe){m($,function(ke,Fe){ke&&(j=ke),Y[pe]=Fe,--q===0&&L(j,Y)})})}function w(y){var m=[];for(var L in y)m.push(y[L]);return m}function k(y,m){var L=[];for(var q in y)q in m||L.push(q);return L}function x(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];for(var $ in j)y[$]=j[$]}return y}function E(y,m){for(var L={},q=0;q<m.length;q++){var Y=m[q];Y in y&&(L[Y]=y[Y])}return L}var M=1;function d(){return M++}function C(){function y(m){return m?(m^Math.random()*16>>m/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,y)}return y()}function S(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))}function P(y){return y?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(y):!1}function D(y,m){y.forEach(function(L){m[L]&&(m[L]=m[L].bind(m))})}function z(y,m){return y.indexOf(m,y.length-m.length)!==-1}function O(y,m,L){var q={};for(var Y in y)q[Y]=m.call(L||this,y[Y],Y,y);return q}function V(y,m,L){var q={};for(var Y in y)m.call(L||this,y[Y],Y,y)&&(q[Y]=y[Y]);return q}function B(y){return Array.isArray(y)?y.map(B):typeof y=="object"&&y?O(y,B):y}function F(y,m){for(var L=0;L<y.length;L++)if(m.indexOf(y[L])>=0)return!0;return!1}var N={};function Z(y){N[y]||(typeof console!="undefined"&&console.warn(y),N[y]=!0)}function J(y,m,L){return(L.y-y.y)*(m.x-y.x)>(m.y-y.y)*(L.x-y.x)}function re(y){for(var m=0,L=0,q=y.length,Y=q-1,j=void 0,$=void 0;L<q;Y=L++)j=y[L],$=y[Y],m+=($.x-j.x)*(j.y+$.y);return m}function le(y){var m=y[0],L=y[1],q=y[2];return L+=90,L*=Math.PI/180,q*=Math.PI/180,{x:m*Math.cos(L)*Math.sin(q),y:m*Math.sin(L)*Math.sin(q),z:m*Math.cos(q)}}function fe(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function K(y){var m=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,L={};if(y.replace(m,function(Y,j,$,pe){var ke=$||pe;return L[j]=ke?ke.toLowerCase():!0,""}),L["max-age"]){var q=parseInt(L["max-age"],10);isNaN(q)?delete L["max-age"]:L["max-age"]=q}return L}var X=null;function ae(y){if(X==null){var m=y.navigator?y.navigator.userAgent:null;X=!!y.safari||!!(m&&(/\b(iPad|iPhone|iPod)\b/.test(m)||m.match("Safari")&&!m.match("Chrome")))}return X}function oe(y){try{var m=c[y];return m.setItem("_mapbox_test_",1),m.removeItem("_mapbox_test_"),!0}catch(L){return!1}}function _e(y){return c.btoa(encodeURIComponent(y).replace(/%([0-9A-F]{2})/g,function(m,L){return String.fromCharCode(+("0x"+L))}))}function be(y){return decodeURIComponent(c.atob(y).split("").map(function(m){return"%"+("00"+m.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var he=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now.bind(Date),ie=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame,ye=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame,ue,Ae,Re={now:he,frame:function(m){var L=ie(m);return{cancel:function(){return ye(L)}}},getImageData:function(m,L){L===void 0&&(L=0);var q=c.document.createElement("canvas"),Y=q.getContext("2d");if(!Y)throw new Error("failed to create canvas 2d context");return q.width=m.width,q.height=m.height,Y.drawImage(m,0,0,m.width,m.height),Y.getImageData(-L,-L,m.width+2*L,m.height+2*L)},resolveURL:function(m){return ue||(ue=c.document.createElement("a")),ue.href=m,ue.href},hardwareConcurrency:c.navigator&&c.navigator.hardwareConcurrency||4,get devicePixelRatio(){return c.devicePixelRatio},get prefersReducedMotion(){return c.matchMedia?(Ae==null&&(Ae=c.matchMedia("(prefers-reduced-motion: reduce)")),Ae.matches):!1}},ze={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},et={supported:!1,testSupport:Ke},Le,Ie=!1,dt,ct=!1;c.document&&(dt=c.document.createElement("img"),dt.onload=function(){Le&&_t(Le),Le=null,ct=!0},dt.onerror=function(){Ie=!0,Le=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function Ke(y){Ie||!dt||(ct?_t(y):Le=y)}function _t(y){var m=y.createTexture();y.bindTexture(y.TEXTURE_2D,m);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,dt),y.isContextLost())return;et.supported=!0}catch(L){}y.deleteTexture(m),Ie=!0}var zt="01";function Et(){for(var y="1",m="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="",q=0;q<10;q++)L+=m[Math.floor(Math.random()*62)];var Y=12*60*60*1e3,j=[y,zt,L].join(""),$=Date.now()+Y;return{token:j,tokenExpiresAt:$}}var Se=function(m,L){this._transformRequestFn=m,this._customAccessToken=L,this._createSkuToken()};Se.prototype._createSkuToken=function(){var m=Et();this._skuToken=m.token,this._skuTokenExpiresAt=m.tokenExpiresAt},Se.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Se.prototype.transformRequest=function(m,L){return this._transformRequestFn?this._transformRequestFn(m,L)||{url:m}:{url:m}},Se.prototype.normalizeStyleURL=function(m,L){if(!je(m))return m;var q=ft(m);return q.path="/styles/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||L)},Se.prototype.normalizeGlyphsURL=function(m,L){if(!je(m))return m;var q=ft(m);return q.path="/fonts/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||L)},Se.prototype.normalizeSourceURL=function(m,L){if(!je(m))return m;var q=ft(m);return q.path="/v4/"+q.authority+".json",q.params.push("secure"),this._makeAPIURL(q,this._customAccessToken||L)},Se.prototype.normalizeSpriteURL=function(m,L,q,Y){var j=ft(m);return je(m)?(j.path="/styles/v1"+j.path+"/sprite"+L+q,this._makeAPIURL(j,this._customAccessToken||Y)):(j.path+=""+L+q,gt(j))},Se.prototype.normalizeTileURL=function(m,L){if(this._isSkuTokenExpired()&&this._createSkuToken(),m&&!je(m))return m;var q=ft(m),Y=/(\.(png|jpg)\d*)(?=$)/,j=/^.+\/v4\//,$=Re.devicePixelRatio>=2||L===512?"@2x":"",pe=et.supported?".webp":"$1";q.path=q.path.replace(Y,""+$+pe),q.path=q.path.replace(j,"/"),q.path="/v4"+q.path;var ke=this._customAccessToken||rt(q.params)||ze.ACCESS_TOKEN;return ze.REQUIRE_ACCESS_TOKEN&&ke&&this._skuToken&&q.params.push("sku="+this._skuToken),this._makeAPIURL(q,ke)},Se.prototype.canonicalizeTileURL=function(m,L){var q="/v4/",Y=/\.[\w]+$/,j=ft(m);if(!j.path.match(/(^\/v4\/)/)||!j.path.match(Y))return m;var $="mapbox://tiles/";$+=j.path.replace(q,"");var pe=j.params;return L&&(pe=pe.filter(function(ke){return!ke.match(/^access_token=/)})),pe.length&&($+="?"+pe.join("&")),$},Se.prototype.canonicalizeTileset=function(m,L){for(var q=L?je(L):!1,Y=[],j=0,$=m.tiles||[];j<$.length;j+=1){var pe=$[j];nt(pe)?Y.push(this.canonicalizeTileURL(pe,q)):Y.push(pe)}return Y},Se.prototype._makeAPIURL=function(m,L){var q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",Y=ft(ze.API_URL);if(m.protocol=Y.protocol,m.authority=Y.authority,m.protocol==="http"){var j=m.params.indexOf("secure");j>=0&&m.params.splice(j,1)}if(Y.path!=="/"&&(m.path=""+Y.path+m.path),!ze.REQUIRE_ACCESS_TOKEN)return gt(m);if(L=L||ze.ACCESS_TOKEN,!L)throw new Error("An API access token is required to use Mapbox GL. "+q);if(L[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+q);return m.params=m.params.filter(function($){return $.indexOf("access_token")===-1}),m.params.push("access_token="+L),gt(m)};function je(y){return y.indexOf("mapbox:")===0}var ht=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function nt(y){return ht.test(y)}function lt(y){return y.indexOf("sku=")>0&&nt(y)}function rt(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m],Y=q.match(/^access_token=(.*)$/);if(Y)return Y[1]}return null}var Xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ft(y){var m=y.match(Xe);if(!m)throw new Error("Unable to parse URL object");return{protocol:m[1],authority:m[2],path:m[3]||"/",params:m[4]?m[4].split("&"):[]}}function gt(y){var m=y.params.length?"?"+y.params.join("&"):"";return y.protocol+"://"+y.authority+y.path+m}var Qt="mapbox.eventData";function Jt(y){if(!y)return null;var m=y.split(".");if(!m||m.length!==3)return null;try{var L=JSON.parse(be(m[1]));return L}catch(q){return null}}var fr=function(m){this.type=m,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};fr.prototype.getStorageKey=function(m){var L=Jt(ze.ACCESS_TOKEN),q="";return L&&L.u?q=_e(L.u):q=ze.ACCESS_TOKEN||"",m?Qt+"."+m+":"+q:Qt+":"+q},fr.prototype.fetchEventData=function(){var m=oe("localStorage"),L=this.getStorageKey(),q=this.getStorageKey("uuid");if(m)try{var Y=c.localStorage.getItem(L);Y&&(this.eventData=JSON.parse(Y));var j=c.localStorage.getItem(q);j&&(this.anonId=j)}catch($){Z("Unable to read from LocalStorage")}},fr.prototype.saveEventData=function(){var m=oe("localStorage"),L=this.getStorageKey(),q=this.getStorageKey("uuid");if(m)try{c.localStorage.setItem(q,this.anonId),Object.keys(this.eventData).length>=1&&c.localStorage.setItem(L,JSON.stringify(this.eventData))}catch(Y){Z("Unable to write to LocalStorage")}},fr.prototype.processRequests=function(m){},fr.prototype.postEvent=function(m,L,q,Y){var j=this;if(ze.EVENTS_URL){var $=ft(ze.EVENTS_URL);$.params.push("access_token="+(Y||ze.ACCESS_TOKEN||""));var pe={event:this.type,created:new Date(m).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:o,skuId:zt,userId:this.anonId},ke=L?x(pe,L):pe,Fe={url:gt($),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ke])};this.pendingRequest=hr(Fe,function(Ue){j.pendingRequest=null,q(Ue),j.saveEventData(),j.processRequests(Y)})}},fr.prototype.queueRequest=function(m,L){this.queue.push(m),this.processRequests(L)};var nr=function(y){function m(){y.call(this,"map.load"),this.success={},this.skuToken=""}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postMapLoadEvent=function(q,Y,j,$){this.skuToken=j,(ze.EVENTS_URL&&$||ze.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(pe){return je(pe)||nt(pe)}))&&this.queueRequest({id:Y,timestamp:Date.now()},$)},m.prototype.processRequests=function(q){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){var j=this.queue.shift(),$=j.id,pe=j.timestamp;$&&this.success[$]||(this.anonId||this.fetchEventData(),P(this.anonId)||(this.anonId=C()),this.postEvent(pe,{skuToken:this.skuToken},function(ke){ke||$&&(Y.success[$]=!0)},q))}},m}(fr),ur=function(y){function m(L){y.call(this,"appUserTurnstile"),this._customAccessToken=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postTurnstileEvent=function(q,Y){ze.EVENTS_URL&&ze.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(j){return je(j)||nt(j)})&&this.queueRequest(Date.now(),Y)},m.prototype.processRequests=function(q){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var j=Jt(ze.ACCESS_TOKEN),$=j?j.u:ze.ACCESS_TOKEN,pe=$!==this.eventData.tokenU;P(this.anonId)||(this.anonId=C(),pe=!0);var ke=this.queue.shift();if(this.eventData.lastSuccess){var Fe=new Date(this.eventData.lastSuccess),Ue=new Date(ke),ut=(ke-this.eventData.lastSuccess)/(24*60*60*1e3);pe=pe||ut>=1||ut<-1||Fe.getDate()!==Ue.getDate()}else pe=!0;if(!pe)return this.processRequests();this.postEvent(ke,{"enabled.telemetry":!1},function(St){St||(Y.eventData.lastSuccess=ke,Y.eventData.tokenU=$)},q)}},m}(fr),qt=new ur,xt=qt.postTurnstileEvent.bind(qt),At=new nr,Je=At.postMapLoadEvent.bind(At),xe="mapbox-tiles",ce=500,ge=50,qe=1e3*60*7,yt;function Vt(){c.caches&&!yt&&(yt=c.caches.open(xe))}var Ut;function br(y,m){if(Ut===void 0)try{new Response(new ReadableStream),Ut=!0}catch(L){Ut=!1}Ut?m(y.body):y.blob().then(m)}function xr(y,m,L){if(Vt(),!!yt){var q={status:m.status,statusText:m.statusText,headers:new c.Headers};m.headers.forEach(function($,pe){return q.headers.set(pe,$)});var Y=K(m.headers.get("Cache-Control")||"");if(!Y["no-store"]){Y["max-age"]&&q.headers.set("Expires",new Date(L+Y["max-age"]*1e3).toUTCString());var j=new Date(q.headers.get("Expires")).getTime()-L;j<qe||br(m,function($){var pe=new c.Response($,q);Vt(),yt&&yt.then(function(ke){return ke.put(Or(y.url),pe)}).catch(function(ke){return Z(ke.message)})})}}}function Or(y){var m=y.indexOf("?");return m<0?y:y.slice(0,m)}function Hr(y,m){if(Vt(),!yt)return m(null);var L=Or(y.url);yt.then(function(q){q.match(L).then(function(Y){var j=gr(Y);q.delete(L),j&&q.put(L,Y.clone()),m(null,Y,j)}).catch(m)}).catch(m)}function gr(y){if(!y)return!1;var m=new Date(y.headers.get("Expires")||0),L=K(y.headers.get("Cache-Control")||"");return m>Date.now()&&!L["no-cache"]}var Ur=1/0;function _n(y){Ur++,Ur>ge&&(y.getActor().send("enforceCacheSizeLimit",ce),Ur=0)}function si(y){Vt(),yt&&yt.then(function(m){m.keys().then(function(L){for(var q=0;q<L.length-y;q++)m.delete(L[q])})})}function xn(y){var m=c.caches.delete(xe);y&&m.catch(y).then(function(){return y()})}function ci(y,m){ce=y,ge=m}var Wi;function oi(){return Wi==null&&(Wi=c.OffscreenCanvas&&new c.OffscreenCanvas(1,1).getContext("2d")&&typeof c.createImageBitmap=="function"),Wi}var Zi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Zi);var Ei=function(y){function m(L,q,Y){q===401&&nt(Y)&&(L+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),y.call(this,L),this.status=q,this.url=Y,this.name=this.constructor.name,this.message=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},m}(Error),at=fe()?function(){return self.worker&&self.worker.referrer}:function(){return(c.location.protocol==="blob:"?c.parent:c).location.href},Ne=function(y){return/^file:/.test(y)||/^file:/.test(at())&&!/^\w+:/.test(y)};function st(y,m){var L=new c.AbortController,q=new c.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:at(),signal:L.signal}),Y=!1,j=!1,$=lt(q.url);y.type==="json"&&q.headers.set("Accept","application/json");var pe=function(Fe,Ue,ut){if(!j){if(Fe&&Fe.message!=="SecurityError"&&Z(Fe),Ue&&ut)return ke(Ue);var St=Date.now();c.fetch(q).then(function(bt){if(bt.ok){var Yt=$?bt.clone():null;return ke(bt,Yt,St)}else return m(new Ei(bt.statusText,bt.status,y.url))}).catch(function(bt){bt.code!==20&&m(new Error(bt.message))})}},ke=function(Fe,Ue,ut){(y.type==="arrayBuffer"?Fe.arrayBuffer():y.type==="json"?Fe.json():Fe.text()).then(function(St){j||(Ue&&ut&&xr(q,Ue,ut),Y=!0,m(null,St,Fe.headers.get("Cache-Control"),Fe.headers.get("Expires")))}).catch(function(St){j||m(new Error(St.message))})};return $?Hr(q,pe):pe(null,null),{cancel:function(){j=!0,Y||L.abort()}}}function mt(y,m){var L=new c.XMLHttpRequest;L.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(L.responseType="arraybuffer");for(var q in y.headers)L.setRequestHeader(q,y.headers[q]);return y.type==="json"&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials=y.credentials==="include",L.onerror=function(){m(new Error(L.statusText))},L.onload=function(){if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){var Y=L.response;if(y.type==="json")try{Y=JSON.parse(L.response)}catch(j){return m(j)}m(null,Y,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else m(new Ei(L.statusText,L.status,y.url))},L.send(y.body),{cancel:function(){return L.abort()}}}var Ot=function(y,m){if(!Ne(y.url)){if(c.fetch&&c.Request&&c.AbortController&&c.Request.prototype.hasOwnProperty("signal"))return st(y,m);if(fe()&&self.worker&&self.worker.actor){var L=!0;return self.worker.actor.send("getResource",y,m,void 0,L)}}return mt(y,m)},tr=function(y,m){return Ot(x(y,{type:"json"}),m)},pr=function(y,m){return Ot(x(y,{type:"arrayBuffer"}),m)},hr=function(y,m){return Ot(x(y,{method:"POST"}),m)};function Rr(y){var m=c.document.createElement("a");return m.href=y,m.protocol===c.document.location.protocol&&m.host===c.document.location.host}var Gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Yr(y,m,L,q){var Y=new c.Image,j=c.URL;Y.onload=function(){m(null,Y),j.revokeObjectURL(Y.src),Y.onload=null,c.requestAnimationFrame(function(){Y.src=Gr})},Y.onerror=function(){return m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var $=new c.Blob([new Uint8Array(y)],{type:"image/png"});Y.cacheControl=L,Y.expires=q,Y.src=y.byteLength?j.createObjectURL($):Gr}function vn(y,m){var L=new c.Blob([new Uint8Array(y)],{type:"image/png"});c.createImageBitmap(L).then(function(q){m(null,q)}).catch(function(q){m(new Error("Could not load image because of "+q.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Wr,qn,vi=function(){Wr=[],qn=0};vi();var Mi=function(y,m){if(et.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),qn>=ze.MAX_PARALLEL_IMAGE_REQUESTS){var L={requestParameters:y,callback:m,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wr.push(L),L}qn++;var q=!1,Y=function(){if(!q)for(q=!0,qn--;Wr.length&&qn<ze.MAX_PARALLEL_IMAGE_REQUESTS;){var $=Wr.shift(),pe=$.requestParameters,ke=$.callback,Fe=$.cancelled;Fe||($.cancel=Mi(pe,ke).cancel)}},j=pr(y,function($,pe,ke,Fe){Y(),$?m($):pe&&(oi()?vn(pe,m):Yr(pe,m,ke,Fe))});return{cancel:function(){j.cancel(),Y()}}},Ui=function(y,m){var L=c.document.createElement("video");L.muted=!0,L.onloadstart=function(){m(null,L)};for(var q=0;q<y.length;q++){var Y=c.document.createElement("source");Rr(y[q])||(L.crossOrigin="Anonymous"),Y.src=y[q],L.appendChild(Y)}return{cancel:function(){}}};function ji(y,m,L){var q=L[y]&&L[y].indexOf(m)!==-1;q||(L[y]=L[y]||[],L[y].push(m))}function ea(y,m,L){if(L&&L[y]){var q=L[y].indexOf(m);q!==-1&&L[y].splice(q,1)}}var Ra=function(m,L){L===void 0&&(L={}),x(this,L),this.type=m},Li=function(y){function m(L,q){q===void 0&&(q={}),y.call(this,"error",x({error:L},q))}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Ra),Yn=function(){};Yn.prototype.on=function(m,L){return this._listeners=this._listeners||{},ji(m,L,this._listeners),this},Yn.prototype.off=function(m,L){return ea(m,L,this._listeners),ea(m,L,this._oneTimeListeners),this},Yn.prototype.once=function(m,L){return this._oneTimeListeners=this._oneTimeListeners||{},ji(m,L,this._oneTimeListeners),this},Yn.prototype.fire=function(m,L){typeof m=="string"&&(m=new Ra(m,L||{}));var q=m.type;if(this.listens(q)){m.target=this;for(var Y=this._listeners&&this._listeners[q]?this._listeners[q].slice():[],j=0,$=Y;j<$.length;j+=1){var pe=$[j];pe.call(this,m)}for(var ke=this._oneTimeListeners&&this._oneTimeListeners[q]?this._oneTimeListeners[q].slice():[],Fe=0,Ue=ke;Fe<Ue.length;Fe+=1){var ut=Ue[Fe];ea(q,ut,this._oneTimeListeners),ut.call(this,m)}var St=this._eventedParent;St&&(x(m,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),St.fire(m))}else m instanceof Li&&console.error(m.error);return this},Yn.prototype.listens=function(m){return this._listeners&&this._listeners[m]&&this._listeners[m].length>0||this._oneTimeListeners&&this._oneTimeListeners[m]&&this._oneTimeListeners[m].length>0||this._eventedParent&&this._eventedParent.listens(m)},Yn.prototype.setEventedParent=function(m,L){return this._eventedParent=m,this._eventedParentData=L,this};var zi=8,ya={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},zn={"*":{type:"source"}},Ze=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Bt={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},sr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_r={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Jr={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},on={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},pn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Cr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},cn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],gi={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hn={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qi={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},eo={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ma={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},so={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ja={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xo={type:"array",value:"*"},Uo={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ms={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},as={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},il={type:"array",value:"*",minimum:1},oo={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},cs=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Eo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hs={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Jo={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Qo={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Oa={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},co={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Al={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$l={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nu={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},os={"*":{type:"string"}},hn={$version:zi,$root:ya,sources:zn,source:Ze,source_vector:Bt,source_raster:sr,source_raster_dem:_r,source_geojson:Jr,source_video:on,source_image:pn,layer:Cr,layout:cn,layout_background:gi,layout_fill:Hn,layout_circle:qi,layout_heatmap:fa,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:eo,layout_symbol:ma,layout_raster:so,layout_hillshade:ja,filter:Xo,filter_operator:Uo,geometry_type:ms,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:as,expression:il,light:oo,paint:cs,paint_fill:Eo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:hs,paint_circle:Jo,paint_heatmap:Qo,paint_symbol:Oa,paint_raster:co,paint_hillshade:Al,paint_background:$l,transition:Nu,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:os},bi=function(m,L,q,Y){this.message=(m?m+": ":"")+q,Y&&(this.identifier=Y),L!=null&&L.__line__&&(this.line=L.__line__)};function ac(y){var m=y.key,L=y.value;return L?[new bi(m,L,"constants have been deprecated as of v8")]:[]}function Pl(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];for(var $ in j)y[$]=j[$]}return y}function ss(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function vl(y){if(Array.isArray(y))return y.map(vl);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){var m={};for(var L in y)m[L]=vl(y[L]);return m}return ss(y)}var $o=function(y){function m(L,q){y.call(this,q),this.message=q,this.key=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Error),Rl=function(m,L){L===void 0&&(L=[]),this.parent=m,this.bindings={};for(var q=0,Y=L;q<Y.length;q+=1){var j=Y[q],$=j[0],pe=j[1];this.bindings[$]=pe}};Rl.prototype.concat=function(m){return new Rl(this,m)},Rl.prototype.get=function(m){if(this.bindings[m])return this.bindings[m];if(this.parent)return this.parent.get(m);throw new Error(m+" not found in scope.")},Rl.prototype.has=function(m){return this.bindings[m]?!0:this.parent?this.parent.has(m):!1};var xu={kind:"null"},ni={kind:"number"},Aa={kind:"string"},Ca={kind:"boolean"},Fs={kind:"color"},Pf={kind:"object"},Ma={kind:"value"},Rf={kind:"error"},Wc={kind:"collator"},dl={kind:"formatted"},ff={kind:"resolvedImage"};function $s(y,m){return{kind:"array",itemType:y,N:m}}function ko(y){if(y.kind==="array"){var m=ko(y.itemType);return typeof y.N=="number"?"array<"+m+", "+y.N+">":y.itemType.kind==="value"?"array":"array<"+m+">"}else return y.kind}var eu=[xu,ni,Aa,Ca,Fs,dl,Pf,$s(Ma),ff];function _u(y,m){if(m.kind==="error")return null;if(y.kind==="array"){if(m.kind==="array"&&(m.N===0&&m.itemType.kind==="value"||!_u(y.itemType,m.itemType))&&(typeof y.N!="number"||y.N===m.N))return null}else{if(y.kind===m.kind)return null;if(y.kind==="value")for(var L=0,q=eu;L<q.length;L+=1){var Y=q[L];if(!_u(Y,m))return null}}return"Expected "+ko(y)+" but found "+ko(m)+" instead."}function Ah(y,m){return m.some(function(L){return L.kind===y.kind})}function Uu(y,m){return m.some(function(L){return L==="null"?y===null:L==="array"?Array.isArray(y):L==="object"?y&&!Array.isArray(y)&&typeof y=="object":L===typeof y})}var nv=a(function(y,m){var L={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function q(Fe){return Fe=Math.round(Fe),Fe<0?0:Fe>255?255:Fe}function Y(Fe){return Fe<0?0:Fe>1?1:Fe}function j(Fe){return Fe[Fe.length-1]==="%"?q(parseFloat(Fe)/100*255):q(parseInt(Fe))}function $(Fe){return Fe[Fe.length-1]==="%"?Y(parseFloat(Fe)/100):Y(parseFloat(Fe))}function pe(Fe,Ue,ut){return ut<0?ut+=1:ut>1&&(ut-=1),ut*6<1?Fe+(Ue-Fe)*ut*6:ut*2<1?Ue:ut*3<2?Fe+(Ue-Fe)*(2/3-ut)*6:Fe}function ke(Fe){var Ue=Fe.replace(/ /g,"").toLowerCase();if(Ue in L)return L[Ue].slice();if(Ue[0]==="#"){if(Ue.length===4){var ut=parseInt(Ue.substr(1),16);return ut>=0&&ut<=4095?[(ut&3840)>>4|(ut&3840)>>8,ut&240|(ut&240)>>4,ut&15|(ut&15)<<4,1]:null}else if(Ue.length===7){var ut=parseInt(Ue.substr(1),16);return ut>=0&&ut<=16777215?[(ut&16711680)>>16,(ut&65280)>>8,ut&255,1]:null}return null}var St=Ue.indexOf("("),bt=Ue.indexOf(")");if(St!==-1&&bt+1===Ue.length){var Yt=Ue.substr(0,St),cr=Ue.substr(St+1,bt-(St+1)).split(","),Ir=1;switch(Yt){case"rgba":if(cr.length!==4)return null;Ir=$(cr.pop());case"rgb":return cr.length!==3?null:[j(cr[0]),j(cr[1]),j(cr[2]),Ir];case"hsla":if(cr.length!==4)return null;Ir=$(cr.pop());case"hsl":if(cr.length!==3)return null;var Ar=(parseFloat(cr[0])%360+360)%360/360,en=$(cr[1]),Nr=$(cr[2]),Qr=Nr<=.5?Nr*(en+1):Nr+en-Nr*en,an=Nr*2-Qr;return[q(pe(an,Qr,Ar+1/3)*255),q(pe(an,Qr,Ar)*255),q(pe(an,Qr,Ar-1/3)*255),Ir];default:return null}}return null}try{m.parseCSSColor=ke}catch(Fe){}}),Ac=nv.parseCSSColor,lo=function(m,L,q,Y){Y===void 0&&(Y=1),this.r=m,this.g=L,this.b=q,this.a=Y};lo.parse=function(m){if(m){if(m instanceof lo)return m;if(typeof m=="string"){var L=Ac(m);if(L)return new lo(L[0]/255*L[3],L[1]/255*L[3],L[2]/255*L[3],L[3])}}},lo.prototype.toString=function(){var m=this.toArray(),L=m[0],q=m[1],Y=m[2],j=m[3];return"rgba("+Math.round(L)+","+Math.round(q)+","+Math.round(Y)+","+j+")"},lo.prototype.toArray=function(){var m=this,L=m.r,q=m.g,Y=m.b,j=m.a;return j===0?[0,0,0,0]:[L*255/j,q*255/j,Y*255/j,j]},lo.black=new lo(0,0,0,1),lo.white=new lo(1,1,1,1),lo.transparent=new lo(0,0,0,0),lo.red=new lo(1,0,0,1);var Df=function(m,L,q){m?this.sensitivity=L?"variant":"case":this.sensitivity=L?"accent":"base",this.locale=q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Df.prototype.compare=function(m,L){return this.collator.compare(m,L)},Df.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Mh=function(m,L,q,Y,j){this.text=m,this.image=L,this.scale=q,this.fontStack=Y,this.textColor=j},Us=function(m){this.sections=m};Us.fromString=function(m){return new Us([new Mh(m,null,null,null,null)])},Us.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(m){return m.text.length!==0||m.image&&m.image.name.length!==0})},Us.factory=function(m){return m instanceof Us?m:Us.fromString(m)},Us.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(m){return m.text}).join("")},Us.prototype.serialize=function(){for(var m=["format"],L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];if(Y.image){m.push(["image",Y.image.name]);continue}m.push(Y.text);var j={};Y.fontStack&&(j["text-font"]=["literal",Y.fontStack.split(",")]),Y.scale&&(j["font-scale"]=Y.scale),Y.textColor&&(j["text-color"]=["rgba"].concat(Y.textColor.toArray())),m.push(j)}return m};var xs=function(m){this.name=m.name,this.available=m.available};xs.prototype.toString=function(){return this.name},xs.fromString=function(m){return m?new xs({name:m,available:!1}):null},xs.prototype.serialize=function(){return["image",this.name]};function Sh(y,m,L,q){if(!(typeof y=="number"&&y>=0&&y<=255&&typeof m=="number"&&m>=0&&m<=255&&typeof L=="number"&&L>=0&&L<=255)){var Y=typeof q=="number"?[y,m,L,q]:[y,m,L];return"Invalid rgba value ["+Y.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof q=="undefined"||typeof q=="number"&&q>=0&&q<=1?null:"Invalid rgba value ["+[y,m,L,q].join(", ")+"]: 'a' must be between 0 and 1."}function cf(y){if(y===null)return!0;if(typeof y=="string")return!0;if(typeof y=="boolean")return!0;if(typeof y=="number")return!0;if(y instanceof lo)return!0;if(y instanceof Df)return!0;if(y instanceof Us)return!0;if(y instanceof xs)return!0;if(Array.isArray(y)){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(!cf(q))return!1}return!0}else if(typeof y=="object"){for(var Y in y)if(!cf(y[Y]))return!1;return!0}else return!1}function To(y){if(y===null)return xu;if(typeof y=="string")return Aa;if(typeof y=="boolean")return Ca;if(typeof y=="number")return ni;if(y instanceof lo)return Fs;if(y instanceof Df)return Wc;if(y instanceof Us)return dl;if(y instanceof xs)return ff;if(Array.isArray(y)){for(var m=y.length,L,q=0,Y=y;q<Y.length;q+=1){var j=Y[q],$=To(j);if(!L)L=$;else{if(L===$)continue;L=Ma;break}}return $s(L||Ma,m)}else return Pf}function vs(y){var m=typeof y;return y===null?"":m==="string"||m==="number"||m==="boolean"?String(y):y instanceof lo||y instanceof Us||y instanceof xs?y.toString():JSON.stringify(y)}var po=function(m,L){this.type=m,this.value=L};po.parse=function(m,L){if(m.length!==2)return L.error("'literal' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(!cf(m[1]))return L.error("invalid value");var q=m[1],Y=To(q),j=L.expectedType;return Y.kind==="array"&&Y.N===0&&j&&j.kind==="array"&&(typeof j.N!="number"||j.N===0)&&(Y=j),new po(Y,q)},po.prototype.evaluate=function(){return this.value},po.prototype.eachChild=function(){},po.prototype.outputDefined=function(){return!0},po.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof lo?["rgba"].concat(this.value.toArray()):this.value instanceof Us?this.value.serialize():this.value};var Co=function(m){this.name="ExpressionEvaluationError",this.message=m};Co.prototype.toJSON=function(){return this.message};var Mc={string:Aa,number:ni,boolean:Ca,object:Pf},qs=function(m,L){this.type=m,this.args=L};qs.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=1,Y,j=m[0];if(j==="array"){var $;if(m.length>2){var pe=m[1];if(typeof pe!="string"||!(pe in Mc)||pe==="object")return L.error('The item type argument of "array" must be one of string, number, boolean',1);$=Mc[pe],q++}else $=Ma;var ke;if(m.length>3){if(m[2]!==null&&(typeof m[2]!="number"||m[2]<0||m[2]!==Math.floor(m[2])))return L.error('The length argument to "array" must be a positive integer literal',2);ke=m[2],q++}Y=$s($,ke)}else Y=Mc[j];for(var Fe=[];q<m.length;q++){var Ue=L.parse(m[q],q,Ma);if(!Ue)return null;Fe.push(Ue)}return new qs(Y,Fe)},qs.prototype.evaluate=function(m){for(var L=0;L<this.args.length;L++){var q=this.args[L].evaluate(m),Y=_u(this.type,To(q));if(Y){if(L===this.args.length-1)throw new Co("Expected value to be of type "+ko(this.type)+", but found "+ko(To(q))+" instead.")}else return q}return null},qs.prototype.eachChild=function(m){this.args.forEach(m)},qs.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},qs.prototype.serialize=function(){var m=this.type,L=[m.kind];if(m.kind==="array"){var q=m.itemType;if(q.kind==="string"||q.kind==="number"||q.kind==="boolean"){L.push(q.kind);var Y=m.N;(typeof Y=="number"||this.args.length>1)&&L.push(Y)}}return L.concat(this.args.map(function(j){return j.serialize()}))};var Vl=function(m){this.type=dl,this.sections=m};Vl.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=m[1];if(!Array.isArray(q)&&typeof q=="object")return L.error("First argument must be an image or text section.");for(var Y=[],j=!1,$=1;$<=m.length-1;++$){var pe=m[$];if(j&&typeof pe=="object"&&!Array.isArray(pe)){j=!1;var ke=null;if(pe["font-scale"]&&(ke=L.parse(pe["font-scale"],1,ni),!ke))return null;var Fe=null;if(pe["text-font"]&&(Fe=L.parse(pe["text-font"],1,$s(Aa)),!Fe))return null;var Ue=null;if(pe["text-color"]&&(Ue=L.parse(pe["text-color"],1,Fs),!Ue))return null;var ut=Y[Y.length-1];ut.scale=ke,ut.font=Fe,ut.textColor=Ue}else{var St=L.parse(m[$],1,Ma);if(!St)return null;var bt=St.type.kind;if(bt!=="string"&&bt!=="value"&&bt!=="null"&&bt!=="resolvedImage")return L.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");j=!0,Y.push({content:St,scale:null,font:null,textColor:null})}}return new Vl(Y)},Vl.prototype.evaluate=function(m){var L=function(q){var Y=q.content.evaluate(m);return To(Y)===ff?new Mh("",Y,null,null,null):new Mh(vs(Y),null,q.scale?q.scale.evaluate(m):null,q.font?q.font.evaluate(m).join(","):null,q.textColor?q.textColor.evaluate(m):null)};return new Us(this.sections.map(L))},Vl.prototype.eachChild=function(m){for(var L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];m(Y.content),Y.scale&&m(Y.scale),Y.font&&m(Y.font),Y.textColor&&m(Y.textColor)}},Vl.prototype.outputDefined=function(){return!1},Vl.prototype.serialize=function(){for(var m=["format"],L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];m.push(Y.content.serialize());var j={};Y.scale&&(j["font-scale"]=Y.scale.serialize()),Y.font&&(j["text-font"]=Y.font.serialize()),Y.textColor&&(j["text-color"]=Y.textColor.serialize()),m.push(j)}return m};var hf=function(m){this.type=ff,this.input=m};hf.parse=function(m,L){if(m.length!==2)return L.error("Expected two arguments.");var q=L.parse(m[1],1,Aa);return q?new hf(q):L.error("No image name provided.")},hf.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=xs.fromString(L);return q&&m.availableImages&&(q.available=m.availableImages.indexOf(L)>-1),q},hf.prototype.eachChild=function(m){m(this.input)},hf.prototype.outputDefined=function(){return!1},hf.prototype.serialize=function(){return["image",this.input.serialize()]};var _d={"to-boolean":Ca,"to-color":Fs,"to-number":ni,"to-string":Aa},bu=function(m,L){this.type=m,this.args=L};bu.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=m[0];if((q==="to-boolean"||q==="to-string")&&m.length!==2)return L.error("Expected one argument.");for(var Y=_d[q],j=[],$=1;$<m.length;$++){var pe=L.parse(m[$],$,Ma);if(!pe)return null;j.push(pe)}return new bu(Y,j)},bu.prototype.evaluate=function(m){if(this.type.kind==="boolean")return!!this.args[0].evaluate(m);if(this.type.kind==="color"){for(var L,q,Y=0,j=this.args;Y<j.length;Y+=1){var $=j[Y];if(L=$.evaluate(m),q=null,L instanceof lo)return L;if(typeof L=="string"){var pe=m.parseColor(L);if(pe)return pe}else if(Array.isArray(L)&&(L.length<3||L.length>4?q="Invalid rbga value "+JSON.stringify(L)+": expected an array containing either three or four numeric values.":q=Sh(L[0],L[1],L[2],L[3]),!q))return new lo(L[0]/255,L[1]/255,L[2]/255,L[3])}throw new Co(q||"Could not parse color from value '"+(typeof L=="string"?L:String(JSON.stringify(L)))+"'")}else if(this.type.kind==="number"){for(var ke=null,Fe=0,Ue=this.args;Fe<Ue.length;Fe+=1){var ut=Ue[Fe];if(ke=ut.evaluate(m),ke===null)return 0;var St=Number(ke);if(!isNaN(St))return St}throw new Co("Could not convert "+JSON.stringify(ke)+" to number.")}else return this.type.kind==="formatted"?Us.fromString(vs(this.args[0].evaluate(m))):this.type.kind==="resolvedImage"?xs.fromString(vs(this.args[0].evaluate(m))):vs(this.args[0].evaluate(m))},bu.prototype.eachChild=function(m){this.args.forEach(m)},bu.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},bu.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hf(this.args[0]).serialize();var m=["to-"+this.type.kind];return this.eachChild(function(L){m.push(L.serialize())}),m};var Wp=["Unknown","Point","LineString","Polygon"],Hl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Hl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Wp[this.feature.type]:this.feature.type:null},Hl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Hl.prototype.canonicalID=function(){return this.canonical},Hl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hl.prototype.parseColor=function(m){var L=this._parseColorCache[m];return L||(L=this._parseColorCache[m]=lo.parse(m)),L};var ho=function(m,L,q,Y){this.name=m,this.type=L,this._evaluate=q,this.args=Y};ho.prototype.evaluate=function(m){return this._evaluate(m,this.args)},ho.prototype.eachChild=function(m){this.args.forEach(m)},ho.prototype.outputDefined=function(){return!1},ho.prototype.serialize=function(){return[this.name].concat(this.args.map(function(m){return m.serialize()}))},ho.parse=function(m,L){var q,Y=m[0],j=ho.definitions[Y];if(!j)return L.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var $=Array.isArray(j)?j[0]:j.type,pe=Array.isArray(j)?[[j[1],j[2]]]:j.overloads,ke=pe.filter(function(Ni){var Yi=Ni[0];return!Array.isArray(Yi)||Yi.length===m.length-1}),Fe=null,Ue=0,ut=ke;Ue<ut.length;Ue+=1){var St=ut[Ue],bt=St[0],Yt=St[1];Fe=new Vs(L.registry,L.path,null,L.scope);for(var cr=[],Ir=!1,Ar=1;Ar<m.length;Ar++){var en=m[Ar],Nr=Array.isArray(bt)?bt[Ar-1]:bt.type,Qr=Fe.parse(en,1+cr.length,Nr);if(!Qr){Ir=!0;break}cr.push(Qr)}if(!Ir){if(Array.isArray(bt)&&bt.length!==cr.length){Fe.error("Expected "+bt.length+" arguments, but found "+cr.length+" instead.");continue}for(var an=0;an<cr.length;an++){var Pn=Array.isArray(bt)?bt[an]:bt.type,ai=cr[an];Fe.concat(an+1).checkSubtype(Pn,ai.type)}if(Fe.errors.length===0)return new ho(Y,$,Yt,cr)}}if(ke.length===1)(q=L.errors).push.apply(q,Fe.errors);else{for(var ti=ke.length?ke:pe,Bi=ti.map(function(Ni){var Yi=Ni[0];return Dv(Yi)}).join(" | "),Ti=[],Ri=1;Ri<m.length;Ri++){var wa=L.parse(m[Ri],1+Ti.length);if(!wa)return null;Ti.push(ko(wa.type))}L.error("Expected arguments of type "+Bi+", but found ("+Ti.join(", ")+") instead.")}return null},ho.register=function(m,L){ho.definitions=L;for(var q in L)m[q]=ho};function Dv(y){return Array.isArray(y)?"("+y.map(ko).join(", ")+")":"("+ko(y.type)+"...)"}var vf=function(m,L,q){this.type=Wc,this.locale=q,this.caseSensitive=m,this.diacriticSensitive=L};vf.parse=function(m,L){if(m.length!==2)return L.error("Expected one argument.");var q=m[1];if(typeof q!="object"||Array.isArray(q))return L.error("Collator options argument must be an object.");var Y=L.parse(q["case-sensitive"]===void 0?!1:q["case-sensitive"],1,Ca);if(!Y)return null;var j=L.parse(q["diacritic-sensitive"]===void 0?!1:q["diacritic-sensitive"],1,Ca);if(!j)return null;var $=null;return q.locale&&($=L.parse(q.locale,1,Aa),!$)?null:new vf(Y,j,$)},vf.prototype.evaluate=function(m){return new Df(this.caseSensitive.evaluate(m),this.diacriticSensitive.evaluate(m),this.locale?this.locale.evaluate(m):null)},vf.prototype.eachChild=function(m){m(this.caseSensitive),m(this.diacriticSensitive),this.locale&&m(this.locale)},vf.prototype.outputDefined=function(){return!1},vf.prototype.serialize=function(){var m={};return m["case-sensitive"]=this.caseSensitive.serialize(),m["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(m.locale=this.locale.serialize()),["collator",m]};var Gl=8192;function iv(y,m){y[0]=Math.min(y[0],m[0]),y[1]=Math.min(y[1],m[1]),y[2]=Math.max(y[2],m[0]),y[3]=Math.max(y[3],m[1])}function Eh(y){return(180+y)/360}function av(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function wu(y,m){return!(y[0]<=m[0]||y[2]>=m[2]||y[1]<=m[1]||y[3]>=m[3])}function Iv(y,m){var L=Eh(y[0]),q=av(y[1]),Y=Math.pow(2,m.z);return[Math.round(L*Y*Gl),Math.round(q*Y*Gl)]}function ov(y,m,L){var q=y[0]-m[0],Y=y[1]-m[1],j=y[0]-L[0],$=y[1]-L[1];return q*$-j*Y===0&&q*j<=0&&Y*$<=0}function kh(y,m,L){return m[1]>y[1]!=L[1]>y[1]&&y[0]<(L[0]-m[0])*(y[1]-m[1])/(L[1]-m[1])+m[0]}function sv(y,m){for(var L=!1,q=0,Y=m.length;q<Y;q++)for(var j=m[q],$=0,pe=j.length;$<pe-1;$++){if(ov(y,j[$],j[$+1]))return!1;kh(y,j[$],j[$+1])&&(L=!L)}return L}function bd(y,m){for(var L=0;L<m.length;L++)if(sv(y,m[L]))return!0;return!1}function Hd(y,m){return y[0]*m[1]-y[1]*m[0]}function If(y,m,L,q){var Y=y[0]-L[0],j=y[1]-L[1],$=m[0]-L[0],pe=m[1]-L[1],ke=q[0]-L[0],Fe=q[1]-L[1],Ue=Y*Fe-ke*j,ut=$*Fe-ke*pe;return Ue>0&&ut<0||Ue<0&&ut>0}function Fv(y,m,L,q){var Y=[m[0]-y[0],m[1]-y[1]],j=[q[0]-L[0],q[1]-L[1]];return Hd(j,Y)===0?!1:!!(If(y,m,L,q)&&If(L,q,y,m))}function oc(y,m,L){for(var q=0,Y=L;q<Y.length;q+=1)for(var j=Y[q],$=0;$<j.length-1;++$)if(Fv(y,m,j[$],j[$+1]))return!0;return!1}function Ch(y,m){for(var L=0;L<y.length;++L)if(!sv(y[L],m))return!1;for(var q=0;q<y.length-1;++q)if(oc(y[q],y[q+1],m))return!1;return!0}function Vu(y,m){for(var L=0;L<m.length;L++)if(Ch(y,m[L]))return!0;return!1}function Sc(y,m,L){for(var q=[],Y=0;Y<y.length;Y++){for(var j=[],$=0;$<y[Y].length;$++){var pe=Iv(y[Y][$],L);iv(m,pe),j.push(pe)}q.push(j)}return q}function Ff(y,m,L){for(var q=[],Y=0;Y<y.length;Y++){var j=Sc(y[Y],m,L);q.push(j)}return q}function qv(y,m,L,q){if(y[0]<L[0]||y[0]>L[2]){var Y=q*.5,j=y[0]-L[0]>Y?-q:L[0]-y[0]>Y?q:0;j===0&&(j=y[0]-L[2]>Y?-q:L[2]-y[0]>Y?q:0),y[0]+=j}iv(m,y)}function zv(y){y[0]=y[1]=1/0,y[2]=y[3]=-1/0}function Ov(y,m,L,q){for(var Y=Math.pow(2,q.z)*Gl,j=[q.x*Gl,q.y*Gl],$=[],pe=0,ke=y;pe<ke.length;pe+=1)for(var Fe=ke[pe],Ue=0,ut=Fe;Ue<ut.length;Ue+=1){var St=ut[Ue],bt=[St.x+j[0],St.y+j[1]];qv(bt,m,L,Y),$.push(bt)}return $}function lv(y,m,L,q){for(var Y=Math.pow(2,q.z)*Gl,j=[q.x*Gl,q.y*Gl],$=[],pe=0,ke=y;pe<ke.length;pe+=1){for(var Fe=ke[pe],Ue=[],ut=0,St=Fe;ut<St.length;ut+=1){var bt=St[ut],Yt=[bt.x+j[0],bt.y+j[1]];iv(m,Yt),Ue.push(Yt)}$.push(Ue)}if(m[2]-m[0]<=Y/2){zv(m);for(var cr=0,Ir=$;cr<Ir.length;cr+=1)for(var Ar=Ir[cr],en=0,Nr=Ar;en<Nr.length;en+=1){var Qr=Nr[en];qv(Qr,m,L,Y)}}return $}function uv(y,m){var L=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=Sc(m.coordinates,q,Y),$=Ov(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var pe=0,ke=$;pe<ke.length;pe+=1){var Fe=ke[pe];if(!sv(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ue=Ff(m.coordinates,q,Y),ut=Ov(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var St=0,bt=ut;St<bt.length;St+=1){var Yt=bt[St];if(!bd(Yt,Ue))return!1}}return!0}function Bv(y,m){var L=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=Sc(m.coordinates,q,Y),$=lv(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var pe=0,ke=$;pe<ke.length;pe+=1){var Fe=ke[pe];if(!Ch(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ue=Ff(m.coordinates,q,Y),ut=lv(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var St=0,bt=ut;St<bt.length;St+=1){var Yt=bt[St];if(!Vu(Yt,Ue))return!1}}return!0}var tu=function(m,L){this.type=Ca,this.geojson=m,this.geometries=L};tu.parse=function(m,L){if(m.length!==2)return L.error("'within' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(cf(m[1])){var q=m[1];if(q.type==="FeatureCollection")for(var Y=0;Y<q.features.length;++Y){var j=q.features[Y].geometry.type;if(j==="Polygon"||j==="MultiPolygon")return new tu(q,q.features[Y].geometry)}else if(q.type==="Feature"){var $=q.geometry.type;if($==="Polygon"||$==="MultiPolygon")return new tu(q,q.geometry)}else if(q.type==="Polygon"||q.type==="MultiPolygon")return new tu(q,q)}return L.error("'within' expression requires valid geojson object that contains polygon geometry type.")},tu.prototype.evaluate=function(m){if(m.geometry()!=null&&m.canonicalID()!=null){if(m.geometryType()==="Point")return uv(m,this.geometries);if(m.geometryType()==="LineString")return Bv(m,this.geometries)}return!1},tu.prototype.eachChild=function(){},tu.prototype.outputDefined=function(){return!0},tu.prototype.serialize=function(){return["within",this.geojson]};function fv(y){if(y instanceof ho){if(y.name==="get"&&y.args.length===1)return!1;if(y.name==="feature-state")return!1;if(y.name==="has"&&y.args.length===1)return!1;if(y.name==="properties"||y.name==="geometry-type"||y.name==="id")return!1;if(/^filter-/.test(y.name))return!1}if(y instanceof tu)return!1;var m=!0;return y.eachChild(function(L){m&&!fv(L)&&(m=!1)}),m}function al(y){if(y instanceof ho&&y.name==="feature-state")return!1;var m=!0;return y.eachChild(function(L){m&&!al(L)&&(m=!1)}),m}function ru(y,m){if(y instanceof ho&&m.indexOf(y.name)>=0)return!1;var L=!0;return y.eachChild(function(q){L&&!ru(q,m)&&(L=!1)}),L}var qf=function(m,L){this.type=L.type,this.name=m,this.boundExpression=L};qf.parse=function(m,L){if(m.length!==2||typeof m[1]!="string")return L.error("'var' expression requires exactly one string literal argument.");var q=m[1];return L.scope.has(q)?new qf(q,L.scope.get(q)):L.error('Unknown variable "'+q+'". Make sure "'+q+'" has been bound in an enclosing "let" expression before using it.',1)},qf.prototype.evaluate=function(m){return this.boundExpression.evaluate(m)},qf.prototype.eachChild=function(){},qf.prototype.outputDefined=function(){return!1},qf.prototype.serialize=function(){return["var",this.name]};var Vs=function(m,L,q,Y,j){L===void 0&&(L=[]),Y===void 0&&(Y=new Rl),j===void 0&&(j=[]),this.registry=m,this.path=L,this.key=L.map(function($){return"["+$+"]"}).join(""),this.scope=Y,this.errors=j,this.expectedType=q};Vs.prototype.parse=function(m,L,q,Y,j){return j===void 0&&(j={}),L?this.concat(L,q,Y)._parse(m,j):this._parse(m,j)},Vs.prototype._parse=function(m,L){(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number")&&(m=["literal",m]);function q(Ue,ut,St){return St==="assert"?new qs(ut,[Ue]):St==="coerce"?new bu(ut,[Ue]):Ue}if(Array.isArray(m)){if(m.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var Y=m[0];if(typeof Y!="string")return this.error("Expression name must be a string, but found "+typeof Y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var j=this.registry[Y];if(j){var $=j.parse(m,this);if(!$)return null;if(this.expectedType){var pe=this.expectedType,ke=$.type;if((pe.kind==="string"||pe.kind==="number"||pe.kind==="boolean"||pe.kind==="object"||pe.kind==="array")&&ke.kind==="value")$=q($,pe,L.typeAnnotation||"assert");else if((pe.kind==="color"||pe.kind==="formatted"||pe.kind==="resolvedImage")&&(ke.kind==="value"||ke.kind==="string"))$=q($,pe,L.typeAnnotation||"coerce");else if(this.checkSubtype(pe,ke))return null}if(!($ instanceof po)&&$.type.kind!=="resolvedImage"&&Xc($)){var Fe=new Hl;try{$=new po($.type,$.evaluate(Fe))}catch(Ue){return this.error(Ue.message),null}}return $}return this.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof m=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof m=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof m+" instead.")},Vs.prototype.concat=function(m,L,q){var Y=typeof m=="number"?this.path.concat(m):this.path,j=q?this.scope.concat(q):this.scope;return new Vs(this.registry,Y,L||null,j,this.errors)},Vs.prototype.error=function(m){for(var L=[],q=arguments.length-1;q-- >0;)L[q]=arguments[q+1];var Y=""+this.key+L.map(function(j){return"["+j+"]"}).join("");this.errors.push(new $o(Y,m))},Vs.prototype.checkSubtype=function(m,L){var q=_u(m,L);return q&&this.error(q),q};function Xc(y){if(y instanceof qf)return Xc(y.boundExpression);if(y instanceof ho&&y.name==="error")return!1;if(y instanceof vf)return!1;if(y instanceof tu)return!1;var m=y instanceof bu||y instanceof qs,L=!0;return y.eachChild(function(q){m?L=L&&Xc(q):L=L&&q instanceof po}),L?fv(y)&&ru(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function zf(y,m){for(var L=y.length-1,q=0,Y=L,j=0,$,pe;q<=Y;)if(j=Math.floor((q+Y)/2),$=y[j],pe=y[j+1],$<=m){if(j===L||m<pe)return j;q=j+1}else if($>m)Y=j-1;else throw new Co("Input is not a number.");return 0}var Dl=function(m,L,q){this.type=m,this.input=L,this.labels=[],this.outputs=[];for(var Y=0,j=q;Y<j.length;Y+=1){var $=j[Y],pe=$[0],ke=$[1];this.labels.push(pe),this.outputs.push(ke)}};Dl.parse=function(m,L){if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");var q=L.parse(m[1],1,ni);if(!q)return null;var Y=[],j=null;L.expectedType&&L.expectedType.kind!=="value"&&(j=L.expectedType);for(var $=1;$<m.length;$+=2){var pe=$===1?-1/0:m[$],ke=m[$+1],Fe=$,Ue=$+1;if(typeof pe!="number")return L.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(Y.length&&Y[Y.length-1][0]>=pe)return L.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Fe);var ut=L.parse(ke,Ue,j);if(!ut)return null;j=j||ut.type,Y.push([pe,ut])}return new Dl(j,q,Y)},Dl.prototype.evaluate=function(m){var L=this.labels,q=this.outputs;if(L.length===1)return q[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return q[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return q[j-1].evaluate(m);var $=zf(L,Y);return q[$].evaluate(m)},Dl.prototype.eachChild=function(m){m(this.input);for(var L=0,q=this.outputs;L<q.length;L+=1){var Y=q[L];m(Y)}},Dl.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Dl.prototype.serialize=function(){for(var m=["step",this.input.serialize()],L=0;L<this.labels.length;L++)L>0&&m.push(this.labels[L]),m.push(this.outputs[L].serialize());return m};function zs(y,m,L){return y*(1-L)+m*L}function Gd(y,m,L){return new lo(zs(y.r,m.r,L),zs(y.g,m.g,L),zs(y.b,m.b,L),zs(y.a,m.a,L))}function Yd(y,m,L){return y.map(function(q,Y){return zs(q,m[Y],L)})}var Tu=Object.freeze({__proto__:null,number:zs,color:Gd,array:Yd}),df=.95047,nu=1,Wd=1.08883,Zc=4/29,jc=6/29,Au=3*jc*jc,Nv=jc*jc*jc,cv=Math.PI/180,hv=180/Math.PI;function Uv(y){return y>Nv?Math.pow(y,1/3):y/Au+Zc}function Kc(y){return y>jc?y*y*y:Au*(y-Zc)}function Of(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function Ec(y){return y/=255,y<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function Lh(y){var m=Ec(y.r),L=Ec(y.g),q=Ec(y.b),Y=Uv((.4124564*m+.3575761*L+.1804375*q)/df),j=Uv((.2126729*m+.7151522*L+.072175*q)/nu),$=Uv((.0193339*m+.119192*L+.9503041*q)/Wd);return{l:116*j-16,a:500*(Y-j),b:200*(j-$),alpha:y.a}}function wd(y){var m=(y.l+16)/116,L=isNaN(y.a)?m:m+y.a/500,q=isNaN(y.b)?m:m-y.b/200;return m=nu*Kc(m),L=df*Kc(L),q=Wd*Kc(q),new lo(Of(3.2404542*L-1.5371385*m-.4985314*q),Of(-.969266*L+1.8760108*m+.041556*q),Of(.0556434*L-.2040259*m+1.0572252*q),y.alpha)}function Oo(y,m,L){return{l:zs(y.l,m.l,L),a:zs(y.a,m.a,L),b:zs(y.b,m.b,L),alpha:zs(y.alpha,m.alpha,L)}}function Jc(y){var m=Lh(y),L=m.l,q=m.a,Y=m.b,j=Math.atan2(Y,q)*hv;return{h:j<0?j+360:j,c:Math.sqrt(q*q+Y*Y),l:L,alpha:y.a}}function kc(y){var m=y.h*cv,L=y.c,q=y.l;return wd({l:q,a:Math.cos(m)*L,b:Math.sin(m)*L,alpha:y.alpha})}function Cc(y,m,L){var q=m-y;return y+L*(q>180||q<-180?q-360*Math.round(q/360):q)}function Qc(y,m,L){return{h:Cc(y.h,m.h,L),c:zs(y.c,m.c,L),l:zs(y.l,m.l,L),alpha:zs(y.alpha,m.alpha,L)}}var pf={forward:Lh,reverse:wd,interpolate:Oo},sc={forward:Jc,reverse:kc,interpolate:Qc},Vv=Object.freeze({__proto__:null,lab:pf,hcl:sc}),Hs=function(m,L,q,Y,j){this.type=m,this.operator=L,this.interpolation=q,this.input=Y,this.labels=[],this.outputs=[];for(var $=0,pe=j;$<pe.length;$+=1){var ke=pe[$],Fe=ke[0],Ue=ke[1];this.labels.push(Fe),this.outputs.push(Ue)}};Hs.interpolationFactor=function(m,L,q,Y){var j=0;if(m.name==="exponential")j=vv(L,m.base,q,Y);else if(m.name==="linear")j=vv(L,1,q,Y);else if(m.name==="cubic-bezier"){var $=m.controlPoints,pe=new s($[0],$[1],$[2],$[3]);j=pe.solve(vv(L,1,q,Y))}return j},Hs.parse=function(m,L){var q=m[0],Y=m[1],j=m[2],$=m.slice(3);if(!Array.isArray(Y)||Y.length===0)return L.error("Expected an interpolation type expression.",1);if(Y[0]==="linear")Y={name:"linear"};else if(Y[0]==="exponential"){var pe=Y[1];if(typeof pe!="number")return L.error("Exponential interpolation requires a numeric base.",1,1);Y={name:"exponential",base:pe}}else if(Y[0]==="cubic-bezier"){var ke=Y.slice(1);if(ke.length!==4||ke.some(function(Ar){return typeof Ar!="number"||Ar<0||Ar>1}))return L.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Y={name:"cubic-bezier",controlPoints:ke}}else return L.error("Unknown interpolation type "+String(Y[0]),1,0);if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");if(j=L.parse(j,2,ni),!j)return null;var Fe=[],Ue=null;q==="interpolate-hcl"||q==="interpolate-lab"?Ue=Fs:L.expectedType&&L.expectedType.kind!=="value"&&(Ue=L.expectedType);for(var ut=0;ut<$.length;ut+=2){var St=$[ut],bt=$[ut+1],Yt=ut+3,cr=ut+4;if(typeof St!="number")return L.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Yt);if(Fe.length&&Fe[Fe.length-1][0]>=St)return L.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Yt);var Ir=L.parse(bt,cr,Ue);if(!Ir)return null;Ue=Ue||Ir.type,Fe.push([St,Ir])}return Ue.kind!=="number"&&Ue.kind!=="color"&&!(Ue.kind==="array"&&Ue.itemType.kind==="number"&&typeof Ue.N=="number")?L.error("Type "+ko(Ue)+" is not interpolatable."):new Hs(Ue,q,Y,j,Fe)},Hs.prototype.evaluate=function(m){var L=this.labels,q=this.outputs;if(L.length===1)return q[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return q[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return q[j-1].evaluate(m);var $=zf(L,Y),pe=L[$],ke=L[$+1],Fe=Hs.interpolationFactor(this.interpolation,Y,pe,ke),Ue=q[$].evaluate(m),ut=q[$+1].evaluate(m);return this.operator==="interpolate"?Tu[this.type.kind.toLowerCase()](Ue,ut,Fe):this.operator==="interpolate-hcl"?sc.reverse(sc.interpolate(sc.forward(Ue),sc.forward(ut),Fe)):pf.reverse(pf.interpolate(pf.forward(Ue),pf.forward(ut),Fe))},Hs.prototype.eachChild=function(m){m(this.input);for(var L=0,q=this.outputs;L<q.length;L+=1){var Y=q[L];m(Y)}},Hs.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Hs.prototype.serialize=function(){var m;this.interpolation.name==="linear"?m=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?m=["linear"]:m=["exponential",this.interpolation.base]:m=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var L=[this.operator,m,this.input.serialize()],q=0;q<this.labels.length;q++)L.push(this.labels[q],this.outputs[q].serialize());return L};function vv(y,m,L,q){var Y=q-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var Bf=function(m,L){this.type=m,this.args=L};Bf.parse=function(m,L){if(m.length<2)return L.error("Expectected at least one argument.");var q=null,Y=L.expectedType;Y&&Y.kind!=="value"&&(q=Y);for(var j=[],$=0,pe=m.slice(1);$<pe.length;$+=1){var ke=pe[$],Fe=L.parse(ke,1+j.length,q,void 0,{typeAnnotation:"omit"});if(!Fe)return null;q=q||Fe.type,j.push(Fe)}var Ue=Y&&j.some(function(ut){return _u(Y,ut.type)});return Ue?new Bf(Ma,j):new Bf(q,j)},Bf.prototype.evaluate=function(m){for(var L=null,q=0,Y,j=0,$=this.args;j<$.length;j+=1){var pe=$[j];if(q++,L=pe.evaluate(m),L&&L instanceof xs&&!L.available&&(Y||(Y=L.name),L=null,q===this.args.length&&(L=Y)),L!==null)break}return L},Bf.prototype.eachChild=function(m){this.args.forEach(m)},Bf.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},Bf.prototype.serialize=function(){var m=["coalesce"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Nf=function(m,L){this.type=L.type,this.bindings=[].concat(m),this.result=L};Nf.prototype.evaluate=function(m){return this.result.evaluate(m)},Nf.prototype.eachChild=function(m){for(var L=0,q=this.bindings;L<q.length;L+=1){var Y=q[L];m(Y[1])}m(this.result)},Nf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found "+(m.length-1)+" instead.");for(var q=[],Y=1;Y<m.length-1;Y+=2){var j=m[Y];if(typeof j!="string")return L.error("Expected string, but found "+typeof j+" instead.",Y);if(/[^a-zA-Z0-9_]/.test(j))return L.error("Variable names must contain only alphanumeric characters or '_'.",Y);var $=L.parse(m[Y+1],Y+1);if(!$)return null;q.push([j,$])}var pe=L.parse(m[m.length-1],m.length-1,L.expectedType,q);return pe?new Nf(q,pe):null},Nf.prototype.outputDefined=function(){return this.result.outputDefined()},Nf.prototype.serialize=function(){for(var m=["let"],L=0,q=this.bindings;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];m.push(j,$.serialize())}return m.push(this.result.serialize()),m};var Uf=function(m,L,q){this.type=m,this.index=L,this.input=q};Uf.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,ni),Y=L.parse(m[2],2,$s(L.expectedType||Ma));if(!q||!Y)return null;var j=Y.type;return new Uf(j.itemType,q,Y)},Uf.prototype.evaluate=function(m){var L=this.index.evaluate(m),q=this.input.evaluate(m);if(L<0)throw new Co("Array index out of bounds: "+L+" < 0.");if(L>=q.length)throw new Co("Array index out of bounds: "+L+" > "+(q.length-1)+".");if(L!==Math.floor(L))throw new Co("Array index must be an integer, but found "+L+" instead.");return q[L]},Uf.prototype.eachChild=function(m){m(this.index),m(this.input)},Uf.prototype.outputDefined=function(){return!1},Uf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var _s=function(m,L){this.type=Ca,this.needle=m,this.haystack=L};_s.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);return!q||!Y?null:Ah(q.type,[Ca,Aa,ni,xu,Ma])?new _s(q,Y):L.error("Expected first argument to be of type boolean, string, number or null, but found "+ko(q.type)+" instead")},_s.prototype.evaluate=function(m){var L=this.needle.evaluate(m),q=this.haystack.evaluate(m);if(!q)return!1;if(!Uu(L,["boolean","string","number","null"]))throw new Co("Expected first argument to be of type boolean, string, number or null, but found "+ko(To(L))+" instead.");if(!Uu(q,["string","array"]))throw new Co("Expected second argument to be of type array or string, but found "+ko(To(q))+" instead.");return q.indexOf(L)>=0},_s.prototype.eachChild=function(m){m(this.needle),m(this.haystack)},_s.prototype.outputDefined=function(){return!0},_s.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pl=function(m,L,q){this.type=ni,this.needle=m,this.haystack=L,this.fromIndex=q};pl.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);if(!q||!Y)return null;if(!Ah(q.type,[Ca,Aa,ni,xu,Ma]))return L.error("Expected first argument to be of type boolean, string, number or null, but found "+ko(q.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,ni);return j?new pl(q,Y,j):null}else return new pl(q,Y)},pl.prototype.evaluate=function(m){var L=this.needle.evaluate(m),q=this.haystack.evaluate(m);if(!Uu(L,["boolean","string","number","null"]))throw new Co("Expected first argument to be of type boolean, string, number or null, but found "+ko(To(L))+" instead.");if(!Uu(q,["string","array"]))throw new Co("Expected second argument to be of type array or string, but found "+ko(To(q))+" instead.");if(this.fromIndex){var Y=this.fromIndex.evaluate(m);return q.indexOf(L,Y)}return q.indexOf(L)},pl.prototype.eachChild=function(m){m(this.needle),m(this.haystack),this.fromIndex&&m(this.fromIndex)},pl.prototype.outputDefined=function(){return!1},pl.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var m=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),m]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Hu=function(m,L,q,Y,j,$){this.inputType=m,this.type=L,this.input=q,this.cases=Y,this.outputs=j,this.otherwise=$};Hu.parse=function(m,L){if(m.length<5)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if(m.length%2!==1)return L.error("Expected an even number of arguments.");var q,Y;L.expectedType&&L.expectedType.kind!=="value"&&(Y=L.expectedType);for(var j={},$=[],pe=2;pe<m.length-1;pe+=2){var ke=m[pe],Fe=m[pe+1];Array.isArray(ke)||(ke=[ke]);var Ue=L.concat(pe);if(ke.length===0)return Ue.error("Expected at least one branch label.");for(var ut=0,St=ke;ut<St.length;ut+=1){var bt=St[ut];if(typeof bt!="number"&&typeof bt!="string")return Ue.error("Branch labels must be numbers or strings.");if(typeof bt=="number"&&Math.abs(bt)>Number.MAX_SAFE_INTEGER)return Ue.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof bt=="number"&&Math.floor(bt)!==bt)return Ue.error("Numeric branch labels must be integer values.");if(!q)q=To(bt);else if(Ue.checkSubtype(q,To(bt)))return null;if(typeof j[String(bt)]!="undefined")return Ue.error("Branch labels must be unique.");j[String(bt)]=$.length}var Yt=L.parse(Fe,pe,Y);if(!Yt)return null;Y=Y||Yt.type,$.push(Yt)}var cr=L.parse(m[1],1,Ma);if(!cr)return null;var Ir=L.parse(m[m.length-1],m.length-1,Y);return!Ir||cr.type.kind!=="value"&&L.concat(1).checkSubtype(q,cr.type)?null:new Hu(q,Y,cr,j,$,Ir)},Hu.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=To(L)===this.inputType&&this.outputs[this.cases[L]]||this.otherwise;return q.evaluate(m)},Hu.prototype.eachChild=function(m){m(this.input),this.outputs.forEach(m),m(this.otherwise)},Hu.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})&&this.otherwise.outputDefined()},Hu.prototype.serialize=function(){for(var m=this,L=["match",this.input.serialize()],q=Object.keys(this.cases).sort(),Y=[],j={},$=0,pe=q;$<pe.length;$+=1){var ke=pe[$],Fe=j[this.cases[ke]];Fe===void 0?(j[this.cases[ke]]=Y.length,Y.push([this.cases[ke],[ke]])):Y[Fe][1].push(ke)}for(var Ue=function(cr){return m.inputType.kind==="number"?Number(cr):cr},ut=0,St=Y;ut<St.length;ut+=1){var bt=St[ut],Fe=bt[0],Yt=bt[1];Yt.length===1?L.push(Ue(Yt[0])):L.push(Yt.map(Ue)),L.push(this.outputs[outputIndex$1].serialize())}return L.push(this.otherwise.serialize()),L};var Vf=function(m,L,q){this.type=m,this.branches=L,this.otherwise=q};Vf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found only "+(m.length-1)+".");if(m.length%2!==0)return L.error("Expected an odd number of arguments.");var q;L.expectedType&&L.expectedType.kind!=="value"&&(q=L.expectedType);for(var Y=[],j=1;j<m.length-1;j+=2){var $=L.parse(m[j],j,Ca);if(!$)return null;var pe=L.parse(m[j+1],j+1,q);if(!pe)return null;Y.push([$,pe]),q=q||pe.type}var ke=L.parse(m[m.length-1],m.length-1,q);return ke?new Vf(q,Y,ke):null},Vf.prototype.evaluate=function(m){for(var L=0,q=this.branches;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];if(j.evaluate(m))return $.evaluate(m)}return this.otherwise.evaluate(m)},Vf.prototype.eachChild=function(m){for(var L=0,q=this.branches;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];m(j),m($)}m(this.otherwise)},Vf.prototype.outputDefined=function(){return this.branches.every(function(m){var L=m[0],q=m[1];return q.outputDefined()})&&this.otherwise.outputDefined()},Vf.prototype.serialize=function(){var m=["case"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Gu=function(m,L,q,Y){this.type=m,this.input=L,this.beginIndex=q,this.endIndex=Y};Gu.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,ni);if(!q||!Y)return null;if(!Ah(q.type,[$s(Ma),Aa,Ma]))return L.error("Expected first argument to be of type array or string, but found "+ko(q.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,ni);return j?new Gu(q.type,q,Y,j):null}else return new Gu(q.type,q,Y)},Gu.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=this.beginIndex.evaluate(m);if(!Uu(L,["string","array"]))throw new Co("Expected first argument to be of type array or string, but found "+ko(To(L))+" instead.");if(this.endIndex){var Y=this.endIndex.evaluate(m);return L.slice(q,Y)}return L.slice(q)},Gu.prototype.eachChild=function(m){m(this.input),m(this.beginIndex),this.endIndex&&m(this.endIndex)},Gu.prototype.outputDefined=function(){return!1},Gu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var m=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),m]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Ph(y,m){return y==="=="||y==="!="?m.kind==="boolean"||m.kind==="string"||m.kind==="number"||m.kind==="null"||m.kind==="value":m.kind==="string"||m.kind==="number"||m.kind==="value"}function Ve(y,m,L){return m===L}function it(y,m,L){return m!==L}function Ht(y,m,L){return m<L}function Rt(y,m,L){return m>L}function lr(y,m,L){return m<=L}function Lr(y,m,L){return m>=L}function Fr(y,m,L,q){return q.compare(m,L)===0}function Zr(y,m,L,q){return!Fr(y,m,L,q)}function nn(y,m,L,q){return q.compare(m,L)<0}function An(y,m,L,q){return q.compare(m,L)>0}function Br(y,m,L,q){return q.compare(m,L)<=0}function tn(y,m,L,q){return q.compare(m,L)>=0}function rn(y,m,L){var q=y!=="=="&&y!=="!=";return function(){function Y(j,$,pe){this.type=Ca,this.lhs=j,this.rhs=$,this.collator=pe,this.hasUntypedArgument=j.type.kind==="value"||$.type.kind==="value"}return Y.parse=function($,pe){if($.length!==3&&$.length!==4)return pe.error("Expected two or three arguments.");var ke=$[0],Fe=pe.parse($[1],1,Ma);if(!Fe)return null;if(!Ph(ke,Fe.type))return pe.concat(1).error('"'+ke+`" comparisons are not supported for type '`+ko(Fe.type)+"'.");var Ue=pe.parse($[2],2,Ma);if(!Ue)return null;if(!Ph(ke,Ue.type))return pe.concat(2).error('"'+ke+`" comparisons are not supported for type '`+ko(Ue.type)+"'.");if(Fe.type.kind!==Ue.type.kind&&Fe.type.kind!=="value"&&Ue.type.kind!=="value")return pe.error("Cannot compare types '"+ko(Fe.type)+"' and '"+ko(Ue.type)+"'.");q&&(Fe.type.kind==="value"&&Ue.type.kind!=="value"?Fe=new qs(Ue.type,[Fe]):Fe.type.kind!=="value"&&Ue.type.kind==="value"&&(Ue=new qs(Fe.type,[Ue])));var ut=null;if($.length===4){if(Fe.type.kind!=="string"&&Ue.type.kind!=="string"&&Fe.type.kind!=="value"&&Ue.type.kind!=="value")return pe.error("Cannot use collator to compare non-string types.");if(ut=pe.parse($[3],3,Wc),!ut)return null}return new Y(Fe,Ue,ut)},Y.prototype.evaluate=function($){var pe=this.lhs.evaluate($),ke=this.rhs.evaluate($);if(q&&this.hasUntypedArgument){var Fe=To(pe),Ue=To(ke);if(Fe.kind!==Ue.kind||!(Fe.kind==="string"||Fe.kind==="number"))throw new Co('Expected arguments for "'+y+'" to be (string, string) or (number, number), but found ('+Fe.kind+", "+Ue.kind+") instead.")}if(this.collator&&!q&&this.hasUntypedArgument){var ut=To(pe),St=To(ke);if(ut.kind!=="string"||St.kind!=="string")return m($,pe,ke)}return this.collator?L($,pe,ke,this.collator.evaluate($)):m($,pe,ke)},Y.prototype.eachChild=function($){$(this.lhs),$(this.rhs),this.collator&&$(this.collator)},Y.prototype.outputDefined=function(){return!0},Y.prototype.serialize=function(){var $=[y];return this.eachChild(function(pe){$.push(pe.serialize())}),$},Y}()}var wn=rn("==",Ve,Fr),Gn=rn("!=",it,Zr),Oi=rn("<",Ht,nn),Ii=rn(">",Rt,An),Hi=rn("<=",lr,Br),Ki=rn(">=",Lr,tn),On=function(m,L,q,Y,j){this.type=Aa,this.number=m,this.locale=L,this.currency=q,this.minFractionDigits=Y,this.maxFractionDigits=j};On.parse=function(m,L){if(m.length!==3)return L.error("Expected two arguments.");var q=L.parse(m[1],1,ni);if(!q)return null;var Y=m[2];if(typeof Y!="object"||Array.isArray(Y))return L.error("NumberFormat options argument must be an object.");var j=null;if(Y.locale&&(j=L.parse(Y.locale,1,Aa),!j))return null;var $=null;if(Y.currency&&($=L.parse(Y.currency,1,Aa),!$))return null;var pe=null;if(Y["min-fraction-digits"]&&(pe=L.parse(Y["min-fraction-digits"],1,ni),!pe))return null;var ke=null;return Y["max-fraction-digits"]&&(ke=L.parse(Y["max-fraction-digits"],1,ni),!ke)?null:new On(q,j,$,pe,ke)},On.prototype.evaluate=function(m){return new Intl.NumberFormat(this.locale?this.locale.evaluate(m):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(m):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(m):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(m):void 0}).format(this.number.evaluate(m))},On.prototype.eachChild=function(m){m(this.number),this.locale&&m(this.locale),this.currency&&m(this.currency),this.minFractionDigits&&m(this.minFractionDigits),this.maxFractionDigits&&m(this.maxFractionDigits)},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){var m={};return this.locale&&(m.locale=this.locale.serialize()),this.currency&&(m.currency=this.currency.serialize()),this.minFractionDigits&&(m["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(m["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),m]};var $n=function(m){this.type=ni,this.input=m};$n.parse=function(m,L){if(m.length!==2)return L.error("Expected 1 argument, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1);return q?q.type.kind!=="array"&&q.type.kind!=="string"&&q.type.kind!=="value"?L.error("Expected argument of type string or array, but found "+ko(q.type)+" instead."):new $n(q):null},$n.prototype.evaluate=function(m){var L=this.input.evaluate(m);if(typeof L=="string")return L.length;if(Array.isArray(L))return L.length;throw new Co("Expected value to be of type string or array, but found "+ko(To(L))+" instead.")},$n.prototype.eachChild=function(m){m(this.input)},$n.prototype.outputDefined=function(){return!1},$n.prototype.serialize=function(){var m=["length"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Ji={"==":wn,"!=":Gn,">":Ii,"<":Oi,">=":Ki,"<=":Hi,array:qs,at:Uf,boolean:qs,case:Vf,coalesce:Bf,collator:vf,format:Vl,image:hf,in:_s,"index-of":pl,interpolate:Hs,"interpolate-hcl":Hs,"interpolate-lab":Hs,length:$n,let:Nf,literal:po,match:Hu,number:qs,"number-format":On,object:qs,slice:Gu,step:Dl,string:qs,"to-boolean":bu,"to-color":bu,"to-number":bu,"to-string":bu,var:qf,within:tu};function ca(y,m){var L=m[0],q=m[1],Y=m[2],j=m[3];L=L.evaluate(y),q=q.evaluate(y),Y=Y.evaluate(y);var $=j?j.evaluate(y):1,pe=Sh(L,q,Y,$);if(pe)throw new Co(pe);return new lo(L/255*$,q/255*$,Y/255*$,$)}function Ka(y,m){return y in m}function mo(y,m){var L=m[y];return typeof L=="undefined"?null:L}function vo(y,m,L,q){for(;L<=q;){var Y=L+q>>1;if(m[Y]===y)return!0;m[Y]>y?q=Y-1:L=Y+1}return!1}function xo(y){return{type:y}}ho.register(Ji,{error:[Rf,[Aa],function(y,m){var L=m[0];throw new Co(L.evaluate(y))}],typeof:[Aa,[Ma],function(y,m){var L=m[0];return ko(To(L.evaluate(y)))}],"to-rgba":[$s(ni,4),[Fs],function(y,m){var L=m[0];return L.evaluate(y).toArray()}],rgb:[Fs,[ni,ni,ni],ca],rgba:[Fs,[ni,ni,ni,ni],ca],has:{type:Ca,overloads:[[[Aa],function(y,m){var L=m[0];return Ka(L.evaluate(y),y.properties())}],[[Aa,Pf],function(y,m){var L=m[0],q=m[1];return Ka(L.evaluate(y),q.evaluate(y))}]]},get:{type:Ma,overloads:[[[Aa],function(y,m){var L=m[0];return mo(L.evaluate(y),y.properties())}],[[Aa,Pf],function(y,m){var L=m[0],q=m[1];return mo(L.evaluate(y),q.evaluate(y))}]]},"feature-state":[Ma,[Aa],function(y,m){var L=m[0];return mo(L.evaluate(y),y.featureState||{})}],properties:[Pf,[],function(y){return y.properties()}],"geometry-type":[Aa,[],function(y){return y.geometryType()}],id:[Ma,[],function(y){return y.id()}],zoom:[ni,[],function(y){return y.globals.zoom}],"heatmap-density":[ni,[],function(y){return y.globals.heatmapDensity||0}],"line-progress":[ni,[],function(y){return y.globals.lineProgress||0}],accumulated:[Ma,[],function(y){return y.globals.accumulated===void 0?null:y.globals.accumulated}],"+":[ni,xo(ni),function(y,m){for(var L=0,q=0,Y=m;q<Y.length;q+=1){var j=Y[q];L+=j.evaluate(y)}return L}],"*":[ni,xo(ni),function(y,m){for(var L=1,q=0,Y=m;q<Y.length;q+=1){var j=Y[q];L*=j.evaluate(y)}return L}],"-":{type:ni,overloads:[[[ni,ni],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)-q.evaluate(y)}],[[ni],function(y,m){var L=m[0];return-L.evaluate(y)}]]},"/":[ni,[ni,ni],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)/q.evaluate(y)}],"%":[ni,[ni,ni],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)%q.evaluate(y)}],ln2:[ni,[],function(){return Math.LN2}],pi:[ni,[],function(){return Math.PI}],e:[ni,[],function(){return Math.E}],"^":[ni,[ni,ni],function(y,m){var L=m[0],q=m[1];return Math.pow(L.evaluate(y),q.evaluate(y))}],sqrt:[ni,[ni],function(y,m){var L=m[0];return Math.sqrt(L.evaluate(y))}],log10:[ni,[ni],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN10}],ln:[ni,[ni],function(y,m){var L=m[0];return Math.log(L.evaluate(y))}],log2:[ni,[ni],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN2}],sin:[ni,[ni],function(y,m){var L=m[0];return Math.sin(L.evaluate(y))}],cos:[ni,[ni],function(y,m){var L=m[0];return Math.cos(L.evaluate(y))}],tan:[ni,[ni],function(y,m){var L=m[0];return Math.tan(L.evaluate(y))}],asin:[ni,[ni],function(y,m){var L=m[0];return Math.asin(L.evaluate(y))}],acos:[ni,[ni],function(y,m){var L=m[0];return Math.acos(L.evaluate(y))}],atan:[ni,[ni],function(y,m){var L=m[0];return Math.atan(L.evaluate(y))}],min:[ni,xo(ni),function(y,m){return Math.min.apply(Math,m.map(function(L){return L.evaluate(y)}))}],max:[ni,xo(ni),function(y,m){return Math.max.apply(Math,m.map(function(L){return L.evaluate(y)}))}],abs:[ni,[ni],function(y,m){var L=m[0];return Math.abs(L.evaluate(y))}],round:[ni,[ni],function(y,m){var L=m[0],q=L.evaluate(y);return q<0?-Math.round(-q):Math.round(q)}],floor:[ni,[ni],function(y,m){var L=m[0];return Math.floor(L.evaluate(y))}],ceil:[ni,[ni],function(y,m){var L=m[0];return Math.ceil(L.evaluate(y))}],"filter-==":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1];return y.properties()[L.value]===q.value}],"filter-id-==":[Ca,[Ma],function(y,m){var L=m[0];return y.id()===L.value}],"filter-type-==":[Ca,[Aa],function(y,m){var L=m[0];return y.geometryType()===L.value}],"filter-<":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y<j}],"filter-id-<":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q<Y}],"filter->":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y>j}],"filter-id->":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q>Y}],"filter-<=":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y<=j}],"filter-id-<=":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q<=Y}],"filter->=":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y>=j}],"filter-id->=":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q>=Y}],"filter-has":[Ca,[Ma],function(y,m){var L=m[0];return L.value in y.properties()}],"filter-has-id":[Ca,[],function(y){return y.id()!==null&&y.id()!==void 0}],"filter-type-in":[Ca,[$s(Aa)],function(y,m){var L=m[0];return L.value.indexOf(y.geometryType())>=0}],"filter-id-in":[Ca,[$s(Ma)],function(y,m){var L=m[0];return L.value.indexOf(y.id())>=0}],"filter-in-small":[Ca,[Aa,$s(Ma)],function(y,m){var L=m[0],q=m[1];return q.value.indexOf(y.properties()[L.value])>=0}],"filter-in-large":[Ca,[Aa,$s(Ma)],function(y,m){var L=m[0],q=m[1];return vo(y.properties()[L.value],q.value,0,q.value.length-1)}],all:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)&&q.evaluate(y)}],[xo(Ca),function(y,m){for(var L=0,q=m;L<q.length;L+=1){var Y=q[L];if(!Y.evaluate(y))return!1}return!0}]]},any:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)||q.evaluate(y)}],[xo(Ca),function(y,m){for(var L=0,q=m;L<q.length;L+=1){var Y=q[L];if(Y.evaluate(y))return!0}return!1}]]},"!":[Ca,[Ca],function(y,m){var L=m[0];return!L.evaluate(y)}],"is-supported-script":[Ca,[Aa],function(y,m){var L=m[0],q=y.globals&&y.globals.isSupportedScript;return q?q(L.evaluate(y)):!0}],upcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toUpperCase()}],downcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toLowerCase()}],concat:[Aa,xo(Ma),function(y,m){return m.map(function(L){return vs(L.evaluate(y))}).join("")}],"resolved-locale":[Aa,[Wc],function(y,m){var L=m[0];return L.evaluate(y).resolvedLocale()}]});function Na(y){return{result:"success",value:y}}function bs(y){return{result:"error",value:y}}function Zo(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function Bo(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function hi(y){return!!y.expression&&y.expression.interpolated}function ta(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function ws(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function Ml(y){return y}function Yl(y,m){var L=m.type==="color",q=y.stops&&typeof y.stops[0][0]=="object",Y=q||y.property!==void 0,j=q||!Y,$=y.type||(hi(m)?"exponential":"interval");if(L&&(y=Pl({},y),y.stops&&(y.stops=y.stops.map(function(ti){return[ti[0],lo.parse(ti[1])]})),y.default?y.default=lo.parse(y.default):y.default=lo.parse(m.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!Vv[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);var pe,ke,Fe;if($==="exponential")pe=au;else if($==="interval")pe=Hf;else if($==="categorical"){pe=Yu,ke=Object.create(null);for(var Ue=0,ut=y.stops;Ue<ut.length;Ue+=1){var St=ut[Ue];ke[St[0]]=St[1]}Fe=typeof y.stops[0][0]}else if($==="identity")pe=Lc;else throw new Error('Unknown function type "'+$+'"');if(q){for(var bt={},Yt=[],cr=0;cr<y.stops.length;cr++){var Ir=y.stops[cr],Ar=Ir[0].zoom;bt[Ar]===void 0&&(bt[Ar]={zoom:Ar,type:y.type,property:y.property,default:y.default,stops:[]},Yt.push(Ar)),bt[Ar].stops.push([Ir[0].value,Ir[1]])}for(var en=[],Nr=0,Qr=Yt;Nr<Qr.length;Nr+=1){var an=Qr[Nr];en.push([bt[an].zoom,Yl(bt[an],m)])}var Pn={name:"linear"};return{kind:"composite",interpolationType:Pn,interpolationFactor:Hs.interpolationFactor.bind(void 0,Pn),zoomStops:en.map(function(ti){return ti[0]}),evaluate:function(Bi,Ti){var Ri=Bi.zoom;return au({stops:en,base:y.base},m,Ri).evaluate(Ri,Ti)}}}else if(j){var ai=$==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:ai,interpolationFactor:Hs.interpolationFactor.bind(void 0,ai),zoomStops:y.stops.map(function(ti){return ti[0]}),evaluate:function(ti){var Bi=ti.zoom;return pe(y,m,Bi,ke,Fe)}}}else return{kind:"source",evaluate:function(Bi,Ti){var Ri=Ti&&Ti.properties?Ti.properties[y.property]:void 0;return Ri===void 0?iu(y.default,m.default):pe(y,m,Ri,ke,Fe)}}}function iu(y,m,L){if(y!==void 0)return y;if(m!==void 0)return m;if(L!==void 0)return L}function Yu(y,m,L,q,Y){var j=typeof L===Y?q[L]:void 0;return iu(j,y.default,m.default)}function Hf(y,m,L){if(ta(L)!=="number")return iu(y.default,m.default);var q=y.stops.length;if(q===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[q-1][0])return y.stops[q-1][1];var Y=zf(y.stops.map(function(j){return j[0]}),L);return y.stops[Y][1]}function au(y,m,L){var q=y.base!==void 0?y.base:1;if(ta(L)!=="number")return iu(y.default,m.default);var Y=y.stops.length;if(Y===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[Y-1][0])return y.stops[Y-1][1];var j=zf(y.stops.map(function(ut){return ut[0]}),L),$=Pc(L,q,y.stops[j][0],y.stops[j+1][0]),pe=y.stops[j][1],ke=y.stops[j+1][1],Fe=Tu[m.type]||Ml;if(y.colorSpace&&y.colorSpace!=="rgb"){var Ue=Vv[y.colorSpace];Fe=function(ut,St){return Ue.reverse(Ue.interpolate(Ue.forward(ut),Ue.forward(St),$))}}return typeof pe.evaluate=="function"?{evaluate:function(){for(var St=[],bt=arguments.length;bt--;)St[bt]=arguments[bt];var Yt=pe.evaluate.apply(void 0,St),cr=ke.evaluate.apply(void 0,St);if(!(Yt===void 0||cr===void 0))return Fe(Yt,cr,$)}}:Fe(pe,ke,$)}function Lc(y,m,L){return m.type==="color"?L=lo.parse(L):m.type==="formatted"?L=Us.fromString(L.toString()):m.type==="resolvedImage"?L=xs.fromString(L.toString()):ta(L)!==m.type&&(m.type!=="enum"||!m.values[L])&&(L=void 0),iu(L,y.default,m.default)}function Pc(y,m,L,q){var Y=q-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var lc=function(m,L){this.expression=m,this._warningHistory={},this._evaluator=new Hl,this._defaultValue=L?Rc(L):null,this._enumValues=L&&L.type==="enum"?L.values:null};lc.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._evaluator.globals=m,this._evaluator.feature=L,this._evaluator.featureState=q,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=$,this.expression.evaluate(this._evaluator)},lc.prototype.evaluate=function(m,L,q,Y,j,$){this._evaluator.globals=m,this._evaluator.feature=L||null,this._evaluator.featureState=q||null,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=$||null;try{var pe=this.expression.evaluate(this._evaluator);if(pe==null||typeof pe=="number"&&pe!==pe)return this._defaultValue;if(this._enumValues&&!(pe in this._enumValues))throw new Co("Expected value to be one of "+Object.keys(this._enumValues).map(function(ke){return JSON.stringify(ke)}).join(", ")+", but found "+JSON.stringify(pe)+" instead.");return pe}catch(ke){return this._warningHistory[ke.message]||(this._warningHistory[ke.message]=!0,typeof console!="undefined"&&console.warn(ke.message)),this._defaultValue}};function Rh(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Ji}function $c(y,m){var L=new Vs(Ji,[],m?Gv(m):void 0),q=L.parse(y,void 0,void 0,void 0,m&&m.type==="string"?{typeAnnotation:"coerce"}:void 0);return q?Na(new lc(q,m)):bs(L.errors)}var uc=function(m,L){this.kind=m,this._styleExpression=L,this.isStateDependent=m!=="constant"&&!al(L.expression)};uc.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._styleExpression.evaluateWithoutErrorHandling(m,L,q,Y,j,$)},uc.prototype.evaluate=function(m,L,q,Y,j,$){return this._styleExpression.evaluate(m,L,q,Y,j,$)};var gf=function(m,L,q,Y){this.kind=m,this.zoomStops=q,this._styleExpression=L,this.isStateDependent=m!=="camera"&&!al(L.expression),this.interpolationType=Y};gf.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._styleExpression.evaluateWithoutErrorHandling(m,L,q,Y,j,$)},gf.prototype.evaluate=function(m,L,q,Y,j,$){return this._styleExpression.evaluate(m,L,q,Y,j,$)},gf.prototype.interpolationFactor=function(m,L,q){return this.interpolationType?Hs.interpolationFactor(this.interpolationType,m,L,q):0};function Wu(y,m){if(y=$c(y,m),y.result==="error")return y;var L=y.value.expression,q=fv(L);if(!q&&!Zo(m))return bs([new $o("","data expressions not supported")]);var Y=ru(L,["zoom"]);if(!Y&&!Bo(m))return bs([new $o("","zoom expressions not supported")]);var j=Ih(L);if(!j&&!Y)return bs([new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(j instanceof $o)return bs([j]);if(j instanceof Hs&&!hi(m))return bs([new $o("",'"interpolate" expressions cannot be used with this property')]);if(!j)return Na(q?new uc("constant",y.value):new uc("source",y.value));var $=j instanceof Hs?j.interpolation:void 0;return Na(q?new gf("camera",y.value,j.labels,$):new gf("composite",y.value,j.labels,$))}var Dh=function(m,L){this._parameters=m,this._specification=L,Pl(this,Yl(this._parameters,this._specification))};Dh.deserialize=function(m){return new Dh(m._parameters,m._specification)},Dh.serialize=function(m){return{_parameters:m._parameters,_specification:m._specification}};function Hv(y,m){if(ws(y))return new Dh(y,m);if(Rh(y)){var L=Wu(y,m);if(L.result==="error")throw new Error(L.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return L.value}else{var q=y;return typeof y=="string"&&m.type==="color"&&(q=lo.parse(y)),{kind:"constant",evaluate:function(){return q}}}}function Ih(y){var m=null;if(y instanceof Nf)m=Ih(y.result);else if(y instanceof Bf)for(var L=0,q=y.args;L<q.length;L+=1){var Y=q[L];if(m=Ih(Y),m)break}else(y instanceof Dl||y instanceof Hs)&&y.input instanceof ho&&y.input.name==="zoom"&&(m=y);return m instanceof $o||y.eachChild(function(j){var $=Ih(j);$ instanceof $o?m=$:!m&&$?m=new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):m&&$&&m!==$&&(m=new $o("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),m}function Gv(y){var m={color:Fs,string:Aa,number:ni,enum:Aa,boolean:Ca,formatted:dl,resolvedImage:ff};return y.type==="array"?$s(m[y.value]||Ma,y.length):m[y.type]}function Rc(y){return y.type==="color"&&ws(y.default)?new lo(0,0,0,0):y.type==="color"?lo.parse(y.default)||null:y.default===void 0?null:y.default}function Mu(y){var m=y.key,L=y.value,q=y.valueSpec||{},Y=y.objectElementValidators||{},j=y.style,$=y.styleSpec,pe=[],ke=ta(L);if(ke!=="object")return[new bi(m,L,"object expected, "+ke+" found")];for(var Fe in L){var Ue=Fe.split(".")[0],ut=q[Ue]||q["*"],St=void 0;if(Y[Ue])St=Y[Ue];else if(q[Ue])St=ba;else if(Y["*"])St=Y["*"];else if(q["*"])St=ba;else{pe.push(new bi(m,L[Fe],'unknown property "'+Fe+'"'));continue}pe=pe.concat(St({key:(m&&m+".")+Fe,value:L[Fe],valueSpec:ut,style:j,styleSpec:$,object:L,objectKey:Fe},L))}for(var bt in q)Y[bt]||q[bt].required&&q[bt].default===void 0&&L[bt]===void 0&&pe.push(new bi(m,L,'missing required property "'+bt+'"'));return pe}function eh(y){var m=y.value,L=y.valueSpec,q=y.style,Y=y.styleSpec,j=y.key,$=y.arrayElementValidator||ba;if(ta(m)!=="array")return[new bi(j,m,"array expected, "+ta(m)+" found")];if(L.length&&m.length!==L.length)return[new bi(j,m,"array length "+L.length+" expected, length "+m.length+" found")];if(L["min-length"]&&m.length<L["min-length"])return[new bi(j,m,"array length at least "+L["min-length"]+" expected, length "+m.length+" found")];var pe={type:L.value,values:L.values};Y.$version<7&&(pe.function=L.function),ta(L.value)==="object"&&(pe=L.value);for(var ke=[],Fe=0;Fe<m.length;Fe++)ke=ke.concat($({array:m,arrayIndex:Fe,value:m[Fe],valueSpec:pe,style:q,styleSpec:Y,key:j+"["+Fe+"]"}));return ke}function th(y){var m=y.key,L=y.value,q=y.valueSpec,Y=ta(L);return Y==="number"&&L!==L&&(Y="NaN"),Y!=="number"?[new bi(m,L,"number expected, "+Y+" found")]:"minimum"in q&&L<q.minimum?[new bi(m,L,L+" is less than the minimum value "+q.minimum)]:"maximum"in q&&L>q.maximum?[new bi(m,L,L+" is greater than the maximum value "+q.maximum)]:[]}function rh(y){var m=y.valueSpec,L=ss(y.value.type),q,Y={},j,$,pe=L!=="categorical"&&y.value.property===void 0,ke=!pe,Fe=ta(y.value.stops)==="array"&&ta(y.value.stops[0])==="array"&&ta(y.value.stops[0][0])==="object",Ue=Mu({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:ut,default:Yt}});return L==="identity"&&pe&&Ue.push(new bi(y.key,y.value,'missing required property "property"')),L!=="identity"&&!y.value.stops&&Ue.push(new bi(y.key,y.value,'missing required property "stops"')),L==="exponential"&&y.valueSpec.expression&&!hi(y.valueSpec)&&Ue.push(new bi(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(ke&&!Zo(y.valueSpec)?Ue.push(new bi(y.key,y.value,"property functions not supported")):pe&&!Bo(y.valueSpec)&&Ue.push(new bi(y.key,y.value,"zoom functions not supported"))),(L==="categorical"||Fe)&&y.value.property===void 0&&Ue.push(new bi(y.key,y.value,'"property" property is required')),Ue;function ut(cr){if(L==="identity")return[new bi(cr.key,cr.value,'identity function may not have a "stops" property')];var Ir=[],Ar=cr.value;return Ir=Ir.concat(eh({key:cr.key,value:Ar,valueSpec:cr.valueSpec,style:cr.style,styleSpec:cr.styleSpec,arrayElementValidator:St})),ta(Ar)==="array"&&Ar.length===0&&Ir.push(new bi(cr.key,Ar,"array must have at least one stop")),Ir}function St(cr){var Ir=[],Ar=cr.value,en=cr.key;if(ta(Ar)!=="array")return[new bi(en,Ar,"array expected, "+ta(Ar)+" found")];if(Ar.length!==2)return[new bi(en,Ar,"array length 2 expected, length "+Ar.length+" found")];if(Fe){if(ta(Ar[0])!=="object")return[new bi(en,Ar,"object expected, "+ta(Ar[0])+" found")];if(Ar[0].zoom===void 0)return[new bi(en,Ar,"object stop key must have zoom")];if(Ar[0].value===void 0)return[new bi(en,Ar,"object stop key must have value")];if($&&$>ss(Ar[0].zoom))return[new bi(en,Ar[0].zoom,"stop zoom values must appear in ascending order")];ss(Ar[0].zoom)!==$&&($=ss(Ar[0].zoom),j=void 0,Y={}),Ir=Ir.concat(Mu({key:en+"[0]",value:Ar[0],valueSpec:{zoom:{}},style:cr.style,styleSpec:cr.styleSpec,objectElementValidators:{zoom:th,value:bt}}))}else Ir=Ir.concat(bt({key:en+"[0]",value:Ar[0],valueSpec:{},style:cr.style,styleSpec:cr.styleSpec},Ar));return Rh(vl(Ar[1]))?Ir.concat([new bi(en+"[1]",Ar[1],"expressions are not allowed in function stops.")]):Ir.concat(ba({key:en+"[1]",value:Ar[1],valueSpec:m,style:cr.style,styleSpec:cr.styleSpec}))}function bt(cr,Ir){var Ar=ta(cr.value),en=ss(cr.value),Nr=cr.value!==null?cr.value:Ir;if(!q)q=Ar;else if(Ar!==q)return[new bi(cr.key,Nr,Ar+" stop domain type must match previous stop domain type "+q)];if(Ar!=="number"&&Ar!=="string"&&Ar!=="boolean")return[new bi(cr.key,Nr,"stop domain value must be a number, string, or boolean")];if(Ar!=="number"&&L!=="categorical"){var Qr="number expected, "+Ar+" found";return Zo(m)&&L===void 0&&(Qr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bi(cr.key,Nr,Qr)]}return L==="categorical"&&Ar==="number"&&(!isFinite(en)||Math.floor(en)!==en)?[new bi(cr.key,Nr,"integer expected, found "+en)]:L!=="categorical"&&Ar==="number"&&j!==void 0&&en<j?[new bi(cr.key,Nr,"stop domain values must appear in ascending order")]:(j=en,L==="categorical"&&en in Y?[new bi(cr.key,Nr,"stop domain values must be unique")]:(Y[en]=!0,[]))}function Yt(cr){return ba({key:cr.key,value:cr.value,valueSpec:m,style:cr.style,styleSpec:cr.styleSpec})}}function Gf(y){var m=(y.expressionContext==="property"?Wu:$c)(vl(y.value),y.valueSpec);if(m.result==="error")return m.value.map(function(q){return new bi(""+y.key+q.key,y.value,q.message)});var L=m.value.expression||m.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!L.outputDefined())return[new bi(y.key,y.value,'Invalid data expression for "'+y.propertyKey+'". Output values must be contained as literals within the expression.')];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!al(L))return[new bi(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!al(L))return[new bi(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!ru(L,["zoom","feature-state"]))return[new bi(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!fv(L))return[new bi(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fh(y){var m=y.value,L=y.key,q=ta(m);return q!=="boolean"?[new bi(L,m,"boolean expected, "+q+" found")]:[]}function Yv(y){var m=y.key,L=y.value,q=ta(L);return q!=="string"?[new bi(m,L,"color expected, "+q+" found")]:Ac(L)===null?[new bi(m,L,'color expected, "'+L+'" found')]:[]}function qh(y){var m=y.key,L=y.value,q=y.valueSpec,Y=[];return Array.isArray(q.values)?q.values.indexOf(ss(L))===-1&&Y.push(new bi(m,L,"expected one of ["+q.values.join(", ")+"], "+JSON.stringify(L)+" found")):Object.keys(q.values).indexOf(ss(L))===-1&&Y.push(new bi(m,L,"expected one of ["+Object.keys(q.values).join(", ")+"], "+JSON.stringify(L)+" found")),Y}function ou(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(var m=0,L=y.slice(1);m<L.length;m+=1){var q=L[m];if(!ou(q)&&typeof q!="boolean")return!1}return!0;default:return!0}}var de={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Te(y){if(y==null)return{filter:function(){return!0},needGeometry:!1};ou(y)||(y=Ge(y));var m=$c(y,de);if(m.result==="error")throw new Error(m.value.map(function(q){return q.key+": "+q.message}).join(", "));var L=De(y);return{filter:function(q,Y,j){return m.value.evaluate(q,Y,{},j)},needGeometry:L}}function Ce(y,m){return y<m?-1:y>m?1:0}function De(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var m=1;m<y.length;m++)if(De(y[m]))return!0;return!1}function Ge(y){if(!y)return!0;var m=y[0];if(y.length<=1)return m!=="any";var L=m==="=="?He(y[1],y[2],"=="):m==="!="?It(He(y[1],y[2],"==")):m==="<"||m===">"||m==="<="||m===">="?He(y[1],y[2],m):m==="any"?Qe(y.slice(1)):m==="all"?["all"].concat(y.slice(1).map(Ge)):m==="none"?["all"].concat(y.slice(1).map(Ge).map(It)):m==="in"?Ft(y[1],y.slice(2)):m==="!in"?It(Ft(y[1],y.slice(2))):m==="has"?jt(y[1]):m==="!has"?It(jt(y[1])):m==="within"?y:!0;return L}function He(y,m,L){switch(y){case"$type":return["filter-type-"+L,m];case"$id":return["filter-id-"+L,m];default:return["filter-"+L,y,m]}}function Qe(y){return["any"].concat(y.map(Ge))}function Ft(y,m){if(m.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",m]];case"$id":return["filter-id-in",["literal",m]];default:return m.length>200&&!m.some(function(L){return typeof L!=typeof m[0]})?["filter-in-large",y,["literal",m.sort(Ce)]]:["filter-in-small",y,["literal",m]]}}function jt(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function It(y){return["!",y]}function Kt(y){return ou(vl(y.value))?Gf(Pl({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ir(y)}function ir(y){var m=y.value,L=y.key;if(ta(m)!=="array")return[new bi(L,m,"array expected, "+ta(m)+" found")];var q=y.styleSpec,Y,j=[];if(m.length<1)return[new bi(L,m,"filter array must have at least 1 element")];switch(j=j.concat(qh({key:L+"[0]",value:m[0],valueSpec:q.filter_operator,style:y.style,styleSpec:y.styleSpec})),ss(m[0])){case"<":case"<=":case">":case">=":m.length>=2&&ss(m[1])==="$type"&&j.push(new bi(L,m,'"$type" cannot be use with operator "'+m[0]+'"'));case"==":case"!=":m.length!==3&&j.push(new bi(L,m,'filter array for operator "'+m[0]+'" must have 3 elements'));case"in":case"!in":m.length>=2&&(Y=ta(m[1]),Y!=="string"&&j.push(new bi(L+"[1]",m[1],"string expected, "+Y+" found")));for(var $=2;$<m.length;$++)Y=ta(m[$]),ss(m[1])==="$type"?j=j.concat(qh({key:L+"["+$+"]",value:m[$],valueSpec:q.geometry_type,style:y.style,styleSpec:y.styleSpec})):Y!=="string"&&Y!=="number"&&Y!=="boolean"&&j.push(new bi(L+"["+$+"]",m[$],"string, number, or boolean expected, "+Y+" found"));break;case"any":case"all":case"none":for(var pe=1;pe<m.length;pe++)j=j.concat(ir({key:L+"["+pe+"]",value:m[pe],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":Y=ta(m[1]),m.length!==2?j.push(new bi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="string"&&j.push(new bi(L+"[1]",m[1],"string expected, "+Y+" found"));break;case"within":Y=ta(m[1]),m.length!==2?j.push(new bi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="object"&&j.push(new bi(L+"[1]",m[1],"object expected, "+Y+" found"));break}return j}function mr(y,m){var L=y.key,q=y.style,Y=y.styleSpec,j=y.value,$=y.objectKey,pe=Y[m+"_"+y.layerType];if(!pe)return[];var ke=$.match(/^(.*)-transition$/);if(m==="paint"&&ke&&pe[ke[1]]&&pe[ke[1]].transition)return ba({key:L,value:j,valueSpec:Y.transition,style:q,styleSpec:Y});var Fe=y.valueSpec||pe[$];if(!Fe)return[new bi(L,j,'unknown property "'+$+'"')];var Ue;if(ta(j)==="string"&&Zo(Fe)&&!Fe.tokens&&(Ue=/^{([^}]+)}$/.exec(j)))return[new bi(L,j,'"'+$+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ue[1])+" }`.")];var ut=[];return y.layerType==="symbol"&&($==="text-field"&&q&&!q.glyphs&&ut.push(new bi(L,j,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&ws(vl(j))&&ss(j.type)==="identity"&&ut.push(new bi(L,j,'"text-font" does not support identity functions'))),ut.concat(ba({key:y.key,value:j,valueSpec:Fe,style:q,styleSpec:Y,expressionContext:"property",propertyType:m,propertyKey:$}))}function Sr(y){return mr(y,"paint")}function Vr(y){return mr(y,"layout")}function sn(y){var m=[],L=y.value,q=y.key,Y=y.style,j=y.styleSpec;!L.type&&!L.ref&&m.push(new bi(q,L,'either "type" or "ref" is required'));var $=ss(L.type),pe=ss(L.ref);if(L.id)for(var ke=ss(L.id),Fe=0;Fe<y.arrayIndex;Fe++){var Ue=Y.layers[Fe];ss(Ue.id)===ke&&m.push(new bi(q,L.id,'duplicate layer id "'+L.id+'", previously used at line '+Ue.id.__line__))}if("ref"in L){["type","source","source-layer","filter","layout"].forEach(function(Yt){Yt in L&&m.push(new bi(q,L[Yt],'"'+Yt+'" is prohibited for ref layers'))});var ut;Y.layers.forEach(function(Yt){ss(Yt.id)===pe&&(ut=Yt)}),ut?ut.ref?m.push(new bi(q,L.ref,"ref cannot reference another ref layer")):$=ss(ut.type):m.push(new bi(q,L.ref,'ref layer "'+pe+'" not found'))}else if($!=="background")if(!L.source)m.push(new bi(q,L,'missing required property "source"'));else{var St=Y.sources&&Y.sources[L.source],bt=St&&ss(St.type);St?bt==="vector"&&$==="raster"?m.push(new bi(q,L.source,'layer "'+L.id+'" requires a raster source')):bt==="raster"&&$!=="raster"?m.push(new bi(q,L.source,'layer "'+L.id+'" requires a vector source')):bt==="vector"&&!L["source-layer"]?m.push(new bi(q,L,'layer "'+L.id+'" must specify a "source-layer"')):bt==="raster-dem"&&$!=="hillshade"?m.push(new bi(q,L.source,"raster-dem source can only be used with layer type 'hillshade'.")):$==="line"&&L.paint&&L.paint["line-gradient"]&&(bt!=="geojson"||!St.lineMetrics)&&m.push(new bi(q,L,'layer "'+L.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):m.push(new bi(q,L.source,'source "'+L.source+'" not found'))}return m=m.concat(Mu({key:q,value:L,valueSpec:j.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ba({key:q+".type",value:L.type,valueSpec:j.layer.type,style:y.style,styleSpec:y.styleSpec,object:L,objectKey:"type"})},filter:Kt,layout:function(cr){return Mu({layer:L,key:cr.key,value:cr.value,style:cr.style,styleSpec:cr.styleSpec,objectElementValidators:{"*":function(Ar){return Vr(Pl({layerType:$},Ar))}}})},paint:function(cr){return Mu({layer:L,key:cr.key,value:cr.value,style:cr.style,styleSpec:cr.styleSpec,objectElementValidators:{"*":function(Ar){return Sr(Pl({layerType:$},Ar))}}})}}})),m}function kn(y){var m=y.value,L=y.key,q=ta(m);return q!=="string"?[new bi(L,m,"string expected, "+q+" found")]:[]}var yi={promoteId:ra};function Qi(y){var m=y.value,L=y.key,q=y.styleSpec,Y=y.style;if(!m.type)return[new bi(L,m,'"type" is required')];var j=ss(m.type),$;switch(j){case"vector":case"raster":case"raster-dem":return $=Mu({key:L,value:m,valueSpec:q["source_"+j.replace("-","_")],style:y.style,styleSpec:q,objectElementValidators:yi}),$;case"geojson":if($=Mu({key:L,value:m,valueSpec:q.source_geojson,style:Y,styleSpec:q,objectElementValidators:yi}),m.cluster)for(var pe in m.clusterProperties){var ke=m.clusterProperties[pe],Fe=ke[0],Ue=ke[1],ut=typeof Fe=="string"?[Fe,["accumulated"],["get",pe]]:Fe;$.push.apply($,Gf({key:L+"."+pe+".map",value:Ue,expressionContext:"cluster-map"})),$.push.apply($,Gf({key:L+"."+pe+".reduce",value:ut,expressionContext:"cluster-reduce"}))}return $;case"video":return Mu({key:L,value:m,valueSpec:q.source_video,style:Y,styleSpec:q});case"image":return Mu({key:L,value:m,valueSpec:q.source_image,style:Y,styleSpec:q});case"canvas":return[new bi(L,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qh({key:L+".type",value:m.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Y,styleSpec:q})}}function ra(y){var m=y.key,L=y.value;if(ta(L)==="string")return kn({key:m,value:L});var q=[];for(var Y in L)q.push.apply(q,kn({key:m+"."+Y,value:L[Y]}));return q}function sa(y){var m=y.value,L=y.styleSpec,q=L.light,Y=y.style,j=[],$=ta(m);if(m===void 0)return j;if($!=="object")return j=j.concat([new bi("light",m,"object expected, "+$+" found")]),j;for(var pe in m){var ke=pe.match(/^(.*)-transition$/);ke&&q[ke[1]]&&q[ke[1]].transition?j=j.concat(ba({key:pe,value:m[pe],valueSpec:L.transition,style:Y,styleSpec:L})):q[pe]?j=j.concat(ba({key:pe,value:m[pe],valueSpec:q[pe],style:Y,styleSpec:L})):j=j.concat([new bi(pe,m[pe],'unknown property "'+pe+'"')])}return j}function pa(y){return kn(y).length===0?[]:Gf(y)}function Lo(y){return kn(y).length===0?[]:Gf(y)}var jo={"*":function(){return[]},array:eh,boolean:Fh,number:th,color:Yv,constants:ac,enum:qh,filter:Kt,function:rh,layer:sn,object:Mu,source:Qi,light:sa,string:kn,formatted:pa,resolvedImage:Lo};function ba(y){var m=y.value,L=y.valueSpec,q=y.styleSpec;if(L.expression&&ws(ss(m)))return rh(y);if(L.expression&&Rh(vl(m)))return Gf(y);if(L.type&&jo[L.type])return jo[L.type](y);var Y=Mu(Pl({},y,{valueSpec:L.type?q[L.type]:L}));return Y}function qa(y){var m=y.value,L=y.key,q=kn(y);return q.length||(m.indexOf("{fontstack}")===-1&&q.push(new bi(L,m,'"glyphs" url must include a "{fontstack}" token')),m.indexOf("{range}")===-1&&q.push(new bi(L,m,'"glyphs" url must include a "{range}" token'))),q}function ds(y,m){m===void 0&&(m=hn);var L=[];return L=L.concat(ba({key:"",value:y,valueSpec:m.$root,styleSpec:m,style:y,objectElementValidators:{glyphs:qa,"*":function(){return[]}}})),y.constants&&(L=L.concat(ac({key:"constants",value:y.constants,style:y,styleSpec:m}))),ol(L)}ds.source=el(Qi),ds.light=el(sa),ds.layer=el(sn),ds.filter=el(Kt),ds.paintProperty=el(Sr),ds.layoutProperty=el(Vr);function ol(y){return[].concat(y).sort(function(m,L){return m.line-L.line})}function el(y){return function(){for(var m=[],L=arguments.length;L--;)m[L]=arguments[L];return ol(y.apply(this,m))}}var to=ds,Ya=to.light,Il=to.paintProperty,Sl=to.layoutProperty;function Su(y,m){var L=!1;if(m&&m.length)for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];y.fire(new Li(new Error(j.message))),L=!0}return L}var su=El,Fl=3;function El(y,m,L){var q=this.cells=[];if(y instanceof ArrayBuffer){this.arrayBuffer=y;var Y=new Int32Array(this.arrayBuffer);y=Y[0],m=Y[1],L=Y[2],this.d=m+2*L;for(var j=0;j<this.d*this.d;j++){var $=Y[Fl+j],pe=Y[Fl+j+1];q.push($===pe?null:Y.subarray($,pe))}var ke=Y[Fl+q.length],Fe=Y[Fl+q.length+1];this.keys=Y.subarray(ke,Fe),this.bboxes=Y.subarray(Fe),this.insert=this._insertReadonly}else{this.d=m+2*L;for(var Ue=0;Ue<this.d*this.d;Ue++)q.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=y,this.padding=L,this.scale=m/y,this.uid=0;var ut=L/m*y;this.min=-ut,this.max=y+ut}El.prototype.insert=function(y,m,L,q,Y){this._forEachCell(m,L,q,Y,this._insertCell,this.uid++),this.keys.push(y),this.bboxes.push(m),this.bboxes.push(L),this.bboxes.push(q),this.bboxes.push(Y)},El.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},El.prototype._insertCell=function(y,m,L,q,Y,j){this.cells[Y].push(j)},El.prototype.query=function(y,m,L,q,Y){var j=this.min,$=this.max;if(y<=j&&m<=j&&$<=L&&$<=q&&!Y)return Array.prototype.slice.call(this.keys);var pe=[],ke={};return this._forEachCell(y,m,L,q,this._queryCell,pe,ke,Y),pe},El.prototype._queryCell=function(y,m,L,q,Y,j,$,pe){var ke=this.cells[Y];if(ke!==null)for(var Fe=this.keys,Ue=this.bboxes,ut=0;ut<ke.length;ut++){var St=ke[ut];if($[St]===void 0){var bt=St*4;(pe?pe(Ue[bt+0],Ue[bt+1],Ue[bt+2],Ue[bt+3]):y<=Ue[bt+2]&&m<=Ue[bt+3]&&L>=Ue[bt+0]&&q>=Ue[bt+1])?($[St]=!0,j.push(Fe[St])):$[St]=!1}}},El.prototype._forEachCell=function(y,m,L,q,Y,j,$,pe){for(var ke=this._convertToCellCoord(y),Fe=this._convertToCellCoord(m),Ue=this._convertToCellCoord(L),ut=this._convertToCellCoord(q),St=ke;St<=Ue;St++)for(var bt=Fe;bt<=ut;bt++){var Yt=this.d*bt+St;if(!(pe&&!pe(this._convertFromCellCoord(St),this._convertFromCellCoord(bt),this._convertFromCellCoord(St+1),this._convertFromCellCoord(bt+1)))&&Y.call(this,y,m,L,q,Yt,j,$,pe))return}},El.prototype._convertFromCellCoord=function(y){return(y-this.padding)/this.scale},El.prototype._convertToCellCoord=function(y){return Math.max(0,Math.min(this.d-1,Math.floor(y*this.scale)+this.padding))},El.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var y=this.cells,m=Fl+this.cells.length+1+1,L=0,q=0;q<this.cells.length;q++)L+=this.cells[q].length;var Y=new Int32Array(m+L+this.keys.length+this.bboxes.length);Y[0]=this.extent,Y[1]=this.n,Y[2]=this.padding;for(var j=m,$=0;$<y.length;$++){var pe=y[$];Y[Fl+$]=j,Y.set(pe,j),j+=pe.length}return Y[Fl+y.length]=j,Y.set(this.keys,j),j+=this.keys.length,Y[Fl+y.length+1]=j,Y.set(this.bboxes,j),j+=this.bboxes.length,Y.buffer};var yf=c.ImageData,Xu=c.ImageBitmap,Zu={};function U(y,m,L){L===void 0&&(L={}),Object.defineProperty(m,"_classRegistryKey",{value:y,writeable:!1}),Zu[y]={klass:m,omit:L.omit||[],shallow:L.shallow||[]}}U("Object",Object),su.serialize=function(m,L){var q=m.toArrayBuffer();return L&&L.push(q),{buffer:q}},su.deserialize=function(m){return new su(m.buffer)},U("Grid",su),U("Color",lo),U("Error",Error),U("ResolvedImage",xs),U("StylePropertyFunction",Dh),U("StyleExpression",lc,{omit:["_evaluator"]}),U("ZoomDependentExpression",gf),U("ZoomConstantExpression",uc),U("CompoundExpression",ho,{omit:["_evaluate"]});for(var Q in Ji)Ji[Q]._classRegistryKey||U("Expression_"+Q,Ji[Q]);function se(y){return y&&typeof ArrayBuffer!="undefined"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function me(y){return Xu&&y instanceof Xu}function we(y,m){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp)return y;if(se(y)||me(y))return m&&m.push(y),y;if(ArrayBuffer.isView(y)){var L=y;return m&&m.push(L.buffer),L}if(y instanceof yf)return m&&m.push(y.data.buffer),y;if(Array.isArray(y)){for(var q=[],Y=0,j=y;Y<j.length;Y+=1){var $=j[Y];q.push(we($,m))}return q}if(typeof y=="object"){var pe=y.constructor,ke=pe._classRegistryKey;if(!ke)throw new Error("can't serialize object of unregistered class");var Fe=pe.serialize?pe.serialize(y,m):{};if(!pe.serialize){for(var Ue in y)if(y.hasOwnProperty(Ue)&&!(Zu[ke].omit.indexOf(Ue)>=0)){var ut=y[Ue];Fe[Ue]=Zu[ke].shallow.indexOf(Ue)>=0?ut:we(ut,m)}y instanceof Error&&(Fe.message=y.message)}if(Fe.$name)throw new Error("$name property is reserved for worker serialization logic.");return ke!=="Object"&&(Fe.$name=ke),Fe}throw new Error("can't serialize object of type "+typeof y)}function Me(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||se(y)||me(y)||ArrayBuffer.isView(y)||y instanceof yf)return y;if(Array.isArray(y))return y.map(Me);if(typeof y=="object"){var m=y.$name||"Object",L=Zu[m],q=L.klass;if(!q)throw new Error("can't deserialize unregistered class "+m);if(q.deserialize)return q.deserialize(y);for(var Y=Object.create(q.prototype),j=0,$=Object.keys(y);j<$.length;j+=1){var pe=$[j];if(pe!=="$name"){var ke=y[pe];Y[pe]=Zu[m].shallow.indexOf(pe)>=0?ke:Me(ke)}}return Y}throw new Error("can't deserialize object of type "+typeof y)}var Ye=function(){this.first=!0};Ye.prototype.update=function(m,L){var q=Math.floor(m);return this.first?(this.first=!1,this.lastIntegerZoom=q,this.lastIntegerZoomTime=0,this.lastZoom=m,this.lastFloorZoom=q,!0):(this.lastFloorZoom>q?(this.lastIntegerZoom=q+1,this.lastIntegerZoomTime=L):this.lastFloorZoom<q&&(this.lastIntegerZoom=q,this.lastIntegerZoomTime=L),m!==this.lastZoom?(this.lastZoom=m,this.lastFloorZoom=q,!0):!1)};var Pe={"Latin-1 Supplement":function(y){return y>=128&&y<=255},Arabic:function(y){return y>=1536&&y<=1791},"Arabic Supplement":function(y){return y>=1872&&y<=1919},"Arabic Extended-A":function(y){return y>=2208&&y<=2303},"Hangul Jamo":function(y){return y>=4352&&y<=4607},"Unified Canadian Aboriginal Syllabics":function(y){return y>=5120&&y<=5759},Khmer:function(y){return y>=6016&&y<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(y){return y>=6320&&y<=6399},"General Punctuation":function(y){return y>=8192&&y<=8303},"Letterlike Symbols":function(y){return y>=8448&&y<=8527},"Number Forms":function(y){return y>=8528&&y<=8591},"Miscellaneous Technical":function(y){return y>=8960&&y<=9215},"Control Pictures":function(y){return y>=9216&&y<=9279},"Optical Character Recognition":function(y){return y>=9280&&y<=9311},"Enclosed Alphanumerics":function(y){return y>=9312&&y<=9471},"Geometric Shapes":function(y){return y>=9632&&y<=9727},"Miscellaneous Symbols":function(y){return y>=9728&&y<=9983},"Miscellaneous Symbols and Arrows":function(y){return y>=11008&&y<=11263},"CJK Radicals Supplement":function(y){return y>=11904&&y<=12031},"Kangxi Radicals":function(y){return y>=12032&&y<=12255},"Ideographic Description Characters":function(y){return y>=12272&&y<=12287},"CJK Symbols and Punctuation":function(y){return y>=12288&&y<=12351},Hiragana:function(y){return y>=12352&&y<=12447},Katakana:function(y){return y>=12448&&y<=12543},Bopomofo:function(y){return y>=12544&&y<=12591},"Hangul Compatibility Jamo":function(y){return y>=12592&&y<=12687},Kanbun:function(y){return y>=12688&&y<=12703},"Bopomofo Extended":function(y){return y>=12704&&y<=12735},"CJK Strokes":function(y){return y>=12736&&y<=12783},"Katakana Phonetic Extensions":function(y){return y>=12784&&y<=12799},"Enclosed CJK Letters and Months":function(y){return y>=12800&&y<=13055},"CJK Compatibility":function(y){return y>=13056&&y<=13311},"CJK Unified Ideographs Extension A":function(y){return y>=13312&&y<=19903},"Yijing Hexagram Symbols":function(y){return y>=19904&&y<=19967},"CJK Unified Ideographs":function(y){return y>=19968&&y<=40959},"Yi Syllables":function(y){return y>=40960&&y<=42127},"Yi Radicals":function(y){return y>=42128&&y<=42191},"Hangul Jamo Extended-A":function(y){return y>=43360&&y<=43391},"Hangul Syllables":function(y){return y>=44032&&y<=55215},"Hangul Jamo Extended-B":function(y){return y>=55216&&y<=55295},"Private Use Area":function(y){return y>=57344&&y<=63743},"CJK Compatibility Ideographs":function(y){return y>=63744&&y<=64255},"Arabic Presentation Forms-A":function(y){return y>=64336&&y<=65023},"Vertical Forms":function(y){return y>=65040&&y<=65055},"CJK Compatibility Forms":function(y){return y>=65072&&y<=65103},"Small Form Variants":function(y){return y>=65104&&y<=65135},"Arabic Presentation Forms-B":function(y){return y>=65136&&y<=65279},"Halfwidth and Fullwidth Forms":function(y){return y>=65280&&y<=65519}};function tt(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if($t(q.charCodeAt(0)))return!0}return!1}function Mt(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(!kt(q.charCodeAt(0)))return!1}return!0}function kt(y){return!(Pe.Arabic(y)||Pe["Arabic Supplement"](y)||Pe["Arabic Extended-A"](y)||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y))}function er(y){return y<11904?!1:!!(Pe["Bopomofo Extended"](y)||Pe.Bopomofo(y)||Pe["CJK Compatibility Forms"](y)||Pe["CJK Compatibility Ideographs"](y)||Pe["CJK Compatibility"](y)||Pe["CJK Radicals Supplement"](y)||Pe["CJK Strokes"](y)||Pe["CJK Symbols and Punctuation"](y)||Pe["CJK Unified Ideographs Extension A"](y)||Pe["CJK Unified Ideographs"](y)||Pe["Enclosed CJK Letters and Months"](y)||Pe["Halfwidth and Fullwidth Forms"](y)||Pe.Hiragana(y)||Pe["Ideographic Description Characters"](y)||Pe["Kangxi Radicals"](y)||Pe["Katakana Phonetic Extensions"](y)||Pe.Katakana(y)||Pe["Vertical Forms"](y)||Pe["Yi Radicals"](y)||Pe["Yi Syllables"](y))}function $t(y){return y===746||y===747?!0:y<4352?!1:!!(Pe["Bopomofo Extended"](y)||Pe.Bopomofo(y)||Pe["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||Pe["CJK Compatibility Ideographs"](y)||Pe["CJK Compatibility"](y)||Pe["CJK Radicals Supplement"](y)||Pe["CJK Strokes"](y)||Pe["CJK Symbols and Punctuation"](y)&&!(y>=12296&&y<=12305)&&!(y>=12308&&y<=12319)&&y!==12336||Pe["CJK Unified Ideographs Extension A"](y)||Pe["CJK Unified Ideographs"](y)||Pe["Enclosed CJK Letters and Months"](y)||Pe["Hangul Compatibility Jamo"](y)||Pe["Hangul Jamo Extended-A"](y)||Pe["Hangul Jamo Extended-B"](y)||Pe["Hangul Jamo"](y)||Pe["Hangul Syllables"](y)||Pe.Hiragana(y)||Pe["Ideographic Description Characters"](y)||Pe.Kanbun(y)||Pe["Kangxi Radicals"](y)||Pe["Katakana Phonetic Extensions"](y)||Pe.Katakana(y)&&y!==12540||Pe["Halfwidth and Fullwidth Forms"](y)&&y!==65288&&y!==65289&&y!==65293&&!(y>=65306&&y<=65310)&&y!==65339&&y!==65341&&y!==65343&&!(y>=65371&&y<=65503)&&y!==65507&&!(y>=65512&&y<=65519)||Pe["Small Form Variants"](y)&&!(y>=65112&&y<=65118)&&!(y>=65123&&y<=65126)||Pe["Unified Canadian Aboriginal Syllabics"](y)||Pe["Unified Canadian Aboriginal Syllabics Extended"](y)||Pe["Vertical Forms"](y)||Pe["Yijing Hexagram Symbols"](y)||Pe["Yi Syllables"](y)||Pe["Yi Radicals"](y))}function Tr(y){return!!(Pe["Latin-1 Supplement"](y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||Pe["General Punctuation"](y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||Pe["Letterlike Symbols"](y)||Pe["Number Forms"](y)||Pe["Miscellaneous Technical"](y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||Pe["Control Pictures"](y)&&y!==9251||Pe["Optical Character Recognition"](y)||Pe["Enclosed Alphanumerics"](y)||Pe["Geometric Shapes"](y)||Pe["Miscellaneous Symbols"](y)&&!(y>=9754&&y<=9759)||Pe["Miscellaneous Symbols and Arrows"](y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Pe["CJK Symbols and Punctuation"](y)||Pe.Katakana(y)||Pe["Private Use Area"](y)||Pe["CJK Compatibility Forms"](y)||Pe["Small Form Variants"](y)||Pe["Halfwidth and Fullwidth Forms"](y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}function Er(y){return!($t(y)||Tr(y))}function rr(y){return Pe.Arabic(y)||Pe["Arabic Supplement"](y)||Pe["Arabic Extended-A"](y)||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y)}function dr(y){return y>=1424&&y<=2303||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y)}function wr(y,m){return!(!m&&dr(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||Pe.Khmer(y))}function Pr(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(dr(q.charCodeAt(0)))return!0}return!1}function kr(y,m){for(var L=0,q=y;L<q.length;L+=1){var Y=q[L];if(!wr(Y.charCodeAt(0),m))return!1}return!0}var vr={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},gn=null,bn=vr.unavailable,In=null,Xn=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(bn=vr.error),gn&&gn(y)};function Ci(){Fi.fire(new Ra("pluginStateChange",{pluginStatus:bn,pluginURL:In}))}var Fi=new Yn,xa=function(){return bn},Gi=function(y){return y({pluginStatus:bn,pluginURL:In}),Fi.on("pluginStateChange",y),y},va=function(y,m,L){if(L===void 0&&(L=!1),bn===vr.deferred||bn===vr.loading||bn===vr.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");In=Re.resolveURL(y),bn=vr.deferred,gn=m,Ci(),L||go()},go=function(){if(bn!==vr.deferred||!In)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bn=vr.loading,Ci(),In&&pr({url:In},function(y){y?Xn(y):(bn=vr.loaded,Ci())})},Po={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return bn===vr.loaded||Po.applyArabicShaping!=null},isLoading:function(){return bn===vr.loading},setState:function(m){bn=m.pluginStatus,In=m.pluginURL},isParsed:function(){return Po.applyArabicShaping!=null&&Po.processBidirectionalText!=null&&Po.processStyledBidirectionalText!=null},getPluginURL:function(){return In}},Ao=function(){!Po.isLoading()&&!Po.isLoaded()&&xa()==="deferred"&&go()},Sn=function(m,L){this.zoom=m,L?(this.now=L.now,this.fadeDuration=L.fadeDuration,this.zoomHistory=L.zoomHistory,this.transition=L.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ye,this.transition={})};Sn.prototype.isSupportedScript=function(m){return kr(m,Po.isLoaded())},Sn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sn.prototype.getCrossfadeParameters=function(){var m=this.zoom,L=m-Math.floor(m),q=this.crossFadingFactor();return m>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:L+(1-L)*q}:{fromScale:.5,toScale:1,t:1-(1-q)*L}};var da=function(m,L){this.property=m,this.value=L,this.expression=Hv(L===void 0?m.specification.default:L,m.specification)};da.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},da.prototype.possiblyEvaluate=function(m,L,q){return this.property.possiblyEvaluate(this,m,L,q)};var Sa=function(m){this.property=m,this.value=new da(m,void 0)};Sa.prototype.transitioned=function(m,L){return new Ts(this.property,this.value,L,x({},m.transition,this.transition),m.now)},Sa.prototype.untransitioned=function(){return new Ts(this.property,this.value,null,{},0)};var La=function(m){this._properties=m,this._values=Object.create(m.defaultTransitionablePropertyValues)};La.prototype.getValue=function(m){return B(this._values[m].value.value)},La.prototype.setValue=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].value=new da(this._values[m].property,L===null?void 0:B(L))},La.prototype.getTransition=function(m){return B(this._values[m].transition)},La.prototype.setTransition=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].transition=B(L)||void 0},La.prototype.serialize=function(){for(var m={},L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j);var $=this.getTransition(Y);$!==void 0&&(m[Y+"-transition"]=$)}return m},La.prototype.transitioned=function(m,L){for(var q=new Gs(this._properties),Y=0,j=Object.keys(this._values);Y<j.length;Y+=1){var $=j[Y];q._values[$]=this._values[$].transitioned(m,L._values[$])}return q},La.prototype.untransitioned=function(){for(var m=new Gs(this._properties),L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L];m._values[Y]=this._values[Y].untransitioned()}return m};var Ts=function(m,L,q,Y,j){this.property=m,this.value=L,this.begin=j+Y.delay||0,this.end=this.begin+Y.duration||0,m.specification.transition&&(Y.delay||Y.duration)&&(this.prior=q)};Ts.prototype.possiblyEvaluate=function(m,L,q){var Y=m.now||0,j=this.value.possiblyEvaluate(m,L,q),$=this.prior;if($){if(Y>this.end)return this.prior=null,j;if(this.value.isDataDriven())return this.prior=null,j;if(Y<this.begin)return $.possiblyEvaluate(m,L,q);var pe=(Y-this.begin)/(this.end-this.begin);return this.property.interpolate($.possiblyEvaluate(m,L,q),j,p(pe))}else return j};var Gs=function(m){this._properties=m,this._values=Object.create(m.defaultTransitioningPropertyValues)};Gs.prototype.possiblyEvaluate=function(m,L,q){for(var Y=new Wl(this._properties),j=0,$=Object.keys(this._values);j<$.length;j+=1){var pe=$[j];Y._values[pe]=this._values[pe].possiblyEvaluate(m,L,q)}return Y},Gs.prototype.hasTransition=function(){for(var m=0,L=Object.keys(this._values);m<L.length;m+=1){var q=L[m];if(this._values[q].prior)return!0}return!1};var yl=function(m){this._properties=m,this._values=Object.create(m.defaultPropertyValues)};yl.prototype.getValue=function(m){return B(this._values[m].value)},yl.prototype.setValue=function(m,L){this._values[m]=new da(this._values[m].property,L===null?void 0:B(L))},yl.prototype.serialize=function(){for(var m={},L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j)}return m},yl.prototype.possiblyEvaluate=function(m,L,q){for(var Y=new Wl(this._properties),j=0,$=Object.keys(this._values);j<$.length;j+=1){var pe=$[j];Y._values[pe]=this._values[pe].possiblyEvaluate(m,L,q)}return Y};var ls=function(m,L,q){this.property=m,this.value=L,this.parameters=q};ls.prototype.isConstant=function(){return this.value.kind==="constant"},ls.prototype.constantOr=function(m){return this.value.kind==="constant"?this.value.value:m},ls.prototype.evaluate=function(m,L,q,Y){return this.property.evaluate(this.value,this.parameters,m,L,q,Y)};var Wl=function(m){this._properties=m,this._values=Object.create(m.defaultPossiblyEvaluatedValues)};Wl.prototype.get=function(m){return this._values[m]};var We=function(m){this.specification=m};We.prototype.possiblyEvaluate=function(m,L){return m.expression.evaluate(L)},We.prototype.interpolate=function(m,L,q){var Y=Tu[this.specification.type];return Y?Y(m,L,q):m};var Gt=function(m,L){this.specification=m,this.overrides=L};Gt.prototype.possiblyEvaluate=function(m,L,q,Y){return m.expression.kind==="constant"||m.expression.kind==="camera"?new ls(this,{kind:"constant",value:m.expression.evaluate(L,null,{},q,Y)},L):new ls(this,m.expression,L)},Gt.prototype.interpolate=function(m,L,q){if(m.value.kind!=="constant"||L.value.kind!=="constant")return m;if(m.value.value===void 0||L.value.value===void 0)return new ls(this,{kind:"constant",value:void 0},m.parameters);var Y=Tu[this.specification.type];return Y?new ls(this,{kind:"constant",value:Y(m.value.value,L.value.value,q)},m.parameters):m},Gt.prototype.evaluate=function(m,L,q,Y,j,$){return m.kind==="constant"?m.value:m.evaluate(L,q,Y,j,$)};var or=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(q,Y,j,$){if(q.value===void 0)return new ls(this,{kind:"constant",value:void 0},Y);if(q.expression.kind==="constant"){var pe=q.expression.evaluate(Y,null,{},j,$),ke=q.property.specification.type==="resolvedImage",Fe=ke&&typeof pe!="string"?pe.name:pe,Ue=this._calculate(Fe,Fe,Fe,Y);return new ls(this,{kind:"constant",value:Ue},Y)}else if(q.expression.kind==="camera"){var ut=this._calculate(q.expression.evaluate({zoom:Y.zoom-1}),q.expression.evaluate({zoom:Y.zoom}),q.expression.evaluate({zoom:Y.zoom+1}),Y);return new ls(this,{kind:"constant",value:ut},Y)}else return new ls(this,q.expression,Y)},m.prototype.evaluate=function(q,Y,j,$,pe,ke){if(q.kind==="source"){var Fe=q.evaluate(Y,j,$,pe,ke);return this._calculate(Fe,Fe,Fe,Y)}else return q.kind==="composite"?this._calculate(q.evaluate({zoom:Math.floor(Y.zoom)-1},j,$),q.evaluate({zoom:Math.floor(Y.zoom)},j,$),q.evaluate({zoom:Math.floor(Y.zoom)+1},j,$),Y):q.value},m.prototype._calculate=function(q,Y,j,$){var pe=$.zoom;return pe>$.zoomHistory.lastIntegerZoom?{from:q,to:Y}:{from:j,to:Y}},m.prototype.interpolate=function(q){return q},m}(Gt),qr=function(m){this.specification=m};qr.prototype.possiblyEvaluate=function(m,L,q,Y){if(m.value!==void 0)if(m.expression.kind==="constant"){var j=m.expression.evaluate(L,null,{},q,Y);return this._calculate(j,j,j,L)}else return this._calculate(m.expression.evaluate(new Sn(Math.floor(L.zoom-1),L)),m.expression.evaluate(new Sn(Math.floor(L.zoom),L)),m.expression.evaluate(new Sn(Math.floor(L.zoom+1),L)),L)},qr.prototype._calculate=function(m,L,q,Y){var j=Y.zoom;return j>Y.zoomHistory.lastIntegerZoom?{from:m,to:L}:{from:q,to:L}},qr.prototype.interpolate=function(m){return m};var $r=function(m){this.specification=m};$r.prototype.possiblyEvaluate=function(m,L,q,Y){return!!m.expression.evaluate(L,null,{},q,Y)},$r.prototype.interpolate=function(){return!1};var jr=function(m){this.properties=m,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var L in m){var q=m[L];q.specification.overridable&&this.overridableProperties.push(L);var Y=this.defaultPropertyValues[L]=new da(q,void 0),j=this.defaultTransitionablePropertyValues[L]=new Sa(q);this.defaultTransitioningPropertyValues[L]=j.untransitioned(),this.defaultPossiblyEvaluatedValues[L]=Y.possiblyEvaluate({})}};U("DataDrivenProperty",Gt),U("DataConstantProperty",We),U("CrossFadedDataDrivenProperty",or),U("CrossFadedProperty",qr),U("ColorRampProperty",$r);var Kr="-transition",yn=function(y){function m(L,q){if(y.call(this),this.id=L.id,this.type=L.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},L.type!=="custom"&&(L=L,this.metadata=L.metadata,this.minzoom=L.minzoom,this.maxzoom=L.maxzoom,L.type!=="background"&&(this.source=L.source,this.sourceLayer=L["source-layer"],this.filter=L.filter),q.layout&&(this._unevaluatedLayout=new yl(q.layout)),q.paint)){this._transitionablePaint=new La(q.paint);for(var Y in L.paint)this.setPaintProperty(Y,L.paint[Y],{validate:!1});for(var j in L.layout)this.setLayoutProperty(j,L.layout[j],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wl(q.paint)}}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},m.prototype.getLayoutProperty=function(q){return q==="visibility"?this.visibility:this._unevaluatedLayout.getValue(q)},m.prototype.setLayoutProperty=function(q,Y,j){if(j===void 0&&(j={}),Y!=null){var $="layers."+this.id+".layout."+q;if(this._validate(Sl,$,q,Y,j))return}if(q==="visibility"){this.visibility=Y;return}this._unevaluatedLayout.setValue(q,Y)},m.prototype.getPaintProperty=function(q){return z(q,Kr)?this._transitionablePaint.getTransition(q.slice(0,-Kr.length)):this._transitionablePaint.getValue(q)},m.prototype.setPaintProperty=function(q,Y,j){if(j===void 0&&(j={}),Y!=null){var $="layers."+this.id+".paint."+q;if(this._validate(Il,$,q,Y,j))return!1}if(z(q,Kr))return this._transitionablePaint.setTransition(q.slice(0,-Kr.length),Y||void 0),!1;var pe=this._transitionablePaint._values[q],ke=pe.property.specification["property-type"]==="cross-faded-data-driven",Fe=pe.value.isDataDriven(),Ue=pe.value;this._transitionablePaint.setValue(q,Y),this._handleSpecialPaintPropertyUpdate(q);var ut=this._transitionablePaint._values[q].value,St=ut.isDataDriven();return St||Fe||ke||this._handleOverridablePaintPropertyUpdate(q,Ue,ut)},m.prototype._handleSpecialPaintPropertyUpdate=function(q){},m.prototype._handleOverridablePaintPropertyUpdate=function(q,Y,j){return!1},m.prototype.isHidden=function(q){return this.minzoom&&q<this.minzoom||this.maxzoom&&q>=this.maxzoom?!0:this.visibility==="none"},m.prototype.updateTransitions=function(q){this._transitioningPaint=this._transitionablePaint.transitioned(q,this._transitioningPaint)},m.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},m.prototype.recalculate=function(q,Y){q.getCrossfadeParameters&&(this._crossfadeParameters=q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(q,void 0,Y)),this.paint=this._transitioningPaint.possiblyEvaluate(q,void 0,Y)},m.prototype.serialize=function(){var q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(q.layout=q.layout||{},q.layout.visibility=this.visibility),V(q,function(Y,j){return Y!==void 0&&!(j==="layout"&&!Object.keys(Y).length)&&!(j==="paint"&&!Object.keys(Y).length)})},m.prototype._validate=function(q,Y,j,$,pe){return pe===void 0&&(pe={}),pe&&pe.validate===!1?!1:Su(this,q.call(to,{key:Y,layerType:this.type,objectKey:j,value:$,styleSpec:hn,style:{glyphs:!0,sprite:!0}}))},m.prototype.is3D=function(){return!1},m.prototype.isTileClipped=function(){return!1},m.prototype.hasOffscreenPass=function(){return!1},m.prototype.resize=function(){},m.prototype.isStateDependent=function(){for(var q in this.paint._values){var Y=this.paint.get(q);if(!(!(Y instanceof ls)||!Zo(Y.property.specification))&&(Y.value.kind==="source"||Y.value.kind==="composite")&&Y.value.isStateDependent)return!0}return!1},m}(Yn),Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wn=function(m,L){this._structArray=m,this._pos1=L*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Rn=128,ia=5,Un=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Un.serialize=function(m,L){return m._trim(),L&&(m.isTransferred=!0,L.push(m.arrayBuffer)),{length:m.length,arrayBuffer:m.arrayBuffer}},Un.deserialize=function(m){var L=Object.create(this.prototype);return L.arrayBuffer=m.arrayBuffer,L.length=m.length,L.capacity=m.arrayBuffer.byteLength/L.bytesPerElement,L._refreshViews(),L},Un.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Un.prototype.clear=function(){this.length=0},Un.prototype.resize=function(m){this.reserve(m),this.length=m},Un.prototype.reserve=function(m){if(m>this.capacity){this.capacity=Math.max(m,Math.floor(this.capacity*ia),Rn),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var L=this.uint8;this._refreshViews(),L&&this.uint8.set(L)}},Un.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Bn(y,m){m===void 0&&(m=1);var L=0,q=0,Y=y.map(function($){var pe=mn($.type),ke=L=zr(L,Math.max(m,pe)),Fe=$.components||1;return q=Math.max(q,pe),L+=pe*Fe,{name:$.name,type:$.type,components:Fe,offset:ke}}),j=zr(L,Math.max(q,m));return{members:Y,size:j,alignment:m}}function mn(y){return Qn[y].BYTES_PER_ELEMENT}function zr(y,m){return Math.ceil(y/m)*m}var fn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.int16[$+0]=Y,this.int16[$+1]=j,q},m}(Un);fn.prototype.bytesPerElement=4,U("StructArrayLayout2i4",fn);var Vn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*4;return this.int16[ke+0]=Y,this.int16[ke+1]=j,this.int16[ke+2]=$,this.int16[ke+3]=pe,q},m}(Un);Vn.prototype.bytesPerElement=8,U("StructArrayLayout4i8",Vn);var Zn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ue=q*6;return this.int16[Ue+0]=Y,this.int16[Ue+1]=j,this.int16[Ue+2]=$,this.int16[Ue+3]=pe,this.int16[Ue+4]=ke,this.int16[Ue+5]=Fe,q},m}(Un);Zn.prototype.bytesPerElement=12,U("StructArrayLayout2i4i12",Zn);var En=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ue=q*4,ut=q*8;return this.int16[Ue+0]=Y,this.int16[Ue+1]=j,this.uint8[ut+4]=$,this.uint8[ut+5]=pe,this.uint8[ut+6]=ke,this.uint8[ut+7]=Fe,q},m}(Un);En.prototype.bytesPerElement=8,U("StructArrayLayout2i4ub8",En);var mi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.float32[$+0]=Y,this.float32[$+1]=j,q},m}(Un);mi.prototype.bytesPerElement=8,U("StructArrayLayout2f8",mi);var ri=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St){var bt=this.length;return this.resize(bt+1),this.emplace(bt,q,Y,j,$,pe,ke,Fe,Ue,ut,St)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt){var Yt=q*10;return this.uint16[Yt+0]=Y,this.uint16[Yt+1]=j,this.uint16[Yt+2]=$,this.uint16[Yt+3]=pe,this.uint16[Yt+4]=ke,this.uint16[Yt+5]=Fe,this.uint16[Yt+6]=Ue,this.uint16[Yt+7]=ut,this.uint16[Yt+8]=St,this.uint16[Yt+9]=bt,q},m}(Un);ri.prototype.bytesPerElement=20,U("StructArrayLayout10ui20",ri);var $i=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt){var cr=this.length;return this.resize(cr+1),this.emplace(cr,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr){var Ir=q*12;return this.int16[Ir+0]=Y,this.int16[Ir+1]=j,this.int16[Ir+2]=$,this.int16[Ir+3]=pe,this.uint16[Ir+4]=ke,this.uint16[Ir+5]=Fe,this.uint16[Ir+6]=Ue,this.uint16[Ir+7]=ut,this.int16[Ir+8]=St,this.int16[Ir+9]=bt,this.int16[Ir+10]=Yt,this.int16[Ir+11]=cr,q},m}(Un);$i.prototype.bytesPerElement=24,U("StructArrayLayout4i4ui4i24",$i);var Cn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.float32[pe+0]=Y,this.float32[pe+1]=j,this.float32[pe+2]=$,q},m}(Un);Cn.prototype.bytesPerElement=12,U("StructArrayLayout3f12",Cn);var Tn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.uint32[j+0]=Y,q},m}(Un);Tn.prototype.bytesPerElement=4,U("StructArrayLayout1ul4",Tn);var Pi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ue,ut){var St=this.length;return this.resize(St+1),this.emplace(St,q,Y,j,$,pe,ke,Fe,Ue,ut)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St){var bt=q*10,Yt=q*5;return this.int16[bt+0]=Y,this.int16[bt+1]=j,this.int16[bt+2]=$,this.int16[bt+3]=pe,this.int16[bt+4]=ke,this.int16[bt+5]=Fe,this.uint32[Yt+3]=Ue,this.uint16[bt+8]=ut,this.uint16[bt+9]=St,q},m}(Un);Pi.prototype.bytesPerElement=20,U("StructArrayLayout6i1ul2ui20",Pi);var di=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ue=q*6;return this.int16[Ue+0]=Y,this.int16[Ue+1]=j,this.int16[Ue+2]=$,this.int16[Ue+3]=pe,this.int16[Ue+4]=ke,this.int16[Ue+5]=Fe,q},m}(Un);di.prototype.bytesPerElement=12,U("StructArrayLayout2i2i2i12",di);var ei=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe){var ke=this.length;return this.resize(ke+1),this.emplace(ke,q,Y,j,$,pe)},m.prototype.emplace=function(q,Y,j,$,pe,ke){var Fe=q*4,Ue=q*8;return this.float32[Fe+0]=Y,this.float32[Fe+1]=j,this.float32[Fe+2]=$,this.int16[Ue+6]=pe,this.int16[Ue+7]=ke,q},m}(Un);ei.prototype.bytesPerElement=16,U("StructArrayLayout2f1f2i16",ei);var jn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*12,Fe=q*3;return this.uint8[ke+0]=Y,this.uint8[ke+1]=j,this.float32[Fe+1]=$,this.float32[Fe+2]=pe,q},m}(Un);jn.prototype.bytesPerElement=12,U("StructArrayLayout2ub2f12",jn);var Si=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.uint16[pe+0]=Y,this.uint16[pe+1]=j,this.uint16[pe+2]=$,q},m}(Un);Si.prototype.bytesPerElement=6,U("StructArrayLayout3ui6",Si);var na=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr){var Qr=this.length;return this.resize(Qr+1),this.emplace(Qr,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr,Qr){var an=q*24,Pn=q*12,ai=q*48;return this.int16[an+0]=Y,this.int16[an+1]=j,this.uint16[an+2]=$,this.uint16[an+3]=pe,this.uint32[Pn+2]=ke,this.uint32[Pn+3]=Fe,this.uint32[Pn+4]=Ue,this.uint16[an+10]=ut,this.uint16[an+11]=St,this.uint16[an+12]=bt,this.float32[Pn+7]=Yt,this.float32[Pn+8]=cr,this.uint8[ai+36]=Ir,this.uint8[ai+37]=Ar,this.uint8[ai+38]=en,this.uint32[Pn+10]=Nr,this.int16[an+22]=Qr,q},m}(Un);na.prototype.bytesPerElement=48,U("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",na);var Ea=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr,Qr,an,Pn,ai,ti,Bi,Ti,Ri,wa,Ni,Yi){var Xa=this.length;return this.resize(Xa+1),this.emplace(Xa,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr,Qr,an,Pn,ai,ti,Bi,Ti,Ri,wa,Ni,Yi)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr,Qr,an,Pn,ai,ti,Bi,Ti,Ri,wa,Ni,Yi,Xa){var ga=q*34,Ro=q*17;return this.int16[ga+0]=Y,this.int16[ga+1]=j,this.int16[ga+2]=$,this.int16[ga+3]=pe,this.int16[ga+4]=ke,this.int16[ga+5]=Fe,this.int16[ga+6]=Ue,this.int16[ga+7]=ut,this.uint16[ga+8]=St,this.uint16[ga+9]=bt,this.uint16[ga+10]=Yt,this.uint16[ga+11]=cr,this.uint16[ga+12]=Ir,this.uint16[ga+13]=Ar,this.uint16[ga+14]=en,this.uint16[ga+15]=Nr,this.uint16[ga+16]=Qr,this.uint16[ga+17]=an,this.uint16[ga+18]=Pn,this.uint16[ga+19]=ai,this.uint16[ga+20]=ti,this.uint16[ga+21]=Bi,this.uint16[ga+22]=Ti,this.uint32[Ro+12]=Ri,this.float32[Ro+13]=wa,this.float32[Ro+14]=Ni,this.float32[Ro+15]=Yi,this.float32[Ro+16]=Xa,q},m}(Un);Ea.prototype.bytesPerElement=68,U("StructArrayLayout8i15ui1ul4f68",Ea);var pi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.float32[j+0]=Y,q},m}(Un);pi.prototype.bytesPerElement=4,U("StructArrayLayout1f4",pi);var Vi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.int16[pe+0]=Y,this.int16[pe+1]=j,this.int16[pe+2]=$,q},m}(Un);Vi.prototype.bytesPerElement=6,U("StructArrayLayout3i6",Vi);var ha=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*2,ke=q*4;return this.uint32[pe+0]=Y,this.uint16[ke+2]=j,this.uint16[ke+3]=$,q},m}(Un);ha.prototype.bytesPerElement=8,U("StructArrayLayout1ul2ui8",ha);var _a=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.uint16[$+0]=Y,this.uint16[$+1]=j,q},m}(Un);_a.prototype.bytesPerElement=4,U("StructArrayLayout2ui4",_a);var Wa=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.uint16[j+0]=Y,q},m}(Un);Wa.prototype.bytesPerElement=2,U("StructArrayLayout1ui2",Wa);var Ls=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*4;return this.float32[ke+0]=Y,this.float32[ke+1]=j,this.float32[ke+2]=$,this.float32[ke+3]=pe,q},m}(Un);Ls.prototype.bytesPerElement=16,U("StructArrayLayout4f16",Ls);var lu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return L.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},L.x1.get=function(){return this._structArray.int16[this._pos2+2]},L.y1.get=function(){return this._structArray.int16[this._pos2+3]},L.x2.get=function(){return this._structArray.int16[this._pos2+4]},L.y2.get=function(){return this._structArray.int16[this._pos2+5]},L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(m.prototype,L),m}(Wn);lu.prototype.size=20;var uo=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new lu(this,q)},m}(Pi);U("CollisionBoxArray",uo);var uu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},L.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},L.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},L.segment.get=function(){return this._structArray.uint16[this._pos2+10]},L.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},L.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},L.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},L.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},L.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},L.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},L.placedOrientation.set=function(q){this._structArray.uint8[this._pos1+37]=q},L.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},L.hidden.set=function(q){this._structArray.uint8[this._pos1+38]=q},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},L.crossTileID.set=function(q){this._structArray.uint32[this._pos4+10]=q},L.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(m.prototype,L),m}(Wn);uu.prototype.size=48;var ps=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new uu(this,q)},m}(na);U("PlacedSymbolArray",ps);var Xl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},L.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},L.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},L.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},L.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},L.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},L.key.get=function(){return this._structArray.uint16[this._pos2+8]},L.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},L.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},L.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},L.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},L.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},L.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},L.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},L.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},L.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},L.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},L.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},L.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},L.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},L.crossTileID.set=function(q){this._structArray.uint32[this._pos4+12]=q},L.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},L.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},L.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},L.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(m.prototype,L),m}(Wn);Xl.prototype.size=68;var Yf=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new Xl(this,q)},m}(Ea);U("SymbolInstanceArray",Yf);var fc=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getoffsetX=function(q){return this.float32[q*1+0]},m}(pi);U("GlyphOffsetArray",fc);var As=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getx=function(q){return this.int16[q*3+0]},m.prototype.gety=function(q){return this.int16[q*3+1]},m.prototype.gettileUnitDistanceFromAnchor=function(q){return this.int16[q*3+2]},m}(Vi);U("SymbolLineVertexArray",As);var Zl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(m.prototype,L),m}(Wn);Zl.prototype.size=8;var fu=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new Zl(this,q)},m}(ha);U("FeatureIndexArray",fu);var ro=Bn([{name:"a_pos",components:2,type:"Int16"}],4),Eu=ro.members,Ja=function(m){m===void 0&&(m=[]),this.segments=m};Ja.prototype.prepareSegment=function(m,L,q,Y){var j=this.segments[this.segments.length-1];return m>Ja.MAX_VERTEX_ARRAY_LENGTH&&Z("Max vertices per segment is "+Ja.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+m),(!j||j.vertexLength+m>Ja.MAX_VERTEX_ARRAY_LENGTH||j.sortKey!==Y)&&(j={vertexOffset:L.length,primitiveOffset:q.length,vertexLength:0,primitiveLength:0},Y!==void 0&&(j.sortKey=Y),this.segments.push(j)),j},Ja.prototype.get=function(){return this.segments},Ja.prototype.destroy=function(){for(var m=0,L=this.segments;m<L.length;m+=1){var q=L[m];for(var Y in q.vaos)q.vaos[Y].destroy()}},Ja.simpleSegment=function(m,L,q,Y){return new Ja([{vertexOffset:m,primitiveOffset:L,vertexLength:q,primitiveLength:Y,vaos:{},sortKey:0}])},Ja.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,U("SegmentVector",Ja);function H(y,m){return y=g(Math.floor(y),0,255),m=g(Math.floor(m),0,255),256*y+m}var R=Bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),G=a(function(y){function m(L,q){var Y,j,$,pe,ke,Fe,Ue,ut;for(Y=L.length&3,j=L.length-Y,$=q,ke=3432918353,Fe=461845907,ut=0;ut<j;)Ue=L.charCodeAt(ut)&255|(L.charCodeAt(++ut)&255)<<8|(L.charCodeAt(++ut)&255)<<16|(L.charCodeAt(++ut)&255)<<24,++ut,Ue=(Ue&65535)*ke+(((Ue>>>16)*ke&65535)<<16)&4294967295,Ue=Ue<<15|Ue>>>17,Ue=(Ue&65535)*Fe+(((Ue>>>16)*Fe&65535)<<16)&4294967295,$^=Ue,$=$<<13|$>>>19,pe=($&65535)*5+((($>>>16)*5&65535)<<16)&4294967295,$=(pe&65535)+27492+(((pe>>>16)+58964&65535)<<16);switch(Ue=0,Y){case 3:Ue^=(L.charCodeAt(ut+2)&255)<<16;case 2:Ue^=(L.charCodeAt(ut+1)&255)<<8;case 1:Ue^=L.charCodeAt(ut)&255,Ue=(Ue&65535)*ke+(((Ue>>>16)*ke&65535)<<16)&4294967295,Ue=Ue<<15|Ue>>>17,Ue=(Ue&65535)*Fe+(((Ue>>>16)*Fe&65535)<<16)&4294967295,$^=Ue}return $^=L.length,$^=$>>>16,$=($&65535)*2246822507+((($>>>16)*2246822507&65535)<<16)&4294967295,$^=$>>>13,$=($&65535)*3266489909+((($>>>16)*3266489909&65535)<<16)&4294967295,$^=$>>>16,$>>>0}y.exports=m}),I=a(function(y){function m(L,q){for(var Y=L.length,j=q^Y,$=0,pe;Y>=4;)pe=L.charCodeAt($)&255|(L.charCodeAt(++$)&255)<<8|(L.charCodeAt(++$)&255)<<16|(L.charCodeAt(++$)&255)<<24,pe=(pe&65535)*1540483477+(((pe>>>16)*1540483477&65535)<<16),pe^=pe>>>24,pe=(pe&65535)*1540483477+(((pe>>>16)*1540483477&65535)<<16),j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)^pe,Y-=4,++$;switch(Y){case 3:j^=(L.charCodeAt($+2)&255)<<16;case 2:j^=(L.charCodeAt($+1)&255)<<8;case 1:j^=L.charCodeAt($)&255,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)}return j^=j>>>13,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16),j^=j>>>15,j>>>0}y.exports=m}),W=G,te=G,ee=I;W.murmur3=te,W.murmur2=ee;var ve=function(){this.ids=[],this.positions=[],this.indexed=!1};ve.prototype.add=function(m,L,q,Y){this.ids.push(Oe(m)),this.positions.push(L,q,Y)},ve.prototype.getPositions=function(m){for(var L=Oe(m),q=0,Y=this.ids.length-1;q<Y;){var j=q+Y>>1;this.ids[j]>=L?Y=j:q=j+1}for(var $=[];this.ids[q]===L;){var pe=this.positions[3*q],ke=this.positions[3*q+1],Fe=this.positions[3*q+2];$.push({index:pe,start:ke,end:Fe}),q++}return $},ve.serialize=function(m,L){var q=new Float64Array(m.ids),Y=new Uint32Array(m.positions);return vt(q,Y,0,q.length-1),L&&L.push(q.buffer,Y.buffer),{ids:q,positions:Y}},ve.deserialize=function(m){var L=new ve;return L.ids=m.ids,L.positions=m.positions,L.indexed=!0,L};var Ee=Math.pow(2,53)-1;function Oe(y){var m=+y;return!isNaN(m)&&m<=Ee?m:W(String(y))}function vt(y,m,L,q){for(;L<q;){for(var Y=y[L+q>>1],j=L-1,$=q+1;;){do j++;while(y[j]<Y);do $--;while(y[$]>Y);if(j>=$)break;wt(y,j,$),wt(m,3*j,3*$),wt(m,3*j+1,3*$+1),wt(m,3*j+2,3*$+2)}$-L<q-$?(vt(y,m,L,$),L=$+1):(vt(y,m,$+1,q),q=$)}}function wt(y,m,L){var q=y[m];y[m]=y[L],y[L]=q}U("FeaturePositionMap",ve);var pt=function(m,L){this.gl=m.gl,this.location=L},Be=function(y){function m(L,q){y.call(this,L,q),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1i(this.location,q))},m}(pt),$e=function(y){function m(L,q){y.call(this,L,q),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1f(this.location,q))},m}(pt),ot=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1])&&(this.current=q,this.gl.uniform2f(this.location,q[0],q[1]))},m}(pt),Tt=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1]||q[2]!==this.current[2])&&(this.current=q,this.gl.uniform3f(this.location,q[0],q[1],q[2]))},m}(pt),Lt=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1]||q[2]!==this.current[2]||q[3]!==this.current[3])&&(this.current=q,this.gl.uniform4f(this.location,q[0],q[1],q[2],q[3]))},m}(pt),Pt=function(y){function m(L,q){y.call(this,L,q),this.current=lo.transparent}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q.r!==this.current.r||q.g!==this.current.g||q.b!==this.current.b||q.a!==this.current.a)&&(this.current=q,this.gl.uniform4f(this.location,q.r,q.g,q.b,q.a))},m}(pt),Xt=new Float32Array(16),Nt=function(y){function m(L,q){y.call(this,L,q),this.current=Xt}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){if(q[12]!==this.current[12]||q[0]!==this.current[0]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);return}for(var Y=1;Y<16;Y++)if(q[Y]!==this.current[Y]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);break}},m}(pt);function Dt(y){return[H(255*y.r,255*y.g),H(255*y.b,255*y.a)]}var Zt=function(m,L,q){this.value=m,this.uniformNames=L.map(function(Y){return"u_"+Y}),this.type=q};Zt.prototype.setUniform=function(m,L,q){m.set(q.constantOr(this.value))},Zt.prototype.getBinding=function(m,L,q){return this.type==="color"?new Pt(m,L):new $e(m,L)};var Ct=function(m,L){this.uniformNames=L.map(function(q){return"u_"+q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ct.prototype.setConstantPatternPositions=function(m,L){this.pixelRatioFrom=L.pixelRatio,this.pixelRatioTo=m.pixelRatio,this.patternFrom=L.tlbr,this.patternTo=m.tlbr},Ct.prototype.setUniform=function(m,L,q,Y){var j=Y==="u_pattern_to"?this.patternTo:Y==="u_pattern_from"?this.patternFrom:Y==="u_pixel_ratio_to"?this.pixelRatioTo:Y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;j&&m.set(j)},Ct.prototype.getBinding=function(m,L,q){return q.substr(0,9)==="u_pattern"?new Lt(m,L):new $e(m,L)};var ar=function(m,L,q,Y){this.expression=m,this.type=q,this.maxValue=0,this.paintVertexAttributes=L.map(function(j){return{name:"a_"+j,type:"Float32",components:q==="color"?2:1,offset:0}}),this.paintVertexArray=new Y};ar.prototype.populatePaintArray=function(m,L,q,Y,j){var $=this.paintVertexArray.length,pe=this.expression.evaluate(new Sn(0),L,{},Y,[],j);this.paintVertexArray.resize(m),this._setPaintValue($,m,pe)},ar.prototype.updatePaintArray=function(m,L,q,Y){var j=this.expression.evaluate({zoom:0},q,Y);this._setPaintValue(m,L,j)},ar.prototype._setPaintValue=function(m,L,q){if(this.type==="color")for(var Y=Dt(q),j=m;j<L;j++)this.paintVertexArray.emplace(j,Y[0],Y[1]);else{for(var $=m;$<L;$++)this.paintVertexArray.emplace($,q);this.maxValue=Math.max(this.maxValue,Math.abs(q))}},ar.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ar.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var yr=function(m,L,q,Y,j,$){this.expression=m,this.uniformNames=L.map(function(pe){return"u_"+pe+"_t"}),this.type=q,this.useIntegerZoom=Y,this.zoom=j,this.maxValue=0,this.paintVertexAttributes=L.map(function(pe){return{name:"a_"+pe,type:"Float32",components:q==="color"?4:2,offset:0}}),this.paintVertexArray=new $};yr.prototype.populatePaintArray=function(m,L,q,Y,j){var $=this.expression.evaluate(new Sn(this.zoom),L,{},Y,[],j),pe=this.expression.evaluate(new Sn(this.zoom+1),L,{},Y,[],j),ke=this.paintVertexArray.length;this.paintVertexArray.resize(m),this._setPaintValue(ke,m,$,pe)},yr.prototype.updatePaintArray=function(m,L,q,Y){var j=this.expression.evaluate({zoom:this.zoom},q,Y),$=this.expression.evaluate({zoom:this.zoom+1},q,Y);this._setPaintValue(m,L,j,$)},yr.prototype._setPaintValue=function(m,L,q,Y){if(this.type==="color")for(var j=Dt(q),$=Dt(Y),pe=m;pe<L;pe++)this.paintVertexArray.emplace(pe,j[0],j[1],$[0],$[1]);else{for(var ke=m;ke<L;ke++)this.paintVertexArray.emplace(ke,q,Y);this.maxValue=Math.max(this.maxValue,Math.abs(q),Math.abs(Y))}},yr.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},yr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},yr.prototype.setUniform=function(m,L){var q=this.useIntegerZoom?Math.floor(L.zoom):L.zoom,Y=g(this.expression.interpolationFactor(q,this.zoom,this.zoom+1),0,1);m.set(Y)},yr.prototype.getBinding=function(m,L,q){return new $e(m,L)};var Dr=function(m,L,q,Y,j,$){this.expression=m,this.type=L,this.useIntegerZoom=q,this.zoom=Y,this.layerId=$,this.zoomInPaintVertexArray=new j,this.zoomOutPaintVertexArray=new j};Dr.prototype.populatePaintArray=function(m,L,q){var Y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(m),this.zoomOutPaintVertexArray.resize(m),this._setPaintValues(Y,m,L.patterns&&L.patterns[this.layerId],q)},Dr.prototype.updatePaintArray=function(m,L,q,Y,j){this._setPaintValues(m,L,q.patterns&&q.patterns[this.layerId],j)},Dr.prototype._setPaintValues=function(m,L,q,Y){if(!(!Y||!q)){var j=q.min,$=q.mid,pe=q.max,ke=Y[j],Fe=Y[$],Ue=Y[pe];if(!(!ke||!Fe||!Ue))for(var ut=m;ut<L;ut++)this.zoomInPaintVertexArray.emplace(ut,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],Fe.pixelRatio,ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(ut,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],Ue.tl[0],Ue.tl[1],Ue.br[0],Ue.br[1],Fe.pixelRatio,Ue.pixelRatio)}},Dr.prototype.upload=function(m){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=m.createVertexBuffer(this.zoomInPaintVertexArray,R.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=m.createVertexBuffer(this.zoomOutPaintVertexArray,R.members,this.expression.isStateDependent))},Dr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ln=function(m,L,q){this.binders={},this._buffers=[];var Y=[];for(var j in m.paint._values)if(q(j)){var $=m.paint.get(j);if(!(!($ instanceof ls)||!Zo($.property.specification))){var pe=dn(j,m.type),ke=$.value,Fe=$.property.specification.type,Ue=$.property.useIntegerZoom,ut=$.property.specification["property-type"],St=ut==="cross-faded"||ut==="cross-faded-data-driven";if(ke.kind==="constant")this.binders[j]=St?new Ct(ke.value,pe):new Zt(ke.value,pe,Fe),Y.push("/u_"+j);else if(ke.kind==="source"||St){var bt=Nn(j,Fe,"source");this.binders[j]=St?new Dr(ke,Fe,Ue,L,bt,m.id):new ar(ke,pe,Fe,bt),Y.push("/a_"+j)}else{var Yt=Nn(j,Fe,"composite");this.binders[j]=new yr(ke,pe,Fe,Ue,L,Yt),Y.push("/z_"+j)}}}this.cacheKey=Y.sort().join("")};ln.prototype.getMaxValue=function(m){var L=this.binders[m];return L instanceof ar||L instanceof yr?L.maxValue:0},ln.prototype.populatePaintArrays=function(m,L,q,Y,j){for(var $ in this.binders){var pe=this.binders[$];(pe instanceof ar||pe instanceof yr||pe instanceof Dr)&&pe.populatePaintArray(m,L,q,Y,j)}},ln.prototype.setConstantPatternPositions=function(m,L){for(var q in this.binders){var Y=this.binders[q];Y instanceof Ct&&Y.setConstantPatternPositions(m,L)}},ln.prototype.updatePaintArrays=function(m,L,q,Y,j){var $=!1;for(var pe in m)for(var ke=L.getPositions(pe),Fe=0,Ue=ke;Fe<Ue.length;Fe+=1){var ut=Ue[Fe],St=q.feature(ut.index);for(var bt in this.binders){var Yt=this.binders[bt];if((Yt instanceof ar||Yt instanceof yr||Yt instanceof Dr)&&Yt.expression.isStateDependent===!0){var cr=Y.paint.get(bt);Yt.expression=cr.value,Yt.updatePaintArray(ut.start,ut.end,St,m[pe],j),$=!0}}}return $},ln.prototype.defines=function(){var m=[];for(var L in this.binders){var q=this.binders[L];(q instanceof Zt||q instanceof Ct)&&m.push.apply(m,q.uniformNames.map(function(Y){return"#define HAS_UNIFORM_"+Y}))}return m},ln.prototype.getBinderAttributes=function(){var m=[];for(var L in this.binders){var q=this.binders[L];if(q instanceof ar||q instanceof yr)for(var Y=0;Y<q.paintVertexAttributes.length;Y++)m.push(q.paintVertexAttributes[Y].name);else if(q instanceof Dr)for(var j=0;j<R.members.length;j++)m.push(R.members[j].name)}return m},ln.prototype.getBinderUniforms=function(){var m=[];for(var L in this.binders){var q=this.binders[L];if(q instanceof Zt||q instanceof Ct||q instanceof yr)for(var Y=0,j=q.uniformNames;Y<j.length;Y+=1){var $=j[Y];m.push($)}}return m},ln.prototype.getPaintVertexBuffers=function(){return this._buffers},ln.prototype.getUniforms=function(m,L){var q=[];for(var Y in this.binders){var j=this.binders[Y];if(j instanceof Zt||j instanceof Ct||j instanceof yr)for(var $=0,pe=j.uniformNames;$<pe.length;$+=1){var ke=pe[$];if(L[ke]){var Fe=j.getBinding(m,L[ke],ke);q.push({name:ke,property:Y,binding:Fe})}}}return q},ln.prototype.setUniforms=function(m,L,q,Y){for(var j=0,$=L;j<$.length;j+=1){var pe=$[j],ke=pe.name,Fe=pe.property,Ue=pe.binding;this.binders[Fe].setUniform(Ue,Y,q.get(Fe),ke)}},ln.prototype.updatePaintBuffers=function(m){this._buffers=[];for(var L in this.binders){var q=this.binders[L];if(m&&q instanceof Dr){var Y=m.fromScale===2?q.zoomInPaintVertexBuffer:q.zoomOutPaintVertexBuffer;Y&&this._buffers.push(Y)}else(q instanceof ar||q instanceof yr)&&q.paintVertexBuffer&&this._buffers.push(q.paintVertexBuffer)}},ln.prototype.upload=function(m){for(var L in this.binders){var q=this.binders[L];(q instanceof ar||q instanceof yr||q instanceof Dr)&&q.upload(m)}this.updatePaintBuffers()},ln.prototype.destroy=function(){for(var m in this.binders){var L=this.binders[m];(L instanceof ar||L instanceof yr||L instanceof Dr)&&L.destroy()}};var Xr=function(m,L,q){q===void 0&&(q=function(){return!0}),this.programConfigurations={};for(var Y=0,j=m;Y<j.length;Y+=1){var $=j[Y];this.programConfigurations[$.id]=new ln($,L,q)}this.needsUpload=!1,this._featureMap=new ve,this._bufferOffset=0};Xr.prototype.populatePaintArrays=function(m,L,q,Y,j,$){for(var pe in this.programConfigurations)this.programConfigurations[pe].populatePaintArrays(m,L,Y,j,$);L.id!==void 0&&this._featureMap.add(L.id,q,this._bufferOffset,m),this._bufferOffset=m,this.needsUpload=!0},Xr.prototype.updatePaintArrays=function(m,L,q,Y){for(var j=0,$=q;j<$.length;j+=1){var pe=$[j];this.needsUpload=this.programConfigurations[pe.id].updatePaintArrays(m,this._featureMap,L,pe,Y)||this.needsUpload}},Xr.prototype.get=function(m){return this.programConfigurations[m]},Xr.prototype.upload=function(m){if(this.needsUpload){for(var L in this.programConfigurations)this.programConfigurations[L].upload(m);this.needsUpload=!1}},Xr.prototype.destroy=function(){for(var m in this.programConfigurations)this.programConfigurations[m].destroy()};function dn(y,m){var L={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return L[y]||[y.replace(m+"-","").replace(/-/g,"_")]}function ii(y){var m={"line-pattern":{source:ri,composite:ri},"fill-pattern":{source:ri,composite:ri},"fill-extrusion-pattern":{source:ri,composite:ri}};return m[y]}function Nn(y,m,L){var q={color:{source:mi,composite:Ls},number:{source:pi,composite:mi}},Y=ii(y);return Y&&Y[L]||q[m][L]}U("ConstantBinder",Zt),U("CrossFadedConstantBinder",Ct),U("SourceExpressionBinder",ar),U("CrossFadedCompositeBinder",Dr),U("CompositeExpressionBinder",yr),U("ProgramConfiguration",ln,{omit:["_buffers"]}),U("ProgramConfigurationSet",Xr);var un=8192,Ln=15,Mn=Math.pow(2,Ln-1)-1,Kn=-Mn-1;function xi(y){for(var m=un/y.extent,L=y.loadGeometry(),q=0;q<L.length;q++)for(var Y=L[q],j=0;j<Y.length;j++){var $=Y[j],pe=Math.round($.x*m),ke=Math.round($.y*m);$.x=g(pe,Kn,Mn),$.y=g(ke,Kn,Mn),(pe<$.x||pe>$.x+1||ke<$.y||ke>$.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return L}function Da(y,m){return{type:y.type,id:y.id,properties:y.properties,geometry:m?xi(y):[]}}function Pa(y,m,L,q,Y){y.emplaceBack(m*2+(q+1)/2,L*2+(Y+1)/2)}var _o=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new fn,this.indexArray=new Si,this.segments=new Ja,this.programConfigurations=new Xr(m.layers,m.zoom),this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};_o.prototype.populate=function(m,L,q){var Y=this.layers[0],j=[],$=null;Y.type==="circle"&&($=Y.layout.get("circle-sort-key"));for(var pe=0,ke=m;pe<ke.length;pe+=1){var Fe=ke[pe],Ue=Fe.feature,ut=Fe.id,St=Fe.index,bt=Fe.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,cr=Da(Ue,Yt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),cr,q)){var Ir=$?$.evaluate(cr,{},q):void 0,Ar={id:ut,properties:Ue.properties,type:Ue.type,sourceLayerIndex:bt,index:St,geometry:Yt?cr.geometry:xi(Ue),patterns:{},sortKey:Ir};j.push(Ar)}}$&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var en=0,Nr=j;en<Nr.length;en+=1){var Qr=Nr[en],an=Qr,Pn=an.geometry,ai=an.index,ti=an.sourceLayerIndex,Bi=m[ai].feature;this.addFeature(Qr,Pn,ai,q),L.featureIndex.insert(Bi,Pn,ai,ti,this.index)}},_o.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},_o.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_o.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Eu),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},_o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_o.prototype.addFeature=function(m,L,q,Y){for(var j=0,$=L;j<$.length;j+=1)for(var pe=$[j],ke=0,Fe=pe;ke<Fe.length;ke+=1){var Ue=Fe[ke],ut=Ue.x,St=Ue.y;if(!(ut<0||ut>=un||St<0||St>=un)){var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,m.sortKey),Yt=bt.vertexLength;Pa(this.layoutVertexArray,ut,St,-1,-1),Pa(this.layoutVertexArray,ut,St,1,-1),Pa(this.layoutVertexArray,ut,St,1,1),Pa(this.layoutVertexArray,ut,St,-1,1),this.indexArray.emplaceBack(Yt,Yt+1,Yt+2),this.indexArray.emplaceBack(Yt,Yt+3,Yt+2),bt.vertexLength+=4,bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,{},Y)},U("CircleBucket",_o,{omit:["layers"]});function ua(y,m){for(var L=0;L<y.length;L++)if(nh(m,y[L]))return!0;for(var q=0;q<m.length;q++)if(nh(y,m[q]))return!0;return!!Xv(y,m)}function Qa(y,m,L){return!!(nh(y,m)||Xd(m,y,L))}function Vo(y,m){if(y.length===1)return Zd(m,y[0]);for(var L=0;L<m.length;L++)for(var q=m[L],Y=0;Y<q.length;Y++)if(nh(y,q[Y]))return!0;for(var j=0;j<y.length;j++)if(Zd(m,y[j]))return!0;for(var $=0;$<m.length;$++)if(Xv(y,m[$]))return!0;return!1}function ml(y,m,L){for(var q=0;q<m.length;q++){var Y=m[q];if(y.length>=3){for(var j=0;j<Y.length;j++)if(nh(y,Y[j]))return!0}if(Wv(y,Y,L))return!0}return!1}function Wv(y,m,L){if(y.length>1){if(Xv(y,m))return!0;for(var q=0;q<m.length;q++)if(Xd(m[q],y,L))return!0}for(var Y=0;Y<y.length;Y++)if(Xd(y[Y],m,L))return!0;return!1}function Xv(y,m){if(y.length===0||m.length===0)return!1;for(var L=0;L<y.length-1;L++)for(var q=y[L],Y=y[L+1],j=0;j<m.length-1;j++){var $=m[j],pe=m[j+1];if(Td(q,Y,$,pe))return!0}return!1}function Td(y,m,L,q){return J(y,L,q)!==J(m,L,q)&&J(y,m,L)!==J(y,m,q)}function Xd(y,m,L){var q=L*L;if(m.length===1)return y.distSqr(m[0])<q;for(var Y=1;Y<m.length;Y++){var j=m[Y-1],$=m[Y];if(Mg(y,j,$)<q)return!0}return!1}function Mg(y,m,L){var q=m.distSqr(L);if(q===0)return y.distSqr(m);var Y=((y.x-m.x)*(L.x-m.x)+(y.y-m.y)*(L.y-m.y))/q;return Y<0?y.distSqr(m):Y>1?y.distSqr(L):y.distSqr(L.sub(m)._mult(Y)._add(m))}function Zd(y,m){for(var L=!1,q,Y,j,$=0;$<y.length;$++){q=y[$];for(var pe=0,ke=q.length-1;pe<q.length;ke=pe++)Y=q[pe],j=q[ke],Y.y>m.y!=j.y>m.y&&m.x<(j.x-Y.x)*(m.y-Y.y)/(j.y-Y.y)+Y.x&&(L=!L)}return L}function nh(y,m){for(var L=!1,q=0,Y=y.length-1;q<y.length;Y=q++){var j=y[q],$=y[Y];j.y>m.y!=$.y>m.y&&m.x<($.x-j.x)*(m.y-j.y)/($.y-j.y)+j.x&&(L=!L)}return L}function jd(y,m,L,q,Y){for(var j=0,$=y;j<$.length;j+=1){var pe=$[j];if(m<=pe.x&&L<=pe.y&&q>=pe.x&&Y>=pe.y)return!0}var ke=[new u(m,L),new u(m,Y),new u(q,Y),new u(q,L)];if(y.length>2)for(var Fe=0,Ue=ke;Fe<Ue.length;Fe+=1){var ut=Ue[Fe];if(nh(y,ut))return!0}for(var St=0;St<y.length-1;St++){var bt=y[St],Yt=y[St+1];if(zh(bt,Yt,ke))return!0}return!1}function zh(y,m,L){var q=L[0],Y=L[2];if(y.x<q.x&&m.x<q.x||y.x>Y.x&&m.x>Y.x||y.y<q.y&&m.y<q.y||y.y>Y.y&&m.y>Y.y)return!1;var j=J(y,m,L[0]);return j!==J(y,m,L[1])||j!==J(y,m,L[2])||j!==J(y,m,L[3])}function ih(y,m,L){var q=m.paint.get(y).value;return q.kind==="constant"?q.value:L.programConfigurations.get(m.id).getMaxValue(y)}function Ad(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function Xp(y,m,L,q,Y){if(!m[0]&&!m[1])return y;var j=u.convert(m)._mult(Y);L==="viewport"&&j._rotate(-q);for(var $=[],pe=0;pe<y.length;pe++){var ke=y[pe];$.push(ke.sub(j))}return $}var Md=new jr({"circle-sort-key":new Gt(hn.layout_circle["circle-sort-key"])}),wb=new jr({"circle-radius":new Gt(hn.paint_circle["circle-radius"]),"circle-color":new Gt(hn.paint_circle["circle-color"]),"circle-blur":new Gt(hn.paint_circle["circle-blur"]),"circle-opacity":new Gt(hn.paint_circle["circle-opacity"]),"circle-translate":new We(hn.paint_circle["circle-translate"]),"circle-translate-anchor":new We(hn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new We(hn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new We(hn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(hn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(hn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(hn.paint_circle["circle-stroke-opacity"])}),Fy={paint:wb,layout:Md},mf=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var y=arguments,m=0,L=arguments.length;L--;)m+=y[L]*y[L];return Math.sqrt(m)});function Tb(){var y=new mf(4);return mf!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}function G1(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3],pe=Math.sin(L),ke=Math.cos(L);return y[0]=q*ke+j*pe,y[1]=Y*ke+$*pe,y[2]=q*-pe+j*ke,y[3]=Y*-pe+$*ke,y}function Dc(){var y=new mf(9);return mf!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function qy(y,m){var L=Math.sin(m),q=Math.cos(m);return y[0]=q,y[1]=L,y[2]=0,y[3]=-L,y[4]=q,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function Ab(){var y=new mf(16);return mf!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y}function Mb(y){var m=new mf(16);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3],m[4]=y[4],m[5]=y[5],m[6]=y[6],m[7]=y[7],m[8]=y[8],m[9]=y[9],m[10]=y[10],m[11]=y[11],m[12]=y[12],m[13]=y[13],m[14]=y[14],m[15]=y[15],m}function Sb(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function zy(y,m){var L=m[0],q=m[1],Y=m[2],j=m[3],$=m[4],pe=m[5],ke=m[6],Fe=m[7],Ue=m[8],ut=m[9],St=m[10],bt=m[11],Yt=m[12],cr=m[13],Ir=m[14],Ar=m[15],en=L*pe-q*$,Nr=L*ke-Y*$,Qr=L*Fe-j*$,an=q*ke-Y*pe,Pn=q*Fe-j*pe,ai=Y*Fe-j*ke,ti=Ue*cr-ut*Yt,Bi=Ue*Ir-St*Yt,Ti=Ue*Ar-bt*Yt,Ri=ut*Ir-St*cr,wa=ut*Ar-bt*cr,Ni=St*Ar-bt*Ir,Yi=en*Ni-Nr*wa+Qr*Ri+an*Ti-Pn*Bi+ai*ti;return Yi?(Yi=1/Yi,y[0]=(pe*Ni-ke*wa+Fe*Ri)*Yi,y[1]=(Y*wa-q*Ni-j*Ri)*Yi,y[2]=(cr*ai-Ir*Pn+Ar*an)*Yi,y[3]=(St*Pn-ut*ai-bt*an)*Yi,y[4]=(ke*Ti-$*Ni-Fe*Bi)*Yi,y[5]=(L*Ni-Y*Ti+j*Bi)*Yi,y[6]=(Ir*Qr-Yt*ai-Ar*Nr)*Yi,y[7]=(Ue*ai-St*Qr+bt*Nr)*Yi,y[8]=($*wa-pe*Ti+Fe*ti)*Yi,y[9]=(q*Ti-L*wa-j*ti)*Yi,y[10]=(Yt*Pn-cr*Qr+Ar*en)*Yi,y[11]=(ut*Qr-Ue*Pn-bt*en)*Yi,y[12]=(pe*Bi-$*Ri-ke*ti)*Yi,y[13]=(L*Ri-q*Bi+Y*ti)*Yi,y[14]=(cr*Nr-Yt*an-Ir*en)*Yi,y[15]=(Ue*an-ut*Nr+St*en)*Yi,y):null}function Oy(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3],pe=m[4],ke=m[5],Fe=m[6],Ue=m[7],ut=m[8],St=m[9],bt=m[10],Yt=m[11],cr=m[12],Ir=m[13],Ar=m[14],en=m[15],Nr=L[0],Qr=L[1],an=L[2],Pn=L[3];return y[0]=Nr*q+Qr*pe+an*ut+Pn*cr,y[1]=Nr*Y+Qr*ke+an*St+Pn*Ir,y[2]=Nr*j+Qr*Fe+an*bt+Pn*Ar,y[3]=Nr*$+Qr*Ue+an*Yt+Pn*en,Nr=L[4],Qr=L[5],an=L[6],Pn=L[7],y[4]=Nr*q+Qr*pe+an*ut+Pn*cr,y[5]=Nr*Y+Qr*ke+an*St+Pn*Ir,y[6]=Nr*j+Qr*Fe+an*bt+Pn*Ar,y[7]=Nr*$+Qr*Ue+an*Yt+Pn*en,Nr=L[8],Qr=L[9],an=L[10],Pn=L[11],y[8]=Nr*q+Qr*pe+an*ut+Pn*cr,y[9]=Nr*Y+Qr*ke+an*St+Pn*Ir,y[10]=Nr*j+Qr*Fe+an*bt+Pn*Ar,y[11]=Nr*$+Qr*Ue+an*Yt+Pn*en,Nr=L[12],Qr=L[13],an=L[14],Pn=L[15],y[12]=Nr*q+Qr*pe+an*ut+Pn*cr,y[13]=Nr*Y+Qr*ke+an*St+Pn*Ir,y[14]=Nr*j+Qr*Fe+an*bt+Pn*Ar,y[15]=Nr*$+Qr*Ue+an*Yt+Pn*en,y}function jl(y,m,L){var q=L[0],Y=L[1],j=L[2],$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar;return m===y?(y[12]=m[0]*q+m[4]*Y+m[8]*j+m[12],y[13]=m[1]*q+m[5]*Y+m[9]*j+m[13],y[14]=m[2]*q+m[6]*Y+m[10]*j+m[14],y[15]=m[3]*q+m[7]*Y+m[11]*j+m[15]):($=m[0],pe=m[1],ke=m[2],Fe=m[3],Ue=m[4],ut=m[5],St=m[6],bt=m[7],Yt=m[8],cr=m[9],Ir=m[10],Ar=m[11],y[0]=$,y[1]=pe,y[2]=ke,y[3]=Fe,y[4]=Ue,y[5]=ut,y[6]=St,y[7]=bt,y[8]=Yt,y[9]=cr,y[10]=Ir,y[11]=Ar,y[12]=$*q+Ue*Y+Yt*j+m[12],y[13]=pe*q+ut*Y+cr*j+m[13],y[14]=ke*q+St*Y+Ir*j+m[14],y[15]=Fe*q+bt*Y+Ar*j+m[15]),y}function Oh(y,m,L){var q=L[0],Y=L[1],j=L[2];return y[0]=m[0]*q,y[1]=m[1]*q,y[2]=m[2]*q,y[3]=m[3]*q,y[4]=m[4]*Y,y[5]=m[5]*Y,y[6]=m[6]*Y,y[7]=m[7]*Y,y[8]=m[8]*j,y[9]=m[9]*j,y[10]=m[10]*j,y[11]=m[11]*j,y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15],y}function Bh(y,m,L){var q=Math.sin(L),Y=Math.cos(L),j=m[4],$=m[5],pe=m[6],ke=m[7],Fe=m[8],Ue=m[9],ut=m[10],St=m[11];return m!==y&&(y[0]=m[0],y[1]=m[1],y[2]=m[2],y[3]=m[3],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[4]=j*Y+Fe*q,y[5]=$*Y+Ue*q,y[6]=pe*Y+ut*q,y[7]=ke*Y+St*q,y[8]=Fe*Y-j*q,y[9]=Ue*Y-$*q,y[10]=ut*Y-pe*q,y[11]=St*Y-ke*q,y}function Eb(y,m,L){var q=Math.sin(L),Y=Math.cos(L),j=m[0],$=m[1],pe=m[2],ke=m[3],Fe=m[4],Ue=m[5],ut=m[6],St=m[7];return m!==y&&(y[8]=m[8],y[9]=m[9],y[10]=m[10],y[11]=m[11],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[0]=j*Y+Fe*q,y[1]=$*Y+Ue*q,y[2]=pe*Y+ut*q,y[3]=ke*Y+St*q,y[4]=Fe*Y-j*q,y[5]=Ue*Y-$*q,y[6]=ut*Y-pe*q,y[7]=St*Y-ke*q,y}function VT(y,m,L,q,Y){var j=1/Math.tan(m/2),$;return y[0]=j/L,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=j,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,Y!=null&&Y!==1/0?($=1/(q-Y),y[10]=(Y+q)*$,y[14]=2*Y*q*$):(y[10]=-1,y[14]=-2*q),y}function L8(y,m,L,q,Y,j,$){var pe=1/(m-L),ke=1/(q-Y),Fe=1/(j-$);return y[0]=-2*pe,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ke,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*Fe,y[11]=0,y[12]=(m+L)*pe,y[13]=(Y+q)*ke,y[14]=($+j)*Fe,y[15]=1,y}var P8=Oy;function Y1(){var y=new mf(3);return mf!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function R8(y){var m=new mf(3);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m}function kb(y,m,L){return y[0]=m[0]+L[0],y[1]=m[1]+L[1],y[2]=m[2]+L[2],y}function D8(y,m,L){return y[0]=m[0]-L[0],y[1]=m[1]-L[1],y[2]=m[2]-L[2],y}function I8(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y}function HT(y,m){var L=m[0],q=m[1],Y=m[2],j=L*L+q*q+Y*Y;return j>0&&(j=1/Math.sqrt(j)),y[0]=m[0]*j,y[1]=m[1]*j,y[2]=m[2]*j,y}function zje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]}function Oje(y,m,L){var q=m[0],Y=m[1],j=m[2],$=L[0],pe=L[1],ke=L[2];return y[0]=Y*ke-j*pe,y[1]=j*$-q*ke,y[2]=q*pe-Y*$,y}function Bje(y,m,L){var q=m[0],Y=m[1],j=m[2];return y[0]=q*L[0]+Y*L[3]+j*L[6],y[1]=q*L[1]+Y*L[4]+j*L[7],y[2]=q*L[2]+Y*L[5]+j*L[8],y}var Nje=D8,kQt=function(){var y=Y1();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=3),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],y[2]=m[pe+2],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1],m[pe+2]=y[2];return m}}();function Uje(){var y=new mf(4);return mf!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0,y[3]=0),y}function Vje(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y[3]=m[3]*L,y}function Hje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]+y[3]*m[3]}function $5(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3];return y[0]=L[0]*q+L[4]*Y+L[8]*j+L[12]*$,y[1]=L[1]*q+L[5]*Y+L[9]*j+L[13]*$,y[2]=L[2]*q+L[6]*Y+L[10]*j+L[14]*$,y[3]=L[3]*q+L[7]*Y+L[11]*j+L[15]*$,y}var CQt=function(){var y=Uje();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=4),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],y[2]=m[pe+2],y[3]=m[pe+3],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1],m[pe+2]=y[2],m[pe+3]=y[3];return m}}();function Gje(){var y=new mf(2);return mf!=Float32Array&&(y[0]=0,y[1]=0),y}function Yje(y){var m=y[0],L=y[1];return m*m+L*L}var Wje=Yje,LQt=function(){var y=Gje();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=2),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1];return m}}(),Xje=function(y){function m(L){y.call(this,L,Fy)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new _o(q)},m.prototype.queryRadius=function(q){var Y=q;return ih("circle-radius",this,Y)+ih("circle-stroke-width",this,Y)+Ad(this.paint.get("circle-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe,Ue){for(var ut=Xp(q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ke.angle,Fe),St=this.paint.get("circle-radius").evaluate(Y,j),bt=this.paint.get("circle-stroke-width").evaluate(Y,j),Yt=St+bt,cr=this.paint.get("circle-pitch-alignment")==="map",Ir=cr?ut:Zje(ut,Ue),Ar=cr?Yt*Fe:Yt,en=0,Nr=$;en<Nr.length;en+=1)for(var Qr=Nr[en],an=0,Pn=Qr;an<Pn.length;an+=1){var ai=Pn[an],ti=cr?ai:LK(ai,Ue),Bi=Ar,Ti=$5([],[ai.x,ai.y,0,1],Ue);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Bi*=Ti[3]/ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Bi*=ke.cameraToCenterDistance/Ti[3]),Qa(Ir,ti,Bi))return!0}return!1},m}(yn);function LK(y,m){var L=$5([],[y.x,y.y,0,1],m);return new u(L[0]/L[3],L[1]/L[3])}function Zje(y,m){return y.map(function(L){return LK(L,m)})}var PK=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(_o);U("HeatmapBucket",PK,{omit:["layers"]});function F8(y,m,L,q){var Y=m.width,j=m.height;if(!q)q=new Uint8Array(Y*j*L);else if(q instanceof Uint8ClampedArray)q=new Uint8Array(q.buffer);else if(q.length!==Y*j*L)throw new RangeError("mismatched image size");return y.width=Y,y.height=j,y.data=q,y}function RK(y,m,L){var q=m.width,Y=m.height;if(!(q===y.width&&Y===y.height)){var j=F8({},{width:q,height:Y},L);q8(y,j,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,q),height:Math.min(y.height,Y)},L),y.width=q,y.height=Y,y.data=j.data}}function q8(y,m,L,q,Y,j){if(Y.width===0||Y.height===0)return m;if(Y.width>y.width||Y.height>y.height||L.x>y.width-Y.width||L.y>y.height-Y.height)throw new RangeError("out of range source coordinates for image copy");if(Y.width>m.width||Y.height>m.height||q.x>m.width-Y.width||q.y>m.height-Y.height)throw new RangeError("out of range destination coordinates for image copy");for(var $=y.data,pe=m.data,ke=0;ke<Y.height;ke++)for(var Fe=((L.y+ke)*y.width+L.x)*j,Ue=((q.y+ke)*m.width+q.x)*j,ut=0;ut<Y.width*j;ut++)pe[Ue+ut]=$[Fe+ut];return m}var W1=function(m,L){F8(this,m,1,L)};W1.prototype.resize=function(m){RK(this,m,1)},W1.prototype.clone=function(){return new W1({width:this.width,height:this.height},new Uint8Array(this.data))},W1.copy=function(m,L,q,Y,j){q8(m,L,q,Y,j,1)};var Nh=function(m,L){F8(this,m,4,L)};Nh.prototype.resize=function(m){RK(this,m,4)},Nh.prototype.replace=function(m,L){L?this.data.set(m):m instanceof Uint8ClampedArray?this.data=new Uint8Array(m.buffer):this.data=m},Nh.prototype.clone=function(){return new Nh({width:this.width,height:this.height},new Uint8Array(this.data))},Nh.copy=function(m,L,q,Y,j){q8(m,L,q,Y,j,4)},U("AlphaImage",W1),U("RGBAImage",Nh);var jje=new jr({"heatmap-radius":new Gt(hn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(hn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new We(hn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $r(hn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new We(hn.paint_heatmap["heatmap-opacity"])}),Kje={paint:jje};function DK(y){var m={},L=y.resolution||256,q=y.clips?y.clips.length:1,Y=y.image||new Nh({width:L,height:q}),j=function(en,Nr,Qr){m[y.evaluationKey]=Qr;var an=y.expression.evaluate(m);Y.data[en+Nr+0]=Math.floor(an.r*255/an.a),Y.data[en+Nr+1]=Math.floor(an.g*255/an.a),Y.data[en+Nr+2]=Math.floor(an.b*255/an.a),Y.data[en+Nr+3]=Math.floor(an.a*255)};if(y.clips)for(var Fe=0,Ue=0;Fe<q;++Fe,Ue+=L*4)for(var ut=0,St=0;ut<L;ut++,St+=4){var bt=ut/(L-1),Yt=y.clips[Fe],cr=Yt.start,Ir=Yt.end,Ar=cr*(1-bt)+Ir*bt;j(Ue,St,Ar)}else for(var $=0,pe=0;$<L;$++,pe+=4){var ke=$/(L-1);j(0,pe,ke)}return Y}var Jje=function(y){function m(L){y.call(this,L,Kje),this._updateColorRamp()}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new PK(q)},m.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="heatmap-color"&&this._updateColorRamp()},m.prototype._updateColorRamp=function(){var q=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=DK({expression:q,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},m.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},m}(yn),Qje=new jr({"hillshade-illumination-direction":new We(hn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new We(hn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new We(hn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new We(hn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new We(hn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new We(hn.paint_hillshade["hillshade-accent-color"])}),$je={paint:Qje},eKe=function(y){function m(L){y.call(this,L,$je)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},m}(yn),tKe=Bn([{name:"a_pos",components:2,type:"Int16"}],4),rKe=tKe.members,z8=ek,nKe=ek;function ek(y,m,L){L=L||2;var q=m&&m.length,Y=q?m[0]*L:y.length,j=IK(y,0,Y,L,!0),$=[];if(!j||j.next===j.prev)return $;var pe,ke,Fe,Ue,ut,St,bt;if(q&&(j=lKe(y,m,j,L)),y.length>80*L){pe=Fe=y[0],ke=Ue=y[1];for(var Yt=L;Yt<Y;Yt+=L)ut=y[Yt],St=y[Yt+1],ut<pe&&(pe=ut),St<ke&&(ke=St),ut>Fe&&(Fe=ut),St>Ue&&(Ue=St);bt=Math.max(Fe-pe,Ue-ke),bt=bt!==0?1/bt:0}return GT(j,$,L,pe,ke,bt),$}function IK(y,m,L,q,Y){var j,$;if(Y===N8(y,m,L,q)>0)for(j=m;j<L;j+=q)$=zK(j,y[j],y[j+1],$);else for(j=L-q;j>=m;j-=q)$=zK(j,y[j],y[j+1],$);return $&&tk($,$.next)&&(WT($),$=$.next),$}function By(y,m){if(!y)return y;m||(m=y);var L=y,q;do if(q=!1,!L.steiner&&(tk(L,L.next)||ku(L.prev,L,L.next)===0)){if(WT(L),L=m=L.prev,L===L.next)break;q=!0}else L=L.next;while(q||L!==m);return m}function GT(y,m,L,q,Y,j,$){if(y){!$&&j&&vKe(y,q,Y,j);for(var pe=y,ke,Fe;y.prev!==y.next;){if(ke=y.prev,Fe=y.next,j?aKe(y,q,Y,j):iKe(y)){m.push(ke.i/L),m.push(y.i/L),m.push(Fe.i/L),WT(y),y=Fe.next,pe=Fe.next;continue}if(y=Fe,y===pe){$?$===1?(y=oKe(By(y),m,L),GT(y,m,L,q,Y,j,2)):$===2&&sKe(y,m,L,q,Y,j):GT(By(y),m,L,q,Y,j,1);break}}}}function iKe(y){var m=y.prev,L=y,q=y.next;if(ku(m,L,q)>=0)return!1;for(var Y=y.next.next;Y!==y.prev;){if(Cb(m.x,m.y,L.x,L.y,q.x,q.y,Y.x,Y.y)&&ku(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function aKe(y,m,L,q){var Y=y.prev,j=y,$=y.next;if(ku(Y,j,$)>=0)return!1;for(var pe=Y.x<j.x?Y.x<$.x?Y.x:$.x:j.x<$.x?j.x:$.x,ke=Y.y<j.y?Y.y<$.y?Y.y:$.y:j.y<$.y?j.y:$.y,Fe=Y.x>j.x?Y.x>$.x?Y.x:$.x:j.x>$.x?j.x:$.x,Ue=Y.y>j.y?Y.y>$.y?Y.y:$.y:j.y>$.y?j.y:$.y,ut=O8(pe,ke,m,L,q),St=O8(Fe,Ue,m,L,q),bt=y.prevZ,Yt=y.nextZ;bt&&bt.z>=ut&&Yt&&Yt.z<=St;){if(bt!==y.prev&&bt!==y.next&&Cb(Y.x,Y.y,j.x,j.y,$.x,$.y,bt.x,bt.y)&&ku(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,Yt!==y.prev&&Yt!==y.next&&Cb(Y.x,Y.y,j.x,j.y,$.x,$.y,Yt.x,Yt.y)&&ku(Yt.prev,Yt,Yt.next)>=0))return!1;Yt=Yt.nextZ}for(;bt&&bt.z>=ut;){if(bt!==y.prev&&bt!==y.next&&Cb(Y.x,Y.y,j.x,j.y,$.x,$.y,bt.x,bt.y)&&ku(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;Yt&&Yt.z<=St;){if(Yt!==y.prev&&Yt!==y.next&&Cb(Y.x,Y.y,j.x,j.y,$.x,$.y,Yt.x,Yt.y)&&ku(Yt.prev,Yt,Yt.next)>=0)return!1;Yt=Yt.nextZ}return!0}function oKe(y,m,L){var q=y;do{var Y=q.prev,j=q.next.next;!tk(Y,j)&&FK(Y,q,q.next,j)&&YT(Y,j)&&YT(j,Y)&&(m.push(Y.i/L),m.push(q.i/L),m.push(j.i/L),WT(q),WT(q.next),q=y=j),q=q.next}while(q!==y);return By(q)}function sKe(y,m,L,q,Y,j){var $=y;do{for(var pe=$.next.next;pe!==$.prev;){if($.i!==pe.i&&gKe($,pe)){var ke=qK($,pe);$=By($,$.next),ke=By(ke,ke.next),GT($,m,L,q,Y,j),GT(ke,m,L,q,Y,j);return}pe=pe.next}$=$.next}while($!==y)}function lKe(y,m,L,q){var Y=[],j,$,pe,ke,Fe;for(j=0,$=m.length;j<$;j++)pe=m[j]*q,ke=j<$-1?m[j+1]*q:y.length,Fe=IK(y,pe,ke,q,!1),Fe===Fe.next&&(Fe.steiner=!0),Y.push(pKe(Fe));for(Y.sort(uKe),j=0;j<Y.length;j++)fKe(Y[j],L),L=By(L,L.next);return L}function uKe(y,m){return y.x-m.x}function fKe(y,m){if(m=cKe(y,m),m){var L=qK(m,y);By(m,m.next),By(L,L.next)}}function cKe(y,m){var L=m,q=y.x,Y=y.y,j=-1/0,$;do{if(Y<=L.y&&Y>=L.next.y&&L.next.y!==L.y){var pe=L.x+(Y-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(pe<=q&&pe>j){if(j=pe,pe===q){if(Y===L.y)return L;if(Y===L.next.y)return L.next}$=L.x<L.next.x?L:L.next}}L=L.next}while(L!==m);if(!$)return null;if(q===j)return $;var ke=$,Fe=$.x,Ue=$.y,ut=1/0,St;L=$;do q>=L.x&&L.x>=Fe&&q!==L.x&&Cb(Y<Ue?q:j,Y,Fe,Ue,Y<Ue?j:q,Y,L.x,L.y)&&(St=Math.abs(Y-L.y)/(q-L.x),YT(L,y)&&(St<ut||St===ut&&(L.x>$.x||L.x===$.x&&hKe($,L)))&&($=L,ut=St)),L=L.next;while(L!==ke);return $}function hKe(y,m){return ku(y.prev,y,m.prev)<0&&ku(m.next,y,y.next)<0}function vKe(y,m,L,q){var Y=y;do Y.z===null&&(Y.z=O8(Y.x,Y.y,m,L,q)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==y);Y.prevZ.nextZ=null,Y.prevZ=null,dKe(Y)}function dKe(y){var m,L,q,Y,j,$,pe,ke,Fe=1;do{for(L=y,y=null,j=null,$=0;L;){for($++,q=L,pe=0,m=0;m<Fe&&(pe++,q=q.nextZ,!!q);m++);for(ke=Fe;pe>0||ke>0&&q;)pe!==0&&(ke===0||!q||L.z<=q.z)?(Y=L,L=L.nextZ,pe--):(Y=q,q=q.nextZ,ke--),j?j.nextZ=Y:y=Y,Y.prevZ=j,j=Y;L=q}j.nextZ=null,Fe*=2}while($>1);return y}function O8(y,m,L,q,Y){return y=32767*(y-L)*Y,m=32767*(m-q)*Y,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y|m<<1}function pKe(y){var m=y,L=y;do(m.x<L.x||m.x===L.x&&m.y<L.y)&&(L=m),m=m.next;while(m!==y);return L}function Cb(y,m,L,q,Y,j,$,pe){return(Y-$)*(m-pe)-(y-$)*(j-pe)>=0&&(y-$)*(q-pe)-(L-$)*(m-pe)>=0&&(L-$)*(j-pe)-(Y-$)*(q-pe)>=0}function gKe(y,m){return y.next.i!==m.i&&y.prev.i!==m.i&&!yKe(y,m)&&(YT(y,m)&&YT(m,y)&&mKe(y,m)&&(ku(y.prev,y,m.prev)||ku(y,m.prev,m))||tk(y,m)&&ku(y.prev,y,y.next)>0&&ku(m.prev,m,m.next)>0)}function ku(y,m,L){return(m.y-y.y)*(L.x-m.x)-(m.x-y.x)*(L.y-m.y)}function tk(y,m){return y.x===m.x&&y.y===m.y}function FK(y,m,L,q){var Y=nk(ku(y,m,L)),j=nk(ku(y,m,q)),$=nk(ku(L,q,y)),pe=nk(ku(L,q,m));return!!(Y!==j&&$!==pe||Y===0&&rk(y,L,m)||j===0&&rk(y,q,m)||$===0&&rk(L,y,q)||pe===0&&rk(L,m,q))}function rk(y,m,L){return m.x<=Math.max(y.x,L.x)&&m.x>=Math.min(y.x,L.x)&&m.y<=Math.max(y.y,L.y)&&m.y>=Math.min(y.y,L.y)}function nk(y){return y>0?1:y<0?-1:0}function yKe(y,m){var L=y;do{if(L.i!==y.i&&L.next.i!==y.i&&L.i!==m.i&&L.next.i!==m.i&&FK(L,L.next,y,m))return!0;L=L.next}while(L!==y);return!1}function YT(y,m){return ku(y.prev,y,y.next)<0?ku(y,m,y.next)>=0&&ku(y,y.prev,m)>=0:ku(y,m,y.prev)<0||ku(y,y.next,m)<0}function mKe(y,m){var L=y,q=!1,Y=(y.x+m.x)/2,j=(y.y+m.y)/2;do L.y>j!=L.next.y>j&&L.next.y!==L.y&&Y<(L.next.x-L.x)*(j-L.y)/(L.next.y-L.y)+L.x&&(q=!q),L=L.next;while(L!==y);return q}function qK(y,m){var L=new B8(y.i,y.x,y.y),q=new B8(m.i,m.x,m.y),Y=y.next,j=m.prev;return y.next=m,m.prev=y,L.next=Y,Y.prev=L,q.next=L,L.prev=q,j.next=q,q.prev=j,q}function zK(y,m,L,q){var Y=new B8(y,m,L);return q?(Y.next=q.next,Y.prev=q,q.next.prev=Y,q.next=Y):(Y.prev=Y,Y.next=Y),Y}function WT(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function B8(y,m,L){this.i=y,this.x=m,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}ek.deviation=function(y,m,L,q){var Y=m&&m.length,j=Y?m[0]*L:y.length,$=Math.abs(N8(y,0,j,L));if(Y)for(var pe=0,ke=m.length;pe<ke;pe++){var Fe=m[pe]*L,Ue=pe<ke-1?m[pe+1]*L:y.length;$-=Math.abs(N8(y,Fe,Ue,L))}var ut=0;for(pe=0;pe<q.length;pe+=3){var St=q[pe]*L,bt=q[pe+1]*L,Yt=q[pe+2]*L;ut+=Math.abs((y[St]-y[Yt])*(y[bt+1]-y[St+1])-(y[St]-y[bt])*(y[Yt+1]-y[St+1]))}return $===0&&ut===0?0:Math.abs((ut-$)/$)};function N8(y,m,L,q){for(var Y=0,j=m,$=L-q;j<L;j+=q)Y+=(y[$]-y[j])*(y[j+1]+y[$+1]),$=j;return Y}ek.flatten=function(y){for(var m=y[0][0].length,L={vertices:[],holes:[],dimensions:m},q=0,Y=0;Y<y.length;Y++){for(var j=0;j<y[Y].length;j++)for(var $=0;$<m;$++)L.vertices.push(y[Y][j][$]);Y>0&&(q+=y[Y-1].length,L.holes.push(q))}return L},z8.default=nKe;function xKe(y,m,L,q,Y){OK(y,m,L||0,q||y.length-1,Y||_Ke)}function OK(y,m,L,q,Y){for(;q>L;){if(q-L>600){var j=q-L+1,$=m-L+1,pe=Math.log(j),ke=.5*Math.exp(2*pe/3),Fe=.5*Math.sqrt(pe*ke*(j-ke)/j)*($-j/2<0?-1:1),Ue=Math.max(L,Math.floor(m-$*ke/j+Fe)),ut=Math.min(q,Math.floor(m+(j-$)*ke/j+Fe));OK(y,m,Ue,ut,Y)}var St=y[m],bt=L,Yt=q;for(XT(y,L,m),Y(y[q],St)>0&&XT(y,L,q);bt<Yt;){for(XT(y,bt,Yt),bt++,Yt--;Y(y[bt],St)<0;)bt++;for(;Y(y[Yt],St)>0;)Yt--}Y(y[L],St)===0?XT(y,L,Yt):(Yt++,XT(y,Yt,q)),Yt<=m&&(L=Yt+1),m<=Yt&&(q=Yt-1)}}function XT(y,m,L){var q=y[m];y[m]=y[L],y[L]=q}function _Ke(y,m){return y<m?-1:y>m?1:0}function U8(y,m){var L=y.length;if(L<=1)return[y];for(var q=[],Y,j,$=0;$<L;$++){var pe=re(y[$]);pe!==0&&(y[$].area=Math.abs(pe),j===void 0&&(j=pe<0),j===pe<0?(Y&&q.push(Y),Y=[y[$]]):Y.push(y[$]))}if(Y&&q.push(Y),m>1)for(var ke=0;ke<q.length;ke++)q[ke].length<=m||(xKe(q[ke],m,1,q[ke].length-1,bKe),q[ke]=q[ke].slice(0,m));return q}function bKe(y,m){return m.area-y.area}function V8(y,m,L){for(var q=L.patternDependencies,Y=!1,j=0,$=m;j<$.length;j+=1){var pe=$[j],ke=pe.paint.get(y+"-pattern");ke.isConstant()||(Y=!0);var Fe=ke.constantOr(null);Fe&&(Y=!0,q[Fe.to]=!0,q[Fe.from]=!0)}return Y}function H8(y,m,L,q,Y){for(var j=Y.patternDependencies,$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.paint.get(y+"-pattern"),Ue=Fe.value;if(Ue.kind!=="constant"){var ut=Ue.evaluate({zoom:q-1},L,{},Y.availableImages),St=Ue.evaluate({zoom:q},L,{},Y.availableImages),bt=Ue.evaluate({zoom:q+1},L,{},Y.availableImages);ut=ut&&ut.name?ut.name:ut,St=St&&St.name?St.name:St,bt=bt&&bt.name?bt.name:bt,j[ut]=!0,j[St]=!0,j[bt]=!0,L.patterns[ke.id]={min:ut,mid:St,max:bt}}}return L}var wKe=500,Zp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fn,this.indexArray=new Si,this.indexArray2=new _a,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.segments2=new Ja,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};Zp.prototype.populate=function(m,L,q){this.hasPattern=V8("fill",this.layers,L);for(var Y=this.layers[0].layout.get("fill-sort-key"),j=[],$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.feature,Ue=ke.id,ut=ke.index,St=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Yt=Da(Fe,bt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),Yt,q)){var cr=Y?Y.evaluate(Yt,{},q,L.availableImages):void 0,Ir={id:Ue,properties:Fe.properties,type:Fe.type,sourceLayerIndex:St,index:ut,geometry:bt?Yt.geometry:xi(Fe),patterns:{},sortKey:cr};j.push(Ir)}}Y&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Nr=en[Ar],Qr=Nr,an=Qr.geometry,Pn=Qr.index,ai=Qr.sourceLayerIndex;if(this.hasPattern){var ti=H8("fill",this.layers,Nr,this.zoom,L);this.patternFeatures.push(ti)}else this.addFeature(Nr,an,Pn,q,{});var Bi=m[Pn].feature;L.featureIndex.insert(Bi,an,Pn,ai,this.index)}},Zp.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},Zp.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var $=j[Y];this.addFeature($,$.geometry,$.index,L,q)}},Zp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,rKe),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.indexBuffer2=m.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(m),this.uploaded=!0},Zp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Zp.prototype.addFeature=function(m,L,q,Y,j){for(var $=0,pe=U8(L,wKe);$<pe.length;$+=1){for(var ke=pe[$],Fe=0,Ue=0,ut=ke;Ue<ut.length;Ue+=1){var St=ut[Ue];Fe+=St.length}for(var bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray),Yt=bt.vertexLength,cr=[],Ir=[],Ar=0,en=ke;Ar<en.length;Ar+=1){var Nr=en[Ar];if(Nr.length!==0){Nr!==ke[0]&&Ir.push(cr.length/2);var Qr=this.segments2.prepareSegment(Nr.length,this.layoutVertexArray,this.indexArray2),an=Qr.vertexLength;this.layoutVertexArray.emplaceBack(Nr[0].x,Nr[0].y),this.indexArray2.emplaceBack(an+Nr.length-1,an),cr.push(Nr[0].x),cr.push(Nr[0].y);for(var Pn=1;Pn<Nr.length;Pn++)this.layoutVertexArray.emplaceBack(Nr[Pn].x,Nr[Pn].y),this.indexArray2.emplaceBack(an+Pn-1,an+Pn),cr.push(Nr[Pn].x),cr.push(Nr[Pn].y);Qr.vertexLength+=Nr.length,Qr.primitiveLength+=Nr.length}}for(var ai=z8(cr,Ir),ti=0;ti<ai.length;ti+=3)this.indexArray.emplaceBack(Yt+ai[ti],Yt+ai[ti+1],Yt+ai[ti+2]);bt.vertexLength+=Fe,bt.primitiveLength+=ai.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},U("FillBucket",Zp,{omit:["layers","patternFeatures"]});var TKe=new jr({"fill-sort-key":new Gt(hn.layout_fill["fill-sort-key"])}),AKe=new jr({"fill-antialias":new We(hn.paint_fill["fill-antialias"]),"fill-opacity":new Gt(hn.paint_fill["fill-opacity"]),"fill-color":new Gt(hn.paint_fill["fill-color"]),"fill-outline-color":new Gt(hn.paint_fill["fill-outline-color"]),"fill-translate":new We(hn.paint_fill["fill-translate"]),"fill-translate-anchor":new We(hn.paint_fill["fill-translate-anchor"]),"fill-pattern":new or(hn.paint_fill["fill-pattern"])}),MKe={paint:AKe,layout:TKe},SKe=function(y){function m(L){y.call(this,L,MKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(q,Y){y.prototype.recalculate.call(this,q,Y);var j=this.paint._values["fill-outline-color"];j.value.kind==="constant"&&j.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},m.prototype.createBucket=function(q){return new Zp(q)},m.prototype.queryRadius=function(){return Ad(this.paint.get("fill-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe){var Ue=Xp(q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ke.angle,Fe);return Vo(Ue,$)},m.prototype.isTileClipped=function(){return!0},m}(yn),EKe=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),kKe=EKe.members,BK=Lb;function Lb(y,m,L,q,Y){this.properties={},this.extent=L,this.type=0,this._pbf=y,this._geometry=-1,this._keys=q,this._values=Y,y.readFields(CKe,this,m)}function CKe(y,m,L){y==1?m.id=L.readVarint():y==2?LKe(L,m):y==3?m.type=L.readVarint():y==4&&(m._geometry=L.pos)}function LKe(y,m){for(var L=y.readVarint()+y.pos;y.pos<L;){var q=m._keys[y.readVarint()],Y=m._values[y.readVarint()];m.properties[q]=Y}}Lb.types=["Unknown","Point","LineString","Polygon"],Lb.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,q=0,Y=0,j=0,$=[],pe;y.pos<m;){if(q<=0){var ke=y.readVarint();L=ke&7,q=ke>>3}if(q--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),L===1&&(pe&&$.push(pe),pe=[]),pe.push(new u(Y,j));else if(L===7)pe&&pe.push(pe[0].clone());else throw new Error("unknown command "+L)}return pe&&$.push(pe),$},Lb.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,q=0,Y=0,j=0,$=1/0,pe=-1/0,ke=1/0,Fe=-1/0;y.pos<m;){if(q<=0){var Ue=y.readVarint();L=Ue&7,q=Ue>>3}if(q--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),Y<$&&($=Y),Y>pe&&(pe=Y),j<ke&&(ke=j),j>Fe&&(Fe=j);else if(L!==7)throw new Error("unknown command "+L)}return[$,ke,pe,Fe]},Lb.prototype.toGeoJSON=function(y,m,L){var q=this.extent*Math.pow(2,L),Y=this.extent*y,j=this.extent*m,$=this.loadGeometry(),pe=Lb.types[this.type],ke,Fe;function Ue(bt){for(var Yt=0;Yt<bt.length;Yt++){var cr=bt[Yt],Ir=180-(cr.y+j)*360/q;bt[Yt]=[(cr.x+Y)*360/q-180,360/Math.PI*Math.atan(Math.exp(Ir*Math.PI/180))-90]}}switch(this.type){case 1:var ut=[];for(ke=0;ke<$.length;ke++)ut[ke]=$[ke][0];$=ut,Ue($);break;case 2:for(ke=0;ke<$.length;ke++)Ue($[ke]);break;case 3:for($=PKe($),ke=0;ke<$.length;ke++)for(Fe=0;Fe<$[ke].length;Fe++)Ue($[ke][Fe]);break}$.length===1?$=$[0]:pe="Multi"+pe;var St={type:"Feature",geometry:{type:pe,coordinates:$},properties:this.properties};return"id"in this&&(St.id=this.id),St};function PKe(y){var m=y.length;if(m<=1)return[y];for(var L=[],q,Y,j=0;j<m;j++){var $=RKe(y[j]);$!==0&&(Y===void 0&&(Y=$<0),Y===$<0?(q&&L.push(q),q=[y[j]]):q.push(y[j]))}return q&&L.push(q),L}function RKe(y){for(var m=0,L=0,q=y.length,Y=q-1,j,$;L<q;Y=L++)j=y[L],$=y[Y],m+=($.x-j.x)*(j.y+$.y);return m}var NK=UK;function UK(y,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(DKe,this,m),this.length=this._features.length}function DKe(y,m,L){y===15?m.version=L.readVarint():y===1?m.name=L.readString():y===5?m.extent=L.readVarint():y===2?m._features.push(L.pos):y===3?m._keys.push(L.readString()):y===4&&m._values.push(IKe(L))}function IKe(y){for(var m=null,L=y.readVarint()+y.pos;y.pos<L;){var q=y.readVarint()>>3;m=q===1?y.readString():q===2?y.readFloat():q===3?y.readDouble():q===4?y.readVarint64():q===5?y.readVarint():q===6?y.readSVarint():q===7?y.readBoolean():null}return m}UK.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var m=this._pbf.readVarint()+this._pbf.pos;return new BK(this._pbf,m,this.extent,this._keys,this._values)};var FKe=qKe;function qKe(y,m){this.layers=y.readFields(zKe,{},m)}function zKe(y,m,L){if(y===3){var q=new NK(L,L.readVarint()+L.pos);q.length&&(m[q.name]=q)}}var OKe=FKe,BKe=BK,NKe=NK,Pb={VectorTile:OKe,VectorTileFeature:BKe,VectorTileLayer:NKe},UKe=Pb.VectorTileFeature.types,VKe=500,G8=Math.pow(2,13);function ZT(y,m,L,q,Y,j,$,pe){y.emplaceBack(m,L,Math.floor(q*G8)*2+$,Y*G8*2,j*G8*2,Math.round(pe))}var jp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new Si,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};jp.prototype.populate=function(m,L,q){this.features=[],this.hasPattern=V8("fill-extrusion",this.layers,L);for(var Y=0,j=m;Y<j.length;Y+=1){var $=j[Y],pe=$.feature,ke=$.id,Fe=$.index,Ue=$.sourceLayerIndex,ut=this.layers[0]._featureFilter.needGeometry,St=Da(pe,ut);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),St,q)){var bt={id:ke,sourceLayerIndex:Ue,index:Fe,geometry:ut?St.geometry:xi(pe),properties:pe.properties,type:pe.type,patterns:{}};this.hasPattern?this.features.push(H8("fill-extrusion",this.layers,bt,this.zoom,L)):this.addFeature(bt,bt.geometry,Fe,q,{}),L.featureIndex.insert(pe,bt.geometry,Fe,Ue,this.index,!0)}}},jp.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.features;Y<j.length;Y+=1){var $=j[Y],pe=$.geometry;this.addFeature($,pe,$.index,L,q)}},jp.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},jp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,kKe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},jp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jp.prototype.addFeature=function(m,L,q,Y,j){for(var $=0,pe=U8(L,VKe);$<pe.length;$+=1){for(var ke=pe[$],Fe=0,Ue=0,ut=ke;Ue<ut.length;Ue+=1){var St=ut[Ue];Fe+=St.length}for(var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Yt=0,cr=ke;Yt<cr.length;Yt+=1){var Ir=cr[Yt];if(Ir.length!==0&&!GKe(Ir))for(var Ar=0,en=0;en<Ir.length;en++){var Nr=Ir[en];if(en>=1){var Qr=Ir[en-1];if(!HKe(Nr,Qr)){bt.vertexLength+4>Ja.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var an=Nr.sub(Qr)._perp()._unit(),Pn=Qr.dist(Nr);Ar+Pn>32768&&(Ar=0),ZT(this.layoutVertexArray,Nr.x,Nr.y,an.x,an.y,0,0,Ar),ZT(this.layoutVertexArray,Nr.x,Nr.y,an.x,an.y,0,1,Ar),Ar+=Pn,ZT(this.layoutVertexArray,Qr.x,Qr.y,an.x,an.y,0,0,Ar),ZT(this.layoutVertexArray,Qr.x,Qr.y,an.x,an.y,0,1,Ar);var ai=bt.vertexLength;this.indexArray.emplaceBack(ai,ai+2,ai+1),this.indexArray.emplaceBack(ai+1,ai+2,ai+3),bt.vertexLength+=4,bt.primitiveLength+=2}}}}if(bt.vertexLength+Fe>Ja.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray)),UKe[m.type]==="Polygon"){for(var ti=[],Bi=[],Ti=bt.vertexLength,Ri=0,wa=ke;Ri<wa.length;Ri+=1){var Ni=wa[Ri];if(Ni.length!==0){Ni!==ke[0]&&Bi.push(ti.length/2);for(var Yi=0;Yi<Ni.length;Yi++){var Xa=Ni[Yi];ZT(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),ti.push(Xa.x),ti.push(Xa.y)}}}for(var ga=z8(ti,Bi),Ro=0;Ro<ga.length;Ro+=3)this.indexArray.emplaceBack(Ti+ga[Ro],Ti+ga[Ro+2],Ti+ga[Ro+1]);bt.primitiveLength+=ga.length/3,bt.vertexLength+=Fe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},U("FillExtrusionBucket",jp,{omit:["layers","features"]});function HKe(y,m){return y.x===m.x&&(y.x<0||y.x>un)||y.y===m.y&&(y.y<0||y.y>un)}function GKe(y){return y.every(function(m){return m.x<0})||y.every(function(m){return m.x>un})||y.every(function(m){return m.y<0})||y.every(function(m){return m.y>un})}var YKe=new jr({"fill-extrusion-opacity":new We(hn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(hn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new We(hn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new We(hn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new or(hn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(hn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(hn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new We(hn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),WKe={paint:YKe},XKe=function(y){function m(L){y.call(this,L,WKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new jp(q)},m.prototype.queryRadius=function(){return Ad(this.paint.get("fill-extrusion-translate"))},m.prototype.is3D=function(){return!0},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe,Ue){var ut=Xp(q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ke.angle,Fe),St=this.paint.get("fill-extrusion-height").evaluate(Y,j),bt=this.paint.get("fill-extrusion-base").evaluate(Y,j),Yt=KKe(ut,Ue,ke,0),cr=jKe($,bt,St,Ue),Ir=cr[0],Ar=cr[1];return ZKe(Ir,Ar,Yt)},m}(yn);function jT(y,m){return y.x*m.x+y.y*m.y}function VK(y,m){if(y.length===1){for(var L=0,q=m[L++],Y;!Y||q.equals(Y);)if(Y=m[L++],!Y)return 1/0;for(;L<m.length;L++){var j=m[L],$=y[0],pe=Y.sub(q),ke=j.sub(q),Fe=$.sub(q),Ue=jT(pe,pe),ut=jT(pe,ke),St=jT(ke,ke),bt=jT(Fe,pe),Yt=jT(Fe,ke),cr=Ue*St-ut*ut,Ir=(St*bt-ut*Yt)/cr,Ar=(Ue*Yt-ut*bt)/cr,en=1-Ir-Ar,Nr=q.z*en+Y.z*Ir+j.z*Ar;if(isFinite(Nr))return Nr}return 1/0}else{for(var Qr=1/0,an=0,Pn=m;an<Pn.length;an+=1){var ai=Pn[an];Qr=Math.min(Qr,ai.z)}return Qr}}function ZKe(y,m,L){var q=1/0;Vo(L,m)&&(q=VK(L,m[0]));for(var Y=0;Y<m.length;Y++)for(var j=m[Y],$=y[Y],pe=0;pe<j.length-1;pe++){var ke=j[pe],Fe=j[pe+1],Ue=$[pe],ut=$[pe+1],St=[ke,Fe,ut,Ue,ke];ua(L,St)&&(q=Math.min(q,VK(L,St)))}return q===1/0?!1:q}function jKe(y,m,L,q){for(var Y=[],j=[],$=q[8]*m,pe=q[9]*m,ke=q[10]*m,Fe=q[11]*m,Ue=q[8]*L,ut=q[9]*L,St=q[10]*L,bt=q[11]*L,Yt=0,cr=y;Yt<cr.length;Yt+=1){for(var Ir=cr[Yt],Ar=[],en=[],Nr=0,Qr=Ir;Nr<Qr.length;Nr+=1){var an=Qr[Nr],Pn=an.x,ai=an.y,ti=q[0]*Pn+q[4]*ai+q[12],Bi=q[1]*Pn+q[5]*ai+q[13],Ti=q[2]*Pn+q[6]*ai+q[14],Ri=q[3]*Pn+q[7]*ai+q[15],wa=ti+$,Ni=Bi+pe,Yi=Ti+ke,Xa=Ri+Fe,ga=ti+Ue,Ro=Bi+ut,Ss=Ti+St,Do=Ri+bt,Io=new u(wa/Xa,Ni/Xa);Io.z=Yi/Xa,Ar.push(Io);var Mo=new u(ga/Do,Ro/Do);Mo.z=Ss/Do,en.push(Mo)}Y.push(Ar),j.push(en)}return[Y,j]}function KKe(y,m,L,q){for(var Y=[],j=0,$=y;j<$.length;j+=1){var pe=$[j],ke=[pe.x,pe.y,q,1];$5(ke,ke,m),Y.push(new u(ke[0]/ke[3],ke[1]/ke[3]))}return Y}var JKe=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),QKe=JKe.members,$Ke=Bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),eJe=$Ke.members,tJe=Pb.VectorTileFeature.types,HK=63,rJe=Math.cos(75/2*(Math.PI/180)),nJe=15,iJe=20,aJe=15,GK=1/2,YK=Math.pow(2,aJe-1)/GK,ah=function(m){var L=this;this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(q){return q.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(q){L.gradients[q.id]={}}),this.layoutVertexArray=new En,this.layoutVertexArray2=new mi,this.indexArray=new Si,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(q){return q.isStateDependent()}).map(function(q){return q.id})};ah.prototype.populate=function(m,L,q){this.hasPattern=V8("line",this.layers,L);for(var Y=this.layers[0].layout.get("line-sort-key"),j=[],$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.feature,Ue=ke.id,ut=ke.index,St=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Yt=Da(Fe,bt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),Yt,q)){var cr=Y?Y.evaluate(Yt,{},q):void 0,Ir={id:Ue,properties:Fe.properties,type:Fe.type,sourceLayerIndex:St,index:ut,geometry:bt?Yt.geometry:xi(Fe),patterns:{},sortKey:cr};j.push(Ir)}}Y&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Nr=en[Ar],Qr=Nr,an=Qr.geometry,Pn=Qr.index,ai=Qr.sourceLayerIndex;if(this.hasPattern){var ti=H8("line",this.layers,Nr,this.zoom,L);this.patternFeatures.push(ti)}else this.addFeature(Nr,an,Pn,q,{});var Bi=m[Pn].feature;L.featureIndex.insert(Bi,an,Pn,ai,this.index)}},ah.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},ah.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var $=j[Y];this.addFeature($,$.geometry,$.index,L,q)}},ah.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ah.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ah.prototype.upload=function(m){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=m.createVertexBuffer(this.layoutVertexArray2,eJe)),this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,QKe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},ah.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ah.prototype.lineFeatureClips=function(m){if(m.properties&&m.properties.hasOwnProperty("mapbox_clip_start")&&m.properties.hasOwnProperty("mapbox_clip_end")){var L=+m.properties.mapbox_clip_start,q=+m.properties.mapbox_clip_end;return{start:L,end:q}}},ah.prototype.addFeature=function(m,L,q,Y,j){var $=this.layers[0].layout,pe=$.get("line-join").evaluate(m,{}),ke=$.get("line-cap"),Fe=$.get("line-miter-limit"),Ue=$.get("line-round-limit");this.lineClips=this.lineFeatureClips(m);for(var ut=0,St=L;ut<St.length;ut+=1){var bt=St[ut];this.addLine(bt,m,pe,ke,Fe,Ue)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},ah.prototype.addLine=function(m,L,q,Y,j,$){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var pe=0;pe<m.length-1;pe++)this.totalDistance+=m[pe].dist(m[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ke=tJe[L.type]==="Polygon",Fe=m.length;Fe>=2&&m[Fe-1].equals(m[Fe-2]);)Fe--;for(var Ue=0;Ue<Fe-1&&m[Ue].equals(m[Ue+1]);)Ue++;if(!(Fe<(ke?3:2))){q==="bevel"&&(j=1.05);var ut=this.overscaling<=16?nJe*un/(512*this.overscaling):0,St=this.segments.prepareSegment(Fe*10,this.layoutVertexArray,this.indexArray),bt,Yt=void 0,cr=void 0,Ir=void 0,Ar=void 0;this.e1=this.e2=-1,ke&&(bt=m[Fe-2],Ar=m[Ue].sub(bt)._unit()._perp());for(var en=Ue;en<Fe;en++)if(cr=en===Fe-1?ke?m[Ue+1]:void 0:m[en+1],!(cr&&m[en].equals(cr))){Ar&&(Ir=Ar),bt&&(Yt=bt),bt=m[en],Ar=cr?cr.sub(bt)._unit()._perp():Ir,Ir=Ir||Ar;var Nr=Ir.add(Ar);(Nr.x!==0||Nr.y!==0)&&Nr._unit();var Qr=Ir.x*Ar.x+Ir.y*Ar.y,an=Nr.x*Ar.x+Nr.y*Ar.y,Pn=an!==0?1/an:1/0,ai=2*Math.sqrt(2-2*an),ti=an<rJe&&Yt&&cr,Bi=Ir.x*Ar.y-Ir.y*Ar.x>0;if(ti&&en>Ue){var Ti=bt.dist(Yt);if(Ti>2*ut){var Ri=bt.sub(bt.sub(Yt)._mult(ut/Ti)._round());this.updateDistance(Yt,Ri),this.addCurrentVertex(Ri,Ir,0,0,St),Yt=Ri}}var wa=Yt&&cr,Ni=wa?q:ke?"butt":Y;if(wa&&Ni==="round"&&(Pn<$?Ni="miter":Pn<=2&&(Ni="fakeround")),Ni==="miter"&&Pn>j&&(Ni="bevel"),Ni==="bevel"&&(Pn>2&&(Ni="flipbevel"),Pn<j&&(Ni="miter")),Yt&&this.updateDistance(Yt,bt),Ni==="miter")Nr._mult(Pn),this.addCurrentVertex(bt,Nr,0,0,St);else if(Ni==="flipbevel"){if(Pn>100)Nr=Ar.mult(-1);else{var Yi=Pn*Ir.add(Ar).mag()/Ir.sub(Ar).mag();Nr._perp()._mult(Yi*(Bi?-1:1))}this.addCurrentVertex(bt,Nr,0,0,St),this.addCurrentVertex(bt,Nr.mult(-1),0,0,St)}else if(Ni==="bevel"||Ni==="fakeround"){var Xa=-Math.sqrt(Pn*Pn-1),ga=Bi?Xa:0,Ro=Bi?0:Xa;if(Yt&&this.addCurrentVertex(bt,Ir,ga,Ro,St),Ni==="fakeround")for(var Ss=Math.round(ai*180/Math.PI/iJe),Do=1;Do<Ss;Do++){var Io=Do/Ss;if(Io!==.5){var Mo=Io-.5,Os=1.0904+Qr*(-3.2452+Qr*(3.55645-Qr*1.43519)),Ws=.848013+Qr*(-1.06021+Qr*.215638);Io=Io+Io*Mo*(Io-1)*(Os*Mo*Mo+Ws)}var ql=Ar.sub(Ir)._mult(Io)._add(Ir)._unit()._mult(Bi?-1:1);this.addHalfVertex(bt,ql.x,ql.y,!1,Bi,0,St)}cr&&this.addCurrentVertex(bt,Ar,-ga,-Ro,St)}else if(Ni==="butt")this.addCurrentVertex(bt,Nr,0,0,St);else if(Ni==="square"){var Kl=Yt?1:-1;this.addCurrentVertex(bt,Nr,Kl,Kl,St)}else Ni==="round"&&(Yt&&(this.addCurrentVertex(bt,Ir,0,0,St),this.addCurrentVertex(bt,Ir,1,1,St,!0)),cr&&(this.addCurrentVertex(bt,Ar,-1,-1,St,!0),this.addCurrentVertex(bt,Ar,0,0,St)));if(ti&&en<Fe-1){var _f=bt.dist(cr);if(_f>2*ut){var Pu=bt.add(cr.sub(bt)._mult(ut/_f)._round());this.updateDistance(bt,Pu),this.addCurrentVertex(Pu,Ar,0,0,St),bt=Pu}}}}},ah.prototype.addCurrentVertex=function(m,L,q,Y,j,$){$===void 0&&($=!1);var pe=L.x+L.y*q,ke=L.y-L.x*q,Fe=-L.x+L.y*Y,Ue=-L.y-L.x*Y;this.addHalfVertex(m,pe,ke,$,!1,q,j),this.addHalfVertex(m,Fe,Ue,$,!0,-Y,j),this.distance>YK/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(m,L,q,Y,j,$))},ah.prototype.addHalfVertex=function(m,L,q,Y,j,$,pe){var ke=m.x,Fe=m.y,Ue=this.lineClips?this.scaledDistance*(YK-1):this.scaledDistance,ut=Ue*GK;if(this.layoutVertexArray.emplaceBack((ke<<1)+(Y?1:0),(Fe<<1)+(j?1:0),Math.round(HK*L)+128,Math.round(HK*q)+128,($===0?0:$<0?-1:1)+1|(ut&63)<<2,ut>>6),this.lineClips){var St=this.scaledDistance-this.lineClips.start,bt=this.lineClips.end-this.lineClips.start,Yt=St/bt;this.layoutVertexArray2.emplaceBack(Yt,this.lineClipsArray.length)}var cr=pe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,cr),pe.primitiveLength++),j?this.e2=cr:this.e1=cr},ah.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ah.prototype.updateDistance=function(m,L){this.distance+=m.dist(L),this.updateScaledDistance()},U("LineBucket",ah,{omit:["layers","patternFeatures"]});var oJe=new jr({"line-cap":new We(hn.layout_line["line-cap"]),"line-join":new Gt(hn.layout_line["line-join"]),"line-miter-limit":new We(hn.layout_line["line-miter-limit"]),"line-round-limit":new We(hn.layout_line["line-round-limit"]),"line-sort-key":new Gt(hn.layout_line["line-sort-key"])}),sJe=new jr({"line-opacity":new Gt(hn.paint_line["line-opacity"]),"line-color":new Gt(hn.paint_line["line-color"]),"line-translate":new We(hn.paint_line["line-translate"]),"line-translate-anchor":new We(hn.paint_line["line-translate-anchor"]),"line-width":new Gt(hn.paint_line["line-width"]),"line-gap-width":new Gt(hn.paint_line["line-gap-width"]),"line-offset":new Gt(hn.paint_line["line-offset"]),"line-blur":new Gt(hn.paint_line["line-blur"]),"line-dasharray":new qr(hn.paint_line["line-dasharray"]),"line-pattern":new or(hn.paint_line["line-pattern"]),"line-gradient":new $r(hn.paint_line["line-gradient"])}),WK={paint:sJe,layout:oJe},lJe=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(q,Y){return Y=new Sn(Math.floor(Y.zoom),{now:Y.now,fadeDuration:Y.fadeDuration,zoomHistory:Y.zoomHistory,transition:Y.transition}),y.prototype.possiblyEvaluate.call(this,q,Y)},m.prototype.evaluate=function(q,Y,j,$){return Y=x({},Y,{zoom:Math.floor(Y.zoom)}),y.prototype.evaluate.call(this,q,Y,j,$)},m}(Gt),XK=new lJe(WK.paint.properties["line-width"].specification);XK.useIntegerZoom=!0;var uJe=function(y){function m(L){y.call(this,L,WK),this.gradientVersion=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._handleSpecialPaintPropertyUpdate=function(q){if(q==="line-gradient"){var Y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=Y._styleExpression.expression instanceof Dl,this.gradientVersion=(this.gradientVersion+1)%v}},m.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},m.prototype.recalculate=function(q,Y){y.prototype.recalculate.call(this,q,Y),this.paint._values["line-floorwidth"]=XK.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,q)},m.prototype.createBucket=function(q){return new ah(q)},m.prototype.queryRadius=function(q){var Y=q,j=ZK(ih("line-width",this,Y),ih("line-gap-width",this,Y)),$=ih("line-offset",this,Y);return j/2+Math.abs($)+Ad(this.paint.get("line-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe){var Ue=Xp(q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ke.angle,Fe),ut=Fe/2*ZK(this.paint.get("line-width").evaluate(Y,j),this.paint.get("line-gap-width").evaluate(Y,j)),St=this.paint.get("line-offset").evaluate(Y,j);return St&&($=fJe($,St*Fe)),ml(Ue,$,ut)},m.prototype.isTileClipped=function(){return!0},m}(yn);function ZK(y,m){return m>0?m+2*y:y}function fJe(y,m){for(var L=[],q=new u(0,0),Y=0;Y<y.length;Y++){for(var j=y[Y],$=[],pe=0;pe<j.length;pe++){var ke=j[pe-1],Fe=j[pe],Ue=j[pe+1],ut=pe===0?q:Fe.sub(ke)._unit()._perp(),St=pe===j.length-1?q:Ue.sub(Fe)._unit()._perp(),bt=ut._add(St)._unit(),Yt=bt.x*St.x+bt.y*St.y;bt._mult(1/Yt),$.push(bt._mult(m)._add(Fe))}L.push($)}return L}var cJe=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hJe=Bn([{name:"a_projected_pos",components:3,type:"Float32"}],4),PQt=Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),vJe=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),RQt=Bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),jK=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),dJe=Bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),DQt=Bn([{name:"triangle",components:3,type:"Uint16"}]),IQt=Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),FQt=Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qQt=Bn([{type:"Float32",name:"offsetX"}]),zQt=Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function pJe(y,m,L){var q=m.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?y=y.toLocaleUpperCase():q==="lowercase"&&(y=y.toLocaleLowerCase()),Po.applyArabicShaping&&(y=Po.applyArabicShaping(y)),y}function gJe(y,m,L){return y.sections.forEach(function(q){q.text=pJe(q.text,m,L)}),y}function yJe(y){var m={},L={},q=[],Y=0;function j(Ar){q.push(y[Ar]),Y++}function $(Ar,en,Nr){var Qr=L[Ar];return delete L[Ar],L[en]=Qr,q[Qr].geometry[0].pop(),q[Qr].geometry[0]=q[Qr].geometry[0].concat(Nr[0]),Qr}function pe(Ar,en,Nr){var Qr=m[en];return delete m[en],m[Ar]=Qr,q[Qr].geometry[0].shift(),q[Qr].geometry[0]=Nr[0].concat(q[Qr].geometry[0]),Qr}function ke(Ar,en,Nr){var Qr=Nr?en[0][en[0].length-1]:en[0][0];return Ar+":"+Qr.x+":"+Qr.y}for(var Fe=0;Fe<y.length;Fe++){var Ue=y[Fe],ut=Ue.geometry,St=Ue.text?Ue.text.toString():null;if(!St){j(Fe);continue}var bt=ke(St,ut),Yt=ke(St,ut,!0);if(bt in L&&Yt in m&&L[bt]!==m[Yt]){var cr=pe(bt,Yt,ut),Ir=$(bt,Yt,q[cr].geometry);delete m[bt],delete L[Yt],L[ke(St,q[Ir].geometry,!0)]=Ir,q[cr].geometry=null}else bt in L?$(bt,Yt,ut):Yt in m?pe(bt,Yt,ut):(j(Fe),m[bt]=Y-1,L[Yt]=Y-1)}return q.filter(function(Ar){return Ar.geometry})}var KT={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function mJe(y){for(var m="",L=0;L<y.length;L++){var q=y.charCodeAt(L+1)||null,Y=y.charCodeAt(L-1)||null,j=(!q||!Er(q)||KT[y[L+1]])&&(!Y||!Er(Y)||KT[y[L-1]]);j&&KT[y[L]]?m+=KT[y[L]]:m+=y[L]}return m}var Wf=24,xJe=function(y,m,L,q,Y){var j,$,pe=Y*8-q-1,ke=(1<<pe)-1,Fe=ke>>1,Ue=-7,ut=L?Y-1:0,St=L?-1:1,bt=y[m+ut];for(ut+=St,j=bt&(1<<-Ue)-1,bt>>=-Ue,Ue+=pe;Ue>0;j=j*256+y[m+ut],ut+=St,Ue-=8);for($=j&(1<<-Ue)-1,j>>=-Ue,Ue+=q;Ue>0;$=$*256+y[m+ut],ut+=St,Ue-=8);if(j===0)j=1-Fe;else{if(j===ke)return $?NaN:(bt?-1:1)*(1/0);$=$+Math.pow(2,q),j=j-Fe}return(bt?-1:1)*$*Math.pow(2,j-q)},_Je=function(y,m,L,q,Y,j){var $,pe,ke,Fe=j*8-Y-1,Ue=(1<<Fe)-1,ut=Ue>>1,St=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,bt=q?0:j-1,Yt=q?1:-1,cr=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(pe=isNaN(m)?1:0,$=Ue):($=Math.floor(Math.log(m)/Math.LN2),m*(ke=Math.pow(2,-$))<1&&($--,ke*=2),$+ut>=1?m+=St/ke:m+=St*Math.pow(2,1-ut),m*ke>=2&&($++,ke/=2),$+ut>=Ue?(pe=0,$=Ue):$+ut>=1?(pe=(m*ke-1)*Math.pow(2,Y),$=$+ut):(pe=m*Math.pow(2,ut-1)*Math.pow(2,Y),$=0));Y>=8;y[L+bt]=pe&255,bt+=Yt,pe/=256,Y-=8);for($=$<<Y|pe,Fe+=Y;Fe>0;y[L+bt]=$&255,bt+=Yt,$/=256,Fe-=8);y[L+bt-Yt]|=cr*128},ik={read:xJe,write:_Je},ak=Ys;function Ys(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}Ys.Varint=0,Ys.Fixed64=1,Ys.Bytes=2,Ys.Fixed32=5;var Y8=65536*65536,KK=1/Y8,bJe=12,JK=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Ys.prototype={destroy:function(){this.buf=null},readFields:function(y,m,L){for(L=L||this.length;this.pos<L;){var q=this.readVarint(),Y=q>>3,j=this.pos;this.type=q&7,y(Y,m,this),this.pos===j&&this.skip(q)}return m},readMessage:function(y,m){return this.readFields(y,m,this.readVarint()+this.pos)},readFixed32:function(){var y=ok(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=$K(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=ok(this.buf,this.pos)+ok(this.buf,this.pos+4)*Y8;return this.pos+=8,y},readSFixed64:function(){var y=ok(this.buf,this.pos)+$K(this.buf,this.pos+4)*Y8;return this.pos+=8,y},readFloat:function(){var y=ik.read(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=ik.read(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var m=this.buf,L,q;return q=m[this.pos++],L=q&127,q<128||(q=m[this.pos++],L|=(q&127)<<7,q<128)||(q=m[this.pos++],L|=(q&127)<<14,q<128)||(q=m[this.pos++],L|=(q&127)<<21,q<128)?L:(q=m[this.pos],L|=(q&15)<<28,wJe(L,y,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2===1?(y+1)/-2:y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var y=this.readVarint()+this.pos,m=this.pos;return this.pos=y,y-m>=bJe&&JK?qJe(this.buf,m,y):FJe(this.buf,m,y)},readBytes:function(){var y=this.readVarint()+this.pos,m=this.buf.subarray(this.pos,y);return this.pos=y,m},readPackedVarint:function(y,m){if(this.type!==Ys.Bytes)return y.push(this.readVarint(m));var L=Sg(this);for(y=y||[];this.pos<L;)y.push(this.readVarint(m));return y},readPackedSVarint:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSVarint());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==Ys.Bytes)return y.push(this.readBoolean());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFloat());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==Ys.Bytes)return y.push(this.readDouble());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed32());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed32());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed64());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed64());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed64());return y},skip:function(y){var m=y&7;if(m===Ys.Varint)for(;this.buf[this.pos++]>127;);else if(m===Ys.Bytes)this.pos=this.readVarint()+this.pos;else if(m===Ys.Fixed32)this.pos+=4;else if(m===Ys.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+m)},writeTag:function(y,m){this.writeVarint(y<<3|m)},realloc:function(y){for(var m=this.length||16;m<this.pos+y;)m*=2;if(m!==this.length){var L=new Uint8Array(m);L.set(this.buf),this.buf=L,this.length=m}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),Db(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),Db(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),Db(this.buf,y&-1,this.pos),Db(this.buf,Math.floor(y*KK),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),Db(this.buf,y&-1,this.pos),Db(this.buf,Math.floor(y*KK),this.pos+4),this.pos+=8},writeVarint:function(y){if(y=+y||0,y>268435455||y<0){TJe(y,this);return}this.realloc(4),this.buf[this.pos++]=y&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=y>>>7&127)))},writeSVarint:function(y){this.writeVarint(y<0?-y*2-1:y*2)},writeBoolean:function(y){this.writeVarint(!!y)},writeString:function(y){y=String(y),this.realloc(y.length*4),this.pos++;var m=this.pos;this.pos=zJe(this.buf,y,this.pos);var L=this.pos-m;L>=128&&QK(m,L,this),this.pos=m-1,this.writeVarint(L),this.pos+=L},writeFloat:function(y){this.realloc(4),ik.write(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),ik.write(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var m=y.length;this.writeVarint(m),this.realloc(m);for(var L=0;L<m;L++)this.buf[this.pos++]=y[L]},writeRawMessage:function(y,m){this.pos++;var L=this.pos;y(m,this);var q=this.pos-L;q>=128&&QK(L,q,this),this.pos=L-1,this.writeVarint(q),this.pos+=q},writeMessage:function(y,m,L){this.writeTag(y,Ys.Bytes),this.writeRawMessage(m,L)},writePackedVarint:function(y,m){m.length&&this.writeMessage(y,SJe,m)},writePackedSVarint:function(y,m){m.length&&this.writeMessage(y,EJe,m)},writePackedBoolean:function(y,m){m.length&&this.writeMessage(y,LJe,m)},writePackedFloat:function(y,m){m.length&&this.writeMessage(y,kJe,m)},writePackedDouble:function(y,m){m.length&&this.writeMessage(y,CJe,m)},writePackedFixed32:function(y,m){m.length&&this.writeMessage(y,PJe,m)},writePackedSFixed32:function(y,m){m.length&&this.writeMessage(y,RJe,m)},writePackedFixed64:function(y,m){m.length&&this.writeMessage(y,DJe,m)},writePackedSFixed64:function(y,m){m.length&&this.writeMessage(y,IJe,m)},writeBytesField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeBytes(m)},writeFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFixed32(m)},writeSFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeSFixed32(m)},writeFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeFixed64(m)},writeSFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeSFixed64(m)},writeVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeVarint(m)},writeSVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeSVarint(m)},writeStringField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeString(m)},writeFloatField:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFloat(m)},writeDoubleField:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeDouble(m)},writeBooleanField:function(y,m){this.writeVarintField(y,!!m)}};function wJe(y,m,L){var q=L.buf,Y,j;if(j=q[L.pos++],Y=(j&112)>>4,j<128||(j=q[L.pos++],Y|=(j&127)<<3,j<128)||(j=q[L.pos++],Y|=(j&127)<<10,j<128)||(j=q[L.pos++],Y|=(j&127)<<17,j<128)||(j=q[L.pos++],Y|=(j&127)<<24,j<128)||(j=q[L.pos++],Y|=(j&1)<<31,j<128))return Rb(y,Y,m);throw new Error("Expected varint not more than 10 bytes")}function Sg(y){return y.type===Ys.Bytes?y.readVarint()+y.pos:y.pos+1}function Rb(y,m,L){return L?m*4294967296+(y>>>0):(m>>>0)*4294967296+(y>>>0)}function TJe(y,m){var L,q;if(y>=0?(L=y%4294967296|0,q=y/4294967296|0):(L=~(-y%4294967296),q=~(-y/4294967296),L^4294967295?L=L+1|0:(L=0,q=q+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),AJe(L,q,m),MJe(q,m)}function AJe(y,m,L){L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos]=y&127}function MJe(y,m){var L=(y&7)<<4;m.buf[m.pos++]|=L|((y>>>=3)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127)))))}function QK(y,m,L){var q=m<=16383?1:m<=2097151?2:m<=268435455?3:Math.floor(Math.log(m)/(Math.LN2*7));L.realloc(q);for(var Y=L.pos-1;Y>=y;Y--)L.buf[Y+q]=L.buf[Y]}function SJe(y,m){for(var L=0;L<y.length;L++)m.writeVarint(y[L])}function EJe(y,m){for(var L=0;L<y.length;L++)m.writeSVarint(y[L])}function kJe(y,m){for(var L=0;L<y.length;L++)m.writeFloat(y[L])}function CJe(y,m){for(var L=0;L<y.length;L++)m.writeDouble(y[L])}function LJe(y,m){for(var L=0;L<y.length;L++)m.writeBoolean(y[L])}function PJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed32(y[L])}function RJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed32(y[L])}function DJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed64(y[L])}function IJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed64(y[L])}function ok(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+y[m+3]*16777216}function Db(y,m,L){y[L]=m,y[L+1]=m>>>8,y[L+2]=m>>>16,y[L+3]=m>>>24}function $K(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+(y[m+3]<<24)}function FJe(y,m,L){for(var q="",Y=m;Y<L;){var j=y[Y],$=null,pe=j>239?4:j>223?3:j>191?2:1;if(Y+pe>L)break;var ke,Fe,Ue;pe===1?j<128&&($=j):pe===2?(ke=y[Y+1],(ke&192)===128&&($=(j&31)<<6|ke&63,$<=127&&($=null))):pe===3?(ke=y[Y+1],Fe=y[Y+2],(ke&192)===128&&(Fe&192)===128&&($=(j&15)<<12|(ke&63)<<6|Fe&63,($<=2047||$>=55296&&$<=57343)&&($=null))):pe===4&&(ke=y[Y+1],Fe=y[Y+2],Ue=y[Y+3],(ke&192)===128&&(Fe&192)===128&&(Ue&192)===128&&($=(j&15)<<18|(ke&63)<<12|(Fe&63)<<6|Ue&63,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,pe=1):$>65535&&($-=65536,q+=String.fromCharCode($>>>10&1023|55296),$=56320|$&1023),q+=String.fromCharCode($),Y+=pe}return q}function qJe(y,m,L){return JK.decode(y.subarray(m,L))}function zJe(y,m,L){for(var q=0,Y,j;q<m.length;q++){if(Y=m.charCodeAt(q),Y>55295&&Y<57344)if(j)if(Y<56320){y[L++]=239,y[L++]=191,y[L++]=189,j=Y;continue}else Y=j-55296<<10|Y-56320|65536,j=null;else{Y>56319||q+1===m.length?(y[L++]=239,y[L++]=191,y[L++]=189):j=Y;continue}else j&&(y[L++]=239,y[L++]=191,y[L++]=189,j=null);Y<128?y[L++]=Y:(Y<2048?y[L++]=Y>>6|192:(Y<65536?y[L++]=Y>>12|224:(y[L++]=Y>>18|240,y[L++]=Y>>12&63|128),y[L++]=Y>>6&63|128),y[L++]=Y&63|128)}return L}var W8=3;function OJe(y,m,L){y===1&&L.readMessage(BJe,m)}function BJe(y,m,L){if(y===3){var q=L.readMessage(NJe,{}),Y=q.id,j=q.bitmap,$=q.width,pe=q.height,ke=q.left,Fe=q.top,Ue=q.advance;m.push({id:Y,bitmap:new W1({width:$+2*W8,height:pe+2*W8},j),metrics:{width:$,height:pe,left:ke,top:Fe,advance:Ue}})}}function NJe(y,m,L){y===1?m.id=L.readVarint():y===2?m.bitmap=L.readBytes():y===3?m.width=L.readVarint():y===4?m.height=L.readVarint():y===5?m.left=L.readSVarint():y===6?m.top=L.readSVarint():y===7&&(m.advance=L.readVarint())}function UJe(y){return new ak(y).readFields(OJe,[])}var eJ=W8;function tJ(y){for(var m=0,L=0,q=0,Y=y;q<Y.length;q+=1){var j=Y[q];m+=j.w*j.h,L=Math.max(L,j.w)}y.sort(function(Ir,Ar){return Ar.h-Ir.h});for(var $=Math.max(Math.ceil(Math.sqrt(m/.95)),L),pe=[{x:0,y:0,w:$,h:1/0}],ke=0,Fe=0,Ue=0,ut=y;Ue<ut.length;Ue+=1)for(var St=ut[Ue],bt=pe.length-1;bt>=0;bt--){var Yt=pe[bt];if(!(St.w>Yt.w||St.h>Yt.h)){if(St.x=Yt.x,St.y=Yt.y,Fe=Math.max(Fe,St.y+St.h),ke=Math.max(ke,St.x+St.w),St.w===Yt.w&&St.h===Yt.h){var cr=pe.pop();bt<pe.length&&(pe[bt]=cr)}else St.h===Yt.h?(Yt.x+=St.w,Yt.w-=St.w):St.w===Yt.w?(Yt.y+=St.h,Yt.h-=St.h):(pe.push({x:Yt.x+St.w,y:Yt.y,w:Yt.w-St.w,h:St.h}),Yt.y+=St.h,Yt.h-=St.h);break}}return{w:ke,h:Fe,fill:m/(ke*Fe)||0}}var dv=1,sk=function(m,L){var q=L.pixelRatio,Y=L.version,j=L.stretchX,$=L.stretchY,pe=L.content;this.paddedRect=m,this.pixelRatio=q,this.stretchX=j,this.stretchY=$,this.content=pe,this.version=Y},JT={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};JT.tl.get=function(){return[this.paddedRect.x+dv,this.paddedRect.y+dv]},JT.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-dv,this.paddedRect.y+this.paddedRect.h-dv]},JT.tlbr.get=function(){return this.tl.concat(this.br)},JT.displaySize.get=function(){return[(this.paddedRect.w-dv*2)/this.pixelRatio,(this.paddedRect.h-dv*2)/this.pixelRatio]},Object.defineProperties(sk.prototype,JT);var QT=function(m,L){var q={},Y={};this.haveRenderCallbacks=[];var j=[];this.addImages(m,q,j),this.addImages(L,Y,j);var $=tJ(j),pe=$.w,ke=$.h,Fe=new Nh({width:pe||1,height:ke||1});for(var Ue in m){var ut=m[Ue],St=q[Ue].paddedRect;Nh.copy(ut.data,Fe,{x:0,y:0},{x:St.x+dv,y:St.y+dv},ut.data)}for(var bt in L){var Yt=L[bt],cr=Y[bt].paddedRect,Ir=cr.x+dv,Ar=cr.y+dv,en=Yt.data.width,Nr=Yt.data.height;Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir,y:Ar},Yt.data),Nh.copy(Yt.data,Fe,{x:0,y:Nr-1},{x:Ir,y:Ar-1},{width:en,height:1}),Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir,y:Ar+Nr},{width:en,height:1}),Nh.copy(Yt.data,Fe,{x:en-1,y:0},{x:Ir-1,y:Ar},{width:1,height:Nr}),Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir+en,y:Ar},{width:1,height:Nr})}this.image=Fe,this.iconPositions=q,this.patternPositions=Y};QT.prototype.addImages=function(m,L,q){for(var Y in m){var j=m[Y],$={x:0,y:0,w:j.data.width+2*dv,h:j.data.height+2*dv};q.push($),L[Y]=new sk($,j),j.hasRenderCallback&&this.haveRenderCallbacks.push(Y)}},QT.prototype.patchUpdatedImages=function(m,L){m.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var q in m.updatedImages)this.patchUpdatedImage(this.iconPositions[q],m.getImage(q),L),this.patchUpdatedImage(this.patternPositions[q],m.getImage(q),L)},QT.prototype.patchUpdatedImage=function(m,L,q){if(!(!m||!L)&&m.version!==L.version){m.version=L.version;var Y=m.tl,j=Y[0],$=Y[1];q.update(L.data,void 0,{x:j,y:$})}},U("ImagePosition",sk),U("ImageAtlas",QT);var Zv={horizontal:1,vertical:2,horizontalOnly:3},$T=-17;function VJe(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(q.positionedGlyphs.length!==0)return!1}return!0}var rJ=57344,nJ=63743,Ib=function(){this.scale=1,this.fontStack="",this.imageName=null};Ib.forText=function(m,L){var q=new Ib;return q.scale=m||1,q.fontStack=L,q},Ib.forImage=function(m){var L=new Ib;return L.imageName=m,L};var Ic=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Ic.fromFeature=function(m,L){for(var q=new Ic,Y=0;Y<m.sections.length;Y++){var j=m.sections[Y];j.image?q.addImageSection(j):q.addTextSection(j,L)}return q},Ic.prototype.length=function(){return this.text.length},Ic.prototype.getSection=function(m){return this.sections[this.sectionIndex[m]]},Ic.prototype.getSectionIndex=function(m){return this.sectionIndex[m]},Ic.prototype.getCharCode=function(m){return this.text.charCodeAt(m)},Ic.prototype.verticalizePunctuation=function(){this.text=mJe(this.text)},Ic.prototype.trim=function(){for(var m=0,L=0;L<this.text.length&&R0[this.text.charCodeAt(L)];L++)m++;for(var q=this.text.length,Y=this.text.length-1;Y>=0&&Y>=m&&R0[this.text.charCodeAt(Y)];Y--)q--;this.text=this.text.substring(m,q),this.sectionIndex=this.sectionIndex.slice(m,q)},Ic.prototype.substring=function(m,L){var q=new Ic;return q.text=this.text.substring(m,L),q.sectionIndex=this.sectionIndex.slice(m,L),q.sections=this.sections,q},Ic.prototype.toString=function(){return this.text},Ic.prototype.getMaxScale=function(){var m=this;return this.sectionIndex.reduce(function(L,q){return Math.max(L,m.sections[q].scale)},0)},Ic.prototype.addTextSection=function(m,L){this.text+=m.text,this.sections.push(Ib.forText(m.scale,m.fontStack||L));for(var q=this.sections.length-1,Y=0;Y<m.text.length;++Y)this.sectionIndex.push(q)},Ic.prototype.addImageSection=function(m){var L=m.image?m.image.name:"";if(L.length===0){Z("Can't add FormattedSection with an empty image.");return}var q=this.getNextImageSectionCharCode();if(!q){Z("Reached maximum number of images "+(nJ-rJ+2));return}this.text+=String.fromCharCode(q),this.sections.push(Ib.forImage(L)),this.sectionIndex.push(this.sections.length-1)},Ic.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=nJ?null:++this.imageSectionID:(this.imageSectionID=rJ,this.imageSectionID)};function HJe(y,m){for(var L=[],q=y.text,Y=0,j=0,$=m;j<$.length;j+=1){var pe=$[j];L.push(y.substring(Y,pe)),Y=pe}return Y<q.length&&L.push(y.substring(Y,q.length)),L}function lk(y,m,L,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr){var Ir=Ic.fromFeature(y,Y);ut===Zv.vertical&&Ir.verticalizePunctuation();var Ar,en=Po.processBidirectionalText,Nr=Po.processStyledBidirectionalText;if(en&&Ir.sections.length===1){Ar=[];for(var Qr=en(Ir.toString(),X8(Ir,Fe,j,m,q,bt,Yt)),an=0,Pn=Qr;an<Pn.length;an+=1){var ai=Pn[an],ti=new Ic;ti.text=ai,ti.sections=Ir.sections;for(var Bi=0;Bi<ai.length;Bi++)ti.sectionIndex.push(0);Ar.push(ti)}}else if(Nr){Ar=[];for(var Ti=Nr(Ir.text,Ir.sectionIndex,X8(Ir,Fe,j,m,q,bt,Yt)),Ri=0,wa=Ti;Ri<wa.length;Ri+=1){var Ni=wa[Ri],Yi=new Ic;Yi.text=Ni[0],Yi.sectionIndex=Ni[1],Yi.sections=Ir.sections,Ar.push(Yi)}}else Ar=HJe(Ir,X8(Ir,Fe,j,m,q,bt,Yt));var Xa=[],ga={positionedLines:Xa,text:Ir.toString(),top:Ue[1],bottom:Ue[1],left:Ue[0],right:Ue[0],writingMode:ut,iconsInText:!1,verticalizable:!1};return WJe(ga,m,L,q,Ar,$,pe,ke,ut,Fe,St,cr),VJe(Xa)?!1:ga}var R0={};R0[9]=!0,R0[10]=!0,R0[11]=!0,R0[12]=!0,R0[13]=!0,R0[32]=!0;var pv={};pv[10]=!0,pv[32]=!0,pv[38]=!0,pv[40]=!0,pv[41]=!0,pv[43]=!0,pv[45]=!0,pv[47]=!0,pv[173]=!0,pv[183]=!0,pv[8203]=!0,pv[8208]=!0,pv[8211]=!0,pv[8231]=!0;function iJ(y,m,L,q,Y,j){if(m.imageName){var ke=q[m.imageName];return ke?ke.displaySize[0]*m.scale*Wf/j+Y:0}else{var $=L[m.fontStack],pe=$&&$[y];return pe?pe.metrics.advance*m.scale+Y:0}}function GJe(y,m,L,q,Y,j){for(var $=0,pe=0;pe<y.length();pe++){var ke=y.getSection(pe);$+=iJ(y.getCharCode(pe),ke,q,Y,m,j)}var Fe=Math.max(1,Math.ceil($/L));return $/Fe}function aJ(y,m,L,q){var Y=Math.pow(y-m,2);return q?y<m?Y/2:Y*2:Y+Math.abs(L)*L}function YJe(y,m,L){var q=0;return y===10&&(q-=1e4),L&&(q+=150),(y===40||y===65288)&&(q+=50),(m===41||m===65289)&&(q+=50),q}function oJ(y,m,L,q,Y,j){for(var $=null,pe=aJ(m,L,Y,j),ke=0,Fe=q;ke<Fe.length;ke+=1){var Ue=Fe[ke],ut=m-Ue.x,St=aJ(ut,L,Y,j)+Ue.badness;St<=pe&&($=Ue,pe=St)}return{index:y,x:m,priorBreak:$,badness:pe}}function sJ(y){return y?sJ(y.priorBreak).concat(y.index):[]}function X8(y,m,L,q,Y,j,$){if(j!=="point")return[];if(!y)return[];for(var pe=[],ke=GJe(y,m,L,q,Y,$),Fe=y.text.indexOf("\u200B")>=0,Ue=0,ut=0;ut<y.length();ut++){var St=y.getSection(ut),bt=y.getCharCode(ut);if(R0[bt]||(Ue+=iJ(bt,St,q,Y,m,$)),ut<y.length()-1){var Yt=er(bt);(pv[bt]||Yt||St.imageName)&&pe.push(oJ(ut+1,Ue,ke,pe,YJe(bt,y.getCharCode(ut+1),Yt&&Fe),!1))}}return sJ(oJ(y.length(),Ue,ke,pe,0,!0))}function Z8(y){var m=.5,L=.5;switch(y){case"right":case"top-right":case"bottom-right":m=1;break;case"left":case"top-left":case"bottom-left":m=0;break}switch(y){case"bottom":case"bottom-right":case"bottom-left":L=1;break;case"top":case"top-right":case"top-left":L=0;break}return{horizontalAlign:m,verticalAlign:L}}function WJe(y,m,L,q,Y,j,$,pe,ke,Fe,Ue,ut){for(var St=0,bt=$T,Yt=0,cr=0,Ir=pe==="right"?1:pe==="left"?0:.5,Ar=0,en=0,Nr=Y;en<Nr.length;en+=1){var Qr=Nr[en];Qr.trim();var an=Qr.getMaxScale(),Pn=(an-1)*Wf,ai={positionedGlyphs:[],lineOffset:0};y.positionedLines[Ar]=ai;var ti=ai.positionedGlyphs,Bi=0;if(!Qr.length()){bt+=j,++Ar;continue}for(var Ti=0;Ti<Qr.length();Ti++){var Ri=Qr.getSection(Ti),wa=Qr.getSectionIndex(Ti),Ni=Qr.getCharCode(Ti),Yi=0,Xa=null,ga=null,Ro=null,Ss=Wf,Do=!(ke===Zv.horizontal||!Ue&&!$t(Ni)||Ue&&(R0[Ni]||rr(Ni)));if(Ri.imageName){var ql=q[Ri.imageName];if(!ql)continue;Ro=Ri.imageName,y.iconsInText=y.iconsInText||!0,ga=ql.paddedRect;var Kl=ql.displaySize;Ri.scale=Ri.scale*Wf/ut,Xa={width:Kl[0],height:Kl[1],left:dv,top:-eJ,advance:Do?Kl[1]:Kl[0]};var _f=Wf-Kl[1]*Ri.scale;Yi=Pn+_f,Ss=Xa.advance;var Pu=Do?Kl[0]*Ri.scale-Wf*an:Kl[1]*Ri.scale-Wf*an;Pu>0&&Pu>Bi&&(Bi=Pu)}else{var Io=L[Ri.fontStack],Mo=Io&&Io[Ni];if(Mo&&Mo.rect)ga=Mo.rect,Xa=Mo.metrics;else{var Os=m[Ri.fontStack],Ws=Os&&Os[Ni];if(!Ws)continue;Xa=Ws.metrics}Yi=(an-Ri.scale)*Wf}Do?(y.verticalizable=!0,ti.push({glyph:Ni,imageName:Ro,x:St,y:bt+Yi,vertical:Do,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:wa,metrics:Xa,rect:ga}),St+=Ss*Ri.scale+Fe):(ti.push({glyph:Ni,imageName:Ro,x:St,y:bt+Yi,vertical:Do,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:wa,metrics:Xa,rect:ga}),St+=Xa.advance*Ri.scale+Fe)}if(ti.length!==0){var Fc=St-Fe;Yt=Math.max(Fc,Yt),XJe(ti,0,ti.length-1,Ir,Bi)}St=0;var qc=j*an+Bi;ai.lineOffset=Math.max(Bi,Pn),bt+=qc,cr=Math.max(qc,cr),++Ar}var bf=bt-$T,oh=Z8($),sh=oh.horizontalAlign,ju=oh.verticalAlign;ZJe(y.positionedLines,Ir,sh,ju,Yt,cr,j,bf,Y.length),y.top+=-ju*bf,y.bottom=y.top+bf,y.left+=-sh*Yt,y.right=y.left+Yt}function XJe(y,m,L,q,Y){if(!(!q&&!Y))for(var j=y[L],$=j.metrics.advance*j.scale,pe=(y[L].x+$)*q,ke=m;ke<=L;ke++)y[ke].x-=pe,y[ke].y+=Y}function ZJe(y,m,L,q,Y,j,$,pe,ke){var Fe=(m-L)*Y,Ue=0;j!==$?Ue=-pe*q-$T:Ue=(-q*ke+.5)*$;for(var ut=0,St=y;ut<St.length;ut+=1)for(var bt=St[ut],Yt=0,cr=bt.positionedGlyphs;Yt<cr.length;Yt+=1){var Ir=cr[Yt];Ir.x+=Fe,Ir.y+=Ue}}function jJe(y,m,L){var q=Z8(L),Y=q.horizontalAlign,j=q.verticalAlign,$=m[0],pe=m[1],ke=$-y.displaySize[0]*Y,Fe=ke+y.displaySize[0],Ue=pe-y.displaySize[1]*j,ut=Ue+y.displaySize[1];return{image:y,top:Ue,bottom:ut,left:ke,right:Fe}}function lJ(y,m,L,q,Y,j){var $=y.image,pe;if($.content){var ke=$.content,Fe=$.pixelRatio||1;pe=[ke[0]/Fe,ke[1]/Fe,$.displaySize[0]-ke[2]/Fe,$.displaySize[1]-ke[3]/Fe]}var Ue=m.left*j,ut=m.right*j,St,bt,Yt,cr;L==="width"||L==="both"?(cr=Y[0]+Ue-q[3],bt=Y[0]+ut+q[1]):(cr=Y[0]+(Ue+ut-$.displaySize[0])/2,bt=cr+$.displaySize[0]);var Ir=m.top*j,Ar=m.bottom*j;return L==="height"||L==="both"?(St=Y[1]+Ir-q[0],Yt=Y[1]+Ar+q[2]):(St=Y[1]+(Ir+Ar-$.displaySize[1])/2,Yt=St+$.displaySize[1]),{image:$,top:St,right:bt,bottom:Yt,left:cr,collisionPadding:pe}}var Fb=function(y){function m(L,q,Y,j){y.call(this,L,q),this.angle=Y,j!==void 0&&(this.segment=j)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.clone=function(){return new m(this.x,this.y,this.angle,this.segment)},m}(u);U("Anchor",Fb);var Kp=128;function j8(y,m){var L=m.expression;if(L.kind==="constant"){var q=L.evaluate(new Sn(y+1));return{kind:"constant",layoutSize:q}}else{if(L.kind==="source")return{kind:"source"};for(var Y=L.zoomStops,j=L.interpolationType,$=0;$<Y.length&&Y[$]<=y;)$++;$=Math.max(0,$-1);for(var pe=$;pe<Y.length&&Y[pe]<y+1;)pe++;pe=Math.min(Y.length-1,pe);var ke=Y[$],Fe=Y[pe];if(L.kind==="composite")return{kind:"composite",minZoom:ke,maxZoom:Fe,interpolationType:j};var Ue=L.evaluate(new Sn(ke)),ut=L.evaluate(new Sn(Fe));return{kind:"camera",minZoom:ke,maxZoom:Fe,minSize:Ue,maxSize:ut,interpolationType:j}}}function uJ(y,m,L){var q=m.uSize,Y=m.uSizeT,j=L.lowerSize,$=L.upperSize;return y.kind==="source"?j/Kp:y.kind==="composite"?zs(j/Kp,$/Kp,Y):q}function fJ(y,m){var L=0,q=0;if(y.kind==="constant")q=y.layoutSize;else if(y.kind!=="source"){var Y=y.interpolationType,j=y.minZoom,$=y.maxZoom,pe=Y?g(Hs.interpolationFactor(Y,m,j,$),0,1):0;y.kind==="camera"?q=zs(y.minSize,y.maxSize,pe):L=pe}return{uSizeT:L,uSize:q}}var KJe=Object.freeze({__proto__:null,getSizeData:j8,evaluateSizeForFeature:uJ,evaluateSizeForZoom:fJ,SIZE_PACK_FACTOR:Kp});function cJ(y,m,L,q,Y){if(m.segment===void 0)return!0;for(var j=m,$=m.segment+1,pe=0;pe>-L/2;){if($--,$<0)return!1;pe-=y[$].dist(j),j=y[$]}pe+=y[$].dist(y[$+1]),$++;for(var ke=[],Fe=0;pe<L/2;){var Ue=y[$-1],ut=y[$],St=y[$+1];if(!St)return!1;var bt=Ue.angleTo(ut)-ut.angleTo(St);for(bt=Math.abs((bt+3*Math.PI)%(Math.PI*2)-Math.PI),ke.push({distance:pe,angleDelta:bt}),Fe+=bt;pe-ke[0].distance>q;)Fe-=ke.shift().angleDelta;if(Fe>Y)return!1;$++,pe+=ut.dist(St)}return!0}function hJ(y){for(var m=0,L=0;L<y.length-1;L++)m+=y[L].dist(y[L+1]);return m}function vJ(y,m,L){return y?3/5*m*L:0}function dJ(y,m){return Math.max(y?y.right-y.left:0,m?m.right-m.left:0)}function JJe(y,m,L,q,Y,j){for(var $=vJ(L,Y,j),pe=dJ(L,q)*j,ke=0,Fe=hJ(y)/2,Ue=0;Ue<y.length-1;Ue++){var ut=y[Ue],St=y[Ue+1],bt=ut.dist(St);if(ke+bt>Fe){var Yt=(Fe-ke)/bt,cr=zs(ut.x,St.x,Yt),Ir=zs(ut.y,St.y,Yt),Ar=new Fb(cr,Ir,St.angleTo(ut),Ue);return Ar._round(),!$||cJ(y,Ar,pe,$,m)?Ar:void 0}ke+=bt}}function QJe(y,m,L,q,Y,j,$,pe,ke){var Fe=vJ(q,j,$),Ue=dJ(q,Y),ut=Ue*$,St=y[0].x===0||y[0].x===ke||y[0].y===0||y[0].y===ke;m-ut<m/4&&(m=ut+m/4);var bt=j*2,Yt=St?m/2*pe%m:(Ue/2+bt)*$*pe%m;return pJ(y,Yt,m,Fe,L,ut,St,!1,ke)}function pJ(y,m,L,q,Y,j,$,pe,ke){for(var Fe=j/2,Ue=hJ(y),ut=0,St=m-L,bt=[],Yt=0;Yt<y.length-1;Yt++){for(var cr=y[Yt],Ir=y[Yt+1],Ar=cr.dist(Ir),en=Ir.angleTo(cr);St+L<ut+Ar;){St+=L;var Nr=(St-ut)/Ar,Qr=zs(cr.x,Ir.x,Nr),an=zs(cr.y,Ir.y,Nr);if(Qr>=0&&Qr<ke&&an>=0&&an<ke&&St-Fe>=0&&St+Fe<=Ue){var Pn=new Fb(Qr,an,en,Yt);Pn._round(),(!q||cJ(y,Pn,j,q,Y))&&bt.push(Pn)}}ut+=Ar}return!pe&&!bt.length&&!$&&(bt=pJ(y,ut/2,L,q,Y,j,$,!0,ke)),bt}function gJ(y,m,L,q,Y){for(var j=[],$=0;$<y.length;$++)for(var pe=y[$],ke=void 0,Fe=0;Fe<pe.length-1;Fe++){var Ue=pe[Fe],ut=pe[Fe+1];Ue.x<m&&ut.x<m||(Ue.x<m?Ue=new u(m,Ue.y+(ut.y-Ue.y)*((m-Ue.x)/(ut.x-Ue.x)))._round():ut.x<m&&(ut=new u(m,Ue.y+(ut.y-Ue.y)*((m-Ue.x)/(ut.x-Ue.x)))._round()),!(Ue.y<L&&ut.y<L)&&(Ue.y<L?Ue=new u(Ue.x+(ut.x-Ue.x)*((L-Ue.y)/(ut.y-Ue.y)),L)._round():ut.y<L&&(ut=new u(Ue.x+(ut.x-Ue.x)*((L-Ue.y)/(ut.y-Ue.y)),L)._round()),!(Ue.x>=q&&ut.x>=q)&&(Ue.x>=q?Ue=new u(q,Ue.y+(ut.y-Ue.y)*((q-Ue.x)/(ut.x-Ue.x)))._round():ut.x>=q&&(ut=new u(q,Ue.y+(ut.y-Ue.y)*((q-Ue.x)/(ut.x-Ue.x)))._round()),!(Ue.y>=Y&&ut.y>=Y)&&(Ue.y>=Y?Ue=new u(Ue.x+(ut.x-Ue.x)*((Y-Ue.y)/(ut.y-Ue.y)),Y)._round():ut.y>=Y&&(ut=new u(Ue.x+(ut.x-Ue.x)*((Y-Ue.y)/(ut.y-Ue.y)),Y)._round()),(!ke||!Ue.equals(ke[ke.length-1]))&&(ke=[Ue],j.push(ke)),ke.push(ut)))))}return j}var qb=dv;function yJ(y,m,L,q){var Y=[],j=y.image,$=j.pixelRatio,pe=j.paddedRect.w-2*qb,ke=j.paddedRect.h-2*qb,Fe=y.right-y.left,Ue=y.bottom-y.top,ut=j.stretchX||[[0,pe]],St=j.stretchY||[[0,ke]],bt=function(Io,Mo){return Io+Mo[1]-Mo[0]},Yt=ut.reduce(bt,0),cr=St.reduce(bt,0),Ir=pe-Yt,Ar=ke-cr,en=0,Nr=Yt,Qr=0,an=cr,Pn=0,ai=Ir,ti=0,Bi=Ar;if(j.content&&q){var Ti=j.content;en=uk(ut,0,Ti[0]),Qr=uk(St,0,Ti[1]),Nr=uk(ut,Ti[0],Ti[2]),an=uk(St,Ti[1],Ti[3]),Pn=Ti[0]-en,ti=Ti[1]-Qr,ai=Ti[2]-Ti[0]-Nr,Bi=Ti[3]-Ti[1]-an}var Ri=function(Io,Mo,Os,Ws){var ql=fk(Io.stretch-en,Nr,Fe,y.left),Kl=ck(Io.fixed-Pn,ai,Io.stretch,Yt),_f=fk(Mo.stretch-Qr,an,Ue,y.top),Pu=ck(Mo.fixed-ti,Bi,Mo.stretch,cr),Fc=fk(Os.stretch-en,Nr,Fe,y.left),qc=ck(Os.fixed-Pn,ai,Os.stretch,Yt),bf=fk(Ws.stretch-Qr,an,Ue,y.top),oh=ck(Ws.fixed-ti,Bi,Ws.stretch,cr),sh=new u(ql,_f),ju=new u(Fc,_f),lh=new u(Fc,bf),jv=new u(ql,bf),Cg=new u(Kl/$,Pu/$),Vy=new u(qc/$,oh/$),Hy=m*Math.PI/180;if(Hy){var Gy=Math.sin(Hy),Gb=Math.cos(Hy),Kd=[Gb,-Gy,Gy,Gb];sh._matMult(Kd),ju._matMult(Kd),jv._matMult(Kd),lh._matMult(Kd)}var yk=Io.stretch+Io.fixed,nq=Os.stretch+Os.fixed,mk=Mo.stretch+Mo.fixed,iq=Ws.stretch+Ws.fixed,Sd={x:j.paddedRect.x+qb+yk,y:j.paddedRect.y+qb+mk,w:nq-yk,h:iq-mk},Yb=ai/$/Fe,xk=Bi/$/Ue;return{tl:sh,tr:ju,bl:jv,br:lh,tex:Sd,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cg,pixelOffsetBR:Vy,minFontScaleX:Yb,minFontScaleY:xk,isSDF:L}};if(!q||!j.stretchX&&!j.stretchY)Y.push(Ri({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:pe+1},{fixed:0,stretch:ke+1}));else for(var wa=mJ(ut,Ir,Yt),Ni=mJ(St,Ar,cr),Yi=0;Yi<wa.length-1;Yi++)for(var Xa=wa[Yi],ga=wa[Yi+1],Ro=0;Ro<Ni.length-1;Ro++){var Ss=Ni[Ro],Do=Ni[Ro+1];Y.push(Ri(Xa,Ss,ga,Do))}return Y}function uk(y,m,L){for(var q=0,Y=0,j=y;Y<j.length;Y+=1){var $=j[Y];q+=Math.max(m,Math.min(L,$[1]))-Math.max(m,Math.min(L,$[0]))}return q}function mJ(y,m,L){for(var q=[{fixed:-qb,stretch:0}],Y=0,j=y;Y<j.length;Y+=1){var $=j[Y],pe=$[0],ke=$[1],Fe=q[q.length-1];q.push({fixed:pe-Fe.stretch,stretch:Fe.stretch}),q.push({fixed:pe-Fe.stretch,stretch:Fe.stretch+(ke-pe)})}return q.push({fixed:m+qb,stretch:L}),q}function fk(y,m,L,q){return y/m*L+q}function ck(y,m,L,q){return y-m*L/q}function $Je(y,m,L,q,Y,j,$,pe){for(var ke=q.layout.get("text-rotate").evaluate(j,{})*Math.PI/180,Fe=[],Ue=0,ut=m.positionedLines;Ue<ut.length;Ue+=1)for(var St=ut[Ue],bt=0,Yt=St.positionedGlyphs;bt<Yt.length;bt+=1){var cr=Yt[bt];if(cr.rect){var Ir=cr.rect||{},Ar=1,en=eJ+Ar,Nr=!0,Qr=1,an=0,Pn=(Y||pe)&&cr.vertical,ai=cr.metrics.advance*cr.scale/2;if(pe&&m.verticalizable){var ti=(cr.scale-1)*Wf,Bi=(Wf-cr.metrics.width*cr.scale)/2;an=St.lineOffset/2-(cr.imageName?-Bi:ti)}if(cr.imageName){var Ti=$[cr.imageName];Nr=Ti.sdf,Qr=Ti.pixelRatio,en=dv/Qr}var Ri=Y?[cr.x+ai,cr.y]:[0,0],wa=Y?[0,0]:[cr.x+ai+L[0],cr.y+L[1]-an],Ni=[0,0];Pn&&(Ni=wa,wa=[0,0]);var Yi=(cr.metrics.left-en)*cr.scale-ai+wa[0],Xa=(-cr.metrics.top-en)*cr.scale+wa[1],ga=Yi+Ir.w*cr.scale/Qr,Ro=Xa+Ir.h*cr.scale/Qr,Ss=new u(Yi,Xa),Do=new u(ga,Xa),Io=new u(Yi,Ro),Mo=new u(ga,Ro);if(Pn){var Os=new u(-ai,ai-$T),Ws=-Math.PI/2,ql=Wf/2-ai,Kl=cr.imageName?ql:0,_f=new u(5-$T-ql,-Kl),Pu=new(Function.prototype.bind.apply(u,[null].concat(Ni)));Ss._rotateAround(Ws,Os)._add(_f)._add(Pu),Do._rotateAround(Ws,Os)._add(_f)._add(Pu),Io._rotateAround(Ws,Os)._add(_f)._add(Pu),Mo._rotateAround(Ws,Os)._add(_f)._add(Pu)}if(ke){var Fc=Math.sin(ke),qc=Math.cos(ke),bf=[qc,-Fc,Fc,qc];Ss._matMult(bf),Do._matMult(bf),Io._matMult(bf),Mo._matMult(bf)}var oh=new u(0,0),sh=new u(0,0),ju=0,lh=0;Fe.push({tl:Ss,tr:Do,bl:Io,br:Mo,tex:Ir,writingMode:m.writingMode,glyphOffset:Ri,sectionIndex:cr.sectionIndex,isSDF:Nr,pixelOffsetTL:oh,pixelOffsetBR:sh,minFontScaleX:ju,minFontScaleY:lh})}}return Fe}var hk=function(m,L,q,Y,j,$,pe,ke,Fe,Ue){if(this.boxStartIndex=m.length,Fe){var ut=$.top,St=$.bottom,bt=$.collisionPadding;bt&&(ut-=bt[1],St+=bt[3]);var Yt=St-ut;Yt>0&&(Yt=Math.max(10,Yt),this.circleDiameter=Yt)}else{var cr=$.top*pe-ke,Ir=$.bottom*pe+ke,Ar=$.left*pe-ke,en=$.right*pe+ke,Nr=$.collisionPadding;if(Nr&&(Ar-=Nr[0]*pe,cr-=Nr[1]*pe,en+=Nr[2]*pe,Ir+=Nr[3]*pe),Ue){var Qr=new u(Ar,cr),an=new u(en,cr),Pn=new u(Ar,Ir),ai=new u(en,Ir),ti=Ue*Math.PI/180;Qr._rotate(ti),an._rotate(ti),Pn._rotate(ti),ai._rotate(ti),Ar=Math.min(Qr.x,an.x,Pn.x,ai.x),en=Math.max(Qr.x,an.x,Pn.x,ai.x),cr=Math.min(Qr.y,an.y,Pn.y,ai.y),Ir=Math.max(Qr.y,an.y,Pn.y,ai.y)}m.emplaceBack(L.x,L.y,Ar,cr,en,Ir,q,Y,j)}this.boxEndIndex=m.length},zb=function(m,L){if(m===void 0&&(m=[]),L===void 0&&(L=eQe),this.data=m,this.length=this.data.length,this.compare=L,this.length>0)for(var q=(this.length>>1)-1;q>=0;q--)this._down(q)};zb.prototype.push=function(m){this.data.push(m),this.length++,this._up(this.length-1)},zb.prototype.pop=function(){if(this.length!==0){var m=this.data[0],L=this.data.pop();return this.length--,this.length>0&&(this.data[0]=L,this._down(0)),m}},zb.prototype.peek=function(){return this.data[0]},zb.prototype._up=function(m){for(var L=this,q=L.data,Y=L.compare,j=q[m];m>0;){var $=m-1>>1,pe=q[$];if(Y(j,pe)>=0)break;q[m]=pe,m=$}q[m]=j},zb.prototype._down=function(m){for(var L=this,q=L.data,Y=L.compare,j=this.length>>1,$=q[m];m<j;){var pe=(m<<1)+1,ke=q[pe],Fe=pe+1;if(Fe<this.length&&Y(q[Fe],ke)<0&&(pe=Fe,ke=q[Fe]),Y(ke,$)>=0)break;q[m]=ke,m=pe}q[m]=$};function eQe(y,m){return y<m?-1:y>m?1:0}function tQe(y,m,L){m===void 0&&(m=1),L===void 0&&(L=!1);for(var q=1/0,Y=1/0,j=-1/0,$=-1/0,pe=y[0],ke=0;ke<pe.length;ke++){var Fe=pe[ke];(!ke||Fe.x<q)&&(q=Fe.x),(!ke||Fe.y<Y)&&(Y=Fe.y),(!ke||Fe.x>j)&&(j=Fe.x),(!ke||Fe.y>$)&&($=Fe.y)}var Ue=j-q,ut=$-Y,St=Math.min(Ue,ut),bt=St/2,Yt=new zb([],rQe);if(St===0)return new u(q,Y);for(var cr=q;cr<j;cr+=St)for(var Ir=Y;Ir<$;Ir+=St)Yt.push(new Ob(cr+bt,Ir+bt,bt,y));for(var Ar=iQe(y),en=Yt.length;Yt.length;){var Nr=Yt.pop();(Nr.d>Ar.d||!Ar.d)&&(Ar=Nr,L&&console.log("found best %d after %d probes",Math.round(1e4*Nr.d)/1e4,en)),!(Nr.max-Ar.d<=m)&&(bt=Nr.h/2,Yt.push(new Ob(Nr.p.x-bt,Nr.p.y-bt,bt,y)),Yt.push(new Ob(Nr.p.x+bt,Nr.p.y-bt,bt,y)),Yt.push(new Ob(Nr.p.x-bt,Nr.p.y+bt,bt,y)),Yt.push(new Ob(Nr.p.x+bt,Nr.p.y+bt,bt,y)),en+=4)}return L&&(console.log("num probes: "+en),console.log("best distance: "+Ar.d)),Ar.p}function rQe(y,m){return m.max-y.max}function Ob(y,m,L,q){this.p=new u(y,m),this.h=L,this.d=nQe(this.p,q),this.max=this.d+this.h*Math.SQRT2}function nQe(y,m){for(var L=!1,q=1/0,Y=0;Y<m.length;Y++)for(var j=m[Y],$=0,pe=j.length,ke=pe-1;$<pe;ke=$++){var Fe=j[$],Ue=j[ke];Fe.y>y.y!=Ue.y>y.y&&y.x<(Ue.x-Fe.x)*(y.y-Fe.y)/(Ue.y-Fe.y)+Fe.x&&(L=!L),q=Math.min(q,Mg(y,Fe,Ue))}return(L?1:-1)*Math.sqrt(q)}function iQe(y){for(var m=0,L=0,q=0,Y=y[0],j=0,$=Y.length,pe=$-1;j<$;pe=j++){var ke=Y[j],Fe=Y[pe],Ue=ke.x*Fe.y-Fe.x*ke.y;L+=(ke.x+Fe.x)*Ue,q+=(ke.y+Fe.y)*Ue,m+=Ue*3}return new Ob(L/m,q/m,0,y)}var Bb=7,K8=Number.POSITIVE_INFINITY;function xJ(y,m){function L(Y,j){var $=0,pe=0;j<0&&(j=0);var ke=j/Math.sqrt(2);switch(Y){case"top-right":case"top-left":pe=ke-Bb;break;case"bottom-right":case"bottom-left":pe=-ke+Bb;break;case"bottom":pe=-j+Bb;break;case"top":pe=j-Bb;break}switch(Y){case"top-right":case"bottom-right":$=-ke;break;case"top-left":case"bottom-left":$=ke;break;case"left":$=j;break;case"right":$=-j;break}return[$,pe]}function q(Y,j,$){var pe=0,ke=0;switch(j=Math.abs(j),$=Math.abs($),Y){case"top-right":case"top-left":case"top":ke=$-Bb;break;case"bottom-right":case"bottom-left":case"bottom":ke=-$+Bb;break}switch(Y){case"top-right":case"bottom-right":case"right":pe=-j;break;case"top-left":case"bottom-left":case"left":pe=j;break}return[pe,ke]}return m[1]!==K8?q(y,m[0],m[1]):L(y,m[0])}function aQe(y,m,L,q,Y,j,$){y.createArrays();var pe=512*y.overscaling;y.tilePixelRatio=un/pe,y.compareText={},y.iconsNeedLinear=!1;var ke=y.layers[0].layout,Fe=y.layers[0]._unevaluatedLayout._values,Ue={};if(y.textSizeData.kind==="composite"){var ut=y.textSizeData,St=ut.minZoom,bt=ut.maxZoom;Ue.compositeTextSizes=[Fe["text-size"].possiblyEvaluate(new Sn(St),$),Fe["text-size"].possiblyEvaluate(new Sn(bt),$)]}if(y.iconSizeData.kind==="composite"){var Yt=y.iconSizeData,cr=Yt.minZoom,Ir=Yt.maxZoom;Ue.compositeIconSizes=[Fe["icon-size"].possiblyEvaluate(new Sn(cr),$),Fe["icon-size"].possiblyEvaluate(new Sn(Ir),$)]}Ue.layoutTextSize=Fe["text-size"].possiblyEvaluate(new Sn(y.zoom+1),$),Ue.layoutIconSize=Fe["icon-size"].possiblyEvaluate(new Sn(y.zoom+1),$),Ue.textMaxSize=Fe["text-size"].possiblyEvaluate(new Sn(18));for(var Ar=ke.get("text-line-height")*Wf,en=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point",Nr=ke.get("text-keep-upright"),Qr=ke.get("text-size"),an=function(){var ti=ai[Pn],Bi=ke.get("text-font").evaluate(ti,{},$).join(","),Ti=Qr.evaluate(ti,{},$),Ri=Ue.layoutTextSize.evaluate(ti,{},$),wa=Ue.layoutIconSize.evaluate(ti,{},$),Ni={horizontal:{},vertical:void 0},Yi=ti.text,Xa=[0,0];if(Yi){var ga=Yi.toString(),Ro=ke.get("text-letter-spacing").evaluate(ti,{},$)*Wf,Ss=Mt(ga)?Ro:0,Do=ke.get("text-anchor").evaluate(ti,{},$),Io=ke.get("text-variable-anchor");if(!Io){var Mo=ke.get("text-radial-offset").evaluate(ti,{},$);Mo?Xa=xJ(Do,[Mo*Wf,K8]):Xa=ke.get("text-offset").evaluate(ti,{},$).map(function(Cg){return Cg*Wf})}var Os=en?"center":ke.get("text-justify").evaluate(ti,{},$),Ws=ke.get("symbol-placement"),ql=Ws==="point"?ke.get("text-max-width").evaluate(ti,{},$)*Wf:0,Kl=function(){y.allowVerticalPlacement&&tt(ga)&&(Ni.vertical=lk(Yi,m,L,Y,Bi,ql,Ar,Do,"left",Ss,Xa,Zv.vertical,!0,Ws,Ri,Ti))};if(!en&&Io){for(var _f=Os==="auto"?Io.map(function(Cg){return J8(Cg)}):[Os],Pu=!1,Fc=0;Fc<_f.length;Fc++){var qc=_f[Fc];if(!Ni.horizontal[qc])if(Pu)Ni.horizontal[qc]=Ni.horizontal[0];else{var bf=lk(Yi,m,L,Y,Bi,ql,Ar,"center",qc,Ss,Xa,Zv.horizontal,!1,Ws,Ri,Ti);bf&&(Ni.horizontal[qc]=bf,Pu=bf.positionedLines.length===1)}}Kl()}else{Os==="auto"&&(Os=J8(Do));var oh=lk(Yi,m,L,Y,Bi,ql,Ar,Do,Os,Ss,Xa,Zv.horizontal,!1,Ws,Ri,Ti);oh&&(Ni.horizontal[Os]=oh),Kl(),tt(ga)&&en&&Nr&&(Ni.vertical=lk(Yi,m,L,Y,Bi,ql,Ar,Do,Os,Ss,Xa,Zv.vertical,!1,Ws,Ri,Ti))}}var sh=void 0,ju=!1;if(ti.icon&&ti.icon.name){var lh=q[ti.icon.name];lh&&(sh=jJe(Y[ti.icon.name],ke.get("icon-offset").evaluate(ti,{},$),ke.get("icon-anchor").evaluate(ti,{},$)),ju=lh.sdf,y.sdfIcons===void 0?y.sdfIcons=lh.sdf:y.sdfIcons!==lh.sdf&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lh.pixelRatio!==y.pixelRatio||ke.get("icon-rotate").constantOr(1)!==0)&&(y.iconsNeedLinear=!0))}var jv=bJ(Ni.horizontal)||Ni.vertical;y.iconsInText=jv?jv.iconsInText:!1,(jv||sh)&&oQe(y,ti,Ni,sh,q,Ue,Ri,wa,Xa,ju,$)},Pn=0,ai=y.features;Pn<ai.length;Pn+=1)an();j&&y.generateCollisionDebugBuffers()}function J8(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oQe(y,m,L,q,Y,j,$,pe,ke,Fe,Ue){var ut=j.textMaxSize.evaluate(m,{});ut===void 0&&(ut=$);var St=y.layers[0].layout,bt=St.get("icon-offset").evaluate(m,{},Ue),Yt=bJ(L.horizontal),cr=24,Ir=$/cr,Ar=y.tilePixelRatio*Ir,en=y.tilePixelRatio*ut/cr,Nr=y.tilePixelRatio*pe,Qr=y.tilePixelRatio*St.get("symbol-spacing"),an=St.get("text-padding")*y.tilePixelRatio,Pn=St.get("icon-padding")*y.tilePixelRatio,ai=St.get("text-max-angle")/180*Math.PI,ti=St.get("text-rotation-alignment")==="map"&&St.get("symbol-placement")!=="point",Bi=St.get("icon-rotation-alignment")==="map"&&St.get("symbol-placement")!=="point",Ti=St.get("symbol-placement"),Ri=Qr/2,wa=St.get("icon-text-fit"),Ni;q&&wa!=="none"&&(y.allowVerticalPlacement&&L.vertical&&(Ni=lJ(q,L.vertical,wa,St.get("icon-text-fit-padding"),bt,Ir)),Yt&&(q=lJ(q,Yt,wa,St.get("icon-text-fit-padding"),bt,Ir)));var Yi=function(Gb,Kd){Kd.x<0||Kd.x>=un||Kd.y<0||Kd.y>=un||sQe(y,Kd,Gb,L,q,Y,Ni,y.layers[0],y.collisionBoxArray,m.index,m.sourceLayerIndex,y.index,Ar,an,ti,ke,Nr,Pn,Bi,bt,m,j,Fe,Ue,$)};if(Ti==="line")for(var Xa=0,ga=gJ(m.geometry,0,0,un,un);Xa<ga.length;Xa+=1)for(var Ro=ga[Xa],Ss=QJe(Ro,Qr,ai,L.vertical||Yt,q,cr,en,y.overscaling,un),Do=0,Io=Ss;Do<Io.length;Do+=1){var Mo=Io[Do],Os=Yt;(!Os||!lQe(y,Os.text,Ri,Mo))&&Yi(Ro,Mo)}else if(Ti==="line-center")for(var Ws=0,ql=m.geometry;Ws<ql.length;Ws+=1){var Kl=ql[Ws];if(Kl.length>1){var _f=JJe(Kl,ai,L.vertical||Yt,q,cr,en);_f&&Yi(Kl,_f)}}else if(m.type==="Polygon")for(var Pu=0,Fc=U8(m.geometry,0);Pu<Fc.length;Pu+=1){var qc=Fc[Pu],bf=tQe(qc,16);Yi(qc[0],new Fb(bf.x,bf.y,0))}else if(m.type==="LineString")for(var oh=0,sh=m.geometry;oh<sh.length;oh+=1){var ju=sh[oh];Yi(ju,new Fb(ju[0].x,ju[0].y,0))}else if(m.type==="Point")for(var lh=0,jv=m.geometry;lh<jv.length;lh+=1)for(var Cg=jv[lh],Vy=0,Hy=Cg;Vy<Hy.length;Vy+=1){var Gy=Hy[Vy];Yi([Gy],new Fb(Gy.x,Gy.y,0))}}var eA=255,Ny=eA*Kp;function _J(y,m,L,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt){var cr=$Je(m,L,pe,Y,j,$,q,y.allowVerticalPlacement),Ir=y.textSizeData,Ar=null;Ir.kind==="source"?(Ar=[Kp*Y.layout.get("text-size").evaluate($,{})],Ar[0]>Ny&&Z(y.layerIds[0]+': Value for "text-size" is >= '+eA+'. Reduce your "text-size".')):Ir.kind==="composite"&&(Ar=[Kp*bt.compositeTextSizes[0].evaluate($,{},Yt),Kp*bt.compositeTextSizes[1].evaluate($,{},Yt)],(Ar[0]>Ny||Ar[1]>Ny)&&Z(y.layerIds[0]+': Value for "text-size" is >= '+eA+'. Reduce your "text-size".')),y.addSymbols(y.text,cr,Ar,pe,j,$,Fe,m,ke.lineStartIndex,ke.lineLength,St,Yt);for(var en=0,Nr=Ue;en<Nr.length;en+=1){var Qr=Nr[en];ut[Qr]=y.text.placedSymbolArray.length-1}return cr.length*4}function bJ(y){for(var m in y)return y[m];return null}function sQe(y,m,L,q,Y,j,$,pe,ke,Fe,Ue,ut,St,bt,Yt,cr,Ir,Ar,en,Nr,Qr,an,Pn,ai,ti){var Bi,Ti=y.addToLineVertexArray(m,L),Ri,wa,Ni,Yi,Xa=0,ga=0,Ro=0,Ss=0,Do=-1,Io=-1,Mo={},Os=W(""),Ws=0,ql=0;if(pe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Bi=pe.layout.get("text-offset").evaluate(Qr,{},ai).map(function(nA){return nA*Wf}),Ws=Bi[0],ql=Bi[1]):(Ws=pe.layout.get("text-radial-offset").evaluate(Qr,{},ai)*Wf,ql=K8),y.allowVerticalPlacement&&q.vertical){var Kl=pe.layout.get("text-rotate").evaluate(Qr,{},ai),_f=Kl+90,Pu=q.vertical;Ni=new hk(ke,m,Fe,Ue,ut,Pu,St,bt,Yt,_f),$&&(Yi=new hk(ke,m,Fe,Ue,ut,$,Ir,Ar,Yt,_f))}if(Y){var Fc=pe.layout.get("icon-rotate").evaluate(Qr,{}),qc=pe.layout.get("icon-text-fit")!=="none",bf=yJ(Y,Fc,Pn,qc),oh=$?yJ($,Fc,Pn,qc):void 0;wa=new hk(ke,m,Fe,Ue,ut,Y,Ir,Ar,!1,Fc),Xa=bf.length*4;var sh=y.iconSizeData,ju=null;sh.kind==="source"?(ju=[Kp*pe.layout.get("icon-size").evaluate(Qr,{})],ju[0]>Ny&&Z(y.layerIds[0]+': Value for "icon-size" is >= '+eA+'. Reduce your "icon-size".')):sh.kind==="composite"&&(ju=[Kp*an.compositeIconSizes[0].evaluate(Qr,{},ai),Kp*an.compositeIconSizes[1].evaluate(Qr,{},ai)],(ju[0]>Ny||ju[1]>Ny)&&Z(y.layerIds[0]+': Value for "icon-size" is >= '+eA+'. Reduce your "icon-size".')),y.addSymbols(y.icon,bf,ju,Nr,en,Qr,!1,m,Ti.lineStartIndex,Ti.lineLength,-1,ai),Do=y.icon.placedSymbolArray.length-1,oh&&(ga=oh.length*4,y.addSymbols(y.icon,oh,ju,Nr,en,Qr,Zv.vertical,m,Ti.lineStartIndex,Ti.lineLength,-1,ai),Io=y.icon.placedSymbolArray.length-1)}for(var lh in q.horizontal){var jv=q.horizontal[lh];if(!Ri){Os=W(jv.text);var Cg=pe.layout.get("text-rotate").evaluate(Qr,{},ai);Ri=new hk(ke,m,Fe,Ue,ut,jv,St,bt,Yt,Cg)}var Vy=jv.positionedLines.length===1;if(Ro+=_J(y,m,jv,j,pe,Yt,Qr,cr,Ti,q.vertical?Zv.horizontal:Zv.horizontalOnly,Vy?Object.keys(q.horizontal):[lh],Mo,Do,an,ai),Vy)break}q.vertical&&(Ss+=_J(y,m,q.vertical,j,pe,Yt,Qr,cr,Ti,Zv.vertical,["vertical"],Mo,Io,an,ai));var Hy=Ri?Ri.boxStartIndex:y.collisionBoxArray.length,Gy=Ri?Ri.boxEndIndex:y.collisionBoxArray.length,Gb=Ni?Ni.boxStartIndex:y.collisionBoxArray.length,Kd=Ni?Ni.boxEndIndex:y.collisionBoxArray.length,yk=wa?wa.boxStartIndex:y.collisionBoxArray.length,nq=wa?wa.boxEndIndex:y.collisionBoxArray.length,mk=Yi?Yi.boxStartIndex:y.collisionBoxArray.length,iq=Yi?Yi.boxEndIndex:y.collisionBoxArray.length,Sd=-1,Yb=function(nA,zJ){return nA&&nA.circleDiameter?Math.max(nA.circleDiameter,zJ):zJ};Sd=Yb(Ri,Sd),Sd=Yb(Ni,Sd),Sd=Yb(wa,Sd),Sd=Yb(Yi,Sd);var xk=Sd>-1?1:0;xk&&(Sd*=ti/Wf),y.glyphOffsetArray.length>=Ms.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qr.sortKey!==void 0&&y.addToSortKeyRanges(y.symbolInstances.length,Qr.sortKey),y.symbolInstances.emplaceBack(m.x,m.y,Mo.right>=0?Mo.right:-1,Mo.center>=0?Mo.center:-1,Mo.left>=0?Mo.left:-1,Mo.vertical||-1,Do,Io,Os,Hy,Gy,Gb,Kd,yk,nq,mk,iq,Fe,Ro,Ss,Xa,ga,xk,0,St,Ws,ql,Sd)}function lQe(y,m,L,q){var Y=y.compareText;if(!(m in Y))Y[m]=[];else for(var j=Y[m],$=j.length-1;$>=0;$--)if(q.dist(j[$])<L)return!0;return Y[m].push(q),!1}var uQe=Pb.VectorTileFeature.types,fQe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vk(y,m,L,q,Y,j,$,pe,ke,Fe,Ue,ut,St){var bt=pe?Math.min(Ny,Math.round(pe[0])):0,Yt=pe?Math.min(Ny,Math.round(pe[1])):0;y.emplaceBack(m,L,Math.round(q*32),Math.round(Y*32),j,$,(bt<<1)+(ke?1:0),Yt,Fe*16,Ue*16,ut*256,St*256)}function Q8(y,m,L){y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L)}function cQe(y){for(var m=0,L=y.sections;m<L.length;m+=1){var q=L[m];if(Pr(q.text))return!0}return!1}var Nb=function(m){this.layoutVertexArray=new $i,this.indexArray=new Si,this.programConfigurations=m,this.segments=new Ja,this.dynamicLayoutVertexArray=new Cn,this.opacityVertexArray=new Tn,this.placedSymbolArray=new ps};Nb.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Nb.prototype.upload=function(m,L,q,Y){this.isEmpty()||(q&&(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,cJe.members),this.indexBuffer=m.createIndexBuffer(this.indexArray,L),this.dynamicLayoutVertexBuffer=m.createVertexBuffer(this.dynamicLayoutVertexArray,hJe.members,!0),this.opacityVertexBuffer=m.createVertexBuffer(this.opacityVertexArray,fQe,!0),this.opacityVertexBuffer.itemSize=1),(q||Y)&&this.programConfigurations.upload(m))},Nb.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},U("SymbolBuffers",Nb);var tA=function(m,L,q){this.layoutVertexArray=new m,this.layoutAttributes=L,this.indexArray=new q,this.segments=new Ja,this.collisionVertexArray=new jn};tA.prototype.upload=function(m){this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=m.createVertexBuffer(this.collisionVertexArray,vJe.members,!0)},tA.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},U("CollisionBuffers",tA);var Ms=function(m){this.collisionBoxArray=m.collisionBoxArray,this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(ke){return ke.id}),this.index=m.index,this.pixelRatio=m.pixelRatio,this.sourceLayerIndex=m.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sb([]),this.placementViewportMatrix=Sb([]);var L=this.layers[0],q=L._unevaluatedLayout._values;this.textSizeData=j8(this.zoom,q["text-size"]),this.iconSizeData=j8(this.zoom,q["icon-size"]);var Y=this.layers[0].layout,j=Y.get("symbol-sort-key"),$=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=$!=="viewport-y"&&j.constantOr(1)!==void 0;var pe=$==="viewport-y"||$==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=pe&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(ke){return Zv[ke]})),this.stateDependentLayerIds=this.layers.filter(function(ke){return ke.isStateDependent()}).map(function(ke){return ke.id}),this.sourceID=m.sourceID};Ms.prototype.createArrays=function(){this.text=new Nb(new Xr(this.layers,this.zoom,function(m){return/^text/.test(m)})),this.icon=new Nb(new Xr(this.layers,this.zoom,function(m){return/^icon/.test(m)})),this.glyphOffsetArray=new fc,this.lineVertexArray=new As,this.symbolInstances=new Yf},Ms.prototype.calculateGlyphDependencies=function(m,L,q,Y,j){for(var $=0;$<m.length;$++)if(L[m.charCodeAt($)]=!0,(q||Y)&&j){var pe=KT[m.charAt($)];pe&&(L[pe.charCodeAt(0)]=!0)}},Ms.prototype.populate=function(m,L,q){var Y=this.layers[0],j=Y.layout,$=j.get("text-font"),pe=j.get("text-field"),ke=j.get("icon-image"),Fe=(pe.value.kind!=="constant"||pe.value.value instanceof Us&&!pe.value.value.isEmpty()||pe.value.value.toString().length>0)&&($.value.kind!=="constant"||$.value.value.length>0),Ue=ke.value.kind!=="constant"||!!ke.value.value||Object.keys(ke.parameters).length>0,ut=j.get("symbol-sort-key");if(this.features=[],!(!Fe&&!Ue)){for(var St=L.iconDependencies,bt=L.glyphDependencies,Yt=L.availableImages,cr=new Sn(this.zoom),Ir=0,Ar=m;Ir<Ar.length;Ir+=1){var en=Ar[Ir],Nr=en.feature,Qr=en.id,an=en.index,Pn=en.sourceLayerIndex,ai=Y._featureFilter.needGeometry,ti=Da(Nr,ai);if(Y._featureFilter.filter(cr,ti,q)){ai||(ti.geometry=xi(Nr));var Bi=void 0;if(Fe){var Ti=Y.getValueAndResolveTokens("text-field",ti,q,Yt),Ri=Us.factory(Ti);cQe(Ri)&&(this.hasRTLText=!0),(!this.hasRTLText||xa()==="unavailable"||this.hasRTLText&&Po.isParsed())&&(Bi=gJe(Ri,Y,ti))}var wa=void 0;if(Ue){var Ni=Y.getValueAndResolveTokens("icon-image",ti,q,Yt);Ni instanceof xs?wa=Ni:wa=xs.fromString(Ni)}if(!(!Bi&&!wa)){var Yi=this.sortFeaturesByKey?ut.evaluate(ti,{},q):void 0,Xa={id:Qr,text:Bi,icon:wa,index:an,sourceLayerIndex:Pn,geometry:ti.geometry,properties:Nr.properties,type:uQe[Nr.type],sortKey:Yi};if(this.features.push(Xa),wa&&(St[wa.name]=!0),Bi){var ga=$.evaluate(ti,{},q).join(","),Ro=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zv.vertical)>=0;for(var Ss=0,Do=Bi.sections;Ss<Do.length;Ss+=1){var Io=Do[Ss];if(Io.image)St[Io.image.name]=!0;else{var Mo=tt(Bi.toString()),Os=Io.fontStack||ga,Ws=bt[Os]=bt[Os]||{};this.calculateGlyphDependencies(Io.text,Ws,Ro,this.allowVerticalPlacement,Mo)}}}}}}j.get("symbol-placement")==="line"&&(this.features=yJe(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ql,Kl){return ql.sortKey-Kl.sortKey})}},Ms.prototype.update=function(m,L,q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(m,L,this.layers,q),this.icon.programConfigurations.updatePaintArrays(m,L,this.layers,q))},Ms.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ms.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ms.prototype.upload=function(m){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(m),this.iconCollisionBox.upload(m)),this.text.upload(m,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(m,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ms.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ms.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ms.prototype.addToLineVertexArray=function(m,L){var q=this.lineVertexArray.length;if(m.segment!==void 0){for(var Y=m.dist(L[m.segment+1]),j=m.dist(L[m.segment]),$={},pe=m.segment+1;pe<L.length;pe++)$[pe]={x:L[pe].x,y:L[pe].y,tileUnitDistanceFromAnchor:Y},pe<L.length-1&&(Y+=L[pe+1].dist(L[pe]));for(var ke=m.segment||0;ke>=0;ke--)$[ke]={x:L[ke].x,y:L[ke].y,tileUnitDistanceFromAnchor:j},ke>0&&(j+=L[ke-1].dist(L[ke]));for(var Fe=0;Fe<L.length;Fe++){var Ue=$[Fe];this.lineVertexArray.emplaceBack(Ue.x,Ue.y,Ue.tileUnitDistanceFromAnchor)}}return{lineStartIndex:q,lineLength:this.lineVertexArray.length-q}},Ms.prototype.addSymbols=function(m,L,q,Y,j,$,pe,ke,Fe,Ue,ut,St){for(var bt=m.indexArray,Yt=m.layoutVertexArray,cr=m.segments.prepareSegment(4*L.length,Yt,bt,this.canOverlap?$.sortKey:void 0),Ir=this.glyphOffsetArray.length,Ar=cr.vertexLength,en=this.allowVerticalPlacement&&pe===Zv.vertical?Math.PI/2:0,Nr=$.text&&$.text.sections,Qr=0;Qr<L.length;Qr++){var an=L[Qr],Pn=an.tl,ai=an.tr,ti=an.bl,Bi=an.br,Ti=an.tex,Ri=an.pixelOffsetTL,wa=an.pixelOffsetBR,Ni=an.minFontScaleX,Yi=an.minFontScaleY,Xa=an.glyphOffset,ga=an.isSDF,Ro=an.sectionIndex,Ss=cr.vertexLength,Do=Xa[1];vk(Yt,ke.x,ke.y,Pn.x,Do+Pn.y,Ti.x,Ti.y,q,ga,Ri.x,Ri.y,Ni,Yi),vk(Yt,ke.x,ke.y,ai.x,Do+ai.y,Ti.x+Ti.w,Ti.y,q,ga,wa.x,Ri.y,Ni,Yi),vk(Yt,ke.x,ke.y,ti.x,Do+ti.y,Ti.x,Ti.y+Ti.h,q,ga,Ri.x,wa.y,Ni,Yi),vk(Yt,ke.x,ke.y,Bi.x,Do+Bi.y,Ti.x+Ti.w,Ti.y+Ti.h,q,ga,wa.x,wa.y,Ni,Yi),Q8(m.dynamicLayoutVertexArray,ke,en),bt.emplaceBack(Ss,Ss+1,Ss+2),bt.emplaceBack(Ss+1,Ss+2,Ss+3),cr.vertexLength+=4,cr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xa[0]),(Qr===L.length-1||Ro!==L[Qr+1].sectionIndex)&&m.programConfigurations.populatePaintArrays(Yt.length,$,$.index,{},St,Nr&&Nr[Ro])}m.placedSymbolArray.emplaceBack(ke.x,ke.y,Ir,this.glyphOffsetArray.length-Ir,Ar,Fe,Ue,ke.segment,q?q[0]:0,q?q[1]:0,Y[0],Y[1],pe,0,!1,0,ut)},Ms.prototype._addCollisionDebugVertex=function(m,L,q,Y,j,$){return L.emplaceBack(0,0),m.emplaceBack(q.x,q.y,Y,j,Math.round($.x),Math.round($.y))},Ms.prototype.addCollisionDebugVertices=function(m,L,q,Y,j,$,pe){var ke=j.segments.prepareSegment(4,j.layoutVertexArray,j.indexArray),Fe=ke.vertexLength,Ue=j.layoutVertexArray,ut=j.collisionVertexArray,St=pe.anchorX,bt=pe.anchorY;this._addCollisionDebugVertex(Ue,ut,$,St,bt,new u(m,L)),this._addCollisionDebugVertex(Ue,ut,$,St,bt,new u(q,L)),this._addCollisionDebugVertex(Ue,ut,$,St,bt,new u(q,Y)),this._addCollisionDebugVertex(Ue,ut,$,St,bt,new u(m,Y)),ke.vertexLength+=4;var Yt=j.indexArray;Yt.emplaceBack(Fe,Fe+1),Yt.emplaceBack(Fe+1,Fe+2),Yt.emplaceBack(Fe+2,Fe+3),Yt.emplaceBack(Fe+3,Fe),ke.primitiveLength+=4},Ms.prototype.addDebugCollisionBoxes=function(m,L,q,Y){for(var j=m;j<L;j++){var $=this.collisionBoxArray.get(j),pe=$.x1,ke=$.y1,Fe=$.x2,Ue=$.y2;this.addCollisionDebugVertices(pe,ke,Fe,Ue,Y?this.textCollisionBox:this.iconCollisionBox,$.anchorPoint,q)}},Ms.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tA(di,jK.members,_a),this.iconCollisionBox=new tA(di,jK.members,_a);for(var m=0;m<this.symbolInstances.length;m++){var L=this.symbolInstances.get(m);this.addDebugCollisionBoxes(L.textBoxStartIndex,L.textBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.verticalTextBoxStartIndex,L.verticalTextBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.iconBoxStartIndex,L.iconBoxEndIndex,L,!1),this.addDebugCollisionBoxes(L.verticalIconBoxStartIndex,L.verticalIconBoxEndIndex,L,!1)}},Ms.prototype._deserializeCollisionBoxesForSymbol=function(m,L,q,Y,j,$,pe,ke,Fe){for(var Ue={},ut=L;ut<q;ut++){var St=m.get(ut);Ue.textBox={x1:St.x1,y1:St.y1,x2:St.x2,y2:St.y2,anchorPointX:St.anchorPointX,anchorPointY:St.anchorPointY},Ue.textFeatureIndex=St.featureIndex;break}for(var bt=Y;bt<j;bt++){var Yt=m.get(bt);Ue.verticalTextBox={x1:Yt.x1,y1:Yt.y1,x2:Yt.x2,y2:Yt.y2,anchorPointX:Yt.anchorPointX,anchorPointY:Yt.anchorPointY},Ue.verticalTextFeatureIndex=Yt.featureIndex;break}for(var cr=$;cr<pe;cr++){var Ir=m.get(cr);Ue.iconBox={x1:Ir.x1,y1:Ir.y1,x2:Ir.x2,y2:Ir.y2,anchorPointX:Ir.anchorPointX,anchorPointY:Ir.anchorPointY},Ue.iconFeatureIndex=Ir.featureIndex;break}for(var Ar=ke;Ar<Fe;Ar++){var en=m.get(Ar);Ue.verticalIconBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},Ue.verticalIconFeatureIndex=en.featureIndex;break}return Ue},Ms.prototype.deserializeCollisionBoxes=function(m){this.collisionArrays=[];for(var L=0;L<this.symbolInstances.length;L++){var q=this.symbolInstances.get(L);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(m,q.textBoxStartIndex,q.textBoxEndIndex,q.verticalTextBoxStartIndex,q.verticalTextBoxEndIndex,q.iconBoxStartIndex,q.iconBoxEndIndex,q.verticalIconBoxStartIndex,q.verticalIconBoxEndIndex))}},Ms.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ms.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ms.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ms.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ms.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ms.prototype.addIndicesForPlacedSymbol=function(m,L){for(var q=m.placedSymbolArray.get(L),Y=q.vertexStartIndex+q.numGlyphs*4,j=q.vertexStartIndex;j<Y;j+=4)m.indexArray.emplaceBack(j,j+1,j+2),m.indexArray.emplaceBack(j+1,j+2,j+3)},Ms.prototype.getSortedSymbolIndexes=function(m){if(this.sortedAngle===m&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var L=Math.sin(m),q=Math.cos(m),Y=[],j=[],$=[],pe=0;pe<this.symbolInstances.length;++pe){$.push(pe);var ke=this.symbolInstances.get(pe);Y.push(Math.round(L*ke.anchorX+q*ke.anchorY)|0),j.push(ke.featureIndex)}return $.sort(function(Fe,Ue){return Y[Fe]-Y[Ue]||j[Ue]-j[Fe]}),$},Ms.prototype.addToSortKeyRanges=function(m,L){var q=this.sortKeyRanges[this.sortKeyRanges.length-1];q&&q.sortKey===L?q.symbolInstanceEnd=m+1:this.sortKeyRanges.push({sortKey:L,symbolInstanceStart:m,symbolInstanceEnd:m+1})},Ms.prototype.sortFeatures=function(m){var L=this;if(this.sortFeaturesByY&&this.sortedAngle!==m&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(m),this.sortedAngle=m,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var q=0,Y=this.symbolInstanceIndexes;q<Y.length;q+=1){var j=Y[q],$=this.symbolInstances.get(j);this.featureSortOrder.push($.featureIndex),[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(function(pe,ke,Fe){pe>=0&&Fe.indexOf(pe)===ke&&L.addIndicesForPlacedSymbol(L.text,pe)}),$.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,$.verticalPlacedTextSymbolIndex),$.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.placedIconSymbolIndex),$.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},U("SymbolBucket",Ms,{omit:["layers","collisionBoxArray","features","compareText"]}),Ms.MAX_GLYPHS=65535,Ms.addDynamicAttributes=Q8;function hQe(y,m){return m.replace(/{([^{}]+)}/g,function(L,q){return q in y?String(y[q]):""})}var vQe=new jr({"symbol-placement":new We(hn.layout_symbol["symbol-placement"]),"symbol-spacing":new We(hn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new We(hn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(hn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new We(hn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new We(hn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new We(hn.layout_symbol["icon-ignore-placement"]),"icon-optional":new We(hn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new We(hn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(hn.layout_symbol["icon-size"]),"icon-text-fit":new We(hn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new We(hn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(hn.layout_symbol["icon-image"]),"icon-rotate":new Gt(hn.layout_symbol["icon-rotate"]),"icon-padding":new We(hn.layout_symbol["icon-padding"]),"icon-keep-upright":new We(hn.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(hn.layout_symbol["icon-offset"]),"icon-anchor":new Gt(hn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new We(hn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new We(hn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new We(hn.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(hn.layout_symbol["text-field"]),"text-font":new Gt(hn.layout_symbol["text-font"]),"text-size":new Gt(hn.layout_symbol["text-size"]),"text-max-width":new Gt(hn.layout_symbol["text-max-width"]),"text-line-height":new We(hn.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(hn.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(hn.layout_symbol["text-justify"]),"text-radial-offset":new Gt(hn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new We(hn.layout_symbol["text-variable-anchor"]),"text-anchor":new Gt(hn.layout_symbol["text-anchor"]),"text-max-angle":new We(hn.layout_symbol["text-max-angle"]),"text-writing-mode":new We(hn.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(hn.layout_symbol["text-rotate"]),"text-padding":new We(hn.layout_symbol["text-padding"]),"text-keep-upright":new We(hn.layout_symbol["text-keep-upright"]),"text-transform":new Gt(hn.layout_symbol["text-transform"]),"text-offset":new Gt(hn.layout_symbol["text-offset"]),"text-allow-overlap":new We(hn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new We(hn.layout_symbol["text-ignore-placement"]),"text-optional":new We(hn.layout_symbol["text-optional"])}),dQe=new jr({"icon-opacity":new Gt(hn.paint_symbol["icon-opacity"]),"icon-color":new Gt(hn.paint_symbol["icon-color"]),"icon-halo-color":new Gt(hn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(hn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(hn.paint_symbol["icon-halo-blur"]),"icon-translate":new We(hn.paint_symbol["icon-translate"]),"icon-translate-anchor":new We(hn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(hn.paint_symbol["text-opacity"]),"text-color":new Gt(hn.paint_symbol["text-color"],{runtimeType:Fs,getOverride:function(y){return y.textColor},hasOverride:function(y){return!!y.textColor}}),"text-halo-color":new Gt(hn.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(hn.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(hn.paint_symbol["text-halo-blur"]),"text-translate":new We(hn.paint_symbol["text-translate"]),"text-translate-anchor":new We(hn.paint_symbol["text-translate-anchor"])}),$8={paint:dQe,layout:vQe},Ub=function(m){this.type=m.property.overrides?m.property.overrides.runtimeType:xu,this.defaultValue=m};Ub.prototype.evaluate=function(m){if(m.formattedSection){var L=this.defaultValue.property.overrides;if(L&&L.hasOverride(m.formattedSection))return L.getOverride(m.formattedSection)}return m.feature&&m.featureState?this.defaultValue.evaluate(m.feature,m.featureState):this.defaultValue.property.specification.default},Ub.prototype.eachChild=function(m){if(!this.defaultValue.isConstant()){var L=this.defaultValue.value;m(L._styleExpression.expression)}},Ub.prototype.outputDefined=function(){return!1},Ub.prototype.serialize=function(){return null},U("FormatSectionOverride",Ub,{omit:["defaultValue"]});var pQe=function(y){function m(L){y.call(this,L,$8)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(q,Y){if(y.prototype.recalculate.call(this,q,Y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var j=this.layout.get("text-writing-mode");if(j){for(var $=[],pe=0,ke=j;pe<ke.length;pe+=1){var Fe=ke[pe];$.indexOf(Fe)<0&&$.push(Fe)}this.layout._values["text-writing-mode"]=$}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},m.prototype.getValueAndResolveTokens=function(q,Y,j,$){var pe=this.layout.get(q).evaluate(Y,{},j,$),ke=this._unevaluatedLayout._values[q];return!ke.isDataDriven()&&!Rh(ke.value)&&pe?hQe(Y.properties,pe):pe},m.prototype.createBucket=function(q){return new Ms(q)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype._setPaintOverrides=function(){for(var q=0,Y=$8.paint.overridableProperties;q<Y.length;q+=1){var j=Y[q];if(m.hasPaintOverride(this.layout,j)){var $=this.paint.get(j),pe=new Ub($),ke=new lc(pe,$.property.specification),Fe=null;$.value.kind==="constant"||$.value.kind==="source"?Fe=new uc("source",ke):Fe=new gf("composite",ke,$.value.zoomStops,$.value._interpolationType),this.paint._values[j]=new ls($.property,Fe,$.parameters)}}},m.prototype._handleOverridablePaintPropertyUpdate=function(q,Y,j){return!this.layout||Y.isDataDriven()||j.isDataDriven()?!1:m.hasPaintOverride(this.layout,q)},m.hasPaintOverride=function(q,Y){var j=q.get("text-field"),$=$8.paint.properties[Y],pe=!1,ke=function(ut){for(var St=0,bt=ut;St<bt.length;St+=1){var Yt=bt[St];if($.overrides&&$.overrides.hasOverride(Yt)){pe=!0;return}}};if(j.value.kind==="constant"&&j.value.value instanceof Us)ke(j.value.value.sections);else if(j.value.kind==="source"){var Fe=function(ut){if(!pe)if(ut instanceof po&&To(ut.value)===dl){var St=ut.value;ke(St.sections)}else ut instanceof Vl?ke(ut.sections):ut.eachChild(Fe)},Ue=j.value;Ue._styleExpression&&Fe(Ue._styleExpression.expression)}return pe},m}(yn),gQe=new jr({"background-color":new We(hn.paint_background["background-color"]),"background-pattern":new qr(hn.paint_background["background-pattern"]),"background-opacity":new We(hn.paint_background["background-opacity"])}),yQe={paint:gQe},mQe=function(y){function m(L){y.call(this,L,yQe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(yn),xQe=new jr({"raster-opacity":new We(hn.paint_raster["raster-opacity"]),"raster-hue-rotate":new We(hn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new We(hn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new We(hn.paint_raster["raster-brightness-max"]),"raster-saturation":new We(hn.paint_raster["raster-saturation"]),"raster-contrast":new We(hn.paint_raster["raster-contrast"]),"raster-resampling":new We(hn.paint_raster["raster-resampling"]),"raster-fade-duration":new We(hn.paint_raster["raster-fade-duration"])}),_Qe={paint:xQe},bQe=function(y){function m(L){y.call(this,L,_Qe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(yn);function wQe(y){var m=[],L=y.id;return L===void 0&&m.push({message:"layers."+L+': missing required property "id"'}),y.render===void 0&&m.push({message:"layers."+L+': missing required method "render"'}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&m.push({message:"layers."+L+': property "renderingMode" must be either "2d" or "3d"'}),m}var TQe=function(y){function m(L){y.call(this,L,{}),this.implementation=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},m.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},m.prototype.recalculate=function(){},m.prototype.updateTransitions=function(){},m.prototype.hasTransition=function(){},m.prototype.serialize=function(){},m.prototype.onAdd=function(q){this.implementation.onAdd&&this.implementation.onAdd(q,q.painter.context.gl)},m.prototype.onRemove=function(q){this.implementation.onRemove&&this.implementation.onRemove(q,q.painter.context.gl)},m}(yn),AQe={circle:Xje,heatmap:Jje,hillshade:eKe,fill:SKe,"fill-extrusion":XKe,line:uJe,symbol:pQe,background:mQe,raster:bQe};function MQe(y){return y.type==="custom"?new TQe(y):new AQe[y.type](y)}var wJ=c.HTMLImageElement,TJ=c.HTMLCanvasElement,AJ=c.HTMLVideoElement,MJ=c.ImageData,dk=c.ImageBitmap,X1=function(m,L,q,Y){this.context=m,this.format=q,this.texture=m.gl.createTexture(),this.update(L,Y)};X1.prototype.update=function(m,L,q){var Y=m.width,j=m.height,$=(!this.size||this.size[0]!==Y||this.size[1]!==j)&&!q,pe=this,ke=pe.context,Fe=ke.gl;if(this.useMipmap=!!(L&&L.useMipmap),Fe.bindTexture(Fe.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Fe.RGBA&&(!L||L.premultiply!==!1)),$)this.size=[Y,j],m instanceof wJ||m instanceof TJ||m instanceof AJ||m instanceof MJ||dk&&m instanceof dk?Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,this.format,Fe.UNSIGNED_BYTE,m):Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,Y,j,0,this.format,Fe.UNSIGNED_BYTE,m.data);else{var Ue=q||{x:0,y:0},ut=Ue.x,St=Ue.y;m instanceof wJ||m instanceof TJ||m instanceof AJ||m instanceof MJ||dk&&m instanceof dk?Fe.texSubImage2D(Fe.TEXTURE_2D,0,ut,St,Fe.RGBA,Fe.UNSIGNED_BYTE,m):Fe.texSubImage2D(Fe.TEXTURE_2D,0,ut,St,Y,j,Fe.RGBA,Fe.UNSIGNED_BYTE,m.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Fe.generateMipmap(Fe.TEXTURE_2D)},X1.prototype.bind=function(m,L,q){var Y=this,j=Y.context,$=j.gl;$.bindTexture($.TEXTURE_2D,this.texture),q===$.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(q=$.LINEAR),m!==this.filter&&($.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,m),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,q||m),this.filter=m),L!==this.wrap&&($.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,L),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,L),this.wrap=L)},X1.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},X1.prototype.destroy=function(){var m=this.context,L=m.gl;L.deleteTexture(this.texture),this.texture=null};var eq=function(m){var L=this;this._callback=m,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){L._triggered=!1,L._callback()})};eq.prototype.trigger=function(){var m=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){m._triggered=!1,m._callback()},0))},eq.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vb=function(m,L,q){this.target=m,this.parent=L,this.mapId=q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},D(["receive","process"],this),this.invoker=new eq(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=fe()?m:c};Vb.prototype.send=function(m,L,q,Y,j){var $=this;j===void 0&&(j=!1);var pe=Math.round(Math.random()*1e18).toString(36).substring(0,10);q&&(this.callbacks[pe]=q);var ke=ae(this.globalScope)?void 0:[];return this.target.postMessage({id:pe,type:m,hasCallback:!!q,targetMapId:Y,mustQueue:j,sourceMapId:this.mapId,data:we(L,ke)},ke),{cancel:function(){q&&delete $.callbacks[pe],$.target.postMessage({id:pe,type:"<cancel>",targetMapId:Y,sourceMapId:$.mapId})}}},Vb.prototype.receive=function(m){var L=m.data,q=L.id;if(q&&!(L.targetMapId&&this.mapId!==L.targetMapId))if(L.type==="<cancel>"){delete this.tasks[q];var Y=this.cancelCallbacks[q];delete this.cancelCallbacks[q],Y&&Y()}else fe()||L.mustQueue?(this.tasks[q]=L,this.taskQueue.push(q),this.invoker.trigger()):this.processTask(q,L)},Vb.prototype.process=function(){if(this.taskQueue.length){var m=this.taskQueue.shift(),L=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),L&&this.processTask(m,L)}},Vb.prototype.processTask=function(m,L){var q=this;if(L.type==="<response>"){var Y=this.callbacks[m];delete this.callbacks[m],Y&&(L.error?Y(Me(L.error)):Y(null,Me(L.data)))}else{var j=!1,$=ae(this.globalScope)?void 0:[],pe=L.hasCallback?function(St,bt){j=!0,delete q.cancelCallbacks[m],q.target.postMessage({id:m,type:"<response>",sourceMapId:q.mapId,error:St?we(St):null,data:we(bt,$)},$)}:function(St){j=!0},ke=null,Fe=Me(L.data);if(this.parent[L.type])ke=this.parent[L.type](L.sourceMapId,Fe,pe);else if(this.parent.getWorkerSource){var Ue=L.type.split("."),ut=this.parent.getWorkerSource(L.sourceMapId,Ue[0],Fe.source);ke=ut[Ue[1]](Fe,pe)}else pe(new Error("Could not find function "+L.type));!j&&ke&&ke.cancel&&(this.cancelCallbacks[m]=ke.cancel)}},Vb.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function SQe(y,m,L){m=Math.pow(2,L)-m-1;var q=SJ(y*256,m*256,L),Y=SJ((y+1)*256,(m+1)*256,L);return q[0]+","+q[1]+","+Y[0]+","+Y[1]}function SJ(y,m,L){var q=2*Math.PI*6378137/256/Math.pow(2,L),Y=y*q-2*Math.PI*6378137/2,j=m*q-2*Math.PI*6378137/2;return[Y,j]}var Cu=function(m,L){m&&(L?this.setSouthWest(m).setNorthEast(L):m.length===4?this.setSouthWest([m[0],m[1]]).setNorthEast([m[2],m[3]]):this.setSouthWest(m[0]).setNorthEast(m[1]))};Cu.prototype.setNorthEast=function(m){return this._ne=m instanceof sl?new sl(m.lng,m.lat):sl.convert(m),this},Cu.prototype.setSouthWest=function(m){return this._sw=m instanceof sl?new sl(m.lng,m.lat):sl.convert(m),this},Cu.prototype.extend=function(m){var L=this._sw,q=this._ne,Y,j;if(m instanceof sl)Y=m,j=m;else if(m instanceof Cu){if(Y=m._sw,j=m._ne,!Y||!j)return this}else{if(Array.isArray(m))if(m.length===4||m.every(Array.isArray)){var $=m;return this.extend(Cu.convert($))}else{var pe=m;return this.extend(sl.convert(pe))}return this}return!L&&!q?(this._sw=new sl(Y.lng,Y.lat),this._ne=new sl(j.lng,j.lat)):(L.lng=Math.min(Y.lng,L.lng),L.lat=Math.min(Y.lat,L.lat),q.lng=Math.max(j.lng,q.lng),q.lat=Math.max(j.lat,q.lat)),this},Cu.prototype.getCenter=function(){return new sl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Cu.prototype.getSouthWest=function(){return this._sw},Cu.prototype.getNorthEast=function(){return this._ne},Cu.prototype.getNorthWest=function(){return new sl(this.getWest(),this.getNorth())},Cu.prototype.getSouthEast=function(){return new sl(this.getEast(),this.getSouth())},Cu.prototype.getWest=function(){return this._sw.lng},Cu.prototype.getSouth=function(){return this._sw.lat},Cu.prototype.getEast=function(){return this._ne.lng},Cu.prototype.getNorth=function(){return this._ne.lat},Cu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Cu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Cu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Cu.prototype.contains=function(m){var L=sl.convert(m),q=L.lng,Y=L.lat,j=this._sw.lat<=Y&&Y<=this._ne.lat,$=this._sw.lng<=q&&q<=this._ne.lng;return this._sw.lng>this._ne.lng&&($=this._sw.lng>=q&&q>=this._ne.lng),j&&$},Cu.convert=function(m){return!m||m instanceof Cu?m:new Cu(m)};var EJ=63710088e-1,sl=function(m,L){if(isNaN(m)||isNaN(L))throw new Error("Invalid LngLat object: ("+m+", "+L+")");if(this.lng=+m,this.lat=+L,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};sl.prototype.wrap=function(){return new sl(A(this.lng,-180,180),this.lat)},sl.prototype.toArray=function(){return[this.lng,this.lat]},sl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sl.prototype.distanceTo=function(m){var L=Math.PI/180,q=this.lat*L,Y=m.lat*L,j=Math.sin(q)*Math.sin(Y)+Math.cos(q)*Math.cos(Y)*Math.cos((m.lng-this.lng)*L),$=EJ*Math.acos(Math.min(j,1));return $},sl.prototype.toBounds=function(m){m===void 0&&(m=0);var L=40075017,q=360*m/L,Y=q/Math.cos(Math.PI/180*this.lat);return new Cu(new sl(this.lng-Y,this.lat-q),new sl(this.lng+Y,this.lat+q))},sl.convert=function(m){if(m instanceof sl)return m;if(Array.isArray(m)&&(m.length===2||m.length===3))return new sl(Number(m[0]),Number(m[1]));if(!Array.isArray(m)&&typeof m=="object"&&m!==null)return new sl(Number("lng"in m?m.lng:m.lon),Number(m.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kJ=2*Math.PI*EJ;function CJ(y){return kJ*Math.cos(y*Math.PI/180)}function LJ(y){return(180+y)/360}function PJ(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function RJ(y,m){return y/CJ(m)}function EQe(y){return y*360-180}function tq(y){var m=180-y*360;return 360/Math.PI*Math.atan(Math.exp(m*Math.PI/180))-90}function kQe(y,m){return y*CJ(tq(m))}function CQe(y){return 1/Math.cos(y*Math.PI/180)}var Z1=function(m,L,q){q===void 0&&(q=0),this.x=+m,this.y=+L,this.z=+q};Z1.fromLngLat=function(m,L){L===void 0&&(L=0);var q=sl.convert(m);return new Z1(LJ(q.lng),PJ(q.lat),RJ(L,q.lat))},Z1.prototype.toLngLat=function(){return new sl(EQe(this.x),tq(this.y))},Z1.prototype.toAltitude=function(){return kQe(this.z,this.y)},Z1.prototype.meterInMercatorCoordinateUnits=function(){return 1/kJ*CQe(tq(this.y))};var j1=function(m,L,q){this.z=m,this.x=L,this.y=q,this.key=rA(0,m,m,L,q)};j1.prototype.equals=function(m){return this.z===m.z&&this.x===m.x&&this.y===m.y},j1.prototype.url=function(m,L){var q=SQe(this.x,this.y,this.z),Y=LQe(this.z,this.x,this.y);return m[(this.x+this.y)%m.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(L==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Y).replace("{bbox-epsg-3857}",q)},j1.prototype.getTilePoint=function(m){var L=Math.pow(2,this.z);return new u((m.x*L-this.x)*un,(m.y*L-this.y)*un)},j1.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var DJ=function(m,L){this.wrap=m,this.canonical=L,this.key=rA(m,L.z,L.z,L.x,L.y)},Lu=function(m,L,q,Y,j){this.overscaledZ=m,this.wrap=L,this.canonical=new j1(q,+Y,+j),this.key=rA(L,m,q,Y,j)};Lu.prototype.equals=function(m){return this.overscaledZ===m.overscaledZ&&this.wrap===m.wrap&&this.canonical.equals(m.canonical)},Lu.prototype.scaledTo=function(m){var L=this.canonical.z-m;return m>this.canonical.z?new Lu(m,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Lu(m,this.wrap,m,this.canonical.x>>L,this.canonical.y>>L)},Lu.prototype.calculateScaledKey=function(m,L){var q=this.canonical.z-m;return m>this.canonical.z?rA(this.wrap*+L,m,this.canonical.z,this.canonical.x,this.canonical.y):rA(this.wrap*+L,m,m,this.canonical.x>>q,this.canonical.y>>q)},Lu.prototype.isChildOf=function(m){if(m.wrap!==this.wrap)return!1;var L=this.canonical.z-m.canonical.z;return m.overscaledZ===0||m.overscaledZ<this.overscaledZ&&m.canonical.x===this.canonical.x>>L&&m.canonical.y===this.canonical.y>>L},Lu.prototype.children=function(m){if(this.overscaledZ>=m)return[new Lu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var L=this.canonical.z+1,q=this.canonical.x*2,Y=this.canonical.y*2;return[new Lu(L,this.wrap,L,q,Y),new Lu(L,this.wrap,L,q+1,Y),new Lu(L,this.wrap,L,q,Y+1),new Lu(L,this.wrap,L,q+1,Y+1)]},Lu.prototype.isLessThan=function(m){return this.wrap<m.wrap?!0:this.wrap>m.wrap?!1:this.overscaledZ<m.overscaledZ?!0:this.overscaledZ>m.overscaledZ?!1:this.canonical.x<m.canonical.x?!0:this.canonical.x>m.canonical.x?!1:this.canonical.y<m.canonical.y},Lu.prototype.wrapped=function(){return new Lu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Lu.prototype.unwrapTo=function(m){return new Lu(this.overscaledZ,m,this.canonical.z,this.canonical.x,this.canonical.y)},Lu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Lu.prototype.toUnwrapped=function(){return new DJ(this.wrap,this.canonical)},Lu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Lu.prototype.getTilePoint=function(m){return this.canonical.getTilePoint(new Z1(m.x-this.wrap,m.y))};function rA(y,m,L,q,Y){y*=2,y<0&&(y=y*-1-1);var j=1<<L;return(j*j*y+j*Y+q).toString(36)+L.toString(36)+m.toString(36)}function LQe(y,m,L){for(var q="",Y,j=y;j>0;j--)Y=1<<j-1,q+=(m&Y?1:0)+(L&Y?2:0);return q}U("CanonicalTileID",j1),U("OverscaledTileID",Lu,{omit:["posMatrix"]});var Eg=function(m,L,q){if(this.uid=m,L.height!==L.width)throw new RangeError("DEM tiles must be square");if(q&&q!=="mapbox"&&q!=="terrarium")return Z('"'+q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=L.height;var Y=this.dim=L.height-2;this.data=new Uint32Array(L.data.buffer),this.encoding=q||"mapbox";for(var j=0;j<Y;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(Y,j)]=this.data[this._idx(Y-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,Y)]=this.data[this._idx(j,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)]};Eg.prototype.get=function(m,L){var q=new Uint8Array(this.data.buffer),Y=this._idx(m,L)*4,j=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return j(q[Y],q[Y+1],q[Y+2])},Eg.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Eg.prototype._idx=function(m,L){if(m<-1||m>=this.dim+1||L<-1||L>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(L+1)*this.stride+(m+1)},Eg.prototype._unpackMapbox=function(m,L,q){return(m*256*256+L*256+q)/10-1e4},Eg.prototype._unpackTerrarium=function(m,L,q){return m*256+L+q/256-32768},Eg.prototype.getPixels=function(){return new Nh({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Eg.prototype.backfillBorder=function(m,L,q){if(this.dim!==m.dim)throw new Error("dem dimension mismatch");var Y=L*this.dim,j=L*this.dim+this.dim,$=q*this.dim,pe=q*this.dim+this.dim;switch(L){case-1:Y=j-1;break;case 1:j=Y+1;break}switch(q){case-1:$=pe-1;break;case 1:pe=$+1;break}for(var ke=-L*this.dim,Fe=-q*this.dim,Ue=$;Ue<pe;Ue++)for(var ut=Y;ut<j;ut++)this.data[this._idx(ut,Ue)]=m.data[this._idx(ut+ke,Ue+Fe)]},U("DEMData",Eg);function PQe(y,m){var L={};if(!m)return L;for(var q=function(){var $=j[Y],pe=$.layerIds.map(function(ut){return m.getLayer(ut)}).filter(Boolean);if(pe.length!==0){$.layers=pe,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(ut){return pe.filter(function(St){return St.id===ut})[0]}));for(var ke=0,Fe=pe;ke<Fe.length;ke+=1){var Ue=Fe[ke];L[Ue.id]=$}}},Y=0,j=y;Y<j.length;Y+=1)q();return L}var pk=function(m){this._stringToNumber={},this._numberToString=[];for(var L=0;L<m.length;L++){var q=m[L];this._stringToNumber[q]=L,this._numberToString[L]=q}};pk.prototype.encode=function(m){return this._stringToNumber[m]},pk.prototype.decode=function(m){return this._numberToString[m]};var gk=function(m,L,q,Y,j){this.type="Feature",this._vectorTileFeature=m,m._z=L,m._x=q,m._y=Y,this.properties=m.properties,this.id=j},rq={geometry:{configurable:!0}};rq.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},rq.geometry.set=function(y){this._geometry=y},gk.prototype.toJSON=function(){var m={geometry:this.geometry};for(var L in this)L==="_geometry"||L==="_vectorTileFeature"||(m[L]=this[L]);return m},Object.defineProperties(gk.prototype,rq);var Hb=function(){this.state={},this.stateChanges={},this.deletedStates={}};Hb.prototype.updateState=function(m,L,q){var Y=String(L);if(this.stateChanges[m]=this.stateChanges[m]||{},this.stateChanges[m][Y]=this.stateChanges[m][Y]||{},x(this.stateChanges[m][Y],q),this.deletedStates[m]===null){this.deletedStates[m]={};for(var j in this.state[m])j!==Y&&(this.deletedStates[m][j]=null)}else{var $=this.deletedStates[m]&&this.deletedStates[m][Y]===null;if($){this.deletedStates[m][Y]={};for(var pe in this.state[m][Y])q[pe]||(this.deletedStates[m][Y][pe]=null)}else for(var ke in q){var Fe=this.deletedStates[m]&&this.deletedStates[m][Y]&&this.deletedStates[m][Y][ke]===null;Fe&&delete this.deletedStates[m][Y][ke]}}},Hb.prototype.removeFeatureState=function(m,L,q){var Y=this.deletedStates[m]===null;if(!Y){var j=String(L);if(this.deletedStates[m]=this.deletedStates[m]||{},q&&L!==void 0)this.deletedStates[m][j]!==null&&(this.deletedStates[m][j]=this.deletedStates[m][j]||{},this.deletedStates[m][j][q]=null);else if(L!==void 0){var $=this.stateChanges[m]&&this.stateChanges[m][j];if($){this.deletedStates[m][j]={};for(q in this.stateChanges[m][j])this.deletedStates[m][j][q]=null}else this.deletedStates[m][j]=null}else this.deletedStates[m]=null}},Hb.prototype.getState=function(m,L){var q=String(L),Y=this.state[m]||{},j=this.stateChanges[m]||{},$=x({},Y[q],j[q]);if(this.deletedStates[m]===null)return{};if(this.deletedStates[m]){var pe=this.deletedStates[m][L];if(pe===null)return{};for(var ke in pe)delete $[ke]}return $},Hb.prototype.initializeTileState=function(m,L){m.setFeatureState(this.state,L)},Hb.prototype.coalesceChanges=function(m,L){var q={};for(var Y in this.stateChanges){this.state[Y]=this.state[Y]||{};var j={};for(var $ in this.stateChanges[Y])this.state[Y][$]||(this.state[Y][$]={}),x(this.state[Y][$],this.stateChanges[Y][$]),j[$]=this.state[Y][$];q[Y]=j}for(var pe in this.deletedStates){this.state[pe]=this.state[pe]||{};var ke={};if(this.deletedStates[pe]===null)for(var Fe in this.state[pe])ke[Fe]={},this.state[pe][Fe]={};else for(var Ue in this.deletedStates[pe]){var ut=this.deletedStates[pe][Ue]===null;if(ut)this.state[pe][Ue]={};else for(var St=0,bt=Object.keys(this.deletedStates[pe][Ue]);St<bt.length;St+=1){var Yt=bt[St];delete this.state[pe][Ue][Yt]}ke[Ue]=this.state[pe][Ue]}q[pe]=q[pe]||{},x(q[pe],ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(q).length!==0)for(var cr in m){var Ir=m[cr];Ir.setFeatureState(q,L)}};var kg=function(m,L){this.tileID=m,this.x=m.canonical.x,this.y=m.canonical.y,this.z=m.canonical.z,this.grid=new su(un,16,0),this.grid3D=new su(un,16,0),this.featureIndexArray=new fu,this.promoteId=L};kg.prototype.insert=function(m,L,q,Y,j,$){var pe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(q,Y,j);for(var ke=$?this.grid3D:this.grid,Fe=0;Fe<L.length;Fe++){for(var Ue=L[Fe],ut=[1/0,1/0,-1/0,-1/0],St=0;St<Ue.length;St++){var bt=Ue[St];ut[0]=Math.min(ut[0],bt.x),ut[1]=Math.min(ut[1],bt.y),ut[2]=Math.max(ut[2],bt.x),ut[3]=Math.max(ut[3],bt.y)}ut[0]<un&&ut[1]<un&&ut[2]>=0&&ut[3]>=0&&ke.insert(pe,ut[0],ut[1],ut[2],ut[3])}},kg.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Pb.VectorTile(new ak(this.rawTileData)).layers,this.sourceLayerCoder=new pk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},kg.prototype.query=function(m,L,q,Y){var j=this;this.loadVTLayers();for(var $=m.params||{},pe=un/m.tileSize/m.scale,ke=Te($.filter),Fe=m.queryGeometry,Ue=m.queryPadding*pe,ut=FJ(Fe),St=this.grid.query(ut.minX-Ue,ut.minY-Ue,ut.maxX+Ue,ut.maxY+Ue),bt=FJ(m.cameraQueryGeometry),Yt=this.grid3D.query(bt.minX-Ue,bt.minY-Ue,bt.maxX+Ue,bt.maxY+Ue,function(Pn,ai,ti,Bi){return jd(m.cameraQueryGeometry,Pn-Ue,ai-Ue,ti+Ue,Bi+Ue)}),cr=0,Ir=Yt;cr<Ir.length;cr+=1){var Ar=Ir[cr];St.push(Ar)}St.sort(RQe);for(var en={},Nr,Qr=function(Pn){var ai=St[Pn];if(ai!==Nr){Nr=ai;var ti=j.featureIndexArray.get(ai),Bi=null;j.loadMatchingFeature(en,ti.bucketIndex,ti.sourceLayerIndex,ti.featureIndex,ke,$.layers,$.availableImages,L,q,Y,function(Ti,Ri,wa){return Bi||(Bi=xi(Ti)),Ri.queryIntersectsFeature(Fe,Ti,wa,Bi,j.z,m.transform,pe,m.pixelPosMatrix)})}},an=0;an<St.length;an++)Qr(an);return en},kg.prototype.loadMatchingFeature=function(m,L,q,Y,j,$,pe,ke,Fe,Ue,ut){var St=this.bucketLayerIDs[L];if(!($&&!F($,St))){var bt=this.sourceLayerCoder.decode(q),Yt=this.vtLayers[bt],cr=Yt.feature(Y);if(j.needGeometry){var Ir=Da(cr,!0);if(!j.filter(new Sn(this.tileID.overscaledZ),Ir,this.tileID.canonical))return}else if(!j.filter(new Sn(this.tileID.overscaledZ),cr))return;for(var Ar=this.getId(cr,bt),en=0;en<St.length;en++){var Nr=St[en];if(!($&&$.indexOf(Nr)<0)){var Qr=ke[Nr];if(Qr){var an={};Ar!==void 0&&Ue&&(an=Ue.getState(Qr.sourceLayer||"_geojsonTileLayer",Ar));var Pn=x({},Fe[Nr]);Pn.paint=IJ(Pn.paint,Qr.paint,cr,an,pe),Pn.layout=IJ(Pn.layout,Qr.layout,cr,an,pe);var ai=!ut||ut(cr,Qr,an);if(ai){var ti=new gk(cr,this.z,this.x,this.y,Ar);ti.layer=Pn;var Bi=m[Nr];Bi===void 0&&(Bi=m[Nr]=[]),Bi.push({featureIndex:Y,feature:ti,intersectionZ:ai})}}}}}},kg.prototype.lookupSymbolFeatures=function(m,L,q,Y,j,$,pe,ke){var Fe={};this.loadVTLayers();for(var Ue=Te(j),ut=0,St=m;ut<St.length;ut+=1){var bt=St[ut];this.loadMatchingFeature(Fe,q,Y,bt,Ue,$,pe,ke,L)}return Fe},kg.prototype.hasLayer=function(m){for(var L=0,q=this.bucketLayerIDs;L<q.length;L+=1)for(var Y=q[L],j=0,$=Y;j<$.length;j+=1){var pe=$[j];if(m===pe)return!0}return!1},kg.prototype.getId=function(m,L){var q=m.id;if(this.promoteId){var Y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[L];q=m.properties[Y],typeof q=="boolean"&&(q=Number(q))}return q},U("FeatureIndex",kg,{omit:["rawTileData","sourceLayerCoder"]});function IJ(y,m,L,q,Y){return O(y,function(j,$){var pe=m instanceof Wl?m.get($):null;return pe&&pe.evaluate?pe.evaluate(L,q,Y):pe})}function FJ(y){for(var m=1/0,L=1/0,q=-1/0,Y=-1/0,j=0,$=y;j<$.length;j+=1){var pe=$[j];m=Math.min(m,pe.x),L=Math.min(L,pe.y),q=Math.max(q,pe.x),Y=Math.max(Y,pe.y)}return{minX:m,minY:L,maxX:q,maxY:Y}}function RQe(y,m){return m-y}var DQe=3e4,xf=function(m,L){this.tileID=m,this.uid=d(),this.uses=0,this.tileSize=L,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};xf.prototype.registerFadeDuration=function(m){var L=m+this.timeAdded;L<Re.now()||this.fadeEndTime&&L<this.fadeEndTime||(this.fadeEndTime=L)},xf.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},xf.prototype.loadVectorData=function(m,L,q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!m){this.collisionBoxArray=new uo;return}m.featureIndex&&(this.latestFeatureIndex=m.featureIndex,m.rawTileData?(this.latestRawTileData=m.rawTileData,this.latestFeatureIndex.rawTileData=m.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=m.collisionBoxArray,this.buckets=PQe(m.buckets,L.style),this.hasSymbolBuckets=!1;for(var Y in this.buckets){var j=this.buckets[Y];if(j instanceof Ms)if(this.hasSymbolBuckets=!0,q)j.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var $ in this.buckets){var pe=this.buckets[$];if(pe instanceof Ms&&pe.hasRTLText){this.hasRTLText=!0,Ao();break}}this.queryPadding=0;for(var ke in this.buckets){var Fe=this.buckets[ke];this.queryPadding=Math.max(this.queryPadding,L.style.getLayer(ke).queryRadius(Fe))}m.imageAtlas&&(this.imageAtlas=m.imageAtlas),m.glyphAtlasImage&&(this.glyphAtlasImage=m.glyphAtlasImage)},xf.prototype.unloadVectorData=function(){for(var m in this.buckets)this.buckets[m].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},xf.prototype.getBucket=function(m){return this.buckets[m.id]},xf.prototype.upload=function(m){for(var L in this.buckets){var q=this.buckets[L];q.uploadPending()&&q.upload(m)}var Y=m.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X1(m,this.imageAtlas.image,Y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X1(m,this.glyphAtlasImage,Y.ALPHA),this.glyphAtlasImage=null)},xf.prototype.prepare=function(m){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(m,this.imageAtlasTexture)},xf.prototype.queryRenderedFeatures=function(m,L,q,Y,j,$,pe,ke,Fe,Ue){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:Y,cameraQueryGeometry:j,scale:$,tileSize:this.tileSize,pixelPosMatrix:Ue,transform:ke,params:pe,queryPadding:this.queryPadding*Fe},m,L,q)},xf.prototype.querySourceFeatures=function(m,L){var q=this.latestFeatureIndex;if(!(!q||!q.rawTileData)){var Y=q.loadVTLayers(),j=L?L.sourceLayer:"",$=Y._geojsonTileLayer||Y[j];if($)for(var pe=Te(L&&L.filter),ke=this.tileID.canonical,Fe=ke.z,Ue=ke.x,ut=ke.y,St={z:Fe,x:Ue,y:ut},bt=0;bt<$.length;bt++){var Yt=$.feature(bt);if(pe.needGeometry){var cr=Da(Yt,!0);if(!pe.filter(new Sn(this.tileID.overscaledZ),cr,this.tileID.canonical))continue}else if(!pe.filter(new Sn(this.tileID.overscaledZ),Yt))continue;var Ir=q.getId(Yt,j),Ar=new gk(Yt,Fe,Ue,ut,Ir);Ar.tile=St,m.push(Ar)}}},xf.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},xf.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},xf.prototype.setExpiryData=function(m){var L=this.expirationTime;if(m.cacheControl){var q=K(m.cacheControl);q["max-age"]&&(this.expirationTime=Date.now()+q["max-age"]*1e3)}else m.expires&&(this.expirationTime=new Date(m.expires).getTime());if(this.expirationTime){var Y=Date.now(),j=!1;if(this.expirationTime>Y)j=!1;else if(!L)j=!0;else if(this.expirationTime<L)j=!0;else{var $=this.expirationTime-L;$?this.expirationTime=Y+Math.max($,DQe):j=!0}j?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},xf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},xf.prototype.setFeatureState=function(m,L){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(m).length===0)){var q=this.latestFeatureIndex.loadVTLayers();for(var Y in this.buckets)if(L.style.hasLayer(Y)){var j=this.buckets[Y],$=j.layers[0].sourceLayer||"_geojsonTileLayer",pe=q[$],ke=m[$];if(!(!pe||!ke||Object.keys(ke).length===0)){j.update(ke,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Fe=L&&L.style&&L.style.getLayer(Y);Fe&&(this.queryPadding=Math.max(this.queryPadding,Fe.queryRadius(j)))}}}},xf.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},xf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Re.now()},xf.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},xf.prototype.setHoldDuration=function(m){this.symbolFadeHoldUntil=Re.now()+m},xf.prototype.setDependencies=function(m,L){for(var q={},Y=0,j=L;Y<j.length;Y+=1){var $=j[Y];q[$]=!0}this.dependencies[m]=q},xf.prototype.hasDependency=function(m,L){for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q],$=this.dependencies[j];if($)for(var pe=0,ke=L;pe<ke.length;pe+=1){var Fe=ke[pe];if($[Fe])return!0}}return!1};var IQe=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Uy=c.performance,qJ=function(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},Uy.mark(this._marks.start)};qJ.prototype.finish=function(){Uy.mark(this._marks.end);var m=Uy.getEntriesByName(this._marks.measure);return m.length===0&&(Uy.measure(this._marks.measure,this._marks.start,this._marks.end),m=Uy.getEntriesByName(this._marks.measure),Uy.clearMarks(this._marks.start),Uy.clearMarks(this._marks.end),Uy.clearMeasures(this._marks.measure)),m},n.Actor=Vb,n.AlphaImage=W1,n.CanonicalTileID=j1,n.CollisionBoxArray=uo,n.Color=lo,n.DEMData=Eg,n.DataConstantProperty=We,n.DictionaryCoder=pk,n.EXTENT=un,n.ErrorEvent=Li,n.EvaluationParameters=Sn,n.Event=Ra,n.Evented=Yn,n.FeatureIndex=kg,n.FillBucket=Zp,n.FillExtrusionBucket=jp,n.ImageAtlas=QT,n.ImagePosition=sk,n.LineBucket=ah,n.LngLat=sl,n.LngLatBounds=Cu,n.MercatorCoordinate=Z1,n.ONE_EM=Wf,n.OverscaledTileID=Lu,n.Point=u,n.Point$1=u,n.Properties=jr,n.Protobuf=ak,n.RGBAImage=Nh,n.RequestManager=Se,n.RequestPerformance=qJ,n.ResourceType=Zi,n.SegmentVector=Ja,n.SourceFeatureState=Hb,n.StructArrayLayout1ui2=Wa,n.StructArrayLayout2f1f2i16=ei,n.StructArrayLayout2i4=fn,n.StructArrayLayout3ui6=Si,n.StructArrayLayout4i8=Vn,n.SymbolBucket=Ms,n.Texture=X1,n.Tile=xf,n.Transitionable=La,n.Uniform1f=$e,n.Uniform1i=Be,n.Uniform2f=ot,n.Uniform3f=Tt,n.Uniform4f=Lt,n.UniformColor=Pt,n.UniformMatrix4f=Nt,n.UnwrappedTileID=DJ,n.ValidationError=bi,n.WritingMode=Zv,n.ZoomHistory=Ye,n.add=kb,n.addDynamicAttributes=Q8,n.asyncAll=b,n.bezier=_,n.bindAll=D,n.browser=Re,n.cacheEntryPossiblyAdded=_n,n.clamp=g,n.clearTileCache=xn,n.clipLine=gJ,n.clone=Mb,n.clone$1=B,n.clone$2=R8,n.collisionCircleLayout=dJe,n.config=ze,n.create=Ab,n.create$1=Dc,n.create$2=Tb,n.createCommonjsModule=a,n.createExpression=$c,n.createLayout=Bn,n.createStyleLayer=MQe,n.cross=Oje,n.deepEqual=h,n.dot=zje,n.dot$1=Hje,n.ease=T,n.emitValidationErrors=Su,n.endsWith=z,n.enforceCacheSizeLimit=si,n.evaluateSizeForFeature=uJ,n.evaluateSizeForZoom=fJ,n.evaluateVariableOffset=xJ,n.evented=Fi,n.extend=x,n.featureFilter=Te,n.filterObject=V,n.fromRotation=qy,n.getAnchorAlignment=Z8,n.getAnchorJustification=J8,n.getArrayBuffer=pr,n.getImage=Mi,n.getJSON=tr,n.getRTLTextPluginStatus=xa,n.getReferrer=at,n.getVideo=Ui,n.identity=Sb,n.invert=zy,n.isChar=Pe,n.isMapboxURL=je,n.keysDifference=k,n.makeRequest=Ot,n.mapObject=O,n.mercatorXfromLng=LJ,n.mercatorYfromLat=PJ,n.mercatorZfromAltitude=RJ,n.mul=P8,n.multiply=Oy,n.mvt=Pb,n.nextPowerOfTwo=S,n.normalize=HT,n.number=zs,n.offscreenCanvasSupported=oi,n.ortho=L8,n.parseGlyphPBF=UJe,n.pbf=ak,n.performSymbolLayout=aQe,n.perspective=VT,n.pick=E,n.plugin=Po,n.polygonIntersectsPolygon=ua,n.postMapLoadEvent=Je,n.postTurnstileEvent=xt,n.potpack=tJ,n.refProperties=IQe,n.register=U,n.registerForPluginStateChange=Gi,n.renderColorRamp=DK,n.rotate=G1,n.rotateX=Bh,n.rotateZ=Eb,n.scale=Oh,n.scale$1=Vje,n.scale$2=I8,n.setCacheLimits=ci,n.setRTLTextPlugin=va,n.sphericalToCartesian=le,n.sqrLen=Wje,n.styleSpec=hn,n.sub=Nje,n.symbolSize=KJe,n.transformMat3=Bje,n.transformMat4=$5,n.translate=jl,n.triggerPluginCompletionEvent=Xn,n.uniqueId=d,n.validateCustomStyleLayer=wQe,n.validateLight=Ya,n.validateStyle=to,n.values=w,n.vectorTile=Pb,n.version=o,n.warnOnce=Z,n.webpSupported=et,n.window=c,n.wrap=A}),i(["./shared"],function(n){"use strict";function a(at){var Ne=typeof at;if(Ne==="number"||Ne==="boolean"||Ne==="string"||at===void 0||at===null)return JSON.stringify(at);if(Array.isArray(at)){for(var st="[",mt=0,Ot=at;mt<Ot.length;mt+=1){var tr=Ot[mt];st+=a(tr)+","}return st+"]"}for(var pr=Object.keys(at).sort(),hr="{",Rr=0;Rr<pr.length;Rr++)hr+=JSON.stringify(pr[Rr])+":"+a(at[pr[Rr]])+",";return hr+"}"}function o(at){for(var Ne="",st=0,mt=n.refProperties;st<mt.length;st+=1){var Ot=mt[st];Ne+="/"+a(at[Ot])}return Ne}function s(at,Ne){for(var st={},mt=0;mt<at.length;mt++){var Ot=Ne&&Ne[at[mt].id]||o(at[mt]);Ne&&(Ne[at[mt].id]=Ot);var tr=st[Ot];tr||(tr=st[Ot]=[]),tr.push(at[mt])}var pr=[];for(var hr in st)pr.push(st[hr]);return pr}var l=function(Ne){this.keyCache={},Ne&&this.replace(Ne)};l.prototype.replace=function(Ne){this._layerConfigs={},this._layers={},this.update(Ne,[])},l.prototype.update=function(Ne,st){for(var mt=this,Ot=0,tr=Ne;Ot<tr.length;Ot+=1){var pr=tr[Ot];this._layerConfigs[pr.id]=pr;var hr=this._layers[pr.id]=n.createStyleLayer(pr);hr._featureFilter=n.featureFilter(hr.filter),this.keyCache[pr.id]&&delete this.keyCache[pr.id]}for(var Rr=0,Gr=st;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr];delete this.keyCache[Yr],delete this._layerConfigs[Yr],delete this._layers[Yr]}this.familiesBySource={};for(var vn=s(n.values(this._layerConfigs),this.keyCache),Wr=0,qn=vn;Wr<qn.length;Wr+=1){var vi=qn[Wr],Mi=vi.map(function(Yn){return mt._layers[Yn.id]}),Ui=Mi[0];if(Ui.visibility!=="none"){var ji=Ui.source||"",ea=this.familiesBySource[ji];ea||(ea=this.familiesBySource[ji]={});var Ra=Ui.sourceLayer||"_geojsonTileLayer",Li=ea[Ra];Li||(Li=ea[Ra]=[]),Li.push(Mi)}}};var u=1,f=function(Ne){var st={},mt=[];for(var Ot in Ne){var tr=Ne[Ot],pr=st[Ot]={};for(var hr in tr){var Rr=tr[+hr];if(!(!Rr||Rr.bitmap.width===0||Rr.bitmap.height===0)){var Gr={x:0,y:0,w:Rr.bitmap.width+2*u,h:Rr.bitmap.height+2*u};mt.push(Gr),pr[hr]={rect:Gr,metrics:Rr.metrics}}}}var Yr=n.potpack(mt),vn=Yr.w,Wr=Yr.h,qn=new n.AlphaImage({width:vn||1,height:Wr||1});for(var vi in Ne){var Mi=Ne[vi];for(var Ui in Mi){var ji=Mi[+Ui];if(!(!ji||ji.bitmap.width===0||ji.bitmap.height===0)){var ea=st[vi][Ui].rect;n.AlphaImage.copy(ji.bitmap,qn,{x:0,y:0},{x:ea.x+u,y:ea.y+u},ji.bitmap)}}}this.image=qn,this.positions=st};n.register("GlyphAtlas",f);var c=function(Ne){this.tileID=new n.OverscaledTileID(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.uid=Ne.uid,this.zoom=Ne.zoom,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ne.showCollisionBoxes,this.collectResourceTiming=!!Ne.collectResourceTiming,this.returnDependencies=!!Ne.returnDependencies,this.promoteId=Ne.promoteId};c.prototype.parse=function(Ne,st,mt,Ot,tr){var pr=this;this.status="parsing",this.data=Ne,this.collisionBoxArray=new n.CollisionBoxArray;var hr=new n.DictionaryCoder(Object.keys(Ne.layers).sort()),Rr=new n.FeatureIndex(this.tileID,this.promoteId);Rr.bucketLayerIDs=[];var Gr={},Yr={featureIndex:Rr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:mt},vn=st.familiesBySource[this.source];for(var Wr in vn){var qn=Ne.layers[Wr];if(qn){qn.version===1&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+Wr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var vi=hr.encode(Wr),Mi=[],Ui=0;Ui<qn.length;Ui++){var ji=qn.feature(Ui),ea=Rr.getId(ji,Wr);Mi.push({feature:ji,id:ea,index:Ui,sourceLayerIndex:vi})}for(var Ra=0,Li=vn[Wr];Ra<Li.length;Ra+=1){var Yn=Li[Ra],zi=Yn[0];if(!(zi.minzoom&&this.zoom<Math.floor(zi.minzoom))&&!(zi.maxzoom&&this.zoom>=zi.maxzoom)&&zi.visibility!=="none"){h(Yn,this.zoom,mt);var ya=Gr[zi.id]=zi.createBucket({index:Rr.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vi,sourceID:this.source});ya.populate(Mi,Yr,this.tileID.canonical),Rr.bucketLayerIDs.push(Yn.map(function(Cr){return Cr.id}))}}}}var zn,Ze,Bt,sr,_r=n.mapObject(Yr.glyphDependencies,function(Cr){return Object.keys(Cr).map(Number)});Object.keys(_r).length?Ot.send("getGlyphs",{uid:this.uid,stacks:_r},function(Cr,cn){zn||(zn=Cr,Ze=cn,pn.call(pr))}):Ze={};var Jr=Object.keys(Yr.iconDependencies);Jr.length?Ot.send("getImages",{icons:Jr,source:this.source,tileID:this.tileID,type:"icons"},function(Cr,cn){zn||(zn=Cr,Bt=cn,pn.call(pr))}):Bt={};var on=Object.keys(Yr.patternDependencies);on.length?Ot.send("getImages",{icons:on,source:this.source,tileID:this.tileID,type:"patterns"},function(Cr,cn){zn||(zn=Cr,sr=cn,pn.call(pr))}):sr={},pn.call(this);function pn(){if(zn)return tr(zn);if(Ze&&Bt&&sr){var Cr=new f(Ze),cn=new n.ImageAtlas(Bt,sr);for(var gi in Gr){var Hn=Gr[gi];Hn instanceof n.SymbolBucket?(h(Hn.layers,this.zoom,mt),n.performSymbolLayout(Hn,Ze,Cr.positions,Bt,cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Hn.hasPattern&&(Hn instanceof n.LineBucket||Hn instanceof n.FillBucket||Hn instanceof n.FillExtrusionBucket)&&(h(Hn.layers,this.zoom,mt),Hn.addFeatures(Yr,this.tileID.canonical,cn.patternPositions))}this.status="done",tr(null,{buckets:n.values(Gr).filter(function(qi){return!qi.isEmpty()}),featureIndex:Rr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cr.image,imageAtlas:cn,glyphMap:this.returnDependencies?Ze:null,iconMap:this.returnDependencies?Bt:null,glyphPositions:this.returnDependencies?Cr.positions:null})}}};function h(at,Ne,st){for(var mt=new n.EvaluationParameters(Ne),Ot=0,tr=at;Ot<tr.length;Ot+=1){var pr=tr[Ot];pr.recalculate(mt,st)}}function v(at,Ne){var st=n.getArrayBuffer(at.request,function(mt,Ot,tr,pr){mt?Ne(mt):Ot&&Ne(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Ot)),rawData:Ot,cacheControl:tr,expires:pr})});return function(){st.cancel(),Ne()}}var p=function(Ne,st,mt,Ot){this.actor=Ne,this.layerIndex=st,this.availableImages=mt,this.loadVectorData=Ot||v,this.loading={},this.loaded={}};p.prototype.loadTile=function(Ne,st){var mt=this,Ot=Ne.uid;this.loading||(this.loading={});var tr=Ne&&Ne.request&&Ne.request.collectResourceTiming?new n.RequestPerformance(Ne.request):!1,pr=this.loading[Ot]=new c(Ne);pr.abort=this.loadVectorData(Ne,function(hr,Rr){if(delete mt.loading[Ot],hr||!Rr)return pr.status="done",mt.loaded[Ot]=pr,st(hr);var Gr=Rr.rawData,Yr={};Rr.expires&&(Yr.expires=Rr.expires),Rr.cacheControl&&(Yr.cacheControl=Rr.cacheControl);var vn={};if(tr){var Wr=tr.finish();Wr&&(vn.resourceTiming=JSON.parse(JSON.stringify(Wr)))}pr.vectorTile=Rr.vectorTile,pr.parse(Rr.vectorTile,mt.layerIndex,mt.availableImages,mt.actor,function(qn,vi){if(qn||!vi)return st(qn);st(null,n.extend({rawTileData:Gr.slice(0)},vi,Yr,vn))}),mt.loaded=mt.loaded||{},mt.loaded[Ot]=pr})},p.prototype.reloadTile=function(Ne,st){var mt=this,Ot=this.loaded,tr=Ne.uid,pr=this;if(Ot&&Ot[tr]){var hr=Ot[tr];hr.showCollisionBoxes=Ne.showCollisionBoxes;var Rr=function(Gr,Yr){var vn=hr.reloadCallback;vn&&(delete hr.reloadCallback,hr.parse(hr.vectorTile,pr.layerIndex,mt.availableImages,pr.actor,vn)),st(Gr,Yr)};hr.status==="parsing"?hr.reloadCallback=Rr:hr.status==="done"&&(hr.vectorTile?hr.parse(hr.vectorTile,this.layerIndex,this.availableImages,this.actor,Rr):Rr())}},p.prototype.abortTile=function(Ne,st){var mt=this.loading,Ot=Ne.uid;mt&&mt[Ot]&&mt[Ot].abort&&(mt[Ot].abort(),delete mt[Ot]),st()},p.prototype.removeTile=function(Ne,st){var mt=this.loaded,Ot=Ne.uid;mt&&mt[Ot]&&delete mt[Ot],st()};var _=n.window.ImageBitmap,T=function(){this.loaded={}};T.prototype.loadTile=function(Ne,st){var mt=Ne.uid,Ot=Ne.encoding,tr=Ne.rawImageData,pr=_&&tr instanceof _?this.getImageData(tr):tr,hr=new n.DEMData(mt,pr,Ot);this.loaded=this.loaded||{},this.loaded[mt]=hr,st(null,hr)},T.prototype.getImageData=function(Ne){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Ne.width,Ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ne.width,this.offscreenCanvas.height=Ne.height,this.offscreenCanvasContext.drawImage(Ne,0,0,Ne.width,Ne.height);var st=this.offscreenCanvasContext.getImageData(-1,-1,Ne.width+2,Ne.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:st.width,height:st.height},st.data)},T.prototype.removeTile=function(Ne){var st=this.loaded,mt=Ne.uid;st&&st[mt]&&delete st[mt]};var g=A;function A(at,Ne){var st=at&&at.type,mt;if(st==="FeatureCollection")for(mt=0;mt<at.features.length;mt++)A(at.features[mt],Ne);else if(st==="GeometryCollection")for(mt=0;mt<at.geometries.length;mt++)A(at.geometries[mt],Ne);else if(st==="Feature")A(at.geometry,Ne);else if(st==="Polygon")b(at.coordinates,Ne);else if(st==="MultiPolygon")for(mt=0;mt<at.coordinates.length;mt++)b(at.coordinates[mt],Ne);return at}function b(at,Ne){if(at.length!==0){w(at[0],Ne);for(var st=1;st<at.length;st++)w(at[st],!Ne)}}function w(at,Ne){for(var st=0,mt=0,Ot=at.length,tr=Ot-1;mt<Ot;tr=mt++)st+=(at[mt][0]-at[tr][0])*(at[tr][1]+at[mt][1]);st>=0!=!!Ne&&at.reverse()}var k=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(Ne){this._feature=Ne,this.extent=n.EXTENT,this.type=Ne.type,this.properties=Ne.tags,"id"in Ne&&!isNaN(Ne.id)&&(this.id=parseInt(Ne.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ne=[],st=0,mt=this._feature.geometry;st<mt.length;st+=1){var Ot=mt[st];Ne.push([new n.Point$1(Ot[0],Ot[1])])}return Ne}else{for(var tr=[],pr=0,hr=this._feature.geometry;pr<hr.length;pr+=1){for(var Rr=hr[pr],Gr=[],Yr=0,vn=Rr;Yr<vn.length;Yr+=1){var Wr=vn[Yr];Gr.push(new n.Point$1(Wr[0],Wr[1]))}tr.push(Gr)}return tr}},x.prototype.toGeoJSON=function(Ne,st,mt){return k.call(this,Ne,st,mt)};var E=function(Ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=Ne.length,this._features=Ne};E.prototype.feature=function(Ne){return new x(this._features[Ne])};var M=n.vectorTile.VectorTileFeature,d=C;function C(at,Ne){this.options=Ne||{},this.features=at,this.length=at.length}C.prototype.feature=function(at){return new S(this.features[at],this.options.extent)};function S(at,Ne){this.id=typeof at.id=="number"?at.id:void 0,this.type=at.type,this.rawGeometry=at.type===1?[at.geometry]:at.geometry,this.properties=at.tags,this.extent=Ne||4096}S.prototype.loadGeometry=function(){var at=this.rawGeometry;this.geometry=[];for(var Ne=0;Ne<at.length;Ne++){for(var st=at[Ne],mt=[],Ot=0;Ot<st.length;Ot++)mt.push(new n.Point$1(st[Ot][0],st[Ot][1]));this.geometry.push(mt)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var at=this.geometry,Ne=1/0,st=-1/0,mt=1/0,Ot=-1/0,tr=0;tr<at.length;tr++)for(var pr=at[tr],hr=0;hr<pr.length;hr++){var Rr=pr[hr];Ne=Math.min(Ne,Rr.x),st=Math.max(st,Rr.x),mt=Math.min(mt,Rr.y),Ot=Math.max(Ot,Rr.y)}return[Ne,mt,st,Ot]},S.prototype.toGeoJSON=M.prototype.toGeoJSON;var P=V,D=V,z=B,O=d;function V(at){var Ne=new n.pbf;return F(at,Ne),Ne.finish()}function B(at,Ne){Ne=Ne||{};var st={};for(var mt in at)st[mt]=new d(at[mt].features,Ne),st[mt].name=mt,st[mt].version=Ne.version,st[mt].extent=Ne.extent;return V({layers:st})}function F(at,Ne){for(var st in at.layers)Ne.writeMessage(3,N,at.layers[st])}function N(at,Ne){Ne.writeVarintField(15,at.version||1),Ne.writeStringField(1,at.name||""),Ne.writeVarintField(5,at.extent||4096);var st,mt={keys:[],values:[],keycache:{},valuecache:{}};for(st=0;st<at.length;st++)mt.feature=at.feature(st),Ne.writeMessage(2,Z,mt);var Ot=mt.keys;for(st=0;st<Ot.length;st++)Ne.writeStringField(3,Ot[st]);var tr=mt.values;for(st=0;st<tr.length;st++)Ne.writeMessage(4,K,tr[st])}function Z(at,Ne){var st=at.feature;st.id!==void 0&&Ne.writeVarintField(1,st.id),Ne.writeMessage(2,J,at),Ne.writeVarintField(3,st.type),Ne.writeMessage(4,fe,st)}function J(at,Ne){var st=at.feature,mt=at.keys,Ot=at.values,tr=at.keycache,pr=at.valuecache;for(var hr in st.properties){var Rr=tr[hr];typeof Rr=="undefined"&&(mt.push(hr),Rr=mt.length-1,tr[hr]=Rr),Ne.writeVarint(Rr);var Gr=st.properties[hr],Yr=typeof Gr;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(Gr=JSON.stringify(Gr));var vn=Yr+":"+Gr,Wr=pr[vn];typeof Wr=="undefined"&&(Ot.push(Gr),Wr=Ot.length-1,pr[vn]=Wr),Ne.writeVarint(Wr)}}function re(at,Ne){return(Ne<<3)+(at&7)}function le(at){return at<<1^at>>31}function fe(at,Ne){for(var st=at.loadGeometry(),mt=at.type,Ot=0,tr=0,pr=st.length,hr=0;hr<pr;hr++){var Rr=st[hr],Gr=1;mt===1&&(Gr=Rr.length),Ne.writeVarint(re(1,Gr));for(var Yr=mt===3?Rr.length-1:Rr.length,vn=0;vn<Yr;vn++){vn===1&&mt!==1&&Ne.writeVarint(re(2,Yr-1));var Wr=Rr[vn].x-Ot,qn=Rr[vn].y-tr;Ne.writeVarint(le(Wr)),Ne.writeVarint(le(qn)),Ot+=Wr,tr+=qn}mt===3&&Ne.writeVarint(re(7,1))}}function K(at,Ne){var st=typeof at;st==="string"?Ne.writeStringField(1,at):st==="boolean"?Ne.writeBooleanField(7,at):st==="number"&&(at%1!==0?Ne.writeDoubleField(3,at):at<0?Ne.writeSVarintField(6,at):Ne.writeVarintField(5,at))}P.fromVectorTileJs=D,P.fromGeojsonVt=z,P.GeoJSONWrapper=O;function X(at,Ne,st,mt,Ot,tr){if(!(Ot-mt<=st)){var pr=mt+Ot>>1;ae(at,Ne,pr,mt,Ot,tr%2),X(at,Ne,st,mt,pr-1,tr+1),X(at,Ne,st,pr+1,Ot,tr+1)}}function ae(at,Ne,st,mt,Ot,tr){for(;Ot>mt;){if(Ot-mt>600){var pr=Ot-mt+1,hr=st-mt+1,Rr=Math.log(pr),Gr=.5*Math.exp(2*Rr/3),Yr=.5*Math.sqrt(Rr*Gr*(pr-Gr)/pr)*(hr-pr/2<0?-1:1),vn=Math.max(mt,Math.floor(st-hr*Gr/pr+Yr)),Wr=Math.min(Ot,Math.floor(st+(pr-hr)*Gr/pr+Yr));ae(at,Ne,st,vn,Wr,tr)}var qn=Ne[2*st+tr],vi=mt,Mi=Ot;for(oe(at,Ne,mt,st),Ne[2*Ot+tr]>qn&&oe(at,Ne,mt,Ot);vi<Mi;){for(oe(at,Ne,vi,Mi),vi++,Mi--;Ne[2*vi+tr]<qn;)vi++;for(;Ne[2*Mi+tr]>qn;)Mi--}Ne[2*mt+tr]===qn?oe(at,Ne,mt,Mi):(Mi++,oe(at,Ne,Mi,Ot)),Mi<=st&&(mt=Mi+1),st<=Mi&&(Ot=Mi-1)}}function oe(at,Ne,st,mt){_e(at,st,mt),_e(Ne,2*st,2*mt),_e(Ne,2*st+1,2*mt+1)}function _e(at,Ne,st){var mt=at[Ne];at[Ne]=at[st],at[st]=mt}function be(at,Ne,st,mt,Ot,tr,pr){for(var hr=[0,at.length-1,0],Rr=[],Gr,Yr;hr.length;){var vn=hr.pop(),Wr=hr.pop(),qn=hr.pop();if(Wr-qn<=pr){for(var vi=qn;vi<=Wr;vi++)Gr=Ne[2*vi],Yr=Ne[2*vi+1],Gr>=st&&Gr<=Ot&&Yr>=mt&&Yr<=tr&&Rr.push(at[vi]);continue}var Mi=Math.floor((qn+Wr)/2);Gr=Ne[2*Mi],Yr=Ne[2*Mi+1],Gr>=st&&Gr<=Ot&&Yr>=mt&&Yr<=tr&&Rr.push(at[Mi]);var Ui=(vn+1)%2;(vn===0?st<=Gr:mt<=Yr)&&(hr.push(qn),hr.push(Mi-1),hr.push(Ui)),(vn===0?Ot>=Gr:tr>=Yr)&&(hr.push(Mi+1),hr.push(Wr),hr.push(Ui))}return Rr}function he(at,Ne,st,mt,Ot,tr){for(var pr=[0,at.length-1,0],hr=[],Rr=Ot*Ot;pr.length;){var Gr=pr.pop(),Yr=pr.pop(),vn=pr.pop();if(Yr-vn<=tr){for(var Wr=vn;Wr<=Yr;Wr++)ie(Ne[2*Wr],Ne[2*Wr+1],st,mt)<=Rr&&hr.push(at[Wr]);continue}var qn=Math.floor((vn+Yr)/2),vi=Ne[2*qn],Mi=Ne[2*qn+1];ie(vi,Mi,st,mt)<=Rr&&hr.push(at[qn]);var Ui=(Gr+1)%2;(Gr===0?st-Ot<=vi:mt-Ot<=Mi)&&(pr.push(vn),pr.push(qn-1),pr.push(Ui)),(Gr===0?st+Ot>=vi:mt+Ot>=Mi)&&(pr.push(qn+1),pr.push(Yr),pr.push(Ui))}return hr}function ie(at,Ne,st,mt){var Ot=at-st,tr=Ne-mt;return Ot*Ot+tr*tr}var ye=function(at){return at[0]},ue=function(at){return at[1]},Ae=function(Ne,st,mt,Ot,tr){st===void 0&&(st=ye),mt===void 0&&(mt=ue),Ot===void 0&&(Ot=64),tr===void 0&&(tr=Float64Array),this.nodeSize=Ot,this.points=Ne;for(var pr=Ne.length<65536?Uint16Array:Uint32Array,hr=this.ids=new pr(Ne.length),Rr=this.coords=new tr(Ne.length*2),Gr=0;Gr<Ne.length;Gr++)hr[Gr]=Gr,Rr[2*Gr]=st(Ne[Gr]),Rr[2*Gr+1]=mt(Ne[Gr]);X(hr,Rr,Ot,0,hr.length-1,0)};Ae.prototype.range=function(Ne,st,mt,Ot){return be(this.ids,this.coords,Ne,st,mt,Ot,this.nodeSize)},Ae.prototype.within=function(Ne,st,mt){return he(this.ids,this.coords,Ne,st,mt,this.nodeSize)};var Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(at){return at}},ze=function(Ne){this.options=Et(Object.create(Re),Ne),this.trees=new Array(this.options.maxZoom+1)};ze.prototype.load=function(Ne){var st=this.options,mt=st.log,Ot=st.minZoom,tr=st.maxZoom,pr=st.nodeSize;mt&&console.time("total time");var hr="prepare "+Ne.length+" points";mt&&console.time(hr),this.points=Ne;for(var Rr=[],Gr=0;Gr<Ne.length;Gr++)Ne[Gr].geometry&&Rr.push(Le(Ne[Gr],Gr));this.trees[tr+1]=new Ae(Rr,Se,je,pr,Float32Array),mt&&console.timeEnd(hr);for(var Yr=tr;Yr>=Ot;Yr--){var vn=+Date.now();Rr=this._cluster(Rr,Yr),this.trees[Yr]=new Ae(Rr,Se,je,pr,Float32Array),mt&&console.log("z%d: %d clusters in %dms",Yr,Rr.length,+Date.now()-vn)}return mt&&console.timeEnd("total time"),this},ze.prototype.getClusters=function(Ne,st){var mt=((Ne[0]+180)%360+360)%360-180,Ot=Math.max(-90,Math.min(90,Ne[1])),tr=Ne[2]===180?180:((Ne[2]+180)%360+360)%360-180,pr=Math.max(-90,Math.min(90,Ne[3]));if(Ne[2]-Ne[0]>=360)mt=-180,tr=180;else if(mt>tr){var hr=this.getClusters([mt,Ot,180,pr],st),Rr=this.getClusters([-180,Ot,tr,pr],st);return hr.concat(Rr)}for(var Gr=this.trees[this._limitZoom(st)],Yr=Gr.range(ct(mt),Ke(pr),ct(tr),Ke(Ot)),vn=[],Wr=0,qn=Yr;Wr<qn.length;Wr+=1){var vi=qn[Wr],Mi=Gr.points[vi];vn.push(Mi.numPoints?Ie(Mi):this.points[Mi.index])}return vn},ze.prototype.getChildren=function(Ne){var st=this._getOriginId(Ne),mt=this._getOriginZoom(Ne),Ot="No cluster with the specified id.",tr=this.trees[mt];if(!tr)throw new Error(Ot);var pr=tr.points[st];if(!pr)throw new Error(Ot);for(var hr=this.options.radius/(this.options.extent*Math.pow(2,mt-1)),Rr=tr.within(pr.x,pr.y,hr),Gr=[],Yr=0,vn=Rr;Yr<vn.length;Yr+=1){var Wr=vn[Yr],qn=tr.points[Wr];qn.parentId===Ne&&Gr.push(qn.numPoints?Ie(qn):this.points[qn.index])}if(Gr.length===0)throw new Error(Ot);return Gr},ze.prototype.getLeaves=function(Ne,st,mt){st=st||10,mt=mt||0;var Ot=[];return this._appendLeaves(Ot,Ne,st,mt,0),Ot},ze.prototype.getTile=function(Ne,st,mt){var Ot=this.trees[this._limitZoom(Ne)],tr=Math.pow(2,Ne),pr=this.options,hr=pr.extent,Rr=pr.radius,Gr=Rr/hr,Yr=(mt-Gr)/tr,vn=(mt+1+Gr)/tr,Wr={features:[]};return this._addTileFeatures(Ot.range((st-Gr)/tr,Yr,(st+1+Gr)/tr,vn),Ot.points,st,mt,tr,Wr),st===0&&this._addTileFeatures(Ot.range(1-Gr/tr,Yr,1,vn),Ot.points,tr,mt,tr,Wr),st===tr-1&&this._addTileFeatures(Ot.range(0,Yr,Gr/tr,vn),Ot.points,-1,mt,tr,Wr),Wr.features.length?Wr:null},ze.prototype.getClusterExpansionZoom=function(Ne){for(var st=this._getOriginZoom(Ne)-1;st<=this.options.maxZoom;){var mt=this.getChildren(Ne);if(st++,mt.length!==1)break;Ne=mt[0].properties.cluster_id}return st},ze.prototype._appendLeaves=function(Ne,st,mt,Ot,tr){for(var pr=this.getChildren(st),hr=0,Rr=pr;hr<Rr.length;hr+=1){var Gr=Rr[hr],Yr=Gr.properties;if(Yr&&Yr.cluster?tr+Yr.point_count<=Ot?tr+=Yr.point_count:tr=this._appendLeaves(Ne,Yr.cluster_id,mt,Ot,tr):tr<Ot?tr++:Ne.push(Gr),Ne.length===mt)break}return tr},ze.prototype._addTileFeatures=function(Ne,st,mt,Ot,tr,pr){for(var hr=0,Rr=Ne;hr<Rr.length;hr+=1){var Gr=Rr[hr],Yr=st[Gr],vn=Yr.numPoints,Wr={type:1,geometry:[[Math.round(this.options.extent*(Yr.x*tr-mt)),Math.round(this.options.extent*(Yr.y*tr-Ot))]],tags:vn?dt(Yr):this.points[Yr.index].properties},qn=void 0;vn?qn=Yr.id:this.options.generateId?qn=Yr.index:this.points[Yr.index].id&&(qn=this.points[Yr.index].id),qn!==void 0&&(Wr.id=qn),pr.features.push(Wr)}},ze.prototype._limitZoom=function(Ne){return Math.max(this.options.minZoom,Math.min(+Ne,this.options.maxZoom+1))},ze.prototype._cluster=function(Ne,st){for(var mt=[],Ot=this.options,tr=Ot.radius,pr=Ot.extent,hr=Ot.reduce,Rr=Ot.minPoints,Gr=tr/(pr*Math.pow(2,st)),Yr=0;Yr<Ne.length;Yr++){var vn=Ne[Yr];if(!(vn.zoom<=st)){vn.zoom=st;for(var Wr=this.trees[st+1],qn=Wr.within(vn.x,vn.y,Gr),vi=vn.numPoints||1,Mi=vi,Ui=0,ji=qn;Ui<ji.length;Ui+=1){var ea=ji[Ui],Ra=Wr.points[ea];Ra.zoom>st&&(Mi+=Ra.numPoints||1)}if(Mi>=Rr){for(var Li=vn.x*vi,Yn=vn.y*vi,zi=hr&&vi>1?this._map(vn,!0):null,ya=(Yr<<5)+(st+1)+this.points.length,zn=0,Ze=qn;zn<Ze.length;zn+=1){var Bt=Ze[zn],sr=Wr.points[Bt];if(!(sr.zoom<=st)){sr.zoom=st;var _r=sr.numPoints||1;Li+=sr.x*_r,Yn+=sr.y*_r,sr.parentId=ya,hr&&(zi||(zi=this._map(vn,!0)),hr(zi,this._map(sr)))}}vn.parentId=ya,mt.push(et(Li/Mi,Yn/Mi,ya,Mi,zi))}else if(mt.push(vn),Mi>1)for(var Jr=0,on=qn;Jr<on.length;Jr+=1){var pn=on[Jr],Cr=Wr.points[pn];Cr.zoom<=st||(Cr.zoom=st,mt.push(Cr))}}}return mt},ze.prototype._getOriginId=function(Ne){return Ne-this.points.length>>5},ze.prototype._getOriginZoom=function(Ne){return(Ne-this.points.length)%32},ze.prototype._map=function(Ne,st){if(Ne.numPoints)return st?Et({},Ne.properties):Ne.properties;var mt=this.points[Ne.index].properties,Ot=this.options.map(mt);return st&&Ot===mt?Et({},Ot):Ot};function et(at,Ne,st,mt,Ot){return{x:at,y:Ne,zoom:1/0,id:st,parentId:-1,numPoints:mt,properties:Ot}}function Le(at,Ne){var st=at.geometry.coordinates,mt=st[0],Ot=st[1];return{x:ct(mt),y:Ke(Ot),zoom:1/0,index:Ne,parentId:-1}}function Ie(at){return{type:"Feature",id:at.id,properties:dt(at),geometry:{type:"Point",coordinates:[_t(at.x),zt(at.y)]}}}function dt(at){var Ne=at.numPoints,st=Ne>=1e4?Math.round(Ne/1e3)+"k":Ne>=1e3?Math.round(Ne/100)/10+"k":Ne;return Et(Et({},at.properties),{cluster:!0,cluster_id:at.id,point_count:Ne,point_count_abbreviated:st})}function ct(at){return at/360+.5}function Ke(at){var Ne=Math.sin(at*Math.PI/180),st=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return st<0?0:st>1?1:st}function _t(at){return(at-.5)*360}function zt(at){var Ne=(180-at*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ne))/Math.PI-90}function Et(at,Ne){for(var st in Ne)at[st]=Ne[st];return at}function Se(at){return at.x}function je(at){return at.y}function ht(at,Ne,st,mt){for(var Ot=mt,tr=st-Ne>>1,pr=st-Ne,hr,Rr=at[Ne],Gr=at[Ne+1],Yr=at[st],vn=at[st+1],Wr=Ne+3;Wr<st;Wr+=3){var qn=nt(at[Wr],at[Wr+1],Rr,Gr,Yr,vn);if(qn>Ot)hr=Wr,Ot=qn;else if(qn===Ot){var vi=Math.abs(Wr-tr);vi<pr&&(hr=Wr,pr=vi)}}Ot>mt&&(hr-Ne>3&&ht(at,Ne,hr,mt),at[hr+2]=Ot,st-hr>3&&ht(at,hr,st,mt))}function nt(at,Ne,st,mt,Ot,tr){var pr=Ot-st,hr=tr-mt;if(pr!==0||hr!==0){var Rr=((at-st)*pr+(Ne-mt)*hr)/(pr*pr+hr*hr);Rr>1?(st=Ot,mt=tr):Rr>0&&(st+=pr*Rr,mt+=hr*Rr)}return pr=at-st,hr=Ne-mt,pr*pr+hr*hr}function lt(at,Ne,st,mt){var Ot={id:typeof at=="undefined"?null:at,type:Ne,geometry:st,tags:mt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return rt(Ot),Ot}function rt(at){var Ne=at.geometry,st=at.type;if(st==="Point"||st==="MultiPoint"||st==="LineString")Xe(at,Ne);else if(st==="Polygon"||st==="MultiLineString")for(var mt=0;mt<Ne.length;mt++)Xe(at,Ne[mt]);else if(st==="MultiPolygon")for(mt=0;mt<Ne.length;mt++)for(var Ot=0;Ot<Ne[mt].length;Ot++)Xe(at,Ne[mt][Ot])}function Xe(at,Ne){for(var st=0;st<Ne.length;st+=3)at.minX=Math.min(at.minX,Ne[st]),at.minY=Math.min(at.minY,Ne[st+1]),at.maxX=Math.max(at.maxX,Ne[st]),at.maxY=Math.max(at.maxY,Ne[st+1])}function ft(at,Ne){var st=[];if(at.type==="FeatureCollection")for(var mt=0;mt<at.features.length;mt++)gt(st,at.features[mt],Ne,mt);else at.type==="Feature"?gt(st,at,Ne):gt(st,{geometry:at},Ne);return st}function gt(at,Ne,st,mt){if(Ne.geometry){var Ot=Ne.geometry.coordinates,tr=Ne.geometry.type,pr=Math.pow(st.tolerance/((1<<st.maxZoom)*st.extent),2),hr=[],Rr=Ne.id;if(st.promoteId?Rr=Ne.properties[st.promoteId]:st.generateId&&(Rr=mt||0),tr==="Point")Qt(Ot,hr);else if(tr==="MultiPoint")for(var Gr=0;Gr<Ot.length;Gr++)Qt(Ot[Gr],hr);else if(tr==="LineString")Jt(Ot,hr,pr,!1);else if(tr==="MultiLineString")if(st.lineMetrics){for(Gr=0;Gr<Ot.length;Gr++)hr=[],Jt(Ot[Gr],hr,pr,!1),at.push(lt(Rr,"LineString",hr,Ne.properties));return}else fr(Ot,hr,pr,!1);else if(tr==="Polygon")fr(Ot,hr,pr,!0);else if(tr==="MultiPolygon")for(Gr=0;Gr<Ot.length;Gr++){var Yr=[];fr(Ot[Gr],Yr,pr,!0),hr.push(Yr)}else if(tr==="GeometryCollection"){for(Gr=0;Gr<Ne.geometry.geometries.length;Gr++)gt(at,{id:Rr,geometry:Ne.geometry.geometries[Gr],properties:Ne.properties},st,mt);return}else throw new Error("Input data is not a valid GeoJSON object.");at.push(lt(Rr,tr,hr,Ne.properties))}}function Qt(at,Ne){Ne.push(nr(at[0])),Ne.push(ur(at[1])),Ne.push(0)}function Jt(at,Ne,st,mt){for(var Ot,tr,pr=0,hr=0;hr<at.length;hr++){var Rr=nr(at[hr][0]),Gr=ur(at[hr][1]);Ne.push(Rr),Ne.push(Gr),Ne.push(0),hr>0&&(mt?pr+=(Ot*Gr-Rr*tr)/2:pr+=Math.sqrt(Math.pow(Rr-Ot,2)+Math.pow(Gr-tr,2))),Ot=Rr,tr=Gr}var Yr=Ne.length-3;Ne[2]=1,ht(Ne,0,Yr,st),Ne[Yr+2]=1,Ne.size=Math.abs(pr),Ne.start=0,Ne.end=Ne.size}function fr(at,Ne,st,mt){for(var Ot=0;Ot<at.length;Ot++){var tr=[];Jt(at[Ot],tr,st,mt),Ne.push(tr)}}function nr(at){return at/360+.5}function ur(at){var Ne=Math.sin(at*Math.PI/180),st=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return st<0?0:st>1?1:st}function qt(at,Ne,st,mt,Ot,tr,pr,hr){if(st/=Ne,mt/=Ne,tr>=st&&pr<mt)return at;if(pr<st||tr>=mt)return null;for(var Rr=[],Gr=0;Gr<at.length;Gr++){var Yr=at[Gr],vn=Yr.geometry,Wr=Yr.type,qn=Ot===0?Yr.minX:Yr.minY,vi=Ot===0?Yr.maxX:Yr.maxY;if(qn>=st&&vi<mt){Rr.push(Yr);continue}else if(vi<st||qn>=mt)continue;var Mi=[];if(Wr==="Point"||Wr==="MultiPoint")xt(vn,Mi,st,mt,Ot);else if(Wr==="LineString")At(vn,Mi,st,mt,Ot,!1,hr.lineMetrics);else if(Wr==="MultiLineString")xe(vn,Mi,st,mt,Ot,!1);else if(Wr==="Polygon")xe(vn,Mi,st,mt,Ot,!0);else if(Wr==="MultiPolygon")for(var Ui=0;Ui<vn.length;Ui++){var ji=[];xe(vn[Ui],ji,st,mt,Ot,!0),ji.length&&Mi.push(ji)}if(Mi.length){if(hr.lineMetrics&&Wr==="LineString"){for(Ui=0;Ui<Mi.length;Ui++)Rr.push(lt(Yr.id,Wr,Mi[Ui],Yr.tags));continue}(Wr==="LineString"||Wr==="MultiLineString")&&(Mi.length===1?(Wr="LineString",Mi=Mi[0]):Wr="MultiLineString"),(Wr==="Point"||Wr==="MultiPoint")&&(Wr=Mi.length===3?"Point":"MultiPoint"),Rr.push(lt(Yr.id,Wr,Mi,Yr.tags))}}return Rr.length?Rr:null}function xt(at,Ne,st,mt,Ot){for(var tr=0;tr<at.length;tr+=3){var pr=at[tr+Ot];pr>=st&&pr<=mt&&(Ne.push(at[tr]),Ne.push(at[tr+1]),Ne.push(at[tr+2]))}}function At(at,Ne,st,mt,Ot,tr,pr){for(var hr=Je(at),Rr=Ot===0?ge:qe,Gr=at.start,Yr,vn,Wr=0;Wr<at.length-3;Wr+=3){var qn=at[Wr],vi=at[Wr+1],Mi=at[Wr+2],Ui=at[Wr+3],ji=at[Wr+4],ea=Ot===0?qn:vi,Ra=Ot===0?Ui:ji,Li=!1;pr&&(Yr=Math.sqrt(Math.pow(qn-Ui,2)+Math.pow(vi-ji,2))),ea<st?Ra>st&&(vn=Rr(hr,qn,vi,Ui,ji,st),pr&&(hr.start=Gr+Yr*vn)):ea>mt?Ra<mt&&(vn=Rr(hr,qn,vi,Ui,ji,mt),pr&&(hr.start=Gr+Yr*vn)):ce(hr,qn,vi,Mi),Ra<st&&ea>=st&&(vn=Rr(hr,qn,vi,Ui,ji,st),Li=!0),Ra>mt&&ea<=mt&&(vn=Rr(hr,qn,vi,Ui,ji,mt),Li=!0),!tr&&Li&&(pr&&(hr.end=Gr+Yr*vn),Ne.push(hr),hr=Je(at)),pr&&(Gr+=Yr)}var Yn=at.length-3;qn=at[Yn],vi=at[Yn+1],Mi=at[Yn+2],ea=Ot===0?qn:vi,ea>=st&&ea<=mt&&ce(hr,qn,vi,Mi),Yn=hr.length-3,tr&&Yn>=3&&(hr[Yn]!==hr[0]||hr[Yn+1]!==hr[1])&&ce(hr,hr[0],hr[1],hr[2]),hr.length&&Ne.push(hr)}function Je(at){var Ne=[];return Ne.size=at.size,Ne.start=at.start,Ne.end=at.end,Ne}function xe(at,Ne,st,mt,Ot,tr){for(var pr=0;pr<at.length;pr++)At(at[pr],Ne,st,mt,Ot,tr,!1)}function ce(at,Ne,st,mt){at.push(Ne),at.push(st),at.push(mt)}function ge(at,Ne,st,mt,Ot,tr){var pr=(tr-Ne)/(mt-Ne);return at.push(tr),at.push(st+(Ot-st)*pr),at.push(1),pr}function qe(at,Ne,st,mt,Ot,tr){var pr=(tr-st)/(Ot-st);return at.push(Ne+(mt-Ne)*pr),at.push(tr),at.push(1),pr}function yt(at,Ne){var st=Ne.buffer/Ne.extent,mt=at,Ot=qt(at,1,-1-st,st,0,-1,2,Ne),tr=qt(at,1,1-st,2+st,0,-1,2,Ne);return(Ot||tr)&&(mt=qt(at,1,-st,1+st,0,-1,2,Ne)||[],Ot&&(mt=Vt(Ot,1).concat(mt)),tr&&(mt=mt.concat(Vt(tr,-1)))),mt}function Vt(at,Ne){for(var st=[],mt=0;mt<at.length;mt++){var Ot=at[mt],tr=Ot.type,pr;if(tr==="Point"||tr==="MultiPoint"||tr==="LineString")pr=Ut(Ot.geometry,Ne);else if(tr==="MultiLineString"||tr==="Polygon"){pr=[];for(var hr=0;hr<Ot.geometry.length;hr++)pr.push(Ut(Ot.geometry[hr],Ne))}else if(tr==="MultiPolygon")for(pr=[],hr=0;hr<Ot.geometry.length;hr++){for(var Rr=[],Gr=0;Gr<Ot.geometry[hr].length;Gr++)Rr.push(Ut(Ot.geometry[hr][Gr],Ne));pr.push(Rr)}st.push(lt(Ot.id,tr,pr,Ot.tags))}return st}function Ut(at,Ne){var st=[];st.size=at.size,at.start!==void 0&&(st.start=at.start,st.end=at.end);for(var mt=0;mt<at.length;mt+=3)st.push(at[mt]+Ne,at[mt+1],at[mt+2]);return st}function br(at,Ne){if(at.transformed)return at;var st=1<<at.z,mt=at.x,Ot=at.y,tr,pr,hr;for(tr=0;tr<at.features.length;tr++){var Rr=at.features[tr],Gr=Rr.geometry,Yr=Rr.type;if(Rr.geometry=[],Yr===1)for(pr=0;pr<Gr.length;pr+=2)Rr.geometry.push(xr(Gr[pr],Gr[pr+1],Ne,st,mt,Ot));else for(pr=0;pr<Gr.length;pr++){var vn=[];for(hr=0;hr<Gr[pr].length;hr+=2)vn.push(xr(Gr[pr][hr],Gr[pr][hr+1],Ne,st,mt,Ot));Rr.geometry.push(vn)}}return at.transformed=!0,at}function xr(at,Ne,st,mt,Ot,tr){return[Math.round(st*(at*mt-Ot)),Math.round(st*(Ne*mt-tr))]}function Or(at,Ne,st,mt,Ot){for(var tr=Ne===Ot.maxZoom?0:Ot.tolerance/((1<<Ne)*Ot.extent),pr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:st,y:mt,z:Ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},hr=0;hr<at.length;hr++){pr.numFeatures++,Hr(pr,at[hr],tr,Ot);var Rr=at[hr].minX,Gr=at[hr].minY,Yr=at[hr].maxX,vn=at[hr].maxY;Rr<pr.minX&&(pr.minX=Rr),Gr<pr.minY&&(pr.minY=Gr),Yr>pr.maxX&&(pr.maxX=Yr),vn>pr.maxY&&(pr.maxY=vn)}return pr}function Hr(at,Ne,st,mt){var Ot=Ne.geometry,tr=Ne.type,pr=[];if(tr==="Point"||tr==="MultiPoint")for(var hr=0;hr<Ot.length;hr+=3)pr.push(Ot[hr]),pr.push(Ot[hr+1]),at.numPoints++,at.numSimplified++;else if(tr==="LineString")gr(pr,Ot,at,st,!1,!1);else if(tr==="MultiLineString"||tr==="Polygon")for(hr=0;hr<Ot.length;hr++)gr(pr,Ot[hr],at,st,tr==="Polygon",hr===0);else if(tr==="MultiPolygon")for(var Rr=0;Rr<Ot.length;Rr++){var Gr=Ot[Rr];for(hr=0;hr<Gr.length;hr++)gr(pr,Gr[hr],at,st,!0,hr===0)}if(pr.length){var Yr=Ne.tags||null;if(tr==="LineString"&&mt.lineMetrics){Yr={};for(var vn in Ne.tags)Yr[vn]=Ne.tags[vn];Yr.mapbox_clip_start=Ot.start/Ot.size,Yr.mapbox_clip_end=Ot.end/Ot.size}var Wr={geometry:pr,type:tr==="Polygon"||tr==="MultiPolygon"?3:tr==="LineString"||tr==="MultiLineString"?2:1,tags:Yr};Ne.id!==null&&(Wr.id=Ne.id),at.features.push(Wr)}}function gr(at,Ne,st,mt,Ot,tr){var pr=mt*mt;if(mt>0&&Ne.size<(Ot?pr:mt)){st.numPoints+=Ne.length/3;return}for(var hr=[],Rr=0;Rr<Ne.length;Rr+=3)(mt===0||Ne[Rr+2]>pr)&&(st.numSimplified++,hr.push(Ne[Rr]),hr.push(Ne[Rr+1])),st.numPoints++;Ot&&Ur(hr,tr),at.push(hr)}function Ur(at,Ne){for(var st=0,mt=0,Ot=at.length,tr=Ot-2;mt<Ot;tr=mt,mt+=2)st+=(at[mt]-at[tr])*(at[mt+1]+at[tr+1]);if(st>0===Ne)for(mt=0,Ot=at.length;mt<Ot/2;mt+=2){var pr=at[mt],hr=at[mt+1];at[mt]=at[Ot-2-mt],at[mt+1]=at[Ot-1-mt],at[Ot-2-mt]=pr,at[Ot-1-mt]=hr}}function _n(at,Ne){return new si(at,Ne)}function si(at,Ne){Ne=this.options=ci(Object.create(this.options),Ne);var st=Ne.debug;if(st&&console.time("preprocess data"),Ne.maxZoom<0||Ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ne.promoteId&&Ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var mt=ft(at,Ne);this.tiles={},this.tileCoords=[],st&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ne.indexMaxZoom,Ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),mt=yt(mt,Ne),mt.length&&this.splitTile(mt,0,0,0),st&&(mt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}si.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},si.prototype.splitTile=function(at,Ne,st,mt,Ot,tr,pr){for(var hr=[at,Ne,st,mt],Rr=this.options,Gr=Rr.debug;hr.length;){mt=hr.pop(),st=hr.pop(),Ne=hr.pop(),at=hr.pop();var Yr=1<<Ne,vn=xn(Ne,st,mt),Wr=this.tiles[vn];if(!Wr&&(Gr>1&&console.time("creation"),Wr=this.tiles[vn]=Or(at,Ne,st,mt,Rr),this.tileCoords.push({z:Ne,x:st,y:mt}),Gr)){Gr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ne,st,mt,Wr.numFeatures,Wr.numPoints,Wr.numSimplified),console.timeEnd("creation"));var qn="z"+Ne;this.stats[qn]=(this.stats[qn]||0)+1,this.total++}if(Wr.source=at,Ot){if(Ne===Rr.maxZoom||Ne===Ot)continue;var vi=1<<Ot-Ne;if(st!==Math.floor(tr/vi)||mt!==Math.floor(pr/vi))continue}else if(Ne===Rr.indexMaxZoom||Wr.numPoints<=Rr.indexMaxPoints)continue;if(Wr.source=null,at.length!==0){Gr>1&&console.time("clipping");var Mi=.5*Rr.buffer/Rr.extent,Ui=.5-Mi,ji=.5+Mi,ea=1+Mi,Ra,Li,Yn,zi,ya,zn;Ra=Li=Yn=zi=null,ya=qt(at,Yr,st-Mi,st+ji,0,Wr.minX,Wr.maxX,Rr),zn=qt(at,Yr,st+Ui,st+ea,0,Wr.minX,Wr.maxX,Rr),at=null,ya&&(Ra=qt(ya,Yr,mt-Mi,mt+ji,1,Wr.minY,Wr.maxY,Rr),Li=qt(ya,Yr,mt+Ui,mt+ea,1,Wr.minY,Wr.maxY,Rr),ya=null),zn&&(Yn=qt(zn,Yr,mt-Mi,mt+ji,1,Wr.minY,Wr.maxY,Rr),zi=qt(zn,Yr,mt+Ui,mt+ea,1,Wr.minY,Wr.maxY,Rr),zn=null),Gr>1&&console.timeEnd("clipping"),hr.push(Ra||[],Ne+1,st*2,mt*2),hr.push(Li||[],Ne+1,st*2,mt*2+1),hr.push(Yn||[],Ne+1,st*2+1,mt*2),hr.push(zi||[],Ne+1,st*2+1,mt*2+1)}}},si.prototype.getTile=function(at,Ne,st){var mt=this.options,Ot=mt.extent,tr=mt.debug;if(at<0||at>24)return null;var pr=1<<at;Ne=(Ne%pr+pr)%pr;var hr=xn(at,Ne,st);if(this.tiles[hr])return br(this.tiles[hr],Ot);tr>1&&console.log("drilling down to z%d-%d-%d",at,Ne,st);for(var Rr=at,Gr=Ne,Yr=st,vn;!vn&&Rr>0;)Rr--,Gr=Math.floor(Gr/2),Yr=Math.floor(Yr/2),vn=this.tiles[xn(Rr,Gr,Yr)];return!vn||!vn.source?null:(tr>1&&console.log("found parent tile z%d-%d-%d",Rr,Gr,Yr),tr>1&&console.time("drilling down"),this.splitTile(vn.source,Rr,Gr,Yr,at,Ne,st),tr>1&&console.timeEnd("drilling down"),this.tiles[hr]?br(this.tiles[hr],Ot):null)};function xn(at,Ne,st){return((1<<at)*st+Ne)*32+at}function ci(at,Ne){for(var st in Ne)at[st]=Ne[st];return at}function Wi(at,Ne){var st=at.tileID.canonical;if(!this._geoJSONIndex)return Ne(null,null);var mt=this._geoJSONIndex.getTile(st.z,st.x,st.y);if(!mt)return Ne(null,null);var Ot=new E(mt.features),tr=P(Ot);(tr.byteOffset!==0||tr.byteLength!==tr.buffer.byteLength)&&(tr=new Uint8Array(tr)),Ne(null,{vectorTile:Ot,rawData:tr.buffer})}var oi=function(at){function Ne(st,mt,Ot,tr){at.call(this,st,mt,Ot,Wi),tr&&(this.loadGeoJSON=tr)}return at&&(Ne.__proto__=at),Ne.prototype=Object.create(at&&at.prototype),Ne.prototype.constructor=Ne,Ne.prototype.loadData=function(mt,Ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ot,this._pendingLoadDataParams=mt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ne.prototype._loadData=function(){var mt=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ot=this._pendingCallback,tr=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var pr=tr&&tr.request&&tr.request.collectResourceTiming?new n.RequestPerformance(tr.request):!1;this.loadGeoJSON(tr,function(hr,Rr){if(hr||!Rr)return Ot(hr);if(typeof Rr!="object")return Ot(new Error("Input data given to '"+tr.source+"' is not a valid GeoJSON object."));g(Rr,!0);try{if(tr.filter){var Gr=n.createExpression(tr.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Gr.result==="error")throw new Error(Gr.value.map(function(qn){return qn.key+": "+qn.message}).join(", "));var Yr=Rr.features.filter(function(qn){return Gr.value.evaluate({zoom:0},qn)});Rr={type:"FeatureCollection",features:Yr}}mt._geoJSONIndex=tr.cluster?new ze(Zi(tr)).load(Rr.features):_n(Rr,tr.geojsonVtOptions)}catch(qn){return Ot(qn)}mt.loaded={};var vn={};if(pr){var Wr=pr.finish();Wr&&(vn.resourceTiming={},vn.resourceTiming[tr.source]=JSON.parse(JSON.stringify(Wr)))}Ot(null,vn)})}},Ne.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ne.prototype.reloadTile=function(mt,Ot){var tr=this.loaded,pr=mt.uid;return tr&&tr[pr]?at.prototype.reloadTile.call(this,mt,Ot):this.loadTile(mt,Ot)},Ne.prototype.loadGeoJSON=function(mt,Ot){if(mt.request)n.getJSON(mt.request,Ot);else if(typeof mt.data=="string")try{return Ot(null,JSON.parse(mt.data))}catch(tr){return Ot(new Error("Input data given to '"+mt.source+"' is not a valid GeoJSON object."))}else return Ot(new Error("Input data given to '"+mt.source+"' is not a valid GeoJSON object."))},Ne.prototype.removeSource=function(mt,Ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ot()},Ne.prototype.getClusterExpansionZoom=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getClusterExpansionZoom(mt.clusterId))}catch(tr){Ot(tr)}},Ne.prototype.getClusterChildren=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getChildren(mt.clusterId))}catch(tr){Ot(tr)}},Ne.prototype.getClusterLeaves=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getLeaves(mt.clusterId,mt.limit,mt.offset))}catch(tr){Ot(tr)}},Ne}(p);function Zi(at){var Ne=at.superclusterOptions,st=at.clusterProperties;if(!st||!Ne)return Ne;for(var mt={},Ot={},tr={accumulated:null,zoom:0},pr={properties:null},hr=Object.keys(st),Rr=0,Gr=hr;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr],vn=st[Yr],Wr=vn[0],qn=vn[1],vi=n.createExpression(qn),Mi=n.createExpression(typeof Wr=="string"?[Wr,["accumulated"],["get",Yr]]:Wr);mt[Yr]=vi.value,Ot[Yr]=Mi.value}return Ne.map=function(Ui){pr.properties=Ui;for(var ji={},ea=0,Ra=hr;ea<Ra.length;ea+=1){var Li=Ra[ea];ji[Li]=mt[Li].evaluate(tr,pr)}return ji},Ne.reduce=function(Ui,ji){pr.properties=ji;for(var ea=0,Ra=hr;ea<Ra.length;ea+=1){var Li=Ra[ea];tr.accumulated=Ui[Li],Ui[Li]=Ot[Li].evaluate(tr,pr)}},Ne}var Ei=function(Ne){var st=this;this.self=Ne,this.actor=new n.Actor(Ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(mt,Ot){if(st.workerSourceTypes[mt])throw new Error('Worker source with name "'+mt+'" already registered.');st.workerSourceTypes[mt]=Ot},this.self.registerRTLTextPlugin=function(mt){if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=mt.applyArabicShaping,n.plugin.processBidirectionalText=mt.processBidirectionalText,n.plugin.processStyledBidirectionalText=mt.processStyledBidirectionalText}};return Ei.prototype.setReferrer=function(Ne,st){this.referrer=st},Ei.prototype.setImages=function(Ne,st,mt){this.availableImages[Ne]=st;for(var Ot in this.workerSources[Ne]){var tr=this.workerSources[Ne][Ot];for(var pr in tr)tr[pr].availableImages=st}mt()},Ei.prototype.setLayers=function(Ne,st,mt){this.getLayerIndex(Ne).replace(st),mt()},Ei.prototype.updateLayers=function(Ne,st,mt){this.getLayerIndex(Ne).update(st.layers,st.removedIds),mt()},Ei.prototype.loadTile=function(Ne,st,mt){this.getWorkerSource(Ne,st.type,st.source).loadTile(st,mt)},Ei.prototype.loadDEMTile=function(Ne,st,mt){this.getDEMWorkerSource(Ne,st.source).loadTile(st,mt)},Ei.prototype.reloadTile=function(Ne,st,mt){this.getWorkerSource(Ne,st.type,st.source).reloadTile(st,mt)},Ei.prototype.abortTile=function(Ne,st,mt){this.getWorkerSource(Ne,st.type,st.source).abortTile(st,mt)},Ei.prototype.removeTile=function(Ne,st,mt){this.getWorkerSource(Ne,st.type,st.source).removeTile(st,mt)},Ei.prototype.removeDEMTile=function(Ne,st){this.getDEMWorkerSource(Ne,st.source).removeTile(st)},Ei.prototype.removeSource=function(Ne,st,mt){if(!(!this.workerSources[Ne]||!this.workerSources[Ne][st.type]||!this.workerSources[Ne][st.type][st.source])){var Ot=this.workerSources[Ne][st.type][st.source];delete this.workerSources[Ne][st.type][st.source],Ot.removeSource!==void 0?Ot.removeSource(st,mt):mt()}},Ei.prototype.loadWorkerSource=function(Ne,st,mt){try{this.self.importScripts(st.url),mt()}catch(Ot){mt(Ot.toString())}},Ei.prototype.syncRTLPluginState=function(Ne,st,mt){try{n.plugin.setState(st);var Ot=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Ot!=null){this.self.importScripts(Ot);var tr=n.plugin.isParsed(),pr=tr?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ot);mt(pr,tr)}}catch(hr){mt(hr.toString())}},Ei.prototype.getAvailableImages=function(Ne){var st=this.availableImages[Ne];return st||(st=[]),st},Ei.prototype.getLayerIndex=function(Ne){var st=this.layerIndexes[Ne];return st||(st=this.layerIndexes[Ne]=new l),st},Ei.prototype.getWorkerSource=function(Ne,st,mt){var Ot=this;if(this.workerSources[Ne]||(this.workerSources[Ne]={}),this.workerSources[Ne][st]||(this.workerSources[Ne][st]={}),!this.workerSources[Ne][st][mt]){var tr={send:function(pr,hr,Rr){Ot.actor.send(pr,hr,Rr,Ne)}};this.workerSources[Ne][st][mt]=new this.workerSourceTypes[st](tr,this.getLayerIndex(Ne),this.getAvailableImages(Ne))}return this.workerSources[Ne][st][mt]},Ei.prototype.getDEMWorkerSource=function(Ne,st){return this.demWorkerSources[Ne]||(this.demWorkerSources[Ne]={}),this.demWorkerSources[Ne][st]||(this.demWorkerSources[Ne][st]=new T),this.demWorkerSources[Ne][st]},Ei.prototype.enforceCacheSizeLimit=function(Ne,st){n.enforceCacheSizeLimit(st)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ei(self)),Ei}),i(["./shared"],function(n){"use strict";var a=n.createCommonjsModule(function(H){H.exports?H.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=G);function R(Tt){return!G(Tt)}function G(Tt){if(!I())return"not a browser";if(!W())return"insufficent Array support";if(!te())return"insufficient Function support";if(!ee())return"insufficient Object support";if(!ve())return"insufficient JSON support";if(!Ee())return"insufficient worker support";if(!Oe())return"insufficient Uint8ClampedArray support";if(!vt())return"insufficient ArrayBuffer support";if(!wt())return"insufficient Canvas/getImageData support";if(!Be(Tt&&Tt.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function I(){return typeof window!="undefined"&&typeof document!="undefined"}function W(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function te(){return Function.prototype&&Function.prototype.bind}function ee(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function ve(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Ee(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Tt=new Blob([""],{type:"text/javascript"}),Lt=URL.createObjectURL(Tt),Pt,Xt;try{Xt=new Worker(Lt),Pt=!0}catch(Nt){Pt=!1}return Xt&&Xt.terminate(),URL.revokeObjectURL(Lt),Pt}function Oe(){return"Uint8ClampedArray"in window}function vt(){return ArrayBuffer.isView}function wt(){var Tt=document.createElement("canvas");Tt.width=Tt.height=1;var Lt=Tt.getContext("2d");if(!Lt)return!1;var Pt=Lt.getImageData(0,0,1,1);return Pt&&Pt.width===Tt.width}var pt={};function Be(Tt){return pt[Tt]===void 0&&(pt[Tt]=ot(Tt)),pt[Tt]}R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function $e(Tt){var Lt=document.createElement("canvas"),Pt=Object.create(R.webGLContextAttributes);return Pt.failIfMajorPerformanceCaveat=Tt,Lt.probablySupportsContext?Lt.probablySupportsContext("webgl",Pt)||Lt.probablySupportsContext("experimental-webgl",Pt):Lt.supportsContext?Lt.supportsContext("webgl",Pt)||Lt.supportsContext("experimental-webgl",Pt):Lt.getContext("webgl",Pt)||Lt.getContext("experimental-webgl",Pt)}function ot(Tt){var Lt=$e(Tt);if(!Lt)return!1;var Pt=Lt.createShader(Lt.VERTEX_SHADER);return!Pt||Lt.isContextLost()?!1:(Lt.shaderSource(Pt,"void main() {}"),Lt.compileShader(Pt),Lt.getShaderParameter(Pt,Lt.COMPILE_STATUS)===!0)}}),o={};o.create=function(H,R,G){var I=n.window.document.createElement(H);return R!==void 0&&(I.className=R),G&&G.appendChild(I),I},o.createNS=function(H,R){var G=n.window.document.createElementNS(H,R);return G};var s=n.window.document&&n.window.document.documentElement.style;function l(H){if(!s)return H[0];for(var R=0;R<H.length;R++)if(H[R]in s)return H[R];return H[0]}var u=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),f;o.disableDrag=function(){s&&u&&(f=s[u],s[u]="none")},o.enableDrag=function(){s&&u&&(s[u]=f)};var c=l(["transform","WebkitTransform"]);o.setTransform=function(H,R){H.style[c]=R};var h=!1;try{var v=Object.defineProperty({},"passive",{get:function(){h=!0}});n.window.addEventListener("test",v,v),n.window.removeEventListener("test",v,v)}catch(H){h=!1}o.addEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.addEventListener(R,G,I):H.addEventListener(R,G,I.capture)},o.removeEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.removeEventListener(R,G,I):H.removeEventListener(R,G,I.capture)};var p=function(H){H.preventDefault(),H.stopPropagation(),n.window.removeEventListener("click",p,!0)};o.suppressClick=function(){n.window.addEventListener("click",p,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",p,!0)},0)},o.mousePos=function(H,R){var G=H.getBoundingClientRect();return new n.Point(R.clientX-G.left-H.clientLeft,R.clientY-G.top-H.clientTop)},o.touchPos=function(H,R){for(var G=H.getBoundingClientRect(),I=[],W=0;W<R.length;W++)I.push(new n.Point(R[W].clientX-G.left-H.clientLeft,R[W].clientY-G.top-H.clientTop));return I},o.mouseButton=function(H){return typeof n.window.InstallTrigger!="undefined"&&H.button===2&&H.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:H.button},o.remove=function(H){H.parentNode&&H.parentNode.removeChild(H)};function _(H,R,G){var I,W,te,ee=n.browser.devicePixelRatio>1?"@2x":"",ve=n.getJSON(R.transformRequest(R.normalizeSpriteURL(H,ee,".json"),n.ResourceType.SpriteJSON),function(vt,wt){ve=null,te||(te=vt,I=wt,Oe())}),Ee=n.getImage(R.transformRequest(R.normalizeSpriteURL(H,ee,".png"),n.ResourceType.SpriteImage),function(vt,wt){Ee=null,te||(te=vt,W=wt,Oe())});function Oe(){if(te)G(te);else if(I&&W){var vt=n.browser.getImageData(W),wt={};for(var pt in I){var Be=I[pt],$e=Be.width,ot=Be.height,Tt=Be.x,Lt=Be.y,Pt=Be.sdf,Xt=Be.pixelRatio,Nt=Be.stretchX,Dt=Be.stretchY,Zt=Be.content,Ct=new n.RGBAImage({width:$e,height:ot});n.RGBAImage.copy(vt,Ct,{x:Tt,y:Lt},{x:0,y:0},{width:$e,height:ot}),wt[pt]={data:Ct,pixelRatio:Xt,sdf:Pt,stretchX:Nt,stretchY:Dt,content:Zt}}G(null,wt)}}return{cancel:function(){ve&&(ve.cancel(),ve=null),Ee&&(Ee.cancel(),Ee=null)}}}function T(H){var R=H.userImage;if(R&&R.render){var G=R.render();if(G)return H.data.replace(new Uint8Array(R.data.buffer)),!0}return!1}var g=1,A=function(H){function R(){H.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(I){if(this.loaded!==I&&(this.loaded=I,I)){for(var W=0,te=this.requestors;W<te.length;W+=1){var ee=te[W],ve=ee.ids,Ee=ee.callback;this._notify(ve,Ee)}this.requestors=[]}},R.prototype.getImage=function(I){return this.images[I]},R.prototype.addImage=function(I,W){this._validate(I,W)&&(this.images[I]=W)},R.prototype._validate=function(I,W){var te=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchX" value'))),te=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchY" value'))),te=!1),this._validateContent(W.content,W)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "content" value'))),te=!1),te},R.prototype._validateStretch=function(I,W){if(!I)return!0;for(var te=0,ee=0,ve=I;ee<ve.length;ee+=1){var Ee=ve[ee];if(Ee[0]<te||Ee[1]<Ee[0]||W<Ee[1])return!1;te=Ee[1]}return!0},R.prototype._validateContent=function(I,W){return I?!(I.length!==4||I[0]<0||W.data.width<I[0]||I[1]<0||W.data.height<I[1]||I[2]<0||W.data.width<I[2]||I[3]<0||W.data.height<I[3]||I[2]<I[0]||I[3]<I[1]):!0},R.prototype.updateImage=function(I,W){var te=this.images[I];W.version=te.version+1,this.images[I]=W,this.updatedImages[I]=!0},R.prototype.removeImage=function(I){var W=this.images[I];delete this.images[I],delete this.patterns[I],W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},R.prototype.listImages=function(){return Object.keys(this.images)},R.prototype.getImages=function(I,W){var te=!0;if(!this.isLoaded())for(var ee=0,ve=I;ee<ve.length;ee+=1){var Ee=ve[ee];this.images[Ee]||(te=!1)}this.isLoaded()||te?this._notify(I,W):this.requestors.push({ids:I,callback:W})},R.prototype._notify=function(I,W){for(var te={},ee=0,ve=I;ee<ve.length;ee+=1){var Ee=ve[ee];this.images[Ee]||this.fire(new n.Event("styleimagemissing",{id:Ee}));var Oe=this.images[Ee];Oe?te[Ee]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:!!(Oe.userImage&&Oe.userImage.render)}:n.warnOnce('Image "'+Ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,te)},R.prototype.getPixelSize=function(){var I=this.atlasImage,W=I.width,te=I.height;return{width:W,height:te}},R.prototype.getPattern=function(I){var W=this.patterns[I],te=this.getImage(I);if(!te)return null;if(W&&W.position.version===te.version)return W.position;if(W)W.position.version=te.version;else{var ee=te.data.width+g*2,ve=te.data.height+g*2,Ee={w:ee,h:ve,x:0,y:0},Oe=new n.ImagePosition(Ee,te);this.patterns[I]={bin:Ee,position:Oe}}return this._updatePatternAtlas(),this.patterns[I].position},R.prototype.bind=function(I){var W=I.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(I,this.atlasImage,W.RGBA),this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},R.prototype._updatePatternAtlas=function(){var I=[];for(var W in this.patterns)I.push(this.patterns[W].bin);var te=n.potpack(I),ee=te.w,ve=te.h,Ee=this.atlasImage;Ee.resize({width:ee||1,height:ve||1});for(var Oe in this.patterns){var vt=this.patterns[Oe],wt=vt.bin,pt=wt.x+g,Be=wt.y+g,$e=this.images[Oe].data,ot=$e.width,Tt=$e.height;n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:pt,y:Be},{width:ot,height:Tt}),n.RGBAImage.copy($e,Ee,{x:0,y:Tt-1},{x:pt,y:Be-1},{width:ot,height:1}),n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:pt,y:Be+Tt},{width:ot,height:1}),n.RGBAImage.copy($e,Ee,{x:ot-1,y:0},{x:pt-1,y:Be},{width:1,height:Tt}),n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:pt+ot,y:Be},{width:1,height:Tt})}this.dirty=!0},R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},R.prototype.dispatchRenderCallbacks=function(I){for(var W=0,te=I;W<te.length;W+=1){var ee=te[W];if(!this.callbackDispatchedThisFrame[ee]){this.callbackDispatchedThisFrame[ee]=!0;var ve=this.images[ee],Ee=T(ve);Ee&&this.updateImage(ee,ve)}}},R}(n.Evented);function b(H,R,G,I,W){var te=R*256,ee=te+255,ve=I.transformRequest(I.normalizeGlyphsURL(G).replace("{fontstack}",H).replace("{range}",te+"-"+ee),n.ResourceType.Glyphs);n.getArrayBuffer(ve,function(Ee,Oe){if(Ee)W(Ee);else if(Oe){for(var vt={},wt=0,pt=n.parseGlyphPBF(Oe);wt<pt.length;wt+=1){var Be=pt[wt];vt[Be.id]=Be}W(null,vt)}})}var w=E,k=E,x=1e20;function E(H,R,G,I,W,te){this.fontSize=H||24,this.buffer=R===void 0?3:R,this.cutoff=I||.25,this.fontFamily=W||"sans-serif",this.fontWeight=te||"normal",this.radius=G||8;var ee=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ee,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.d=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Int16Array(ee),this.middle=Math.round(ee/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}E.prototype.draw=function(H){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(H,this.buffer,this.middle);for(var R=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var W=R.data[I*4+3]/255;this.gridOuter[I]=W===1?0:W===0?x:Math.pow(Math.max(0,.5-W),2),this.gridInner[I]=W===1?x:W===0?0:Math.pow(Math.max(0,W-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++){var te=this.gridOuter[I]-this.gridInner[I];G[I]=Math.max(0,Math.min(255,Math.round(255-255*(te/this.radius+this.cutoff))))}return G};function M(H,R,G,I,W,te,ee){for(var ve=0;ve<R;ve++){for(var Ee=0;Ee<G;Ee++)I[Ee]=H[Ee*R+ve];for(d(I,W,te,ee,G),Ee=0;Ee<G;Ee++)H[Ee*R+ve]=W[Ee]}for(Ee=0;Ee<G;Ee++){for(ve=0;ve<R;ve++)I[ve]=H[Ee*R+ve];for(d(I,W,te,ee,R),ve=0;ve<R;ve++)H[Ee*R+ve]=Math.sqrt(W[ve])}}function d(H,R,G,I,W){G[0]=0,I[0]=-x,I[1]=+x;for(var te=1,ee=0;te<W;te++){for(var ve=(H[te]+te*te-(H[G[ee]]+G[ee]*G[ee]))/(2*te-2*G[ee]);ve<=I[ee];)ee--,ve=(H[te]+te*te-(H[G[ee]]+G[ee]*G[ee]))/(2*te-2*G[ee]);ee++,G[ee]=te,I[ee]=ve,I[ee+1]=+x}for(te=0,ee=0;te<W;te++){for(;I[ee+1]<te;)ee++;R[te]=(te-G[ee])*(te-G[ee])+H[G[ee]]}}w.default=k;var C=function(R,G){this.requestManager=R,this.localIdeographFontFamily=G,this.entries={}};C.prototype.setURL=function(R){this.url=R},C.prototype.getGlyphs=function(R,G){var I=this,W=[];for(var te in R)for(var ee=0,ve=R[te];ee<ve.length;ee+=1){var Ee=ve[ee];W.push({stack:te,id:Ee})}n.asyncAll(W,function(Oe,vt){var wt=Oe.stack,pt=Oe.id,Be=I.entries[wt];Be||(Be=I.entries[wt]={glyphs:{},requests:{},ranges:{}});var $e=Be.glyphs[pt];if($e!==void 0){vt(null,{stack:wt,id:pt,glyph:$e});return}if($e=I._tinySDF(Be,wt,pt),$e){Be.glyphs[pt]=$e,vt(null,{stack:wt,id:pt,glyph:$e});return}var ot=Math.floor(pt/256);if(ot*256>65535){vt(new Error("glyphs > 65535 not supported"));return}if(Be.ranges[ot]){vt(null,{stack:wt,id:pt,glyph:$e});return}var Tt=Be.requests[ot];Tt||(Tt=Be.requests[ot]=[],C.loadGlyphRange(wt,ot,I.url,I.requestManager,function(Lt,Pt){if(Pt){for(var Xt in Pt)I._doesCharSupportLocalGlyph(+Xt)||(Be.glyphs[+Xt]=Pt[+Xt]);Be.ranges[ot]=!0}for(var Nt=0,Dt=Tt;Nt<Dt.length;Nt+=1){var Zt=Dt[Nt];Zt(Lt,Pt)}delete Be.requests[ot]})),Tt.push(function(Lt,Pt){Lt?vt(Lt):Pt&&vt(null,{stack:wt,id:pt,glyph:Pt[pt]||null})})},function(Oe,vt){if(Oe)G(Oe);else if(vt){for(var wt={},pt=0,Be=vt;pt<Be.length;pt+=1){var $e=Be[pt],ot=$e.stack,Tt=$e.id,Lt=$e.glyph;(wt[ot]||(wt[ot]={}))[Tt]=Lt&&{id:Lt.id,bitmap:Lt.bitmap.clone(),metrics:Lt.metrics}}G(null,wt)}})},C.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](R)||n.isChar["Hangul Syllables"](R)||n.isChar.Hiragana(R)||n.isChar.Katakana(R))},C.prototype._tinySDF=function(R,G,I){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(I)){var te=R.tinySDF;if(!te){var ee="400";/bold/i.test(G)?ee="900":/medium/i.test(G)?ee="500":/light/i.test(G)&&(ee="200"),te=R.tinySDF=new C.TinySDF(24,3,8,.25,W,ee)}return{id:I,bitmap:new n.AlphaImage({width:30,height:30},te.draw(String.fromCharCode(I))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=b,C.TinySDF=w;var S=function(){this.specification=n.styleSpec.light.position};S.prototype.possiblyEvaluate=function(R,G){return n.sphericalToCartesian(R.expression.evaluate(G))},S.prototype.interpolate=function(R,G,I){return{x:n.number(R.x,G.x,I),y:n.number(R.y,G.y,I),z:n.number(R.z,G.z,I)}};var P=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new S,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),D="-transition",z=function(H){function R(G){H.call(this),this._transitionable=new n.Transitionable(P),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getLight=function(){return this._transitionable.serialize()},R.prototype.setLight=function(I,W){if(W===void 0&&(W={}),!this._validate(n.validateLight,I,W))for(var te in I){var ee=I[te];n.endsWith(te,D)?this._transitionable.setTransition(te.slice(0,-D.length),ee):this._transitionable.setValue(te,ee)}},R.prototype.updateTransitions=function(I){this._transitioning=this._transitionable.transitioned(I,this._transitioning)},R.prototype.hasTransition=function(){return this._transitioning.hasTransition()},R.prototype.recalculate=function(I){this.properties=this._transitioning.possiblyEvaluate(I)},R.prototype._validate=function(I,W,te){return te&&te.validate===!1?!1:n.emitValidationErrors(this,I.call(n.validateStyle,n.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})))},R}(n.Evented),O=function(R,G){this.width=R,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(R,G){var I=R.join(",")+String(G);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(R,G)),this.dashEntry[I]},O.prototype.getDashRanges=function(R,G,I){var W=R.length%2===1,te=[],ee=W?-R[R.length-1]*I:0,ve=R[0]*I,Ee=!0;te.push({left:ee,right:ve,isDash:Ee,zeroLength:R[0]===0});for(var Oe=R[0],vt=1;vt<R.length;vt++){Ee=!Ee;var wt=R[vt];ee=Oe*I,Oe+=wt,ve=Oe*I,te.push({left:ee,right:ve,isDash:Ee,zeroLength:wt===0})}return te},O.prototype.addRoundDash=function(R,G,I){for(var W=G/2,te=-I;te<=I;te++)for(var ee=this.nextRow+I+te,ve=this.width*ee,Ee=0,Oe=R[Ee],vt=0;vt<this.width;vt++){vt/Oe.right>1&&(Oe=R[++Ee]);var wt=Math.abs(vt-Oe.left),pt=Math.abs(vt-Oe.right),Be=Math.min(wt,pt),$e=void 0,ot=te/I*(W+1);if(Oe.isDash){var Tt=W-Math.abs(ot);$e=Math.sqrt(Be*Be+Tt*Tt)}else $e=W-Math.sqrt(Be*Be+ot*ot);this.data[ve+vt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addRegularDash=function(R){for(var G=R.length-1;G>=0;--G){var I=R[G],W=R[G+1];I.zeroLength?R.splice(G,1):W&&W.isDash===I.isDash&&(W.left=I.left,R.splice(G,1))}var te=R[0],ee=R[R.length-1];te.isDash===ee.isDash&&(te.left=ee.left-this.width,ee.right=te.right+this.width);for(var ve=this.width*this.nextRow,Ee=0,Oe=R[Ee],vt=0;vt<this.width;vt++){vt/Oe.right>1&&(Oe=R[++Ee]);var wt=Math.abs(vt-Oe.left),pt=Math.abs(vt-Oe.right),Be=Math.min(wt,pt),$e=Oe.isDash?Be:-Be;this.data[ve+vt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addDash=function(R,G){var I=G?7:0,W=2*I+1;if(this.nextRow+W>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var te=0,ee=0;ee<R.length;ee++)te+=R[ee];if(te!==0){var ve=this.width/te,Ee=this.getDashRanges(R,this.width,ve);G?this.addRoundDash(Ee,ve,I):this.addRegularDash(Ee)}var Oe={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:te};return this.nextRow+=W,this.dirty=!0,Oe},O.prototype.bind=function(R){var G=R.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var V=function H(R,G){this.workerPool=R,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var I=this.workerPool.acquire(this.id),W=0;W<I.length;W++){var te=I[W],ee=new H.Actor(te,G,this.id);ee.name="Worker "+W,this.actors.push(ee)}};V.prototype.broadcast=function(R,G,I){I=I||function(){},n.asyncAll(this.actors,function(W,te){W.send(R,G,te)},I)},V.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},V.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},V.Actor=n.Actor;function B(H,R,G){var I=function(W,te){if(W)return G(W);if(te){var ee=n.pick(n.extend(te,H),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(ee.vectorLayers=te.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(function(ve){return ve.id})),ee.tiles=R.canonicalizeTileset(ee,H.url),G(null,ee)}};return H.url?n.getJSON(R.transformRequest(R.normalizeSourceURL(H.url),n.ResourceType.Source),I):n.browser.frame(function(){return I(null,H)})}var F=function(R,G,I){this.bounds=n.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=G||0,this.maxzoom=I||24};F.prototype.validateBounds=function(R){return!Array.isArray(R)||R.length!==4?[-180,-90,180,90]:[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]},F.prototype.contains=function(R){var G=Math.pow(2,R.z),I={minX:Math.floor(n.mercatorXfromLng(this.bounds.getWest())*G),minY:Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*G),maxX:Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*G),maxY:Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*G)},W=R.x>=I.minX&&R.x<I.maxX&&R.y>=I.minY&&R.y<I.maxY;return W};var N=function(H){function R(G,I,W,te){if(H.call(this),this.id=G,this.dispatcher=W,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(I,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(te)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,te){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):te&&(n.extend(I,te),te.bounds&&(I.tileBounds=new F(te.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(te.tiles,I.map._requestManager._customAccessToken),n.postMapLoadEvent(te.tiles,I.map._getMapId(),I.map._requestManager._skuToken,I.map._requestManager._customAccessToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setSourceProperty=function(I){this._tileJSONRequest&&this._tileJSONRequest.cancel(),I();var W=this.map.style.sourceCaches[this.id];W.clearTiles(),this.load()},R.prototype.setTiles=function(I){var W=this;return this.setSourceProperty(function(){W._options.tiles=I}),this},R.prototype.setUrl=function(I){var W=this;return this.setSourceProperty(function(){W.url=I,W._options.url=I}),this},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.loadTile=function(I,W){var te=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme)),ee={request:this.map._requestManager.transformRequest(te,n.ResourceType.Tile),uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,tileSize:this.tileSize*I.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};ee.request.collectResourceTiming=this._collectResourceTiming,!I.actor||I.state==="expired"?(I.actor=this.dispatcher.getActor(),I.request=I.actor.send("loadTile",ee,ve.bind(this))):I.state==="loading"?I.reloadCallback=W:I.request=I.actor.send("reloadTile",ee,ve.bind(this));function ve(Ee,Oe){if(delete I.request,I.aborted)return W(null);if(Ee&&Ee.status!==404)return W(Ee);Oe&&Oe.resourceTiming&&(I.resourceTiming=Oe.resourceTiming),this.map._refreshExpiredTiles&&Oe&&I.setExpiryData(Oe),I.loadVectorData(Oe,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),W(null),I.reloadCallback&&(this.loadTile(I,I.reloadCallback),I.reloadCallback=null)}},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.actor&&I.actor.send("abortTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.unloadTile=function(I){I.unloadVectorData(),I.actor&&I.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.hasTransition=function(){return!1},R}(n.Evented),Z=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.dispatcher=W,this.setEventedParent(te),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},I),n.extend(this,n.pick(I,["url","scheme","tileSize"]))}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,te){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):te&&(n.extend(I,te),te.bounds&&(I.tileBounds=new F(te.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(te.tiles),n.postMapLoadEvent(te.tiles,I.map._getMapId(),I.map._requestManager._skuToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.loadTile=function(I,W){var te=this,ee=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest(ee,n.ResourceType.Tile),function(ve,Ee){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(ve)I.state="errored",W(ve);else if(Ee){te.map._refreshExpiredTiles&&I.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Oe=te.map.painter.context,vt=Oe.gl;I.texture=te.map.painter.getTileTexture(Ee.width),I.texture?I.texture.update(Ee,{useMipmap:!0}):(I.texture=new n.Texture(Oe,Ee,vt.RGBA,{useMipmap:!0}),I.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE,vt.LINEAR_MIPMAP_NEAREST),Oe.extTextureFilterAnisotropic&&vt.texParameterf(vt.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax)),I.state="loaded",n.cacheEntryPossiblyAdded(te.dispatcher),W(null)}})},R.prototype.abortTile=function(I,W){I.request&&(I.request.cancel(),delete I.request),W()},R.prototype.unloadTile=function(I,W){I.texture&&this.map.painter.saveTileTexture(I.texture),W()},R.prototype.hasTransition=function(){return!1},R}(n.Evented),J=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},R.prototype.loadTile=function(I,W){var te=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest(te,n.ResourceType.Tile),ee.bind(this)),I.neighboringTiles=this._getNeighboringTiles(I.tileID);function ee(Ee,Oe){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(Ee)I.state="errored",W(Ee);else if(Oe){this.map._refreshExpiredTiles&&I.setExpiryData(Oe),delete Oe.cacheControl,delete Oe.expires;var vt=n.window.ImageBitmap&&Oe instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported(),wt=vt?Oe:n.browser.getImageData(Oe,1),pt={uid:I.uid,coord:I.tileID,source:this.id,rawImageData:wt,encoding:this.encoding};(!I.actor||I.state==="expired")&&(I.actor=this.dispatcher.getActor(),I.actor.send("loadDEMTile",pt,ve.bind(this)))}}function ve(Ee,Oe){Ee&&(I.state="errored",W(Ee)),Oe&&(I.dem=Oe,I.needsHillshadePrepare=!0,I.state="loaded",W(null))}},R.prototype._getNeighboringTiles=function(I){var W=I.canonical,te=Math.pow(2,W.z),ee=(W.x-1+te)%te,ve=W.x===0?I.wrap-1:I.wrap,Ee=(W.x+1+te)%te,Oe=W.x+1===te?I.wrap+1:I.wrap,vt={};return vt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,ee,W.y).key]={backfilled:!1},vt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y).key]={backfilled:!1},W.y>0&&(vt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,ee,W.y-1).key]={backfilled:!1},vt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y-1).key]={backfilled:!1},vt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y-1).key]={backfilled:!1}),W.y+1<te&&(vt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,ee,W.y+1).key]={backfilled:!1},vt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y+1).key]={backfilled:!1},vt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y+1).key]={backfilled:!1}),vt},R.prototype.unloadTile=function(I){I.demTexture&&this.map.painter.saveTileTexture(I.demTexture),I.fbo&&(I.fbo.destroy(),delete I.fbo),I.dem&&delete I.dem,delete I.neighboringTiles,I.state="unloaded",I.actor&&I.actor.send("removeDEMTile",{uid:I.uid,source:this.id})},R}(Z),re=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=W.getActor(),this.setEventedParent(te),this._data=I.data,this._options=n.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var ee=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*ee,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*ee,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:n.EXTENT,radius:(I.clusterRadius||50)*ee,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(W){if(W){I.fire(new n.ErrorEvent(W));return}var te={dataType:"source",sourceDataType:"metadata"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(te.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new n.Event("data",te))})},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setData=function(I){var W=this;return this._data=I,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te){W.fire(new n.ErrorEvent(te));return}var ee={dataType:"source",sourceDataType:"content"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&(ee.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new n.Event("data",ee))}),this},R.prototype.getClusterExpansionZoom=function(I,W){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:I,source:this.id},W),this},R.prototype.getClusterChildren=function(I,W){return this.actor.send("geojson.getClusterChildren",{clusterId:I,source:this.id},W),this},R.prototype.getClusterLeaves=function(I,W,te,ee){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:I,limit:W,offset:te},ee),this},R.prototype._updateWorkerData=function(I){var W=this;this._loaded=!1;var te=n.extend({},this.workerOptions),ee=this._data;typeof ee=="string"?(te.request=this.map._requestManager.transformRequest(n.browser.resolveURL(ee),n.ResourceType.Source),te.request.collectResourceTiming=this._collectResourceTiming):te.data=JSON.stringify(ee),this.actor.send(this.type+".loadData",te,function(ve,Ee){W._removed||Ee&&Ee.abandoned||(W._loaded=!0,Ee&&Ee.resourceTiming&&Ee.resourceTiming[W.id]&&(W._resourceTiming=Ee.resourceTiming[W.id].slice(0)),W.actor.send(W.type+".coalesce",{source:te.source},null),I(ve))})},R.prototype.loaded=function(){return this._loaded},R.prototype.loadTile=function(I,W){var te=this,ee=I.actor?"reloadTile":"loadTile";I.actor=this.actor;var ve={type:this.type,uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};I.request=this.actor.send(ee,ve,function(Ee,Oe){return delete I.request,I.unloadVectorData(),I.aborted?W(null):Ee?W(Ee):(I.loadVectorData(Oe,te.map.painter,ee==="reloadTile"),W(null))})},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.aborted=!0},R.prototype.unloadTile=function(I){I.unloadVectorData(),this.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id})},R.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},R.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},R.prototype.hasTransition=function(){return!1},R}(n.Evented),le=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),fe=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.dispatcher=W,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(te),this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(I,W){var te=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function(ee,ve){te._loaded=!0,ee?te.fire(new n.ErrorEvent(ee)):ve&&(te.image=ve,I&&(te.coordinates=I),W&&W(),te._finishLoading())})},R.prototype.loaded=function(){return this._loaded},R.prototype.updateImage=function(I){var W=this;return!this.image||!I.url?this:(this.options.url=I.url,this.load(I.coordinates,function(){W.texture=null}),this)},R.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setCoordinates=function(I){var W=this;this.coordinates=I;var te=I.map(n.MercatorCoordinate.fromLngLat);this.tileID=K(te),this.minzoom=this.maxzoom=this.tileID.z;var ee=te.map(function(ve){return W.tileID.getTilePoint(ve)._round()});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack(ee[0].x,ee[0].y,0,0),this._boundsArray.emplaceBack(ee[1].x,ee[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(ee[3].x,ee[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(ee[2].x,ee[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,le.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(I,this.image,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var te in this.tiles){var ee=this.tiles[te];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},R.prototype.loadTile=function(I,W){this.tileID&&this.tileID.equals(I.tileID.canonical)?(this.tiles[String(I.tileID.wrap)]=I,I.buckets={},W(null)):(I.state="errored",W(null))},R.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return!1},R}(n.Evented);function K(H){for(var R=1/0,G=1/0,I=-1/0,W=-1/0,te=0,ee=H;te<ee.length;te+=1){var ve=ee[te];R=Math.min(R,ve.x),G=Math.min(G,ve.y),I=Math.max(I,ve.x),W=Math.max(W,ve.y)}var Ee=I-R,Oe=W-G,vt=Math.max(Ee,Oe),wt=Math.max(0,Math.floor(-Math.log(vt)/Math.LN2)),pt=Math.pow(2,wt);return new n.CanonicalTileID(wt,Math.floor((R+I)/2*pt),Math.floor((G+W)/2*pt))}var X=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),this.roundZoom=!0,this.type="video",this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1;var W=this.options;this.urls=[];for(var te=0,ee=W.urls;te<ee.length;te+=1){var ve=ee[te];this.urls.push(this.map._requestManager.transformRequest(ve,n.ResourceType.Source).url)}n.getVideo(this.urls,function(Ee,Oe){I._loaded=!0,Ee?I.fire(new n.ErrorEvent(Ee)):Oe&&(I.video=Oe,I.video.loop=!0,I.video.addEventListener("playing",function(){I.map.triggerRepaint()}),I.map&&I.video.play(),I._finishLoading())})},R.prototype.pause=function(){this.video&&this.video.pause()},R.prototype.play=function(){this.video&&this.video.play()},R.prototype.seek=function(I){if(this.video){var W=this.video.seekable;I<W.start(0)||I>W.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+W.start(0)+" and "+W.end(0)+"-second mark."))):this.video.currentTime=I}},R.prototype.getVideo=function(){return this.video},R.prototype.onAdd=function(I){this.map||(this.map=I,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,le.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.texSubImage2D(W.TEXTURE_2D,0,0,0,W.RGBA,W.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(I,this.video,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var te in this.tiles){var ee=this.tiles[te];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this.video&&!this.video.paused},R}(fe),ae=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),I.coordinates?(!Array.isArray(I.coordinates)||I.coordinates.length!==4||I.coordinates.some(function(ee){return!Array.isArray(ee)||ee.length!==2||ee.some(function(ve){return typeof ve!="number"})}))&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas!="string"&&!(I.canvas instanceof n.window.HTMLCanvasElement)&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate!==void 0?I.animate:!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},R.prototype.getCanvas=function(){return this.canvas},R.prototype.onAdd=function(I){this.map=I,this.load(),this.canvas&&this.animate&&this.play()},R.prototype.onRemove=function(){this.pause()},R.prototype.prepare=function(){var I=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,I=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,I=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var W=this.map.painter.context,te=W.gl;this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,le.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(I||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(W,this.canvas,te.RGBA,{premultiply:!0});for(var ee in this.tiles){var ve=this.tiles[ee];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this._playing},R.prototype._hasInvalidDimensions=function(){for(var I=0,W=[this.canvas.width,this.canvas.height];I<W.length;I+=1){var te=W[I];if(isNaN(te)||te<=0)return!0}return!1},R}(fe),oe={vector:N,raster:Z,"raster-dem":J,geojson:re,video:X,image:fe,canvas:ae},_e=function(H,R,G,I){var W=new oe[R.type](H,R,G,I);if(W.id!==H)throw new Error("Expected Source id to be "+H+" instead of "+W.id);return n.bindAll(["load","abort","unload","serialize","prepare"],W),W},be=function(H){return oe[H]},he=function(H,R){oe[H]=R};function ie(H,R){var G=n.identity([]);return n.translate(G,G,[1,1,0]),n.scale(G,G,[H.width*.5,H.height*.5,1]),n.multiply(G,G,H.calculatePosMatrix(R.toUnwrapped()))}function ye(H,R,G){if(H)for(var I=0,W=H;I<W.length;I+=1){var te=W[I],ee=R[te];if(ee&&ee.source===G&&ee.type==="fill-extrusion")return!0}else for(var ve in R){var Ee=R[ve];if(Ee.source===G&&Ee.type==="fill-extrusion")return!0}return!1}function ue(H,R,G,I,W,te){var ee=ye(W&&W.layers,R,H.id),ve=te.maxPitchScaleFactor(),Ee=H.tilesIn(I,ve,ee);Ee.sort(ze);for(var Oe=[],vt=0,wt=Ee;vt<wt.length;vt+=1){var pt=wt[vt];Oe.push({wrappedTileID:pt.tileID.wrapped().key,queryResults:pt.tile.queryRenderedFeatures(R,G,H._state,pt.queryGeometry,pt.cameraQueryGeometry,pt.scale,W,te,ve,ie(H.transform,pt.tileID))})}var Be=et(Oe);for(var $e in Be)Be[$e].forEach(function(ot){var Tt=ot.feature,Lt=H.getFeatureState(Tt.layer["source-layer"],Tt.id);Tt.source=Tt.layer.source,Tt.layer["source-layer"]&&(Tt.sourceLayer=Tt.layer["source-layer"]),Tt.state=Lt});return Be}function Ae(H,R,G,I,W,te,ee){for(var ve={},Ee=te.queryRenderedSymbols(I),Oe=[],vt=0,wt=Object.keys(Ee).map(Number);vt<wt.length;vt+=1){var pt=wt[vt];Oe.push(ee[pt])}Oe.sort(ze);for(var Be=function(){var Pt=ot[$e],Xt=Pt.featureIndex.lookupSymbolFeatures(Ee[Pt.bucketInstanceId],R,Pt.bucketIndex,Pt.sourceLayerIndex,W.filter,W.layers,W.availableImages,H);for(var Nt in Xt){var Dt=ve[Nt]=ve[Nt]||[],Zt=Xt[Nt];Zt.sort(function(Dr,ln){var Xr=Pt.featureSortOrder;if(Xr){var dn=Xr.indexOf(Dr.featureIndex),ii=Xr.indexOf(ln.featureIndex);return ii-dn}else return ln.featureIndex-Dr.featureIndex});for(var Ct=0,ar=Zt;Ct<ar.length;Ct+=1){var yr=ar[Ct];Dt.push(yr)}}},$e=0,ot=Oe;$e<ot.length;$e+=1)Be();var Tt=function(Pt){ve[Pt].forEach(function(Xt){var Nt=Xt.feature,Dt=H[Pt],Zt=G[Dt.source],Ct=Zt.getFeatureState(Nt.layer["source-layer"],Nt.id);Nt.source=Nt.layer.source,Nt.layer["source-layer"]&&(Nt.sourceLayer=Nt.layer["source-layer"]),Nt.state=Ct})};for(var Lt in ve)Tt(Lt);return ve}function Re(H,R){for(var G=H.getRenderableIds().map(function(Ee){return H.getTileByID(Ee)}),I=[],W={},te=0;te<G.length;te++){var ee=G[te],ve=ee.tileID.canonical.key;W[ve]||(W[ve]=!0,ee.querySourceFeatures(I,R))}return I}function ze(H,R){var G=H.tileID,I=R.tileID;return G.overscaledZ-I.overscaledZ||G.canonical.y-I.canonical.y||G.wrap-I.wrap||G.canonical.x-I.canonical.x}function et(H){for(var R={},G={},I=0,W=H;I<W.length;I+=1){var te=W[I],ee=te.queryResults,ve=te.wrappedTileID,Ee=G[ve]=G[ve]||{};for(var Oe in ee)for(var vt=ee[Oe],wt=Ee[Oe]=Ee[Oe]||{},pt=R[Oe]=R[Oe]||[],Be=0,$e=vt;Be<$e.length;Be+=1){var ot=$e[Be];wt[ot.featureIndex]||(wt[ot.featureIndex]=!0,pt.push(ot))}}return R}var Le=function(R,G){this.max=R,this.onRemove=G,this.reset()};Le.prototype.reset=function(){for(var R in this.data)for(var G=0,I=this.data[R];G<I.length;G+=1){var W=I[G];W.timeout&&clearTimeout(W.timeout),this.onRemove(W.value)}return this.data={},this.order=[],this},Le.prototype.add=function(R,G,I){var W=this,te=R.wrapped().key;this.data[te]===void 0&&(this.data[te]=[]);var ee={value:G,timeout:void 0};if(I!==void 0&&(ee.timeout=setTimeout(function(){W.remove(R,ee)},I)),this.data[te].push(ee),this.order.push(te),this.order.length>this.max){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},Le.prototype.has=function(R){return R.wrapped().key in this.data},Le.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},Le.prototype._getAndRemoveByKey=function(R){var G=this.data[R].shift();return G.timeout&&clearTimeout(G.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),G.value},Le.prototype.getByKey=function(R){var G=this.data[R];return G?G[0].value:null},Le.prototype.get=function(R){if(!this.has(R))return null;var G=this.data[R.wrapped().key][0];return G.value},Le.prototype.remove=function(R,G){if(!this.has(R))return this;var I=R.wrapped().key,W=G===void 0?0:this.data[I].indexOf(G),te=this.data[I][W];return this.data[I].splice(W,1),te.timeout&&clearTimeout(te.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(te.value),this.order.splice(this.order.indexOf(I),1),this},Le.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Le.prototype.filter=function(R){var G=[];for(var I in this.data)for(var W=0,te=this.data[I];W<te.length;W+=1){var ee=te[W];R(ee.value)||G.push(ee)}for(var ve=0,Ee=G;ve<Ee.length;ve+=1){var Oe=Ee[ve];this.remove(Oe.value.tileID,Oe)}};var Ie=function(R,G,I){this.context=R;var W=R.gl;this.buffer=W.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),W.bufferData(W.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Ie.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ie.prototype.updateData=function(R){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},Ie.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var dt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ct=function(R,G,I,W){this.length=G.length,this.attributes=I,this.itemSize=G.bytesPerElement,this.dynamicDraw=W,this.context=R;var te=R.gl;this.buffer=te.createBuffer(),R.bindVertexBuffer.set(this.buffer),te.bufferData(te.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ct.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ct.prototype.updateData=function(R){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,R.arrayBuffer)},ct.prototype.enableAttributes=function(R,G){for(var I=0;I<this.attributes.length;I++){var W=this.attributes[I],te=G.attributes[W.name];te!==void 0&&R.enableVertexAttribArray(te)}},ct.prototype.setVertexAttribPointers=function(R,G,I){for(var W=0;W<this.attributes.length;W++){var te=this.attributes[W],ee=G.attributes[te.name];ee!==void 0&&R.vertexAttribPointer(ee,te.components,R[dt[te.type]],!1,this.itemSize,te.offset+this.itemSize*(I||0))}},ct.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var Ke=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ke.prototype.get=function(){return this.current},Ke.prototype.set=function(R){},Ke.prototype.getDefault=function(){return this.default},Ke.prototype.setDefault=function(){this.set(this.default)};var _t=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.clearColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(Ke),zt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 1},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearDepth(I),this.current=I,this.dirty=!1)},R}(Ke),Et=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearStencil(I),this.current=I,this.dirty=!1)},R}(Ke),Se=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[!0,!0,!0,!0]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.colorMask(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(Ke),je=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthMask(I),this.current=I,this.dirty=!1)},R}(Ke),ht=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 255},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.stencilMask(I),this.current=I,this.dirty=!1)},R}(Ke),nt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},R.prototype.set=function(I){var W=this.current;I.func===W.func&&I.ref===W.ref&&I.mask===W.mask&&!this.dirty||(this.gl.stencilFunc(I.func,I.ref,I.mask),this.current=I,this.dirty=!1)},R}(Ke),lt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.KEEP,I.KEEP,I.KEEP]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&!this.dirty||(this.gl.stencilOp(I[0],I[1],I[2]),this.current=I,this.dirty=!1)},R}(Ke),rt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.STENCIL_TEST):W.disable(W.STENCIL_TEST),this.current=I,this.dirty=!1}},R}(Ke),Xe=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[0,1]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.depthRange(I[0],I[1]),this.current=I,this.dirty=!1)},R}(Ke),ft=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.DEPTH_TEST):W.disable(W.DEPTH_TEST),this.current=I,this.dirty=!1}},R}(Ke),gt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.LESS},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthFunc(I),this.current=I,this.dirty=!1)},R}(Ke),Qt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.BLEND):W.disable(W.BLEND),this.current=I,this.dirty=!1}},R}(Ke),Jt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.ONE,I.ZERO]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.blendFunc(I[0],I[1]),this.current=I,this.dirty=!1)},R}(Ke),fr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.blendColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(Ke),nr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.FUNC_ADD},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.blendEquation(I),this.current=I,this.dirty=!1)},R}(Ke),ur=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.CULL_FACE):W.disable(W.CULL_FACE),this.current=I,this.dirty=!1}},R}(Ke),qt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.BACK},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.cullFace(I),this.current=I,this.dirty=!1)},R}(Ke),xt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.CCW},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.frontFace(I),this.current=I,this.dirty=!1)},R}(Ke),At=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.useProgram(I),this.current=I,this.dirty=!1)},R}(Ke),Je=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.TEXTURE0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.activeTexture(I),this.current=I,this.dirty=!1)},R}(Ke),xe=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[0,0,I.drawingBufferWidth,I.drawingBufferHeight]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.viewport(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(Ke),ce=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,I),this.current=I,this.dirty=!1}},R}(Ke),ge=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindRenderbuffer(W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(Ke),qe=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindTexture(W.TEXTURE_2D,I),this.current=I,this.dirty=!1}},R}(Ke),yt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindBuffer(W.ARRAY_BUFFER,I),this.current=I,this.dirty=!1}},R}(Ke),Vt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){var W=this.gl;W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,I),this.current=I,this.dirty=!1},R}(Ke),Ut=function(H){function R(G){H.call(this,G),this.vao=G.extVertexArrayObject}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){!this.vao||I===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(I),this.current=I,this.dirty=!1)},R}(Ke),br=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 4},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_ALIGNMENT,I),this.current=I,this.dirty=!1}},R}(Ke),xr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I),this.current=I,this.dirty=!1}},R}(Ke),Or=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,I),this.current=I,this.dirty=!1}},R}(Ke),Hr=function(H){function R(G,I){H.call(this,G),this.context=G,this.parent=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R}(Ke),gr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.setDirty=function(){this.dirty=!0},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,I,0),this.current=I,this.dirty=!1}},R}(Hr),Ur=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(Hr),_n=function(R,G,I,W){this.context=R,this.width=G,this.height=I;var te=R.gl,ee=this.framebuffer=te.createFramebuffer();this.colorAttachment=new gr(R,ee),W&&(this.depthAttachment=new Ur(R,ee))};_n.prototype.destroy=function(){var R=this.context.gl,G=this.colorAttachment.get();if(G&&R.deleteTexture(G),this.depthAttachment){var I=this.depthAttachment.get();I&&R.deleteRenderbuffer(I)}R.deleteFramebuffer(this.framebuffer)};var si=519,xn=function(R,G,I){this.func=R,this.mask=G,this.range=I};xn.ReadOnly=!1,xn.ReadWrite=!0,xn.disabled=new xn(si,xn.ReadOnly,[0,1]);var ci=519,Wi=7680,oi=function(R,G,I,W,te,ee){this.test=R,this.ref=G,this.mask=I,this.fail=W,this.depthFail=te,this.pass=ee};oi.disabled=new oi({func:ci,mask:0},0,0,Wi,Wi,Wi);var Zi=0,Ei=1,at=771,Ne=function(R,G,I){this.blendFunction=R,this.blendColor=G,this.mask=I};Ne.Replace=[Ei,Zi],Ne.disabled=new Ne(Ne.Replace,n.Color.transparent,[!1,!1,!1,!1]),Ne.unblended=new Ne(Ne.Replace,n.Color.transparent,[!0,!0,!0,!0]),Ne.alphaBlended=new Ne([Ei,at],n.Color.transparent,[!0,!0,!0,!0]);var st=1029,mt=2305,Ot=function(R,G,I){this.enable=R,this.mode=G,this.frontFace=I};Ot.disabled=new Ot(!1,st,mt),Ot.backCCW=new Ot(!0,st,mt);var tr=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new _t(this),this.clearDepth=new zt(this),this.clearStencil=new Et(this),this.colorMask=new Se(this),this.depthMask=new je(this),this.stencilMask=new ht(this),this.stencilFunc=new nt(this),this.stencilOp=new lt(this),this.stencilTest=new rt(this),this.depthRange=new Xe(this),this.depthTest=new ft(this),this.depthFunc=new gt(this),this.blend=new Qt(this),this.blendFunc=new Jt(this),this.blendColor=new fr(this),this.blendEquation=new nr(this),this.cullFace=new ur(this),this.cullFaceSide=new qt(this),this.frontFace=new xt(this),this.program=new At(this),this.activeTexture=new Je(this),this.viewport=new xe(this),this.bindFramebuffer=new ce(this),this.bindRenderbuffer=new ge(this),this.bindTexture=new qe(this),this.bindVertexBuffer=new yt(this),this.bindElementBuffer=new Vt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ut(this),this.pixelStoreUnpack=new br(this),this.pixelStoreUnpackPremultiplyAlpha=new xr(this),this.pixelStoreUnpackFlipY=new Or(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=R.getParameter(R.MAX_TEXTURE_SIZE)};tr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tr.prototype.createIndexBuffer=function(R,G){return new Ie(this,R,G)},tr.prototype.createVertexBuffer=function(R,G,I){return new ct(this,R,G,I)},tr.prototype.createRenderbuffer=function(R,G,I){var W=this.gl,te=W.createRenderbuffer();return this.bindRenderbuffer.set(te),W.renderbufferStorage(W.RENDERBUFFER,R,G,I),this.bindRenderbuffer.set(null),te},tr.prototype.createFramebuffer=function(R,G,I){return new _n(this,R,G,I)},tr.prototype.clear=function(R){var G=R.color,I=R.depth,W=this.gl,te=0;G&&(te|=W.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),typeof I!="undefined"&&(te|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),W.clear(te)},tr.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},tr.prototype.setDepthMode=function(R){R.func===this.gl.ALWAYS&&!R.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range))},tr.prototype.setStencilMode=function(R){R.test.func===this.gl.ALWAYS&&!R.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask}))},tr.prototype.setColorMode=function(R){n.deepEqual(R.blendFunction,Ne.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},tr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var pr=function(H){function R(G,I,W){var te=this;H.call(this),this.id=G,this.dispatcher=W,this.on("data",function(ee){ee.dataType==="source"&&ee.sourceDataType==="metadata"&&(te._sourceLoaded=!0),te._sourceLoaded&&!te._paused&&ee.dataType==="source"&&ee.sourceDataType==="content"&&(te.reload(),te.transform&&te.update(te.transform))}),this.on("error",function(){te._sourceErrored=!0}),this._source=_e(G,I,W,this),this._tiles={},this._cache=new Le(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){this.map=I,this._maxTileCacheSize=I?I._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(I)},R.prototype.onRemove=function(I){this._source&&this._source.onRemove&&this._source.onRemove(I)},R.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var I in this._tiles){var W=this._tiles[I];if(W.state!=="loaded"&&W.state!=="errored")return!1}return!0},R.prototype.getSource=function(){return this._source},R.prototype.pause=function(){this._paused=!0},R.prototype.resume=function(){if(this._paused){var I=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,I&&this.reload(),this.transform&&this.update(this.transform)}},R.prototype._loadTile=function(I,W){return this._source.loadTile(I,W)},R.prototype._unloadTile=function(I){if(this._source.unloadTile)return this._source.unloadTile(I,function(){})},R.prototype._abortTile=function(I){if(this._source.abortTile)return this._source.abortTile(I,function(){})},R.prototype.serialize=function(){return this._source.serialize()},R.prototype.prepare=function(I){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var W in this._tiles){var te=this._tiles[W];te.upload(I),te.prepare(this.map.style.imageManager)}},R.prototype.getIds=function(){return n.values(this._tiles).map(function(I){return I.tileID}).sort(hr).map(function(I){return I.key})},R.prototype.getRenderableIds=function(I){var W=this,te=[];for(var ee in this._tiles)this._isIdRenderable(ee,I)&&te.push(this._tiles[ee]);return I?te.sort(function(ve,Ee){var Oe=ve.tileID,vt=Ee.tileID,wt=new n.Point(Oe.canonical.x,Oe.canonical.y)._rotate(W.transform.angle),pt=new n.Point(vt.canonical.x,vt.canonical.y)._rotate(W.transform.angle);return Oe.overscaledZ-vt.overscaledZ||pt.y-wt.y||pt.x-wt.x}).map(function(ve){return ve.tileID.key}):te.map(function(ve){return ve.tileID}).sort(hr).map(function(ve){return ve.key})},R.prototype.hasRenderableParent=function(I){var W=this.findLoadedParent(I,0);return W?this._isIdRenderable(W.tileID.key):!1},R.prototype._isIdRenderable=function(I,W){return this._tiles[I]&&this._tiles[I].hasData()&&!this._coveredTiles[I]&&(W||!this._tiles[I].holdingForFade())},R.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var I in this._tiles)this._tiles[I].state!=="errored"&&this._reloadTile(I,"reloading")},R.prototype._reloadTile=function(I,W){var te=this._tiles[I];te&&(te.state!=="loading"&&(te.state=W),this._loadTile(te,this._tileLoaded.bind(this,te,I,W)))},R.prototype._tileLoaded=function(I,W,te,ee){if(ee){I.state="errored",ee.status!==404?this._source.fire(new n.ErrorEvent(ee,{tile:I})):this.update(this.transform);return}I.timeAdded=n.browser.now(),te==="expired"&&(I.refreshedUponExpiration=!0),this._setTileReloadTimer(W,I),this.getSource().type==="raster-dem"&&I.dem&&this._backfillDEM(I),this._state.initializeTileState(I,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:I,coord:I.tileID}))},R.prototype._backfillDEM=function(I){for(var W=this.getRenderableIds(),te=0;te<W.length;te++){var ee=W[te];if(I.neighboringTiles&&I.neighboringTiles[ee]){var ve=this.getTileByID(ee);Ee(I,ve),Ee(ve,I)}}function Ee(Oe,vt){Oe.needsHillshadePrepare=!0;var wt=vt.tileID.canonical.x-Oe.tileID.canonical.x,pt=vt.tileID.canonical.y-Oe.tileID.canonical.y,Be=Math.pow(2,Oe.tileID.canonical.z),$e=vt.tileID.key;wt===0&&pt===0||Math.abs(pt)>1||(Math.abs(wt)>1&&(Math.abs(wt+Be)===1?wt+=Be:Math.abs(wt-Be)===1&&(wt-=Be)),!(!vt.dem||!Oe.dem)&&(Oe.dem.backfillBorder(vt.dem,wt,pt),Oe.neighboringTiles&&Oe.neighboringTiles[$e]&&(Oe.neighboringTiles[$e].backfilled=!0)))}},R.prototype.getTile=function(I){return this.getTileByID(I.key)},R.prototype.getTileByID=function(I){return this._tiles[I]},R.prototype._retainLoadedChildren=function(I,W,te,ee){for(var ve in this._tiles){var Ee=this._tiles[ve];if(!(ee[ve]||!Ee.hasData()||Ee.tileID.overscaledZ<=W||Ee.tileID.overscaledZ>te)){for(var Oe=Ee.tileID;Ee&&Ee.tileID.overscaledZ>W+1;){var vt=Ee.tileID.scaledTo(Ee.tileID.overscaledZ-1);Ee=this._tiles[vt.key],Ee&&Ee.hasData()&&(Oe=vt)}for(var wt=Oe;wt.overscaledZ>W;)if(wt=wt.scaledTo(wt.overscaledZ-1),I[wt.key]){ee[Oe.key]=Oe;break}}}},R.prototype.findLoadedParent=function(I,W){if(I.key in this._loadedParentTiles){var te=this._loadedParentTiles[I.key];return te&&te.tileID.overscaledZ>=W?te:null}for(var ee=I.overscaledZ-1;ee>=W;ee--){var ve=I.scaledTo(ee),Ee=this._getLoadedTile(ve);if(Ee)return Ee}},R.prototype._getLoadedTile=function(I){var W=this._tiles[I.key];if(W&&W.hasData())return W;var te=this._cache.getByKey(I.wrapped().key);return te},R.prototype.updateCacheSize=function(I){var W=Math.ceil(I.width/this._source.tileSize)+1,te=Math.ceil(I.height/this._source.tileSize)+1,ee=W*te,ve=5,Ee=Math.floor(ee*ve),Oe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ee):Ee;this._cache.setMaxSize(Oe)},R.prototype.handleWrapJump=function(I){var W=this._prevLng===void 0?I:this._prevLng,te=I-W,ee=te/360,ve=Math.round(ee);if(this._prevLng=I,ve){var Ee={};for(var Oe in this._tiles){var vt=this._tiles[Oe];vt.tileID=vt.tileID.unwrapTo(vt.tileID.wrap+ve),Ee[vt.tileID.key]=vt}this._tiles=Ee;for(var wt in this._timers)clearTimeout(this._timers[wt]),delete this._timers[wt];for(var pt in this._tiles){var Be=this._tiles[pt];this._setTileReloadTimer(pt,Be)}}},R.prototype.update=function(I){var W=this;if(this.transform=I,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(I),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var te;this.used?this._source.tileID?te=I.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Dr){return new n.OverscaledTileID(Dr.canonical.z,Dr.wrap,Dr.canonical.z,Dr.canonical.x,Dr.canonical.y)}):(te=I.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(te=te.filter(function(Dr){return W._source.hasTile(Dr)}))):te=[];var ee=I.coveringZoomLevel(this._source),ve=Math.max(ee-R.maxOverzooming,this._source.minzoom),Ee=Math.max(ee+R.maxUnderzooming,this._source.minzoom),Oe=this._updateRetainedTiles(te,ee);if(Rr(this._source.type)){for(var vt={},wt={},pt=Object.keys(Oe),Be=0,$e=pt;Be<$e.length;Be+=1){var ot=$e[Be],Tt=Oe[ot],Lt=this._tiles[ot];if(!(!Lt||Lt.fadeEndTime&&Lt.fadeEndTime<=n.browser.now())){var Pt=this.findLoadedParent(Tt,ve);Pt&&(this._addTile(Pt.tileID),vt[Pt.tileID.key]=Pt.tileID),wt[ot]=Tt}}this._retainLoadedChildren(wt,ee,Ee,Oe);for(var Xt in vt)Oe[Xt]||(this._coveredTiles[Xt]=!0,Oe[Xt]=vt[Xt])}for(var Nt in Oe)this._tiles[Nt].clearFadeHold();for(var Dt=n.keysDifference(this._tiles,Oe),Zt=0,Ct=Dt;Zt<Ct.length;Zt+=1){var ar=Ct[Zt],yr=this._tiles[ar];yr.hasSymbolBuckets&&!yr.holdingForFade()?yr.setHoldDuration(this.map._fadeDuration):(!yr.hasSymbolBuckets||yr.symbolFadeFinished())&&this._removeTile(ar)}this._updateLoadedParentTileCache()}},R.prototype.releaseSymbolFadeTiles=function(){for(var I in this._tiles)this._tiles[I].holdingForFade()&&this._removeTile(I)},R.prototype._updateRetainedTiles=function(I,W){for(var te={},ee={},ve=Math.max(W-R.maxOverzooming,this._source.minzoom),Ee=Math.max(W+R.maxUnderzooming,this._source.minzoom),Oe={},vt=0,wt=I;vt<wt.length;vt+=1){var pt=wt[vt],Be=this._addTile(pt);te[pt.key]=pt,!Be.hasData()&&W<this._source.maxzoom&&(Oe[pt.key]=pt)}this._retainLoadedChildren(Oe,W,Ee,te);for(var $e=0,ot=I;$e<ot.length;$e+=1){var Tt=ot[$e],Lt=this._tiles[Tt.key];if(!Lt.hasData()){if(W+1>this._source.maxzoom){var Pt=Tt.children(this._source.maxzoom)[0],Xt=this.getTile(Pt);if(Xt&&Xt.hasData()){te[Pt.key]=Pt;continue}}else{var Nt=Tt.children(this._source.maxzoom);if(te[Nt[0].key]&&te[Nt[1].key]&&te[Nt[2].key]&&te[Nt[3].key])continue}for(var Dt=Lt.wasRequested(),Zt=Tt.overscaledZ-1;Zt>=ve;--Zt){var Ct=Tt.scaledTo(Zt);if(ee[Ct.key]||(ee[Ct.key]=!0,Lt=this.getTile(Ct),!Lt&&Dt&&(Lt=this._addTile(Ct)),Lt&&(te[Ct.key]=Ct,Dt=Lt.wasRequested(),Lt.hasData())))break}}}return te},R.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var I in this._tiles){for(var W=[],te=void 0,ee=this._tiles[I].tileID;ee.overscaledZ>0;){if(ee.key in this._loadedParentTiles){te=this._loadedParentTiles[ee.key];break}W.push(ee.key);var ve=ee.scaledTo(ee.overscaledZ-1);if(te=this._getLoadedTile(ve),te)break;ee=ve}for(var Ee=0,Oe=W;Ee<Oe.length;Ee+=1){var vt=Oe[Ee];this._loadedParentTiles[vt]=te}}},R.prototype._addTile=function(I){var W=this._tiles[I.key];if(W)return W;W=this._cache.getAndRemove(I),W&&(this._setTileReloadTimer(I.key,W),W.tileID=I,this._state.initializeTileState(W,this.map?this.map.painter:null),this._cacheTimers[I.key]&&(clearTimeout(this._cacheTimers[I.key]),delete this._cacheTimers[I.key],this._setTileReloadTimer(I.key,W)));var te=!!W;return te||(W=new n.Tile(I,this._source.tileSize*I.overscaleFactor()),this._loadTile(W,this._tileLoaded.bind(this,W,I.key,W.state))),W?(W.uses++,this._tiles[I.key]=W,te||this._source.fire(new n.Event("dataloading",{tile:W,coord:W.tileID,dataType:"source"})),W):null},R.prototype._setTileReloadTimer=function(I,W){var te=this;I in this._timers&&(clearTimeout(this._timers[I]),delete this._timers[I]);var ee=W.getExpiryTimeout();ee&&(this._timers[I]=setTimeout(function(){te._reloadTile(I,"expired"),delete te._timers[I]},ee))},R.prototype._removeTile=function(I){var W=this._tiles[I];W&&(W.uses--,delete this._tiles[I],this._timers[I]&&(clearTimeout(this._timers[I]),delete this._timers[I]),!(W.uses>0)&&(W.hasData()&&W.state!=="reloading"?this._cache.add(W.tileID,W,W.getExpiryTimeout()):(W.aborted=!0,this._abortTile(W),this._unloadTile(W))))},R.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var I in this._tiles)this._removeTile(I);this._cache.reset()},R.prototype.tilesIn=function(I,W,te){var ee=this,ve=[],Ee=this.transform;if(!Ee)return ve;for(var Oe=te?Ee.getCameraQueryGeometry(I):I,vt=I.map(function(Zt){return Ee.pointCoordinate(Zt)}),wt=Oe.map(function(Zt){return Ee.pointCoordinate(Zt)}),pt=this.getIds(),Be=1/0,$e=1/0,ot=-1/0,Tt=-1/0,Lt=0,Pt=wt;Lt<Pt.length;Lt+=1){var Xt=Pt[Lt];Be=Math.min(Be,Xt.x),$e=Math.min($e,Xt.y),ot=Math.max(ot,Xt.x),Tt=Math.max(Tt,Xt.y)}for(var Nt=function(Zt){var Ct=ee._tiles[pt[Zt]];if(!Ct.holdingForFade()){var ar=Ct.tileID,yr=Math.pow(2,Ee.zoom-Ct.tileID.overscaledZ),Dr=W*Ct.queryPadding*n.EXTENT/Ct.tileSize/yr,ln=[ar.getTilePoint(new n.MercatorCoordinate(Be,$e)),ar.getTilePoint(new n.MercatorCoordinate(ot,Tt))];if(ln[0].x-Dr<n.EXTENT&&ln[0].y-Dr<n.EXTENT&&ln[1].x+Dr>=0&&ln[1].y+Dr>=0){var Xr=vt.map(function(ii){return ar.getTilePoint(ii)}),dn=wt.map(function(ii){return ar.getTilePoint(ii)});ve.push({tile:Ct,tileID:ar,queryGeometry:Xr,cameraQueryGeometry:dn,scale:yr})}}},Dt=0;Dt<pt.length;Dt++)Nt(Dt);return ve},R.prototype.getVisibleCoordinates=function(I){for(var W=this,te=this.getRenderableIds(I).map(function(Oe){return W._tiles[Oe].tileID}),ee=0,ve=te;ee<ve.length;ee+=1){var Ee=ve[ee];Ee.posMatrix=this.transform.calculatePosMatrix(Ee.toUnwrapped())}return te},R.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rr(this._source.type))for(var I in this._tiles){var W=this._tiles[I];if(W.fadeEndTime!==void 0&&W.fadeEndTime>=n.browser.now())return!0}return!1},R.prototype.setFeatureState=function(I,W,te){I=I||"_geojsonTileLayer",this._state.updateState(I,W,te)},R.prototype.removeFeatureState=function(I,W,te){I=I||"_geojsonTileLayer",this._state.removeFeatureState(I,W,te)},R.prototype.getFeatureState=function(I,W){return I=I||"_geojsonTileLayer",this._state.getState(I,W)},R.prototype.setDependencies=function(I,W,te){var ee=this._tiles[I];ee&&ee.setDependencies(W,te)},R.prototype.reloadTilesForDependencies=function(I,W){for(var te in this._tiles){var ee=this._tiles[te];ee.hasDependency(I,W)&&this._reloadTile(te,"reloading")}this._cache.filter(function(ve){return!ve.hasDependency(I,W)})},R}(n.Evented);pr.maxOverzooming=10,pr.maxUnderzooming=3;function hr(H,R){var G=Math.abs(H.wrap*2)-+(H.wrap<0),I=Math.abs(R.wrap*2)-+(R.wrap<0);return H.overscaledZ-R.overscaledZ||I-G||R.canonical.y-H.canonical.y||R.canonical.x-H.canonical.x}function Rr(H){return H==="raster"||H==="image"||H==="video"}function Gr(){return new n.window.Worker(Ja.workerUrl)}var Yr="mapboxgl_preloaded_worker_pool",vn=function(){this.active={}};vn.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<vn.workerCount;)this.workers.push(new Gr);return this.active[R]=!0,this.workers.slice()},vn.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},vn.prototype.isPreloaded=function(){return!!this.active[Yr]},vn.prototype.numActive=function(){return Object.keys(this.active).length};var Wr=Math.floor(n.browser.hardwareConcurrency/2);vn.workerCount=Math.max(Math.min(Wr,6),1);var qn;function vi(){return qn||(qn=new vn),qn}function Mi(){var H=vi();H.acquire(Yr)}function Ui(){var H=qn;H&&(H.isPreloaded()&&H.numActive()===1?(H.release(Yr),qn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function ji(H,R){var G={};for(var I in H)I!=="ref"&&(G[I]=H[I]);return n.refProperties.forEach(function(W){W in R&&(G[W]=R[W])}),G}function ea(H){H=H.slice();for(var R=Object.create(null),G=0;G<H.length;G++)R[H[G].id]=H[G];for(var I=0;I<H.length;I++)"ref"in H[I]&&(H[I]=ji(H[I],R[H[I].ref]));return H}function Ra(){var H={},R=n.styleSpec.$version;for(var G in n.styleSpec.$root){var I=n.styleSpec.$root[G];if(I.required){var W=null;G==="version"?W=R:I.type==="array"?W=[]:W={},W!=null&&(H[G]=W)}}return H}var Li={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Yn(H,R,G){G.push({command:Li.addSource,args:[H,R[H]]})}function zi(H,R,G){R.push({command:Li.removeSource,args:[H]}),G[H]=!0}function ya(H,R,G,I){zi(H,G,I),Yn(H,R,G)}function zn(H,R,G){var I;for(I in H[G])if(H[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;for(I in R[G])if(R[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;return!0}function Ze(H,R,G,I){H=H||{},R=R||{};var W;for(W in H)H.hasOwnProperty(W)&&(R.hasOwnProperty(W)||zi(W,G,I));for(W in R)R.hasOwnProperty(W)&&(H.hasOwnProperty(W)?n.deepEqual(H[W],R[W])||(H[W].type==="geojson"&&R[W].type==="geojson"&&zn(H,R,W)?G.push({command:Li.setGeoJSONSourceData,args:[W,R[W].data]}):ya(W,R,G,I)):Yn(W,R,G))}function Bt(H,R,G,I,W,te){H=H||{},R=R||{};var ee;for(ee in H)H.hasOwnProperty(ee)&&(n.deepEqual(H[ee],R[ee])||G.push({command:te,args:[I,ee,R[ee],W]}));for(ee in R)!R.hasOwnProperty(ee)||H.hasOwnProperty(ee)||n.deepEqual(H[ee],R[ee])||G.push({command:te,args:[I,ee,R[ee],W]})}function sr(H){return H.id}function _r(H,R){return H[R.id]=R,H}function Jr(H,R,G){H=H||[],R=R||[];var I=H.map(sr),W=R.map(sr),te=H.reduce(_r,{}),ee=R.reduce(_r,{}),ve=I.slice(),Ee=Object.create(null),Oe,vt,wt,pt,Be,$e,ot;for(Oe=0,vt=0;Oe<I.length;Oe++)wt=I[Oe],ee.hasOwnProperty(wt)?vt++:(G.push({command:Li.removeLayer,args:[wt]}),ve.splice(ve.indexOf(wt,vt),1));for(Oe=0,vt=0;Oe<W.length;Oe++)wt=W[W.length-1-Oe],ve[ve.length-1-Oe]!==wt&&(te.hasOwnProperty(wt)?(G.push({command:Li.removeLayer,args:[wt]}),ve.splice(ve.lastIndexOf(wt,ve.length-vt),1)):vt++,$e=ve[ve.length-Oe],G.push({command:Li.addLayer,args:[ee[wt],$e]}),ve.splice(ve.length-Oe,0,wt),Ee[wt]=!0);for(Oe=0;Oe<W.length;Oe++)if(wt=W[Oe],pt=te[wt],Be=ee[wt],!(Ee[wt]||n.deepEqual(pt,Be))){if(!n.deepEqual(pt.source,Be.source)||!n.deepEqual(pt["source-layer"],Be["source-layer"])||!n.deepEqual(pt.type,Be.type)){G.push({command:Li.removeLayer,args:[wt]}),$e=ve[ve.lastIndexOf(wt)+1],G.push({command:Li.addLayer,args:[Be,$e]});continue}Bt(pt.layout,Be.layout,G,wt,null,Li.setLayoutProperty),Bt(pt.paint,Be.paint,G,wt,null,Li.setPaintProperty),n.deepEqual(pt.filter,Be.filter)||G.push({command:Li.setFilter,args:[wt,Be.filter]}),(!n.deepEqual(pt.minzoom,Be.minzoom)||!n.deepEqual(pt.maxzoom,Be.maxzoom))&&G.push({command:Li.setLayerZoomRange,args:[wt,Be.minzoom,Be.maxzoom]});for(ot in pt)pt.hasOwnProperty(ot)&&(ot==="layout"||ot==="paint"||ot==="filter"||ot==="metadata"||ot==="minzoom"||ot==="maxzoom"||(ot.indexOf("paint.")===0?Bt(pt[ot],Be[ot],G,wt,ot.slice(6),Li.setPaintProperty):n.deepEqual(pt[ot],Be[ot])||G.push({command:Li.setLayerProperty,args:[wt,ot,Be[ot]]})));for(ot in Be)!Be.hasOwnProperty(ot)||pt.hasOwnProperty(ot)||ot==="layout"||ot==="paint"||ot==="filter"||ot==="metadata"||ot==="minzoom"||ot==="maxzoom"||(ot.indexOf("paint.")===0?Bt(pt[ot],Be[ot],G,wt,ot.slice(6),Li.setPaintProperty):n.deepEqual(pt[ot],Be[ot])||G.push({command:Li.setLayerProperty,args:[wt,ot,Be[ot]]}))}}function on(H,R){if(!H)return[{command:Li.setStyle,args:[R]}];var G=[];try{if(!n.deepEqual(H.version,R.version))return[{command:Li.setStyle,args:[R]}];n.deepEqual(H.center,R.center)||G.push({command:Li.setCenter,args:[R.center]}),n.deepEqual(H.zoom,R.zoom)||G.push({command:Li.setZoom,args:[R.zoom]}),n.deepEqual(H.bearing,R.bearing)||G.push({command:Li.setBearing,args:[R.bearing]}),n.deepEqual(H.pitch,R.pitch)||G.push({command:Li.setPitch,args:[R.pitch]}),n.deepEqual(H.sprite,R.sprite)||G.push({command:Li.setSprite,args:[R.sprite]}),n.deepEqual(H.glyphs,R.glyphs)||G.push({command:Li.setGlyphs,args:[R.glyphs]}),n.deepEqual(H.transition,R.transition)||G.push({command:Li.setTransition,args:[R.transition]}),n.deepEqual(H.light,R.light)||G.push({command:Li.setLight,args:[R.light]});var I={},W=[];Ze(H.sources,R.sources,W,I);var te=[];H.layers&&H.layers.forEach(function(ee){I[ee.source]?G.push({command:Li.removeLayer,args:[ee.id]}):te.push(ee)}),G=G.concat(W),Jr(te,R.layers,G)}catch(ee){console.warn("Unable to compute style diff:",ee),G=[{command:Li.setStyle,args:[R]}]}return G}var pn=function(R,G){this.reset(R,G)};pn.prototype.reset=function(R,G){this.points=R||[],this._distances=[0];for(var I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,this.length*.5),this.paddedLength=this.length-this.padding*2},pn.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=n.clamp(R,0,1);for(var G=1,I=this._distances[G],W=R*this.paddedLength+this.padding;I<W&&G<this._distances.length;)I=this._distances[++G];var te=G-1,ee=this._distances[te],ve=I-ee,Ee=ve>0?(W-ee)/ve:0;return this.points[te].mult(1-Ee).add(this.points[G].mult(Ee))};var Cr=function(R,G,I){var W=this.boxCells=[],te=this.circleCells=[];this.xCellCount=Math.ceil(R/I),this.yCellCount=Math.ceil(G/I);for(var ee=0;ee<this.xCellCount*this.yCellCount;ee++)W.push([]),te.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=G,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};Cr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cr.prototype.insert=function(R,G,I,W,te){this._forEachCell(G,I,W,te,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(G),this.bboxes.push(I),this.bboxes.push(W),this.bboxes.push(te)},Cr.prototype.insertCircle=function(R,G,I,W){this._forEachCell(G-W,I-W,G+W,I+W,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(G),this.circles.push(I),this.circles.push(W)},Cr.prototype._insertBoxCell=function(R,G,I,W,te,ee){this.boxCells[te].push(ee)},Cr.prototype._insertCircleCell=function(R,G,I,W,te,ee){this.circleCells[te].push(ee)},Cr.prototype._query=function(R,G,I,W,te,ee){if(I<0||R>this.width||W<0||G>this.height)return te?!1:[];var ve=[];if(R<=0&&G<=0&&this.width<=I&&this.height<=W){if(te)return!0;for(var Ee=0;Ee<this.boxKeys.length;Ee++)ve.push({key:this.boxKeys[Ee],x1:this.bboxes[Ee*4],y1:this.bboxes[Ee*4+1],x2:this.bboxes[Ee*4+2],y2:this.bboxes[Ee*4+3]});for(var Oe=0;Oe<this.circleKeys.length;Oe++){var vt=this.circles[Oe*3],wt=this.circles[Oe*3+1],pt=this.circles[Oe*3+2];ve.push({key:this.circleKeys[Oe],x1:vt-pt,y1:wt-pt,x2:vt+pt,y2:wt+pt})}return ee?ve.filter(ee):ve}else{var Be={hitTest:te,seenUids:{box:{},circle:{}}};return this._forEachCell(R,G,I,W,this._queryCell,ve,Be,ee),te?ve.length>0:ve}},Cr.prototype._queryCircle=function(R,G,I,W,te){var ee=R-I,ve=R+I,Ee=G-I,Oe=G+I;if(ve<0||ee>this.width||Oe<0||Ee>this.height)return W?!1:[];var vt=[],wt={hitTest:W,circle:{x:R,y:G,radius:I},seenUids:{box:{},circle:{}}};return this._forEachCell(ee,Ee,ve,Oe,this._queryCellCircle,vt,wt,te),W?vt.length>0:vt},Cr.prototype.query=function(R,G,I,W,te){return this._query(R,G,I,W,!1,te)},Cr.prototype.hitTest=function(R,G,I,W,te){return this._query(R,G,I,W,!0,te)},Cr.prototype.hitTestCircle=function(R,G,I,W){return this._queryCircle(R,G,I,!0,W)},Cr.prototype._queryCell=function(R,G,I,W,te,ee,ve,Ee){var Oe=ve.seenUids,vt=this.boxCells[te];if(vt!==null)for(var wt=this.bboxes,pt=0,Be=vt;pt<Be.length;pt+=1){var $e=Be[pt];if(!Oe.box[$e]){Oe.box[$e]=!0;var ot=$e*4;if(R<=wt[ot+2]&&G<=wt[ot+3]&&I>=wt[ot+0]&&W>=wt[ot+1]&&(!Ee||Ee(this.boxKeys[$e]))){if(ve.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[$e],x1:wt[ot],y1:wt[ot+1],x2:wt[ot+2],y2:wt[ot+3]})}}}var Tt=this.circleCells[te];if(Tt!==null)for(var Lt=this.circles,Pt=0,Xt=Tt;Pt<Xt.length;Pt+=1){var Nt=Xt[Pt];if(!Oe.circle[Nt]){Oe.circle[Nt]=!0;var Dt=Nt*3;if(this._circleAndRectCollide(Lt[Dt],Lt[Dt+1],Lt[Dt+2],R,G,I,W)&&(!Ee||Ee(this.circleKeys[Nt]))){if(ve.hitTest)return ee.push(!0),!0;var Zt=Lt[Dt],Ct=Lt[Dt+1],ar=Lt[Dt+2];ee.push({key:this.circleKeys[Nt],x1:Zt-ar,y1:Ct-ar,x2:Zt+ar,y2:Ct+ar})}}}},Cr.prototype._queryCellCircle=function(R,G,I,W,te,ee,ve,Ee){var Oe=ve.circle,vt=ve.seenUids,wt=this.boxCells[te];if(wt!==null)for(var pt=this.bboxes,Be=0,$e=wt;Be<$e.length;Be+=1){var ot=$e[Be];if(!vt.box[ot]){vt.box[ot]=!0;var Tt=ot*4;if(this._circleAndRectCollide(Oe.x,Oe.y,Oe.radius,pt[Tt+0],pt[Tt+1],pt[Tt+2],pt[Tt+3])&&(!Ee||Ee(this.boxKeys[ot])))return ee.push(!0),!0}}var Lt=this.circleCells[te];if(Lt!==null)for(var Pt=this.circles,Xt=0,Nt=Lt;Xt<Nt.length;Xt+=1){var Dt=Nt[Xt];if(!vt.circle[Dt]){vt.circle[Dt]=!0;var Zt=Dt*3;if(this._circlesCollide(Pt[Zt],Pt[Zt+1],Pt[Zt+2],Oe.x,Oe.y,Oe.radius)&&(!Ee||Ee(this.circleKeys[Dt])))return ee.push(!0),!0}}},Cr.prototype._forEachCell=function(R,G,I,W,te,ee,ve,Ee){for(var Oe=this._convertToXCellCoord(R),vt=this._convertToYCellCoord(G),wt=this._convertToXCellCoord(I),pt=this._convertToYCellCoord(W),Be=Oe;Be<=wt;Be++)for(var $e=vt;$e<=pt;$e++){var ot=this.xCellCount*$e+Be;if(te.call(this,R,G,I,W,ot,ee,ve,Ee))return}},Cr.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},Cr.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},Cr.prototype._circlesCollide=function(R,G,I,W,te,ee){var ve=W-R,Ee=te-G,Oe=I+ee;return Oe*Oe>ve*ve+Ee*Ee},Cr.prototype._circleAndRectCollide=function(R,G,I,W,te,ee,ve){var Ee=(ee-W)/2,Oe=Math.abs(R-(W+Ee));if(Oe>Ee+I)return!1;var vt=(ve-te)/2,wt=Math.abs(G-(te+vt));if(wt>vt+I)return!1;if(Oe<=Ee||wt<=vt)return!0;var pt=Oe-Ee,Be=wt-vt;return pt*pt+Be*Be<=I*I};function cn(H,R,G,I,W){var te=n.create();return R?(n.scale(te,te,[1/W,1/W,1]),G||n.rotateZ(te,te,I.angle)):n.multiply(te,I.labelPlaneMatrix,H),te}function gi(H,R,G,I,W){if(R){var te=n.clone(H);return n.scale(te,te,[W,W,1]),G||n.rotateZ(te,te,-I.angle),te}else return I.glCoordMatrix}function Hn(H,R){var G=[H.x,H.y,0,1];il(G,G,R);var I=G[3];return{point:new n.Point(G[0]/I,G[1]/I),signedDistanceFromCamera:I}}function qi(H,R){return .5+.5*(H/R)}function fa(H,R){var G=H[0]/H[3],I=H[1]/H[3],W=G>=-R[0]&&G<=R[0]&&I>=-R[1]&&I<=R[1];return W}function eo(H,R,G,I,W,te,ee,ve){var Ee=I?H.textSizeData:H.iconSizeData,Oe=n.evaluateSizeForZoom(Ee,G.transform.zoom),vt=[256/G.width*2+1,256/G.height*2+1],wt=I?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;wt.clear();for(var pt=H.lineVertexArray,Be=I?H.text.placedSymbolArray:H.icon.placedSymbolArray,$e=G.transform.width/G.transform.height,ot=!1,Tt=0;Tt<Be.length;Tt++){var Lt=Be.get(Tt);if(Lt.hidden||Lt.writingMode===n.WritingMode.vertical&&!ot){as(Lt.numGlyphs,wt);continue}ot=!1;var Pt=[Lt.anchorX,Lt.anchorY,0,1];if(n.transformMat4(Pt,Pt,R),!fa(Pt,vt)){as(Lt.numGlyphs,wt);continue}var Xt=Pt[3],Nt=qi(G.transform.cameraToCenterDistance,Xt),Dt=n.evaluateSizeForFeature(Ee,Oe,Lt),Zt=ee?Dt/Nt:Dt*Nt,Ct=new n.Point(Lt.anchorX,Lt.anchorY),ar=Hn(Ct,W).point,yr={},Dr=ja(Lt,Zt,!1,ve,R,W,te,H.glyphOffsetArray,pt,wt,ar,Ct,yr,$e);ot=Dr.useVertical,(Dr.notEnoughRoom||ot||Dr.needsFlipping&&ja(Lt,Zt,!0,ve,R,W,te,H.glyphOffsetArray,pt,wt,ar,Ct,yr,$e).notEnoughRoom)&&as(Lt.numGlyphs,wt)}I?H.text.dynamicLayoutVertexBuffer.updateData(wt):H.icon.dynamicLayoutVertexBuffer.updateData(wt)}function ma(H,R,G,I,W,te,ee,ve,Ee,Oe,vt){var wt=ve.glyphStartIndex+ve.numGlyphs,pt=ve.lineStartIndex,Be=ve.lineStartIndex+ve.lineLength,$e=R.getoffsetX(ve.glyphStartIndex),ot=R.getoffsetX(wt-1),Tt=Uo(H*$e,G,I,W,te,ee,ve.segment,pt,Be,Ee,Oe,vt);if(!Tt)return null;var Lt=Uo(H*ot,G,I,W,te,ee,ve.segment,pt,Be,Ee,Oe,vt);return Lt?{first:Tt,last:Lt}:null}function so(H,R,G,I){if(H===n.WritingMode.horizontal){var W=Math.abs(G.y-R.y),te=Math.abs(G.x-R.x)*I;if(W>te)return{useVertical:!0}}return(H===n.WritingMode.vertical?R.y<G.y:R.x>G.x)?{needsFlipping:!0}:null}function ja(H,R,G,I,W,te,ee,ve,Ee,Oe,vt,wt,pt,Be){var $e=R/24,ot=H.lineOffsetX*$e,Tt=H.lineOffsetY*$e,Lt;if(H.numGlyphs>1){var Pt=H.glyphStartIndex+H.numGlyphs,Xt=H.lineStartIndex,Nt=H.lineStartIndex+H.lineLength,Dt=ma($e,ve,ot,Tt,G,vt,wt,H,Ee,te,pt);if(!Dt)return{notEnoughRoom:!0};var Zt=Hn(Dt.first.point,ee).point,Ct=Hn(Dt.last.point,ee).point;if(I&&!G){var ar=so(H.writingMode,Zt,Ct,Be);if(ar)return ar}Lt=[Dt.first];for(var yr=H.glyphStartIndex+1;yr<Pt-1;yr++)Lt.push(Uo($e*ve.getoffsetX(yr),ot,Tt,G,vt,wt,H.segment,Xt,Nt,Ee,te,pt));Lt.push(Dt.last)}else{if(I&&!G){var Dr=Hn(wt,W).point,ln=H.lineStartIndex+H.segment+1,Xr=new n.Point(Ee.getx(ln),Ee.gety(ln)),dn=Hn(Xr,W),ii=dn.signedDistanceFromCamera>0?dn.point:Xo(wt,Xr,Dr,1,W),Nn=so(H.writingMode,Dr,ii,Be);if(Nn)return Nn}var un=Uo($e*ve.getoffsetX(H.glyphStartIndex),ot,Tt,G,vt,wt,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,Ee,te,pt);if(!un)return{notEnoughRoom:!0};Lt=[un]}for(var Ln=0,Mn=Lt;Ln<Mn.length;Ln+=1){var Kn=Mn[Ln];n.addDynamicAttributes(Oe,Kn.point,Kn.angle)}return{}}function Xo(H,R,G,I,W){var te=Hn(H.add(H.sub(R)._unit()),W).point,ee=G.sub(te);return G.add(ee._mult(I/ee.mag()))}function Uo(H,R,G,I,W,te,ee,ve,Ee,Oe,vt,wt){var pt=I?H-R:H+R,Be=pt>0?1:-1,$e=0;I&&(Be*=-1,$e=Math.PI),Be<0&&($e+=Math.PI);for(var ot=Be>0?ve+ee:ve+ee+1,Tt=W,Lt=W,Pt=0,Xt=0,Nt=Math.abs(pt),Dt=[];Pt+Xt<=Nt;){if(ot+=Be,ot<ve||ot>=Ee)return null;if(Lt=Tt,Dt.push(Tt),Tt=wt[ot],Tt===void 0){var Zt=new n.Point(Oe.getx(ot),Oe.gety(ot)),Ct=Hn(Zt,vt);if(Ct.signedDistanceFromCamera>0)Tt=wt[ot]=Ct.point;else{var ar=ot-Be,yr=Pt===0?te:new n.Point(Oe.getx(ar),Oe.gety(ar));Tt=Xo(yr,Zt,Lt,Nt-Pt+1,vt)}}Pt+=Xt,Xt=Lt.dist(Tt)}var Dr=(Nt-Pt)/Xt,ln=Tt.sub(Lt),Xr=ln.mult(Dr)._add(Lt);Xr._add(ln._unit()._perp()._mult(G*Be));var dn=$e+Math.atan2(Tt.y-Lt.y,Tt.x-Lt.x);return Dt.push(Xr),{point:Xr,angle:dn,path:Dt}}var ms=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function as(H,R){for(var G=0;G<H;G++){var I=R.length;R.resize(I+4),R.float32.set(ms,I*3)}}function il(H,R,G){var I=R[0],W=R[1];return H[0]=G[0]*I+G[4]*W+G[12],H[1]=G[1]*I+G[5]*W+G[13],H[3]=G[3]*I+G[7]*W+G[15],H}var oo=100,cs=function(R,G,I){G===void 0&&(G=new Cr(R.width+2*oo,R.height+2*oo,25)),I===void 0&&(I=new Cr(R.width+2*oo,R.height+2*oo,25)),this.transform=R,this.grid=G,this.ignoredGrid=I,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+oo,this.screenBottomBoundary=R.height+oo,this.gridRightBoundary=R.width+2*oo,this.gridBottomBoundary=R.height+2*oo};cs.prototype.placeCollisionBox=function(R,G,I,W,te){var ee=this.projectAndGetPerspectiveRatio(W,R.anchorPointX,R.anchorPointY),ve=I*ee.perspectiveRatio,Ee=R.x1*ve+ee.point.x,Oe=R.y1*ve+ee.point.y,vt=R.x2*ve+ee.point.x,wt=R.y2*ve+ee.point.y;return!this.isInsideGrid(Ee,Oe,vt,wt)||!G&&this.grid.hitTest(Ee,Oe,vt,wt,te)?{box:[],offscreen:!1}:{box:[Ee,Oe,vt,wt],offscreen:this.isOffscreen(Ee,Oe,vt,wt)}},cs.prototype.placeCollisionCircles=function(R,G,I,W,te,ee,ve,Ee,Oe,vt,wt,pt,Be){var $e=[],ot=new n.Point(G.anchorX,G.anchorY),Tt=Hn(ot,ee),Lt=qi(this.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),Pt=vt?te/Lt:te*Lt,Xt=Pt/n.ONE_EM,Nt=Hn(ot,ve).point,Dt={},Zt=G.lineOffsetX*Xt,Ct=G.lineOffsetY*Xt,ar=ma(Xt,W,Zt,Ct,!1,Nt,ot,G,I,ve,Dt),yr=!1,Dr=!1,ln=!0;if(ar){for(var Xr=pt*.5*Lt+Be,dn=new n.Point(-oo,-oo),ii=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Nn=new pn,un=ar.first,Ln=ar.last,Mn=[],Kn=un.path.length-1;Kn>=1;Kn--)Mn.push(un.path[Kn]);for(var xi=1;xi<Ln.path.length;xi++)Mn.push(Ln.path[xi]);var Da=Xr*2.5;if(Ee){var Pa=Mn.map(function(Md){return Hn(Md,Ee)});Pa.some(function(Md){return Md.signedDistanceFromCamera<=0})?Mn=[]:Mn=Pa.map(function(Md){return Md.point})}var _o=[];if(Mn.length>0){for(var ua=Mn[0].clone(),Qa=Mn[0].clone(),Vo=1;Vo<Mn.length;Vo++)ua.x=Math.min(ua.x,Mn[Vo].x),ua.y=Math.min(ua.y,Mn[Vo].y),Qa.x=Math.max(Qa.x,Mn[Vo].x),Qa.y=Math.max(Qa.y,Mn[Vo].y);ua.x>=dn.x&&Qa.x<=ii.x&&ua.y>=dn.y&&Qa.y<=ii.y?_o=[Mn]:Qa.x<dn.x||ua.x>ii.x||Qa.y<dn.y||ua.y>ii.y?_o=[]:_o=n.clipLine([Mn],dn.x,dn.y,ii.x,ii.y)}for(var ml=0,Wv=_o;ml<Wv.length;ml+=1){var Xv=Wv[ml];Nn.reset(Xv,Xr*.25);var Td=0;Nn.length<=.5*Xr?Td=1:Td=Math.ceil(Nn.paddedLength/Da)+1;for(var Xd=0;Xd<Td;Xd++){var Mg=Xd/Math.max(Td-1,1),Zd=Nn.lerp(Mg),nh=Zd.x+oo,jd=Zd.y+oo;$e.push(nh,jd,Xr,0);var zh=nh-Xr,ih=jd-Xr,Ad=nh+Xr,Xp=jd+Xr;if(ln=ln&&this.isOffscreen(zh,ih,Ad,Xp),Dr=Dr||this.isInsideGrid(zh,ih,Ad,Xp),!R&&this.grid.hitTestCircle(nh,jd,Xr,wt)&&(yr=!0,!Oe))return{circles:[],offscreen:!1,collisionDetected:yr}}}}return{circles:!Oe&&yr||!Dr?[]:$e,offscreen:ln,collisionDetected:yr}},cs.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],I=1/0,W=1/0,te=-1/0,ee=-1/0,ve=0,Ee=R;ve<Ee.length;ve+=1){var Oe=Ee[ve],vt=new n.Point(Oe.x+oo,Oe.y+oo);I=Math.min(I,vt.x),W=Math.min(W,vt.y),te=Math.max(te,vt.x),ee=Math.max(ee,vt.y),G.push(vt)}for(var wt=this.grid.query(I,W,te,ee).concat(this.ignoredGrid.query(I,W,te,ee)),pt={},Be={},$e=0,ot=wt;$e<ot.length;$e+=1){var Tt=ot[$e],Lt=Tt.key;if(pt[Lt.bucketInstanceId]===void 0&&(pt[Lt.bucketInstanceId]={}),!pt[Lt.bucketInstanceId][Lt.featureIndex]){var Pt=[new n.Point(Tt.x1,Tt.y1),new n.Point(Tt.x2,Tt.y1),new n.Point(Tt.x2,Tt.y2),new n.Point(Tt.x1,Tt.y2)];n.polygonIntersectsPolygon(G,Pt)&&(pt[Lt.bucketInstanceId][Lt.featureIndex]=!0,Be[Lt.bucketInstanceId]===void 0&&(Be[Lt.bucketInstanceId]=[]),Be[Lt.bucketInstanceId].push(Lt.featureIndex))}}return Be},cs.prototype.insertCollisionBox=function(R,G,I,W,te){var ee=G?this.ignoredGrid:this.grid,ve={bucketInstanceId:I,featureIndex:W,collisionGroupID:te};ee.insert(ve,R[0],R[1],R[2],R[3])},cs.prototype.insertCollisionCircles=function(R,G,I,W,te){for(var ee=G?this.ignoredGrid:this.grid,ve={bucketInstanceId:I,featureIndex:W,collisionGroupID:te},Ee=0;Ee<R.length;Ee+=4)ee.insertCircle(ve,R[Ee],R[Ee+1],R[Ee+2])},cs.prototype.projectAndGetPerspectiveRatio=function(R,G,I){var W=[G,I,0,1];il(W,W,R);var te=new n.Point((W[0]/W[3]+1)/2*this.transform.width+oo,(-W[1]/W[3]+1)/2*this.transform.height+oo);return{point:te,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/W[3])}},cs.prototype.isOffscreen=function(R,G,I,W){return I<oo||R>=this.screenRightBoundary||W<oo||G>this.screenBottomBoundary},cs.prototype.isInsideGrid=function(R,G,I,W){return I>=0&&R<this.gridRightBoundary&&W>=0&&G<this.gridBottomBoundary},cs.prototype.getViewportMatrix=function(){var R=n.identity([]);return n.translate(R,R,[-oo,-oo,0]),R};function Eo(H,R,G){return R*(n.EXTENT/(H.tileSize*Math.pow(2,G-H.tileID.overscaledZ)))}var hs=function(R,G,I,W){R?this.opacity=Math.max(0,Math.min(1,R.opacity+(R.placed?G:-G))):this.opacity=W&&I?1:0,this.placed=I};hs.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Jo=function(R,G,I,W,te){this.text=new hs(R?R.text:null,G,I,te),this.icon=new hs(R?R.icon:null,G,W,te)};Jo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qo=function(R,G,I){this.text=R,this.icon=G,this.skipFade=I},Oa=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]},co=function(R,G,I,W,te){this.bucketInstanceId=R,this.featureIndex=G,this.sourceLayerIndex=I,this.bucketIndex=W,this.tileID=te},Al=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};Al.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var G=++this.maxGroupID;this.collisionGroups[R]={ID:G,predicate:function(I){return I.collisionGroupID===G}}}return this.collisionGroups[R]};function $l(H,R,G,I,W){var te=n.getAnchorAlignment(H),ee=te.horizontalAlign,ve=te.verticalAlign,Ee=-(ee-.5)*R,Oe=-(ve-.5)*G,vt=n.evaluateVariableOffset(H,I);return new n.Point(Ee+vt[0]*W,Oe+vt[1]*W)}function Nu(H,R,G,I,W,te){var ee=H.x1,ve=H.x2,Ee=H.y1,Oe=H.y2,vt=H.anchorPointX,wt=H.anchorPointY,pt=new n.Point(R,G);return I&&pt._rotate(W?te:-te),{x1:ee+pt.x,y1:Ee+pt.y,x2:ve+pt.x,y2:Oe+pt.y,anchorPointX:vt,anchorPointY:wt}}var os=function(R,G,I,W){this.transform=R.clone(),this.collisionIndex=new cs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Al(I),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}};os.prototype.getBucketParts=function(R,G,I,W){var te=I.getBucket(G),ee=I.latestFeatureIndex;if(!(!te||!ee||G.id!==te.layerIds[0])){var ve=I.collisionBoxArray,Ee=te.layers[0].layout,Oe=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),vt=I.tileSize/n.EXTENT,wt=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),pt=Ee.get("text-pitch-alignment")==="map",Be=Ee.get("text-rotation-alignment")==="map",$e=Eo(I,1,this.transform.zoom),ot=cn(wt,pt,Be,this.transform,$e),Tt=null;if(pt){var Lt=gi(wt,pt,Be,this.transform,$e);Tt=n.multiply([],this.transform.labelPlaneMatrix,Lt)}this.retainedQueryData[te.bucketInstanceId]=new co(te.bucketInstanceId,ee,te.sourceLayerIndex,te.index,I.tileID);var Pt={bucket:te,layout:Ee,posMatrix:wt,textLabelPlaneMatrix:ot,labelToScreenMatrix:Tt,scale:Oe,textPixelRatio:vt,holdingForFade:I.holdingForFade(),collisionBoxArray:ve,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(te.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(te.sourceID)};if(W)for(var Xt=0,Nt=te.sortKeyRanges;Xt<Nt.length;Xt+=1){var Dt=Nt[Xt],Zt=Dt.sortKey,Ct=Dt.symbolInstanceStart,ar=Dt.symbolInstanceEnd;R.push({sortKey:Zt,symbolInstanceStart:Ct,symbolInstanceEnd:ar,parameters:Pt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:te.symbolInstances.length,parameters:Pt})}},os.prototype.attemptAnchorPlacement=function(R,G,I,W,te,ee,ve,Ee,Oe,vt,wt,pt,Be,$e,ot){var Tt=[pt.textOffset0,pt.textOffset1],Lt=$l(R,I,W,Tt,te),Pt=this.collisionIndex.placeCollisionBox(Nu(G,Lt.x,Lt.y,ee,ve,this.transform.angle),wt,Ee,Oe,vt.predicate);if(ot){var Xt=this.collisionIndex.placeCollisionBox(Nu(ot,Lt.x,Lt.y,ee,ve,this.transform.angle),wt,Ee,Oe,vt.predicate);if(Xt.box.length===0)return}if(Pt.box.length>0){var Nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[pt.crossTileID].anchor),this.variableOffsets[pt.crossTileID]={textOffset:Tt,width:I,height:W,anchor:R,textBoxScale:te,prevAnchor:Nt},this.markUsedJustification(Be,R,pt,$e),Be.allowVerticalPlacement&&(this.markUsedOrientation(Be,$e,pt),this.placedOrientations[pt.crossTileID]=$e),{shift:Lt,placedGlyphBoxes:Pt}}},os.prototype.placeLayerBucketPart=function(R,G,I){var W=this,te=R.parameters,ee=te.bucket,ve=te.layout,Ee=te.posMatrix,Oe=te.textLabelPlaneMatrix,vt=te.labelToScreenMatrix,wt=te.textPixelRatio,pt=te.holdingForFade,Be=te.collisionBoxArray,$e=te.partiallyEvaluatedTextSize,ot=te.collisionGroup,Tt=ve.get("text-optional"),Lt=ve.get("icon-optional"),Pt=ve.get("text-allow-overlap"),Xt=ve.get("icon-allow-overlap"),Nt=ve.get("text-rotation-alignment")==="map",Dt=ve.get("text-pitch-alignment")==="map",Zt=ve.get("icon-text-fit")!=="none",Ct=ve.get("symbol-z-order")==="viewport-y",ar=Pt&&(Xt||!ee.hasIconData()||Lt),yr=Xt&&(Pt||!ee.hasTextData()||Tt);!ee.collisionArrays&&Be&&ee.deserializeCollisionBoxes(Be);var Dr=function(un,Ln){if(!G[un.crossTileID]){if(pt){W.placements[un.crossTileID]=new Qo(!1,!1,!1);return}var Mn=!1,Kn=!1,xi=!0,Da=null,Pa={box:null,offscreen:null},_o={box:null,offscreen:null},ua=null,Qa=null,Vo=null,ml=0,Wv=0,Xv=0;Ln.textFeatureIndex?ml=Ln.textFeatureIndex:un.useRuntimeCollisionCircles&&(ml=un.featureIndex),Ln.verticalTextFeatureIndex&&(Wv=Ln.verticalTextFeatureIndex);var Td=Ln.textBox;if(Td){var Xd=function(jl){var Oh=n.WritingMode.horizontal;if(ee.allowVerticalPlacement&&!jl&&W.prevPlacement){var Bh=W.prevPlacement.placedOrientations[un.crossTileID];Bh&&(W.placedOrientations[un.crossTileID]=Bh,Oh=Bh,W.markUsedOrientation(ee,Oh,un))}return Oh},Mg=function(jl,Oh){if(ee.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&Ln.verticalTextBox)for(var Bh=0,Eb=ee.writingModes;Bh<Eb.length;Bh+=1){var VT=Eb[Bh];if(VT===n.WritingMode.vertical?(Pa=Oh(),_o=Pa):Pa=jl(),Pa&&Pa.box&&Pa.box.length)break}else Pa=jl()};if(ve.get("text-variable-anchor")){var zh=ve.get("text-variable-anchor");if(W.prevPlacement&&W.prevPlacement.variableOffsets[un.crossTileID]){var ih=W.prevPlacement.variableOffsets[un.crossTileID];zh.indexOf(ih.anchor)>0&&(zh=zh.filter(function(jl){return jl!==ih.anchor}),zh.unshift(ih.anchor))}var Ad=function(jl,Oh,Bh){for(var Eb=jl.x2-jl.x1,VT=jl.y2-jl.y1,L8=un.textBoxScale,P8=Zt&&!Xt?Oh:null,Y1={box:[],offscreen:!1},R8=Pt?zh.length*2:zh.length,kb=0;kb<R8;++kb){var D8=zh[kb%zh.length],I8=kb>=zh.length,HT=W.attemptAnchorPlacement(D8,jl,Eb,VT,L8,Nt,Dt,wt,Ee,ot,I8,un,ee,Bh,P8);if(HT&&(Y1=HT.placedGlyphBoxes,Y1&&Y1.box&&Y1.box.length)){Mn=!0,Da=HT.shift;break}}return Y1},Xp=function(){return Ad(Td,Ln.iconBox,n.WritingMode.horizontal)},Md=function(){var jl=Ln.verticalTextBox,Oh=Pa&&Pa.box&&Pa.box.length;return ee.allowVerticalPlacement&&!Oh&&un.numVerticalGlyphVertices>0&&jl?Ad(jl,Ln.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}};Mg(Xp,Md),Pa&&(Mn=Pa.box,xi=Pa.offscreen);var wb=Xd(Pa&&Pa.box);if(!Mn&&W.prevPlacement){var Fy=W.prevPlacement.variableOffsets[un.crossTileID];Fy&&(W.variableOffsets[un.crossTileID]=Fy,W.markUsedJustification(ee,Fy.anchor,un,wb))}}else{var Zd=function(jl,Oh){var Bh=W.collisionIndex.placeCollisionBox(jl,Pt,wt,Ee,ot.predicate);return Bh&&Bh.box&&Bh.box.length&&(W.markUsedOrientation(ee,Oh,un),W.placedOrientations[un.crossTileID]=Oh),Bh},nh=function(){return Zd(Td,n.WritingMode.horizontal)},jd=function(){var jl=Ln.verticalTextBox;return ee.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&jl?Zd(jl,n.WritingMode.vertical):{box:null,offscreen:null}};Mg(nh,jd),Xd(Pa&&Pa.box&&Pa.box.length)}}if(ua=Pa,Mn=ua&&ua.box&&ua.box.length>0,xi=ua&&ua.offscreen,un.useRuntimeCollisionCircles){var mf=ee.text.placedSymbolArray.get(un.centerJustifiedTextSymbolIndex),Tb=n.evaluateSizeForFeature(ee.textSizeData,$e,mf),G1=ve.get("text-padding"),Dc=un.collisionCircleDiameter;Qa=W.collisionIndex.placeCollisionCircles(Pt,mf,ee.lineVertexArray,ee.glyphOffsetArray,Tb,Ee,Oe,vt,I,Dt,ot.predicate,Dc,G1),Mn=Pt||Qa.circles.length>0&&!Qa.collisionDetected,xi=xi&&Qa.offscreen}if(Ln.iconFeatureIndex&&(Xv=Ln.iconFeatureIndex),Ln.iconBox){var qy=function(jl){var Oh=Zt&&Da?Nu(jl,Da.x,Da.y,Nt,Dt,W.transform.angle):jl;return W.collisionIndex.placeCollisionBox(Oh,Xt,wt,Ee,ot.predicate)};_o&&_o.box&&_o.box.length&&Ln.verticalIconBox?(Vo=qy(Ln.verticalIconBox),Kn=Vo.box.length>0):(Vo=qy(Ln.iconBox),Kn=Vo.box.length>0),xi=xi&&Vo.offscreen}var Ab=Tt||un.numHorizontalGlyphVertices===0&&un.numVerticalGlyphVertices===0,Mb=Lt||un.numIconVertices===0;if(!Ab&&!Mb?Kn=Mn=Kn&&Mn:Mb?Ab||(Kn=Kn&&Mn):Mn=Kn&&Mn,Mn&&ua&&ua.box&&(_o&&_o.box&&Wv?W.collisionIndex.insertCollisionBox(ua.box,ve.get("text-ignore-placement"),ee.bucketInstanceId,Wv,ot.ID):W.collisionIndex.insertCollisionBox(ua.box,ve.get("text-ignore-placement"),ee.bucketInstanceId,ml,ot.ID)),Kn&&Vo&&W.collisionIndex.insertCollisionBox(Vo.box,ve.get("icon-ignore-placement"),ee.bucketInstanceId,Xv,ot.ID),Qa&&(Mn&&W.collisionIndex.insertCollisionCircles(Qa.circles,ve.get("text-ignore-placement"),ee.bucketInstanceId,ml,ot.ID),I)){var Sb=ee.bucketInstanceId,zy=W.collisionCircleArrays[Sb];zy===void 0&&(zy=W.collisionCircleArrays[Sb]=new Oa);for(var Oy=0;Oy<Qa.circles.length;Oy+=4)zy.circles.push(Qa.circles[Oy+0]),zy.circles.push(Qa.circles[Oy+1]),zy.circles.push(Qa.circles[Oy+2]),zy.circles.push(Qa.collisionDetected?1:0)}W.placements[un.crossTileID]=new Qo(Mn||ar,Kn||yr,xi||ee.justReloaded),G[un.crossTileID]=!0}};if(Ct)for(var ln=ee.getSortedSymbolIndexes(this.transform.angle),Xr=ln.length-1;Xr>=0;--Xr){var dn=ln[Xr];Dr(ee.symbolInstances.get(dn),ee.collisionArrays[dn])}else for(var ii=R.symbolInstanceStart;ii<R.symbolInstanceEnd;ii++)Dr(ee.symbolInstances.get(ii),ee.collisionArrays[ii]);if(I&&ee.bucketInstanceId in this.collisionCircleArrays){var Nn=this.collisionCircleArrays[ee.bucketInstanceId];n.invert(Nn.invProjMatrix,Ee),Nn.viewportMatrix=this.collisionIndex.getViewportMatrix()}ee.justReloaded=!1},os.prototype.markUsedJustification=function(R,G,I,W){var te={left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex},ee;W===n.WritingMode.vertical?ee=I.verticalPlacedTextSymbolIndex:ee=te[n.getAnchorJustification(G)];for(var ve=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex],Ee=0,Oe=ve;Ee<Oe.length;Ee+=1){var vt=Oe[Ee];vt>=0&&(ee>=0&&vt!==ee?R.text.placedSymbolArray.get(vt).crossTileID=0:R.text.placedSymbolArray.get(vt).crossTileID=I.crossTileID)}},os.prototype.markUsedOrientation=function(R,G,I){for(var W=G===n.WritingMode.horizontal||G===n.WritingMode.horizontalOnly?G:0,te=G===n.WritingMode.vertical?G:0,ee=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex],ve=0,Ee=ee;ve<Ee.length;ve+=1){var Oe=Ee[ve];R.text.placedSymbolArray.get(Oe).placedOrientation=W}I.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=te)},os.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,I=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var W=G?G.symbolFadeChange(R):1,te=G?G.opacities:{},ee=G?G.variableOffsets:{},ve=G?G.placedOrientations:{};for(var Ee in this.placements){var Oe=this.placements[Ee],vt=te[Ee];vt?(this.opacities[Ee]=new Jo(vt,W,Oe.text,Oe.icon),I=I||Oe.text!==vt.text.placed||Oe.icon!==vt.icon.placed):(this.opacities[Ee]=new Jo(null,W,Oe.text,Oe.icon,Oe.skipFade),I=I||Oe.text||Oe.icon)}for(var wt in te){var pt=te[wt];if(!this.opacities[wt]){var Be=new Jo(pt,W,!1,!1);Be.isHidden()||(this.opacities[wt]=Be,I=I||pt.text.placed||pt.icon.placed)}}for(var $e in ee)!this.variableOffsets[$e]&&this.opacities[$e]&&!this.opacities[$e].isHidden()&&(this.variableOffsets[$e]=ee[$e]);for(var ot in ve)!this.placedOrientations[ot]&&this.opacities[ot]&&!this.opacities[ot].isHidden()&&(this.placedOrientations[ot]=ve[ot]);I?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:R)},os.prototype.updateLayerOpacities=function(R,G){for(var I={},W=0,te=G;W<te.length;W+=1){var ee=te[W],ve=ee.getBucket(R);ve&&ee.latestFeatureIndex&&R.id===ve.layerIds[0]&&this.updateBucketOpacities(ve,I,ee.collisionBoxArray)}},os.prototype.updateBucketOpacities=function(R,G,I){var W=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var te=R.layers[0].layout,ee=new Jo(null,0,!1,!1,!0),ve=te.get("text-allow-overlap"),Ee=te.get("icon-allow-overlap"),Oe=te.get("text-variable-anchor"),vt=te.get("text-rotation-alignment")==="map",wt=te.get("text-pitch-alignment")==="map",pt=te.get("icon-text-fit")!=="none",Be=new Jo(null,0,ve&&(Ee||!R.hasIconData()||te.get("icon-optional")),Ee&&(ve||!R.hasTextData()||te.get("text-optional")),!0);!R.collisionArrays&&I&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(I);for(var $e=function(Pt,Xt,Nt){for(var Dt=0;Dt<Xt/4;Dt++)Pt.opacityVertexArray.emplaceBack(Nt)},ot=function(Pt){var Xt=R.symbolInstances.get(Pt),Nt=Xt.numHorizontalGlyphVertices,Dt=Xt.numVerticalGlyphVertices,Zt=Xt.crossTileID,Ct=G[Zt],ar=W.opacities[Zt];Ct?ar=ee:ar||(ar=Be,W.opacities[Zt]=ar),G[Zt]=!0;var yr=Nt>0||Dt>0,Dr=Xt.numIconVertices>0,ln=W.placedOrientations[Xt.crossTileID],Xr=ln===n.WritingMode.vertical,dn=ln===n.WritingMode.horizontal||ln===n.WritingMode.horizontalOnly;if(yr){var ii=xu(ar.text),Nn=Xr?ni:ii;$e(R.text,Nt,Nn);var un=dn?ni:ii;$e(R.text,Dt,un);var Ln=ar.text.isHidden();[Xt.rightJustifiedTextSymbolIndex,Xt.centerJustifiedTextSymbolIndex,Xt.leftJustifiedTextSymbolIndex].forEach(function(Xv){Xv>=0&&(R.text.placedSymbolArray.get(Xv).hidden=Ln||Xr?1:0)}),Xt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(Xt.verticalPlacedTextSymbolIndex).hidden=Ln||dn?1:0);var Mn=W.variableOffsets[Xt.crossTileID];Mn&&W.markUsedJustification(R,Mn.anchor,Xt,ln);var Kn=W.placedOrientations[Xt.crossTileID];Kn&&(W.markUsedJustification(R,"left",Xt,Kn),W.markUsedOrientation(R,Kn,Xt))}if(Dr){var xi=xu(ar.icon),Da=!(pt&&Xt.verticalPlacedIconSymbolIndex&&Xr);if(Xt.placedIconSymbolIndex>=0){var Pa=Da?xi:ni;$e(R.icon,Xt.numIconVertices,Pa),R.icon.placedSymbolArray.get(Xt.placedIconSymbolIndex).hidden=ar.icon.isHidden()}if(Xt.verticalPlacedIconSymbolIndex>=0){var _o=Da?ni:xi;$e(R.icon,Xt.numVerticalIconVertices,_o),R.icon.placedSymbolArray.get(Xt.verticalPlacedIconSymbolIndex).hidden=ar.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var ua=R.collisionArrays[Pt];if(ua){var Qa=new n.Point(0,0);if(ua.textBox||ua.verticalTextBox){var Vo=!0;if(Oe){var ml=W.variableOffsets[Zt];ml?(Qa=$l(ml.anchor,ml.width,ml.height,ml.textOffset,ml.textBoxScale),vt&&Qa._rotate(wt?W.transform.angle:-W.transform.angle)):Vo=!1}ua.textBox&&hn(R.textCollisionBox.collisionVertexArray,ar.text.placed,!Vo||Xr,Qa.x,Qa.y),ua.verticalTextBox&&hn(R.textCollisionBox.collisionVertexArray,ar.text.placed,!Vo||dn,Qa.x,Qa.y)}var Wv=!!(!dn&&ua.verticalIconBox);ua.iconBox&&hn(R.iconCollisionBox.collisionVertexArray,ar.icon.placed,Wv,pt?Qa.x:0,pt?Qa.y:0),ua.verticalIconBox&&hn(R.iconCollisionBox.collisionVertexArray,ar.icon.placed,!Wv,pt?Qa.x:0,pt?Qa.y:0)}}},Tt=0;Tt<R.symbolInstances.length;Tt++)ot(Tt);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Lt=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Lt.invProjMatrix,R.placementViewportMatrix=Lt.viewportMatrix,R.collisionCircleArray=Lt.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},os.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},os.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},os.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},os.prototype.stillRecent=function(R,G){var I=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*I>R},os.prototype.setStale=function(){this.stale=!0};function hn(H,R,G,I,W){H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0)}var bi=Math.pow(2,25),ac=Math.pow(2,24),Pl=Math.pow(2,17),ss=Math.pow(2,16),vl=Math.pow(2,9),$o=Math.pow(2,8),Rl=Math.pow(2,1);function xu(H){if(H.opacity===0&&!H.placed)return 0;if(H.opacity===1&&H.placed)return 4294967295;var R=H.placed?1:0,G=Math.floor(H.opacity*127);return G*bi+R*ac+G*Pl+R*ss+G*vl+R*$o+G*Rl+R}var ni=0,Aa=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Aa.prototype.continuePlacement=function(R,G,I,W,te){for(var ee=this._bucketParts;this._currentTileIndex<R.length;){var ve=R[this._currentTileIndex];if(G.getBucketParts(ee,W,ve,this._sortAcrossTiles),this._currentTileIndex++,te())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort(function(Oe,vt){return Oe.sortKey-vt.sortKey}));this._currentPartIndex<ee.length;){var Ee=ee[this._currentPartIndex];if(G.placeLayerBucketPart(Ee,this._seenCrossTileIDs,I),this._currentPartIndex++,te())return!0}return!1};var Ca=function(R,G,I,W,te,ee,ve){this.placement=new os(R,te,ee,ve),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=W,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(R,G,I){for(var W=this,te=n.browser.now(),ee=function(){var wt=n.browser.now()-te;return W._forceFullPlacement?!1:wt>2};this._currentPlacementIndex>=0;){var ve=R[this._currentPlacementIndex],Ee=G[ve],Oe=this.placement.collisionIndex.transform.zoom;if(Ee.type==="symbol"&&(!Ee.minzoom||Ee.minzoom<=Oe)&&(!Ee.maxzoom||Ee.maxzoom>Oe)){this._inProgressLayer||(this._inProgressLayer=new Aa(Ee));var vt=this._inProgressLayer.continuePlacement(I[Ee.source],this.placement,this._showCollisionBoxes,Ee,ee);if(vt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(R){return this.placement.commit(R),this.placement};var Fs=512/n.EXTENT/2,Pf=function(R,G,I){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=I;for(var W=0;W<G.length;W++){var te=G.get(W),ee=te.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:te.crossTileID,coord:this.getScaledCoordinates(te,R)})}};Pf.prototype.getScaledCoordinates=function(R,G){var I=G.canonical.z-this.tileID.canonical.z,W=Fs/Math.pow(2,I);return{x:Math.floor((G.canonical.x*n.EXTENT+R.anchorX)*W),y:Math.floor((G.canonical.y*n.EXTENT+R.anchorY)*W)}},Pf.prototype.findMatches=function(R,G,I){for(var W=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),te=0;te<R.length;te++){var ee=R.get(te);if(!ee.crossTileID){var ve=this.indexedSymbolInstances[ee.key];if(ve)for(var Ee=this.getScaledCoordinates(ee,G),Oe=0,vt=ve;Oe<vt.length;Oe+=1){var wt=vt[Oe];if(Math.abs(wt.coord.x-Ee.x)<=W&&Math.abs(wt.coord.y-Ee.y)<=W&&!I[wt.crossTileID]){I[wt.crossTileID]=!0,ee.crossTileID=wt.crossTileID;break}}}}};var Ma=function(){this.maxCrossTileID=0};Ma.prototype.generate=function(){return++this.maxCrossTileID};var Rf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Rf.prototype.handleWrapJump=function(R){var G=Math.round((R-this.lng)/360);if(G!==0)for(var I in this.indexes){var W=this.indexes[I],te={};for(var ee in W){var ve=W[ee];ve.tileID=ve.tileID.unwrapTo(ve.tileID.wrap+G),te[ve.tileID.key]=ve}this.indexes[I]=te}this.lng=R},Rf.prototype.addBucket=function(R,G,I){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var W=0;W<G.symbolInstances.length;W++){var te=G.symbolInstances.get(W);te.crossTileID=0}this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var ee=this.usedCrossTileIDs[R.overscaledZ];for(var ve in this.indexes){var Ee=this.indexes[ve];if(Number(ve)>R.overscaledZ)for(var Oe in Ee){var vt=Ee[Oe];vt.tileID.isChildOf(R)&&vt.findMatches(G.symbolInstances,R,ee)}else{var wt=R.scaledTo(Number(ve)),pt=Ee[wt.key];pt&&pt.findMatches(G.symbolInstances,R,ee)}}for(var Be=0;Be<G.symbolInstances.length;Be++){var $e=G.symbolInstances.get(Be);$e.crossTileID||($e.crossTileID=I.generate(),ee[$e.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new Pf(R,G.symbolInstances,G.bucketInstanceId),!0},Rf.prototype.removeBucketCrossTileIDs=function(R,G){for(var I in G.indexedSymbolInstances)for(var W=0,te=G.indexedSymbolInstances[I];W<te.length;W+=1){var ee=te[W];delete this.usedCrossTileIDs[R][ee.crossTileID]}},Rf.prototype.removeStaleBuckets=function(R){var G=!1;for(var I in this.indexes){var W=this.indexes[I];for(var te in W)R[W[te].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,W[te]),delete W[te],G=!0)}return G};var Wc=function(){this.layerIndexes={},this.crossTileIDs=new Ma,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wc.prototype.addLayer=function(R,G,I){var W=this.layerIndexes[R.id];W===void 0&&(W=this.layerIndexes[R.id]=new Rf);var te=!1,ee={};W.handleWrapJump(I);for(var ve=0,Ee=G;ve<Ee.length;ve+=1){var Oe=Ee[ve],vt=Oe.getBucket(R);!vt||R.id!==vt.layerIds[0]||(vt.bucketInstanceId||(vt.bucketInstanceId=++this.maxBucketInstanceId),W.addBucket(Oe.tileID,vt,this.crossTileIDs)&&(te=!0),ee[vt.bucketInstanceId]=!0)}return W.removeStaleBuckets(ee)&&(te=!0),te},Wc.prototype.pruneUnusedLayers=function(R){var G={};R.forEach(function(W){G[W]=!0});for(var I in this.layerIndexes)G[I]||delete this.layerIndexes[I]};var dl=function(H,R){return n.emitValidationErrors(H,R&&R.filter(function(G){return G.identifier!=="source.canvas"}))},ff=n.pick(Li,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$s=n.pick(Li,["setCenter","setZoom","setBearing","setPitch"]),ko=Ra(),eu=function(H){function R(G,I){var W=this;I===void 0&&(I={}),H.call(this),this.map=G,this.dispatcher=new V(vi(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new C(G._requestManager,I.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Wc,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var te=this;this._rtlTextPluginCallback=R.registerForPluginStateChange(function(ee){var ve={pluginStatus:ee.pluginStatus,pluginURL:ee.pluginURL};te.dispatcher.broadcast("syncRTLPluginState",ve,function(Ee,Oe){if(n.triggerPluginCompletionEvent(Ee),Oe){var vt=Oe.every(function(pt){return pt});if(vt)for(var wt in te.sourceCaches)te.sourceCaches[wt].reload()}})}),this.on("data",function(ee){if(!(ee.dataType!=="source"||ee.sourceDataType!=="metadata")){var ve=W.sourceCaches[ee.sourceId];if(ve){var Ee=ve.getSource();if(!(!Ee||!Ee.vectorLayerIds))for(var Oe in W._layers){var vt=W._layers[Oe];vt.source===Ee.id&&W._validateLayer(vt)}}}})}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.loadURL=function(I,W){var te=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var ee=typeof W.validate=="boolean"?W.validate:!n.isMapboxURL(I);I=this.map._requestManager.normalizeStyleURL(I,W.accessToken);var ve=this.map._requestManager.transformRequest(I,n.ResourceType.Style);this._request=n.getJSON(ve,function(Ee,Oe){te._request=null,Ee?te.fire(new n.ErrorEvent(Ee)):Oe&&te._load(Oe,ee)})},R.prototype.loadJSON=function(I,W){var te=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){te._request=null,te._load(I,W.validate!==!1)})},R.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(ko,!1)},R.prototype._load=function(I,W){if(!(W&&dl(this,n.validateStyle(I)))){this._loaded=!0,this.stylesheet=I;for(var te in I.sources)this.addSource(te,I.sources[te],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs);var ee=ea(this.stylesheet.layers);this._order=ee.map(function(vt){return vt.id}),this._layers={},this._serializedLayers={};for(var ve=0,Ee=ee;ve<Ee.length;ve+=1){var Oe=Ee[ve];Oe=n.createStyleLayer(Oe),Oe.setEventedParent(this,{layer:{id:Oe.id}}),this._layers[Oe.id]=Oe,this._serializedLayers[Oe.id]=Oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new z(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}},R.prototype._loadSprite=function(I){var W=this;this._spriteRequest=_(I,this.map._requestManager,function(te,ee){if(W._spriteRequest=null,te)W.fire(new n.ErrorEvent(te));else if(ee)for(var ve in ee)W.imageManager.addImage(ve,ee[ve]);W.imageManager.setLoaded(!0),W._availableImages=W.imageManager.listImages(),W.dispatcher.broadcast("setImages",W._availableImages),W.fire(new n.Event("data",{dataType:"style"}))})},R.prototype._validateLayer=function(I){var W=this.sourceCaches[I.source];if(W){var te=I.sourceLayer;if(te){var ee=W.getSource();(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(te)===-1)&&this.fire(new n.ErrorEvent(new Error('Source layer "'+te+'" does not exist on source "'+ee.id+'" as specified by style layer "'+I.id+'"')))}}},R.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var I in this.sourceCaches)if(!this.sourceCaches[I].loaded())return!1;return!!this.imageManager.isLoaded()},R.prototype._serializeLayers=function(I){for(var W=[],te=0,ee=I;te<ee.length;te+=1){var ve=ee[te],Ee=this._layers[ve];Ee.type!=="custom"&&W.push(Ee.serialize())}return W},R.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var I in this.sourceCaches)if(this.sourceCaches[I].hasTransition())return!0;for(var W in this._layers)if(this._layers[W].hasTransition())return!0;return!1},R.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},R.prototype.update=function(I){if(this._loaded){var W=this._changed;if(this._changed){var te=Object.keys(this._updatedLayers),ee=Object.keys(this._removedLayers);(te.length||ee.length)&&this._updateWorkerLayers(te,ee);for(var ve in this._updatedSources){var Ee=this._updatedSources[ve];Ee==="reload"?this._reloadSource(ve):Ee==="clear"&&this._clearSource(ve)}this._updateTilesForChangedImages();for(var Oe in this._updatedPaintProps)this._layers[Oe].updateTransitions(I);this.light.updateTransitions(I),this._resetUpdates()}var vt={};for(var wt in this.sourceCaches){var pt=this.sourceCaches[wt];vt[wt]=pt.used,pt.used=!1}for(var Be=0,$e=this._order;Be<$e.length;Be+=1){var ot=$e[Be],Tt=this._layers[ot];Tt.recalculate(I,this._availableImages),!Tt.isHidden(I.zoom)&&Tt.source&&(this.sourceCaches[Tt.source].used=!0)}for(var Lt in vt){var Pt=this.sourceCaches[Lt];vt[Lt]!==Pt.used&&Pt.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Lt}))}this.light.recalculate(I),this.z=I.zoom,W&&this.fire(new n.Event("data",{dataType:"style"}))}},R.prototype._updateTilesForChangedImages=function(){var I=Object.keys(this._changedImages);if(I.length){for(var W in this.sourceCaches)this.sourceCaches[W].reloadTilesForDependencies(["icons","patterns"],I);this._changedImages={}}},R.prototype._updateWorkerLayers=function(I,W){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(I),removedIds:W})},R.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},R.prototype.setState=function(I){var W=this;if(this._checkLoaded(),dl(this,n.validateStyle(I)))return!1;I=n.clone$1(I),I.layers=ea(I.layers);var te=on(this.serialize(),I).filter(function(ve){return!(ve.command in $s)});if(te.length===0)return!1;var ee=te.filter(function(ve){return!(ve.command in ff)});if(ee.length>0)throw new Error("Unimplemented: "+ee.map(function(ve){return ve.command}).join(", ")+".");return te.forEach(function(ve){ve.command!=="setTransition"&&W[ve.command].apply(W,ve.args)}),this.stylesheet=I,!0},R.prototype.addImage=function(I,W){if(this.getImage(I))return this.fire(new n.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(I,W),this._afterImageUpdated(I)},R.prototype.updateImage=function(I,W){this.imageManager.updateImage(I,W)},R.prototype.getImage=function(I){return this.imageManager.getImage(I)},R.prototype.removeImage=function(I){if(!this.getImage(I))return this.fire(new n.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(I),this._afterImageUpdated(I)},R.prototype._afterImageUpdated=function(I){this._availableImages=this.imageManager.listImages(),this._changedImages[I]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))},R.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},R.prototype.addSource=function(I,W,te){var ee=this;if(te===void 0&&(te={}),this._checkLoaded(),this.sourceCaches[I]!==void 0)throw new Error("There is already a source with this ID");if(!W.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(W).join(", ")+".");var ve=["vector","raster","geojson","video","image"],Ee=ve.indexOf(W.type)>=0;if(!(Ee&&this._validate(n.validateStyle.source,"sources."+I,W,null,te))){this.map&&this.map._collectResourceTiming&&(W.collectResourceTiming=!0);var Oe=this.sourceCaches[I]=new pr(I,W,this.dispatcher);Oe.style=this,Oe.setEventedParent(this,function(){return{isSourceLoaded:ee.loaded(),source:Oe.serialize(),sourceId:I}}),Oe.onAdd(this.map),this._changed=!0}},R.prototype.removeSource=function(I){if(this._checkLoaded(),this.sourceCaches[I]===void 0)throw new Error("There is no source with this ID");for(var W in this._layers)if(this._layers[W].source===I)return this.fire(new n.ErrorEvent(new Error('Source "'+I+'" cannot be removed while layer "'+W+'" is using it.')));var te=this.sourceCaches[I];delete this.sourceCaches[I],delete this._updatedSources[I],te.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:I})),te.setEventedParent(null),te.clearTiles(),te.onRemove&&te.onRemove(this.map),this._changed=!0},R.prototype.setGeoJSONSourceData=function(I,W){this._checkLoaded();var te=this.sourceCaches[I].getSource();te.setData(W),this._changed=!0},R.prototype.getSource=function(I){return this.sourceCaches[I]&&this.sourceCaches[I].getSource()},R.prototype.addLayer=function(I,W,te){te===void 0&&(te={}),this._checkLoaded();var ee=I.id;if(this.getLayer(ee)){this.fire(new n.ErrorEvent(new Error('Layer with id "'+ee+'" already exists on this map')));return}var ve;if(I.type==="custom"){if(dl(this,n.validateCustomStyleLayer(I)))return;ve=n.createStyleLayer(I)}else{if(typeof I.source=="object"&&(this.addSource(ee,I.source),I=n.clone$1(I),I=n.extend(I,{source:ee})),this._validate(n.validateStyle.layer,"layers."+ee,I,{arrayIndex:-1},te))return;ve=n.createStyleLayer(I),this._validateLayer(ve),ve.setEventedParent(this,{layer:{id:ee}}),this._serializedLayers[ve.id]=ve.serialize()}var Ee=W?this._order.indexOf(W):this._order.length;if(W&&Ee===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}if(this._order.splice(Ee,0,ee),this._layerOrderChanged=!0,this._layers[ee]=ve,this._removedLayers[ee]&&ve.source&&ve.type!=="custom"){var Oe=this._removedLayers[ee];delete this._removedLayers[ee],Oe.type!==ve.type?this._updatedSources[ve.source]="clear":(this._updatedSources[ve.source]="reload",this.sourceCaches[ve.source].pause())}this._updateLayer(ve),ve.onAdd&&ve.onAdd(this.map)},R.prototype.moveLayer=function(I,W){this._checkLoaded(),this._changed=!0;var te=this._layers[I];if(!te){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be moved.")));return}if(I!==W){var ee=this._order.indexOf(I);this._order.splice(ee,1);var ve=W?this._order.indexOf(W):this._order.length;if(W&&ve===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}this._order.splice(ve,0,I),this._layerOrderChanged=!0}},R.prototype.removeLayer=function(I){this._checkLoaded();var W=this._layers[I];if(!W){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be removed.")));return}W.setEventedParent(null);var te=this._order.indexOf(I);this._order.splice(te,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[I]=W,delete this._layers[I],delete this._serializedLayers[I],delete this._updatedLayers[I],delete this._updatedPaintProps[I],W.onRemove&&W.onRemove(this.map)},R.prototype.getLayer=function(I){return this._layers[I]},R.prototype.hasLayer=function(I){return I in this._layers},R.prototype.setLayerZoomRange=function(I,W,te){this._checkLoaded();var ee=this.getLayer(I);if(!ee){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot have zoom extent.")));return}ee.minzoom===W&&ee.maxzoom===te||(W!=null&&(ee.minzoom=W),te!=null&&(ee.maxzoom=te),this._updateLayer(ee))},R.prototype.setFilter=function(I,W,te){te===void 0&&(te={}),this._checkLoaded();var ee=this.getLayer(I);if(!ee){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be filtered.")));return}if(!n.deepEqual(ee.filter,W)){if(W==null){ee.filter=void 0,this._updateLayer(ee);return}this._validate(n.validateStyle.filter,"layers."+ee.id+".filter",W,null,te)||(ee.filter=n.clone$1(W),this._updateLayer(ee))}},R.prototype.getFilter=function(I){return n.clone$1(this.getLayer(I).filter)},R.prototype.setLayoutProperty=function(I,W,te,ee){ee===void 0&&(ee={}),this._checkLoaded();var ve=this.getLayer(I);if(!ve){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}n.deepEqual(ve.getLayoutProperty(W),te)||(ve.setLayoutProperty(W,te,ee),this._updateLayer(ve))},R.prototype.getLayoutProperty=function(I,W){var te=this.getLayer(I);if(!te){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style.")));return}return te.getLayoutProperty(W)},R.prototype.setPaintProperty=function(I,W,te,ee){ee===void 0&&(ee={}),this._checkLoaded();var ve=this.getLayer(I);if(!ve){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}if(!n.deepEqual(ve.getPaintProperty(W),te)){var Ee=ve.setPaintProperty(W,te,ee);Ee&&this._updateLayer(ve),this._changed=!0,this._updatedPaintProps[I]=!0}},R.prototype.getPaintProperty=function(I,W){return this.getLayer(I).getPaintProperty(W)},R.prototype.setFeatureState=function(I,W){this._checkLoaded();var te=I.source,ee=I.sourceLayer,ve=this.sourceCaches[te];if(ve===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var Ee=ve.getSource().type;if(Ee==="geojson"&&ee){this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Ee==="vector"&&!ee){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ve.setFeatureState(ee,I.id,W)},R.prototype.removeFeatureState=function(I,W){this._checkLoaded();var te=I.source,ee=this.sourceCaches[te];if(ee===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var ve=ee.getSource().type,Ee=ve==="vector"?I.sourceLayer:void 0;if(ve==="vector"&&!Ee){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(W&&typeof I.id!="string"&&typeof I.id!="number"){this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}ee.removeFeatureState(Ee,I.id,W)},R.prototype.getFeatureState=function(I){this._checkLoaded();var W=I.source,te=I.sourceLayer,ee=this.sourceCaches[W];if(ee===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+W+"' does not exist in the map's style.")));return}var ve=ee.getSource().type;if(ve==="vector"&&!te){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.getFeatureState(te,I.id)},R.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},R.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(I){return I.serialize()}),layers:this._serializeLayers(this._order)},function(I){return I!==void 0})},R.prototype._updateLayer=function(I){this._updatedLayers[I.id]=!0,I.source&&!this._updatedSources[I.source]&&this.sourceCaches[I.source].getSource().type!=="raster"&&(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause()),this._changed=!0},R.prototype._flattenAndSortRenderedFeatures=function(I){for(var W=this,te=function(dn){return W._layers[dn].type==="fill-extrusion"},ee={},ve=[],Ee=this._order.length-1;Ee>=0;Ee--){var Oe=this._order[Ee];if(te(Oe)){ee[Oe]=Ee;for(var vt=0,wt=I;vt<wt.length;vt+=1){var pt=wt[vt],Be=pt[Oe];if(Be)for(var $e=0,ot=Be;$e<ot.length;$e+=1){var Tt=ot[$e];ve.push(Tt)}}}}ve.sort(function(dn,ii){return ii.intersectionZ-dn.intersectionZ});for(var Lt=[],Pt=this._order.length-1;Pt>=0;Pt--){var Xt=this._order[Pt];if(te(Xt))for(var Nt=ve.length-1;Nt>=0;Nt--){var Dt=ve[Nt].feature;if(ee[Dt.layer.id]<Pt)break;Lt.push(Dt),ve.pop()}else for(var Zt=0,Ct=I;Zt<Ct.length;Zt+=1){var ar=Ct[Zt],yr=ar[Xt];if(yr)for(var Dr=0,ln=yr;Dr<ln.length;Dr+=1){var Xr=ln[Dr];Lt.push(Xr.feature)}}}return Lt},R.prototype.queryRenderedFeatures=function(I,W,te){W&&W.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",W.filter,null,W);var ee={};if(W&&W.layers){if(!Array.isArray(W.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ve=0,Ee=W.layers;ve<Ee.length;ve+=1){var Oe=Ee[ve],vt=this._layers[Oe];if(!vt)return this.fire(new n.ErrorEvent(new Error("The layer '"+Oe+"' does not exist in the map's style and cannot be queried for features."))),[];ee[vt.source]=!0}}var wt=[];W.availableImages=this._availableImages;for(var pt in this.sourceCaches)W.layers&&!ee[pt]||wt.push(ue(this.sourceCaches[pt],this._layers,this._serializedLayers,I,W,te));return this.placement&&wt.push(Ae(this._layers,this._serializedLayers,this.sourceCaches,I,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(wt)},R.prototype.querySourceFeatures=function(I,W){W&&W.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",W.filter,null,W);var te=this.sourceCaches[I];return te?Re(te,W):[]},R.prototype.addSourceType=function(I,W,te){if(R.getSourceType(I))return te(new Error('A source type called "'+I+'" already exists.'));if(R.setSourceType(I,W),!W.workerSourceURL)return te(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:I,url:W.workerSourceURL},te)},R.prototype.getLight=function(){return this.light.getLight()},R.prototype.setLight=function(I,W){W===void 0&&(W={}),this._checkLoaded();var te=this.light.getLight(),ee=!1;for(var ve in I)if(!n.deepEqual(I[ve],te[ve])){ee=!0;break}if(ee){var Ee={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(I,W),this.light.updateTransitions(Ee)}},R.prototype._validate=function(I,W,te,ee,ve){return ve===void 0&&(ve={}),ve&&ve.validate===!1?!1:dl(this,I.call(n.validateStyle,n.extend({key:W,style:this.serialize(),value:te,styleSpec:n.styleSpec},ee)))},R.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var I in this._layers){var W=this._layers[I];W.setEventedParent(null)}for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},R.prototype._clearSource=function(I){this.sourceCaches[I].clearTiles()},R.prototype._reloadSource=function(I){this.sourceCaches[I].resume(),this.sourceCaches[I].reload()},R.prototype._updateSources=function(I){for(var W in this.sourceCaches)this.sourceCaches[W].update(I)},R.prototype._generateCollisionBoxes=function(){for(var I in this.sourceCaches)this._reloadSource(I)},R.prototype._updatePlacement=function(I,W,te,ee,ve){ve===void 0&&(ve=!1);for(var Ee=!1,Oe=!1,vt={},wt=0,pt=this._order;wt<pt.length;wt+=1){var Be=pt[wt],$e=this._layers[Be];if($e.type==="symbol"){if(!vt[$e.source]){var ot=this.sourceCaches[$e.source];vt[$e.source]=ot.getRenderableIds(!0).map(function(Zt){return ot.getTileByID(Zt)}).sort(function(Zt,Ct){return Ct.tileID.overscaledZ-Zt.tileID.overscaledZ||(Zt.tileID.isLessThan(Ct.tileID)?-1:1)})}var Tt=this.crossTileSymbolIndex.addLayer($e,vt[$e.source],I.center.lng);Ee=Ee||Tt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),ve=ve||this._layerOrderChanged||te===0,(ve||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),I.zoom))&&(this.pauseablePlacement=new Ca(I,this._order,ve,W,te,ee,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),Oe=!0),Ee&&this.pauseablePlacement.placement.setStale()),Oe||Ee)for(var Lt=0,Pt=this._order;Lt<Pt.length;Lt+=1){var Xt=Pt[Lt],Nt=this._layers[Xt];Nt.type==="symbol"&&this.placement.updateLayerOpacities(Nt,vt[Nt.source])}var Dt=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now());return Dt},R.prototype._releaseSymbolFadeTiles=function(){for(var I in this.sourceCaches)this.sourceCaches[I].releaseSymbolFadeTiles()},R.prototype.getImages=function(I,W,te){this.imageManager.getImages(W.icons,te),this._updateTilesForChangedImages();var ee=this.sourceCaches[W.source];ee&&ee.setDependencies(W.tileID.key,W.type,W.icons)},R.prototype.getGlyphs=function(I,W,te){this.glyphManager.getGlyphs(W.stacks,te)},R.prototype.getResource=function(I,W,te){return n.makeRequest(W,te)},R}(n.Evented);eu.getSourceType=be,eu.setSourceType=he,eu.registerForPluginStateChange=n.registerForPluginStateChange;var _u=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ah=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Uu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,nv=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ac="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",lo=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Df="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Mh=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,xs="void main() {gl_FragColor=vec4(1.0);}",Sh="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",cf=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,To=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,vs=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,po="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Co="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Mc="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",qs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Vl="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",hf="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",_d="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",bu=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wp=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Hl=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ho=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Dv=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vf=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Gl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Eh=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,av=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,wu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,ov=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,kh="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",sv=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bd="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Hd=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,If=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Fv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oc=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ch=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Sc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ff=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,qv=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zv="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Ov=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,uv=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,tu=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,fv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,al=Oo(Ah,Uu),ru=Oo(nv,Ac),qf=Oo(lo,Df),Vs=Oo(Mh,Us),Xc=Oo(xs,Sh),zf=Oo(cf,To),Dl=Oo(vs,po),zs=Oo(Co,Mc),Gd=Oo(qs,Vl),Yd=Oo(hf,_d),Tu=Oo(bu,Wp),df=Oo(Hl,ho),nu=Oo(Dv,vf),Wd=Oo(Gl,iv),Zc=Oo(Eh,av),jc=Oo(wu,Iv),Au=Oo(ov,kh),Nv=Oo(sv,bd),cv=Oo(Hd,If),hv=Oo(Fv,oc),Uv=Oo(Ch,Vu),Kc=Oo(Sc,Ff),Of=Oo(qv,zv),Ec=Oo(Ov,lv),Lh=Oo(uv,Bv),wd=Oo(tu,fv);function Oo(H,R){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=R.match(/attribute ([\w]+) ([\w]+)/g),W=H.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=te?te.concat(W):W,ve={};return H=H.replace(G,function(Ee,Oe,vt,wt,pt){return ve[pt]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+pt+`
varying `+vt+" "+wt+" "+pt+`;
#else
uniform `+vt+" "+wt+" u_"+pt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+pt+`
    `+vt+" "+wt+" "+pt+" = u_"+pt+`;
#endif
`}),R=R.replace(G,function(Ee,Oe,vt,wt,pt){var Be=wt==="float"?"vec2":"vec4",$e=pt.match(/color/)?"color":Be;return ve[pt]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+pt+`
uniform lowp float u_`+pt+`_t;
attribute `+vt+" "+Be+" a_"+pt+`;
varying `+vt+" "+wt+" "+pt+`;
#else
uniform `+vt+" "+wt+" u_"+pt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+pt+`
    `+pt+" = a_"+pt+`;
#else
    `+vt+" "+wt+" "+pt+" = u_"+pt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+pt+`
    `+pt+" = unpack_mix_"+$e+"(a_"+pt+", u_"+pt+`_t);
#else
    `+vt+" "+wt+" "+pt+" = u_"+pt+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+pt+`
uniform lowp float u_`+pt+`_t;
attribute `+vt+" "+Be+" a_"+pt+`;
#else
uniform `+vt+" "+wt+" u_"+pt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+pt+`
    `+vt+" "+wt+" "+pt+" = a_"+pt+`;
#else
    `+vt+" "+wt+" "+pt+" = u_"+pt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+pt+`
    `+vt+" "+wt+" "+pt+" = unpack_mix_"+$e+"(a_"+pt+", u_"+pt+`_t);
#else
    `+vt+" "+wt+" "+pt+" = u_"+pt+`;
#endif
`}),{fragmentSource:H,vertexSource:R,staticAttributes:I,staticUniforms:ee}}var Jc=Object.freeze({__proto__:null,prelude:al,background:ru,backgroundPattern:qf,circle:Vs,clippingMask:Xc,heatmap:zf,heatmapTexture:Dl,collisionBox:zs,collisionCircle:Gd,debug:Yd,fill:Tu,fillOutline:df,fillOutlinePattern:nu,fillPattern:Wd,fillExtrusion:Zc,fillExtrusionPattern:jc,hillshadePrepare:Au,hillshade:Nv,line:cv,lineGradient:hv,linePattern:Uv,lineSDF:Kc,raster:Of,symbolIcon:Ec,symbolSDF:Lh,symbolTextAndIcon:wd}),kc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};kc.prototype.bind=function(R,G,I,W,te,ee,ve,Ee){this.context=R;for(var Oe=this.boundPaintVertexBuffers.length!==W.length,vt=0;!Oe&&vt<W.length;vt++)this.boundPaintVertexBuffers[vt]!==W[vt]&&(Oe=!0);var wt=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==I||Oe||this.boundIndexBuffer!==te||this.boundVertexOffset!==ee||this.boundDynamicVertexBuffer!==ve||this.boundDynamicVertexBuffer2!==Ee;!R.extVertexArrayObject||wt?this.freshBind(G,I,W,te,ee,ve,Ee):(R.bindVertexArrayOES.set(this.vao),ve&&ve.bind(),te&&te.dynamicDraw&&te.bind(),Ee&&Ee.bind())},kc.prototype.freshBind=function(R,G,I,W,te,ee,ve){var Ee,Oe=R.numAttributes,vt=this.context,wt=vt.gl;if(vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=vt.extVertexArrayObject.createVertexArrayOES(),vt.bindVertexArrayOES.set(this.vao),Ee=0,this.boundProgram=R,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=W,this.boundVertexOffset=te,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=ve;else{Ee=vt.currentNumAttributes||0;for(var pt=Oe;pt<Ee;pt++)wt.disableVertexAttribArray(pt)}G.enableAttributes(wt,R);for(var Be=0,$e=I;Be<$e.length;Be+=1){var ot=$e[Be];ot.enableAttributes(wt,R)}ee&&ee.enableAttributes(wt,R),ve&&ve.enableAttributes(wt,R),G.bind(),G.setVertexAttribPointers(wt,R,te);for(var Tt=0,Lt=I;Tt<Lt.length;Tt+=1){var Pt=Lt[Tt];Pt.bind(),Pt.setVertexAttribPointers(wt,R,te)}ee&&(ee.bind(),ee.setVertexAttribPointers(wt,R,te)),W&&W.bind(),ve&&(ve.bind(),ve.setVertexAttribPointers(wt,R,te)),vt.currentNumAttributes=Oe},kc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Cc(H){for(var R=[],G=0;G<H.length;G++)if(H[G]!==null){var I=H[G].split(" ");R.push(I.pop())}return R}var Qc=function(R,G,I,W,te,ee){var ve=R.gl;this.program=ve.createProgram();for(var Ee=Cc(I.staticAttributes),Oe=W?W.getBinderAttributes():[],vt=Ee.concat(Oe),wt=I.staticUniforms?Cc(I.staticUniforms):[],pt=W?W.getBinderUniforms():[],Be=wt.concat(pt),$e=[],ot=0,Tt=Be;ot<Tt.length;ot+=1){var Lt=Tt[ot];$e.indexOf(Lt)<0&&$e.push(Lt)}var Pt=W?W.defines():[];ee&&Pt.push("#define OVERDRAW_INSPECTOR;");var Xt=Pt.concat(al.fragmentSource,I.fragmentSource).join(`
`),Nt=Pt.concat(al.vertexSource,I.vertexSource).join(`
`),Dt=ve.createShader(ve.FRAGMENT_SHADER);if(ve.isContextLost()){this.failedToCreate=!0;return}ve.shaderSource(Dt,Xt),ve.compileShader(Dt),ve.attachShader(this.program,Dt);var Zt=ve.createShader(ve.VERTEX_SHADER);if(ve.isContextLost()){this.failedToCreate=!0;return}ve.shaderSource(Zt,Nt),ve.compileShader(Zt),ve.attachShader(this.program,Zt),this.attributes={};var Ct={};this.numAttributes=vt.length;for(var ar=0;ar<this.numAttributes;ar++)vt[ar]&&(ve.bindAttribLocation(this.program,ar,vt[ar]),this.attributes[vt[ar]]=ar);ve.linkProgram(this.program),ve.deleteShader(Zt),ve.deleteShader(Dt);for(var yr=0;yr<$e.length;yr++){var Dr=$e[yr];if(Dr&&!Ct[Dr]){var ln=ve.getUniformLocation(this.program,Dr);ln&&(Ct[Dr]=ln)}}this.fixedUniforms=te(R,Ct),this.binderUniforms=W?W.getUniforms(R,Ct):[]};Qc.prototype.draw=function(R,G,I,W,te,ee,ve,Ee,Oe,vt,wt,pt,Be,$e,ot,Tt){var Lt,Pt=R.gl;if(!this.failedToCreate){R.program.set(this.program),R.setDepthMode(I),R.setStencilMode(W),R.setColorMode(te),R.setCullFace(ee);for(var Xt in this.fixedUniforms)this.fixedUniforms[Xt].set(ve[Xt]);$e&&$e.setUniforms(R,this.binderUniforms,pt,{zoom:Be});for(var Nt=(Lt={},Lt[Pt.LINES]=2,Lt[Pt.TRIANGLES]=3,Lt[Pt.LINE_STRIP]=1,Lt)[G],Dt=0,Zt=wt.get();Dt<Zt.length;Dt+=1){var Ct=Zt[Dt],ar=Ct.vaos||(Ct.vaos={}),yr=ar[Ee]||(ar[Ee]=new kc);yr.bind(R,this,Oe,$e?$e.getPaintVertexBuffers():[],vt,Ct.vertexOffset,ot,Tt),Pt.drawElements(G,Ct.primitiveLength*Nt,Pt.UNSIGNED_SHORT,Ct.primitiveOffset*Nt*2)}}};function pf(H,R,G){var I=1/Eo(G,1,R.transform.tileZoom),W=Math.pow(2,G.tileID.overscaledZ),te=G.tileSize*Math.pow(2,R.transform.tileZoom)/W,ee=te*(G.tileID.canonical.x+G.tileID.wrap*W),ve=te*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[I,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[ee>>16,ve>>16],u_pixel_coord_lower:[ee&65535,ve&65535]}}function sc(H,R,G,I){var W=G.imageManager.getPattern(H.from.toString()),te=G.imageManager.getPattern(H.to.toString()),ee=G.imageManager.getPixelSize(),ve=ee.width,Ee=ee.height,Oe=Math.pow(2,I.tileID.overscaledZ),vt=I.tileSize*Math.pow(2,G.transform.tileZoom)/Oe,wt=vt*(I.tileID.canonical.x+I.tileID.wrap*Oe),pt=vt*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[ve,Ee],u_mix:R.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/Eo(I,1,G.transform.tileZoom),u_pixel_coord_upper:[wt>>16,pt>>16],u_pixel_coord_lower:[wt&65535,pt&65535]}}var Vv=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_opacity:new n.Uniform1f(H,R.u_opacity)}},Hs=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_height_factor:new n.Uniform1f(H,R.u_height_factor),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade),u_opacity:new n.Uniform1f(H,R.u_opacity)}},vv=function(H,R,G,I){var W=R.style.light,te=W.properties.get("position"),ee=[te.x,te.y,te.z],ve=n.create$1();W.properties.get("anchor")==="viewport"&&n.fromRotation(ve,-R.transform.angle),n.transformMat3(ee,ee,ve);var Ee=W.properties.get("color");return{u_matrix:H,u_lightpos:ee,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[Ee.r,Ee.g,Ee.b],u_vertical_gradient:+G,u_opacity:I}},Bf=function(H,R,G,I,W,te,ee){return n.extend(vv(H,R,G,I),pf(te,R,ee),{u_height_factor:-Math.pow(2,W.overscaledZ)/ee.tileSize/8})},Nf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},Uf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},_s=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world)}},pl=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},Hu=function(H){return{u_matrix:H}},Vf=function(H,R,G,I){return n.extend(Hu(H),pf(G,R,I))},Gu=function(H,R){return{u_matrix:H,u_world:R}},Ph=function(H,R,G,I,W){return n.extend(Vf(H,R,G,I),{u_world:W})},Ve=function(H,R){return{u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(H,R.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},it=function(H,R,G,I){var W=H.transform,te,ee;if(I.paint.get("circle-pitch-alignment")==="map"){var ve=Eo(G,1,W.zoom);te=!0,ee=[ve,ve]}else te=!1,ee=W.pixelsToGLUnits;return{u_camera_to_center_distance:W.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:H.translatePosMatrix(R.posMatrix,G,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+te,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:ee}},Ht=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(H,R.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_overscale_factor:new n.Uniform1f(H,R.u_overscale_factor)}},Rt=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_inv_matrix:new n.UniformMatrix4f(H,R.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(H,R.u_viewport_size)}},lr=function(H,R,G){var I=Eo(G,1,R.zoom),W=Math.pow(2,R.zoom-G.tileID.overscaledZ),te=G.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:R.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[R.pixelsToGLUnits[0]/(I*W),R.pixelsToGLUnits[1]/(I*W)],u_overscale_factor:te}},Lr=function(H,R,G){return{u_matrix:H,u_inv_matrix:R,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},Fr=function(H,R){return{u_color:new n.UniformColor(H,R.u_color),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_overlay:new n.Uniform1i(H,R.u_overlay),u_overlay_scale:new n.Uniform1f(H,R.u_overlay_scale)}},Zr=function(H,R,G){return G===void 0&&(G=1),{u_matrix:H,u_color:R,u_overlay:0,u_overlay_scale:G}},nn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},An=function(H){return{u_matrix:H}},Br=function(H,R){return{u_extrude_scale:new n.Uniform1f(H,R.u_extrude_scale),u_intensity:new n.Uniform1f(H,R.u_intensity),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},tn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_color_ramp:new n.Uniform1i(H,R.u_color_ramp),u_opacity:new n.Uniform1f(H,R.u_opacity)}},rn=function(H,R,G,I){return{u_matrix:H,u_extrude_scale:Eo(R,1,G),u_intensity:I}},wn=function(H,R,G,I){var W=n.create();n.ortho(W,0,H.width,H.height,0,0,1);var te=H.context.gl;return{u_matrix:W,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:G,u_color_ramp:I,u_opacity:R.paint.get("heatmap-opacity")}},Gn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_latrange:new n.Uniform2f(H,R.u_latrange),u_light:new n.Uniform2f(H,R.u_light),u_shadow:new n.UniformColor(H,R.u_shadow),u_highlight:new n.UniformColor(H,R.u_highlight),u_accent:new n.UniformColor(H,R.u_accent)}},Oi=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_dimension:new n.Uniform2f(H,R.u_dimension),u_zoom:new n.Uniform1f(H,R.u_zoom),u_unpack:new n.Uniform4f(H,R.u_unpack)}},Ii=function(H,R,G){var I=G.paint.get("hillshade-shadow-color"),W=G.paint.get("hillshade-highlight-color"),te=G.paint.get("hillshade-accent-color"),ee=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(ee-=H.transform.angle);var ve=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(R.tileID.toUnwrapped(),ve),u_image:0,u_latrange:Ki(H,R.tileID),u_light:[G.paint.get("hillshade-exaggeration"),ee],u_shadow:I,u_highlight:W,u_accent:te}},Hi=function(H,R){var G=R.stride,I=n.create();return n.ortho(I,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(I,I,[0,-n.EXTENT,0]),{u_matrix:I,u_image:1,u_dimension:[G,G],u_zoom:H.overscaledZ,u_unpack:R.getUnpackVector()}};function Ki(H,R){var G=Math.pow(2,R.canonical.z),I=R.canonical.y;return[new n.MercatorCoordinate(0,I/G).toLngLat().lat,new n.MercatorCoordinate(0,(I+1)/G).toLngLat().lat]}var On=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels)}},$n=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_image:new n.Uniform1i(H,R.u_image),u_image_height:new n.Uniform1f(H,R.u_image_height)}},Ji=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_texsize:new n.Uniform2f(H,R.u_texsize),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_image:new n.Uniform1i(H,R.u_image),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},ca=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(H,R.u_patternscale_a),u_patternscale_b:new n.Uniform2f(H,R.u_patternscale_b),u_sdfgamma:new n.Uniform1f(H,R.u_sdfgamma),u_image:new n.Uniform1i(H,R.u_image),u_tex_y_a:new n.Uniform1f(H,R.u_tex_y_a),u_tex_y_b:new n.Uniform1f(H,R.u_tex_y_b),u_mix:new n.Uniform1f(H,R.u_mix)}},Ka=function(H,R,G){var I=H.transform;return{u_matrix:bs(H,R,G),u_ratio:1/Eo(R,1,I.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},mo=function(H,R,G,I){return n.extend(Ka(H,R,G),{u_image:0,u_image_height:I})},vo=function(H,R,G,I){var W=H.transform,te=Na(R,W);return{u_matrix:bs(H,R,G),u_texsize:R.imageAtlasTexture.size,u_ratio:1/Eo(R,1,W.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[te,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},xo=function(H,R,G,I,W){var te=H.transform,ee=H.lineAtlas,ve=Na(R,te),Ee=G.layout.get("line-cap")==="round",Oe=ee.getDash(I.from,Ee),vt=ee.getDash(I.to,Ee),wt=Oe.width*W.fromScale,pt=vt.width*W.toScale;return n.extend(Ka(H,R,G),{u_patternscale_a:[ve/wt,-Oe.height/2],u_patternscale_b:[ve/pt,-vt.height/2],u_sdfgamma:ee.width/(Math.min(wt,pt)*256*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Oe.y,u_tex_y_b:vt.y,u_mix:W.t})};function Na(H,R){return 1/Eo(H,1,R.tileZoom)}function bs(H,R,G){return H.translatePosMatrix(R.tileID.posMatrix,R,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var Zo=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_tl_parent:new n.Uniform2f(H,R.u_tl_parent),u_scale_parent:new n.Uniform1f(H,R.u_scale_parent),u_buffer_scale:new n.Uniform1f(H,R.u_buffer_scale),u_fade_t:new n.Uniform1f(H,R.u_fade_t),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image0:new n.Uniform1i(H,R.u_image0),u_image1:new n.Uniform1i(H,R.u_image1),u_brightness_low:new n.Uniform1f(H,R.u_brightness_low),u_brightness_high:new n.Uniform1f(H,R.u_brightness_high),u_saturation_factor:new n.Uniform1f(H,R.u_saturation_factor),u_contrast_factor:new n.Uniform1f(H,R.u_contrast_factor),u_spin_weights:new n.Uniform3f(H,R.u_spin_weights)}},Bo=function(H,R,G,I,W){return{u_matrix:H,u_tl_parent:R,u_scale_parent:G,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:ws(W.paint.get("raster-saturation")),u_contrast_factor:ta(W.paint.get("raster-contrast")),u_spin_weights:hi(W.paint.get("raster-hue-rotate"))}};function hi(H){H*=Math.PI/180;var R=Math.sin(H),G=Math.cos(H);return[(2*G+1)/3,(-Math.sqrt(3)*R-G+1)/3,(Math.sqrt(3)*R-G+1)/3]}function ta(H){return H>0?1/(1-H):1+H}function ws(H){return H>0?1-1/(1.001-H):-H}var Ml=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture)}},Yl=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},iu=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texsize_icon:new n.Uniform2f(H,R.u_texsize_icon),u_texture:new n.Uniform1i(H,R.u_texture),u_texture_icon:new n.Uniform1i(H,R.u_texture_icon),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},Yu=function(H,R,G,I,W,te,ee,ve,Ee,Oe){var vt=W.transform;return{u_is_size_zoom_constant:+(H==="constant"||H==="source"),u_is_size_feature_constant:+(H==="constant"||H==="camera"),u_size_t:R?R.uSizeT:0,u_size:R?R.uSize:0,u_camera_to_center_distance:vt.cameraToCenterDistance,u_pitch:vt.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:vt.width/vt.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:ee,u_coord_matrix:ve,u_is_text:+Ee,u_pitch_with_map:+I,u_texsize:Oe,u_texture:0}},Hf=function(H,R,G,I,W,te,ee,ve,Ee,Oe,vt){var wt=W.transform;return n.extend(Yu(H,R,G,I,W,te,ee,ve,Ee,Oe),{u_gamma_scale:I?Math.cos(wt._pitch)*wt.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+vt})},au=function(H,R,G,I,W,te,ee,ve,Ee,Oe){return n.extend(Hf(H,R,G,I,W,te,ee,ve,!0,Ee,!0),{u_texsize_icon:Oe,u_texture_icon:1})},Lc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_color:new n.UniformColor(H,R.u_color)}},Pc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image:new n.Uniform1i(H,R.u_image),u_pattern_tl_a:new n.Uniform2f(H,R.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(H,R.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(H,R.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(H,R.u_pattern_br_b),u_texsize:new n.Uniform2f(H,R.u_texsize),u_mix:new n.Uniform1f(H,R.u_mix),u_pattern_size_a:new n.Uniform2f(H,R.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(H,R.u_pattern_size_b),u_scale_a:new n.Uniform1f(H,R.u_scale_a),u_scale_b:new n.Uniform1f(H,R.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(H,R.u_tile_units_to_pixels)}},lc=function(H,R,G){return{u_matrix:H,u_opacity:R,u_color:G}},Rh=function(H,R,G,I,W,te){return n.extend(sc(I,te,G,W),{u_matrix:H,u_opacity:R})},$c={fillExtrusion:Vv,fillExtrusionPattern:Hs,fill:Nf,fillPattern:Uf,fillOutline:_s,fillOutlinePattern:pl,circle:Ve,collisionBox:Ht,collisionCircle:Rt,debug:Fr,clippingMask:nn,heatmap:Br,heatmapTexture:tn,hillshade:Gn,hillshadePrepare:Oi,line:On,lineGradient:$n,linePattern:Ji,lineSDF:ca,raster:Zo,symbolIcon:Ml,symbolSDF:Yl,symbolTextAndIcon:iu,background:Lc,backgroundPattern:Pc},uc;function gf(H,R,G,I,W,te,ee){for(var ve=H.context,Ee=ve.gl,Oe=H.useProgram("collisionBox"),vt=[],wt=0,pt=0,Be=0;Be<I.length;Be++){var $e=I[Be],ot=R.getTile($e),Tt=ot.getBucket(G);if(Tt){var Lt=$e.posMatrix;(W[0]!==0||W[1]!==0)&&(Lt=H.translatePosMatrix($e.posMatrix,ot,W,te));var Pt=ee?Tt.textCollisionBox:Tt.iconCollisionBox,Xt=Tt.collisionCircleArray;if(Xt.length>0){var Nt=n.create(),Dt=Lt;n.mul(Nt,Tt.placementInvProjMatrix,H.transform.glCoordMatrix),n.mul(Nt,Nt,Tt.placementViewportMatrix),vt.push({circleArray:Xt,circleOffset:pt,transform:Dt,invTransform:Nt}),wt+=Xt.length/4,pt=wt}Pt&&Oe.draw(ve,Ee.LINES,xn.disabled,oi.disabled,H.colorModeForRenderPass(),Ot.disabled,lr(Lt,H.transform,ot),G.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,null,H.transform.zoom,null,null,Pt.collisionVertexBuffer)}}if(!(!ee||!vt.length)){var Zt=H.useProgram("collisionCircle"),Ct=new n.StructArrayLayout2f1f2i16;Ct.resize(wt*4),Ct._trim();for(var ar=0,yr=0,Dr=vt;yr<Dr.length;yr+=1)for(var ln=Dr[yr],Xr=0;Xr<ln.circleArray.length/4;Xr++){var dn=Xr*4,ii=ln.circleArray[dn+0],Nn=ln.circleArray[dn+1],un=ln.circleArray[dn+2],Ln=ln.circleArray[dn+3];Ct.emplace(ar++,ii,Nn,un,Ln,0),Ct.emplace(ar++,ii,Nn,un,Ln,1),Ct.emplace(ar++,ii,Nn,un,Ln,2),Ct.emplace(ar++,ii,Nn,un,Ln,3)}(!uc||uc.length<wt*2)&&(uc=Wu(wt));for(var Mn=ve.createIndexBuffer(uc,!0),Kn=ve.createVertexBuffer(Ct,n.collisionCircleLayout.members,!0),xi=0,Da=vt;xi<Da.length;xi+=1){var Pa=Da[xi],_o=Lr(Pa.transform,Pa.invTransform,H.transform);Zt.draw(ve,Ee.TRIANGLES,xn.disabled,oi.disabled,H.colorModeForRenderPass(),Ot.disabled,_o,G.id,Kn,Mn,n.SegmentVector.simpleSegment(0,Pa.circleOffset*2,Pa.circleArray.length,Pa.circleArray.length/2),null,H.transform.zoom,null,null,null)}Kn.destroy(),Mn.destroy()}}function Wu(H){var R=H*2,G=new n.StructArrayLayout3ui6;G.resize(R),G._trim();for(var I=0;I<R;I++){var W=I*6;G.uint16[W+0]=I*4+0,G.uint16[W+1]=I*4+1,G.uint16[W+2]=I*4+2,G.uint16[W+3]=I*4+2,G.uint16[W+4]=I*4+3,G.uint16[W+5]=I*4+0}return G}var Dh=n.identity(new Float32Array(16));function Hv(H,R,G,I,W){if(H.renderPass==="translucent"){var te=oi.disabled,ee=H.colorModeForRenderPass(),ve=G.layout.get("text-variable-anchor");ve&&Gv(I,H,G,R,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),W),G.paint.get("icon-opacity").constantOr(1)!==0&&eh(H,R,G,I,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),te,ee),G.paint.get("text-opacity").constantOr(1)!==0&&eh(H,R,G,I,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),te,ee),R.map.showCollisionBoxes&&(gf(H,R,G,I,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),gf(H,R,G,I,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}}function Ih(H,R,G,I,W,te){var ee=n.getAnchorAlignment(H),ve=ee.horizontalAlign,Ee=ee.verticalAlign,Oe=-(ve-.5)*R,vt=-(Ee-.5)*G,wt=n.evaluateVariableOffset(H,I);return new n.Point((Oe/W+wt[0])*te,(vt/W+wt[1])*te)}function Gv(H,R,G,I,W,te,ee){for(var ve=R.transform,Ee=W==="map",Oe=te==="map",vt=0,wt=H;vt<wt.length;vt+=1){var pt=wt[vt],Be=I.getTile(pt),$e=Be.getBucket(G);if(!(!$e||!$e.text||!$e.text.segments.get().length)){var ot=$e.textSizeData,Tt=n.evaluateSizeForZoom(ot,ve.zoom),Lt=Eo(Be,1,R.transform.zoom),Pt=cn(pt.posMatrix,Oe,Ee,R.transform,Lt),Xt=G.layout.get("icon-text-fit")!=="none"&&$e.hasIconData();if(Tt){var Nt=Math.pow(2,ve.zoom-Be.tileID.overscaledZ);Rc($e,Ee,Oe,ee,n.symbolSize,ve,Pt,pt.posMatrix,Nt,Tt,Xt)}}}}function Rc(H,R,G,I,W,te,ee,ve,Ee,Oe,vt){var wt=H.text.placedSymbolArray,pt=H.text.dynamicLayoutVertexArray,Be=H.icon.dynamicLayoutVertexArray,$e={};pt.clear();for(var ot=0;ot<wt.length;ot++){var Tt=wt.get(ot),Lt=H.allowVerticalPlacement&&!Tt.placedOrientation,Pt=!Tt.hidden&&Tt.crossTileID&&!Lt?I[Tt.crossTileID]:null;if(!Pt)as(Tt.numGlyphs,pt);else{var Xt=new n.Point(Tt.anchorX,Tt.anchorY),Nt=Hn(Xt,G?ve:ee),Dt=qi(te.cameraToCenterDistance,Nt.signedDistanceFromCamera),Zt=W.evaluateSizeForFeature(H.textSizeData,Oe,Tt)*Dt/n.ONE_EM;G&&(Zt*=H.tilePixelRatio/Ee);for(var Ct=Pt.width,ar=Pt.height,yr=Pt.anchor,Dr=Pt.textOffset,ln=Pt.textBoxScale,Xr=Ih(yr,Ct,ar,Dr,ln,Zt),dn=G?Hn(Xt.add(Xr),ee).point:Nt.point.add(R?Xr.rotate(-te.angle):Xr),ii=H.allowVerticalPlacement&&Tt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,Nn=0;Nn<Tt.numGlyphs;Nn++)n.addDynamicAttributes(pt,dn,ii);vt&&Tt.associatedIconIndex>=0&&($e[Tt.associatedIconIndex]={shiftedAnchor:dn,angle:ii})}}if(vt){Be.clear();for(var un=H.icon.placedSymbolArray,Ln=0;Ln<un.length;Ln++){var Mn=un.get(Ln);if(Mn.hidden)as(Mn.numGlyphs,Be);else{var Kn=$e[Ln];if(!Kn)as(Mn.numGlyphs,Be);else for(var xi=0;xi<Mn.numGlyphs;xi++)n.addDynamicAttributes(Be,Kn.shiftedAnchor,Kn.angle)}}H.icon.dynamicLayoutVertexBuffer.updateData(Be)}H.text.dynamicLayoutVertexBuffer.updateData(pt)}function Mu(H,R,G){return G.iconsInText&&R?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function eh(H,R,G,I,W,te,ee,ve,Ee,Oe,vt,wt){for(var pt=H.context,Be=pt.gl,$e=H.transform,ot=ve==="map",Tt=Ee==="map",Lt=ot&&G.layout.get("symbol-placement")!=="point",Pt=ot&&!Tt&&!Lt,Xt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,Nt=!1,Dt=H.depthModeForSublayer(0,xn.ReadOnly),Zt=G.layout.get("text-variable-anchor"),Ct=[],ar=0,yr=I;ar<yr.length;ar+=1){var Dr=yr[ar],ln=R.getTile(Dr),Xr=ln.getBucket(G);if(Xr){var dn=W?Xr.text:Xr.icon;if(!(!dn||!dn.segments.get().length)){var ii=dn.programConfigurations.get(G.id),Nn=W||Xr.sdfIcons,un=W?Xr.textSizeData:Xr.iconSizeData,Ln=Tt||$e.pitch!==0,Mn=H.useProgram(Mu(Nn,W,Xr),ii),Kn=n.evaluateSizeForZoom(un,$e.zoom),xi=void 0,Da=[0,0],Pa=void 0,_o=void 0,ua=null,Qa=void 0;if(W){if(Pa=ln.glyphAtlasTexture,_o=Be.LINEAR,xi=ln.glyphAtlasTexture.size,Xr.iconsInText){Da=ln.imageAtlasTexture.size,ua=ln.imageAtlasTexture;var Vo=un.kind==="composite"||un.kind==="camera";Qa=Ln||H.options.rotating||H.options.zooming||Vo?Be.LINEAR:Be.NEAREST}}else{var ml=G.layout.get("icon-size").constantOr(0)!==1||Xr.iconsNeedLinear;Pa=ln.imageAtlasTexture,_o=Nn||H.options.rotating||H.options.zooming||ml||Ln?Be.LINEAR:Be.NEAREST,xi=ln.imageAtlasTexture.size}var Wv=Eo(ln,1,H.transform.zoom),Xv=cn(Dr.posMatrix,Tt,ot,H.transform,Wv),Td=gi(Dr.posMatrix,Tt,ot,H.transform,Wv),Xd=Zt&&Xr.hasTextData(),Mg=G.layout.get("icon-text-fit")!=="none"&&Xd&&Xr.hasIconData();Lt&&eo(Xr,Dr.posMatrix,H,W,Xv,Td,Tt,Oe);var Zd=H.translatePosMatrix(Dr.posMatrix,ln,te,ee),nh=Lt||W&&Zt||Mg?Dh:Xv,jd=H.translatePosMatrix(Td,ln,te,ee,!0),zh=Nn&&G.paint.get(W?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ih=void 0;Nn?Xr.iconsInText?ih=au(un.kind,Kn,Pt,Tt,H,Zd,nh,jd,xi,Da):ih=Hf(un.kind,Kn,Pt,Tt,H,Zd,nh,jd,W,xi,!0):ih=Yu(un.kind,Kn,Pt,Tt,H,Zd,nh,jd,W,xi);var Ad={program:Mn,buffers:dn,uniformValues:ih,atlasTexture:Pa,atlasTextureIcon:ua,atlasInterpolation:_o,atlasInterpolationIcon:Qa,isSDF:Nn,hasHalo:zh};if(Xt&&Xr.canOverlap){Nt=!0;for(var Xp=dn.segments.get(),Md=0,wb=Xp;Md<wb.length;Md+=1){var Fy=wb[Md];Ct.push({segments:new n.SegmentVector([Fy]),sortKey:Fy.sortKey,state:Ad})}}else Ct.push({segments:dn.segments,sortKey:0,state:Ad})}}}Nt&&Ct.sort(function(Ab,Mb){return Ab.sortKey-Mb.sortKey});for(var mf=0,Tb=Ct;mf<Tb.length;mf+=1){var G1=Tb[mf],Dc=G1.state;if(pt.activeTexture.set(Be.TEXTURE0),Dc.atlasTexture.bind(Dc.atlasInterpolation,Be.CLAMP_TO_EDGE),Dc.atlasTextureIcon&&(pt.activeTexture.set(Be.TEXTURE1),Dc.atlasTextureIcon&&Dc.atlasTextureIcon.bind(Dc.atlasInterpolationIcon,Be.CLAMP_TO_EDGE)),Dc.isSDF){var qy=Dc.uniformValues;Dc.hasHalo&&(qy.u_is_halo=1,th(Dc.buffers,G1.segments,G,H,Dc.program,Dt,vt,wt,qy)),qy.u_is_halo=0}th(Dc.buffers,G1.segments,G,H,Dc.program,Dt,vt,wt,Dc.uniformValues)}}function th(H,R,G,I,W,te,ee,ve,Ee){var Oe=I.context,vt=Oe.gl;W.draw(Oe,vt.TRIANGLES,te,ee,ve,Ot.disabled,Ee,G.id,H.layoutVertexBuffer,H.indexBuffer,R,G.paint,I.transform.zoom,H.programConfigurations.get(G.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function rh(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("circle-opacity"),te=G.paint.get("circle-stroke-width"),ee=G.paint.get("circle-stroke-opacity"),ve=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(W.constantOr(1)===0&&(te.constantOr(1)===0||ee.constantOr(1)===0))){for(var Ee=H.context,Oe=Ee.gl,vt=H.depthModeForSublayer(0,xn.ReadOnly),wt=oi.disabled,pt=H.colorModeForRenderPass(),Be=[],$e=0;$e<I.length;$e++){var ot=I[$e],Tt=R.getTile(ot),Lt=Tt.getBucket(G);if(Lt){var Pt=Lt.programConfigurations.get(G.id),Xt=H.useProgram("circle",Pt),Nt=Lt.layoutVertexBuffer,Dt=Lt.indexBuffer,Zt=it(H,ot,Tt,G),Ct={programConfiguration:Pt,program:Xt,layoutVertexBuffer:Nt,indexBuffer:Dt,uniformValues:Zt};if(ve)for(var ar=Lt.segments.get(),yr=0,Dr=ar;yr<Dr.length;yr+=1){var ln=Dr[yr];Be.push({segments:new n.SegmentVector([ln]),sortKey:ln.sortKey,state:Ct})}else Be.push({segments:Lt.segments,sortKey:0,state:Ct})}}ve&&Be.sort(function(Pa,_o){return Pa.sortKey-_o.sortKey});for(var Xr=0,dn=Be;Xr<dn.length;Xr+=1){var ii=dn[Xr],Nn=ii.state,un=Nn.programConfiguration,Ln=Nn.program,Mn=Nn.layoutVertexBuffer,Kn=Nn.indexBuffer,xi=Nn.uniformValues,Da=ii.segments;Ln.draw(Ee,Oe.TRIANGLES,vt,wt,pt,Ot.disabled,xi,G.id,Mn,Kn,Da,G.paint,H.transform.zoom,un)}}}}function Gf(H,R,G,I){if(G.paint.get("heatmap-opacity")!==0)if(H.renderPass==="offscreen"){var W=H.context,te=W.gl,ee=oi.disabled,ve=new Ne([te.ONE,te.ONE],n.Color.transparent,[!0,!0,!0,!0]);Fh(W,H,G),W.clear({color:n.Color.transparent});for(var Ee=0;Ee<I.length;Ee++){var Oe=I[Ee];if(!R.hasRenderableParent(Oe)){var vt=R.getTile(Oe),wt=vt.getBucket(G);if(wt){var pt=wt.programConfigurations.get(G.id),Be=H.useProgram("heatmap",pt),$e=H.transform,ot=$e.zoom;Be.draw(W,te.TRIANGLES,xn.disabled,ee,ve,Ot.disabled,rn(Oe.posMatrix,vt,ot,G.paint.get("heatmap-intensity")),G.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,G.paint,H.transform.zoom,pt)}}}W.viewport.set([0,0,H.width,H.height])}else H.renderPass==="translucent"&&(H.context.setColorMode(H.colorModeForRenderPass()),qh(H,G))}function Fh(H,R,G){var I=H.gl;H.activeTexture.set(I.TEXTURE1),H.viewport.set([0,0,R.width/4,R.height/4]);var W=G.heatmapFbo;if(W)I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),H.bindFramebuffer.set(W.framebuffer);else{var te=I.createTexture();I.bindTexture(I.TEXTURE_2D,te),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),W=G.heatmapFbo=H.createFramebuffer(R.width/4,R.height/4,!1),Yv(H,R,te,W)}}function Yv(H,R,G,I){var W=H.gl,te=H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:W.UNSIGNED_BYTE;W.texImage2D(W.TEXTURE_2D,0,W.RGBA,R.width/4,R.height/4,0,W.RGBA,te,null),I.colorAttachment.set(G)}function qh(H,R){var G=H.context,I=G.gl,W=R.heatmapFbo;if(W){G.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),G.activeTexture.set(I.TEXTURE1);var te=R.colorRampTexture;te||(te=R.colorRampTexture=new n.Texture(G,R.colorRamp,I.RGBA)),te.bind(I.LINEAR,I.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(G,I.TRIANGLES,xn.disabled,oi.disabled,H.colorModeForRenderPass(),Ot.disabled,wn(H,R,0,1),R.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,R.paint,H.transform.zoom)}}function ou(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("line-opacity"),te=G.paint.get("line-width");if(!(W.constantOr(1)===0||te.constantOr(1)===0))for(var ee=H.depthModeForSublayer(0,xn.ReadOnly),ve=H.colorModeForRenderPass(),Ee=G.paint.get("line-dasharray"),Oe=G.paint.get("line-pattern"),vt=Oe.constantOr(1),wt=G.paint.get("line-gradient"),pt=G.getCrossfadeParameters(),Be=vt?"linePattern":Ee?"lineSDF":wt?"lineGradient":"line",$e=H.context,ot=$e.gl,Tt=!0,Lt=0,Pt=I;Lt<Pt.length;Lt+=1){var Xt=Pt[Lt],Nt=R.getTile(Xt);if(!(vt&&!Nt.patternsLoaded())){var Dt=Nt.getBucket(G);if(Dt){var Zt=Dt.programConfigurations.get(G.id),Ct=H.context.program.get(),ar=H.useProgram(Be,Zt),yr=Tt||ar.program!==Ct,Dr=Oe.constantOr(null);if(Dr&&Nt.imageAtlas){var ln=Nt.imageAtlas,Xr=ln.patternPositions[Dr.to.toString()],dn=ln.patternPositions[Dr.from.toString()];Xr&&dn&&Zt.setConstantPatternPositions(Xr,dn)}var ii=vt?vo(H,Nt,G,pt):Ee?xo(H,Nt,G,Ee,pt):wt?mo(H,Nt,G,Dt.lineClipsArray.length):Ka(H,Nt,G);if(vt)$e.activeTexture.set(ot.TEXTURE0),Nt.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),Zt.updatePaintBuffers(pt);else if(Ee&&(yr||H.lineAtlas.dirty))$e.activeTexture.set(ot.TEXTURE0),H.lineAtlas.bind($e);else if(wt){var Nn=Dt.gradients[G.id],un=Nn.texture;if(G.gradientVersion!==Nn.version){var Ln=256;if(G.stepInterpolant){var Mn=R.getSource().maxzoom,Kn=Xt.canonical.z===Mn?Math.ceil(1<<H.transform.maxZoom-Xt.canonical.z):1,xi=Dt.maxLineLength/n.EXTENT,Da=1024,Pa=xi*Da*Kn;Ln=n.clamp(n.nextPowerOfTwo(Pa),256,$e.maxTextureSize)}Nn.gradient=n.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:Ln,image:Nn.gradient||void 0,clips:Dt.lineClipsArray}),Nn.texture?Nn.texture.update(Nn.gradient):Nn.texture=new n.Texture($e,Nn.gradient,ot.RGBA),Nn.version=G.gradientVersion,un=Nn.texture}$e.activeTexture.set(ot.TEXTURE0),un.bind(G.stepInterpolant?ot.NEAREST:ot.LINEAR,ot.CLAMP_TO_EDGE)}ar.draw($e,ot.TRIANGLES,ee,H.stencilModeForClipping(Xt),ve,Ot.disabled,ii,G.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,G.paint,H.transform.zoom,Zt,Dt.layoutVertexBuffer2),Tt=!1}}}}}function de(H,R,G,I){var W=G.paint.get("fill-color"),te=G.paint.get("fill-opacity");if(te.constantOr(1)!==0){var ee=H.colorModeForRenderPass(),ve=G.paint.get("fill-pattern"),Ee=H.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&W.constantOr(n.Color.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(H.renderPass===Ee){var Oe=H.depthModeForSublayer(1,H.renderPass==="opaque"?xn.ReadWrite:xn.ReadOnly);Te(H,R,G,I,Oe,ee,!1)}if(H.renderPass==="translucent"&&G.paint.get("fill-antialias")){var vt=H.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,xn.ReadOnly);Te(H,R,G,I,vt,ee,!0)}}}function Te(H,R,G,I,W,te,ee){var ve=H.context.gl,Ee=G.paint.get("fill-pattern"),Oe=Ee&&Ee.constantOr(1),vt=G.getCrossfadeParameters(),wt,pt,Be,$e,ot;ee?(pt=Oe&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",wt=ve.LINES):(pt=Oe?"fillPattern":"fill",wt=ve.TRIANGLES);for(var Tt=0,Lt=I;Tt<Lt.length;Tt+=1){var Pt=Lt[Tt],Xt=R.getTile(Pt);if(!(Oe&&!Xt.patternsLoaded())){var Nt=Xt.getBucket(G);if(Nt){var Dt=Nt.programConfigurations.get(G.id),Zt=H.useProgram(pt,Dt);Oe&&(H.context.activeTexture.set(ve.TEXTURE0),Xt.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Dt.updatePaintBuffers(vt));var Ct=Ee.constantOr(null);if(Ct&&Xt.imageAtlas){var ar=Xt.imageAtlas,yr=ar.patternPositions[Ct.to.toString()],Dr=ar.patternPositions[Ct.from.toString()];yr&&Dr&&Dt.setConstantPatternPositions(yr,Dr)}var ln=H.translatePosMatrix(Pt.posMatrix,Xt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(!ee)$e=Nt.indexBuffer,ot=Nt.segments,Be=Oe?Vf(ln,H,vt,Xt):Hu(ln);else{$e=Nt.indexBuffer2,ot=Nt.segments2;var Xr=[ve.drawingBufferWidth,ve.drawingBufferHeight];Be=pt==="fillOutlinePattern"&&Oe?Ph(ln,H,vt,Xt,Xr):Gu(ln,Xr)}Zt.draw(H.context,wt,W,H.stencilModeForClipping(Pt),te,Ot.disabled,Be,G.id,Nt.layoutVertexBuffer,$e,ot,G.paint,H.transform.zoom,Dt)}}}}function Ce(H,R,G,I){var W=G.paint.get("fill-extrusion-opacity");if(W!==0&&H.renderPass==="translucent"){var te=new xn(H.context.gl.LEQUAL,xn.ReadWrite,H.depthRangeFor3D);if(W===1&&!G.paint.get("fill-extrusion-pattern").constantOr(1)){var ee=H.colorModeForRenderPass();De(H,R,G,I,te,oi.disabled,ee)}else De(H,R,G,I,te,oi.disabled,Ne.disabled),De(H,R,G,I,te,H.stencilModeFor3D(),H.colorModeForRenderPass())}}function De(H,R,G,I,W,te,ee){for(var ve=H.context,Ee=ve.gl,Oe=G.paint.get("fill-extrusion-pattern"),vt=Oe.constantOr(1),wt=G.getCrossfadeParameters(),pt=G.paint.get("fill-extrusion-opacity"),Be=0,$e=I;Be<$e.length;Be+=1){var ot=$e[Be],Tt=R.getTile(ot),Lt=Tt.getBucket(G);if(Lt){var Pt=Lt.programConfigurations.get(G.id),Xt=H.useProgram(vt?"fillExtrusionPattern":"fillExtrusion",Pt);vt&&(H.context.activeTexture.set(Ee.TEXTURE0),Tt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Pt.updatePaintBuffers(wt));var Nt=Oe.constantOr(null);if(Nt&&Tt.imageAtlas){var Dt=Tt.imageAtlas,Zt=Dt.patternPositions[Nt.to.toString()],Ct=Dt.patternPositions[Nt.from.toString()];Zt&&Ct&&Pt.setConstantPatternPositions(Zt,Ct)}var ar=H.translatePosMatrix(ot.posMatrix,Tt,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),yr=G.paint.get("fill-extrusion-vertical-gradient"),Dr=vt?Bf(ar,H,yr,pt,ot,wt,Tt):vv(ar,H,yr,pt);Xt.draw(ve,ve.gl.TRIANGLES,W,te,ee,Ot.backCCW,Dr,G.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,G.paint,H.transform.zoom,Pt)}}}function Ge(H,R,G,I){if(!(H.renderPass!=="offscreen"&&H.renderPass!=="translucent")){for(var W=H.context,te=H.depthModeForSublayer(0,xn.ReadOnly),ee=H.colorModeForRenderPass(),ve=H.renderPass==="translucent"?H.stencilConfigForOverlap(I):[{},I],Ee=ve[0],Oe=ve[1],vt=0,wt=Oe;vt<wt.length;vt+=1){var pt=wt[vt],Be=R.getTile(pt);Be.needsHillshadePrepare&&H.renderPass==="offscreen"?Qe(H,Be,G,te,oi.disabled,ee):H.renderPass==="translucent"&&He(H,Be,G,te,Ee[pt.overscaledZ],ee)}W.viewport.set([0,0,H.width,H.height])}}function He(H,R,G,I,W,te){var ee=H.context,ve=ee.gl,Ee=R.fbo;if(Ee){var Oe=H.useProgram("hillshade");ee.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,Ee.colorAttachment.get());var vt=Ii(H,R,G);Oe.draw(ee,ve.TRIANGLES,I,W,te,Ot.disabled,vt,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Qe(H,R,G,I,W,te){var ee=H.context,ve=ee.gl,Ee=R.dem;if(Ee&&Ee.data){var Oe=Ee.dim,vt=Ee.stride,wt=Ee.getPixels();if(ee.activeTexture.set(ve.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),R.demTexture=R.demTexture||H.getTileTexture(vt),R.demTexture){var pt=R.demTexture;pt.update(wt,{premultiply:!1}),pt.bind(ve.NEAREST,ve.CLAMP_TO_EDGE)}else R.demTexture=new n.Texture(ee,wt,ve.RGBA,{premultiply:!1}),R.demTexture.bind(ve.NEAREST,ve.CLAMP_TO_EDGE);ee.activeTexture.set(ve.TEXTURE0);var Be=R.fbo;if(!Be){var $e=new n.Texture(ee,{width:Oe,height:Oe,data:null},ve.RGBA);$e.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Be=R.fbo=ee.createFramebuffer(Oe,Oe,!0),Be.colorAttachment.set($e.texture)}ee.bindFramebuffer.set(Be.framebuffer),ee.viewport.set([0,0,Oe,Oe]),H.useProgram("hillshadePrepare").draw(ee,ve.TRIANGLES,I,W,te,Ot.disabled,Hi(R.tileID,Ee),G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),R.needsHillshadePrepare=!1}}function Ft(H,R,G,I){if(H.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&I.length)for(var W=H.context,te=W.gl,ee=R.getSource(),ve=H.useProgram("raster"),Ee=H.colorModeForRenderPass(),Oe=ee instanceof fe?[{},I]:H.stencilConfigForOverlap(I),vt=Oe[0],wt=Oe[1],pt=wt[wt.length-1].overscaledZ,Be=!H.options.moving,$e=0,ot=wt;$e<ot.length;$e+=1){var Tt=ot[$e],Lt=H.depthModeForSublayer(Tt.overscaledZ-pt,G.paint.get("raster-opacity")===1?xn.ReadWrite:xn.ReadOnly,te.LESS),Pt=R.getTile(Tt),Xt=H.transform.calculatePosMatrix(Tt.toUnwrapped(),Be);Pt.registerFadeDuration(G.paint.get("raster-fade-duration"));var Nt=R.findLoadedParent(Tt,0),Dt=jt(Pt,Nt,R,G,H.transform),Zt=void 0,Ct=void 0,ar=G.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;W.activeTexture.set(te.TEXTURE0),Pt.texture.bind(ar,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(te.TEXTURE1),Nt?(Nt.texture.bind(ar,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),Zt=Math.pow(2,Nt.tileID.overscaledZ-Pt.tileID.overscaledZ),Ct=[Pt.tileID.canonical.x*Zt%1,Pt.tileID.canonical.y*Zt%1]):Pt.texture.bind(ar,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);var yr=Bo(Xt,Ct||[0,0],Zt||1,Dt,G);ee instanceof fe?ve.draw(W,te.TRIANGLES,Lt,oi.disabled,Ee,Ot.disabled,yr,G.id,ee.boundsBuffer,H.quadTriangleIndexBuffer,ee.boundsSegments):ve.draw(W,te.TRIANGLES,Lt,vt[Tt.overscaledZ],Ee,Ot.disabled,yr,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function jt(H,R,G,I,W){var te=I.paint.get("raster-fade-duration");if(te>0){var ee=n.browser.now(),ve=(ee-H.timeAdded)/te,Ee=R?(ee-R.timeAdded)/te:-1,Oe=G.getSource(),vt=W.coveringZoomLevel({tileSize:Oe.tileSize,roundZoom:Oe.roundZoom}),wt=!R||Math.abs(R.tileID.overscaledZ-vt)>Math.abs(H.tileID.overscaledZ-vt),pt=wt&&H.refreshedUponExpiration?1:n.clamp(wt?ve:1-Ee,0,1);return H.refreshedUponExpiration&&ve>=1&&(H.refreshedUponExpiration=!1),R?{opacity:1,mix:1-pt}:{opacity:pt,mix:0}}else return{opacity:1,mix:0}}function It(H,R,G){var I=G.paint.get("background-color"),W=G.paint.get("background-opacity");if(W!==0){var te=H.context,ee=te.gl,ve=H.transform,Ee=ve.tileSize,Oe=G.paint.get("background-pattern");if(!H.isPatternMissing(Oe)){var vt=!Oe&&I.a===1&&W===1&&H.opaquePassEnabledForLayer()?"opaque":"translucent";if(H.renderPass===vt){var wt=oi.disabled,pt=H.depthModeForSublayer(0,vt==="opaque"?xn.ReadWrite:xn.ReadOnly),Be=H.colorModeForRenderPass(),$e=H.useProgram(Oe?"backgroundPattern":"background"),ot=ve.coveringTiles({tileSize:Ee});Oe&&(te.activeTexture.set(ee.TEXTURE0),H.imageManager.bind(H.context));for(var Tt=G.getCrossfadeParameters(),Lt=0,Pt=ot;Lt<Pt.length;Lt+=1){var Xt=Pt[Lt],Nt=H.transform.calculatePosMatrix(Xt.toUnwrapped()),Dt=Oe?Rh(Nt,W,H,Oe,{tileID:Xt,tileSize:Ee},Tt):lc(Nt,W,I);$e.draw(te,ee.TRIANGLES,pt,wt,Be,Ot.disabled,Dt,G.id,H.tileExtentBuffer,H.quadTriangleIndexBuffer,H.tileExtentSegments)}}}}}var Kt=new n.Color(1,0,0,1),ir=new n.Color(0,1,0,1),mr=new n.Color(0,0,1,1),Sr=new n.Color(1,0,1,1),Vr=new n.Color(0,1,1,1);function sn(H){var R=H.transform.padding,G=3;yi(H,H.transform.height-(R.top||0),G,Kt),yi(H,R.bottom||0,G,ir),Qi(H,R.left||0,G,mr),Qi(H,H.transform.width-(R.right||0),G,Sr);var I=H.transform.centerPoint;kn(H,I.x,H.transform.height-I.y,Vr)}function kn(H,R,G,I){var W=20,te=2;ra(H,R-te/2,G-W/2,te,W,I),ra(H,R-W/2,G-te/2,W,te,I)}function yi(H,R,G,I){ra(H,0,R+G/2,H.transform.width,G,I)}function Qi(H,R,G,I){ra(H,R-G/2,0,G,H.transform.height,I)}function ra(H,R,G,I,W,te){var ee=H.context,ve=ee.gl;ve.enable(ve.SCISSOR_TEST),ve.scissor(R*n.browser.devicePixelRatio,G*n.browser.devicePixelRatio,I*n.browser.devicePixelRatio,W*n.browser.devicePixelRatio),ee.clear({color:te}),ve.disable(ve.SCISSOR_TEST)}function sa(H,R,G){for(var I=0;I<G.length;I++)pa(H,R,G[I])}function pa(H,R,G){var I=H.context,W=I.gl,te=G.posMatrix,ee=H.useProgram("debug"),ve=xn.disabled,Ee=oi.disabled,Oe=H.colorModeForRenderPass(),vt="$debug";I.activeTexture.set(W.TEXTURE0),H.emptyTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),ee.draw(I,W.LINE_STRIP,ve,Ee,Oe,Ot.disabled,Zr(te,n.Color.red),vt,H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments);var wt=R.getTileByID(G.key).latestRawTileData,pt=wt&&wt.byteLength||0,Be=Math.floor(pt/1024),$e=R.getTile(G).tileSize,ot=512/Math.min($e,512)*(G.overscaledZ/H.transform.zoom)*.5,Tt=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(Tt+=" => "+G.overscaledZ);var Lt=Tt+" "+Be+"kb";Lo(H,Lt),ee.draw(I,W.TRIANGLES,ve,Ee,Ne.alphaBlended,Ot.disabled,Zr(te,n.Color.transparent,ot),vt,H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments)}function Lo(H,R){H.initDebugOverlayCanvas();var G=H.debugOverlayCanvas,I=H.context.gl,W=H.debugOverlayCanvas.getContext("2d");W.clearRect(0,0,G.width,G.height),W.shadowColor="white",W.shadowBlur=2,W.lineWidth=1.5,W.strokeStyle="white",W.textBaseline="top",W.font="bold 36px Open Sans, sans-serif",W.fillText(R,5,5),W.strokeText(R,5,5),H.debugOverlayTexture.update(G),H.debugOverlayTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}function jo(H,R,G){var I=H.context,W=G.implementation;if(H.renderPass==="offscreen"){var te=W.prerender;te&&(H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),te.call(W,I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState())}else if(H.renderPass==="translucent"){H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),I.setStencilMode(oi.disabled);var ee=W.renderingMode==="3d"?new xn(H.context.gl.LEQUAL,xn.ReadWrite,H.depthRangeFor3D):H.depthModeForSublayer(0,xn.ReadOnly);I.setDepthMode(ee),W.render(I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState(),I.bindFramebuffer.set(null)}}var ba={symbol:Hv,circle:rh,heatmap:Gf,line:ou,fill:de,"fill-extrusion":Ce,hillshade:Ge,raster:Ft,background:It,debug:sa,custom:jo},qa=function(R,G){this.context=new tr(R),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=pr.maxUnderzooming+pr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wc,this.gpuTimers={}};qa.prototype.resize=function(R,G){if(this.width=R*n.browser.devicePixelRatio,this.height=G*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var I=0,W=this.style._order;I<W.length;I+=1){var te=W[I];this.style._layers[te].resize()}},qa.prototype.setup=function(){var R=this.context,G=new n.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(n.EXTENT,0),G.emplaceBack(0,n.EXTENT),G.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(G,_u.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var I=new n.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(n.EXTENT,0),I.emplaceBack(0,n.EXTENT),I.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=R.createVertexBuffer(I,_u.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var W=new n.StructArrayLayout4i8;W.emplaceBack(0,0,0,0),W.emplaceBack(n.EXTENT,0,n.EXTENT,0),W.emplaceBack(0,n.EXTENT,0,n.EXTENT),W.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(W,le.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var te=new n.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(1,0),te.emplaceBack(0,1),te.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(te,_u.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var ee=new n.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(ee);var ve=new n.StructArrayLayout3ui6;ve.emplaceBack(0,1,2),ve.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(ve),this.emptyTexture=new n.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var Ee=this.context.gl;this.stencilClearMode=new oi({func:Ee.ALWAYS,mask:0},0,255,Ee.ZERO,Ee.ZERO,Ee.ZERO)},qa.prototype.clearStencil=function(){var R=this.context,G=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var I=n.create();n.ortho(I,0,this.width,this.height,0,0,1),n.scale(I,I,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,G.TRIANGLES,xn.disabled,this.stencilClearMode,Ne.disabled,Ot.disabled,An(I),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qa.prototype._renderTileClippingMasks=function(R,G){if(!(this.currentStencilSource===R.source||!R.isTileClipped()||!G||!G.length)){this.currentStencilSource=R.source;var I=this.context,W=I.gl;this.nextStencilID+G.length>256&&this.clearStencil(),I.setColorMode(Ne.disabled),I.setDepthMode(xn.disabled);var te=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ee=0,ve=G;ee<ve.length;ee+=1){var Ee=ve[ee],Oe=this._tileClippingMaskIDs[Ee.key]=this.nextStencilID++;te.draw(I,W.TRIANGLES,xn.disabled,new oi({func:W.ALWAYS,mask:0},Oe,255,W.KEEP,W.KEEP,W.REPLACE),Ne.disabled,Ot.disabled,An(Ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,G=this.context.gl;return new oi({func:G.NOTEQUAL,mask:255},R,255,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilModeForClipping=function(R){var G=this.context.gl;return new oi({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilConfigForOverlap=function(R){var G,I=this.context.gl,W=R.sort(function(Oe,vt){return vt.overscaledZ-Oe.overscaledZ}),te=W[W.length-1].overscaledZ,ee=W[0].overscaledZ-te+1;if(ee>1){this.currentStencilSource=void 0,this.nextStencilID+ee>256&&this.clearStencil();for(var ve={},Ee=0;Ee<ee;Ee++)ve[Ee+te]=new oi({func:I.GEQUAL,mask:255},Ee+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=ee,[ve,W]}return[(G={},G[te]=oi.disabled,G),W]},qa.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var G=8,I=1/G;return new Ne([R.CONSTANT_COLOR,R.ONE],new n.Color(I,I,I,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Ne.unblended:Ne.alphaBlended},qa.prototype.depthModeForSublayer=function(R,G,I){if(!this.opaquePassEnabledForLayer())return xn.disabled;var W=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new xn(I||this.context.gl.LEQUAL,G,[W,W])},qa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qa.prototype.render=function(R,G){var I=this;this.style=R,this.options=G,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var W=this.style._order,te=this.style.sourceCaches;for(var ee in te){var ve=te[ee];ve.used&&ve.prepare(this.context)}var Ee={},Oe={},vt={};for(var wt in te){var pt=te[wt];Ee[wt]=pt.getVisibleCoordinates(),Oe[wt]=Ee[wt].slice().reverse(),vt[wt]=pt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Be=0;Be<W.length;Be++){var $e=W[Be];if(this.style._layers[$e].is3D()){this.opaquePassCutoff=Be;break}}this.renderPass="offscreen";for(var ot=0,Tt=W;ot<Tt.length;ot+=1){var Lt=Tt[ot],Pt=this.style._layers[Lt];if(!(!Pt.hasOffscreenPass()||Pt.isHidden(this.transform.zoom))){var Xt=Oe[Pt.source];Pt.type!=="custom"&&!Xt.length||this.renderLayer(this,te[Pt.source],Pt,Xt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=W.length-1;this.currentLayer>=0;this.currentLayer--){var Nt=this.style._layers[W[this.currentLayer]],Dt=te[Nt.source],Zt=Ee[Nt.source];this._renderTileClippingMasks(Nt,Zt),this.renderLayer(this,Dt,Nt,Zt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){var Ct=this.style._layers[W[this.currentLayer]],ar=te[Ct.source],yr=(Ct.type==="symbol"?vt:Oe)[Ct.source];this._renderTileClippingMasks(Ct,Ee[Ct.source]),this.renderLayer(this,ar,Ct,yr)}if(this.options.showTileBoundaries){var Dr,ln,Xr=n.values(this.style._layers);Xr.forEach(function(dn){dn.source&&!dn.isHidden(I.transform.zoom)&&(dn.source!==(ln&&ln.id)&&(ln=I.style.sourceCaches[dn.source]),(!Dr||Dr.getSource().maxzoom<ln.getSource().maxzoom)&&(Dr=ln))}),Dr&&ba.debug(this,Dr,Dr.getVisibleCoordinates())}this.options.showPadding&&sn(this),this.context.setDefault()},qa.prototype.renderLayer=function(R,G,I,W){I.isHidden(this.transform.zoom)||I.type!=="background"&&I.type!=="custom"&&!W.length||(this.id=I.id,this.gpuTimingStart(I),ba[I.type](R,G,I,W,this.style.placement.variableOffsets),this.gpuTimingEnd())},qa.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var G=this.context.extTimerQuery,I=this.gpuTimers[R.id];I||(I=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),I.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,I.query)}},qa.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},qa.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},qa.prototype.queryGpuTimers=function(R){var G={};for(var I in R){var W=R[I],te=this.context.extTimerQuery,ee=te.getQueryObjectEXT(W.query,te.QUERY_RESULT_EXT)/(1e3*1e3);te.deleteQueryEXT(W.query),G[I]=ee}return G},qa.prototype.translatePosMatrix=function(R,G,I,W,te){if(!I[0]&&!I[1])return R;var ee=te?W==="map"?this.transform.angle:0:W==="viewport"?-this.transform.angle:0;if(ee){var ve=Math.sin(ee),Ee=Math.cos(ee);I=[I[0]*Ee-I[1]*ve,I[0]*ve+I[1]*Ee]}var Oe=[te?I[0]:Eo(G,I[0],this.transform.zoom),te?I[1]:Eo(G,I[1],this.transform.zoom),0],vt=new Float32Array(16);return n.translate(vt,R,Oe),vt},qa.prototype.saveTileTexture=function(R){var G=this._tileTextures[R.size[0]];G?G.push(R):this._tileTextures[R.size[0]]=[R]},qa.prototype.getTileTexture=function(R){var G=this._tileTextures[R];return G&&G.length>0?G.pop():null},qa.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var G=this.imageManager.getPattern(R.from.toString()),I=this.imageManager.getPattern(R.to.toString());return!G||!I},qa.prototype.useProgram=function(R,G){this.cache=this.cache||{};var I=""+R+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[I]||(this.cache[I]=new Qc(this.context,R,Jc[R],G,$c[R],this._showOverdrawInspector)),this.cache[I]},qa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qa.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},qa.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},qa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ds=function(R,G){this.points=R,this.planes=G};ds.fromInvProjectionMatrix=function(R,G,I){var W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],te=Math.pow(2,I),ee=W.map(function(Oe){return n.transformMat4([],Oe,R)}).map(function(Oe){return n.scale$1([],Oe,1/Oe[3]/G*te)}),ve=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Ee=ve.map(function(Oe){var vt=n.sub([],ee[Oe[0]],ee[Oe[1]]),wt=n.sub([],ee[Oe[2]],ee[Oe[1]]),pt=n.normalize([],n.cross([],vt,wt)),Be=-n.dot(pt,ee[Oe[1]]);return pt.concat(Be)});return new ds(ee,Ee)};var ol=function(R,G){this.min=R,this.max=G,this.center=n.scale$2([],n.add([],this.min,this.max),.5)};ol.prototype.quadrant=function(R){for(var G=[R%2===0,R<2],I=n.clone$2(this.min),W=n.clone$2(this.max),te=0;te<G.length;te++)I[te]=G[te]?this.min[te]:this.center[te],W[te]=G[te]?this.center[te]:this.max[te];return W[2]=this.max[2],new ol(I,W)},ol.prototype.distanceX=function(R){var G=Math.max(Math.min(this.max[0],R[0]),this.min[0]);return G-R[0]},ol.prototype.distanceY=function(R){var G=Math.max(Math.min(this.max[1],R[1]),this.min[1]);return G-R[1]},ol.prototype.intersects=function(R){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],I=!0,W=0;W<R.planes.length;W++){for(var te=R.planes[W],ee=0,ve=0;ve<G.length;ve++)ee+=n.dot$1(te,G[ve])>=0;if(ee===0)return 0;ee!==G.length&&(I=!1)}if(I)return 2;for(var Ee=0;Ee<3;Ee++){for(var Oe=Number.MAX_VALUE,vt=-Number.MAX_VALUE,wt=0;wt<R.points.length;wt++){var pt=R.points[wt][Ee]-this.min[Ee];Oe=Math.min(Oe,pt),vt=Math.max(vt,pt)}if(vt<0||Oe>this.max[Ee]-this.min[Ee])return 0}return 1};var el=function(R,G,I,W){if(R===void 0&&(R=0),G===void 0&&(G=0),I===void 0&&(I=0),W===void 0&&(W=0),isNaN(R)||R<0||isNaN(G)||G<0||isNaN(I)||I<0||isNaN(W)||W<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=G,this.left=I,this.right=W};el.prototype.interpolate=function(R,G,I){return G.top!=null&&R.top!=null&&(this.top=n.number(R.top,G.top,I)),G.bottom!=null&&R.bottom!=null&&(this.bottom=n.number(R.bottom,G.bottom,I)),G.left!=null&&R.left!=null&&(this.left=n.number(R.left,G.left,I)),G.right!=null&&R.right!=null&&(this.right=n.number(R.right,G.right,I)),this},el.prototype.getCenter=function(R,G){var I=n.clamp((this.left+R-this.right)/2,0,R),W=n.clamp((this.top+G-this.bottom)/2,0,G);return new n.Point(I,W)},el.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},el.prototype.clone=function(){return new el(this.top,this.bottom,this.left,this.right)},el.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var to=function(R,G,I,W,te){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=te===void 0?!0:te,this._minZoom=R||0,this._maxZoom=G||22,this._minPitch=I==null?0:I,this._maxPitch=W==null?60:W,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new el,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ya={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};to.prototype.clone=function(){var R=new to(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Ya.minZoom.get=function(){return this._minZoom},Ya.minZoom.set=function(H){this._minZoom!==H&&(this._minZoom=H,this.zoom=Math.max(this.zoom,H))},Ya.maxZoom.get=function(){return this._maxZoom},Ya.maxZoom.set=function(H){this._maxZoom!==H&&(this._maxZoom=H,this.zoom=Math.min(this.zoom,H))},Ya.minPitch.get=function(){return this._minPitch},Ya.minPitch.set=function(H){this._minPitch!==H&&(this._minPitch=H,this.pitch=Math.max(this.pitch,H))},Ya.maxPitch.get=function(){return this._maxPitch},Ya.maxPitch.set=function(H){this._maxPitch!==H&&(this._maxPitch=H,this.pitch=Math.min(this.pitch,H))},Ya.renderWorldCopies.get=function(){return this._renderWorldCopies},Ya.renderWorldCopies.set=function(H){H===void 0?H=!0:H===null&&(H=!1),this._renderWorldCopies=H},Ya.worldSize.get=function(){return this.tileSize*this.scale},Ya.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ya.size.get=function(){return new n.Point(this.width,this.height)},Ya.bearing.get=function(){return-this.angle/Math.PI*180},Ya.bearing.set=function(H){var R=-n.wrap(H,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ya.pitch.get=function(){return this._pitch/Math.PI*180},Ya.pitch.set=function(H){var R=n.clamp(H,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())},Ya.fov.get=function(){return this._fov/Math.PI*180},Ya.fov.set=function(H){H=Math.max(.01,Math.min(60,H)),this._fov!==H&&(this._unmodified=!1,this._fov=H/180*Math.PI,this._calcMatrices())},Ya.zoom.get=function(){return this._zoom},Ya.zoom.set=function(H){var R=Math.min(Math.max(H,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())},Ya.center.get=function(){return this._center},Ya.center.set=function(H){H.lat===this._center.lat&&H.lng===this._center.lng||(this._unmodified=!1,this._center=H,this._constrain(),this._calcMatrices())},Ya.padding.get=function(){return this._edgeInsets.toJSON()},Ya.padding.set=function(H){this._edgeInsets.equals(H)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,H,1),this._calcMatrices())},Ya.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},to.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},to.prototype.interpolatePadding=function(R,G,I){this._unmodified=!1,this._edgeInsets.interpolate(R,G,I),this._constrain(),this._calcMatrices()},to.prototype.coveringZoomLevel=function(R){var G=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,G)},to.prototype.getVisibleUnwrappedCoordinates=function(R){var G=[new n.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var I=this.pointCoordinate(new n.Point(0,0)),W=this.pointCoordinate(new n.Point(this.width,0)),te=this.pointCoordinate(new n.Point(this.width,this.height)),ee=this.pointCoordinate(new n.Point(0,this.height)),ve=Math.floor(Math.min(I.x,W.x,te.x,ee.x)),Ee=Math.floor(Math.max(I.x,W.x,te.x,ee.x)),Oe=1,vt=ve-Oe;vt<=Ee+Oe;vt++)vt!==0&&G.push(new n.UnwrappedTileID(vt,R));return G},to.prototype.coveringTiles=function(R){var G=this.coveringZoomLevel(R),I=G;if(R.minzoom!==void 0&&G<R.minzoom)return[];R.maxzoom!==void 0&&G>R.maxzoom&&(G=R.maxzoom);var W=n.MercatorCoordinate.fromLngLat(this.center),te=Math.pow(2,G),ee=[te*W.x,te*W.y,0],ve=ds.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),Ee=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ee=G);var Oe=3,vt=function(Xr){return{aabb:new ol([Xr*te,0,0],[(Xr+1)*te,te,0]),zoom:0,x:0,y:0,wrap:Xr,fullyVisible:!1}},wt=[],pt=[],Be=G,$e=R.reparseOverscaled?I:G;if(this._renderWorldCopies)for(var ot=1;ot<=3;ot++)wt.push(vt(-ot)),wt.push(vt(ot));for(wt.push(vt(0));wt.length>0;){var Tt=wt.pop(),Lt=Tt.x,Pt=Tt.y,Xt=Tt.fullyVisible;if(!Xt){var Nt=Tt.aabb.intersects(ve);if(Nt===0)continue;Xt=Nt===2}var Dt=Tt.aabb.distanceX(ee),Zt=Tt.aabb.distanceY(ee),Ct=Math.max(Math.abs(Dt),Math.abs(Zt)),ar=Oe+(1<<Be-Tt.zoom)-2;if(Tt.zoom===Be||Ct>ar&&Tt.zoom>=Ee){pt.push({tileID:new n.OverscaledTileID(Tt.zoom===Be?$e:Tt.zoom,Tt.wrap,Tt.zoom,Lt,Pt),distanceSq:n.sqrLen([ee[0]-.5-Lt,ee[1]-.5-Pt])});continue}for(var yr=0;yr<4;yr++){var Dr=(Lt<<1)+yr%2,ln=(Pt<<1)+(yr>>1);wt.push({aabb:Tt.aabb.quadrant(yr),zoom:Tt.zoom+1,x:Dr,y:ln,wrap:Tt.wrap,fullyVisible:Xt})}}return pt.sort(function(Xr,dn){return Xr.distanceSq-dn.distanceSq}).map(function(Xr){return Xr.tileID})},to.prototype.resize=function(R,G){this.width=R,this.height=G,this.pixelsToGLUnits=[2/R,-2/G],this._constrain(),this._calcMatrices()},Ya.unmodified.get=function(){return this._unmodified},to.prototype.zoomScale=function(R){return Math.pow(2,R)},to.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},to.prototype.project=function(R){var G=n.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(R.lng)*this.worldSize,n.mercatorYfromLat(G)*this.worldSize)},to.prototype.unproject=function(R){return new n.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Ya.point.get=function(){return this.project(this.center)},to.prototype.setLocationAtPoint=function(R,G){var I=this.pointCoordinate(G),W=this.pointCoordinate(this.centerPoint),te=this.locationCoordinate(R),ee=new n.MercatorCoordinate(te.x-(I.x-W.x),te.y-(I.y-W.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())},to.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},to.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},to.prototype.locationCoordinate=function(R){return n.MercatorCoordinate.fromLngLat(R)},to.prototype.coordinateLocation=function(R){return R.toLngLat()},to.prototype.pointCoordinate=function(R){var G=0,I=[R.x,R.y,0,1],W=[R.x,R.y,1,1];n.transformMat4(I,I,this.pixelMatrixInverse),n.transformMat4(W,W,this.pixelMatrixInverse);var te=I[3],ee=W[3],ve=I[0]/te,Ee=W[0]/ee,Oe=I[1]/te,vt=W[1]/ee,wt=I[2]/te,pt=W[2]/ee,Be=wt===pt?0:(G-wt)/(pt-wt);return new n.MercatorCoordinate(n.number(ve,Ee,Be)/this.worldSize,n.number(Oe,vt,Be)/this.worldSize)},to.prototype.coordinatePoint=function(R){var G=[R.x*this.worldSize,R.y*this.worldSize,0,1];return n.transformMat4(G,G,this.pixelMatrix),new n.Point(G[0]/G[3],G[1]/G[3])},to.prototype.getBounds=function(){return new n.LngLatBounds().extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)))},to.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},to.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},to.prototype.calculatePosMatrix=function(R,G){G===void 0&&(G=!1);var I=R.key,W=G?this._alignedPosMatrixCache:this._posMatrixCache;if(W[I])return W[I];var te=R.canonical,ee=this.worldSize/this.zoomScale(te.z),ve=te.x+Math.pow(2,te.z)*R.wrap,Ee=n.identity(new Float64Array(16));return n.translate(Ee,Ee,[ve*ee,te.y*ee,0]),n.scale(Ee,Ee,[ee/n.EXTENT,ee/n.EXTENT,1]),n.multiply(Ee,G?this.alignedProjMatrix:this.projMatrix,Ee),W[I]=new Float32Array(Ee),W[I]},to.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},to.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var R=-90,G=90,I=-180,W=180,te,ee,ve,Ee,Oe=this.size,vt=this._unmodified;if(this.latRange){var wt=this.latRange;R=n.mercatorYfromLat(wt[1])*this.worldSize,G=n.mercatorYfromLat(wt[0])*this.worldSize,te=G-R<Oe.y?Oe.y/(G-R):0}if(this.lngRange){var pt=this.lngRange;I=n.mercatorXfromLng(pt[0])*this.worldSize,W=n.mercatorXfromLng(pt[1])*this.worldSize,ee=W-I<Oe.x?Oe.x/(W-I):0}var Be=this.point,$e=Math.max(ee||0,te||0);if($e){this.center=this.unproject(new n.Point(ee?(W+I)/2:Be.x,te?(G+R)/2:Be.y)),this.zoom+=this.scaleZoom($e),this._unmodified=vt,this._constraining=!1;return}if(this.latRange){var ot=Be.y,Tt=Oe.y/2;ot-Tt<R&&(Ee=R+Tt),ot+Tt>G&&(Ee=G-Tt)}if(this.lngRange){var Lt=Be.x,Pt=Oe.x/2;Lt-Pt<I&&(ve=I+Pt),Lt+Pt>W&&(ve=W-Pt)}(ve!==void 0||Ee!==void 0)&&(this.center=this.unproject(new n.Point(ve!==void 0?ve:Be.x,Ee!==void 0?Ee:Be.y))),this._unmodified=vt,this._constraining=!1}},to.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var I=Math.PI/2+this._pitch,W=this._fov*(.5+G.y/this.height),te=Math.sin(W)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-I-W,.01,Math.PI-.01)),ee=this.point,ve=ee.x,Ee=ee.y,Oe=Math.cos(Math.PI/2-this._pitch)*te+this.cameraToCenterDistance,vt=Oe*1.01,wt=this.height/50,pt=new Float64Array(16);n.perspective(pt,this._fov,this.width/this.height,wt,vt),pt[8]=-G.x*2/this.width,pt[9]=G.y*2/this.height,n.scale(pt,pt,[1,-1,1]),n.translate(pt,pt,[0,0,-this.cameraToCenterDistance]),n.rotateX(pt,pt,this._pitch),n.rotateZ(pt,pt,this.angle),n.translate(pt,pt,[-ve,-Ee,0]),this.mercatorMatrix=n.scale([],pt,[this.worldSize,this.worldSize,this.worldSize]),n.scale(pt,pt,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=pt,this.invProjMatrix=n.invert([],this.projMatrix);var Be=this.width%2/2,$e=this.height%2/2,ot=Math.cos(this.angle),Tt=Math.sin(this.angle),Lt=ve-Math.round(ve)+ot*Be+Tt*$e,Pt=Ee-Math.round(Ee)+ot*$e+Tt*Be,Xt=new Float64Array(pt);if(n.translate(Xt,Xt,[Lt>.5?Lt-1:Lt,Pt>.5?Pt-1:Pt,0]),this.alignedProjMatrix=Xt,pt=n.create(),n.scale(pt,pt,[this.width/2,-this.height/2,1]),n.translate(pt,pt,[1,-1,0]),this.labelPlaneMatrix=pt,pt=n.create(),n.scale(pt,pt,[1,-1,1]),n.translate(pt,pt,[-1,-1,0]),n.scale(pt,pt,[2/this.width,2/this.height,1]),this.glCoordMatrix=pt,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),pt=n.invert(new Float64Array(16),this.pixelMatrix),!pt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=pt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},to.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new n.Point(0,0)),G=[R.x*this.worldSize,R.y*this.worldSize,0,1],I=n.transformMat4(G,G,this.pixelMatrix);return I[3]/this.cameraToCenterDistance},to.prototype.getCameraPoint=function(){var R=this._pitch,G=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,G))},to.prototype.getCameraQueryGeometry=function(R){var G=this.getCameraPoint();if(R.length===1)return[R[0],G];for(var I=G.x,W=G.y,te=G.x,ee=G.y,ve=0,Ee=R;ve<Ee.length;ve+=1){var Oe=Ee[ve];I=Math.min(I,Oe.x),W=Math.min(W,Oe.y),te=Math.max(te,Oe.x),ee=Math.max(ee,Oe.y)}return[new n.Point(I,W),new n.Point(te,W),new n.Point(te,ee),new n.Point(I,ee),new n.Point(I,W)]},Object.defineProperties(to.prototype,Ya);function Il(H,R){var G=!1,I=null,W=function(){I=null,G&&(H(),I=setTimeout(W,R),G=!1)};return function(){return G=!0,I||W(),I}}var Sl=function(R){this._hashName=R&&encodeURIComponent(R),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Il(this._updateHashUnthrottled.bind(this),30*1e3/100)};Sl.prototype.addTo=function(R){return this._map=R,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sl.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sl.prototype.getHashString=function(R){var G=this._map.getCenter(),I=Math.round(this._map.getZoom()*100)/100,W=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),te=Math.pow(10,W),ee=Math.round(G.lng*te)/te,ve=Math.round(G.lat*te)/te,Ee=this._map.getBearing(),Oe=this._map.getPitch(),vt="";if(R?vt+="/"+ee+"/"+ve+"/"+I:vt+=I+"/"+ve+"/"+ee,(Ee||Oe)&&(vt+="/"+Math.round(Ee*10)/10),Oe&&(vt+="/"+Math.round(Oe)),this._hashName){var wt=this._hashName,pt=!1,Be=n.window.location.hash.slice(1).split("&").map(function($e){var ot=$e.split("=")[0];return ot===wt?(pt=!0,ot+"="+vt):$e}).filter(function($e){return $e});return pt||Be.push(wt+"="+vt),"#"+Be.join("&")}return"#"+vt},Sl.prototype._getCurrentHash=function(){var R=this,G=n.window.location.hash.replace("#","");if(this._hashName){var I;return G.split("&").map(function(W){return W.split("=")}).forEach(function(W){W[0]===R._hashName&&(I=W)}),(I&&I[1]||"").split("/")}return G.split("/")},Sl.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(I){return isNaN(I)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:G,pitch:+(R[4]||0)}),!0}return!1},Sl.prototype._updateHashUnthrottled=function(){var R=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,R)}catch(G){}};var Su={linearity:.3,easing:n.bezier(0,0,.3,1)},su=n.extend({deceleration:2500,maxSpeed:1400},Su),Fl=n.extend({deceleration:20,maxSpeed:1400},Su),El=n.extend({deceleration:1e3,maxSpeed:360},Su),yf=n.extend({deceleration:1e3,maxSpeed:90},Su),Xu=function(R){this._map=R,this.clear()};Xu.prototype.clear=function(){this._inertiaBuffer=[]},Xu.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:R})},Xu.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,G=n.browser.now(),I=160;R.length>0&&G-R[0].time>I;)R.shift()},Xu.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},I=0,W=this._inertiaBuffer;I<W.length;I+=1){var te=W[I],ee=te.settings;G.zoom+=ee.zoomDelta||0,G.bearing+=ee.bearingDelta||0,G.pitch+=ee.pitchDelta||0,ee.panDelta&&G.pan._add(ee.panDelta),ee.around&&(G.around=ee.around),ee.pinchAround&&(G.pinchAround=ee.pinchAround)}var ve=this._inertiaBuffer[this._inertiaBuffer.length-1],Ee=ve.time-this._inertiaBuffer[0].time,Oe={};if(G.pan.mag()){var vt=U(G.pan.mag(),Ee,n.extend({},su,R||{}));Oe.offset=G.pan.mult(vt.amount/G.pan.mag()),Oe.center=this._map.transform.center,Zu(Oe,vt)}if(G.zoom){var wt=U(G.zoom,Ee,Fl);Oe.zoom=this._map.transform.zoom+wt.amount,Zu(Oe,wt)}if(G.bearing){var pt=U(G.bearing,Ee,El);Oe.bearing=this._map.transform.bearing+n.clamp(pt.amount,-179,179),Zu(Oe,pt)}if(G.pitch){var Be=U(G.pitch,Ee,yf);Oe.pitch=this._map.transform.pitch+Be.amount,Zu(Oe,Be)}if(Oe.zoom||Oe.bearing){var $e=G.pinchAround===void 0?G.around:G.pinchAround;Oe.around=$e?this._map.unproject($e):this._map.getCenter()}return this.clear(),n.extend(Oe,{noMoveStart:!0})}};function Zu(H,R){(!H.duration||H.duration<R.duration)&&(H.duration=R.duration,H.easing=R.easing)}function U(H,R,G){var I=G.maxSpeed,W=G.linearity,te=G.deceleration,ee=n.clamp(H*W/(R/1e3),-I,I),ve=Math.abs(ee)/(te*W);return{easing:G.easing,duration:ve*1e3,amount:ee*(ve/2)}}var Q=function(H){function R(I,W,te,ee){ee===void 0&&(ee={});var ve=o.mousePos(W.getCanvasContainer(),te),Ee=W.unproject(ve);H.call(this,I,n.extend({point:ve,lngLat:Ee,originalEvent:te},ee)),this._defaultPrevented=!1,this.target=W}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),se=function(H){function R(I,W,te){var ee=I==="touchend"?te.changedTouches:te.touches,ve=o.touchPos(W.getCanvasContainer(),ee),Ee=ve.map(function(wt){return W.unproject(wt)}),Oe=ve.reduce(function(wt,pt,Be,$e){return wt.add(pt.div($e.length))},new n.Point(0,0)),vt=W.unproject(Oe);H.call(this,I,{points:ve,point:Oe,lngLats:Ee,lngLat:vt,originalEvent:te}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),me=function(H){function R(I,W,te){H.call(this,I,{originalEvent:te}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),we=function(R,G){this._map=R,this._clickTolerance=G.clickTolerance};we.prototype.reset=function(){delete this._mousedownPos},we.prototype.wheel=function(R){return this._firePreventable(new me(R.type,this._map,R))},we.prototype.mousedown=function(R,G){return this._mousedownPos=G,this._firePreventable(new Q(R.type,this._map,R))},we.prototype.mouseup=function(R){this._map.fire(new Q(R.type,this._map,R))},we.prototype.click=function(R,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new Q(R.type,this._map,R))},we.prototype.dblclick=function(R){return this._firePreventable(new Q(R.type,this._map,R))},we.prototype.mouseover=function(R){this._map.fire(new Q(R.type,this._map,R))},we.prototype.mouseout=function(R){this._map.fire(new Q(R.type,this._map,R))},we.prototype.touchstart=function(R){return this._firePreventable(new se(R.type,this._map,R))},we.prototype.touchmove=function(R){this._map.fire(new se(R.type,this._map,R))},we.prototype.touchend=function(R){this._map.fire(new se(R.type,this._map,R))},we.prototype.touchcancel=function(R){this._map.fire(new se(R.type,this._map,R))},we.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},we.prototype.isEnabled=function(){return!0},we.prototype.isActive=function(){return!1},we.prototype.enable=function(){},we.prototype.disable=function(){};var Me=function(R){this._map=R};Me.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Me.prototype.mousemove=function(R){this._map.fire(new Q(R.type,this._map,R))},Me.prototype.mousedown=function(){this._delayContextMenu=!0},Me.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Q("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Me.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new Q(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Me.prototype.isEnabled=function(){return!0},Me.prototype.isActive=function(){return!1},Me.prototype.enable=function(){},Me.prototype.disable=function(){};var Ye=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=G.clickTolerance||1};Ye.prototype.isEnabled=function(){return!!this._enabled},Ye.prototype.isActive=function(){return!!this._active},Ye.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ye.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ye.prototype.mousedown=function(R,G){this.isEnabled()&&R.shiftKey&&R.button===0&&(o.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},Ye.prototype.mousemoveWindow=function(R,G){if(this._active){var I=G;if(!(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=I,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var te=Math.min(W.x,I.x),ee=Math.max(W.x,I.x),ve=Math.min(W.y,I.y),Ee=Math.max(W.y,I.y);o.setTransform(this._box,"translate("+te+"px,"+ve+"px)"),this._box.style.width=ee-te+"px",this._box.style.height=Ee-ve+"px"}}},Ye.prototype.mouseupWindow=function(R,G){var I=this;if(this._active&&R.button===0){var W=this._startPos,te=G;if(this.reset(),o.suppressClick(),W.x===te.x&&W.y===te.y)this._fireEvent("boxzoomcancel",R);else return this._map.fire(new n.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(ee){return ee.fitScreenCoordinates(W,te,I._map.getBearing(),{linear:!0})}}}},Ye.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},Ye.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos},Ye.prototype._fireEvent=function(R,G){return this._map.fire(new n.Event(R,{originalEvent:G}))};function Pe(H,R){for(var G={},I=0;I<H.length;I++)G[H[I].identifier]=R[I];return G}function tt(H){for(var R=new n.Point(0,0),G=0,I=H;G<I.length;G+=1){var W=I[G];R._add(W)}return R.div(H.length)}var Mt=500,kt=500,er=30,$t=function(R){this.reset(),this.numTouches=R.numTouches};$t.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},$t.prototype.touchstart=function(R,G,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=R.timeStamp),I.length===this.numTouches&&(this.centroid=tt(G),this.touches=Pe(I,G)))},$t.prototype.touchmove=function(R,G,I){if(!(this.aborted||!this.centroid)){var W=Pe(I,G);for(var te in this.touches){var ee=this.touches[te],ve=W[te];(!ve||ve.dist(ee)>er)&&(this.aborted=!0)}}},$t.prototype.touchend=function(R,G,I){if((!this.centroid||R.timeStamp-this.startTime>kt)&&(this.aborted=!0),I.length===0){var W=!this.aborted&&this.centroid;if(this.reset(),W)return W}};var Tr=function(R){this.singleTap=new $t(R),this.numTaps=R.numTaps,this.reset()};Tr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Tr.prototype.touchstart=function(R,G,I){this.singleTap.touchstart(R,G,I)},Tr.prototype.touchmove=function(R,G,I){this.singleTap.touchmove(R,G,I)},Tr.prototype.touchend=function(R,G,I){var W=this.singleTap.touchend(R,G,I);if(W){var te=R.timeStamp-this.lastTime<Mt,ee=!this.lastTap||this.lastTap.dist(W)<er;if((!te||!ee)&&this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=W,this.count===this.numTaps)return this.reset(),W}};var Er=function(){this._zoomIn=new Tr({numTouches:1,numTaps:2}),this._zoomOut=new Tr({numTouches:2,numTaps:1}),this.reset()};Er.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Er.prototype.touchstart=function(R,G,I){this._zoomIn.touchstart(R,G,I),this._zoomOut.touchstart(R,G,I)},Er.prototype.touchmove=function(R,G,I){this._zoomIn.touchmove(R,G,I),this._zoomOut.touchmove(R,G,I)},Er.prototype.touchend=function(R,G,I){var W=this,te=this._zoomIn.touchend(R,G,I),ee=this._zoomOut.touchend(R,G,I);if(te)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()+1,around:ve.unproject(te)},{originalEvent:R})}};if(ee)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()-1,around:ve.unproject(ee)},{originalEvent:R})}}},Er.prototype.touchcancel=function(){this.reset()},Er.prototype.enable=function(){this._enabled=!0},Er.prototype.disable=function(){this._enabled=!1,this.reset()},Er.prototype.isEnabled=function(){return this._enabled},Er.prototype.isActive=function(){return this._active};var rr=0,dr=2,wr={};wr[rr]=1,wr[dr]=2;function Pr(H,R){var G=wr[R];return H.buttons===void 0||(H.buttons&G)!==G}var kr=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};kr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},kr.prototype._correctButton=function(R,G){return!1},kr.prototype._move=function(R,G){return{}},kr.prototype.mousedown=function(R,G){if(!this._lastPoint){var I=o.mouseButton(R);this._correctButton(R,I)&&(this._lastPoint=G,this._eventButton=I)}},kr.prototype.mousemoveWindow=function(R,G){var I=this._lastPoint;if(I){if(R.preventDefault(),Pr(R,this._eventButton)){this.reset();return}if(!(!this._moved&&G.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(I,G)}},kr.prototype.mouseupWindow=function(R){if(this._lastPoint){var G=o.mouseButton(R);G===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active};var vr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.mousedown=function(I,W){H.prototype.mousedown.call(this,I,W),this._lastPoint&&(this._active=!0)},R.prototype._correctButton=function(I,W){return W===rr&&!I.ctrlKey},R.prototype._move=function(I,W){return{around:W,panDelta:W.sub(I)}},R}(kr),gn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===rr&&I.ctrlKey||W===dr},R.prototype._move=function(I,W){var te=.8,ee=(W.x-I.x)*te;if(ee)return this._active=!0,{bearingDelta:ee}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),bn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===rr&&I.ctrlKey||W===dr},R.prototype._move=function(I,W){var te=-.5,ee=(W.y-I.y)*te;if(ee)return this._active=!0,{pitchDelta:ee}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),In=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};In.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)},In.prototype.touchstart=function(R,G,I){return this._calculateTransform(R,G,I)},In.prototype.touchmove=function(R,G,I){if(!(!this._active||I.length<this._minTouches))return R.preventDefault(),this._calculateTransform(R,G,I)},In.prototype.touchend=function(R,G,I){this._calculateTransform(R,G,I),this._active&&I.length<this._minTouches&&this.reset()},In.prototype.touchcancel=function(){this.reset()},In.prototype._calculateTransform=function(R,G,I){I.length>0&&(this._active=!0);var W=Pe(I,G),te=new n.Point(0,0),ee=new n.Point(0,0),ve=0;for(var Ee in W){var Oe=W[Ee],vt=this._touches[Ee];vt&&(te._add(Oe),ee._add(Oe.sub(vt)),ve++,W[Ee]=Oe)}if(this._touches=W,!(ve<this._minTouches||!ee.mag())){var wt=ee.div(ve);if(this._sum._add(wt),!(this._sum.mag()<this._clickTolerance)){var pt=te.div(ve);return{around:pt,panDelta:wt}}}},In.prototype.enable=function(){this._enabled=!0},In.prototype.disable=function(){this._enabled=!1,this.reset()},In.prototype.isEnabled=function(){return this._enabled},In.prototype.isActive=function(){return this._active};var Xn=function(){this.reset()};Xn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Xn.prototype._start=function(R){},Xn.prototype._move=function(R,G,I){return{}},Xn.prototype.touchstart=function(R,G,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([G[0],G[1]]))},Xn.prototype.touchmove=function(R,G,I){if(this._firstTwoTouches){R.preventDefault();var W=this._firstTwoTouches,te=W[0],ee=W[1],ve=Ci(I,G,te),Ee=Ci(I,G,ee);if(!(!ve||!Ee)){var Oe=this._aroundCenter?null:ve.add(Ee).div(2);return this._move([ve,Ee],Oe,R)}}},Xn.prototype.touchend=function(R,G,I){if(this._firstTwoTouches){var W=this._firstTwoTouches,te=W[0],ee=W[1],ve=Ci(I,G,te),Ee=Ci(I,G,ee);ve&&Ee||(this._active&&o.suppressClick(),this.reset())}},Xn.prototype.touchcancel=function(){this.reset()},Xn.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Xn.prototype.disable=function(){this._enabled=!1,this.reset()},Xn.prototype.isEnabled=function(){return this._enabled},Xn.prototype.isActive=function(){return this._active};function Ci(H,R,G){for(var I=0;I<H.length;I++)if(H[I].identifier===G)return R[I]}var Fi=.1;function xa(H,R){return Math.log(H/R)/Math.LN2}var Gi=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._distance,delete this._startDistance},R.prototype._start=function(I){this._startDistance=this._distance=I[0].dist(I[1])},R.prototype._move=function(I,W){var te=this._distance;if(this._distance=I[0].dist(I[1]),!(!this._active&&Math.abs(xa(this._distance,this._startDistance))<Fi))return this._active=!0,{zoomDelta:xa(this._distance,te),pinchAround:W}},R}(Xn),va=25;function go(H,R){return H.angleWith(R)*180/Math.PI}var Po=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},R.prototype._start=function(I){this._startVector=this._vector=I[0].sub(I[1]),this._minDiameter=I[0].dist(I[1])},R.prototype._move=function(I,W){var te=this._vector;if(this._vector=I[0].sub(I[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:go(this._vector,te),pinchAround:W}},R.prototype._isBelowThreshold=function(I){this._minDiameter=Math.min(this._minDiameter,I.mag());var W=Math.PI*this._minDiameter,te=va/W*360,ee=go(I,this._startVector);return Math.abs(ee)<te},R}(Xn);function Ao(H){return Math.abs(H.y)>Math.abs(H.x)}var Sn=100,da=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},R.prototype._start=function(I){this._lastPoints=I,Ao(I[0].sub(I[1]))&&(this._valid=!1)},R.prototype._move=function(I,W,te){var ee=I[0].sub(this._lastPoints[0]),ve=I[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ee,ve,te.timeStamp),!!this._valid){this._lastPoints=I,this._active=!0;var Ee=(ee.y+ve.y)/2,Oe=-.5;return{pitchDelta:Ee*Oe}}},R.prototype.gestureBeginsVertically=function(I,W,te){if(this._valid!==void 0)return this._valid;var ee=2,ve=I.mag()>=ee,Ee=W.mag()>=ee;if(!(!ve&&!Ee)){if(!ve||!Ee)return this._firstMove===void 0&&(this._firstMove=te),te-this._firstMove<Sn?void 0:!1;var Oe=I.y>0==W.y>0;return Ao(I)&&Ao(W)&&Oe}},R}(Xn),Sa={panStep:100,bearingStep:15,pitchStep:10},La=function(){var R=Sa;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep,this._rotationDisabled=!1};La.prototype.reset=function(){this._active=!1},La.prototype.keydown=function(R){var G=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var I=0,W=0,te=0,ee=0,ve=0;switch(R.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:R.shiftKey?W=-1:(R.preventDefault(),ee=-1);break;case 39:R.shiftKey?W=1:(R.preventDefault(),ee=1);break;case 38:R.shiftKey?te=1:(R.preventDefault(),ve=-1);break;case 40:R.shiftKey?te=-1:(R.preventDefault(),ve=1);break;default:return}return this._rotationDisabled&&(W=0,te=0),{cameraAnimation:function(Ee){var Oe=Ee.getZoom();Ee.easeTo({duration:300,easeId:"keyboardHandler",easing:Ts,zoom:I?Math.round(Oe)+I*(R.shiftKey?2:1):Oe,bearing:Ee.getBearing()+W*G._bearingStep,pitch:Ee.getPitch()+te*G._pitchStep,offset:[-ee*G._panStep,-ve*G._panStep],center:Ee.getCenter()},{originalEvent:R})}}}},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active},La.prototype.disableRotation=function(){this._rotationDisabled=!0},La.prototype.enableRotation=function(){this._rotationDisabled=!1};function Ts(H){return H*(2-H)}var Gs=4.000244140625,yl=1/100,ls=1/450,Wl=2,We=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=yl,this._wheelZoomRate=ls,n.bindAll(["_onTimeout"],this)};We.prototype.setZoomRate=function(R){this._defaultZoomRate=R},We.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},We.prototype.isEnabled=function(){return!!this._enabled},We.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},We.prototype.isZooming=function(){return!!this._zooming},We.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},We.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},We.prototype.wheel=function(R){if(this.isEnabled()){var G=R.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?R.deltaY*40:R.deltaY,I=n.browser.now(),W=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,G!==0&&G%Gs===0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":W>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(W*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),R.shiftKey&&G&&(G=G/4),this._type&&(this._lastWheelEvent=R,this._delta-=G,this._active||this._start(R)),R.preventDefault()}},We.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},We.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=o.mousePos(this._el,R);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},We.prototype.renderFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var G=this._map.transform;if(this._delta!==0){var I=this._type==="wheel"&&Math.abs(this._delta)>Gs?this._wheelZoomRate:this._defaultZoomRate,W=Wl/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&W!==0&&(W=1/W);var te=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(te*W))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ee=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ve=this._startZoom,Ee=this._easing,Oe=!1,vt;if(this._type==="wheel"&&ve&&Ee){var wt=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),pt=Ee(wt);vt=n.number(ve,ee,pt),wt<1?this._frameId||(this._frameId=!0):Oe=!0}else vt=ee,Oe=!0;return this._active=!0,Oe&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Oe,zoomDelta:vt-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},We.prototype._smoothOutEasing=function(R){var G=n.ease;if(this._prevEase){var I=this._prevEase,W=(n.browser.now()-I.start)/I.duration,te=I.easing(W+.01)-I.easing(W),ee=.27/Math.sqrt(te*te+1e-4)*.01,ve=Math.sqrt(.27*.27-ee*ee);G=n.bezier(ee,ve,.25,1)}return this._prevEase={start:n.browser.now(),duration:R,easing:G},G},We.prototype.reset=function(){this._active=!1};var Gt=function(R,G){this._clickZoom=R,this._tapZoom=G};Gt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Gt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Gt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Gt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var or=function(){this.reset()};or.prototype.reset=function(){this._active=!1},or.prototype.dblclick=function(R,G){return R.preventDefault(),{cameraAnimation:function(I){I.easeTo({duration:300,zoom:I.getZoom()+(R.shiftKey?-1:1),around:I.unproject(G)},{originalEvent:R})}}},or.prototype.enable=function(){this._enabled=!0},or.prototype.disable=function(){this._enabled=!1,this.reset()},or.prototype.isEnabled=function(){return this._enabled},or.prototype.isActive=function(){return this._active};var qr=function(){this._tap=new Tr({numTouches:1,numTaps:1}),this.reset()};qr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},qr.prototype.touchstart=function(R,G,I){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>Mt&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=G[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(R,G,I))},qr.prototype.touchmove=function(R,G,I){if(!this._tapTime)this._tap.touchmove(R,G,I);else if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;var W=G[0],te=W.y-this._swipePoint.y;return this._swipePoint=W,R.preventDefault(),this._active=!0,{zoomDelta:te/128}}},qr.prototype.touchend=function(R,G,I){if(this._tapTime)this._swipePoint&&I.length===0&&this.reset();else{var W=this._tap.touchend(R,G,I);W&&(this._tapTime=R.timeStamp)}},qr.prototype.touchcancel=function(){this.reset()},qr.prototype.enable=function(){this._enabled=!0},qr.prototype.disable=function(){this._enabled=!1,this.reset()},qr.prototype.isEnabled=function(){return this._enabled},qr.prototype.isActive=function(){return this._active};var $r=function(R,G,I){this._el=R,this._mousePan=G,this._touchPan=I};$r.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},$r.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},$r.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},$r.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jr=function(R,G,I){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=G,this._mousePitch=I};jr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Kr=function(R,G,I,W){this._el=R,this._touchZoom=G,this._touchRotate=I,this._tapDragZoom=W,this._rotationDisabled=!1,this._enabled=!0};Kr.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Kr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Kr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Kr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Kr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Kr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var yn=function(H){return H.zoom||H.drag||H.pitch||H.rotate},Qn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R}(n.Event);function Wn(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}var Rn=function(R,G){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xu(R),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),n.bindAll(["handleEvent","handleWindowEvent"],this);var I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[n.window,"blur",void 0]];for(var W=0,te=this._listeners;W<te.length;W+=1){var ee=te[W],ve=ee[0],Ee=ee[1],Oe=ee[2];o.addEventListener(ve,Ee,ve===n.window.document?this.handleWindowEvent:this.handleEvent,Oe)}};Rn.prototype.destroy=function(){for(var R=0,G=this._listeners;R<G.length;R+=1){var I=G[R],W=I[0],te=I[1],ee=I[2];o.removeEventListener(W,te,W===n.window.document?this.handleWindowEvent:this.handleEvent,ee)}},Rn.prototype._addDefaultHandlers=function(R){var G=this._map,I=G.getCanvasContainer();this._add("mapEvent",new we(G,R));var W=G.boxZoom=new Ye(G,R);this._add("boxZoom",W);var te=new Er,ee=new or;G.doubleClickZoom=new Gt(ee,te),this._add("tapZoom",te),this._add("clickZoom",ee);var ve=new qr;this._add("tapDragZoom",ve);var Ee=G.touchPitch=new da;this._add("touchPitch",Ee);var Oe=new gn(R),vt=new bn(R);G.dragRotate=new jr(R,Oe,vt),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",vt,["mouseRotate"]);var wt=new vr(R),pt=new In(R);G.dragPan=new $r(I,wt,pt),this._add("mousePan",wt),this._add("touchPan",pt,["touchZoom","touchRotate"]);var Be=new Po,$e=new Gi;G.touchZoomRotate=new Kr(I,$e,Be,ve),this._add("touchRotate",Be,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]);var ot=G.scrollZoom=new We(G,this);this._add("scrollZoom",ot,["mousePan"]);var Tt=G.keyboard=new La;this._add("keyboard",Tt),this._add("blockableMapEvent",new Me(G));for(var Lt=0,Pt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Lt<Pt.length;Lt+=1){var Xt=Pt[Lt];R.interactive&&R[Xt]&&G[Xt].enable(R[Xt])}},Rn.prototype._add=function(R,G,I){this._handlers.push({handlerName:R,handler:G,allowed:I}),this._handlersById[R]=G},Rn.prototype.stop=function(R){if(!this._updatingCamera){for(var G=0,I=this._handlers;G<I.length;G+=1){var W=I[G],te=W.handler;te.reset()}this._inertia.clear(),this._fireEvents({},{},R),this._changes=[]}},Rn.prototype.isActive=function(){for(var R=0,G=this._handlers;R<G.length;R+=1){var I=G[R],W=I.handler;if(W.isActive())return!0}return!1},Rn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Rn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Rn.prototype.isMoving=function(){return!!yn(this._eventsInProgress)||this.isZooming()},Rn.prototype._blockedByActive=function(R,G,I){for(var W in R)if(W!==I&&(!G||G.indexOf(W)<0))return!0;return!1},Rn.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},Rn.prototype._getMapTouches=function(R){for(var G=[],I=0,W=R;I<W.length;I+=1){var te=W[I],ee=te.target;this._el.contains(ee)&&G.push(te)}return G},Rn.prototype.handleEvent=function(R,G){if(R.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var I=R.type==="renderFrame"?void 0:R,W={needsRenderFrame:!1},te={},ee={},ve=R.touches?this._getMapTouches(R.touches):void 0,Ee=ve?o.touchPos(this._el,ve):o.mousePos(this._el,R),Oe=0,vt=this._handlers;Oe<vt.length;Oe+=1){var wt=vt[Oe],pt=wt.handlerName,Be=wt.handler,$e=wt.allowed;if(Be.isEnabled()){var ot=void 0;this._blockedByActive(ee,$e,pt)?Be.reset():Be[G||R.type]&&(ot=Be[G||R.type](R,Ee,ve),this.mergeHandlerResult(W,te,ot,pt,I),ot&&ot.needsRenderFrame&&this._triggerRenderFrame()),(ot||Be.isActive())&&(ee[pt]=Be)}}var Tt={};for(var Lt in this._previousActiveHandlers)ee[Lt]||(Tt[Lt]=I);this._previousActiveHandlers=ee,(Object.keys(Tt).length||Wn(W))&&(this._changes.push([W,te,Tt]),this._triggerRenderFrame()),(Object.keys(ee).length||Wn(W))&&this._map._stop(!0),this._updatingCamera=!1;var Pt=W.cameraAnimation;Pt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pt(this._map))},Rn.prototype.mergeHandlerResult=function(R,G,I,W,te){if(I){n.extend(R,I);var ee={handlerName:W,originalEvent:I.originalEvent||te};I.zoomDelta!==void 0&&(G.zoom=ee),I.panDelta!==void 0&&(G.drag=ee),I.pitchDelta!==void 0&&(G.pitch=ee),I.bearingDelta!==void 0&&(G.rotate=ee)}},Rn.prototype._applyChanges=function(){for(var R={},G={},I={},W=0,te=this._changes;W<te.length;W+=1){var ee=te[W],ve=ee[0],Ee=ee[1],Oe=ee[2];ve.panDelta&&(R.panDelta=(R.panDelta||new n.Point(0,0))._add(ve.panDelta)),ve.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+ve.zoomDelta),ve.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+ve.bearingDelta),ve.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+ve.pitchDelta),ve.around!==void 0&&(R.around=ve.around),ve.pinchAround!==void 0&&(R.pinchAround=ve.pinchAround),ve.noInertia&&(R.noInertia=ve.noInertia),n.extend(G,Ee),n.extend(I,Oe)}this._updateMapTransform(R,G,I),this._changes=[]},Rn.prototype._updateMapTransform=function(R,G,I){var W=this._map,te=W.transform;if(!Wn(R))return this._fireEvents(G,I,!0);var ee=R.panDelta,ve=R.zoomDelta,Ee=R.bearingDelta,Oe=R.pitchDelta,vt=R.around,wt=R.pinchAround;wt!==void 0&&(vt=wt),W._stop(!0),vt=vt||W.transform.centerPoint;var pt=te.pointLocation(ee?vt.sub(ee):vt);Ee&&(te.bearing+=Ee),Oe&&(te.pitch+=Oe),ve&&(te.zoom+=ve),te.setLocationAtPoint(pt,vt),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(G,I,!0)},Rn.prototype._fireEvents=function(R,G,I){var W=this,te=yn(this._eventsInProgress),ee=yn(R),ve={};for(var Ee in R){var Oe=R[Ee],vt=Oe.originalEvent;this._eventsInProgress[Ee]||(ve[Ee+"start"]=vt),this._eventsInProgress[Ee]=R[Ee]}!te&&ee&&this._fireEvent("movestart",ee.originalEvent);for(var wt in ve)this._fireEvent(wt,ve[wt]);ee&&this._fireEvent("move",ee.originalEvent);for(var pt in R){var Be=R[pt],$e=Be.originalEvent;this._fireEvent(pt,$e)}var ot={},Tt;for(var Lt in this._eventsInProgress){var Pt=this._eventsInProgress[Lt],Xt=Pt.handlerName,Nt=Pt.originalEvent;this._handlersById[Xt].isActive()||(delete this._eventsInProgress[Lt],Tt=G[Xt]||Nt,ot[Lt+"end"]=Tt)}for(var Dt in ot)this._fireEvent(Dt,ot[Dt]);var Zt=yn(this._eventsInProgress);if(I&&(te||ee)&&!Zt){this._updatingCamera=!0;var Ct=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ar=function(yr){return yr!==0&&-W._bearingSnap<yr&&yr<W._bearingSnap};Ct?(ar(Ct.bearing||this._map.getBearing())&&(Ct.bearing=0),this._map.easeTo(Ct,{originalEvent:Tt})):(this._map.fire(new n.Event("moveend",{originalEvent:Tt})),ar(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Rn.prototype._fireEvent=function(R,G){this._map.fire(new n.Event(R,G?{originalEvent:G}:{}))},Rn.prototype._requestFrame=function(){var R=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete R._frameId,R.handleEvent(new Qn("renderFrame",{timeStamp:G})),R._applyChanges()})},Rn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ia=function(H){function R(G,I){H.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=I.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)},R.prototype.setCenter=function(I,W){return this.jumpTo({center:I},W)},R.prototype.panBy=function(I,W,te){return I=n.Point.convert(I).mult(-1),this.panTo(this.transform.center,n.extend({offset:I},W),te)},R.prototype.panTo=function(I,W,te){return this.easeTo(n.extend({center:I},W),te)},R.prototype.getZoom=function(){return this.transform.zoom},R.prototype.setZoom=function(I,W){return this.jumpTo({zoom:I},W),this},R.prototype.zoomTo=function(I,W,te){return this.easeTo(n.extend({zoom:I},W),te)},R.prototype.zoomIn=function(I,W){return this.zoomTo(this.getZoom()+1,I,W),this},R.prototype.zoomOut=function(I,W){return this.zoomTo(this.getZoom()-1,I,W),this},R.prototype.getBearing=function(){return this.transform.bearing},R.prototype.setBearing=function(I,W){return this.jumpTo({bearing:I},W),this},R.prototype.getPadding=function(){return this.transform.padding},R.prototype.setPadding=function(I,W){return this.jumpTo({padding:I},W),this},R.prototype.rotateTo=function(I,W,te){return this.easeTo(n.extend({bearing:I},W),te)},R.prototype.resetNorth=function(I,W){return this.rotateTo(0,n.extend({duration:1e3},I),W),this},R.prototype.resetNorthPitch=function(I,W){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},I),W),this},R.prototype.snapToNorth=function(I,W){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(I,W):this},R.prototype.getPitch=function(){return this.transform.pitch},R.prototype.setPitch=function(I,W){return this.jumpTo({pitch:I},W),this},R.prototype.cameraForBounds=function(I,W){I=n.LngLatBounds.convert(I);var te=W&&W.bearing||0;return this._cameraForBoxAndBearing(I.getNorthWest(),I.getSouthEast(),te,W)},R.prototype._cameraForBoxAndBearing=function(I,W,te,ee){var ve={top:0,bottom:0,right:0,left:0};if(ee=n.extend({padding:ve,offset:[0,0],maxZoom:this.transform.maxZoom},ee),typeof ee.padding=="number"){var Ee=ee.padding;ee.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}ee.padding=n.extend(ve,ee.padding);var Oe=this.transform,vt=Oe.padding,wt=Oe.project(n.LngLat.convert(I)),pt=Oe.project(n.LngLat.convert(W)),Be=wt.rotate(-te*Math.PI/180),$e=pt.rotate(-te*Math.PI/180),ot=new n.Point(Math.max(Be.x,$e.x),Math.max(Be.y,$e.y)),Tt=new n.Point(Math.min(Be.x,$e.x),Math.min(Be.y,$e.y)),Lt=ot.sub(Tt),Pt=(Oe.width-(vt.left+vt.right+ee.padding.left+ee.padding.right))/Lt.x,Xt=(Oe.height-(vt.top+vt.bottom+ee.padding.top+ee.padding.bottom))/Lt.y;if(Xt<0||Pt<0){n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Nt=Math.min(Oe.scaleZoom(Oe.scale*Math.min(Pt,Xt)),ee.maxZoom),Dt=typeof ee.offset.x=="number"?new n.Point(ee.offset.x,ee.offset.y):n.Point.convert(ee.offset),Zt=(ee.padding.left-ee.padding.right)/2,Ct=(ee.padding.top-ee.padding.bottom)/2,ar=new n.Point(Zt,Ct),yr=ar.rotate(te*Math.PI/180),Dr=Dt.add(yr),ln=Dr.mult(Oe.scale/Oe.zoomScale(Nt)),Xr=Oe.unproject(wt.add(pt).div(2).sub(ln));return{center:Xr,zoom:Nt,bearing:te}},R.prototype.fitBounds=function(I,W,te){return this._fitInternal(this.cameraForBounds(I,W),W,te)},R.prototype.fitScreenCoordinates=function(I,W,te,ee,ve){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(I)),this.transform.pointLocation(n.Point.convert(W)),te,ee),ee,ve)},R.prototype._fitInternal=function(I,W,te){return I?(W=n.extend(I,W),delete W.padding,W.linear?this.easeTo(W,te):this.flyTo(W,te)):this},R.prototype.jumpTo=function(I,W){this.stop();var te=this.transform,ee=!1,ve=!1,Ee=!1;return"zoom"in I&&te.zoom!==+I.zoom&&(ee=!0,te.zoom=+I.zoom),I.center!==void 0&&(te.center=n.LngLat.convert(I.center)),"bearing"in I&&te.bearing!==+I.bearing&&(ve=!0,te.bearing=+I.bearing),"pitch"in I&&te.pitch!==+I.pitch&&(Ee=!0,te.pitch=+I.pitch),I.padding!=null&&!te.isPaddingEqual(I.padding)&&(te.padding=I.padding),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W)),ee&&this.fire(new n.Event("zoomstart",W)).fire(new n.Event("zoom",W)).fire(new n.Event("zoomend",W)),ve&&this.fire(new n.Event("rotatestart",W)).fire(new n.Event("rotate",W)).fire(new n.Event("rotateend",W)),Ee&&this.fire(new n.Event("pitchstart",W)).fire(new n.Event("pitch",W)).fire(new n.Event("pitchend",W)),this.fire(new n.Event("moveend",W))},R.prototype.easeTo=function(I,W){var te=this;this._stop(!1,I.easeId),I=n.extend({offset:[0,0],duration:500,easing:n.ease},I),(I.animate===!1||!I.essential&&n.browser.prefersReducedMotion)&&(I.duration=0);var ee=this.transform,ve=this.getZoom(),Ee=this.getBearing(),Oe=this.getPitch(),vt=this.getPadding(),wt="zoom"in I?+I.zoom:ve,pt="bearing"in I?this._normalizeBearing(I.bearing,Ee):Ee,Be="pitch"in I?+I.pitch:Oe,$e="padding"in I?I.padding:ee.padding,ot=n.Point.convert(I.offset),Tt=ee.centerPoint.add(ot),Lt=ee.pointLocation(Tt),Pt=n.LngLat.convert(I.center||Lt);this._normalizeCenter(Pt);var Xt=ee.project(Lt),Nt=ee.project(Pt).sub(Xt),Dt=ee.zoomScale(wt-ve),Zt,Ct;I.around&&(Zt=n.LngLat.convert(I.around),Ct=ee.locationPoint(Zt));var ar={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||wt!==ve,this._rotating=this._rotating||Ee!==pt,this._pitching=this._pitching||Be!==Oe,this._padding=!ee.isPaddingEqual($e),this._easeId=I.easeId,this._prepareEase(W,I.noMoveStart,ar),this._ease(function(yr){if(te._zooming&&(ee.zoom=n.number(ve,wt,yr)),te._rotating&&(ee.bearing=n.number(Ee,pt,yr)),te._pitching&&(ee.pitch=n.number(Oe,Be,yr)),te._padding&&(ee.interpolatePadding(vt,$e,yr),Tt=ee.centerPoint.add(ot)),Zt)ee.setLocationAtPoint(Zt,Ct);else{var Dr=ee.zoomScale(ee.zoom-ve),ln=wt>ve?Math.min(2,Dt):Math.max(.5,Dt),Xr=Math.pow(ln,1-yr),dn=ee.unproject(Xt.add(Nt.mult(yr*Xr)).mult(Dr));ee.setLocationAtPoint(ee.renderWorldCopies?dn.wrap():dn,Tt)}te._fireMoveEvents(W)},function(yr){te._afterEase(W,yr)},I),this},R.prototype._prepareEase=function(I,W,te){te===void 0&&(te={}),this._moving=!0,!W&&!te.moving&&this.fire(new n.Event("movestart",I)),this._zooming&&!te.zooming&&this.fire(new n.Event("zoomstart",I)),this._rotating&&!te.rotating&&this.fire(new n.Event("rotatestart",I)),this._pitching&&!te.pitching&&this.fire(new n.Event("pitchstart",I))},R.prototype._fireMoveEvents=function(I){this.fire(new n.Event("move",I)),this._zooming&&this.fire(new n.Event("zoom",I)),this._rotating&&this.fire(new n.Event("rotate",I)),this._pitching&&this.fire(new n.Event("pitch",I))},R.prototype._afterEase=function(I,W){if(!(this._easeId&&W&&this._easeId===W)){delete this._easeId;var te=this._zooming,ee=this._rotating,ve=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,te&&this.fire(new n.Event("zoomend",I)),ee&&this.fire(new n.Event("rotateend",I)),ve&&this.fire(new n.Event("pitchend",I)),this.fire(new n.Event("moveend",I))}},R.prototype.flyTo=function(I,W){var te=this;if(!I.essential&&n.browser.prefersReducedMotion){var ee=n.pick(I,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ee,W)}this.stop(),I=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},I);var ve=this.transform,Ee=this.getZoom(),Oe=this.getBearing(),vt=this.getPitch(),wt=this.getPadding(),pt="zoom"in I?n.clamp(+I.zoom,ve.minZoom,ve.maxZoom):Ee,Be="bearing"in I?this._normalizeBearing(I.bearing,Oe):Oe,$e="pitch"in I?+I.pitch:vt,ot="padding"in I?I.padding:ve.padding,Tt=ve.zoomScale(pt-Ee),Lt=n.Point.convert(I.offset),Pt=ve.centerPoint.add(Lt),Xt=ve.pointLocation(Pt),Nt=n.LngLat.convert(I.center||Xt);this._normalizeCenter(Nt);var Dt=ve.project(Xt),Zt=ve.project(Nt).sub(Dt),Ct=I.curve,ar=Math.max(ve.width,ve.height),yr=ar/Tt,Dr=Zt.mag();if("minZoom"in I){var ln=n.clamp(Math.min(I.minZoom,Ee,pt),ve.minZoom,ve.maxZoom),Xr=ar/ve.zoomScale(ln-Ee);Ct=Math.sqrt(Xr/Dr*2)}var dn=Ct*Ct;function ii(ua){var Qa=(yr*yr-ar*ar+(ua?-1:1)*dn*dn*Dr*Dr)/(2*(ua?yr:ar)*dn*Dr);return Math.log(Math.sqrt(Qa*Qa+1)-Qa)}function Nn(ua){return(Math.exp(ua)-Math.exp(-ua))/2}function un(ua){return(Math.exp(ua)+Math.exp(-ua))/2}function Ln(ua){return Nn(ua)/un(ua)}var Mn=ii(0),Kn=function(ua){return un(Mn)/un(Mn+Ct*ua)},xi=function(ua){return ar*((un(Mn)*Ln(Mn+Ct*ua)-Nn(Mn))/dn)/Dr},Da=(ii(1)-Mn)/Ct;if(Math.abs(Dr)<1e-6||!isFinite(Da)){if(Math.abs(ar-yr)<1e-6)return this.easeTo(I,W);var Pa=yr<ar?-1:1;Da=Math.abs(Math.log(yr/ar))/Ct,xi=function(){return 0},Kn=function(ua){return Math.exp(Pa*Ct*ua)}}if("duration"in I)I.duration=+I.duration;else{var _o="screenSpeed"in I?+I.screenSpeed/Ct:+I.speed;I.duration=1e3*Da/_o}return I.maxDuration&&I.duration>I.maxDuration&&(I.duration=0),this._zooming=!0,this._rotating=Oe!==Be,this._pitching=$e!==vt,this._padding=!ve.isPaddingEqual(ot),this._prepareEase(W,!1),this._ease(function(ua){var Qa=ua*Da,Vo=1/Kn(Qa);ve.zoom=ua===1?pt:Ee+ve.scaleZoom(Vo),te._rotating&&(ve.bearing=n.number(Oe,Be,ua)),te._pitching&&(ve.pitch=n.number(vt,$e,ua)),te._padding&&(ve.interpolatePadding(wt,ot,ua),Pt=ve.centerPoint.add(Lt));var ml=ua===1?Nt:ve.unproject(Dt.add(Zt.mult(xi(Qa))).mult(Vo));ve.setLocationAtPoint(ve.renderWorldCopies?ml.wrap():ml,Pt),te._fireMoveEvents(W)},function(){return te._afterEase(W)},I),this},R.prototype.isEasing=function(){return!!this._easeFrameId},R.prototype.stop=function(){return this._stop()},R.prototype._stop=function(I,W){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var te=this._onEaseEnd;delete this._onEaseEnd,te.call(this,W)}if(!I){var ee=this.handlers;ee&&ee.stop(!1)}return this},R.prototype._ease=function(I,W,te){te.animate===!1||te.duration===0?(I(1),W()):(this._easeStart=n.browser.now(),this._easeOptions=te,this._onEaseFrame=I,this._onEaseEnd=W,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},R.prototype._renderFrameCallback=function(){var I=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(I)),I<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},R.prototype._normalizeBearing=function(I,W){I=n.wrap(I,-180,180);var te=Math.abs(I-W);return Math.abs(I-360-W)<te&&(I-=360),Math.abs(I+360-W)<te&&(I+=360),I},R.prototype._normalizeCenter=function(I){var W=this.transform;if(!(!W.renderWorldCopies||W.lngRange)){var te=I.lng-W.center.lng;I.lng+=te>180?-360:te<-180?360:0}},R}(n.Evented),Un=function(R){R===void 0&&(R={}),this.options=R,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Un.prototype.getDefaultPosition=function(){return"bottom-right"},Un.prototype.onAdd=function(R){var G=this.options&&this.options.compact;return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Un.prototype.onRemove=function(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Un.prototype._setElementTitle=function(R,G){var I=this._map._getUIString("AttributionControl."+G);R.title=I,R.setAttribute("aria-label",I)},Un.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Un.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(R){var I=G.reduce(function(W,te,ee){return te.value&&(W+=te.key+"="+te.value+(ee<G.length-1?"&":"")),W},"?");R.href=n.config.FEEDBACK_URL+"/"+I+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow",this._setElementTitle(R,"MapFeedback")}},Un.prototype._updateData=function(R){R&&(R.sourceDataType==="metadata"||R.sourceDataType==="visibility"||R.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Un.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(Ee){return typeof Ee!="string"?"":Ee})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var I=this._map.style.sourceCaches;for(var W in I){var te=I[W];if(te.used){var ee=te.getSource();ee.attribution&&R.indexOf(ee.attribution)<0&&R.push(ee.attribution)}}R.sort(function(Ee,Oe){return Ee.length-Oe.length}),R=R.filter(function(Ee,Oe){for(var vt=Oe+1;vt<R.length;vt++)if(R[vt].indexOf(Ee)>=0)return!1;return!0});var ve=R.join(" | ");ve!==this._attribHTML&&(this._attribHTML=ve,R.length?(this._innerContainer.innerHTML=ve,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Un.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Bn=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this)};Bn.prototype.onAdd=function(R){this._map=R,this._container=o.create("div","mapboxgl-ctrl");var G=o.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bn.prototype.onRemove=function(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bn.prototype.getDefaultPosition=function(){return"bottom-left"},Bn.prototype._updateLogo=function(R){(!R||R.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Bn.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var G in R){var I=R[G].getSource();if(I.mapbox_logo)return!0}return!1}},Bn.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var G=R[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var mn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mn.prototype.add=function(R){var G=++this._id,I=this._queue;return I.push({callback:R,id:G,cancelled:!1}),G},mn.prototype.remove=function(R){for(var G=this._currentlyRunning,I=G?this._queue.concat(G):this._queue,W=0,te=I;W<te.length;W+=1){var ee=te[W];if(ee.id===R){ee.cancelled=!0;return}}},mn.prototype.run=function(R){R===void 0&&(R=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var I=0,W=G;I<W.length;I+=1){var te=W[I];if(!te.cancelled&&(te.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var zr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},fn=n.window.HTMLImageElement,Vn=n.window.HTMLElement,Zn=n.window.ImageBitmap,En=-2,mi=22,ri=0,$i=60,Cn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:En,maxZoom:mi,minPitch:ri,maxPitch:$i,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Tn=function(H){function R(I){var W=this;if(I=n.extend({},Cn,I),I.minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<ri)throw new Error("minPitch must be greater than or equal to "+ri);if(I.maxPitch!=null&&I.maxPitch>$i)throw new Error("maxPitch must be less than or equal to "+$i);var te=new to(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(H.call(this,te,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new mn,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},zr,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new n.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=n.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else if(I.container instanceof Vn)this._container=I.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(I.maxBounds&&this.setMaxBounds(I.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return W._update(!1)}),this.on("moveend",function(){return W._update(!1)}),this.on("zoom",function(){return W._update(!0)}),typeof n.window!="undefined"&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Rn(this,I);var ee=typeof I.hash=="string"&&I.hash||void 0;this._hash=I.hash&&new Sl(ee).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,n.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Un({customAttribution:I.customAttribution})),this.addControl(new Bn,I.logoPosition),this.on("style.load",function(){W.transform.unmodified&&W.jumpTo(W.style.stylesheet)}),this.on("data",function(ve){W._update(ve.dataType==="style"),W.fire(new n.Event(ve.dataType+"data",ve))}),this.on("dataloading",function(ve){W.fire(new n.Event(ve.dataType+"dataloading",ve))})}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return R.prototype._getMapId=function(){return this._mapId},R.prototype.addControl=function(W,te){if(te===void 0&&(W.getDefaultPosition?te=W.getDefaultPosition():te="top-right"),!W||!W.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ee=W.onAdd(this);this._controls.push(W);var ve=this._controlPositions[te];return te.indexOf("bottom")!==-1?ve.insertBefore(ee,ve.firstChild):ve.appendChild(ee),this},R.prototype.removeControl=function(W){if(!W||!W.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var te=this._controls.indexOf(W);return te>-1&&this._controls.splice(te,1),W.onRemove(this),this},R.prototype.hasControl=function(W){return this._controls.indexOf(W)>-1},R.prototype.resize=function(W){var te=this._containerDimensions(),ee=te[0],ve=te[1];this._resizeCanvas(ee,ve),this.transform.resize(ee,ve),this.painter.resize(ee,ve);var Ee=!this._moving;return Ee&&(this.stop(),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W))),this.fire(new n.Event("resize",W)),Ee&&this.fire(new n.Event("moveend",W)),this},R.prototype.getBounds=function(){return this.transform.getBounds()},R.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},R.prototype.setMaxBounds=function(W){return this.transform.setMaxBounds(n.LngLatBounds.convert(W)),this._update()},R.prototype.setMinZoom=function(W){if(W=W==null?En:W,W>=En&&W<=this.transform.maxZoom)return this.transform.minZoom=W,this._update(),this.getZoom()<W&&this.setZoom(W),this;throw new Error("minZoom must be between "+En+" and the current maxZoom, inclusive")},R.prototype.getMinZoom=function(){return this.transform.minZoom},R.prototype.setMaxZoom=function(W){if(W=W==null?mi:W,W>=this.transform.minZoom)return this.transform.maxZoom=W,this._update(),this.getZoom()>W&&this.setZoom(W),this;throw new Error("maxZoom must be greater than the current minZoom")},R.prototype.getMaxZoom=function(){return this.transform.maxZoom},R.prototype.setMinPitch=function(W){if(W=W==null?ri:W,W<ri)throw new Error("minPitch must be greater than or equal to "+ri);if(W>=ri&&W<=this.transform.maxPitch)return this.transform.minPitch=W,this._update(),this.getPitch()<W&&this.setPitch(W),this;throw new Error("minPitch must be between "+ri+" and the current maxPitch, inclusive")},R.prototype.getMinPitch=function(){return this.transform.minPitch},R.prototype.setMaxPitch=function(W){if(W=W==null?$i:W,W>$i)throw new Error("maxPitch must be less than or equal to "+$i);if(W>=this.transform.minPitch)return this.transform.maxPitch=W,this._update(),this.getPitch()>W&&this.setPitch(W),this;throw new Error("maxPitch must be greater than the current minPitch")},R.prototype.getMaxPitch=function(){return this.transform.maxPitch},R.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},R.prototype.setRenderWorldCopies=function(W){return this.transform.renderWorldCopies=W,this._update()},R.prototype.project=function(W){return this.transform.locationPoint(n.LngLat.convert(W))},R.prototype.unproject=function(W){return this.transform.pointLocation(n.Point.convert(W))},R.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},R.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},R.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},R.prototype._createDelegatedListener=function(W,te,ee){var ve=this,Ee;if(W==="mouseenter"||W==="mouseover"){var Oe=!1,vt=function(Tt){var Lt=ve.getLayer(te)?ve.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Lt.length?Oe||(Oe=!0,ee.call(ve,new Q(W,ve,Tt.originalEvent,{features:Lt}))):Oe=!1},wt=function(){Oe=!1};return{layer:te,listener:ee,delegates:{mousemove:vt,mouseout:wt}}}else if(W==="mouseleave"||W==="mouseout"){var pt=!1,Be=function(Tt){var Lt=ve.getLayer(te)?ve.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Lt.length?pt=!0:pt&&(pt=!1,ee.call(ve,new Q(W,ve,Tt.originalEvent)))},$e=function(Tt){pt&&(pt=!1,ee.call(ve,new Q(W,ve,Tt.originalEvent)))};return{layer:te,listener:ee,delegates:{mousemove:Be,mouseout:$e}}}else{var ot=function(Tt){var Lt=ve.getLayer(te)?ve.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Lt.length&&(Tt.features=Lt,ee.call(ve,Tt),delete Tt.features)};return{layer:te,listener:ee,delegates:(Ee={},Ee[W]=ot,Ee)}}},R.prototype.on=function(W,te,ee){if(ee===void 0)return H.prototype.on.call(this,W,te);var ve=this._createDelegatedListener(W,te,ee);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[W]=this._delegatedListeners[W]||[],this._delegatedListeners[W].push(ve);for(var Ee in ve.delegates)this.on(Ee,ve.delegates[Ee]);return this},R.prototype.once=function(W,te,ee){if(ee===void 0)return H.prototype.once.call(this,W,te);var ve=this._createDelegatedListener(W,te,ee);for(var Ee in ve.delegates)this.once(Ee,ve.delegates[Ee]);return this},R.prototype.off=function(W,te,ee){var ve=this;if(ee===void 0)return H.prototype.off.call(this,W,te);var Ee=function(Oe){for(var vt=Oe[W],wt=0;wt<vt.length;wt++){var pt=vt[wt];if(pt.layer===te&&pt.listener===ee){for(var Be in pt.delegates)ve.off(Be,pt.delegates[Be]);return vt.splice(wt,1),ve}}};return this._delegatedListeners&&this._delegatedListeners[W]&&Ee(this._delegatedListeners),this},R.prototype.queryRenderedFeatures=function(W,te){if(!this.style)return[];te===void 0&&W!==void 0&&!(W instanceof n.Point)&&!Array.isArray(W)&&(te=W,W=void 0),te=te||{},W=W||[[0,0],[this.transform.width,this.transform.height]];var ee;if(W instanceof n.Point||typeof W[0]=="number")ee=[n.Point.convert(W)];else{var ve=n.Point.convert(W[0]),Ee=n.Point.convert(W[1]);ee=[ve,new n.Point(Ee.x,ve.y),Ee,new n.Point(ve.x,Ee.y),ve]}return this.style.queryRenderedFeatures(ee,te,this.transform)},R.prototype.querySourceFeatures=function(W,te){return this.style.querySourceFeatures(W,te)},R.prototype.setStyle=function(W,te){return te=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},te),te.diff!==!1&&te.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&W?(this._diffStyle(W,te),this):(this._localIdeographFontFamily=te.localIdeographFontFamily,this._updateStyle(W,te))},R.prototype._getUIString=function(W){var te=this._locale[W];if(te==null)throw new Error("Missing UI string '"+W+"'");return te},R.prototype._updateStyle=function(W,te){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),W)this.style=new eu(this,te||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof W=="string"?this.style.loadURL(W):this.style.loadJSON(W),this},R.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new eu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},R.prototype._diffStyle=function(W,te){var ee=this;if(typeof W=="string"){var ve=this._requestManager.normalizeStyleURL(W),Ee=this._requestManager.transformRequest(ve,n.ResourceType.Style);n.getJSON(Ee,function(Oe,vt){Oe?ee.fire(new n.ErrorEvent(Oe)):vt&&ee._updateDiff(vt,te)})}else typeof W=="object"&&this._updateDiff(W,te)},R.prototype._updateDiff=function(W,te){try{this.style.setState(W)&&this._update(!0)}catch(ee){n.warnOnce("Unable to perform style diff: "+(ee.message||ee.error||ee)+".  Rebuilding the style from scratch."),this._updateStyle(W,te)}},R.prototype.getStyle=function(){if(this.style)return this.style.serialize()},R.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},R.prototype.addSource=function(W,te){return this._lazyInitEmptyStyle(),this.style.addSource(W,te),this._update(!0)},R.prototype.isSourceLoaded=function(W){var te=this.style&&this.style.sourceCaches[W];if(te===void 0){this.fire(new n.ErrorEvent(new Error("There is no source with ID '"+W+"'")));return}return te.loaded()},R.prototype.areTilesLoaded=function(){var W=this.style&&this.style.sourceCaches;for(var te in W){var ee=W[te],ve=ee._tiles;for(var Ee in ve){var Oe=ve[Ee];if(!(Oe.state==="loaded"||Oe.state==="errored"))return!1}}return!0},R.prototype.addSourceType=function(W,te,ee){return this._lazyInitEmptyStyle(),this.style.addSourceType(W,te,ee)},R.prototype.removeSource=function(W){return this.style.removeSource(W),this._update(!0)},R.prototype.getSource=function(W){return this.style.getSource(W)},R.prototype.addImage=function(W,te,ee){ee===void 0&&(ee={});var ve=ee.pixelRatio;ve===void 0&&(ve=1);var Ee=ee.sdf;Ee===void 0&&(Ee=!1);var Oe=ee.stretchX,vt=ee.stretchY,wt=ee.content;this._lazyInitEmptyStyle();var pt=0;if(te instanceof fn||Zn&&te instanceof Zn){var Be=n.browser.getImageData(te),$e=Be.width,ot=Be.height,Tt=Be.data;this.style.addImage(W,{data:new n.RGBAImage({width:$e,height:ot},Tt),pixelRatio:ve,stretchX:Oe,stretchY:vt,content:wt,sdf:Ee,version:pt})}else{if(te.width===void 0||te.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Lt=te.width,Pt=te.height,Xt=te.data,Nt=te;this.style.addImage(W,{data:new n.RGBAImage({width:Lt,height:Pt},new Uint8Array(Xt)),pixelRatio:ve,stretchX:Oe,stretchY:vt,content:wt,sdf:Ee,version:pt,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,W)}},R.prototype.updateImage=function(W,te){var ee=this.style.getImage(W);if(!ee)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ve=te instanceof fn||Zn&&te instanceof Zn?n.browser.getImageData(te):te,Ee=ve.width,Oe=ve.height,vt=ve.data;if(Ee===void 0||Oe===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Ee!==ee.data.width||Oe!==ee.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var wt=!(te instanceof fn||Zn&&te instanceof Zn);ee.data.replace(vt,wt),this.style.updateImage(W,ee)},R.prototype.hasImage=function(W){return W?!!this.style.getImage(W):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)},R.prototype.removeImage=function(W){this.style.removeImage(W)},R.prototype.loadImage=function(W,te){n.getImage(this._requestManager.transformRequest(W,n.ResourceType.Image),te)},R.prototype.listImages=function(){return this.style.listImages()},R.prototype.addLayer=function(W,te){return this._lazyInitEmptyStyle(),this.style.addLayer(W,te),this._update(!0)},R.prototype.moveLayer=function(W,te){return this.style.moveLayer(W,te),this._update(!0)},R.prototype.removeLayer=function(W){return this.style.removeLayer(W),this._update(!0)},R.prototype.getLayer=function(W){return this.style.getLayer(W)},R.prototype.setLayerZoomRange=function(W,te,ee){return this.style.setLayerZoomRange(W,te,ee),this._update(!0)},R.prototype.setFilter=function(W,te,ee){return ee===void 0&&(ee={}),this.style.setFilter(W,te,ee),this._update(!0)},R.prototype.getFilter=function(W){return this.style.getFilter(W)},R.prototype.setPaintProperty=function(W,te,ee,ve){return ve===void 0&&(ve={}),this.style.setPaintProperty(W,te,ee,ve),this._update(!0)},R.prototype.getPaintProperty=function(W,te){return this.style.getPaintProperty(W,te)},R.prototype.setLayoutProperty=function(W,te,ee,ve){return ve===void 0&&(ve={}),this.style.setLayoutProperty(W,te,ee,ve),this._update(!0)},R.prototype.getLayoutProperty=function(W,te){return this.style.getLayoutProperty(W,te)},R.prototype.setLight=function(W,te){return te===void 0&&(te={}),this._lazyInitEmptyStyle(),this.style.setLight(W,te),this._update(!0)},R.prototype.getLight=function(){return this.style.getLight()},R.prototype.setFeatureState=function(W,te){return this.style.setFeatureState(W,te),this._update()},R.prototype.removeFeatureState=function(W,te){return this.style.removeFeatureState(W,te),this._update()},R.prototype.getFeatureState=function(W){return this.style.getFeatureState(W)},R.prototype.getContainer=function(){return this._container},R.prototype.getCanvasContainer=function(){return this._canvasContainer},R.prototype.getCanvas=function(){return this._canvas},R.prototype._containerDimensions=function(){var W=0,te=0;return this._container&&(W=this._container.clientWidth||400,te=this._container.clientHeight||300),[W,te]},R.prototype._detectMissingCSS=function(){var W=n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");W!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},R.prototype._setupContainer=function(){var W=this._container;W.classList.add("mapboxgl-map");var te=this._missingCSSCanary=o.create("div","mapboxgl-canary",W);te.style.visibility="hidden",this._detectMissingCSS();var ee=this._canvasContainer=o.create("div","mapboxgl-canvas-container",W);this._interactive&&ee.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",ee),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ve=this._containerDimensions();this._resizeCanvas(ve[0],ve[1]);var Ee=this._controlContainer=o.create("div","mapboxgl-control-container",W),Oe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(vt){Oe[vt]=o.create("div","mapboxgl-ctrl-"+vt,Ee)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},R.prototype._resizeCanvas=function(W,te){var ee=n.browser.devicePixelRatio||1;this._canvas.width=ee*W,this._canvas.height=ee*te,this._canvas.style.width=W+"px",this._canvas.style.height=te+"px"},R.prototype._setupPainter=function(){var W=n.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),te=this._canvas.getContext("webgl",W)||this._canvas.getContext("experimental-webgl",W);if(!te){this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new qa(te,this.transform),n.webpSupported.testSupport(te)},R.prototype._contextLost=function(W){W.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:W}))},R.prototype._contextRestored=function(W){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:W}))},R.prototype._onMapScroll=function(W){if(W.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},R.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},R.prototype._update=function(W){return this.style?(this._styleDirty=this._styleDirty||W,this._sourcesDirty=!0,this.triggerRepaint(),this):this},R.prototype._requestRenderFrame=function(W){return this._update(),this._renderTaskQueue.add(W)},R.prototype._cancelRenderFrame=function(W){this._renderTaskQueue.remove(W)},R.prototype._render=function(W){var te=this,ee,ve=0,Ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ee=Ee.createQueryEXT(),Ee.beginQueryEXT(Ee.TIME_ELAPSED_EXT,ee),ve=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(W),!this._removed){var Oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var vt=this.transform.zoom,wt=n.browser.now();this.style.zoomHistory.update(vt,wt);var pt=new n.EvaluationParameters(vt,{now:wt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Be=pt.crossFadingFactor();(Be!==1||Be!==this._crossFadingFactor)&&(Oe=!0,this._crossFadingFactor=Be),this.style.update(pt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||Oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $e=n.browser.now()-ve;Ee.endQueryEXT(Ee.TIME_ELAPSED_EXT,ee),setTimeout(function(){var Lt=Ee.getQueryObjectEXT(ee,Ee.QUERY_RESULT_EXT)/1e6;Ee.deleteQueryEXT(ee),te.fire(new n.Event("gpu-timing-frame",{cpuTime:$e,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var ot=this.painter.collectGpuTimers();setTimeout(function(){var Lt=te.painter.queryGpuTimers(ot);te.fire(new n.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}var Tt=this._sourcesDirty||this._styleDirty||this._placementDirty;return Tt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),this._loaded&&!this._fullyLoaded&&!Tt&&(this._fullyLoaded=!0),this}},R.prototype.remove=function(){this._hash&&this._hash.remove();for(var W=0,te=this._controls;W<te.length;W+=1){var ee=te[W];ee.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof n.window!="undefined"&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var ve=this.painter.context.gl.getExtension("WEBGL_lose_context");ve&&ve.loseContext&&ve.loseContext(),Pi(this._canvasContainer),Pi(this._controlContainer),Pi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"))},R.prototype.triggerRepaint=function(){var W=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(te){W._frame=null,W._render(te)}))},R.prototype._onWindowOnline=function(){this._update()},R.prototype._onWindowResize=function(W){this._trackResize&&this.resize({originalEvent:W})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(I){this._vertices=I,this._update()},R.prototype._setCacheLimits=function(W,te){n.setCacheLimits(W,te)},G.version.get=function(){return n.version},Object.defineProperties(R.prototype,G),R}(ia);function Pi(H){H.parentNode&&H.parentNode.removeChild(H)}var di={showCompass:!0,showZoom:!0,visualizePitch:!1},ei=function(R){var G=this;this.options=n.extend({},di,R),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(I){return I.preventDefault()}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(I){return G._map.zoomIn({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(I){return G._map.zoomOut({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(I){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:I}):G._map.resetNorth({},{originalEvent:I})}),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ei.prototype._updateZoomButtons=function(){var R=this._map.getZoom(),G=R===this._map.getMaxZoom(),I=R===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())},ei.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},ei.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jn(this._map,this._compass,this.options.visualizePitch)),this._container},ei.prototype.onRemove=function(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ei.prototype._createButton=function(R,G){var I=o.create("button",R,this._container);return I.type="button",I.addEventListener("click",G),I},ei.prototype._setButtonTitle=function(R,G){var I=this._map._getUIString("NavigationControl."+G);R.title=I,R.setAttribute("aria-label",I)};var jn=function(R,G,I){I===void 0&&(I=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new gn({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,I&&(this.mousePitch=new bn({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(G,"mousedown",this.mousedown),o.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(G,"touchmove",this.touchmove),o.addEventListener(G,"touchend",this.touchend),o.addEventListener(G,"touchcancel",this.reset)};jn.prototype.down=function(R,G){this.mouseRotate.mousedown(R,G),this.mousePitch&&this.mousePitch.mousedown(R,G),o.disableDrag()},jn.prototype.move=function(R,G){var I=this.map,W=this.mouseRotate.mousemoveWindow(R,G);if(W&&W.bearingDelta&&I.setBearing(I.getBearing()+W.bearingDelta),this.mousePitch){var te=this.mousePitch.mousemoveWindow(R,G);te&&te.pitchDelta&&I.setPitch(I.getPitch()+te.pitchDelta)}},jn.prototype.off=function(){var R=this.element;o.removeEventListener(R,"mousedown",this.mousedown),o.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(R,"touchmove",this.touchmove),o.removeEventListener(R,"touchend",this.touchend),o.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},jn.prototype.offTemp=function(){o.enableDrag(),o.removeEventListener(n.window,"mousemove",this.mousemove),o.removeEventListener(n.window,"mouseup",this.mouseup)},jn.prototype.mousedown=function(R){this.down(n.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),o.mousePos(this.element,R)),o.addEventListener(n.window,"mousemove",this.mousemove),o.addEventListener(n.window,"mouseup",this.mouseup)},jn.prototype.mousemove=function(R){this.move(R,o.mousePos(this.element,R))},jn.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},jn.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},jn.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},jn.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Si(H,R,G){if(H=new n.LngLat(H.lng,H.lat),R){var I=new n.LngLat(H.lng-360,H.lat),W=new n.LngLat(H.lng+360,H.lat),te=G.locationPoint(H).distSqr(R);G.locationPoint(I).distSqr(R)<te?H=I:G.locationPoint(W).distSqr(R)<te&&(H=W)}for(;Math.abs(H.lng-G.center.lng)>180;){var ee=G.locationPoint(H);if(ee.x>=0&&ee.y>=0&&ee.x<=G.width&&ee.y<=G.height)break;H.lng>G.center.lng?H.lng-=360:H.lng+=360}return H}var na={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ea(H,R,G){var I=H.classList;for(var W in na)I.remove("mapboxgl-"+G+"-anchor-"+W);I.add("mapboxgl-"+G+"-anchor-"+R)}var pi=function(H){function R(G,I){if(H.call(this),(G instanceof n.window.HTMLElement||I)&&(G=n.extend({element:G},I)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,!G||!G.element){this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");var W=o.createNS("http://www.w3.org/2000/svg","svg"),te=41,ee=27;W.setAttributeNS(null,"display","block"),W.setAttributeNS(null,"height",te+"px"),W.setAttributeNS(null,"width",ee+"px"),W.setAttributeNS(null,"viewBox","0 0 "+ee+" "+te);var ve=o.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"stroke","none"),ve.setAttributeNS(null,"stroke-width","1"),ve.setAttributeNS(null,"fill","none"),ve.setAttributeNS(null,"fill-rule","evenodd");var Ee=o.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill-rule","nonzero");var Oe=o.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var vt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],wt=0,pt=vt;wt<pt.length;wt+=1){var Be=pt[wt],$e=o.createNS("http://www.w3.org/2000/svg","ellipse");$e.setAttributeNS(null,"opacity","0.04"),$e.setAttributeNS(null,"cx","10.5"),$e.setAttributeNS(null,"cy","5.80029008"),$e.setAttributeNS(null,"rx",Be.rx),$e.setAttributeNS(null,"ry",Be.ry),Oe.appendChild($e)}var ot=o.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"fill",this._color);var Tt=o.createNS("http://www.w3.org/2000/svg","path");Tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ot.appendChild(Tt);var Lt=o.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var Pt=o.createNS("http://www.w3.org/2000/svg","path");Pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(Pt);var Xt=o.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Xt.setAttributeNS(null,"fill","#FFFFFF");var Nt=o.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Dt=o.createNS("http://www.w3.org/2000/svg","circle");Dt.setAttributeNS(null,"fill","#000000"),Dt.setAttributeNS(null,"opacity","0.25"),Dt.setAttributeNS(null,"cx","5.5"),Dt.setAttributeNS(null,"cy","5.5"),Dt.setAttributeNS(null,"r","5.4999962");var Zt=o.createNS("http://www.w3.org/2000/svg","circle");Zt.setAttributeNS(null,"fill","#FFFFFF"),Zt.setAttributeNS(null,"cx","5.5"),Zt.setAttributeNS(null,"cy","5.5"),Zt.setAttributeNS(null,"r","5.4999962"),Nt.appendChild(Dt),Nt.appendChild(Zt),Ee.appendChild(Oe),Ee.appendChild(ot),Ee.appendChild(Lt),Ee.appendChild(Xt),Ee.appendChild(Nt),W.appendChild(Ee),W.setAttributeNS(null,"height",te*this._scale+"px"),W.setAttributeNS(null,"width",ee*this._scale+"px"),this._element.appendChild(W),this._offset=n.Point.convert(G&&G.offset||[0,-14])}else this._element=G.element,this._offset=n.Point.convert(G&&G.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ct){Ct.preventDefault()}),this._element.addEventListener("mousedown",function(Ct){Ct.preventDefault()}),Ea(this._element,this._anchor,"marker"),this._popup=null}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this.remove(),this._map=I,I.getCanvasContainer().appendChild(this._element),I.on("move",this._update),I.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},R.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},R.prototype.getElement=function(){return this._element},R.prototype.setPopup=function(I){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),I){if(!("offset"in I.options)){var W=38.1,te=13.5,ee=Math.sqrt(Math.pow(te,2)/2);I.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-W],"bottom-left":[ee,(W-te+ee)*-1],"bottom-right":[-ee,(W-te+ee)*-1],left:[te,(W-te)*-1],right:[-te,(W-te)*-1]}:this._offset}this._popup=I,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},R.prototype._onKeyPress=function(I){var W=I.code,te=I.charCode||I.keyCode;(W==="Space"||W==="Enter"||te===32||te===13)&&this.togglePopup()},R.prototype._onMapClick=function(I){var W=I.originalEvent.target,te=this._element;this._popup&&(W===te||te.contains(W))&&this.togglePopup()},R.prototype.getPopup=function(){return this._popup},R.prototype.togglePopup=function(){var I=this._popup;if(I)I.isOpen()?I.remove():I.addTo(this._map);else return this;return this},R.prototype._update=function(I){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var W="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?W="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(W="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var te="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?te="rotateX(0deg)":this._pitchAlignment==="map"&&(te="rotateX("+this._map.getPitch()+"deg)"),(!I||I.type==="moveend")&&(this._pos=this._pos.round()),o.setTransform(this._element,na[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+te+" "+W)}},R.prototype.getOffset=function(){return this._offset},R.prototype.setOffset=function(I){return this._offset=n.Point.convert(I),this._update(),this},R.prototype._onMove=function(I){if(!this._isDragging){var W=this._clickTolerance||this._map._clickTolerance;this._isDragging=I.point.dist(this._pointerdownPos)>=W}this._isDragging&&(this._pos=I.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))},R.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"},R.prototype._addDragHandler=function(I){this._element.contains(I.originalEvent.target)&&(I.preventDefault(),this._positionDelta=I.point.sub(this._pos).add(this._offset),this._pointerdownPos=I.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},R.prototype.setDraggable=function(I){return this._draggable=!!I,this._map&&(I?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},R.prototype.isDraggable=function(){return this._draggable},R.prototype.setRotation=function(I){return this._rotation=I||0,this._update(),this},R.prototype.getRotation=function(){return this._rotation},R.prototype.setRotationAlignment=function(I){return this._rotationAlignment=I||"auto",this._update(),this},R.prototype.getRotationAlignment=function(){return this._rotationAlignment},R.prototype.setPitchAlignment=function(I){return this._pitchAlignment=I&&I!=="auto"?I:this._rotationAlignment,this._update(),this},R.prototype.getPitchAlignment=function(){return this._pitchAlignment},R}(n.Evented),Vi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ha;function _a(H){ha!==void 0?H(ha):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(function(R){ha=R.state!=="denied",H(ha)}):(ha=!!n.window.navigator.geolocation,H(ha))}var Wa=0,Ls=!1,lu=function(H){function R(G){H.call(this),this.options=n.extend({},Vi,G),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){return this._map=I,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),_a(this._setupUI),this._container},R.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wa=0,Ls=!1},R.prototype._isOutOfMapMaxBounds=function(I){var W=this._map.getMaxBounds(),te=I.coords;return W&&(te.longitude<W.getWest()||te.longitude>W.getEast()||te.latitude<W.getSouth()||te.latitude>W.getNorth())},R.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},R.prototype._onSuccess=function(I){if(this._map){if(this._isOutOfMapMaxBounds(I)){this._setErrorState(),this.fire(new n.Event("outofmaxbounds",I)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",I)),this._finish()}},R.prototype._updateCamera=function(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude),te=I.coords.accuracy,ee=this._map.getBearing(),ve=n.extend({bearing:ee},this.options.fitBoundsOptions);this._map.fitBounds(W.toBounds(te),ve,{geolocateSource:!0})},R.prototype._updateMarker=function(I){if(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(W).addTo(this._map),this._userLocationDotMarker.setLngLat(W).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},R.prototype._updateCircleRadius=function(){var I=this._map._container.clientHeight/2,W=this._map.unproject([0,I]),te=this._map.unproject([1,I]),ee=W.distanceTo(te),ve=Math.ceil(2*this._accuracy/ee);this._circleElement.style.width=ve+"px",this._circleElement.style.height=ve+"px"},R.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},R.prototype._onError=function(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var W=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&Ls)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",I)),this._finish()}},R.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},R.prototype._setupUI=function(I){var W=this;if(this._container.addEventListener("contextmenu",function(ve){return ve.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",I===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te)}else{var ee=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ee,this._geolocateButton.setAttribute("aria-label",ee)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pi(this._dotElement),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ve){var Ee=ve.originalEvent&&ve.originalEvent.type==="resize";!ve.geolocateSource&&W._watchState==="ACTIVE_LOCK"&&!Ee&&(W._watchState="BACKGROUND",W._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),W._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),W.fire(new n.Event("trackuserlocationend")))})},R.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wa--,Ls=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wa++;var I;Wa>1?(I={maximumAge:6e5,timeout:0},Ls=!0):(I=this.options.positionOptions,Ls=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},R.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},R}(n.Evented),uo={maxWidth:100,unit:"metric"},uu=function(R){this.options=n.extend({},uo,R),n.bindAll(["_onMove","setUnit"],this)};uu.prototype.getDefaultPosition=function(){return"bottom-left"},uu.prototype._onMove=function(){ps(this._map,this._container,this.options)},uu.prototype.onAdd=function(R){return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},uu.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},uu.prototype.setUnit=function(R){this.options.unit=R,ps(this._map,this._container,this.options)};function ps(H,R,G){var I=G&&G.maxWidth||100,W=H._container.clientHeight/2,te=H.unproject([0,W]),ee=H.unproject([I,W]),ve=te.distanceTo(ee);if(G&&G.unit==="imperial"){var Ee=3.2808*ve;if(Ee>5280){var Oe=Ee/5280;Xl(R,I,Oe,H._getUIString("ScaleControl.Miles"))}else Xl(R,I,Ee,H._getUIString("ScaleControl.Feet"))}else if(G&&G.unit==="nautical"){var vt=ve/1852;Xl(R,I,vt,H._getUIString("ScaleControl.NauticalMiles"))}else ve>=1e3?Xl(R,I,ve/1e3,H._getUIString("ScaleControl.Kilometers")):Xl(R,I,ve,H._getUIString("ScaleControl.Meters"))}function Xl(H,R,G,I){var W=fc(G),te=W/G;H.style.width=R*te+"px",H.innerHTML=W+"&nbsp;"+I}function Yf(H){var R=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*R)/R}function fc(H){var R=Math.pow(10,(""+Math.floor(H)).length-1),G=H/R;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:Yf(G),R*G}var As=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof n.window.HTMLElement?this._container=R.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange")};As.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},As.prototype.onRemove=function(){o.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},As.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled)},As.prototype._setupUI=function(){var R=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},As.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},As.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},As.prototype._isFullscreen=function(){return this._fullscreen},As.prototype._changeIcon=function(){var R=n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement;R===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},As.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},fu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ro=function(H){function R(G){H.call(this),this.options=n.extend(Object.create(Zl),G),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this},R.prototype.isOpen=function(){return!!this._map},R.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},R.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},R.prototype.getElement=function(){return this._container},R.prototype.setText=function(I){return this.setDOMContent(n.window.document.createTextNode(I))},R.prototype.setHTML=function(I){var W=n.window.document.createDocumentFragment(),te=n.window.document.createElement("body"),ee;for(te.innerHTML=I;ee=te.firstChild,!!ee;)W.appendChild(ee);return this.setDOMContent(W)},R.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},R.prototype.setMaxWidth=function(I){return this.options.maxWidth=I,this._update(),this},R.prototype.setDOMContent=function(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this},R.prototype.addClassName=function(I){this._container&&this._container.classList.add(I)},R.prototype.removeClassName=function(I){this._container&&this._container.classList.remove(I)},R.prototype.setOffset=function(I){return this.options.offset=I,this._update(),this},R.prototype.toggleClassName=function(I){if(this._container)return this._container.classList.toggle(I)},R.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},R.prototype._onMouseUp=function(I){this._update(I.point)},R.prototype._onMouseMove=function(I){this._update(I.point)},R.prototype._onDrag=function(I){this._update(I.point)},R.prototype._update=function(I){var W=this,te=this._lngLat||this._trackPointer;if(!(!this._map||!te||!this._content)&&(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Be){return W._container.classList.add(Be)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!I))){var ee=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat),ve=this.options.anchor,Ee=Eu(this.options.offset);if(!ve){var Oe=this._container.offsetWidth,vt=this._container.offsetHeight,wt;ee.y+Ee.bottom.y<vt?wt=["top"]:ee.y>this._map.transform.height-vt?wt=["bottom"]:wt=[],ee.x<Oe/2?wt.push("left"):ee.x>this._map.transform.width-Oe/2&&wt.push("right"),wt.length===0?ve="bottom":ve=wt.join("-")}var pt=ee.add(Ee[ve]).round();o.setTransform(this._container,na[ve]+" translate("+pt.x+"px,"+pt.y+"px)"),Ea(this._container,ve,"popup")}},R.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var I=this._container.querySelector(fu);I&&I.focus()}},R.prototype._onClose=function(){this.remove()},R}(n.Evented);function Eu(H){if(H)if(typeof H=="number"){var R=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new n.Point(0,0),top:new n.Point(0,H),"top-left":new n.Point(R,R),"top-right":new n.Point(-R,R),bottom:new n.Point(0,-H),"bottom-left":new n.Point(R,-R),"bottom-right":new n.Point(-R,-R),left:new n.Point(H,0),right:new n.Point(-H,0)}}else if(H instanceof n.Point||Array.isArray(H)){var G=n.Point.convert(H);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}else return{center:n.Point.convert(H.center||[0,0]),top:n.Point.convert(H.top||[0,0]),"top-left":n.Point.convert(H["top-left"]||[0,0]),"top-right":n.Point.convert(H["top-right"]||[0,0]),bottom:n.Point.convert(H.bottom||[0,0]),"bottom-left":n.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(H["bottom-right"]||[0,0]),left:n.Point.convert(H.left||[0,0]),right:n.Point.convert(H.right||[0,0])};else return Eu(new n.Point(0,0))}var Ja={version:n.version,supported:a,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:Tn,NavigationControl:ei,GeolocateControl:lu,AttributionControl:Un,ScaleControl:uu,FullscreenControl:As,Popup:ro,Marker:pi,Style:eu,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:Mi,clearPrewarmedResources:Ui,get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(H){n.config.ACCESS_TOKEN=H},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(H){n.config.API_URL=H},get workerCount(){return vn.workerCount},set workerCount(H){vn.workerCount=H},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(H){n.config.MAX_PARALLEL_IMAGE_REQUESTS=H},clearStorage:function(R){n.clearTileCache(R)},workerUrl:""};return Ja}),r})});var hNe=ne((Vyr,cNe)=>{"use strict";var K_=Wt(),GHt=Es().sanitizeHTML,YHt=xZ(),lNe=My();function uNe(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=lNe.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var Np=uNe.prototype;Np.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=tF(t)};Np.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};Np.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};Np.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};Np.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};Np.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};Np.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!tF(e)){var r=WHt(e);t.addSource(this.idSource,r)}};Np.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(lNe.traceLayerPrefix)===0){e=i;break}}return e};Np.updateLayer=function(e){var t=this.subplot,r=fNe(e),i=this.lookupBelow(),n=this.findFollowingMapboxLayerId(i);this.removeLayer(),tF(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},n),this.layerType=e.type,this.below=i};Np.updateStyle=function(e){if(tF(e)){var t=fNe(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};Np.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};Np.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function tF(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return K_.isPlainObject(t)||typeof t=="string"&&t.length>0}function fNe(e){var t={},r={};switch(e.type){case"circle":K_.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":K_.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":K_.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,n=YHt(i.textposition,i.iconsize);K_.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":n.anchor,"text-offset":n.offset,"symbol-placement":i.placement}),K_.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":K_.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function WHt(e){var t=e.sourcetype,r=e.source,i={type:t},n;return t==="geojson"?n="data":t==="vector"?n=typeof r=="string"?"url":"tiles":t==="raster"?(n="tiles",i.tileSize=256):t==="image"&&(n="url",i.coordinates=e.coordinates),i[n]=r,e.sourceattribution&&(i.attribution=GHt(e.sourceattribution)),i}cNe.exports=function(t,r,i){var n=new uNe(t,r);return n.update(i),n}});var bNe=ne((Hyr,_Ne)=>{"use strict";var SZ=MZ(),EZ=Wt(),gNe=B3(),vNe=wi(),XHt=Xi(),ZHt=Hh(),rF=Ol(),yNe=r0(),jHt=yNe.drawMode,KHt=yNe.selectMode,JHt=Mf().prepSelect,QHt=Mf().clearOutline,$Ht=Mf().clearSelectionsCache,eGt=Mf().selectOnClick,A1=My(),tGt=hNe();function mNe(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var uf=mNe.prototype;uf.plot=function(e,t,r){var i=this,n=t[i.id];i.map&&n.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var a;i.map?a=new Promise(function(o,s){i.updateMap(e,t,o,s)}):a=new Promise(function(o,s){i.createMap(e,t,o,s)}),r.push(a)};uf.createMap=function(e,t,r,i){var n=this,a=t[n.id],o=n.styleObj=xNe(a.style,t);n.accessToken=a.accesstoken;var s=a.bounds,l=s?[[s.west,s.south],[s.east,s.north]]:null,u=n.map=new SZ.Map({container:n.div,style:o.style,center:kZ(a.center),zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,maxBounds:l,interactive:!n.isStatic,preserveDrawingBuffer:n.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new SZ.AttributionControl({compact:!0}));u._canvas.style.left="0px",u._canvas.style.top="0px",n.rejectOnError(i),n.isStatic||n.initFx(e,t);var f=[];f.push(new Promise(function(c){u.once("load",c)})),f=f.concat(gNe.fetchTraceGeoData(e)),Promise.all(f).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};uf.updateMap=function(e,t,r,i){var n=this,a=n.map,o=t[this.id];n.rejectOnError(i);var s=[],l=xNe(o.style,t);JSON.stringify(n.styleObj)!==JSON.stringify(l)&&(n.styleObj=l,a.setStyle(l.style),n.traceHash={},s.push(new Promise(function(u){a.once("styledata",u)}))),s=s.concat(gNe.fetchTraceGeoData(e)),Promise.all(s).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};uf.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,n,a,o=this.belowLookup={},s=!1;for(n=0;n<e.length;n++){var l=e[n][0].trace,u=l._module;typeof l.below=="string"?a=l.below:u.getBelow&&(a=u.getBelow(l,this)),a===""&&(s=!0),o["trace-"+l.uid]=a||""}for(n=0;n<i.length;n++){var f=i[n];typeof f.below=="string"?a=f.below:s?a="traces":a="",o["layout-"+n]=a}var c={},h,v;for(h in o)a=o[h],c[a]?c[a].push(h):c[a]=[h];for(a in c){var p=c[a];if(p.length>1)for(n=0;n<p.length;n++)h=p[n],h.indexOf("trace-")===0?(v=h.split("trace-")[1],this.traceHash[v]&&(this.traceHash[v].below=null)):h.indexOf("layout-")===0&&(v=h.split("layout-")[1],this.layerList[v]&&(this.layerList[v].below=null))}};var dNe={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};uf.updateData=function(e){var t=this.traceHash,r,i,n,a,o=e.slice().sort(function(c,h){return dNe[c[0].trace.type]-dNe[h[0].trace.type]});for(n=0;n<o.length;n++){var s=o[n];i=s[0].trace,r=t[i.uid];var l=!1;r&&(r.type===i.type?(r.update(s),l=!0):r.dispose()),!l&&i._module&&(t[i.uid]=i._module.plot(this,s))}var u=Object.keys(t);e:for(n=0;n<u.length;n++){var f=u[n];for(a=0;a<e.length;a++)if(i=e[a][0].trace,f===i.uid)continue e;r=t[f],r.dispose(),delete t[f]}};uf.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(kZ(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};uf.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};uf.rejectOnError=function(e){var t=this.map;function r(){e(new Error(A1.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};uf.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},XHt.setConvert(t.mockAxis,e)};uf.initFx=function(e,t){var r=this,i=r.gd,n=r.map;n.on("moveend",function(s){if(r.map){var l=i._fullLayout;if(s.originalEvent||r.wheeling){var u=l[r.id];vNe.call("_storeDirectGUIEdit",i.layout,l._preGUI,r.getViewEdits(u));var f=r.getView();u._input.center=u.center=f.center,u._input.zoom=u.zoom=f.zoom,u._input.bearing=u.bearing=f.bearing,u._input.pitch=u.pitch=f.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(f))}s.originalEvent&&s.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),l._rehover&&l._rehover()}}),n.on("wheel",function(){r.wheeling=!0}),n.on("mousemove",function(s){var l=r.div.getBoundingClientRect(),u=[s.originalEvent.offsetX,s.originalEvent.offsetY];s.target.getBoundingClientRect=function(){return l},r.xaxis.p2c=function(){return n.unproject(u).lng},r.yaxis.p2c=function(){return n.unproject(u).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&rF.hover(i,s,r.id)},rF.hover(i,s,r.id),i._fullLayout._hoversubplot=r.id});function a(){rF.loneUnhover(t._hoverlayer)}n.on("dragstart",function(){r.dragging=!0,a()}),n.on("zoomstart",a),n.on("mouseout",function(){i._fullLayout._hoversubplot=null});function o(){var s=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(s))}n.on("drag",o),n.on("zoom",o),n.on("dblclick",function(){var s=i._fullLayout[r.id];vNe.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(s));var l=r.viewInitial;n.setCenter(kZ(l.center)),n.setZoom(l.zoom),n.setBearing(l.bearing),n.setPitch(l.pitch);var u=r.getView();s._input.center=s.center=u.center,s._input.zoom=s.zoom=u.zoom,s._input.bearing=s.bearing=u.bearing,s._input.pitch=s.pitch=u.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(u))}),r.clearOutline=function(){$Ht(r.dragOptions),QHt(r.dragOptions.gd)},r.onClickInPanFn=function(s){return function(l){var u=i._fullLayout.clickmode;u.indexOf("select")>-1&&eGt(l.originalEvent,i,[r.xaxis],[r.yaxis],r.id,s),u.indexOf("event")>-1&&rF.click(i,l.originalEvent)}}};uf.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function n(l){var u=t.map.unproject(l);return[u.lng,u.lat]}var a=e.dragmode,o;o=function(l,u){if(u.isRect){var f=l.range={};f[t.id]=[n([u.xmin,u.ymin]),n([u.xmax,u.ymax])]}else{var c=l.lassoPoints={};c[t.id]=u.map(n)}};var s=t.dragOptions;t.dragOptions=EZ.extendDeep(s||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:o},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),KHt(a)||jHt(a)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(l,u,f){JHt(l,u,f,t.dragOptions,a)},ZHt.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};uf.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};uf.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,n;if(r.length!==i.length){for(n=0;n<i.length;n++)i[n].dispose();for(i=this.layerList=[],n=0;n<r.length;n++)i.push(tGt(this,n,r[n]))}else for(n=0;n<r.length;n++)i[n].update(r[n])};uf.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};uf.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};uf.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};uf.getMapLayers=function(){return this.map.getStyle().layers};uf.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),n=0;n<i.length;n++)if(t===i[n].id){r.addLayer(e,t);return}EZ.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};uf.project=function(e){return this.map.project(new SZ.LngLat(e[0],e[1]))};uf.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,n={lon:r,lat:i},a=e.getCanvas(),o=parseInt(a.style.width),s=parseInt(a.style.height);return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([o,0]).toArray(),e.unproject([o,s]).toArray(),e.unproject([0,s]).toArray()]}}};uf.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},n=0;n<r.length;n++){var a=r[n];i[t+"."+a]=e[a]}return i};uf.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function xNe(e,t){var r={};if(EZ.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,A1.styleValuesMapbox.indexOf(e)!==-1)r.style=pNe(e);else if(A1.stylesNonMapbox[e]){r.style=A1.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],n=i?i.tiles:void 0;n&&n[0]&&n[0].slice(-9)==="?api_key="&&(n[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=A1.styleValueDflt,r.style=pNe(A1.styleValueDflt);return r.transition={duration:0,delay:0},r}function pNe(e){return A1.styleUrlPrefix+e+"-"+A1.styleUrlSuffix}function kZ(e){return[e.lon,e.lat]}_Ne.exports=mNe});var ANe=ne((Gyr,TNe)=>{"use strict";var CZ=Wt(),rGt=Kx(),nGt=ch(),wNe=S5();TNe.exports=function(t,r,i){rGt(t,r,i,{type:"mapbox",attributes:wNe,handleDefaults:iGt,partition:"y",accessToken:r._mapboxAccessToken})};function iGt(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var n=r("bounds.west"),a=r("bounds.east"),o=r("bounds.south"),s=r("bounds.north");(n===void 0||a===void 0||o===void 0||s===void 0)&&delete t.bounds,nGt(e,t,{name:"layers",handleItemDefaults:aGt}),t._input=e}function aGt(e,t){function r(l,u){return CZ.coerce(e,t,wNe.layers,l,u)}var i=r("visible");if(i){var n=r("sourcetype"),a=n==="raster"||n==="image";r("source"),r("sourceattribution"),n==="vector"&&r("sourcelayer"),n==="image"&&r("coordinates");var o;a&&(o="raster");var s=r("type",o);a&&s!=="raster"&&(s=t.type="raster",CZ.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),s==="circle"&&r("circle.radius"),s==="line"&&(r("line.width"),r("line.dash")),s==="fill"&&r("fill.outlinecolor"),s==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),CZ.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}});var nF=ne(gd=>{"use strict";var MNe=MZ(),xg=Wt(),LZ=xg.strTranslate,oGt=xg.strScale,sGt=vc().getSubplotCalcData,lGt=kd(),uGt=Ai(),SNe=aa(),fGt=Es(),cGt=bNe(),M1="mapbox",_g=gd.constants=My();gd.name=M1;gd.attr="subplot";gd.idRoot=M1;gd.idRegex=gd.attrRegex=xg.counterRegex(M1);gd.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};gd.layoutAttributes=S5();gd.supplyLayoutDefaults=ANe();gd.plot=function(t){var r=t._fullLayout,i=t.calcdata,n=r._subplots[M1];if(MNe.version!==_g.requiredVersion)throw new Error(_g.wrongVersionErrorMsg);var a=hGt(t,n);MNe.accessToken=a;for(var o=0;o<n.length;o++){var s=n[o],l=sGt(i,M1,s),u=r[s],f=u._subplot;f||(f=new cGt(t,s),r[s]._subplot=f),f.viewInitial||(f.viewInitial={center:xg.extendFlat({},u.center),zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),f.plot(l,r,t._promises)}};gd.clean=function(e,t,r,i){for(var n=i._subplots[M1]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._subplot&&i[o]._subplot.destroy()}};gd.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[M1],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._subplot,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:lGt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"});var f=uGt.select(a._subplot.div),c=f.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!c){var h=t._glimages.append("g");h.attr("transform",LZ(i.l+i.w*o.x[0]+10,i.t+i.h*(1-o.y[0])-31)),h.append("path").attr("d",_g.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),h.append("path").attr("d",_g.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),h.append("path").attr("d",_g.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),h.append("polygon").attr("points",_g.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var v=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),p=t._glimages.append("g"),_=p.append("text");_.text(v).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":v});var T=SNe.bBox(_.node()),g=i.w*(o.x[1]-o.x[0]);if(T.width>g/2){var A=v.split("|").join("<br>");_.text(A).attr("data-unformatted",A).call(fGt.convertToTspans,e),T=SNe.bBox(_.node())}_.attr("transform",LZ(-3,-T.height+8)),p.insert("rect",".static-attribution").attr({x:-T.width-6,y:-T.height-3,width:T.width+6,height:T.height+3,fill:"rgba(255, 255, 255, 0.75)"});var b=1;T.width+6>g&&(b=g/(T.width+6));var w=[i.l+i.w*o.x[1],i.t+i.h*(1-o.y[0])];p.attr("transform",LZ(w[0],w[1])+oGt(b))}};function hGt(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var n=[],a=[],o=!1,s=!1,l=0;l<t.length;l++){var u=r[t[l]],f=u.accesstoken;ENe(u.style)&&(f?xg.pushUnique(n,f):(ENe(u._input.style)&&(xg.error("Uses Mapbox map style, but did not set an access token."),o=!0),s=!0)),f&&xg.pushUnique(a,f)}if(s){var c=o?_g.noAccessTokenErrorMsg:_g.missingStyleErrorMsg;throw xg.error(c),new Error(c)}return n.length?(n.length>1&&xg.warn(_g.multipleTokensErrorMsg),n[0]):(a.length&&xg.log(["Listed mapbox access token(s)",a.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function ENe(e){return typeof e=="string"&&(_g.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}gd.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[M1],i=0;i<r.length;i++){var n=t[r[i]]._subplot;n.updateFx(t)}}});var CNe=ne((Wyr,kNe)=>{"use strict";kNe.exports={attributes:jI(),supplyDefaults:V9e(),colorbar:ph(),formatLabels:mZ(),calc:fY(),plot:tNe(),hoverPoints:eF().hoverPoints,eventData:aNe(),selectPoints:sNe(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:nF(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var PNe=ne((Xyr,LNe)=>{"use strict";LNe.exports=CNe()});var PZ=ne((Zyr,RNe)=>{"use strict";var Sy=YE(),vGt=Ps(),dGt=Ba().hovertemplateAttrs,pGt=es(),S1=oa().extendFlat;RNe.exports=S1({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:S1({},Sy.featureidkey,{}),below:{valType:"string",editType:"plot"},text:Sy.text,hovertext:Sy.hovertext,marker:{line:{color:S1({},Sy.marker.line.color,{editType:"plot"}),width:S1({},Sy.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:S1({},Sy.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:S1({},Sy.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:S1({},Sy.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:Sy.hoverinfo,hovertemplate:dGt({},{keys:["properties"]}),showlegend:S1({},pGt.showlegend,{dflt:!1})},vGt("",{cLetter:"z",editTypeOverride:"calc"}))});var INe=ne((jyr,DNe)=>{"use strict";var L5=Wt(),gGt=Kf(),yGt=PZ();DNe.exports=function(t,r,i,n){function a(f,c){return L5.coerce(t,r,yGt,f,c)}var o=a("locations"),s=a("z"),l=a("geojson");if(!L5.isArrayOrTypedArray(o)||!o.length||!L5.isArrayOrTypedArray(s)||!s.length||!(typeof l=="string"&&l!==""||L5.isPlainObject(l))){r.visible=!1;return}a("featureidkey"),r._length=Math.min(o.length,s.length),a("below"),a("text"),a("hovertext"),a("hovertemplate");var u=a("marker.line.width");u&&a("marker.line.color"),a("marker.opacity"),gGt(t,r,n,a,{prefix:"",cLetter:"z"}),L5.coerceSelectionMarkerOpacity(r,a)}});var RZ=ne((Kyr,zNe)=>{"use strict";var mGt=la(),Ey=Wt(),xGt=ul(),_Gt=aa(),bGt=OE().makeBlank,FNe=B3();function wGt(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},n={layout:{visibility:"none"},paint:{}},a=t._opts={fill:i,line:n,geojson:bGt()};if(!r)return a;var o=FNe.extractTraceFeature(e);if(!o)return a;var s=xGt.makeColorScaleFuncFromTrace(t),l=t.marker,u=l.line||{},f;Ey.isArrayOrTypedArray(l.opacity)&&(f=function(A){var b=A.mo;return mGt(b)?+Ey.constrain(b,0,1):0});var c;Ey.isArrayOrTypedArray(u.color)&&(c=function(A){return A.mlc});var h;Ey.isArrayOrTypedArray(u.width)&&(h=function(A){return A.mlw});for(var v=0;v<e.length;v++){var p=e[v],_=p.fOut;if(_){var T=_.properties;T.fc=s(p.z),f&&(T.mo=f(p)),c&&(T.mlc=c(p)),h&&(T.mlw=h(p)),p.ct=T.ct,p._polygons=FNe.feature2polygons(_)}}var g=f?{type:"identity",property:"mo"}:l.opacity;return Ey.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":g}),Ey.extendFlat(n.paint,{"line-color":c?{type:"identity",property:"mlc"}:u.color,"line-width":h?{type:"identity",property:"mlw"}:u.width,"line-opacity":g}),i.layout.visibility="visible",n.layout.visibility="visible",a.geojson={type:"FeatureCollection",features:o},qNe(e),a}function qNe(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var n=_Gt.makeSelectedPointStyleFns(t),a=0;a<e.length;a++){var o=e[a];o.fOut&&(o.fOut.properties.mo2=n.selectedOpacityFn(o))}i={type:"identity",property:"mo2"}}else i=Ey.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Ey.extendFlat(r.fill.paint,{"fill-opacity":i}),Ey.extendFlat(r.line.paint,{"line-opacity":i}),r}zNe.exports={convert:wGt,convertOnSelect:qNe}});var VNe=ne((Jyr,UNe)=>{"use strict";var BNe=RZ().convert,TGt=RZ().convertOnSelect,ONe=My().traceLayerPrefix;function NNe(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",ONe+t+"-fill"],["line",ONe+t+"-line"]],this.below=null}var dT=NNe.prototype;dT.update=function(e){this._update(BNe(e)),e[0].trace._glTrace=this};dT.updateOnSelect=function(e){this._update(TGt(e))};dT._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var n=0;n<r.length;n++){var a=r[n],o=a[0],s=a[1],l=e[o];t.setOptions(s,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&t.setOptions(s,"setPaintProperty",l.paint)}};dT._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};dT._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};dT.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};UNe.exports=function(t,r){var i=r[0].trace,n=new NNe(t,i.uid),a=n.sourceId,o=BNe(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),r[0].trace._glTrace=n,n}});var GNe=ne((Qyr,HNe)=>{"use strict";HNe.exports={attributes:PZ(),supplyDefaults:INe(),colorbar:jx(),calc:JY(),plot:VNe(),hoverPoints:eW(),eventData:tW(),selectPoints:rW(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var n=r[i].id;if(typeof n=="string"&&n.indexOf("water")===0){for(var a=i+1;a<r.length;a++)if(n=r[a].id,typeof n=="string"&&n.indexOf("plotly-")===-1)return n}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:nF(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var WNe=ne(($yr,YNe)=>{"use strict";YNe.exports=GNe()});var IZ=ne((emr,ZNe)=>{"use strict";var AGt=Ps(),MGt=Ba().hovertemplateAttrs,XNe=es(),iF=jI(),DZ=oa().extendFlat;ZNe.exports=DZ({lon:iF.lon,lat:iF.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:iF.text,hovertext:iF.hovertext,hoverinfo:DZ({},XNe.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:MGt(),showlegend:DZ({},XNe.showlegend,{dflt:!1})},AGt("",{cLetter:"z",editTypeOverride:"calc"}))});var KNe=ne((tmr,jNe)=>{"use strict";var SGt=Wt(),EGt=Kf(),kGt=IZ();jNe.exports=function(t,r,i,n){function a(u,f){return SGt.coerce(t,r,kGt,u,f)}var o=a("lon")||[],s=a("lat")||[],l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),EGt(t,r,n,a,{prefix:"",cLetter:"z"})}});var $Ne=ne((rmr,QNe)=>{"use strict";var FZ=la(),CGt=Wt().isArrayOrTypedArray,qZ=$a().BADNUM,LGt=gv(),JNe=Wt()._;QNe.exports=function(t,r){for(var i=r._length,n=new Array(i),a=r.z,o=CGt(a)&&a.length,s=0;s<i;s++){var l=n[s]={},u=r.lon[s],f=r.lat[s];if(l.lonlat=FZ(u)&&FZ(f)?[+u,+f]:[qZ,qZ],o){var c=a[s];l.z=FZ(c)?c:qZ}}return LGt(t,r,{vals:o?a:[0,1],containerStr:"",cLetter:"z"}),i&&(n[0].t={labels:{lat:JNe(t,"lat:")+" ",lon:JNe(t,"lon:")+" "}}),n}});var iUe=ne((nmr,nUe)=>{"use strict";var PGt=la(),zZ=Wt(),eUe=_i(),tUe=ul(),rUe=$a().BADNUM,RGt=OE().makeBlank;nUe.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,n={layout:{visibility:"none"},paint:{}},a=r._opts={heatmap:n,geojson:RGt()};if(!i)return a;var o=[],s,l=r.z,u=r.radius,f=zZ.isArrayOrTypedArray(l)&&l.length,c=zZ.isArrayOrTypedArray(u);for(s=0;s<t.length;s++){var h=t[s],v=h.lonlat;if(v[0]!==rUe){var p={};if(f){var _=h.z;p.z=_!==rUe?_:0}c&&(p.r=PGt(u[s])&&u[s]>0?+u[s]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:p})}}var T=tUe.extractOpts(r),g=T.reversescale?tUe.flipScale(T.colorscale):T.colorscale,A=g[0][1],b=eUe.opacity(A)<1?A:eUe.addOpacity(A,0),w=["interpolate",["linear"],["heatmap-density"],0,b];for(s=1;s<g.length;s++)w.push(g[s][0],g[s][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return zZ.extendFlat(a.heatmap.paint,{"heatmap-weight":f?k:1/(T.max-T.min),"heatmap-color":w,"heatmap-radius":c?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),a.geojson={type:"FeatureCollection",features:o},a.heatmap.layout.visibility="visible",a}});var lUe=ne((imr,sUe)=>{"use strict";var aUe=iUe(),DGt=My().traceLayerPrefix;function oUe(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",DGt+t+"-heatmap"]],this.below=null}var aF=oUe.prototype;aF.update=function(e){var t=this.subplot,r=this.layerList,i=aUe(e),n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var a=0;a<r.length;a++){var o=r[a],s=o[0],l=o[1],u=i[s];t.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&t.setOptions(l,"setPaintProperty",u.paint)}};aF._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};aF._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};aF.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};sUe.exports=function(t,r){var i=r[0].trace,n=new oUe(t,i.uid),a=n.sourceId,o=aUe(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),n}});var fUe=ne((amr,uUe)=>{"use strict";var IGt=Xi(),FGt=eF().hoverPoints,qGt=eF().getExtraText;uUe.exports=function(t,r,i){var n=FGt(t,r,i);if(n){var a=n[0],o=a.cd,s=o[0].trace,l=o[a.index];if(delete a.color,"z"in l){var u=a.subplot.mockAxis;a.z=l.z,a.zLabel=IGt.tickText(u,u.c2l(l.z),"hover").text}return a.extraText=qGt(s,l,o[0].t.labels),[a]}}});var hUe=ne((omr,cUe)=>{"use strict";cUe.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var dUe=ne((smr,vUe)=>{"use strict";vUe.exports={attributes:IZ(),supplyDefaults:KNe(),colorbar:jx(),formatLabels:mZ(),calc:$Ne(),plot:lUe(),hoverPoints:fUe(),eventData:hUe(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var n=r[i],a=n.id;if(n.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:nF(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var gUe=ne((lmr,pUe)=>{"use strict";pUe.exports=dUe()});var BZ=ne((umr,_Ue)=>{"use strict";var zGt=ll(),OGt=es(),yUe=Ku(),OZ=Kb(),BGt=fl().attributes,mUe=Ba().hovertemplateAttrs,NGt=Ps(),UGt=So().templatedArray,VGt=kl().descriptionOnlyNumbers,xUe=oa().extendFlat,HGt=Xs().overrideAll,GGt=_Ue.exports=HGt({hoverinfo:xUe({},OGt.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:OZ.hoverlabel,domain:BGt({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:VGt("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:zGt({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:yUe.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:OZ.hoverlabel,hovertemplate:mUe({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:yUe.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:OZ.hoverlabel,hovertemplate:mUe({},{keys:["value","label"]}),colorscales:UGt("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:xUe(NGt().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");GGt.transforms=void 0});var MUe=ne((fmr,AUe)=>{"use strict";var J_=Wt(),oF=BZ(),YGt=_i(),bUe=Xf(),WGt=fl().defaults,wUe=BA(),TUe=So(),XGt=ch();AUe.exports=function(t,r,i,n){function a(w,k){return J_.coerce(t,r,oF,w,k)}var o=J_.extendDeep(n.hoverlabel,t.hoverlabel),s=t.node,l=TUe.newContainer(r,"node");function u(w,k){return J_.coerce(s,l,oF.node,w,k)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",t.hoverinfo),wUe(s,l,u,o),u("hovertemplate"),u("align");var f=n.colorway,c=function(w){return f[w%f.length]};u("color",l.label.map(function(w,k){return YGt.addOpacity(c(k),.8)})),u("customdata");var h=t.link||{},v=TUe.newContainer(r,"link");function p(w,k){return J_.coerce(h,v,oF.link,w,k)}p("label"),p("arrowlen"),p("source"),p("target"),p("value"),p("line.color"),p("line.width"),p("hoverinfo",t.hoverinfo),wUe(h,v,p,o),p("hovertemplate");var _=bUe(n.paper_bgcolor).getLuminance()<.333,T=_?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",g=p("color",T);function A(w){var k=bUe(w);if(!k.isValid())return w;var x=k.getAlpha();return x<=.8?k.setAlpha(x+.2):k=_?k.brighten():k.darken(),k.toRgbString()}p("hovercolor",Array.isArray(g)?g.map(A):A(g)),p("customdata"),XGt(h,v,{name:"colorscales",handleItemDefaults:ZGt}),WGt(r,n,a),a("orientation"),a("valueformat"),a("valuesuffix");var b;l.x.length&&l.y.length&&(b="freeform"),a("arrangement",b),J_.coerceFont(a,"textfont",J_.extendFlat({},n.font)),r._length=null};function ZGt(e,t){function r(i,n){return J_.coerce(e,t,oF.link.colorscales,i,n)}r("label"),r("cmin"),r("cmax"),r("colorscale")}});var NZ=ne((cmr,SUe)=>{"use strict";SUe.exports=jGt;function jGt(e){for(var t=e.length,r=new Array(t),i=new Array(t),n=new Array(t),a=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)r[l]=-1,i[l]=0,n[l]=!1,a[l]=0,o[l]=-1,s[l]=[];var u=0,f=[],c=[];function h(T){var g=[T],A=[T];for(r[T]=i[T]=u,n[T]=!0,u+=1;A.length>0;){T=A[A.length-1];var b=e[T];if(a[T]<b.length){for(var w=a[T];w<b.length;++w){var k=b[w];if(r[k]<0){r[k]=i[k]=u,n[k]=!0,u+=1,g.push(k),A.push(k);break}else n[k]&&(i[T]=Math.min(i[T],i[k])|0);o[k]>=0&&s[T].push(o[k])}a[T]=w}else{if(i[T]===r[T]){for(var x=[],E=[],M=0,w=g.length-1;w>=0;--w){var d=g[w];if(n[d]=!1,x.push(d),E.push(s[d]),M+=s[d].length,o[d]=f.length,d===T){g.length=w;break}}f.push(x);for(var C=new Array(M),w=0;w<E.length;w++)for(var S=0;S<E[w].length;S++)C[--M]=E[w][S];c.push(C)}A.pop()}}}for(var l=0;l<t;++l)r[l]<0&&h(l);for(var v,l=0;l<c.length;l++){var p=c[l];if(p.length!==0){p.sort(function(g,A){return g-A}),v=[p[0]];for(var _=1;_<p.length;_++)p[_]!==p[_-1]&&v.push(p[_]);c[l]=v}}return{components:f,adjacencyList:c}}});var LUe=ne((hmr,CUe)=>{"use strict";var KGt=NZ(),pT=Wt(),JGt=gg().wrap,P5=pT.isArrayOrTypedArray,EUe=pT.isIndex,kUe=ul();function QGt(e){var t=e.node,r=e.link,i=[],n=P5(r.color),a=P5(r.hovercolor),o=P5(r.customdata),s={},l={},u=r.colorscales.length,f;for(f=0;f<u;f++){var c=r.colorscales[f],h=kUe.extractScale(c,{cLetter:"c"}),v=kUe.makeColorScaleFunc(h);l[c.label]=v}var p=0;for(f=0;f<r.value.length;f++)r.source[f]>p&&(p=r.source[f]),r.target[f]>p&&(p=r.target[f]);var _=p+1;e.node._count=_;var T,g=e.node.groups,A={};for(f=0;f<g.length;f++){var b=g[f];for(T=0;T<b.length;T++){var w=b[T],k=_+f;A.hasOwnProperty(w)?pT.warn("Node "+w+" is already part of a group."):A[w]=k}}var x={source:[],target:[]};for(f=0;f<r.value.length;f++){var E=r.value[f],M=r.source[f],d=r.target[f];if(E>0&&EUe(M,_)&&EUe(d,_)&&!(A.hasOwnProperty(M)&&A.hasOwnProperty(d)&&A[M]===A[d])){A.hasOwnProperty(d)&&(d=A[d]),A.hasOwnProperty(M)&&(M=A[M]),M=+M,d=+d,s[M]=s[d]=!0;var C="";r.label&&r.label[f]&&(C=r.label[f]);var S=null;C&&l.hasOwnProperty(C)&&(S=l[C]),i.push({pointNumber:f,label:C,color:n?r.color[f]:r.color,hovercolor:a?r.hovercolor[f]:r.hovercolor,customdata:o?r.customdata[f]:r.customdata,concentrationscale:S,source:M,target:d,value:+E}),x.source.push(M),x.target.push(d)}}var P=_+g.length,D=P5(t.color),z=P5(t.customdata),O=[];for(f=0;f<P;f++)if(s[f]){var V=t.label[f];O.push({group:f>_-1,childrenNodes:[],pointNumber:f,label:V,color:D?t.color[f]:t.color,customdata:z?t.customdata[f]:t.customdata})}var B=!1;return $Gt(P,x.source,x.target)&&(B=!0),{circular:B,links:i,nodes:O,groups:g,groupLookup:A}}function $Gt(e,t,r){for(var i=pT.init2dArray(e,0),n=0;n<Math.min(t.length,r.length);n++)if(pT.isIndex(t[n],e)&&pT.isIndex(r[n],e)){if(t[n]===r[n])return!0;i[t[n]].push(r[n])}var a=KGt(i);return a.components.some(function(o){return o.length>1})}CUe.exports=function(t,r){var i=QGt(r);return JGt({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}});var RUe=ne((sF,PUe)=>{(function(e,t){typeof sF=="object"&&typeof PUe!="undefined"?t(sF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(sF,function(e){"use strict";function t(E){var M=+this._x.call(null,E),d=+this._y.call(null,E);return r(this.cover(M,d),M,d,E)}function r(E,M,d,C){if(isNaN(M)||isNaN(d))return E;var S,P=E._root,D={data:C},z=E._x0,O=E._y0,V=E._x1,B=E._y1,F,N,Z,J,re,le,fe,K;if(!P)return E._root=D,E;for(;P.length;)if((re=M>=(F=(z+V)/2))?z=F:V=F,(le=d>=(N=(O+B)/2))?O=N:B=N,S=P,!(P=P[fe=le<<1|re]))return S[fe]=D,E;if(Z=+E._x.call(null,P.data),J=+E._y.call(null,P.data),M===Z&&d===J)return D.next=P,S?S[fe]=D:E._root=D,E;do S=S?S[fe]=new Array(4):E._root=new Array(4),(re=M>=(F=(z+V)/2))?z=F:V=F,(le=d>=(N=(O+B)/2))?O=N:B=N;while((fe=le<<1|re)===(K=(J>=N)<<1|Z>=F));return S[K]=P,S[fe]=D,E}function i(E){var M,d,C=E.length,S,P,D=new Array(C),z=new Array(C),O=1/0,V=1/0,B=-1/0,F=-1/0;for(d=0;d<C;++d)isNaN(S=+this._x.call(null,M=E[d]))||isNaN(P=+this._y.call(null,M))||(D[d]=S,z[d]=P,S<O&&(O=S),S>B&&(B=S),P<V&&(V=P),P>F&&(F=P));if(O>B||V>F)return this;for(this.cover(O,V).cover(B,F),d=0;d<C;++d)r(this,D[d],z[d],E[d]);return this}function n(E,M){if(isNaN(E=+E)||isNaN(M=+M))return this;var d=this._x0,C=this._y0,S=this._x1,P=this._y1;if(isNaN(d))S=(d=Math.floor(E))+1,P=(C=Math.floor(M))+1;else{for(var D=S-d,z=this._root,O,V;d>E||E>=S||C>M||M>=P;)switch(V=(M<C)<<1|E<d,O=new Array(4),O[V]=z,z=O,D*=2,V){case 0:S=d+D,P=C+D;break;case 1:d=S-D,P=C+D;break;case 2:S=d+D,C=P-D;break;case 3:d=S-D,C=P-D;break}this._root&&this._root.length&&(this._root=z)}return this._x0=d,this._y0=C,this._x1=S,this._y1=P,this}function a(){var E=[];return this.visit(function(M){if(!M.length)do E.push(M.data);while(M=M.next)}),E}function o(E){return arguments.length?this.cover(+E[0][0],+E[0][1]).cover(+E[1][0],+E[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(E,M,d,C,S){this.node=E,this.x0=M,this.y0=d,this.x1=C,this.y1=S}function l(E,M,d){var C,S=this._x0,P=this._y0,D,z,O,V,B=this._x1,F=this._y1,N=[],Z=this._root,J,re;for(Z&&N.push(new s(Z,S,P,B,F)),d==null?d=1/0:(S=E-d,P=M-d,B=E+d,F=M+d,d*=d);J=N.pop();)if(!(!(Z=J.node)||(D=J.x0)>B||(z=J.y0)>F||(O=J.x1)<S||(V=J.y1)<P))if(Z.length){var le=(D+O)/2,fe=(z+V)/2;N.push(new s(Z[3],le,fe,O,V),new s(Z[2],D,fe,le,V),new s(Z[1],le,z,O,fe),new s(Z[0],D,z,le,fe)),(re=(M>=fe)<<1|E>=le)&&(J=N[N.length-1],N[N.length-1]=N[N.length-1-re],N[N.length-1-re]=J)}else{var K=E-+this._x.call(null,Z.data),X=M-+this._y.call(null,Z.data),ae=K*K+X*X;if(ae<d){var oe=Math.sqrt(d=ae);S=E-oe,P=M-oe,B=E+oe,F=M+oe,C=Z.data}}return C}function u(E){if(isNaN(B=+this._x.call(null,E))||isNaN(F=+this._y.call(null,E)))return this;var M,d=this._root,C,S,P,D=this._x0,z=this._y0,O=this._x1,V=this._y1,B,F,N,Z,J,re,le,fe;if(!d)return this;if(d.length)for(;;){if((J=B>=(N=(D+O)/2))?D=N:O=N,(re=F>=(Z=(z+V)/2))?z=Z:V=Z,M=d,!(d=d[le=re<<1|J]))return this;if(!d.length)break;(M[le+1&3]||M[le+2&3]||M[le+3&3])&&(C=M,fe=le)}for(;d.data!==E;)if(S=d,!(d=d.next))return this;return(P=d.next)&&delete d.next,S?(P?S.next=P:delete S.next,this):M?(P?M[le]=P:delete M[le],(d=M[0]||M[1]||M[2]||M[3])&&d===(M[3]||M[2]||M[1]||M[0])&&!d.length&&(C?C[fe]=d:this._root=d),this):(this._root=P,this)}function f(E){for(var M=0,d=E.length;M<d;++M)this.remove(E[M]);return this}function c(){return this._root}function h(){var E=0;return this.visit(function(M){if(!M.length)do++E;while(M=M.next)}),E}function v(E){var M=[],d,C=this._root,S,P,D,z,O;for(C&&M.push(new s(C,this._x0,this._y0,this._x1,this._y1));d=M.pop();)if(!E(C=d.node,P=d.x0,D=d.y0,z=d.x1,O=d.y1)&&C.length){var V=(P+z)/2,B=(D+O)/2;(S=C[3])&&M.push(new s(S,V,B,z,O)),(S=C[2])&&M.push(new s(S,P,B,V,O)),(S=C[1])&&M.push(new s(S,V,D,z,B)),(S=C[0])&&M.push(new s(S,P,D,V,B))}return this}function p(E){var M=[],d=[],C;for(this._root&&M.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));C=M.pop();){var S=C.node;if(S.length){var P,D=C.x0,z=C.y0,O=C.x1,V=C.y1,B=(D+O)/2,F=(z+V)/2;(P=S[0])&&M.push(new s(P,D,z,B,F)),(P=S[1])&&M.push(new s(P,B,z,O,F)),(P=S[2])&&M.push(new s(P,D,F,B,V)),(P=S[3])&&M.push(new s(P,B,F,O,V))}d.push(C)}for(;C=d.pop();)E(C.node,C.x0,C.y0,C.x1,C.y1);return this}function _(E){return E[0]}function T(E){return arguments.length?(this._x=E,this):this._x}function g(E){return E[1]}function A(E){return arguments.length?(this._y=E,this):this._y}function b(E,M,d){var C=new w(M==null?_:M,d==null?g:d,NaN,NaN,NaN,NaN);return E==null?C:C.addAll(E)}function w(E,M,d,C,S,P){this._x=E,this._y=M,this._x0=d,this._y0=C,this._x1=S,this._y1=P,this._root=void 0}function k(E){for(var M={data:E.data},d=M;E=E.next;)d=d.next={data:E.data};return M}var x=b.prototype=w.prototype;x.copy=function(){var E=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),M=this._root,d,C;if(!M)return E;if(!M.length)return E._root=k(M),E;for(d=[{source:M,target:E._root=new Array(4)}];M=d.pop();)for(var S=0;S<4;++S)(C=M.source[S])&&(C.length?d.push({source:C,target:M.target[S]=new Array(4)}):M.target[S]=k(C));return E},x.add=t,x.addAll=i,x.cover=n,x.data=a,x.extent=o,x.find=l,x.remove=u,x.removeAll=f,x.root=c,x.size=h,x.visit=v,x.visitAfter=p,x.x=T,x.y=A,e.quadtree=b,Object.defineProperty(e,"__esModule",{value:!0})})});var uF=ne((lF,DUe)=>{(function(e,t){typeof lF=="object"&&typeof DUe!="undefined"?t(lF):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(lF,function(e){"use strict";var t="$";function r(){}r.prototype=i.prototype={constructor:r,has:function(_){return t+_ in this},get:function(_){return this[t+_]},set:function(_,T){return this[t+_]=T,this},remove:function(_){var T=t+_;return T in this&&delete this[T]},clear:function(){for(var _ in this)_[0]===t&&delete this[_]},keys:function(){var _=[];for(var T in this)T[0]===t&&_.push(T.slice(1));return _},values:function(){var _=[];for(var T in this)T[0]===t&&_.push(this[T]);return _},entries:function(){var _=[];for(var T in this)T[0]===t&&_.push({key:T.slice(1),value:this[T]});return _},size:function(){var _=0;for(var T in this)T[0]===t&&++_;return _},empty:function(){for(var _ in this)if(_[0]===t)return!1;return!0},each:function(_){for(var T in this)T[0]===t&&_(this[T],T.slice(1),this)}};function i(_,T){var g=new r;if(_ instanceof r)_.each(function(x,E){g.set(E,x)});else if(Array.isArray(_)){var A=-1,b=_.length,w;if(T==null)for(;++A<b;)g.set(A,_[A]);else for(;++A<b;)g.set(T(w=_[A],A,_),w)}else if(_)for(var k in _)g.set(k,_[k]);return g}function n(){var _=[],T=[],g,A,b;function w(x,E,M,d){if(E>=_.length)return g!=null&&x.sort(g),A!=null?A(x):x;for(var C=-1,S=x.length,P=_[E++],D,z,O=i(),V,B=M();++C<S;)(V=O.get(D=P(z=x[C])+""))?V.push(z):O.set(D,[z]);return O.each(function(F,N){d(B,N,w(F,E,M,d))}),B}function k(x,E){if(++E>_.length)return x;var M,d=T[E-1];return A!=null&&E>=_.length?M=x.entries():(M=[],x.each(function(C,S){M.push({key:S,values:k(C,E)})})),d!=null?M.sort(function(C,S){return d(C.key,S.key)}):M}return b={object:function(x){return w(x,0,a,o)},map:function(x){return w(x,0,s,l)},entries:function(x){return k(w(x,0,s,l),0)},key:function(x){return _.push(x),b},sortKeys:function(x){return T[_.length-1]=x,b},sortValues:function(x){return g=x,b},rollup:function(x){return A=x,b}}}function a(){return{}}function o(_,T,g){_[T]=g}function s(){return i()}function l(_,T,g){_.set(T,g)}function u(){}var f=i.prototype;u.prototype=c.prototype={constructor:u,has:f.has,add:function(_){return _+="",this[t+_]=_,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};function c(_,T){var g=new u;if(_ instanceof u)_.each(function(w){g.add(w)});else if(_){var A=-1,b=_.length;if(T==null)for(;++A<b;)g.add(_[A]);else for(;++A<b;)g.add(T(_[A],A,_))}return g}function h(_){var T=[];for(var g in _)T.push(g);return T}function v(_){var T=[];for(var g in _)T.push(_[g]);return T}function p(_){var T=[];for(var g in _)T.push({key:g,value:_[g]});return T}e.nest=n,e.set=c,e.map=i,e.keys=h,e.values=v,e.entries=p,Object.defineProperty(e,"__esModule",{value:!0})})});var FUe=ne((fF,IUe)=>{(function(e,t){typeof fF=="object"&&typeof IUe!="undefined"?t(fF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(fF,function(e){"use strict";var t={value:function(){}};function r(){for(var s=0,l=arguments.length,u={},f;s<l;++s){if(!(f=arguments[s]+"")||f in u||/[\s.]/.test(f))throw new Error("illegal type: "+f);u[f]=[]}return new i(u)}function i(s){this._=s}function n(s,l){return s.trim().split(/^|\s+/).map(function(u){var f="",c=u.indexOf(".");if(c>=0&&(f=u.slice(c+1),u=u.slice(0,c)),u&&!l.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:f}})}i.prototype=r.prototype={constructor:i,on:function(s,l){var u=this._,f=n(s+"",u),c,h=-1,v=f.length;if(arguments.length<2){for(;++h<v;)if((c=(s=f[h]).type)&&(c=a(u[c],s.name)))return c;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++h<v;)if(c=(s=f[h]).type)u[c]=o(u[c],s.name,l);else if(l==null)for(c in u)u[c]=o(u[c],s.name,null);return this},copy:function(){var s={},l=this._;for(var u in l)s[u]=l[u].slice();return new i(s)},call:function(s,l){if((c=arguments.length-2)>0)for(var u=new Array(c),f=0,c,h;f<c;++f)u[f]=arguments[f+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(h=this._[s],f=0,c=h.length;f<c;++f)h[f].value.apply(l,u)},apply:function(s,l,u){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var f=this._[s],c=0,h=f.length;c<h;++c)f[c].value.apply(l,u)}};function a(s,l){for(var u=0,f=s.length,c;u<f;++u)if((c=s[u]).name===l)return c.value}function o(s,l,u){for(var f=0,c=s.length;f<c;++f)if(s[f].name===l){s[f]=t,s=s.slice(0,f).concat(s.slice(f+1));break}return u!=null&&s.push({name:l,value:u}),s}e.dispatch=r,Object.defineProperty(e,"__esModule",{value:!0})})});var zUe=ne((cF,qUe)=>{(function(e,t){typeof cF=="object"&&typeof qUe!="undefined"?t(cF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(cF,function(e){"use strict";var t=0,r=0,i=0,n=1e3,a,o,s=0,l=0,u=0,f=typeof performance=="object"&&performance.now?performance:Date,c=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(E){setTimeout(E,17)};function h(){return l||(c(v),l=f.now()+u)}function v(){l=0}function p(){this._call=this._time=this._next=null}p.prototype=_.prototype={constructor:p,restart:function(E,M,d){if(typeof E!="function")throw new TypeError("callback is not a function");d=(d==null?h():+d)+(M==null?0:+M),!this._next&&o!==this&&(o?o._next=this:a=this,o=this),this._call=E,this._time=d,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};function _(E,M,d){var C=new p;return C.restart(E,M,d),C}function T(){h(),++t;for(var E=a,M;E;)(M=l-E._time)>=0&&E._call.call(null,M),E=E._next;--t}function g(){l=(s=f.now())+u,t=r=0;try{T()}finally{t=0,b(),l=0}}function A(){var E=f.now(),M=E-s;M>n&&(u-=M,s=E)}function b(){for(var E,M=a,d,C=1/0;M;)M._call?(C>M._time&&(C=M._time),E=M,M=M._next):(d=M._next,M._next=null,M=E?E._next=d:a=d);o=E,w(C)}function w(E){if(!t){r&&(r=clearTimeout(r));var M=E-l;M>24?(E<1/0&&(r=setTimeout(g,E-f.now()-u)),i&&(i=clearInterval(i))):(i||(s=f.now(),i=setInterval(A,n)),t=1,c(g))}}function k(E,M,d){var C=new p;return M=M==null?0:+M,C.restart(function(S){C.stop(),E(S+M)},M,d),C}function x(E,M,d){var C=new p,S=M;return M==null?(C.restart(E,M,d),C):(M=+M,d=d==null?h():+d,C.restart(function P(D){D+=S,C.restart(P,S+=M,d),E(D)},M,d),C)}e.interval=x,e.now=h,e.timeout=k,e.timer=_,e.timerFlush=T,Object.defineProperty(e,"__esModule",{value:!0})})});var BUe=ne((hF,OUe)=>{(function(e,t){typeof hF=="object"&&typeof OUe!="undefined"?t(hF,RUe(),uF(),FUe(),zUe()):typeof define=="function"&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)})(hF,function(e,t,r,i,n){"use strict";function a(E,M){var d;E==null&&(E=0),M==null&&(M=0);function C(){var S,P=d.length,D,z=0,O=0;for(S=0;S<P;++S)D=d[S],z+=D.x,O+=D.y;for(z=z/P-E,O=O/P-M,S=0;S<P;++S)D=d[S],D.x-=z,D.y-=O}return C.initialize=function(S){d=S},C.x=function(S){return arguments.length?(E=+S,C):E},C.y=function(S){return arguments.length?(M=+S,C):M},C}function o(E){return function(){return E}}function s(){return(Math.random()-.5)*1e-6}function l(E){return E.x+E.vx}function u(E){return E.y+E.vy}function f(E){var M,d,C=1,S=1;typeof E!="function"&&(E=o(E==null?1:+E));function P(){for(var O,V=M.length,B,F,N,Z,J,re,le=0;le<S;++le)for(B=t.quadtree(M,l,u).visitAfter(D),O=0;O<V;++O)F=M[O],J=d[F.index],re=J*J,N=F.x+F.vx,Z=F.y+F.vy,B.visit(fe);function fe(K,X,ae,oe,_e){var be=K.data,he=K.r,ie=J+he;if(be){if(be.index>F.index){var ye=N-be.x-be.vx,ue=Z-be.y-be.vy,Ae=ye*ye+ue*ue;Ae<ie*ie&&(ye===0&&(ye=s(),Ae+=ye*ye),ue===0&&(ue=s(),Ae+=ue*ue),Ae=(ie-(Ae=Math.sqrt(Ae)))/Ae*C,F.vx+=(ye*=Ae)*(ie=(he*=he)/(re+he)),F.vy+=(ue*=Ae)*ie,be.vx-=ye*(ie=1-ie),be.vy-=ue*ie)}return}return X>N+ie||oe<N-ie||ae>Z+ie||_e<Z-ie}}function D(O){if(O.data)return O.r=d[O.data.index];for(var V=O.r=0;V<4;++V)O[V]&&O[V].r>O.r&&(O.r=O[V].r)}function z(){if(M){var O,V=M.length,B;for(d=new Array(V),O=0;O<V;++O)B=M[O],d[B.index]=+E(B,O,M)}}return P.initialize=function(O){M=O,z()},P.iterations=function(O){return arguments.length?(S=+O,P):S},P.strength=function(O){return arguments.length?(C=+O,P):C},P.radius=function(O){return arguments.length?(E=typeof O=="function"?O:o(+O),z(),P):E},P}function c(E){return E.index}function h(E,M){var d=E.get(M);if(!d)throw new Error("missing: "+M);return d}function v(E){var M=c,d=B,C,S=o(30),P,D,z,O,V=1;E==null&&(E=[]);function B(re){return 1/Math.min(z[re.source.index],z[re.target.index])}function F(re){for(var le=0,fe=E.length;le<V;++le)for(var K=0,X,ae,oe,_e,be,he,ie;K<fe;++K)X=E[K],ae=X.source,oe=X.target,_e=oe.x+oe.vx-ae.x-ae.vx||s(),be=oe.y+oe.vy-ae.y-ae.vy||s(),he=Math.sqrt(_e*_e+be*be),he=(he-P[K])/he*re*C[K],_e*=he,be*=he,oe.vx-=_e*(ie=O[K]),oe.vy-=be*ie,ae.vx+=_e*(ie=1-ie),ae.vy+=be*ie}function N(){if(D){var re,le=D.length,fe=E.length,K=r.map(D,M),X;for(re=0,z=new Array(le);re<fe;++re)X=E[re],X.index=re,typeof X.source!="object"&&(X.source=h(K,X.source)),typeof X.target!="object"&&(X.target=h(K,X.target)),z[X.source.index]=(z[X.source.index]||0)+1,z[X.target.index]=(z[X.target.index]||0)+1;for(re=0,O=new Array(fe);re<fe;++re)X=E[re],O[re]=z[X.source.index]/(z[X.source.index]+z[X.target.index]);C=new Array(fe),Z(),P=new Array(fe),J()}}function Z(){if(D)for(var re=0,le=E.length;re<le;++re)C[re]=+d(E[re],re,E)}function J(){if(D)for(var re=0,le=E.length;re<le;++re)P[re]=+S(E[re],re,E)}return F.initialize=function(re){D=re,N()},F.links=function(re){return arguments.length?(E=re,N(),F):E},F.id=function(re){return arguments.length?(M=re,F):M},F.iterations=function(re){return arguments.length?(V=+re,F):V},F.strength=function(re){return arguments.length?(d=typeof re=="function"?re:o(+re),Z(),F):d},F.distance=function(re){return arguments.length?(S=typeof re=="function"?re:o(+re),J(),F):S},F}function p(E){return E.x}function _(E){return E.y}var T=10,g=Math.PI*(3-Math.sqrt(5));function A(E){var M,d=1,C=.001,S=1-Math.pow(C,1/300),P=0,D=.6,z=r.map(),O=n.timer(B),V=i.dispatch("tick","end");E==null&&(E=[]);function B(){F(),V.call("tick",M),d<C&&(O.stop(),V.call("end",M))}function F(J){var re,le=E.length,fe;J===void 0&&(J=1);for(var K=0;K<J;++K)for(d+=(P-d)*S,z.each(function(X){X(d)}),re=0;re<le;++re)fe=E[re],fe.fx==null?fe.x+=fe.vx*=D:(fe.x=fe.fx,fe.vx=0),fe.fy==null?fe.y+=fe.vy*=D:(fe.y=fe.fy,fe.vy=0);return M}function N(){for(var J=0,re=E.length,le;J<re;++J){if(le=E[J],le.index=J,le.fx!=null&&(le.x=le.fx),le.fy!=null&&(le.y=le.fy),isNaN(le.x)||isNaN(le.y)){var fe=T*Math.sqrt(J),K=J*g;le.x=fe*Math.cos(K),le.y=fe*Math.sin(K)}(isNaN(le.vx)||isNaN(le.vy))&&(le.vx=le.vy=0)}}function Z(J){return J.initialize&&J.initialize(E),J}return N(),M={tick:F,restart:function(){return O.restart(B),M},stop:function(){return O.stop(),M},nodes:function(J){return arguments.length?(E=J,N(),z.each(Z),M):E},alpha:function(J){return arguments.length?(d=+J,M):d},alphaMin:function(J){return arguments.length?(C=+J,M):C},alphaDecay:function(J){return arguments.length?(S=+J,M):+S},alphaTarget:function(J){return arguments.length?(P=+J,M):P},velocityDecay:function(J){return arguments.length?(D=1-J,M):1-D},force:function(J,re){return arguments.length>1?(re==null?z.remove(J):z.set(J,Z(re)),M):z.get(J)},find:function(J,re,le){var fe=0,K=E.length,X,ae,oe,_e,be;for(le==null?le=1/0:le*=le,fe=0;fe<K;++fe)_e=E[fe],X=J-_e.x,ae=re-_e.y,oe=X*X+ae*ae,oe<le&&(be=_e,le=oe);return be},on:function(J,re){return arguments.length>1?(V.on(J,re),M):V.on(J)}}}function b(){var E,M,d,C=o(-30),S,P=1,D=1/0,z=.81;function O(N){var Z,J=E.length,re=t.quadtree(E,p,_).visitAfter(B);for(d=N,Z=0;Z<J;++Z)M=E[Z],re.visit(F)}function V(){if(E){var N,Z=E.length,J;for(S=new Array(Z),N=0;N<Z;++N)J=E[N],S[J.index]=+C(J,N,E)}}function B(N){var Z=0,J,re,le=0,fe,K,X;if(N.length){for(fe=K=X=0;X<4;++X)(J=N[X])&&(re=Math.abs(J.value))&&(Z+=J.value,le+=re,fe+=re*J.x,K+=re*J.y);N.x=fe/le,N.y=K/le}else{J=N,J.x=J.data.x,J.y=J.data.y;do Z+=S[J.data.index];while(J=J.next)}N.value=Z}function F(N,Z,J,re){if(!N.value)return!0;var le=N.x-M.x,fe=N.y-M.y,K=re-Z,X=le*le+fe*fe;if(K*K/z<X)return X<D&&(le===0&&(le=s(),X+=le*le),fe===0&&(fe=s(),X+=fe*fe),X<P&&(X=Math.sqrt(P*X)),M.vx+=le*N.value*d/X,M.vy+=fe*N.value*d/X),!0;if(N.length||X>=D)return;(N.data!==M||N.next)&&(le===0&&(le=s(),X+=le*le),fe===0&&(fe=s(),X+=fe*fe),X<P&&(X=Math.sqrt(P*X)));do N.data!==M&&(K=S[N.data.index]*d/X,M.vx+=le*K,M.vy+=fe*K);while(N=N.next)}return O.initialize=function(N){E=N,V()},O.strength=function(N){return arguments.length?(C=typeof N=="function"?N:o(+N),V(),O):C},O.distanceMin=function(N){return arguments.length?(P=N*N,O):Math.sqrt(P)},O.distanceMax=function(N){return arguments.length?(D=N*N,O):Math.sqrt(D)},O.theta=function(N){return arguments.length?(z=N*N,O):Math.sqrt(z)},O}function w(E,M,d){var C,S=o(.1),P,D;typeof E!="function"&&(E=o(+E)),M==null&&(M=0),d==null&&(d=0);function z(V){for(var B=0,F=C.length;B<F;++B){var N=C[B],Z=N.x-M||1e-6,J=N.y-d||1e-6,re=Math.sqrt(Z*Z+J*J),le=(D[B]-re)*P[B]*V/re;N.vx+=Z*le,N.vy+=J*le}}function O(){if(C){var V,B=C.length;for(P=new Array(B),D=new Array(B),V=0;V<B;++V)D[V]=+E(C[V],V,C),P[V]=isNaN(D[V])?0:+S(C[V],V,C)}}return z.initialize=function(V){C=V,O()},z.strength=function(V){return arguments.length?(S=typeof V=="function"?V:o(+V),O(),z):S},z.radius=function(V){return arguments.length?(E=typeof V=="function"?V:o(+V),O(),z):E},z.x=function(V){return arguments.length?(M=+V,z):M},z.y=function(V){return arguments.length?(d=+V,z):d},z}function k(E){var M=o(.1),d,C,S;typeof E!="function"&&(E=o(E==null?0:+E));function P(z){for(var O=0,V=d.length,B;O<V;++O)B=d[O],B.vx+=(S[O]-B.x)*C[O]*z}function D(){if(d){var z,O=d.length;for(C=new Array(O),S=new Array(O),z=0;z<O;++z)C[z]=isNaN(S[z]=+E(d[z],z,d))?0:+M(d[z],z,d)}}return P.initialize=function(z){d=z,D()},P.strength=function(z){return arguments.length?(M=typeof z=="function"?z:o(+z),D(),P):M},P.x=function(z){return arguments.length?(E=typeof z=="function"?z:o(+z),D(),P):E},P}function x(E){var M=o(.1),d,C,S;typeof E!="function"&&(E=o(E==null?0:+E));function P(z){for(var O=0,V=d.length,B;O<V;++O)B=d[O],B.vy+=(S[O]-B.y)*C[O]*z}function D(){if(d){var z,O=d.length;for(C=new Array(O),S=new Array(O),z=0;z<O;++z)C[z]=isNaN(S[z]=+E(d[z],z,d))?0:+M(d[z],z,d)}}return P.initialize=function(z){d=z,D()},P.strength=function(z){return arguments.length?(M=typeof z=="function"?z:o(+z),D(),P):M},P.y=function(z){return arguments.length?(E=typeof z=="function"?z:o(+z),D(),P):E},P}e.forceCenter=a,e.forceCollide=f,e.forceLink=v,e.forceManyBody=b,e.forceRadial=w,e.forceSimulation=A,e.forceX=k,e.forceY=x,Object.defineProperty(e,"__esModule",{value:!0})})});var UUe=ne((vF,NUe)=>{(function(e,t){typeof vF=="object"&&typeof NUe!="undefined"?t(vF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(vF,function(e){"use strict";var t=Math.PI,r=2*t,i=1e-6,n=r-i;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new a}a.prototype=o.prototype={constructor:a,moveTo:function(s,l){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(s,l){this._+="L"+(this._x1=+s)+","+(this._y1=+l)},quadraticCurveTo:function(s,l,u,f){this._+="Q"+ +s+","+ +l+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(s,l,u,f,c,h){this._+="C"+ +s+","+ +l+","+ +u+","+ +f+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(s,l,u,f,c){s=+s,l=+l,u=+u,f=+f,c=+c;var h=this._x1,v=this._y1,p=u-s,_=f-l,T=h-s,g=v-l,A=T*T+g*g;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=s)+","+(this._y1=l);else if(A>i)if(!(Math.abs(g*p-_*T)>i)||!c)this._+="L"+(this._x1=s)+","+(this._y1=l);else{var b=u-h,w=f-v,k=p*p+_*_,x=b*b+w*w,E=Math.sqrt(k),M=Math.sqrt(A),d=c*Math.tan((t-Math.acos((k+A-x)/(2*E*M)))/2),C=d/M,S=d/E;Math.abs(C-1)>i&&(this._+="L"+(s+C*T)+","+(l+C*g)),this._+="A"+c+","+c+",0,0,"+ +(g*b>T*w)+","+(this._x1=s+S*p)+","+(this._y1=l+S*_)}},arc:function(s,l,u,f,c,h){s=+s,l=+l,u=+u,h=!!h;var v=u*Math.cos(f),p=u*Math.sin(f),_=s+v,T=l+p,g=1^h,A=h?f-c:c-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+T:(Math.abs(this._x1-_)>i||Math.abs(this._y1-T)>i)&&(this._+="L"+_+","+T),u&&(A<0&&(A=A%r+r),A>n?this._+="A"+u+","+u+",0,1,"+g+","+(s-v)+","+(l-p)+"A"+u+","+u+",0,1,"+g+","+(this._x1=_)+","+(this._y1=T):A>i&&(this._+="A"+u+","+u+",0,"+ +(A>=t)+","+g+","+(this._x1=s+u*Math.cos(c))+","+(this._y1=l+u*Math.sin(c))))},rect:function(s,l,u,f){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},e.path=o,Object.defineProperty(e,"__esModule",{value:!0})})});var UZ=ne((dF,VUe)=>{(function(e,t){typeof dF=="object"&&typeof VUe!="undefined"?t(dF,UUe()):typeof define=="function"&&define.amd?define(["exports","d3-path"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(dF,function(e,t){"use strict";function r(Ze){return function(){return Ze}}var i=Math.abs,n=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,l=Math.sin,u=Math.sqrt,f=1e-12,c=Math.PI,h=c/2,v=2*c;function p(Ze){return Ze>1?0:Ze<-1?c:Math.acos(Ze)}function _(Ze){return Ze>=1?h:Ze<=-1?-h:Math.asin(Ze)}function T(Ze){return Ze.innerRadius}function g(Ze){return Ze.outerRadius}function A(Ze){return Ze.startAngle}function b(Ze){return Ze.endAngle}function w(Ze){return Ze&&Ze.padAngle}function k(Ze,Bt,sr,_r,Jr,on,pn,Cr){var cn=sr-Ze,gi=_r-Bt,Hn=pn-Jr,qi=Cr-on,fa=qi*cn-Hn*gi;if(!(fa*fa<f))return fa=(Hn*(Bt-on)-qi*(Ze-Jr))/fa,[Ze+fa*cn,Bt+fa*gi]}function x(Ze,Bt,sr,_r,Jr,on,pn){var Cr=Ze-sr,cn=Bt-_r,gi=(pn?on:-on)/u(Cr*Cr+cn*cn),Hn=gi*cn,qi=-gi*Cr,fa=Ze+Hn,eo=Bt+qi,ma=sr+Hn,so=_r+qi,ja=(fa+ma)/2,Xo=(eo+so)/2,Uo=ma-fa,ms=so-eo,as=Uo*Uo+ms*ms,il=Jr-on,oo=fa*so-ma*eo,cs=(ms<0?-1:1)*u(o(0,il*il*as-oo*oo)),Eo=(oo*ms-Uo*cs)/as,hs=(-oo*Uo-ms*cs)/as,Jo=(oo*ms+Uo*cs)/as,Qo=(-oo*Uo+ms*cs)/as,Oa=Eo-ja,co=hs-Xo,Al=Jo-ja,$l=Qo-Xo;return Oa*Oa+co*co>Al*Al+$l*$l&&(Eo=Jo,hs=Qo),{cx:Eo,cy:hs,x01:-Hn,y01:-qi,x11:Eo*(Jr/il-1),y11:hs*(Jr/il-1)}}function E(){var Ze=T,Bt=g,sr=r(0),_r=null,Jr=A,on=b,pn=w,Cr=null;function cn(){var gi,Hn,qi=+Ze.apply(this,arguments),fa=+Bt.apply(this,arguments),eo=Jr.apply(this,arguments)-h,ma=on.apply(this,arguments)-h,so=i(ma-eo),ja=ma>eo;if(Cr||(Cr=gi=t.path()),fa<qi&&(Hn=fa,fa=qi,qi=Hn),!(fa>f))Cr.moveTo(0,0);else if(so>v-f)Cr.moveTo(fa*a(eo),fa*l(eo)),Cr.arc(0,0,fa,eo,ma,!ja),qi>f&&(Cr.moveTo(qi*a(ma),qi*l(ma)),Cr.arc(0,0,qi,ma,eo,ja));else{var Xo=eo,Uo=ma,ms=eo,as=ma,il=so,oo=so,cs=pn.apply(this,arguments)/2,Eo=cs>f&&(_r?+_r.apply(this,arguments):u(qi*qi+fa*fa)),hs=s(i(fa-qi)/2,+sr.apply(this,arguments)),Jo=hs,Qo=hs,Oa,co;if(Eo>f){var Al=_(Eo/qi*l(cs)),$l=_(Eo/fa*l(cs));(il-=Al*2)>f?(Al*=ja?1:-1,ms+=Al,as-=Al):(il=0,ms=as=(eo+ma)/2),(oo-=$l*2)>f?($l*=ja?1:-1,Xo+=$l,Uo-=$l):(oo=0,Xo=Uo=(eo+ma)/2)}var Nu=fa*a(Xo),os=fa*l(Xo),hn=qi*a(as),bi=qi*l(as);if(hs>f){var ac=fa*a(Uo),Pl=fa*l(Uo),ss=qi*a(ms),vl=qi*l(ms),$o;if(so<c&&($o=k(Nu,os,ss,vl,ac,Pl,hn,bi))){var Rl=Nu-$o[0],xu=os-$o[1],ni=ac-$o[0],Aa=Pl-$o[1],Ca=1/l(p((Rl*ni+xu*Aa)/(u(Rl*Rl+xu*xu)*u(ni*ni+Aa*Aa)))/2),Fs=u($o[0]*$o[0]+$o[1]*$o[1]);Jo=s(hs,(qi-Fs)/(Ca-1)),Qo=s(hs,(fa-Fs)/(Ca+1))}}oo>f?Qo>f?(Oa=x(ss,vl,Nu,os,fa,Qo,ja),co=x(ac,Pl,hn,bi,fa,Qo,ja),Cr.moveTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),Qo<hs?Cr.arc(Oa.cx,Oa.cy,Qo,n(Oa.y01,Oa.x01),n(co.y01,co.x01),!ja):(Cr.arc(Oa.cx,Oa.cy,Qo,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!ja),Cr.arc(0,0,fa,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(co.cy+co.y11,co.cx+co.x11),!ja),Cr.arc(co.cx,co.cy,Qo,n(co.y11,co.x11),n(co.y01,co.x01),!ja))):(Cr.moveTo(Nu,os),Cr.arc(0,0,fa,Xo,Uo,!ja)):Cr.moveTo(Nu,os),!(qi>f)||!(il>f)?Cr.lineTo(hn,bi):Jo>f?(Oa=x(hn,bi,ac,Pl,qi,-Jo,ja),co=x(Nu,os,ss,vl,qi,-Jo,ja),Cr.lineTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),Jo<hs?Cr.arc(Oa.cx,Oa.cy,Jo,n(Oa.y01,Oa.x01),n(co.y01,co.x01),!ja):(Cr.arc(Oa.cx,Oa.cy,Jo,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!ja),Cr.arc(0,0,qi,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(co.cy+co.y11,co.cx+co.x11),ja),Cr.arc(co.cx,co.cy,Jo,n(co.y11,co.x11),n(co.y01,co.x01),!ja))):Cr.arc(0,0,qi,as,ms,ja)}if(Cr.closePath(),gi)return Cr=null,gi+""||null}return cn.centroid=function(){var gi=(+Ze.apply(this,arguments)+ +Bt.apply(this,arguments))/2,Hn=(+Jr.apply(this,arguments)+ +on.apply(this,arguments))/2-c/2;return[a(Hn)*gi,l(Hn)*gi]},cn.innerRadius=function(gi){return arguments.length?(Ze=typeof gi=="function"?gi:r(+gi),cn):Ze},cn.outerRadius=function(gi){return arguments.length?(Bt=typeof gi=="function"?gi:r(+gi),cn):Bt},cn.cornerRadius=function(gi){return arguments.length?(sr=typeof gi=="function"?gi:r(+gi),cn):sr},cn.padRadius=function(gi){return arguments.length?(_r=gi==null?null:typeof gi=="function"?gi:r(+gi),cn):_r},cn.startAngle=function(gi){return arguments.length?(Jr=typeof gi=="function"?gi:r(+gi),cn):Jr},cn.endAngle=function(gi){return arguments.length?(on=typeof gi=="function"?gi:r(+gi),cn):on},cn.padAngle=function(gi){return arguments.length?(pn=typeof gi=="function"?gi:r(+gi),cn):pn},cn.context=function(gi){return arguments.length?(Cr=gi==null?null:gi,cn):Cr},cn}function M(Ze){this._context=Ze}M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2;default:this._context.lineTo(Ze,Bt);break}}};function d(Ze){return new M(Ze)}function C(Ze){return Ze[0]}function S(Ze){return Ze[1]}function P(){var Ze=C,Bt=S,sr=r(!0),_r=null,Jr=d,on=null;function pn(Cr){var cn,gi=Cr.length,Hn,qi=!1,fa;for(_r==null&&(on=Jr(fa=t.path())),cn=0;cn<=gi;++cn)!(cn<gi&&sr(Hn=Cr[cn],cn,Cr))===qi&&((qi=!qi)?on.lineStart():on.lineEnd()),qi&&on.point(+Ze(Hn,cn,Cr),+Bt(Hn,cn,Cr));if(fa)return on=null,fa+""||null}return pn.x=function(Cr){return arguments.length?(Ze=typeof Cr=="function"?Cr:r(+Cr),pn):Ze},pn.y=function(Cr){return arguments.length?(Bt=typeof Cr=="function"?Cr:r(+Cr),pn):Bt},pn.defined=function(Cr){return arguments.length?(sr=typeof Cr=="function"?Cr:r(!!Cr),pn):sr},pn.curve=function(Cr){return arguments.length?(Jr=Cr,_r!=null&&(on=Jr(_r)),pn):Jr},pn.context=function(Cr){return arguments.length?(Cr==null?_r=on=null:on=Jr(_r=Cr),pn):_r},pn}function D(){var Ze=C,Bt=null,sr=r(0),_r=S,Jr=r(!0),on=null,pn=d,Cr=null;function cn(Hn){var qi,fa,eo,ma=Hn.length,so,ja=!1,Xo,Uo=new Array(ma),ms=new Array(ma);for(on==null&&(Cr=pn(Xo=t.path())),qi=0;qi<=ma;++qi){if(!(qi<ma&&Jr(so=Hn[qi],qi,Hn))===ja)if(ja=!ja)fa=qi,Cr.areaStart(),Cr.lineStart();else{for(Cr.lineEnd(),Cr.lineStart(),eo=qi-1;eo>=fa;--eo)Cr.point(Uo[eo],ms[eo]);Cr.lineEnd(),Cr.areaEnd()}ja&&(Uo[qi]=+Ze(so,qi,Hn),ms[qi]=+sr(so,qi,Hn),Cr.point(Bt?+Bt(so,qi,Hn):Uo[qi],_r?+_r(so,qi,Hn):ms[qi]))}if(Xo)return Cr=null,Xo+""||null}function gi(){return P().defined(Jr).curve(pn).context(on)}return cn.x=function(Hn){return arguments.length?(Ze=typeof Hn=="function"?Hn:r(+Hn),Bt=null,cn):Ze},cn.x0=function(Hn){return arguments.length?(Ze=typeof Hn=="function"?Hn:r(+Hn),cn):Ze},cn.x1=function(Hn){return arguments.length?(Bt=Hn==null?null:typeof Hn=="function"?Hn:r(+Hn),cn):Bt},cn.y=function(Hn){return arguments.length?(sr=typeof Hn=="function"?Hn:r(+Hn),_r=null,cn):sr},cn.y0=function(Hn){return arguments.length?(sr=typeof Hn=="function"?Hn:r(+Hn),cn):sr},cn.y1=function(Hn){return arguments.length?(_r=Hn==null?null:typeof Hn=="function"?Hn:r(+Hn),cn):_r},cn.lineX0=cn.lineY0=function(){return gi().x(Ze).y(sr)},cn.lineY1=function(){return gi().x(Ze).y(_r)},cn.lineX1=function(){return gi().x(Bt).y(sr)},cn.defined=function(Hn){return arguments.length?(Jr=typeof Hn=="function"?Hn:r(!!Hn),cn):Jr},cn.curve=function(Hn){return arguments.length?(pn=Hn,on!=null&&(Cr=pn(on)),cn):pn},cn.context=function(Hn){return arguments.length?(Hn==null?on=Cr=null:Cr=pn(on=Hn),cn):on},cn}function z(Ze,Bt){return Bt<Ze?-1:Bt>Ze?1:Bt>=Ze?0:NaN}function O(Ze){return Ze}function V(){var Ze=O,Bt=z,sr=null,_r=r(0),Jr=r(v),on=r(0);function pn(Cr){var cn,gi=Cr.length,Hn,qi,fa=0,eo=new Array(gi),ma=new Array(gi),so=+_r.apply(this,arguments),ja=Math.min(v,Math.max(-v,Jr.apply(this,arguments)-so)),Xo,Uo=Math.min(Math.abs(ja)/gi,on.apply(this,arguments)),ms=Uo*(ja<0?-1:1),as;for(cn=0;cn<gi;++cn)(as=ma[eo[cn]=cn]=+Ze(Cr[cn],cn,Cr))>0&&(fa+=as);for(Bt!=null?eo.sort(function(il,oo){return Bt(ma[il],ma[oo])}):sr!=null&&eo.sort(function(il,oo){return sr(Cr[il],Cr[oo])}),cn=0,qi=fa?(ja-gi*ms)/fa:0;cn<gi;++cn,so=Xo)Hn=eo[cn],as=ma[Hn],Xo=so+(as>0?as*qi:0)+ms,ma[Hn]={data:Cr[Hn],index:cn,value:as,startAngle:so,endAngle:Xo,padAngle:Uo};return ma}return pn.value=function(Cr){return arguments.length?(Ze=typeof Cr=="function"?Cr:r(+Cr),pn):Ze},pn.sortValues=function(Cr){return arguments.length?(Bt=Cr,sr=null,pn):Bt},pn.sort=function(Cr){return arguments.length?(sr=Cr,Bt=null,pn):sr},pn.startAngle=function(Cr){return arguments.length?(_r=typeof Cr=="function"?Cr:r(+Cr),pn):_r},pn.endAngle=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),pn):Jr},pn.padAngle=function(Cr){return arguments.length?(on=typeof Cr=="function"?Cr:r(+Cr),pn):on},pn}var B=N(d);function F(Ze){this._curve=Ze}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ze,Bt){this._curve.point(Bt*Math.sin(Ze),Bt*-Math.cos(Ze))}};function N(Ze){function Bt(sr){return new F(Ze(sr))}return Bt._curve=Ze,Bt}function Z(Ze){var Bt=Ze.curve;return Ze.angle=Ze.x,delete Ze.x,Ze.radius=Ze.y,delete Ze.y,Ze.curve=function(sr){return arguments.length?Bt(N(sr)):Bt()._curve},Ze}function J(){return Z(P().curve(B))}function re(){var Ze=D().curve(B),Bt=Ze.curve,sr=Ze.lineX0,_r=Ze.lineX1,Jr=Ze.lineY0,on=Ze.lineY1;return Ze.angle=Ze.x,delete Ze.x,Ze.startAngle=Ze.x0,delete Ze.x0,Ze.endAngle=Ze.x1,delete Ze.x1,Ze.radius=Ze.y,delete Ze.y,Ze.innerRadius=Ze.y0,delete Ze.y0,Ze.outerRadius=Ze.y1,delete Ze.y1,Ze.lineStartAngle=function(){return Z(sr())},delete Ze.lineX0,Ze.lineEndAngle=function(){return Z(_r())},delete Ze.lineX1,Ze.lineInnerRadius=function(){return Z(Jr())},delete Ze.lineY0,Ze.lineOuterRadius=function(){return Z(on())},delete Ze.lineY1,Ze.curve=function(pn){return arguments.length?Bt(N(pn)):Bt()._curve},Ze}function le(Ze,Bt){return[(Bt=+Bt)*Math.cos(Ze-=Math.PI/2),Bt*Math.sin(Ze)]}var fe=Array.prototype.slice;function K(Ze){return Ze.source}function X(Ze){return Ze.target}function ae(Ze){var Bt=K,sr=X,_r=C,Jr=S,on=null;function pn(){var Cr,cn=fe.call(arguments),gi=Bt.apply(this,cn),Hn=sr.apply(this,cn);if(on||(on=Cr=t.path()),Ze(on,+_r.apply(this,(cn[0]=gi,cn)),+Jr.apply(this,cn),+_r.apply(this,(cn[0]=Hn,cn)),+Jr.apply(this,cn)),Cr)return on=null,Cr+""||null}return pn.source=function(Cr){return arguments.length?(Bt=Cr,pn):Bt},pn.target=function(Cr){return arguments.length?(sr=Cr,pn):sr},pn.x=function(Cr){return arguments.length?(_r=typeof Cr=="function"?Cr:r(+Cr),pn):_r},pn.y=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),pn):Jr},pn.context=function(Cr){return arguments.length?(on=Cr==null?null:Cr,pn):on},pn}function oe(Ze,Bt,sr,_r,Jr){Ze.moveTo(Bt,sr),Ze.bezierCurveTo(Bt=(Bt+_r)/2,sr,Bt,Jr,_r,Jr)}function _e(Ze,Bt,sr,_r,Jr){Ze.moveTo(Bt,sr),Ze.bezierCurveTo(Bt,sr=(sr+Jr)/2,_r,sr,_r,Jr)}function be(Ze,Bt,sr,_r,Jr){var on=le(Bt,sr),pn=le(Bt,sr=(sr+Jr)/2),Cr=le(_r,sr),cn=le(_r,Jr);Ze.moveTo(on[0],on[1]),Ze.bezierCurveTo(pn[0],pn[1],Cr[0],Cr[1],cn[0],cn[1])}function he(){return ae(oe)}function ie(){return ae(_e)}function ye(){var Ze=ae(be);return Ze.angle=Ze.x,delete Ze.x,Ze.radius=Ze.y,delete Ze.y,Ze}var ue={draw:function(Ze,Bt){var sr=Math.sqrt(Bt/c);Ze.moveTo(sr,0),Ze.arc(0,0,sr,0,v)}},Ae={draw:function(Ze,Bt){var sr=Math.sqrt(Bt/5)/2;Ze.moveTo(-3*sr,-sr),Ze.lineTo(-sr,-sr),Ze.lineTo(-sr,-3*sr),Ze.lineTo(sr,-3*sr),Ze.lineTo(sr,-sr),Ze.lineTo(3*sr,-sr),Ze.lineTo(3*sr,sr),Ze.lineTo(sr,sr),Ze.lineTo(sr,3*sr),Ze.lineTo(-sr,3*sr),Ze.lineTo(-sr,sr),Ze.lineTo(-3*sr,sr),Ze.closePath()}},Re=Math.sqrt(1/3),ze=Re*2,et={draw:function(Ze,Bt){var sr=Math.sqrt(Bt/ze),_r=sr*Re;Ze.moveTo(0,-sr),Ze.lineTo(_r,0),Ze.lineTo(0,sr),Ze.lineTo(-_r,0),Ze.closePath()}},Le=.8908130915292852,Ie=Math.sin(c/10)/Math.sin(7*c/10),dt=Math.sin(v/10)*Ie,ct=-Math.cos(v/10)*Ie,Ke={draw:function(Ze,Bt){var sr=Math.sqrt(Bt*Le),_r=dt*sr,Jr=ct*sr;Ze.moveTo(0,-sr),Ze.lineTo(_r,Jr);for(var on=1;on<5;++on){var pn=v*on/5,Cr=Math.cos(pn),cn=Math.sin(pn);Ze.lineTo(cn*sr,-Cr*sr),Ze.lineTo(Cr*_r-cn*Jr,cn*_r+Cr*Jr)}Ze.closePath()}},_t={draw:function(Ze,Bt){var sr=Math.sqrt(Bt),_r=-sr/2;Ze.rect(_r,_r,sr,sr)}},zt=Math.sqrt(3),Et={draw:function(Ze,Bt){var sr=-Math.sqrt(Bt/(zt*3));Ze.moveTo(0,sr*2),Ze.lineTo(-zt*sr,-sr),Ze.lineTo(zt*sr,-sr),Ze.closePath()}},Se=-.5,je=Math.sqrt(3)/2,ht=1/Math.sqrt(12),nt=(ht/2+1)*3,lt={draw:function(Ze,Bt){var sr=Math.sqrt(Bt/nt),_r=sr/2,Jr=sr*ht,on=_r,pn=sr*ht+sr,Cr=-on,cn=pn;Ze.moveTo(_r,Jr),Ze.lineTo(on,pn),Ze.lineTo(Cr,cn),Ze.lineTo(Se*_r-je*Jr,je*_r+Se*Jr),Ze.lineTo(Se*on-je*pn,je*on+Se*pn),Ze.lineTo(Se*Cr-je*cn,je*Cr+Se*cn),Ze.lineTo(Se*_r+je*Jr,Se*Jr-je*_r),Ze.lineTo(Se*on+je*pn,Se*pn-je*on),Ze.lineTo(Se*Cr+je*cn,Se*cn-je*Cr),Ze.closePath()}},rt=[ue,Ae,et,_t,Ke,Et,lt];function Xe(){var Ze=r(ue),Bt=r(64),sr=null;function _r(){var Jr;if(sr||(sr=Jr=t.path()),Ze.apply(this,arguments).draw(sr,+Bt.apply(this,arguments)),Jr)return sr=null,Jr+""||null}return _r.type=function(Jr){return arguments.length?(Ze=typeof Jr=="function"?Jr:r(Jr),_r):Ze},_r.size=function(Jr){return arguments.length?(Bt=typeof Jr=="function"?Jr:r(+Jr),_r):Bt},_r.context=function(Jr){return arguments.length?(sr=Jr==null?null:Jr,_r):sr},_r}function ft(){}function gt(Ze,Bt,sr){Ze._context.bezierCurveTo((2*Ze._x0+Ze._x1)/3,(2*Ze._y0+Ze._y1)/3,(Ze._x0+2*Ze._x1)/3,(Ze._y0+2*Ze._y1)/3,(Ze._x0+4*Ze._x1+Bt)/6,(Ze._y0+4*Ze._y1+sr)/6)}function Qt(Ze){this._context=Ze}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gt(this,Ze,Bt);break}this._x0=this._x1,this._x1=Ze,this._y0=this._y1,this._y1=Bt}};function Jt(Ze){return new Qt(Ze)}function fr(Ze){this._context=Ze}fr.prototype={areaStart:ft,areaEnd:ft,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._x2=Ze,this._y2=Bt;break;case 1:this._point=2,this._x3=Ze,this._y3=Bt;break;case 2:this._point=3,this._x4=Ze,this._y4=Bt,this._context.moveTo((this._x0+4*this._x1+Ze)/6,(this._y0+4*this._y1+Bt)/6);break;default:gt(this,Ze,Bt);break}this._x0=this._x1,this._x1=Ze,this._y0=this._y1,this._y1=Bt}};function nr(Ze){return new fr(Ze)}function ur(Ze){this._context=Ze}ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var sr=(this._x0+4*this._x1+Ze)/6,_r=(this._y0+4*this._y1+Bt)/6;this._line?this._context.lineTo(sr,_r):this._context.moveTo(sr,_r);break;case 3:this._point=4;default:gt(this,Ze,Bt);break}this._x0=this._x1,this._x1=Ze,this._y0=this._y1,this._y1=Bt}};function qt(Ze){return new ur(Ze)}function xt(Ze,Bt){this._basis=new Qt(Ze),this._beta=Bt}xt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ze=this._x,Bt=this._y,sr=Ze.length-1;if(sr>0)for(var _r=Ze[0],Jr=Bt[0],on=Ze[sr]-_r,pn=Bt[sr]-Jr,Cr=-1,cn;++Cr<=sr;)cn=Cr/sr,this._basis.point(this._beta*Ze[Cr]+(1-this._beta)*(_r+cn*on),this._beta*Bt[Cr]+(1-this._beta)*(Jr+cn*pn));this._x=this._y=null,this._basis.lineEnd()},point:function(Ze,Bt){this._x.push(+Ze),this._y.push(+Bt)}};var At=function Ze(Bt){function sr(_r){return Bt===1?new Qt(_r):new xt(_r,Bt)}return sr.beta=function(_r){return Ze(+_r)},sr}(.85);function Je(Ze,Bt,sr){Ze._context.bezierCurveTo(Ze._x1+Ze._k*(Ze._x2-Ze._x0),Ze._y1+Ze._k*(Ze._y2-Ze._y0),Ze._x2+Ze._k*(Ze._x1-Bt),Ze._y2+Ze._k*(Ze._y1-sr),Ze._x2,Ze._y2)}function xe(Ze,Bt){this._context=Ze,this._k=(1-Bt)/6}xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Je(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2,this._x1=Ze,this._y1=Bt;break;case 2:this._point=3;default:Je(this,Ze,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var ce=function Ze(Bt){function sr(_r){return new xe(_r,Bt)}return sr.tension=function(_r){return Ze(+_r)},sr}(0);function ge(Ze,Bt){this._context=Ze,this._k=(1-Bt)/6}ge.prototype={areaStart:ft,areaEnd:ft,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._x3=Ze,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ze,this._y4=Bt);break;case 2:this._point=3,this._x5=Ze,this._y5=Bt;break;default:Je(this,Ze,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var qe=function Ze(Bt){function sr(_r){return new ge(_r,Bt)}return sr.tension=function(_r){return Ze(+_r)},sr}(0);function yt(Ze,Bt){this._context=Ze,this._k=(1-Bt)/6}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Je(this,Ze,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Vt=function Ze(Bt){function sr(_r){return new yt(_r,Bt)}return sr.tension=function(_r){return Ze(+_r)},sr}(0);function Ut(Ze,Bt,sr){var _r=Ze._x1,Jr=Ze._y1,on=Ze._x2,pn=Ze._y2;if(Ze._l01_a>f){var Cr=2*Ze._l01_2a+3*Ze._l01_a*Ze._l12_a+Ze._l12_2a,cn=3*Ze._l01_a*(Ze._l01_a+Ze._l12_a);_r=(_r*Cr-Ze._x0*Ze._l12_2a+Ze._x2*Ze._l01_2a)/cn,Jr=(Jr*Cr-Ze._y0*Ze._l12_2a+Ze._y2*Ze._l01_2a)/cn}if(Ze._l23_a>f){var gi=2*Ze._l23_2a+3*Ze._l23_a*Ze._l12_a+Ze._l12_2a,Hn=3*Ze._l23_a*(Ze._l23_a+Ze._l12_a);on=(on*gi+Ze._x1*Ze._l23_2a-Bt*Ze._l12_2a)/Hn,pn=(pn*gi+Ze._y1*Ze._l23_2a-sr*Ze._l12_2a)/Hn}Ze._context.bezierCurveTo(_r,Jr,on,pn,Ze._x2,Ze._y2)}function br(Ze,Bt){this._context=Ze,this._alpha=Bt}br.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){if(Ze=+Ze,Bt=+Bt,this._point){var sr=this._x2-Ze,_r=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(sr*sr+_r*_r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ut(this,Ze,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var xr=function Ze(Bt){function sr(_r){return Bt?new br(_r,Bt):new xe(_r,0)}return sr.alpha=function(_r){return Ze(+_r)},sr}(.5);function Or(Ze,Bt){this._context=Ze,this._alpha=Bt}Or.prototype={areaStart:ft,areaEnd:ft,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(Ze,Bt){if(Ze=+Ze,Bt=+Bt,this._point){var sr=this._x2-Ze,_r=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(sr*sr+_r*_r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ze,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ze,this._y4=Bt);break;case 2:this._point=3,this._x5=Ze,this._y5=Bt;break;default:Ut(this,Ze,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Hr=function Ze(Bt){function sr(_r){return Bt?new Or(_r,Bt):new ge(_r,0)}return sr.alpha=function(_r){return Ze(+_r)},sr}(.5);function gr(Ze,Bt){this._context=Ze,this._alpha=Bt}gr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){if(Ze=+Ze,Bt=+Bt,this._point){var sr=this._x2-Ze,_r=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(sr*sr+_r*_r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ut(this,Ze,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ze,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Ur=function Ze(Bt){function sr(_r){return Bt?new gr(_r,Bt):new yt(_r,0)}return sr.alpha=function(_r){return Ze(+_r)},sr}(.5);function _n(Ze){this._context=Ze}_n.prototype={areaStart:ft,areaEnd:ft,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ze,Bt){Ze=+Ze,Bt=+Bt,this._point?this._context.lineTo(Ze,Bt):(this._point=1,this._context.moveTo(Ze,Bt))}};function si(Ze){return new _n(Ze)}function xn(Ze){return Ze<0?-1:1}function ci(Ze,Bt,sr){var _r=Ze._x1-Ze._x0,Jr=Bt-Ze._x1,on=(Ze._y1-Ze._y0)/(_r||Jr<0&&-0),pn=(sr-Ze._y1)/(Jr||_r<0&&-0),Cr=(on*Jr+pn*_r)/(_r+Jr);return(xn(on)+xn(pn))*Math.min(Math.abs(on),Math.abs(pn),.5*Math.abs(Cr))||0}function Wi(Ze,Bt){var sr=Ze._x1-Ze._x0;return sr?(3*(Ze._y1-Ze._y0)/sr-Bt)/2:Bt}function oi(Ze,Bt,sr){var _r=Ze._x0,Jr=Ze._y0,on=Ze._x1,pn=Ze._y1,Cr=(on-_r)/3;Ze._context.bezierCurveTo(_r+Cr,Jr+Cr*Bt,on-Cr,pn-Cr*sr,on,pn)}function Zi(Ze){this._context=Ze}Zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oi(this,this._t0,Wi(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Ze,Bt){var sr=NaN;if(Ze=+Ze,Bt=+Bt,!(Ze===this._x1&&Bt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2;break;case 2:this._point=3,oi(this,Wi(this,sr=ci(this,Ze,Bt)),sr);break;default:oi(this,this._t0,sr=ci(this,Ze,Bt));break}this._x0=this._x1,this._x1=Ze,this._y0=this._y1,this._y1=Bt,this._t0=sr}}};function Ei(Ze){this._context=new at(Ze)}(Ei.prototype=Object.create(Zi.prototype)).point=function(Ze,Bt){Zi.prototype.point.call(this,Bt,Ze)};function at(Ze){this._context=Ze}at.prototype={moveTo:function(Ze,Bt){this._context.moveTo(Bt,Ze)},closePath:function(){this._context.closePath()},lineTo:function(Ze,Bt){this._context.lineTo(Bt,Ze)},bezierCurveTo:function(Ze,Bt,sr,_r,Jr,on){this._context.bezierCurveTo(Bt,Ze,_r,sr,on,Jr)}};function Ne(Ze){return new Zi(Ze)}function st(Ze){return new Ei(Ze)}function mt(Ze){this._context=Ze}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ze=this._x,Bt=this._y,sr=Ze.length;if(sr)if(this._line?this._context.lineTo(Ze[0],Bt[0]):this._context.moveTo(Ze[0],Bt[0]),sr===2)this._context.lineTo(Ze[1],Bt[1]);else for(var _r=Ot(Ze),Jr=Ot(Bt),on=0,pn=1;pn<sr;++on,++pn)this._context.bezierCurveTo(_r[0][on],Jr[0][on],_r[1][on],Jr[1][on],Ze[pn],Bt[pn]);(this._line||this._line!==0&&sr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ze,Bt){this._x.push(+Ze),this._y.push(+Bt)}};function Ot(Ze){var Bt,sr=Ze.length-1,_r,Jr=new Array(sr),on=new Array(sr),pn=new Array(sr);for(Jr[0]=0,on[0]=2,pn[0]=Ze[0]+2*Ze[1],Bt=1;Bt<sr-1;++Bt)Jr[Bt]=1,on[Bt]=4,pn[Bt]=4*Ze[Bt]+2*Ze[Bt+1];for(Jr[sr-1]=2,on[sr-1]=7,pn[sr-1]=8*Ze[sr-1]+Ze[sr],Bt=1;Bt<sr;++Bt)_r=Jr[Bt]/on[Bt-1],on[Bt]-=_r,pn[Bt]-=_r*pn[Bt-1];for(Jr[sr-1]=pn[sr-1]/on[sr-1],Bt=sr-2;Bt>=0;--Bt)Jr[Bt]=(pn[Bt]-Jr[Bt+1])/on[Bt];for(on[sr-1]=(Ze[sr]+Jr[sr-1])/2,Bt=0;Bt<sr-1;++Bt)on[Bt]=2*Ze[Bt+1]-Jr[Bt+1];return[Jr,on]}function tr(Ze){return new mt(Ze)}function pr(Ze,Bt){this._context=Ze,this._t=Bt}pr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ze,Bt){switch(Ze=+Ze,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ze,Bt):this._context.moveTo(Ze,Bt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Bt),this._context.lineTo(Ze,Bt);else{var sr=this._x*(1-this._t)+Ze*this._t;this._context.lineTo(sr,this._y),this._context.lineTo(sr,Bt)}break}}this._x=Ze,this._y=Bt}};function hr(Ze){return new pr(Ze,.5)}function Rr(Ze){return new pr(Ze,0)}function Gr(Ze){return new pr(Ze,1)}function Yr(Ze,Bt){if((pn=Ze.length)>1)for(var sr=1,_r,Jr,on=Ze[Bt[0]],pn,Cr=on.length;sr<pn;++sr)for(Jr=on,on=Ze[Bt[sr]],_r=0;_r<Cr;++_r)on[_r][1]+=on[_r][0]=isNaN(Jr[_r][1])?Jr[_r][0]:Jr[_r][1]}function vn(Ze){for(var Bt=Ze.length,sr=new Array(Bt);--Bt>=0;)sr[Bt]=Bt;return sr}function Wr(Ze,Bt){return Ze[Bt]}function qn(){var Ze=r([]),Bt=vn,sr=Yr,_r=Wr;function Jr(on){var pn=Ze.apply(this,arguments),Cr,cn=on.length,gi=pn.length,Hn=new Array(gi),qi;for(Cr=0;Cr<gi;++Cr){for(var fa=pn[Cr],eo=Hn[Cr]=new Array(cn),ma=0,so;ma<cn;++ma)eo[ma]=so=[0,+_r(on[ma],fa,ma,on)],so.data=on[ma];eo.key=fa}for(Cr=0,qi=Bt(Hn);Cr<gi;++Cr)Hn[qi[Cr]].index=Cr;return sr(Hn,qi),Hn}return Jr.keys=function(on){return arguments.length?(Ze=typeof on=="function"?on:r(fe.call(on)),Jr):Ze},Jr.value=function(on){return arguments.length?(_r=typeof on=="function"?on:r(+on),Jr):_r},Jr.order=function(on){return arguments.length?(Bt=on==null?vn:typeof on=="function"?on:r(fe.call(on)),Jr):Bt},Jr.offset=function(on){return arguments.length?(sr=on==null?Yr:on,Jr):sr},Jr}function vi(Ze,Bt){if((_r=Ze.length)>0){for(var sr,_r,Jr=0,on=Ze[0].length,pn;Jr<on;++Jr){for(pn=sr=0;sr<_r;++sr)pn+=Ze[sr][Jr][1]||0;if(pn)for(sr=0;sr<_r;++sr)Ze[sr][Jr][1]/=pn}Yr(Ze,Bt)}}function Mi(Ze,Bt){if((cn=Ze.length)>0)for(var sr,_r=0,Jr,on,pn,Cr,cn,gi=Ze[Bt[0]].length;_r<gi;++_r)for(pn=Cr=0,sr=0;sr<cn;++sr)(on=(Jr=Ze[Bt[sr]][_r])[1]-Jr[0])>0?(Jr[0]=pn,Jr[1]=pn+=on):on<0?(Jr[1]=Cr,Jr[0]=Cr+=on):(Jr[0]=0,Jr[1]=on)}function Ui(Ze,Bt){if((Jr=Ze.length)>0){for(var sr=0,_r=Ze[Bt[0]],Jr,on=_r.length;sr<on;++sr){for(var pn=0,Cr=0;pn<Jr;++pn)Cr+=Ze[pn][sr][1]||0;_r[sr][1]+=_r[sr][0]=-Cr/2}Yr(Ze,Bt)}}function ji(Ze,Bt){if(!(!((pn=Ze.length)>0)||!((on=(Jr=Ze[Bt[0]]).length)>0))){for(var sr=0,_r=1,Jr,on,pn;_r<on;++_r){for(var Cr=0,cn=0,gi=0;Cr<pn;++Cr){for(var Hn=Ze[Bt[Cr]],qi=Hn[_r][1]||0,fa=Hn[_r-1][1]||0,eo=(qi-fa)/2,ma=0;ma<Cr;++ma){var so=Ze[Bt[ma]],ja=so[_r][1]||0,Xo=so[_r-1][1]||0;eo+=ja-Xo}cn+=qi,gi+=eo*qi}Jr[_r-1][1]+=Jr[_r-1][0]=sr,cn&&(sr-=gi/cn)}Jr[_r-1][1]+=Jr[_r-1][0]=sr,Yr(Ze,Bt)}}function ea(Ze){var Bt=Ze.map(Ra);return vn(Ze).sort(function(sr,_r){return Bt[sr]-Bt[_r]})}function Ra(Ze){for(var Bt=-1,sr=0,_r=Ze.length,Jr,on=-1/0;++Bt<_r;)(Jr=+Ze[Bt][1])>on&&(on=Jr,sr=Bt);return sr}function Li(Ze){var Bt=Ze.map(Yn);return vn(Ze).sort(function(sr,_r){return Bt[sr]-Bt[_r]})}function Yn(Ze){for(var Bt=0,sr=-1,_r=Ze.length,Jr;++sr<_r;)(Jr=+Ze[sr][1])&&(Bt+=Jr);return Bt}function zi(Ze){return Li(Ze).reverse()}function ya(Ze){var Bt=Ze.length,sr,_r,Jr=Ze.map(Yn),on=ea(Ze),pn=0,Cr=0,cn=[],gi=[];for(sr=0;sr<Bt;++sr)_r=on[sr],pn<Cr?(pn+=Jr[_r],cn.push(_r)):(Cr+=Jr[_r],gi.push(_r));return gi.reverse().concat(cn)}function zn(Ze){return vn(Ze).reverse()}e.arc=E,e.area=D,e.areaRadial=re,e.curveBasis=Jt,e.curveBasisClosed=nr,e.curveBasisOpen=qt,e.curveBundle=At,e.curveCardinal=ce,e.curveCardinalClosed=qe,e.curveCardinalOpen=Vt,e.curveCatmullRom=xr,e.curveCatmullRomClosed=Hr,e.curveCatmullRomOpen=Ur,e.curveLinear=d,e.curveLinearClosed=si,e.curveMonotoneX=Ne,e.curveMonotoneY=st,e.curveNatural=tr,e.curveStep=hr,e.curveStepAfter=Gr,e.curveStepBefore=Rr,e.line=P,e.lineRadial=J,e.linkHorizontal=he,e.linkRadial=ye,e.linkVertical=ie,e.pie=V,e.pointRadial=le,e.radialArea=re,e.radialLine=J,e.stack=qn,e.stackOffsetDiverging=Mi,e.stackOffsetExpand=vi,e.stackOffsetNone=Yr,e.stackOffsetSilhouette=Ui,e.stackOffsetWiggle=ji,e.stackOrderAppearance=ea,e.stackOrderAscending=Li,e.stackOrderDescending=zi,e.stackOrderInsideOut=ya,e.stackOrderNone=vn,e.stackOrderReverse=zn,e.symbol=Xe,e.symbolCircle=ue,e.symbolCross=Ae,e.symbolDiamond=et,e.symbolSquare=_t,e.symbolStar=Ke,e.symbolTriangle=Et,e.symbolWye=lt,e.symbols=rt,Object.defineProperty(e,"__esModule",{value:!0})})});var GUe=ne((pF,HUe)=>{(function(e,t){typeof pF=="object"&&typeof HUe!="undefined"?t(pF,VE(),uF(),UZ()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)})(pF,function(e,t,r,i){"use strict";function n(d){return d.target.depth}function a(d){return d.depth}function o(d,C){return C-1-d.height}function s(d,C){return d.sourceLinks.length?d.depth:C-1}function l(d){return d.targetLinks.length?d.depth:d.sourceLinks.length?t.min(d.sourceLinks,n)-1:0}function u(d){return function(){return d}}function f(d,C){return h(d.source,C.source)||d.index-C.index}function c(d,C){return h(d.target,C.target)||d.index-C.index}function h(d,C){return d.y0-C.y0}function v(d){return d.value}function p(d){return(d.y0+d.y1)/2}function _(d){return p(d.source)*d.value}function T(d){return p(d.target)*d.value}function g(d){return d.index}function A(d){return d.nodes}function b(d){return d.links}function w(d,C){var S=d.get(C);if(!S)throw new Error("missing: "+C);return S}var k=function(){var d=0,C=0,S=1,P=1,D=24,z=8,O=g,V=s,B=A,F=b,N=32,Z=2/3;function J(){var ae={nodes:B.apply(null,arguments),links:F.apply(null,arguments)};return re(ae),le(ae),fe(ae),K(ae,N),X(ae),ae}J.update=function(ae){return X(ae),ae},J.nodeId=function(ae){return arguments.length?(O=typeof ae=="function"?ae:u(ae),J):O},J.nodeAlign=function(ae){return arguments.length?(V=typeof ae=="function"?ae:u(ae),J):V},J.nodeWidth=function(ae){return arguments.length?(D=+ae,J):D},J.nodePadding=function(ae){return arguments.length?(z=+ae,J):z},J.nodes=function(ae){return arguments.length?(B=typeof ae=="function"?ae:u(ae),J):B},J.links=function(ae){return arguments.length?(F=typeof ae=="function"?ae:u(ae),J):F},J.size=function(ae){return arguments.length?(d=C=0,S=+ae[0],P=+ae[1],J):[S-d,P-C]},J.extent=function(ae){return arguments.length?(d=+ae[0][0],S=+ae[1][0],C=+ae[0][1],P=+ae[1][1],J):[[d,C],[S,P]]},J.iterations=function(ae){return arguments.length?(N=+ae,J):N};function re(ae){ae.nodes.forEach(function(_e,be){_e.index=be,_e.sourceLinks=[],_e.targetLinks=[]});var oe=r.map(ae.nodes,O);ae.links.forEach(function(_e,be){_e.index=be;var he=_e.source,ie=_e.target;typeof he!="object"&&(he=_e.source=w(oe,he)),typeof ie!="object"&&(ie=_e.target=w(oe,ie)),he.sourceLinks.push(_e),ie.targetLinks.push(_e)})}function le(ae){ae.nodes.forEach(function(oe){oe.value=Math.max(t.sum(oe.sourceLinks,v),t.sum(oe.targetLinks,v))})}function fe(ae){var oe,_e,be;for(oe=ae.nodes,_e=[],be=0;oe.length;++be,oe=_e,_e=[])oe.forEach(function(ie){ie.depth=be,ie.sourceLinks.forEach(function(ye){_e.indexOf(ye.target)<0&&_e.push(ye.target)})});for(oe=ae.nodes,_e=[],be=0;oe.length;++be,oe=_e,_e=[])oe.forEach(function(ie){ie.height=be,ie.targetLinks.forEach(function(ye){_e.indexOf(ye.source)<0&&_e.push(ye.source)})});var he=(S-d-D)/(be-1);ae.nodes.forEach(function(ie){ie.x1=(ie.x0=d+Math.max(0,Math.min(be-1,Math.floor(V.call(null,ie,be))))*he)+D})}function K(ae){var oe=r.nest().key(function(Ae){return Ae.x0}).sortKeys(t.ascending).entries(ae.nodes).map(function(Ae){return Ae.values});he(),ue();for(var _e=1,be=N;be>0;--be)ye(_e*=.99),ue(),ie(_e),ue();function he(){var Ae=t.max(oe,function(et){return et.length}),Re=Z*(P-C)/(Ae-1);z>Re&&(z=Re);var ze=t.min(oe,function(et){return(P-C-(et.length-1)*z)/t.sum(et,v)});oe.forEach(function(et){et.forEach(function(Le,Ie){Le.y1=(Le.y0=Ie)+Le.value*ze})}),ae.links.forEach(function(et){et.width=et.value*ze})}function ie(Ae){oe.forEach(function(Re){Re.forEach(function(ze){if(ze.targetLinks.length){var et=(t.sum(ze.targetLinks,_)/t.sum(ze.targetLinks,v)-p(ze))*Ae;ze.y0+=et,ze.y1+=et}})})}function ye(Ae){oe.slice().reverse().forEach(function(Re){Re.forEach(function(ze){if(ze.sourceLinks.length){var et=(t.sum(ze.sourceLinks,T)/t.sum(ze.sourceLinks,v)-p(ze))*Ae;ze.y0+=et,ze.y1+=et}})})}function ue(){oe.forEach(function(Ae){var Re,ze,et=C,Le=Ae.length,Ie;for(Ae.sort(h),Ie=0;Ie<Le;++Ie)Re=Ae[Ie],ze=et-Re.y0,ze>0&&(Re.y0+=ze,Re.y1+=ze),et=Re.y1+z;if(ze=et-z-P,ze>0)for(et=Re.y0-=ze,Re.y1-=ze,Ie=Le-2;Ie>=0;--Ie)Re=Ae[Ie],ze=Re.y1+z-et,ze>0&&(Re.y0-=ze,Re.y1-=ze),et=Re.y0})}}function X(ae){ae.nodes.forEach(function(oe){oe.sourceLinks.sort(c),oe.targetLinks.sort(f)}),ae.nodes.forEach(function(oe){var _e=oe.y0,be=_e;oe.sourceLinks.forEach(function(he){he.y0=_e+he.width/2,_e+=he.width}),oe.targetLinks.forEach(function(he){he.y1=be+he.width/2,be+=he.width})})}return J};function x(d){return[d.source.x1,d.y0]}function E(d){return[d.target.x0,d.y1]}var M=function(){return i.linkHorizontal().source(x).target(E)};e.sankey=k,e.sankeyCenter=l,e.sankeyLeft=a,e.sankeyRight=o,e.sankeyJustify=s,e.sankeyLinkHorizontal=M,Object.defineProperty(e,"__esModule",{value:!0})})});var WUe=ne((vmr,YUe)=>{var eYt=NZ();YUe.exports=function(t,r){var i=[],n=[],a=[],o={},s=[],l;function u(b){a[b]=!1,o.hasOwnProperty(b)&&Object.keys(o[b]).forEach(function(w){delete o[b][w],a[w]&&u(w)})}function f(b){var w=!1;n.push(b),a[b]=!0;var k,x;for(k=0;k<s[b].length;k++)x=s[b][k],x===l?(c(l,n),w=!0):a[x]||(w=f(x));if(w)u(b);else for(k=0;k<s[b].length;k++){x=s[b][k];var E=o[x];E||(E={},o[x]=E),E[x]=!0}return n.pop(),w}function c(b,w){var k=[].concat(w).concat(b);r?r(f):i.push(k)}function h(b){for(var w=0;w<t.length;w++)w<b&&(t[w]=[]),t[w]=t[w].filter(function(k){return k>=b})}function v(b){h(b);for(var w=t,k=eYt(w),x=k.components.filter(function(D){return D.length>1}),E=1/0,M,d=0;d<x.length;d++)for(var C=0;C<x[d].length;C++)x[d][C]<E&&(E=x[d][C],M=d);var S=x[M];if(!S)return!1;var P=t.map(function(D,z){return S.indexOf(z)===-1?[]:D.filter(function(O){return S.indexOf(O)!==-1})});return{leastVertex:E,adjList:P}}l=0;for(var p=t.length;l<p;){var _=v(l);if(l=_.leastVertex,s=_.adjList,s){for(var T=0;T<s.length;T++)for(var g=0;g<s[T].length;g++){var A=s[T][g];a[+A]=!1,o[A]={}}f(l),l=l+1}else l=p}if(!r)return i}});var ZUe=ne((gF,XUe)=>{(function(e,t){typeof gF=="object"&&typeof XUe!="undefined"?t(gF,VE(),uF(),UZ(),WUe()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape","elementary-circuits-directed-graph"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,null)})(gF,function(e,t,r,i,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;function a(Le){return Le.target.depth}function o(Le){return Le.depth}function s(Le,Ie){return Ie-1-Le.height}function l(Le,Ie){return Le.sourceLinks.length?Le.depth:Ie-1}function u(Le){return Le.targetLinks.length?Le.depth:Le.sourceLinks.length?t.min(Le.sourceLinks,a)-1:0}function f(Le){return function(){return Le}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Le){return typeof Le}:function(Le){return Le&&typeof Symbol=="function"&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le};function h(Le,Ie){return p(Le.source,Ie.source)||Le.index-Ie.index}function v(Le,Ie){return p(Le.target,Ie.target)||Le.index-Ie.index}function p(Le,Ie){return Le.partOfCycle===Ie.partOfCycle?Le.y0-Ie.y0:Le.circularLinkType==="top"||Ie.circularLinkType==="bottom"?-1:1}function _(Le){return Le.value}function T(Le){return(Le.y0+Le.y1)/2}function g(Le){return T(Le.source)}function A(Le){return T(Le.target)}function b(Le){return Le.index}function w(Le){return Le.nodes}function k(Le){return Le.links}function x(Le,Ie){var dt=Le.get(Ie);if(!dt)throw new Error("missing: "+Ie);return dt}function E(Le,Ie){return Ie(Le)}var M=25,d=10,C=.3;function S(){var Le=0,Ie=0,dt=1,ct=1,Ke=24,_t,zt=b,Et=l,Se=w,je=k,ht=32,nt=2,lt,rt=null;function Xe(){var qt={nodes:Se.apply(null,arguments),links:je.apply(null,arguments)};ft(qt),P(qt,zt,rt),gt(qt),fr(qt),D(qt,zt),nr(qt,ht,zt),ur(qt);for(var xt=4,At=0;At<xt;At++)ye(qt,ct,zt),ue(qt,ct,zt),be(qt,Ie,ct,zt),ye(qt,ct,zt),ue(qt,ct,zt);return et(qt,Ie,ct),N(qt,nt,ct,zt),qt}Xe.nodeId=function(qt){return arguments.length?(zt=typeof qt=="function"?qt:f(qt),Xe):zt},Xe.nodeAlign=function(qt){return arguments.length?(Et=typeof qt=="function"?qt:f(qt),Xe):Et},Xe.nodeWidth=function(qt){return arguments.length?(Ke=+qt,Xe):Ke},Xe.nodePadding=function(qt){return arguments.length?(_t=+qt,Xe):_t},Xe.nodes=function(qt){return arguments.length?(Se=typeof qt=="function"?qt:f(qt),Xe):Se},Xe.links=function(qt){return arguments.length?(je=typeof qt=="function"?qt:f(qt),Xe):je},Xe.size=function(qt){return arguments.length?(Le=Ie=0,dt=+qt[0],ct=+qt[1],Xe):[dt-Le,ct-Ie]},Xe.extent=function(qt){return arguments.length?(Le=+qt[0][0],dt=+qt[1][0],Ie=+qt[0][1],ct=+qt[1][1],Xe):[[Le,Ie],[dt,ct]]},Xe.iterations=function(qt){return arguments.length?(ht=+qt,Xe):ht},Xe.circularLinkGap=function(qt){return arguments.length?(nt=+qt,Xe):nt},Xe.nodePaddingRatio=function(qt){return arguments.length?(lt=+qt,Xe):lt},Xe.sortNodes=function(qt){return arguments.length?(rt=qt,Xe):rt},Xe.update=function(qt){return D(qt,zt),ur(qt),qt.links.forEach(function(xt){xt.circular&&(xt.circularLinkType=xt.y0+xt.y1<ct?"top":"bottom",xt.source.circularLinkType=xt.circularLinkType,xt.target.circularLinkType=xt.circularLinkType)}),ye(qt,ct,zt,!1),ue(qt,ct,zt),N(qt,nt,ct,zt),qt};function ft(qt){qt.nodes.forEach(function(At,Je){At.index=Je,At.sourceLinks=[],At.targetLinks=[]});var xt=r.map(qt.nodes,zt);return qt.links.forEach(function(At,Je){At.index=Je;var xe=At.source,ce=At.target;(typeof xe=="undefined"?"undefined":c(xe))!=="object"&&(xe=At.source=x(xt,xe)),(typeof ce=="undefined"?"undefined":c(ce))!=="object"&&(ce=At.target=x(xt,ce)),xe.sourceLinks.push(At),ce.targetLinks.push(At)}),qt}function gt(qt){qt.nodes.forEach(function(xt){xt.partOfCycle=!1,xt.value=Math.max(t.sum(xt.sourceLinks,_),t.sum(xt.targetLinks,_)),xt.sourceLinks.forEach(function(At){At.circular&&(xt.partOfCycle=!0,xt.circularLinkType=At.circularLinkType)}),xt.targetLinks.forEach(function(At){At.circular&&(xt.partOfCycle=!0,xt.circularLinkType=At.circularLinkType)})})}function Qt(qt){var xt=0,At=0,Je=0,xe=0,ce=t.max(qt.nodes,function(ge){return ge.column});return qt.links.forEach(function(ge){ge.circular&&(ge.circularLinkType=="top"?xt=xt+ge.width:At=At+ge.width,ge.target.column==0&&(xe=xe+ge.width),ge.source.column==ce&&(Je=Je+ge.width))}),xt=xt>0?xt+M+d:xt,At=At>0?At+M+d:At,Je=Je>0?Je+M+d:Je,xe=xe>0?xe+M+d:xe,{top:xt,bottom:At,left:xe,right:Je}}function Jt(qt,xt){var At=t.max(qt.nodes,function(Vt){return Vt.column}),Je=dt-Le,xe=ct-Ie,ce=Je+xt.right+xt.left,ge=xe+xt.top+xt.bottom,qe=Je/ce,yt=xe/ge;return Le=Le*qe+xt.left,dt=xt.right==0?dt:dt*qe,Ie=Ie*yt+xt.top,ct=ct*yt,qt.nodes.forEach(function(Vt){Vt.x0=Le+Vt.column*((dt-Le-Ke)/At),Vt.x1=Vt.x0+Ke}),yt}function fr(qt){var xt,At,Je;for(xt=qt.nodes,At=[],Je=0;xt.length;++Je,xt=At,At=[])xt.forEach(function(xe){xe.depth=Je,xe.sourceLinks.forEach(function(ce){At.indexOf(ce.target)<0&&!ce.circular&&At.push(ce.target)})});for(xt=qt.nodes,At=[],Je=0;xt.length;++Je,xt=At,At=[])xt.forEach(function(xe){xe.height=Je,xe.targetLinks.forEach(function(ce){At.indexOf(ce.source)<0&&!ce.circular&&At.push(ce.source)})});qt.nodes.forEach(function(xe){xe.column=Math.floor(Et.call(null,xe,Je))})}function nr(qt,xt,At){var Je=r.nest().key(function(Vt){return Vt.column}).sortKeys(t.ascending).entries(qt.nodes).map(function(Vt){return Vt.values});ge(At),yt();for(var xe=1,ce=xt;ce>0;--ce)qe(xe*=.99,At),yt();function ge(Vt){if(lt){var Ut=1/0;Je.forEach(function(Hr){var gr=ct*lt/(Hr.length+1);Ut=gr<Ut?gr:Ut}),_t=Ut}var br=t.min(Je,function(Hr){return(ct-Ie-(Hr.length-1)*_t)/t.sum(Hr,_)});br=br*C,qt.links.forEach(function(Hr){Hr.width=Hr.value*br});var xr=Qt(qt),Or=Jt(qt,xr);br=br*Or,qt.links.forEach(function(Hr){Hr.width=Hr.value*br}),Je.forEach(function(Hr){var gr=Hr.length;Hr.forEach(function(Ur,_n){Ur.depth==Je.length-1&&gr==1||Ur.depth==0&&gr==1?(Ur.y0=ct/2-Ur.value*br,Ur.y1=Ur.y0+Ur.value*br):Ur.partOfCycle?V(Ur,Vt)==0?(Ur.y0=ct/2+_n,Ur.y1=Ur.y0+Ur.value*br):Ur.circularLinkType=="top"?(Ur.y0=Ie+_n,Ur.y1=Ur.y0+Ur.value*br):(Ur.y0=ct-Ur.value*br-_n,Ur.y1=Ur.y0+Ur.value*br):xr.top==0||xr.bottom==0?(Ur.y0=(ct-Ie)/gr*_n,Ur.y1=Ur.y0+Ur.value*br):(Ur.y0=(ct-Ie)/2-gr/2+_n,Ur.y1=Ur.y0+Ur.value*br)})})}function qe(Vt,Ut){var br=Je.length;Je.forEach(function(xr){var Or=xr.length,Hr=xr[0].depth;xr.forEach(function(gr){var Ur;if((gr.sourceLinks.length||gr.targetLinks.length)&&!(gr.partOfCycle&&V(gr,Ut)>0))if(Hr==0&&Or==1)Ur=gr.y1-gr.y0,gr.y0=ct/2-Ur/2,gr.y1=ct/2+Ur/2;else if(Hr==br-1&&Or==1)Ur=gr.y1-gr.y0,gr.y0=ct/2-Ur/2,gr.y1=ct/2+Ur/2;else{var _n=0,si=t.mean(gr.sourceLinks,A),xn=t.mean(gr.targetLinks,g);si&&xn?_n=(si+xn)/2:_n=si||xn;var ci=(_n-T(gr))*Vt;gr.y0+=ci,gr.y1+=ci}})})}function yt(){Je.forEach(function(Vt){var Ut,br,xr=Ie,Or=Vt.length,Hr;for(Vt.sort(p),Hr=0;Hr<Or;++Hr)Ut=Vt[Hr],br=xr-Ut.y0,br>0&&(Ut.y0+=br,Ut.y1+=br),xr=Ut.y1+_t;if(br=xr-_t-ct,br>0)for(xr=Ut.y0-=br,Ut.y1-=br,Hr=Or-2;Hr>=0;--Hr)Ut=Vt[Hr],br=Ut.y1+_t-xr,br>0&&(Ut.y0-=br,Ut.y1-=br),xr=Ut.y0})}}function ur(qt){qt.nodes.forEach(function(xt){xt.sourceLinks.sort(v),xt.targetLinks.sort(h)}),qt.nodes.forEach(function(xt){var At=xt.y0,Je=At,xe=xt.y1,ce=xe;xt.sourceLinks.forEach(function(ge){ge.circular?(ge.y0=xe-ge.width/2,xe=xe-ge.width):(ge.y0=At+ge.width/2,At+=ge.width)}),xt.targetLinks.forEach(function(ge){ge.circular?(ge.y1=ce-ge.width/2,ce=ce-ge.width):(ge.y1=Je+ge.width/2,Je+=ge.width)})})}return Xe}function P(Le,Ie,dt){var ct=0;if(dt===null){for(var Ke=[],_t=0;_t<Le.links.length;_t++){var zt=Le.links[_t],Et=zt.source.index,Se=zt.target.index;Ke[Et]||(Ke[Et]=[]),Ke[Se]||(Ke[Se]=[]),Ke[Et].indexOf(Se)===-1&&Ke[Et].push(Se)}var je=n(Ke);je.sort(function(rt,Xe){return rt.length-Xe.length});var ht={};for(_t=0;_t<je.length;_t++){var nt=je[_t],lt=nt.slice(-2);ht[lt[0]]||(ht[lt[0]]={}),ht[lt[0]][lt[1]]=!0}Le.links.forEach(function(rt){var Xe=rt.target.index,ft=rt.source.index;Xe===ft||ht[ft]&&ht[ft][Xe]?(rt.circular=!0,rt.circularLinkID=ct,ct=ct+1):rt.circular=!1})}else Le.links.forEach(function(rt){rt.source[dt]<rt.target[dt]?rt.circular=!1:(rt.circular=!0,rt.circularLinkID=ct,ct=ct+1)})}function D(Le,Ie){var dt=0,ct=0;Le.links.forEach(function(Ke){Ke.circular&&(Ke.source.circularLinkType||Ke.target.circularLinkType?Ke.circularLinkType=Ke.source.circularLinkType?Ke.source.circularLinkType:Ke.target.circularLinkType:Ke.circularLinkType=dt<ct?"top":"bottom",Ke.circularLinkType=="top"?dt=dt+1:ct=ct+1,Le.nodes.forEach(function(_t){(E(_t,Ie)==E(Ke.source,Ie)||E(_t,Ie)==E(Ke.target,Ie))&&(_t.circularLinkType=Ke.circularLinkType)}))}),Le.links.forEach(function(Ke){Ke.circular&&(Ke.source.circularLinkType==Ke.target.circularLinkType&&(Ke.circularLinkType=Ke.source.circularLinkType),ze(Ke,Ie)&&(Ke.circularLinkType=Ke.source.circularLinkType))})}function z(Le){var Ie=Math.abs(Le.y1-Le.y0),dt=Math.abs(Le.target.x0-Le.source.x1);return Math.atan(dt/Ie)}function O(Le,Ie){return Le.source.column<Ie.target.column?!1:!(Le.target.column>Ie.source.column)}function V(Le,Ie){var dt=0;Le.sourceLinks.forEach(function(Ke){dt=Ke.circular&&!ze(Ke,Ie)?dt+1:dt});var ct=0;return Le.targetLinks.forEach(function(Ke){ct=Ke.circular&&!ze(Ke,Ie)?ct+1:ct}),dt+ct}function B(Le){var Ie=Le.source.sourceLinks,dt=0;Ie.forEach(function(_t){dt=_t.circular?dt+1:dt});var ct=Le.target.targetLinks,Ke=0;return ct.forEach(function(_t){Ke=_t.circular?Ke+1:Ke}),!(dt>1||Ke>1)}function F(Le,Ie,dt){return Le.sort(J),Le.forEach(function(ct,Ke){var _t=0;if(ze(ct,dt)&&B(ct))ct.circularPathData.verticalBuffer=_t+ct.width/2;else{var zt=0;for(zt;zt<Ke;zt++)if(O(Le[Ke],Le[zt])){var Et=Le[zt].circularPathData.verticalBuffer+Le[zt].width/2+Ie;_t=Et>_t?Et:_t}ct.circularPathData.verticalBuffer=_t+ct.width/2}}),Le}function N(Le,Ie,dt,ct){var Ke=5,_t=t.min(Le.links,function(Se){return Se.source.y0});Le.links.forEach(function(Se){Se.circular&&(Se.circularPathData={})});var zt=Le.links.filter(function(Se){return Se.circularLinkType=="top"});F(zt,Ie,ct);var Et=Le.links.filter(function(Se){return Se.circularLinkType=="bottom"});F(Et,Ie,ct),Le.links.forEach(function(Se){if(Se.circular){if(Se.circularPathData.arcRadius=Se.width+d,Se.circularPathData.leftNodeBuffer=Ke,Se.circularPathData.rightNodeBuffer=Ke,Se.circularPathData.sourceWidth=Se.source.x1-Se.source.x0,Se.circularPathData.sourceX=Se.source.x0+Se.circularPathData.sourceWidth,Se.circularPathData.targetX=Se.target.x0,Se.circularPathData.sourceY=Se.y0,Se.circularPathData.targetY=Se.y1,ze(Se,ct)&&B(Se))Se.circularPathData.leftSmallArcRadius=d+Se.width/2,Se.circularPathData.leftLargeArcRadius=d+Se.width/2,Se.circularPathData.rightSmallArcRadius=d+Se.width/2,Se.circularPathData.rightLargeArcRadius=d+Se.width/2,Se.circularLinkType=="bottom"?(Se.circularPathData.verticalFullExtent=Se.source.y1+M+Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.rightLargeArcRadius):(Se.circularPathData.verticalFullExtent=Se.source.y0-M-Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.rightLargeArcRadius);else{var je=Se.source.column,ht=Se.circularLinkType,nt=Le.links.filter(function(Xe){return Xe.source.column==je&&Xe.circularLinkType==ht});Se.circularLinkType=="bottom"?nt.sort(le):nt.sort(re);var lt=0;nt.forEach(function(Xe,ft){Xe.circularLinkID==Se.circularLinkID&&(Se.circularPathData.leftSmallArcRadius=d+Se.width/2+lt,Se.circularPathData.leftLargeArcRadius=d+Se.width/2+ft*Ie+lt),lt=lt+Xe.width}),je=Se.target.column,nt=Le.links.filter(function(Xe){return Xe.target.column==je&&Xe.circularLinkType==ht}),Se.circularLinkType=="bottom"?nt.sort(K):nt.sort(fe),lt=0,nt.forEach(function(Xe,ft){Xe.circularLinkID==Se.circularLinkID&&(Se.circularPathData.rightSmallArcRadius=d+Se.width/2+lt,Se.circularPathData.rightLargeArcRadius=d+Se.width/2+ft*Ie+lt),lt=lt+Xe.width}),Se.circularLinkType=="bottom"?(Se.circularPathData.verticalFullExtent=Math.max(dt,Se.source.y1,Se.target.y1)+M+Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.rightLargeArcRadius):(Se.circularPathData.verticalFullExtent=_t-M-Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.rightLargeArcRadius)}Se.circularPathData.leftInnerExtent=Se.circularPathData.sourceX+Se.circularPathData.leftNodeBuffer,Se.circularPathData.rightInnerExtent=Se.circularPathData.targetX-Se.circularPathData.rightNodeBuffer,Se.circularPathData.leftFullExtent=Se.circularPathData.sourceX+Se.circularPathData.leftLargeArcRadius+Se.circularPathData.leftNodeBuffer,Se.circularPathData.rightFullExtent=Se.circularPathData.targetX-Se.circularPathData.rightLargeArcRadius-Se.circularPathData.rightNodeBuffer}if(Se.circular)Se.path=Z(Se);else{var rt=i.linkHorizontal().source(function(Xe){var ft=Xe.source.x0+(Xe.source.x1-Xe.source.x0),gt=Xe.y0;return[ft,gt]}).target(function(Xe){var ft=Xe.target.x0,gt=Xe.y1;return[ft,gt]});Se.path=rt(Se)}})}function Z(Le){var Ie="";return Le.circularLinkType=="top"?Ie="M"+Le.circularPathData.sourceX+" "+Le.circularPathData.sourceY+" L"+Le.circularPathData.leftInnerExtent+" "+Le.circularPathData.sourceY+" A"+Le.circularPathData.leftLargeArcRadius+" "+Le.circularPathData.leftSmallArcRadius+" 0 0 0 "+Le.circularPathData.leftFullExtent+" "+(Le.circularPathData.sourceY-Le.circularPathData.leftSmallArcRadius)+" L"+Le.circularPathData.leftFullExtent+" "+Le.circularPathData.verticalLeftInnerExtent+" A"+Le.circularPathData.leftLargeArcRadius+" "+Le.circularPathData.leftLargeArcRadius+" 0 0 0 "+Le.circularPathData.leftInnerExtent+" "+Le.circularPathData.verticalFullExtent+" L"+Le.circularPathData.rightInnerExtent+" "+Le.circularPathData.verticalFullExtent+" A"+Le.circularPathData.rightLargeArcRadius+" "+Le.circularPathData.rightLargeArcRadius+" 0 0 0 "+Le.circularPathData.rightFullExtent+" "+Le.circularPathData.verticalRightInnerExtent+" L"+Le.circularPathData.rightFullExtent+" "+(Le.circularPathData.targetY-Le.circularPathData.rightSmallArcRadius)+" A"+Le.circularPathData.rightLargeArcRadius+" "+Le.circularPathData.rightSmallArcRadius+" 0 0 0 "+Le.circularPathData.rightInnerExtent+" "+Le.circularPathData.targetY+" L"+Le.circularPathData.targetX+" "+Le.circularPathData.targetY:Ie="M"+Le.circularPathData.sourceX+" "+Le.circularPathData.sourceY+" L"+Le.circularPathData.leftInnerExtent+" "+Le.circularPathData.sourceY+" A"+Le.circularPathData.leftLargeArcRadius+" "+Le.circularPathData.leftSmallArcRadius+" 0 0 1 "+Le.circularPathData.leftFullExtent+" "+(Le.circularPathData.sourceY+Le.circularPathData.leftSmallArcRadius)+" L"+Le.circularPathData.leftFullExtent+" "+Le.circularPathData.verticalLeftInnerExtent+" A"+Le.circularPathData.leftLargeArcRadius+" "+Le.circularPathData.leftLargeArcRadius+" 0 0 1 "+Le.circularPathData.leftInnerExtent+" "+Le.circularPathData.verticalFullExtent+" L"+Le.circularPathData.rightInnerExtent+" "+Le.circularPathData.verticalFullExtent+" A"+Le.circularPathData.rightLargeArcRadius+" "+Le.circularPathData.rightLargeArcRadius+" 0 0 1 "+Le.circularPathData.rightFullExtent+" "+Le.circularPathData.verticalRightInnerExtent+" L"+Le.circularPathData.rightFullExtent+" "+(Le.circularPathData.targetY+Le.circularPathData.rightSmallArcRadius)+" A"+Le.circularPathData.rightLargeArcRadius+" "+Le.circularPathData.rightSmallArcRadius+" 0 0 1 "+Le.circularPathData.rightInnerExtent+" "+Le.circularPathData.targetY+" L"+Le.circularPathData.targetX+" "+Le.circularPathData.targetY,Ie}function J(Le,Ie){return X(Le)==X(Ie)?Le.circularLinkType=="bottom"?le(Le,Ie):re(Le,Ie):X(Ie)-X(Le)}function re(Le,Ie){return Le.y0-Ie.y0}function le(Le,Ie){return Ie.y0-Le.y0}function fe(Le,Ie){return Le.y1-Ie.y1}function K(Le,Ie){return Ie.y1-Le.y1}function X(Le){return Le.target.column-Le.source.column}function ae(Le){return Le.target.x0-Le.source.x1}function oe(Le,Ie){var dt=z(Le),ct=ae(Ie)/Math.tan(dt),Ke=Re(Le)=="up"?Le.y1+ct:Le.y1-ct;return Ke}function _e(Le,Ie){var dt=z(Le),ct=ae(Ie)/Math.tan(dt),Ke=Re(Le)=="up"?Le.y1-ct:Le.y1+ct;return Ke}function be(Le,Ie,dt,ct){Le.links.forEach(function(Ke){if(!Ke.circular&&Ke.target.column-Ke.source.column>1){var _t=Ke.source.column+1,zt=Ke.target.column-1,Et=1,Se=zt-_t+1;for(Et=1;_t<=zt;_t++,Et++)Le.nodes.forEach(function(je){if(je.column==_t){var ht=Et/(Se+1),nt=Math.pow(1-ht,3),lt=3*ht*Math.pow(1-ht,2),rt=3*Math.pow(ht,2)*(1-ht),Xe=Math.pow(ht,3),ft=nt*Ke.y0+lt*Ke.y0+rt*Ke.y1+Xe*Ke.y1,gt=ft-Ke.width/2,Qt=ft+Ke.width/2,Jt;gt>je.y0&&gt<je.y1?(Jt=je.y1-gt+10,Jt=je.circularLinkType=="bottom"?Jt:-Jt,je=ie(je,Jt,Ie,dt),Le.nodes.forEach(function(fr){E(fr,ct)==E(je,ct)||fr.column!=je.column||he(je,fr)&&ie(fr,Jt,Ie,dt)})):Qt>je.y0&&Qt<je.y1?(Jt=Qt-je.y0+10,je=ie(je,Jt,Ie,dt),Le.nodes.forEach(function(fr){E(fr,ct)==E(je,ct)||fr.column!=je.column||fr.y0<je.y1&&fr.y1>je.y1&&ie(fr,Jt,Ie,dt)})):gt<je.y0&&Qt>je.y1&&(Jt=Qt-je.y0+10,je=ie(je,Jt,Ie,dt),Le.nodes.forEach(function(fr){E(fr,ct)==E(je,ct)||fr.column!=je.column||fr.y0<je.y1&&fr.y1>je.y1&&ie(fr,Jt,Ie,dt)}))}})}})}function he(Le,Ie){return Le.y0>Ie.y0&&Le.y0<Ie.y1||Le.y1>Ie.y0&&Le.y1<Ie.y1?!0:Le.y0<Ie.y0&&Le.y1>Ie.y1}function ie(Le,Ie,dt,ct){return Le.y0+Ie>=dt&&Le.y1+Ie<=ct&&(Le.y0=Le.y0+Ie,Le.y1=Le.y1+Ie,Le.targetLinks.forEach(function(Ke){Ke.y1=Ke.y1+Ie}),Le.sourceLinks.forEach(function(Ke){Ke.y0=Ke.y0+Ie})),Le}function ye(Le,Ie,dt,ct){Le.nodes.forEach(function(Ke){ct&&Ke.y+(Ke.y1-Ke.y0)>Ie&&(Ke.y=Ke.y-(Ke.y+(Ke.y1-Ke.y0)-Ie));var _t=Le.links.filter(function(Se){return E(Se.source,dt)==E(Ke,dt)}),zt=_t.length;zt>1&&_t.sort(function(Se,je){if(!Se.circular&&!je.circular){if(Se.target.column==je.target.column)return Se.y1-je.y1;if(Ae(Se,je)){if(Se.target.column>je.target.column){var ht=_e(je,Se);return Se.y1-ht}if(je.target.column>Se.target.column){var nt=_e(Se,je);return nt-je.y1}}else return Se.y1-je.y1}if(Se.circular&&!je.circular)return Se.circularLinkType=="top"?-1:1;if(je.circular&&!Se.circular)return je.circularLinkType=="top"?1:-1;if(Se.circular&&je.circular)return Se.circularLinkType===je.circularLinkType&&Se.circularLinkType=="top"?Se.target.column===je.target.column?Se.target.y1-je.target.y1:je.target.column-Se.target.column:Se.circularLinkType===je.circularLinkType&&Se.circularLinkType=="bottom"?Se.target.column===je.target.column?je.target.y1-Se.target.y1:Se.target.column-je.target.column:Se.circularLinkType=="top"?-1:1});var Et=Ke.y0;_t.forEach(function(Se){Se.y0=Et+Se.width/2,Et=Et+Se.width}),_t.forEach(function(Se,je){if(Se.circularLinkType=="bottom"){var ht=je+1,nt=0;for(ht;ht<zt;ht++)nt=nt+_t[ht].width;Se.y0=Ke.y1-nt-Se.width/2}})})}function ue(Le,Ie,dt){Le.nodes.forEach(function(ct){var Ke=Le.links.filter(function(Et){return E(Et.target,dt)==E(ct,dt)}),_t=Ke.length;_t>1&&Ke.sort(function(Et,Se){if(!Et.circular&&!Se.circular){if(Et.source.column==Se.source.column)return Et.y0-Se.y0;if(Ae(Et,Se)){if(Se.source.column<Et.source.column){var je=oe(Se,Et);return Et.y0-je}if(Et.source.column<Se.source.column){var ht=oe(Et,Se);return ht-Se.y0}}else return Et.y0-Se.y0}if(Et.circular&&!Se.circular)return Et.circularLinkType=="top"?-1:1;if(Se.circular&&!Et.circular)return Se.circularLinkType=="top"?1:-1;if(Et.circular&&Se.circular)return Et.circularLinkType===Se.circularLinkType&&Et.circularLinkType=="top"?Et.source.column===Se.source.column?Et.source.y1-Se.source.y1:Et.source.column-Se.source.column:Et.circularLinkType===Se.circularLinkType&&Et.circularLinkType=="bottom"?Et.source.column===Se.source.column?Et.source.y1-Se.source.y1:Se.source.column-Et.source.column:Et.circularLinkType=="top"?-1:1});var zt=ct.y0;Ke.forEach(function(Et){Et.y1=zt+Et.width/2,zt=zt+Et.width}),Ke.forEach(function(Et,Se){if(Et.circularLinkType=="bottom"){var je=Se+1,ht=0;for(je;je<_t;je++)ht=ht+Ke[je].width;Et.y1=ct.y1-ht-Et.width/2}})})}function Ae(Le,Ie){return Re(Le)==Re(Ie)}function Re(Le){return Le.y0-Le.y1>0?"up":"down"}function ze(Le,Ie){return E(Le.source,Ie)==E(Le.target,Ie)}function et(Le,Ie,dt){var ct=Le.nodes,Ke=Le.links,_t=!1,zt=!1;if(Ke.forEach(function(lt){lt.circularLinkType=="top"?_t=!0:lt.circularLinkType=="bottom"&&(zt=!0)}),_t==!1||zt==!1){var Et=t.min(ct,function(lt){return lt.y0}),Se=t.max(ct,function(lt){return lt.y1}),je=Se-Et,ht=dt-Ie,nt=ht/je;ct.forEach(function(lt){var rt=(lt.y1-lt.y0)*nt;lt.y0=(lt.y0-Et)*nt,lt.y1=lt.y0+rt}),Ke.forEach(function(lt){lt.y0=(lt.y0-Et)*nt,lt.y1=(lt.y1-Et)*nt,lt.width=lt.width*nt})}}e.sankeyCircular=S,e.sankeyCenter=u,e.sankeyLeft=o,e.sankeyRight=s,e.sankeyJustify=l,Object.defineProperty(e,"__esModule",{value:!0})})});var VZ=ne((dmr,jUe)=>{"use strict";jUe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}});var sVe=ne((pmr,oVe)=>{"use strict";var KUe=BUe(),tYt=(M_(),Wb(A_)).interpolateNumber,gT=Ai(),R5=GUe(),rYt=ZUe(),Ds=VZ(),yT=Xf(),Q_=_i(),nYt=aa(),ky=Wt(),WZ=ky.strTranslate,iYt=ky.strRotate,XZ=gg(),D5=XZ.keyFun,yF=XZ.repeat,tVe=XZ.unwrap,HZ=Es(),aYt=wi(),rVe=Tf(),oYt=rVe.CAP_SHIFT,sYt=rVe.LINE_SPACING,lYt=3;function uYt(e,t,r){var i=tVe(t),n=i.trace,a=n.domain,o=n.orientation==="h",s=n.node.pad,l=n.node.thickness,u={justify:R5.sankeyJustify,left:R5.sankeyLeft,right:R5.sankeyRight,center:R5.sankeyCenter}[n.node.align],f=e.width*(a.x[1]-a.x[0]),c=e.height*(a.y[1]-a.y[0]),h=i._nodes,v=i._links,p=i.circular,_;p?_=rYt.sankeyCircular().circularLinkGap(0):_=R5.sankey(),_.iterations(Ds.sankeyIterations).size(o?[f,c]:[c,f]).nodeWidth(l).nodePadding(s).nodeId(function(z){return z.pointNumber}).nodeAlign(u).nodes(h).links(v);var T=_();_.nodePadding()<s&&ky.warn("node.pad was reduced to ",_.nodePadding()," to fit within the figure.");var g,A,b;for(var w in i._groupLookup){var k=parseInt(i._groupLookup[w]),x;for(g=0;g<T.nodes.length;g++)if(T.nodes[g].pointNumber===k){x=T.nodes[g];break}if(x){var E={pointNumber:parseInt(w),x0:x.x0,x1:x.x1,y0:x.y0,y1:x.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};T.nodes.unshift(E),x.childrenNodes.unshift(E)}}function M(){for(g=0;g<T.nodes.length;g++){var z=T.nodes[g],O={},V,B;for(A=0;A<z.targetLinks.length;A++)B=z.targetLinks[A],V=B.source.pointNumber+":"+B.target.pointNumber,O.hasOwnProperty(V)||(O[V]=[]),O[V].push(B);var F=Object.keys(O);for(A=0;A<F.length;A++){V=F[A];var N=O[V],Z=0,J={};for(b=0;b<N.length;b++)B=N[b],J[B.label]||(J[B.label]=0),J[B.label]+=B.value,Z+=B.value;for(b=0;b<N.length;b++)B=N[b],B.flow={value:Z,labelConcentration:J[B.label]/Z,concentration:B.value/Z,links:N},B.concentrationscale&&(B.color=yT(B.concentrationscale(B.flow.labelConcentration)))}var re=0;for(A=0;A<z.sourceLinks.length;A++)re+=z.sourceLinks[A].value;for(A=0;A<z.sourceLinks.length;A++)B=z.sourceLinks[A],B.concentrationOut=B.value/re;var le=0;for(A=0;A<z.targetLinks.length;A++)le+=z.targetLinks[A].value;for(A=0;A<z.targetLinks.length;A++)B=z.targetLinks[A],B.concenrationIn=B.value/le}}M();function d(z){z.forEach(function(O){var V,B,F=0,N=O.length,Z;for(O.sort(function(J,re){return J.y0-re.y0}),Z=0;Z<N;++Z)V=O[Z],V.y0>=F||(B=F-V.y0,B>1e-6&&(V.y0+=B,V.y1+=B)),F=V.y1+s})}function C(z){var O=z.map(function(re,le){return{x0:re.x0,index:le}}).sort(function(re,le){return re.x0-le.x0}),V=[],B=-1,F,N=-1/0,Z;for(g=0;g<O.length;g++){var J=z[O[g].index];J.x0>N+l&&(B+=1,F=J.x0),N=J.x0,V[B]||(V[B]=[]),V[B].push(J),Z=F-J.x0,J.x0+=Z,J.x1+=Z}return V}if(n.node.x.length&&n.node.y.length){for(g=0;g<Math.min(n.node.x.length,n.node.y.length,T.nodes.length);g++)if(n.node.x[g]&&n.node.y[g]){var S=[n.node.x[g]*f,n.node.y[g]*c];T.nodes[g].x0=S[0]-l/2,T.nodes[g].x1=S[0]+l/2;var P=T.nodes[g].y1-T.nodes[g].y0;T.nodes[g].y0=S[1]-P/2,T.nodes[g].y1=S[1]+P/2}if(n.arrangement==="snap"){h=T.nodes;var D=C(h);d(D)}_.update(T)}return{circular:p,key:r,trace:n,guid:ky.randstr(),horizontal:o,width:f,height:c,nodePad:n.node.pad,nodeLineColor:n.node.line.color,nodeLineWidth:n.node.line.width,linkLineColor:n.link.line.color,linkLineWidth:n.link.line.width,linkArrowLength:n.link.arrowlen,valueFormat:n.valueformat,valueSuffix:n.valuesuffix,textFont:n.textfont,translateX:a.x[0]*e.width+e.margin.l,translateY:e.height-a.y[1]*e.height+e.margin.t,dragParallel:o?c:f,dragPerpendicular:o?f:c,arrangement:n.arrangement,sankey:_,graph:T,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function fYt(e,t,r){var i=yT(t.color),n=yT(t.hovercolor),a=t.source.label+"|"+t.target.label,o=a+"__"+r;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:o,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:Q_.tinyRGB(i),tinyColorAlpha:i.getAlpha(),tinyColorHoverHue:Q_.tinyRGB(n),tinyColorHoverAlpha:n.getAlpha(),linkPath:ZZ,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function cYt(e,t){var r="",i=e.width/2,n=e.circularPathData;return e.circularLinkType==="top"?r="M "+(n.targetX-t)+" "+(n.targetY+i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 1 "+(n.rightFullExtent-i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 1 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY-n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.leftInnerExtent+" "+(n.sourceY-i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 0 "+(n.leftFullExtent-i)+" "+(n.sourceY-n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 0 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"L"+(n.targetX-t)+" "+(n.targetY-i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z":r="M "+(n.targetX-t)+" "+(n.targetY-i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 0 "+(n.rightFullExtent-i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 0 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY+n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.leftInnerExtent+" "+(n.sourceY+i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 1 "+(n.leftFullExtent-i)+" "+(n.sourceY+n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 1 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"L"+(n.targetX-t)+" "+(n.targetY+i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z",r}function ZZ(){var e=.5;function t(r){var i=r.linkArrowLength;if(r.link.circular)return cYt(r.link,i);var n=Math.abs((r.link.target.x0-r.link.source.x1)/2);i>n&&(i=n);var a=r.link.source.x1,o=r.link.target.x0-i,s=tYt(a,o),l=s(e),u=s(1-e),f=r.link.y0-r.link.width/2,c=r.link.y0+r.link.width/2,h=r.link.y1-r.link.width/2,v=r.link.y1+r.link.width/2,p="M"+a+","+f,_="C"+l+","+f+" "+u+","+h+" "+o+","+h,T="C"+u+","+v+" "+l+","+c+" "+a+","+c,g=i>0?"L"+(o+i)+","+(h+r.link.width/2):"";return g+="L"+o+","+v,p+_+g+T+"Z"}return t}function hYt(e,t){var r=yT(t.color),i=Ds.nodePadAcross,n=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var a=t.dx,o=Math.max(.5,t.dy),s="node_"+t.pointNumber;return t.group&&(s=ky.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(a),visibleHeight:o,zoneX:-i,zoneY:-n,zoneWidth:a+2*i,zoneHeight:o+2*n,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:t.originalLayer===1,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:Q_.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function YZ(e){e.attr("transform",function(t){return WZ(t.node.x0.toFixed(3),t.node.y0.toFixed(3))})}function vYt(e){e.call(YZ)}function nVe(e,t){e.call(vYt),t.attr("d",ZZ())}function JUe(e){e.attr("width",function(t){return t.node.x1-t.node.x0}).attr("height",function(t){return t.visibleHeight})}function GZ(e){return e.link.width>1||e.linkLineWidth>0}function QUe(e){var t=WZ(e.translateX,e.translateY);return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function $Ue(e,t,r){e.on(".basic",null).on("mouseover.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.hover(this,i,t),i.interactionState.hovered=[this,i])}).on("mousemove.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.follow(this,i),i.interactionState.hovered=[this,i])}).on("mouseout.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.unhover(this,i,t),i.interactionState.hovered=!1)}).on("click.basic",function(i){i.interactionState.hovered&&(r.unhover(this,i,t),i.interactionState.hovered=!1),!i.interactionState.dragInProgress&&!i.partOfGroup&&r.select(this,i,t)})}function dYt(e,t,r,i){var n=gT.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(a){if(a.arrangement!=="fixed"&&(ky.ensureSingle(i._fullLayout._infolayer,"g","dragcover",function(s){i._fullLayout._dragCover=s}),ky.raiseToTop(this),a.interactionState.dragInProgress=a.node,eVe(a.node),a.interactionState.hovered&&(r.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),a.arrangement==="snap")){var o=a.traceId+"|"+a.key;a.forceLayouts[o]?a.forceLayouts[o].alpha(1):pYt(e,o,a,i),gYt(e,t,a,o,i)}}).on("drag",function(a){if(a.arrangement!=="fixed"){var o=gT.event.x,s=gT.event.y;a.arrangement==="snap"?(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2,a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2):(a.arrangement==="freeform"&&(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2),s=Math.max(0,Math.min(a.size-a.visibleHeight/2,s)),a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2),eVe(a.node),a.arrangement!=="snap"&&(a.sankey.update(a.graph),nVe(e.filter(aVe(a)),t))}}).on("dragend",function(a){if(a.arrangement!=="fixed"){a.interactionState.dragInProgress=!1;for(var o=0;o<a.node.childrenNodes.length;o++)a.node.childrenNodes[o].x=a.node.x,a.node.childrenNodes[o].y=a.node.y;a.arrangement!=="snap"&&iVe(a,i)}});e.on(".drag",null).call(n)}function pYt(e,t,r,i){xYt(r.graph.nodes);var n=r.graph.nodes.filter(function(a){return a.originalX===r.node.originalX}).filter(function(a){return!a.partOfGroup});r.forceLayouts[t]=KUe.forceSimulation(n).alphaDecay(0).force("collide",KUe.forceCollide().radius(function(a){return a.dy/2+r.nodePad/2}).strength(1).iterations(Ds.forceIterations)).force("constrain",yYt(e,t,n,r,i)).stop()}function gYt(e,t,r,i,n){window.requestAnimationFrame(function a(){var o;for(o=0;o<Ds.forceTicksPerFrame;o++)r.forceLayouts[i].tick();var s=r.graph.nodes;if(_Yt(s),r.sankey.update(r.graph),nVe(e.filter(aVe(r)),t),r.forceLayouts[i].alpha()>0)window.requestAnimationFrame(a);else{var l=r.node.originalX;r.node.x0=l-r.visibleWidth/2,r.node.x1=l+r.visibleWidth/2,iVe(r,n)}})}function yYt(e,t,r,i){return function(){for(var a=0,o=0;o<r.length;o++){var s=r[o];s===i.interactionState.dragInProgress?(s.x=s.lastDraggedX,s.y=s.lastDraggedY):(s.vx=(s.originalX-s.x)/Ds.forceTicksPerFrame,s.y=Math.min(i.size-s.dy/2,Math.max(s.dy/2,s.y))),a=Math.max(a,Math.abs(s.vx),Math.abs(s.vy))}!i.interactionState.dragInProgress&&a<.1&&i.forceLayouts[t].alpha()>0&&i.forceLayouts[t].alpha(0)}}function iVe(e,t){for(var r=[],i=[],n=0;n<e.graph.nodes.length;n++){var a=(e.graph.nodes[n].x0+e.graph.nodes[n].x1)/2,o=(e.graph.nodes[n].y0+e.graph.nodes[n].y1)/2;r.push(a/e.figure.width),i.push(o/e.figure.height)}aYt.call("_guiRestyle",t,{"node.x":[r],"node.y":[i]},e.trace.index).then(function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()})}function mYt(e){var t=[],r;for(r=0;r<e.length;r++)e[r].originalX=(e[r].x0+e[r].x1)/2,e[r].originalY=(e[r].y0+e[r].y1)/2,t.indexOf(e[r].originalX)===-1&&t.push(e[r].originalX);for(t.sort(function(i,n){return i-n}),r=0;r<e.length;r++)e[r].originalLayerIndex=t.indexOf(e[r].originalX),e[r].originalLayer=e[r].originalLayerIndex/(t.length-1)}function eVe(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function aVe(e){return function(t){return t.node.originalX===e.node.originalX}}function xYt(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}function _Yt(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}oVe.exports=function(e,t,r,i,n){var a=e._context.staticPlot,o=!1;ky.ensureSingle(e._fullLayout._infolayer,"g","first-render",function(){o=!0});var s=e._fullLayout._dragCover,l=r.filter(function(T){return tVe(T).trace.visible}).map(uYt.bind(null,i)),u=t.selectAll("."+Ds.cn.sankey).data(l,D5);u.exit().remove(),u.enter().append("g").classed(Ds.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",a?"none":"auto").attr("transform",QUe),u.each(function(T,g){e._fullData[g]._sankey=T;var A="bgsankey-"+T.trace.uid+"-"+g;ky.ensureSingle(e._fullLayout._draggers,"rect",A),e._fullData[g]._bgRect=gT.select("."+A),e._fullData[g]._bgRect.style("pointer-events",a?"none":"all").attr("width",T.width).attr("height",T.height).attr("x",T.translateX).attr("y",T.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),u.transition().ease(Ds.ease).duration(Ds.duration).attr("transform",QUe);var f=u.selectAll("."+Ds.cn.sankeyLinks).data(yF,D5);f.enter().append("g").classed(Ds.cn.sankeyLinks,!0).style("fill","none");var c=f.selectAll("."+Ds.cn.sankeyLink).data(function(T){var g=T.graph.links;return g.filter(function(A){return A.value}).map(fYt.bind(null,T))},D5);c.enter().append("path").classed(Ds.cn.sankeyLink,!0).call($Ue,u,n.linkEvents),c.style("stroke",function(T){return GZ(T)?Q_.tinyRGB(yT(T.linkLineColor)):T.tinyColorHue}).style("stroke-opacity",function(T){return GZ(T)?Q_.opacity(T.linkLineColor):T.tinyColorAlpha}).style("fill",function(T){return T.tinyColorHue}).style("fill-opacity",function(T){return T.tinyColorAlpha}).style("stroke-width",function(T){return GZ(T)?T.linkLineWidth:1}).attr("d",ZZ()),c.style("opacity",function(){return e._context.staticPlot||o||s?1:0}).transition().ease(Ds.ease).duration(Ds.duration).style("opacity",1),c.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var h=u.selectAll("."+Ds.cn.sankeyNodeSet).data(yF,D5);h.enter().append("g").classed(Ds.cn.sankeyNodeSet,!0),h.style("cursor",function(T){switch(T.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var v=h.selectAll("."+Ds.cn.sankeyNode).data(function(T){var g=T.graph.nodes;return mYt(g),g.map(hYt.bind(null,T))},D5);v.enter().append("g").classed(Ds.cn.sankeyNode,!0).call(YZ).style("opacity",function(T){return(e._context.staticPlot||o)&&!T.partOfGroup?1:0}),v.call($Ue,u,n.nodeEvents).call(dYt,c,n,e),v.transition().ease(Ds.ease).duration(Ds.duration).call(YZ).style("opacity",function(T){return T.partOfGroup?0:1}),v.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var p=v.selectAll("."+Ds.cn.nodeRect).data(yF);p.enter().append("rect").classed(Ds.cn.nodeRect,!0).call(JUe),p.style("stroke-width",function(T){return T.nodeLineWidth}).style("stroke",function(T){return Q_.tinyRGB(yT(T.nodeLineColor))}).style("stroke-opacity",function(T){return Q_.opacity(T.nodeLineColor)}).style("fill",function(T){return T.tinyColorHue}).style("fill-opacity",function(T){return T.tinyColorAlpha}),p.transition().ease(Ds.ease).duration(Ds.duration).call(JUe);var _=v.selectAll("."+Ds.cn.nodeLabel).data(yF);_.enter().append("text").classed(Ds.cn.nodeLabel,!0).style("cursor","default"),_.attr("data-notex",1).text(function(T){return T.node.label}).each(function(T){var g=gT.select(this);nYt.font(g,T.textFont),HZ.convertToTspans(g,e)}).style("text-shadow",HZ.makeTextShadow(e._fullLayout.paper_bgcolor)).attr("text-anchor",function(T){return T.horizontal&&T.left?"end":"start"}).attr("transform",function(T){var g=gT.select(this),A=HZ.lineCount(g),b=T.textFont.size*((A-1)*sYt-oYt),w=T.nodeLineWidth/2+lYt,k=((T.horizontal?T.visibleHeight:T.visibleWidth)-b)/2;T.horizontal&&(T.left?w=-w:w+=T.visibleWidth);var x=T.horizontal?"":"scale(-1,1)"+iYt(90);return WZ(T.horizontal?w:k,T.horizontal?k:w)+x}),_.transition().ease(Ds.ease).duration(Ds.duration)}});var JZ=ne((gmr,gVe)=>{"use strict";var rv=Ai(),KZ=Wt(),mF=KZ.numberFormat,bYt=sVe(),mT=Ol(),wYt=_i(),E1=VZ().cn,I5=KZ._;function lVe(e){return e!==""}function xT(e,t){return e.filter(function(r){return r.key===t.traceId})}function uVe(e,t){rv.select(e).select("path").style("fill-opacity",t),rv.select(e).select("rect").style("fill-opacity",t)}function fVe(e){rv.select(e).select("text.name").style("fill","black")}function cVe(e){return function(t){return e.node.sourceLinks.indexOf(t.link)!==-1||e.node.targetLinks.indexOf(t.link)!==-1}}function hVe(e){return function(t){return t.node.sourceLinks.indexOf(e.link)!==-1||t.node.targetLinks.indexOf(e.link)!==-1}}function vVe(e,t,r){t&&r&&xT(r,t).selectAll("."+E1.sankeyLink).filter(cVe(t)).call(dVe.bind(0,t,r,!1))}function jZ(e,t,r){t&&r&&xT(r,t).selectAll("."+E1.sankeyLink).filter(cVe(t)).call(pVe.bind(0,t,r,!1))}function dVe(e,t,r,i){i.style("fill",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverHue}).style("fill-opacity",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverAlpha}),i.each(function(n){var a=n.link.label;a!==""&&xT(t,e).selectAll("."+E1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverHue}).style("fill-opacity",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverAlpha})}),r&&xT(t,e).selectAll("."+E1.sankeyNode).filter(hVe(e)).call(vVe)}function pVe(e,t,r,i){i.style("fill",function(n){return n.tinyColorHue}).style("fill-opacity",function(n){return n.tinyColorAlpha}),i.each(function(n){var a=n.link.label;a!==""&&xT(t,e).selectAll("."+E1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){return o.tinyColorHue}).style("fill-opacity",function(o){return o.tinyColorAlpha})}),r&&xT(t,e).selectAll(E1.sankeyNode).filter(hVe(e)).call(jZ)}function yd(e,t){var r=e.hoverlabel||{},i=KZ.nestedProperty(r,t).get();return Array.isArray(i)?!1:i}gVe.exports=function(t,r){for(var i=t._fullLayout,n=i._paper,a=i._size,o=0;o<t._fullData.length;o++)if(t._fullData[o].visible&&t._fullData[o].type===E1.sankey&&!t._fullData[o]._viewInitial){var s=t._fullData[o].node;t._fullData[o]._viewInitial={node:{groups:s.groups.slice(),x:s.x.slice(),y:s.y.slice()}}}var l=function(k,x){var E=x.link;E.originalEvent=rv.event,t._hoverdata=[E],mT.click(t,{target:!0})},u=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(dVe.bind(0,x,E,!0)),x.link.trace.link.hoverinfo!=="skip"&&(x.link.fullData=x.link.trace,t.emit("plotly_hover",{event:rv.event,points:[x.link]})))},f=I5(t,"source:")+" ",c=I5(t,"target:")+" ",h=I5(t,"concentration:")+" ",v=I5(t,"incoming flow count:")+" ",p=I5(t,"outgoing flow count:")+" ",_=function(k,x){if(t._fullLayout.hovermode===!1)return;var E=x.link.trace.link;if(E.hoverinfo==="none"||E.hoverinfo==="skip")return;var M=[];function d(V){var B,F;V.circular?(B=(V.circularPathData.leftInnerExtent+V.circularPathData.rightInnerExtent)/2,F=V.circularPathData.verticalFullExtent):(B=(V.source.x1+V.target.x0)/2,F=(V.y0+V.y1)/2);var N=[B,F];return V.trace.orientation==="v"&&N.reverse(),N[0]+=x.parent.translateX,N[1]+=x.parent.translateY,N}for(var C=0,S=0;S<x.flow.links.length;S++){var P=x.flow.links[S];if(!(t._fullLayout.hovermode==="closest"&&x.link.pointNumber!==P.pointNumber)){x.link.pointNumber===P.pointNumber&&(C=S),P.fullData=P.trace,E=x.link.trace.link;var D=d(P),z={valueLabel:mF(x.valueFormat)(P.value)+x.valueSuffix};M.push({x:D[0],y:D[1],name:z.valueLabel,text:[P.label||"",f+P.source.label,c+P.target.label,P.concentrationscale?h+mF("%0.2f")(P.flow.labelConcentration):""].filter(lVe).join("<br>"),color:yd(E,"bgcolor")||wYt.addOpacity(P.color,1),borderColor:yd(E,"bordercolor"),fontFamily:yd(E,"font.family"),fontSize:yd(E,"font.size"),fontColor:yd(E,"font.color"),nameLength:yd(E,"namelength"),textAlign:yd(E,"align"),idealAlign:rv.event.x<D[0]?"right":"left",hovertemplate:E.hovertemplate,hovertemplateLabels:z,eventData:[P]})}}var O=mT.loneHover(M,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t,anchorIndex:C});O.each(function(){var V=this;x.link.concentrationscale||uVe(V,.65),fVe(V)})},T=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(pVe.bind(0,x,E,!0)),x.link.trace.link.hoverinfo!=="skip"&&(x.link.fullData=x.link.trace,t.emit("plotly_unhover",{event:rv.event,points:[x.link]})),mT.loneUnhover(i._hoverlayer.node()))},g=function(k,x,E){var M=x.node;M.originalEvent=rv.event,t._hoverdata=[M],rv.select(k).call(jZ,x,E),mT.click(t,{target:!0})},A=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(vVe,x,E),x.node.trace.node.hoverinfo!=="skip"&&(x.node.fullData=x.node.trace,t.emit("plotly_hover",{event:rv.event,points:[x.node]})))},b=function(k,x){if(t._fullLayout.hovermode!==!1){var E=x.node.trace.node;if(!(E.hoverinfo==="none"||E.hoverinfo==="skip")){var M=rv.select(k).select("."+E1.nodeRect),d=t._fullLayout._paperdiv.node().getBoundingClientRect(),C=M.node().getBoundingClientRect(),S=C.left-2-d.left,P=C.right+2-d.left,D=C.top+C.height/4-d.top,z={valueLabel:mF(x.valueFormat)(x.node.value)+x.valueSuffix};x.node.fullData=x.node.trace,t._fullLayout._calcInverseTransform(t);var O=t._fullLayout._invScaleX,V=t._fullLayout._invScaleY,B=mT.loneHover({x0:O*S,x1:O*P,y:V*D,name:mF(x.valueFormat)(x.node.value)+x.valueSuffix,text:[x.node.label,v+x.node.targetLinks.length,p+x.node.sourceLinks.length].filter(lVe).join("<br>"),color:yd(E,"bgcolor")||x.tinyColorHue,borderColor:yd(E,"bordercolor"),fontFamily:yd(E,"font.family"),fontSize:yd(E,"font.size"),fontColor:yd(E,"font.color"),nameLength:yd(E,"namelength"),textAlign:yd(E,"align"),idealAlign:"left",hovertemplate:E.hovertemplate,hovertemplateLabels:z,eventData:[x.node]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t});uVe(B,.85),fVe(B)}}},w=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(jZ,x,E),x.node.trace.node.hoverinfo!=="skip"&&(x.node.fullData=x.node.trace,t.emit("plotly_unhover",{event:rv.event,points:[x.node]})),mT.loneUnhover(i._hoverlayer.node()))};bYt(t,n,r,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{linkEvents:{hover:u,follow:_,unhover:T,select:l},nodeEvents:{hover:A,follow:b,unhover:w,select:g}})}});var yVe=ne($_=>{"use strict";var TYt=Xs().overrideAll,AYt=vc().getModuleCalcData,MYt=JZ(),SYt=Pg(),EYt=e0(),kYt=Hh(),CYt=Mf().prepSelect,QZ=Wt(),LYt=wi(),xF="sankey";$_.name=xF;$_.baseLayoutAttrOverrides=TYt({hoverlabel:SYt.hoverlabel},"plot","nested");$_.plot=function(e){var t=AYt(e.calcdata,xF)[0];MYt(e,t),$_.updateFx(e)};$_.clean=function(e,t,r,i){var n=i._has&&i._has(xF),a=t._has&&t._has(xF);n&&!a&&(i._paperdiv.selectAll(".sankey").remove(),i._paperdiv.selectAll(".bgsankey").remove())};$_.updateFx=function(e){for(var t=0;t<e._fullData.length;t++)PYt(e,t)};function PYt(e,t){var r=e._fullData[t],i=e._fullLayout,n=i.dragmode,a=i.dragmode==="pan"?"move":"crosshair",o=r._bgRect;if(o&&!(n==="pan"||n==="zoom")){EYt(o,a);var s={_id:"x",c2p:QZ.identity,_offset:r._sankey.translateX,_length:r._sankey.width},l={_id:"y",c2p:QZ.identity,_offset:r._sankey.translateY,_length:r._sankey.height},u={gd:e,element:o.node(),plotinfo:{id:t,xaxis:s,yaxis:l,fillRangeItems:QZ.noop},subplot:t,xaxes:[s],yaxes:[l],doneFnCompleted:function(f){var c=e._fullData[t],h,v=c.node.groups.slice(),p=[];function _(b){for(var w=c._sankey.graph.nodes,k=0;k<w.length;k++)if(w[k].pointNumber===b)return w[k]}for(var T=0;T<f.length;T++){var g=_(f[T].pointNumber);if(g)if(g.group){for(var A=0;A<g.childrenNodes.length;A++)p.push(g.childrenNodes[A].pointNumber);v[g.pointNumber-c.node._count]=!1}else p.push(g.pointNumber)}h=v.filter(Boolean).concat([p]),LYt.call("_guiRestyle",e,{"node.groups":[h]},t)}};u.prepFn=function(f,c,h){CYt(f,c,h,u,n)},kYt.init(u)}}});var xVe=ne((mmr,mVe)=>{"use strict";mVe.exports=function(t,r){for(var i=t.cd,n=[],a=i[0].trace,o=a._sankey.graph.nodes,s=0;s<o.length;s++){var l=o[s];if(!l.partOfGroup){var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];a.orientation==="v"&&u.reverse(),r&&r.contains(u,!1,s,t)&&n.push({pointNumber:l.pointNumber})}}return n}});var bVe=ne((xmr,_Ve)=>{"use strict";_Ve.exports={attributes:BZ(),supplyDefaults:MUe(),calc:LUe(),plot:JZ(),moduleType:"trace",name:"sankey",basePlotModule:yVe(),selectPoints:xVe(),categories:["noOpacity"],meta:{}}});var TVe=ne((_mr,wVe)=>{"use strict";wVe.exports=bVe()});var MVe=ne(_T=>{"use strict";var AVe=Zs();_T.name="indicator";_T.plot=function(e,t,r,i){AVe.plotBasePlot(_T.name,e,t,r,i)};_T.clean=function(e,t,r,i){AVe.cleanBasePlot(_T.name,e,t,r,i)}});var ej=ne((wmr,PVe)=>{"use strict";var k1=oa().extendFlat,EVe=oa().extendDeep,RYt=Xs().overrideAll,kVe=ll(),CVe=Ku(),DYt=fl().attributes,Jl=dc(),IYt=So().templatedArray,_F=Rw(),SVe=kl().descriptionOnlyNumbers,$Z=kVe({editType:"plot",colorEditType:"plot"}),F5={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:CVe.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},LVe={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},FYt=IYt("step",EVe({},F5,{range:LVe}));PVe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:DYt({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:k1({},$Z,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:SVe("value")},font:k1({},$Z,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:SVe("value")},increasing:{symbol:{valType:"string",dflt:_F.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:_F.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:_F.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:_F.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:k1({},$Z,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:EVe({},F5,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:CVe.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:RYt({range:LVe,visible:k1({},Jl.visible,{dflt:!0}),tickmode:Jl.minor.tickmode,nticks:Jl.nticks,tick0:Jl.tick0,dtick:Jl.dtick,tickvals:Jl.tickvals,ticktext:Jl.ticktext,ticks:k1({},Jl.ticks,{dflt:"outside"}),ticklen:Jl.ticklen,tickwidth:Jl.tickwidth,tickcolor:Jl.tickcolor,ticklabelstep:Jl.ticklabelstep,showticklabels:Jl.showticklabels,labelalias:Jl.labelalias,tickfont:kVe({}),tickangle:Jl.tickangle,tickformat:Jl.tickformat,tickformatstops:Jl.tickformatstops,tickprefix:Jl.tickprefix,showtickprefix:Jl.showtickprefix,ticksuffix:Jl.ticksuffix,showticksuffix:Jl.showticksuffix,separatethousands:Jl.separatethousands,exponentformat:Jl.exponentformat,minexponent:Jl.minexponent,showexponent:Jl.showexponent,editType:"plot"},"plot"),steps:FYt,threshold:{line:{color:k1({},F5.line.color,{}),width:k1({},F5.line.width,{dflt:1}),editType:"plot"},thickness:k1({},F5.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}});var tj=ne((Tmr,RVe)=>{"use strict";RVe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}});var FVe=ne((Amr,IVe)=>{"use strict";var wF=Wt(),TF=ej(),qYt=fl().defaults,DVe=So(),zYt=ch(),bF=tj(),OYt=hx(),BYt=d2(),NYt=im(),UYt=am();function VYt(e,t,r,i){function n(b,w){return wF.coerce(e,t,TF,b,w)}qYt(t,i,n),n("mode"),t._hasNumber=t.mode.indexOf("number")!==-1,t._hasDelta=t.mode.indexOf("delta")!==-1,t._hasGauge=t.mode.indexOf("gauge")!==-1;var a=n("value");t._range=[0,typeof a=="number"?1.5*a:1];var o=new Array(2),s;t._hasNumber&&(n("number.valueformat"),n("number.font.color",i.font.color),n("number.font.family",i.font.family),n("number.font.size"),t.number.font.size===void 0&&(t.number.font.size=bF.defaultNumberFontSize,o[0]=!0),n("number.prefix"),n("number.suffix"),s=t.number.font.size);var l;t._hasDelta&&(n("delta.font.color",i.font.color),n("delta.font.family",i.font.family),n("delta.font.size"),t.delta.font.size===void 0&&(t.delta.font.size=(t._hasNumber?.5:1)*(s||bF.defaultNumberFontSize),o[1]=!0),n("delta.reference",t.value),n("delta.relative"),n("delta.valueformat",t.delta.relative?"2%":""),n("delta.increasing.symbol"),n("delta.increasing.color"),n("delta.decreasing.symbol"),n("delta.decreasing.color"),n("delta.position"),n("delta.prefix"),n("delta.suffix"),l=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||o[0])&&(!t._hasDelta||o[1])||!1,n("title.font.color",i.font.color),n("title.font.family",i.font.family),n("title.font.size",.25*(s||l||bF.defaultNumberFontSize)),n("title.text");var u,f,c,h;function v(b,w){return wF.coerce(u,f,TF.gauge,b,w)}function p(b,w){return wF.coerce(c,h,TF.gauge.axis,b,w)}if(t._hasGauge){u=e.gauge,u||(u={}),f=DVe.newContainer(t,"gauge"),v("shape");var _=t._isBullet=t.gauge.shape==="bullet";_||n("title.align","center");var T=t._isAngular=t.gauge.shape==="angular";T||n("align","center"),v("bgcolor",i.paper_bgcolor),v("borderwidth"),v("bordercolor"),v("bar.color"),v("bar.line.color"),v("bar.line.width");var g=bF.valueThickness*(t.gauge.shape==="bullet"?.5:1);v("bar.thickness",g),zYt(u,f,{name:"steps",handleItemDefaults:HYt}),v("threshold.value"),v("threshold.thickness"),v("threshold.line.width"),v("threshold.line.color"),c={},u&&(c=u.axis||{}),h=DVe.newContainer(f,"axis"),p("visible"),t._range=p("range",t._range);var A={noAutotickangles:!0,outerTicks:!0};OYt(c,h,p,"linear"),UYt(c,h,p,"linear",A),NYt(c,h,p,"linear",A),BYt(c,h,p,A)}else n("title.align","center"),n("align","center"),t._isAngular=t._isBullet=!1;t._length=null}function HYt(e,t){function r(i,n){return wF.coerce(e,t,TF.gauge.steps,i,n)}r("color"),r("line.color"),r("line.width"),r("range"),r("thickness")}IVe.exports={supplyDefaults:VYt}});var zVe=ne((Mmr,qVe)=>{"use strict";function GYt(e,t){var r=[],i=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var n=t._lastValue,a=n;return t._hasDelta&&typeof t.delta.reference=="number"&&(a=t.delta.reference),r[0]={y:i,lastY:n,delta:i-a,relativeDelta:(i-a)/a},r}qVe.exports={calc:GYt}});var HVe=ne((Smr,VVe)=>{"use strict";var ib=Ai(),YYt=(M_(),Wb(A_)).interpolate,OVe=(M_(),Wb(A_)).interpolateNumber,C1=Wt(),WYt=C1.strScale,z5=C1.strTranslate,XYt=C1.rad2deg,ZYt=Tf().MID_SHIFT,nb=aa(),eb=tj(),MF=Es(),Yc=Xi(),jYt=PM(),KYt=mL(),JYt=dc(),bT=_i(),rj={left:"start",center:"middle",right:"end"},tb={left:0,center:.5,right:1},BVe=/[yzafpnµmkMGTPEZY]/;function O5(e){return e&&e.duration>0}VVe.exports=function(t,r,i,n){var a=t._fullLayout,o;O5(i)&&n&&(o=n()),C1.makeTraceGroups(a._indicatorlayer,r,"trace").each(function(s){var l=s[0],u=l.trace,f=ib.select(this),c=u._hasGauge,h=u._isAngular,v=u._isBullet,p=u.domain,_={w:a._size.w*(p.x[1]-p.x[0]),h:a._size.h*(p.y[1]-p.y[0]),l:a._size.l+a._size.w*p.x[0],r:a._size.r+a._size.w*(1-p.x[1]),t:a._size.t+a._size.h*(1-p.y[1]),b:a._size.b+a._size.h*p.y[0]},T=_.l+_.w/2,g=_.t+_.h/2,A=Math.min(_.w/2,_.h),b=eb.innerRadius*A,w,k,x,E=u.align||"center";if(k=g,!c)w=_.l+tb[E]*_.w,x=function(B){return NVe(B,_.w,_.h)};else if(h&&(w=T,k=g+A/2,x=function(B){return rWt(B,.9*b)}),v){var M=eb.bulletPadding,d=1-eb.bulletNumberDomainSize+M;w=_.l+(d+(1-d)*tb[E])*_.w,x=function(B){return NVe(B,(eb.bulletNumberDomainSize-M)*_.w,_.h)}}eWt(t,f,s,{numbersX:w,numbersY:k,numbersScaler:x,transitionOpts:i,onComplete:o});var C,S;c&&(C={range:u.gauge.axis.range,color:u.gauge.bgcolor,line:{color:u.gauge.bordercolor,width:0},thickness:1},S={range:u.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:u.gauge.bordercolor,width:u.gauge.borderwidth},thickness:1});var P=f.selectAll("g.angular").data(h?s:[]);P.exit().remove();var D=f.selectAll("g.angularaxis").data(h?s:[]);D.exit().remove(),h&&$Yt(t,f,s,{radius:A,innerRadius:b,gauge:P,layer:D,size:_,gaugeBg:C,gaugeOutline:S,transitionOpts:i,onComplete:o});var z=f.selectAll("g.bullet").data(v?s:[]);z.exit().remove();var O=f.selectAll("g.bulletaxis").data(v?s:[]);O.exit().remove(),v&&QYt(t,f,s,{gauge:z,layer:O,size:_,gaugeBg:C,gaugeOutline:S,transitionOpts:i,onComplete:o});var V=f.selectAll("text.title").data(s);V.exit().remove(),V.enter().append("text").classed("title",!0),V.attr("text-anchor",function(){return v?rj.right:rj[u.title.align]}).text(u.title.text).call(nb.font,u.title.font).call(MF.convertToTspans,t),V.attr("transform",function(){var B=_.l+_.w*tb[u.title.align],F,N=eb.titlePadding,Z=nb.bBox(V.node());if(c){if(h)if(u.gauge.axis.visible){var J=nb.bBox(D.node());F=J.top-N-Z.bottom}else F=_.t+_.h/2-A/2-Z.bottom-N;v&&(F=k-(Z.top+Z.bottom)/2,B=_.l-eb.bulletPadding*_.w)}else F=u._numbersTop-N-Z.bottom;return z5(B,F)})})};function QYt(e,t,r,i){var n=r[0].trace,a=i.gauge,o=i.layer,s=i.gaugeBg,l=i.gaugeOutline,u=i.size,f=n.domain,c=i.transitionOpts,h=i.onComplete,v,p,_,T,g;a.enter().append("g").classed("bullet",!0),a.attr("transform",z5(u.l,u.t)),o.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),o.selectAll("g.xbulletaxistick,path,text").remove();var A=u.h,b=n.gauge.bar.thickness*A,w=f.x[0],k=f.x[0]+(f.x[1]-f.x[0])*(n._hasNumber||n._hasDelta?1-eb.bulletNumberDomainSize:1);v=q5(e,n.gauge.axis),v._id="xbulletaxis",v.domain=[w,k],v.setScale(),p=Yc.calcTicks(v),_=Yc.makeTransTickFn(v),T=Yc.getTickSigns(v)[2],g=u.t+u.h,v.visible&&(Yc.drawTicks(e,v,{vals:v.ticks==="inside"?Yc.clipEnds(v,p):p,layer:o,path:Yc.makeTickPath(v,g,T),transFn:_}),Yc.drawLabels(e,v,{vals:p,layer:o,transFn:_,labelFns:Yc.makeLabelFns(v,g)}));function x(D){D.attr("width",function(z){return Math.max(0,v.c2p(z.range[1])-v.c2p(z.range[0]))}).attr("x",function(z){return v.c2p(z.range[0])}).attr("y",function(z){return .5*(1-z.thickness)*A}).attr("height",function(z){return z.thickness*A})}var E=[s].concat(n.gauge.steps),M=a.selectAll("g.bg-bullet").data(E);M.enter().append("g").classed("bg-bullet",!0).append("rect"),M.select("rect").call(x).call(rb),M.exit().remove();var d=a.selectAll("g.value-bullet").data([n.gauge.bar]);d.enter().append("g").classed("value-bullet",!0).append("rect"),d.select("rect").attr("height",b).attr("y",(A-b)/2).call(rb),O5(c)?d.select("rect").transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).attr("width",Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y)))):d.select("rect").attr("width",typeof r[0].y=="number"?Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y))):0),d.exit().remove();var C=r.filter(function(){return n.gauge.threshold.value||n.gauge.threshold.value===0}),S=a.selectAll("g.threshold-bullet").data(C);S.enter().append("g").classed("threshold-bullet",!0).append("line"),S.select("line").attr("x1",v.c2p(n.gauge.threshold.value)).attr("x2",v.c2p(n.gauge.threshold.value)).attr("y1",(1-n.gauge.threshold.thickness)/2*A).attr("y2",(1-(1-n.gauge.threshold.thickness)/2)*A).call(bT.stroke,n.gauge.threshold.line.color).style("stroke-width",n.gauge.threshold.line.width),S.exit().remove();var P=a.selectAll("g.gauge-outline").data([l]);P.enter().append("g").classed("gauge-outline",!0).append("rect"),P.select("rect").call(x).call(rb),P.exit().remove()}function $Yt(e,t,r,i){var n=r[0].trace,a=i.size,o=i.radius,s=i.innerRadius,l=i.gaugeBg,u=i.gaugeOutline,f=[a.l+a.w/2,a.t+a.h/2+o/2],c=i.gauge,h=i.layer,v=i.transitionOpts,p=i.onComplete,_=Math.PI/2;function T(re){var le=n.gauge.axis.range[0],fe=n.gauge.axis.range[1],K=(re-le)/(fe-le)*Math.PI-_;return K<-_?-_:K>_?_:K}function g(re){return ib.svg.arc().innerRadius((s+o)/2-re/2*(o-s)).outerRadius((s+o)/2+re/2*(o-s)).startAngle(-_)}function A(re){re.attr("d",function(le){return g(le.thickness).startAngle(T(le.range[0])).endAngle(T(le.range[1]))()})}var b,w,k,x;c.enter().append("g").classed("angular",!0),c.attr("transform",z5(f[0],f[1])),h.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),h.selectAll("g.xangularaxistick,path,text").remove(),b=q5(e,n.gauge.axis),b.type="linear",b.range=n.gauge.axis.range,b._id="xangularaxis",b.ticklabeloverflow="allow",b.setScale();var E=function(re){return(b.range[0]-re.x)/(b.range[1]-b.range[0])*Math.PI+Math.PI},M={},d=Yc.makeLabelFns(b,0),C=d.labelStandoff;M.xFn=function(re){var le=E(re);return Math.cos(le)*C},M.yFn=function(re){var le=E(re),fe=Math.sin(le)>0?.2:1;return-Math.sin(le)*(C+re.fontSize*fe)+Math.abs(Math.cos(le))*(re.fontSize*ZYt)},M.anchorFn=function(re){var le=E(re),fe=Math.cos(le);return Math.abs(fe)<.1?"middle":fe>0?"start":"end"},M.heightFn=function(re,le,fe){var K=E(re);return-.5*(1+Math.sin(K))*fe};var S=function(re){return z5(f[0]+o*Math.cos(re),f[1]-o*Math.sin(re))};k=function(re){return S(E(re))};var P=function(re){var le=E(re);return S(le)+"rotate("+-XYt(le)+")"};if(w=Yc.calcTicks(b),x=Yc.getTickSigns(b)[2],b.visible){x=b.ticks==="inside"?-1:1;var D=(b.linewidth||1)/2;Yc.drawTicks(e,b,{vals:w,layer:h,path:"M"+x*D+",0h"+x*b.ticklen,transFn:P}),Yc.drawLabels(e,b,{vals:w,layer:h,transFn:k,labelFns:M})}var z=[l].concat(n.gauge.steps),O=c.selectAll("g.bg-arc").data(z);O.enter().append("g").classed("bg-arc",!0).append("path"),O.select("path").call(A).call(rb),O.exit().remove();var V=g(n.gauge.bar.thickness),B=c.selectAll("g.value-arc").data([n.gauge.bar]);B.enter().append("g").classed("value-arc",!0).append("path");var F=B.select("path");O5(v)?(F.transition().duration(v.duration).ease(v.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).attrTween("d",tWt(V,T(r[0].lastY),T(r[0].y))),n._lastValue=r[0].y):F.attr("d",typeof r[0].y=="number"?V.endAngle(T(r[0].y)):"M0,0Z"),F.call(rb),B.exit().remove(),z=[];var N=n.gauge.threshold.value;(N||N===0)&&z.push({range:[N,N],color:n.gauge.threshold.color,line:{color:n.gauge.threshold.line.color,width:n.gauge.threshold.line.width},thickness:n.gauge.threshold.thickness});var Z=c.selectAll("g.threshold-arc").data(z);Z.enter().append("g").classed("threshold-arc",!0).append("path"),Z.select("path").call(A).call(rb),Z.exit().remove();var J=c.selectAll("g.gauge-outline").data([u]);J.enter().append("g").classed("gauge-outline",!0).append("path"),J.select("path").call(A).call(rb),J.exit().remove()}function eWt(e,t,r,i){var n=r[0].trace,a=i.numbersX,o=i.numbersY,s=n.align||"center",l=rj[s],u=i.transitionOpts,f=i.onComplete,c=C1.ensureSingle(t,"g","numbers"),h,v,p,_=[];n._hasNumber&&_.push("number"),n._hasDelta&&(_.push("delta"),n.delta.position==="left"&&_.reverse());var T=c.selectAll("text").data(_);T.enter().append("text"),T.attr("text-anchor",function(){return l}).attr("class",function(S){return S}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),T.exit().remove();function g(S,P,D,z){if(S.match("s")&&D>=0!=z>=0&&!P(D).slice(-1).match(BVe)&&!P(z).slice(-1).match(BVe)){var O=S.slice().replace("s","f").replace(/\d+/,function(B){return parseInt(B)-1}),V=q5(e,{tickformat:O});return function(B){return Math.abs(B)<1?Yc.tickText(V,B).text:P(B)}}else return P}function A(){var S=q5(e,{tickformat:n.number.valueformat},n._range);S.setScale(),Yc.prepTicks(S);var P=function(B){return Yc.tickText(S,B).text},D=n.number.suffix,z=n.number.prefix,O=c.select("text.number");function V(){var B=typeof r[0].y=="number"?z+P(r[0].y)+D:"-";O.text(B).call(nb.font,n.number.font).call(MF.convertToTspans,e)}return O5(u)?O.transition().duration(u.duration).ease(u.easing).each("end",function(){V(),f&&f()}).each("interrupt",function(){V(),f&&f()}).attrTween("text",function(){var B=ib.select(this),F=OVe(r[0].lastY,r[0].y);n._lastValue=r[0].y;var N=g(n.number.valueformat,P,r[0].lastY,r[0].y);return function(Z){B.text(z+N(F(Z))+D)}}):V(),h=UVe(z+P(r[0].y)+D,n.number.font,l,e),O}function b(){var S=q5(e,{tickformat:n.delta.valueformat},n._range);S.setScale(),Yc.prepTicks(S);var P=function(Z){return Yc.tickText(S,Z).text},D=n.delta.suffix,z=n.delta.prefix,O=function(Z){var J=n.delta.relative?Z.relativeDelta:Z.delta;return J},V=function(Z,J){return Z===0||typeof Z!="number"||isNaN(Z)?"-":(Z>0?n.delta.increasing.symbol:n.delta.decreasing.symbol)+z+J(Z)+D},B=function(Z){return Z.delta>=0?n.delta.increasing.color:n.delta.decreasing.color};n._deltaLastValue===void 0&&(n._deltaLastValue=O(r[0]));var F=c.select("text.delta");F.call(nb.font,n.delta.font).call(bT.fill,B({delta:n._deltaLastValue}));function N(){F.text(V(O(r[0]),P)).call(bT.fill,B(r[0])).call(MF.convertToTspans,e)}return O5(u)?F.transition().duration(u.duration).ease(u.easing).tween("text",function(){var Z=ib.select(this),J=O(r[0]),re=n._deltaLastValue,le=g(n.delta.valueformat,P,re,J),fe=OVe(re,J);return n._deltaLastValue=J,function(K){Z.text(V(fe(K),le)),Z.call(bT.fill,B({delta:fe(K)}))}}).each("end",function(){N(),f&&f()}).each("interrupt",function(){N(),f&&f()}):N(),v=UVe(V(O(r[0]),P),n.delta.font,l,e),F}var w=n.mode+n.align,k;if(n._hasDelta&&(k=b(),w+=n.delta.position+n.delta.font.size+n.delta.font.family+n.delta.valueformat,w+=n.delta.increasing.symbol+n.delta.decreasing.symbol,p=v),n._hasNumber&&(A(),w+=n.number.font.size+n.number.font.family+n.number.valueformat+n.number.suffix+n.number.prefix,p=h),n._hasDelta&&n._hasNumber){var x=[(h.left+h.right)/2,(h.top+h.bottom)/2],E=[(v.left+v.right)/2,(v.top+v.bottom)/2],M,d,C=.75*n.delta.font.size;n.delta.position==="left"&&(M=AF(n,"deltaPos",0,-1*(h.width*tb[n.align]+v.width*(1-tb[n.align])+C),w,Math.min),d=x[1]-E[1],p={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:v.left+M,right:h.right,top:Math.min(h.top,v.top+d),bottom:Math.max(h.bottom,v.bottom+d)}),n.delta.position==="right"&&(M=AF(n,"deltaPos",0,h.width*(1-tb[n.align])+v.width*tb[n.align]+C,w,Math.max),d=x[1]-E[1],p={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:h.left,right:v.right+M,top:Math.min(h.top,v.top+d),bottom:Math.max(h.bottom,v.bottom+d)}),n.delta.position==="bottom"&&(M=null,d=v.height,p={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height,bottom:h.bottom+v.height}),n.delta.position==="top"&&(M=null,d=h.top,p={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height-v.height,bottom:h.bottom}),k.attr({dx:M,dy:d})}(n._hasNumber||n._hasDelta)&&c.attr("transform",function(){var S=i.numbersScaler(p);w+=S[2];var P=AF(n,"numbersScale",1,S[0],w,Math.min),D;n._scaleNumbers||(P=1),n._isAngular?D=o-P*p.bottom:D=o-P*(p.top+p.bottom)/2,n._numbersTop=P*p.top+D;var z=p[s];s==="center"&&(z=(p.left+p.right)/2);var O=a-P*z;return O=AF(n,"numbersTranslate",0,O,w,Math.max),z5(O,D)+WYt(P)})}function rb(e){e.each(function(t){bT.stroke(ib.select(this),t.line.color)}).each(function(t){bT.fill(ib.select(this),t.color)}).style("stroke-width",function(t){return t.line.width})}function tWt(e,t,r){return function(){var i=YYt(t,r);return function(n){return e.endAngle(i(n))()}}}function q5(e,t,r){var i=e._fullLayout,n=C1.extendFlat({type:"linear",ticks:"outside",range:r,showline:!0},t),a={type:"linear",_id:"x"+t._id},o={letter:"x",font:i.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function s(l,u){return C1.coerce(n,a,JYt,l,u)}return jYt(n,a,s,o,i),KYt(n,a,s,o),a}function NVe(e,t,r){var i=Math.min(t/e.width,r/e.height);return[i,e,t+"x"+r]}function rWt(e,t){var r=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),i=t/r;return[i,e,t]}function UVe(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text"),a=ib.select(n);return a.text(e).attr("x",0).attr("y",0).attr("text-anchor",r).attr("data-unformatted",e).call(MF.convertToTspans,i).call(nb.font,t),nb.bBox(a.node())}function AF(e,t,r,i,n,a){var o="_cache"+t;e[o]&&e[o].key===n||(e[o]={key:n,value:r});var s=C1.aggNums(a,null,[e[o].value,i],2);return e[o].value=s,s}});var YVe=ne((Emr,GVe)=>{"use strict";GVe.exports={moduleType:"trace",name:"indicator",basePlotModule:MVe(),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:ej(),supplyDefaults:FVe().supplyDefaults,calc:zVe().calc,plot:HVe(),meta:{}}});var XVe=ne((kmr,WVe)=>{"use strict";WVe.exports=YVe()});var nj=ne((Cmr,JVe)=>{"use strict";var ZVe=Lx(),SF=oa().extendFlat,nWt=Xs().overrideAll,jVe=ll(),iWt=fl().attributes,KVe=kl().descriptionOnlyNumbers,aWt=JVe.exports=nWt({domain:iWt({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:KVe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:SF({},ZVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:SF({},jVe({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:KVe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:SF({},ZVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:SF({},jVe({arrayOk:!0}))}},"calc","from-root");aWt.transforms=void 0});var $Ve=ne((Lmr,QVe)=>{"use strict";var B5=Wt(),oWt=nj(),sWt=fl().defaults;function lWt(e,t){for(var r=e.columnorder||[],i=e.header.values.length,n=r.slice(0,i),a=n.slice().sort(function(l,u){return l-u}),o=n.map(function(l){return a.indexOf(l)}),s=o.length;s<i;s++)o.push(s);t("columnorder",o)}QVe.exports=function(t,r,i,n){function a(o,s){return B5.coerce(t,r,oWt,o,s)}sWt(r,n,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),B5.coerceFont(a,"header.font",B5.extendFlat({},n.font)),lWt(r,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),B5.coerceFont(a,"cells.font",B5.extendFlat({},n.font)),r._length=null}});var tHe=ne((Pmr,eHe)=>{"use strict";var uWt=gg().wrap;eHe.exports=function(){return uWt({})}});var ij=ne((Rmr,rHe)=>{"use strict";rHe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}});var cHe=ne((Dmr,fHe)=>{"use strict";var nHe=ij(),oj=oa().extendFlat,fWt=la(),cWt=uh().isTypedArray,EF=uh().isArrayOrTypedArray;fHe.exports=function(t,r){var i=aj(r.cells.values),n=function(d){return d.slice(r.header.values.length,d.length)},a=aj(r.header.values);a.length&&!a[0].length&&(a[0]=[""],a=aj(a));var o=a.concat(n(i).map(function(){return uHe((a[0]||[""]).length)})),s=r.domain,l=Math.floor(t._fullLayout._size.w*(s.x[1]-s.x[0])),u=Math.floor(t._fullLayout._size.h*(s.y[1]-s.y[0])),f=r.header.values.length?o[0].map(function(){return r.header.height}):[nHe.emptyHeaderHeight],c=i.length?i[0].map(function(){return r.cells.height}):[],h=f.reduce(iHe,0),v=u-h,p=v+nHe.uplift,_=sHe(c,p),T=sHe(f,h),g=oHe(T,[]),A=oHe(_,g),b={},w=r._fullInput.columnorder;EF(w)&&(w=Array.from(w)),w=w.concat(n(i.map(function(d,C){return C})));var k=o.map(function(d,C){var S=EF(r.columnwidth)?r.columnwidth[Math.min(C,r.columnwidth.length-1)]:r.columnwidth;return fWt(S)?Number(S):1}),x=k.reduce(iHe,0);k=k.map(function(d){return d/x*l});var E=Math.max(sj(r.header.line.width),sj(r.cells.line.width)),M={key:r.uid+t._context.staticPlot,translateX:s.x[0]*t._fullLayout._size.w,translateY:t._fullLayout._size.h*(1-s.y[1]),size:t._fullLayout._size,width:l,maxLineWidth:E,height:u,columnOrder:w,groupHeight:u,rowBlocks:A,headerRowBlocks:g,scrollY:0,cells:oj({},r.cells,{values:i}),headerCells:oj({},r.header,{values:o}),gdColumns:o.map(function(d){return d[0]}),gdColumnsOriginalOrder:o.map(function(d){return d[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:o.map(function(d,C){var S=b[d];b[d]=(S||0)+1;var P=d+"__"+b[d];return{key:P,label:d,specIndex:C,xIndex:w[C],xScale:aHe,x:void 0,calcdata:void 0,columnWidth:k[C]}})};return M.columns.forEach(function(d){d.calcdata=M,d.x=aHe(d)}),M};function sj(e){if(EF(e)){for(var t=0,r=0;r<e.length;r++)t=Math.max(t,sj(e[r]));return t}return e}function iHe(e,t){return e+t}function aj(e){var t=e.slice(),r=1/0,i=0,n;for(n=0;n<t.length;n++)cWt(t[n])?t[n]=Array.from(t[n]):EF(t[n])||(t[n]=[t[n]]),r=Math.min(r,t[n].length),i=Math.max(i,t[n].length);if(r!==i)for(n=0;n<t.length;n++){var a=i-t[n].length;a&&(t[n]=t[n].concat(uHe(a)))}return t}function uHe(e){for(var t=new Array(e),r=0;r<e;r++)t[r]="";return t}function aHe(e){return e.calcdata.columns.reduce(function(t,r){return r.xIndex<e.xIndex?t+r.columnWidth:t},0)}function oHe(e,t){var r=Object.keys(e);return r.map(function(i){return oj({},e[i],{auxiliaryBlocks:t})})}function sHe(e,t){for(var r={},i,n=0,a=0,o=lHe(),s=0,l=0,u=0;u<e.length;u++)i=e[u],o.rows.push({rowIndex:u,rowHeight:i}),a+=i,(a>=t||u===e.length-1)&&(r[n]=o,o.key=l++,o.firstRowIndex=s,o.lastRowIndex=u,o=lHe(),n+=a,s=u+1,a=0);return r}function lHe(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}});var hHe=ne(lj=>{"use strict";var kF=oa().extendFlat;lj.splitToPanels=function(e){var t=[0,0],r=kF({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:kF({},e.calcdata,{cells:e.calcdata.headerCells})}),i=kF({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n=kF({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[i,n,r]};lj.splitToCells=function(e){var t=hWt(e);return(e.values||[]).slice(t[0],t[1]).map(function(r,i){var n=typeof r=="string"&&r.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:i+n,key:t[0]+i,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:r}})};function hWt(e){var t=e.rowBlocks[e.page],r=t?t.rows[0].rowIndex:0,i=t?r+t.rows.length:0;return[r,i]}});var mj=ne((Fmr,THe)=>{"use strict";var Di=ij(),Tl=Ai(),uj=Wt(),vWt=uj.numberFormat,Is=gg(),fj=aa(),dWt=Es(),pWt=Wt().raiseToTop,Up=Wt().strTranslate,gWt=Wt().cancelTransition,yWt=cHe(),xHe=hHe(),vHe=_i();THe.exports=function(t,r){var i=!t._context.staticPlot,n=t._fullLayout._paper.selectAll("."+Di.cn.table).data(r.map(function(A){var b=Is.unwrap(A),w=b.trace;return yWt(t,w)}),Is.keyFun);n.exit().remove(),n.enter().append("g").classed(Di.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(A){return A.width+A.size.l+A.size.r}).attr("height",function(A){return A.height+A.size.t+A.size.b}).attr("transform",function(A){return Up(A.translateX,A.translateY)});var a=n.selectAll("."+Di.cn.tableControlView).data(Is.repeat,Is.keyFun),o=a.enter().append("g").classed(Di.cn.tableControlView,!0).style("box-sizing","content-box");if(i){var s="onwheel"in document?"wheel":"mousewheel";o.on("mousemove",function(A){a.filter(function(b){return A===b}).call(N5,t)}).on(s,function(A){if(!A.scrollbarState.wheeling){A.scrollbarState.wheeling=!0;var b=A.scrollY+Tl.event.deltaY,w=LF(t,a,null,b)(A);w||(Tl.event.stopPropagation(),Tl.event.preventDefault()),A.scrollbarState.wheeling=!1}}).call(N5,t,!0)}a.attr("transform",function(A){return Up(A.size.l,A.size.t)});var l=a.selectAll("."+Di.cn.scrollBackground).data(Is.repeat,Is.keyFun);l.enter().append("rect").classed(Di.cn.scrollBackground,!0).attr("fill","none"),l.attr("width",function(A){return A.width}).attr("height",function(A){return A.height}),a.each(function(A){fj.setClipUrl(Tl.select(this),dHe(t,A),t)});var u=a.selectAll("."+Di.cn.yColumn).data(function(A){return A.columns},Is.keyFun);u.enter().append("g").classed(Di.cn.yColumn,!0),u.exit().remove(),u.attr("transform",function(A){return Up(A.x,0)}),i&&u.call(Tl.behavior.drag().origin(function(A){var b=Tl.select(this);return yHe(b,A,-Di.uplift),pWt(this),A.calcdata.columnDragInProgress=!0,N5(a.filter(function(w){return A.calcdata.key===w.key}),t),A}).on("drag",function(A){var b=Tl.select(this),w=function(E){return(A===E?Tl.event.x:E.x)+E.columnWidth/2};A.x=Math.max(-Di.overdrag,Math.min(A.calcdata.width+Di.overdrag-A.columnWidth,Tl.event.x));var k=_He(u).filter(function(E){return E.calcdata.key===A.calcdata.key}),x=k.sort(function(E,M){return w(E)-w(M)});x.forEach(function(E,M){E.xIndex=M,E.x=A===E?E.x:E.xScale(E)}),u.filter(function(E){return A!==E}).transition().ease(Di.transitionEase).duration(Di.transitionDuration).attr("transform",function(E){return Up(E.x,0)}),b.call(gWt).attr("transform",Up(A.x,-Di.uplift))}).on("dragend",function(A){var b=Tl.select(this),w=A.calcdata;A.x=A.xScale(A),A.calcdata.columnDragInProgress=!1,yHe(b,A,0),EWt(t,w,w.columns.map(function(k){return k.xIndex}))})),u.each(function(A){fj.setClipUrl(Tl.select(this),pHe(t,A),t)});var f=u.selectAll("."+Di.cn.columnBlock).data(xHe.splitToPanels,Is.keyFun);f.enter().append("g").classed(Di.cn.columnBlock,!0).attr("id",function(A){return A.key}),f.style("cursor",function(A){return A.dragHandle?"ew-resize":A.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var c=f.filter(kWt),h=f.filter(pj);i&&h.call(Tl.behavior.drag().origin(function(A){return Tl.event.stopPropagation(),A}).on("drag",LF(t,a,-1)).on("dragend",function(){})),cj(t,a,c,f),cj(t,a,h,f);var v=a.selectAll("."+Di.cn.scrollAreaClip).data(Is.repeat,Is.keyFun);v.enter().append("clipPath").classed(Di.cn.scrollAreaClip,!0).attr("id",function(A){return dHe(t,A)});var p=v.selectAll("."+Di.cn.scrollAreaClipRect).data(Is.repeat,Is.keyFun);p.enter().append("rect").classed(Di.cn.scrollAreaClipRect,!0).attr("x",-Di.overdrag).attr("y",-Di.uplift).attr("fill","none"),p.attr("width",function(A){return A.width+2*Di.overdrag}).attr("height",function(A){return A.height+Di.uplift});var _=u.selectAll("."+Di.cn.columnBoundary).data(Is.repeat,Is.keyFun);_.enter().append("g").classed(Di.cn.columnBoundary,!0);var T=u.selectAll("."+Di.cn.columnBoundaryClippath).data(Is.repeat,Is.keyFun);T.enter().append("clipPath").classed(Di.cn.columnBoundaryClippath,!0),T.attr("id",function(A){return pHe(t,A)});var g=T.selectAll("."+Di.cn.columnBoundaryRect).data(Is.repeat,Is.keyFun);g.enter().append("rect").classed(Di.cn.columnBoundaryRect,!0).attr("fill","none"),g.attr("width",function(A){return A.columnWidth+2*CF(A)}).attr("height",function(A){return A.calcdata.height+2*CF(A)+Di.uplift}).attr("x",function(A){return-CF(A)}).attr("y",function(A){return-CF(A)}),gj(null,h,a)};function CF(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function dHe(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function pHe(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function _He(e){return[].concat.apply([],e.map(function(t){return t})).map(function(t){return t.__data__})}function N5(e,t,r){function i(u){var f=u.rowBlocks;return vj(f,f.length-1)+(f.length?PF(f[f.length-1],1/0):1)}var n=e.selectAll("."+Di.cn.scrollbarKit).data(Is.repeat,Is.keyFun);n.enter().append("g").classed(Di.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),n.each(function(u){var f=u.scrollbarState;f.totalHeight=i(u),f.scrollableAreaHeight=u.groupHeight-hj(u),f.currentlyVisibleHeight=Math.min(f.totalHeight,f.scrollableAreaHeight),f.ratio=f.currentlyVisibleHeight/f.totalHeight,f.barLength=Math.max(f.ratio*f.currentlyVisibleHeight,Di.goldenRatio*Di.scrollbarWidth),f.barWiggleRoom=f.currentlyVisibleHeight-f.barLength,f.wiggleRoom=Math.max(0,f.totalHeight-f.scrollableAreaHeight),f.topY=f.barWiggleRoom===0?0:u.scrollY/f.wiggleRoom*f.barWiggleRoom,f.bottomY=f.topY+f.barLength,f.dragMultiplier=f.wiggleRoom/f.barWiggleRoom}).attr("transform",function(u){var f=u.width+Di.scrollbarWidth/2+Di.scrollbarOffset;return Up(f,hj(u))});var a=n.selectAll("."+Di.cn.scrollbar).data(Is.repeat,Is.keyFun);a.enter().append("g").classed(Di.cn.scrollbar,!0);var o=a.selectAll("."+Di.cn.scrollbarSlider).data(Is.repeat,Is.keyFun);o.enter().append("g").classed(Di.cn.scrollbarSlider,!0),o.attr("transform",function(u){return Up(0,u.scrollbarState.topY||0)});var s=o.selectAll("."+Di.cn.scrollbarGlyph).data(Is.repeat,Is.keyFun);s.enter().append("line").classed(Di.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",Di.scrollbarWidth).attr("stroke-linecap","round").attr("y1",Di.scrollbarWidth/2),s.attr("y2",function(u){return u.scrollbarState.barLength-Di.scrollbarWidth/2}).attr("stroke-opacity",function(u){return u.columnDragInProgress||!u.scrollbarState.barWiggleRoom||r?0:.4}),s.transition().delay(0).duration(0),s.transition().delay(Di.scrollbarHideDelay).duration(Di.scrollbarHideDuration).attr("stroke-opacity",0);var l=a.selectAll("."+Di.cn.scrollbarCaptureZone).data(Is.repeat,Is.keyFun);l.enter().append("line").classed(Di.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",Di.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(u){var f=Tl.event.y,c=this.getBoundingClientRect(),h=u.scrollbarState,v=f-c.top,p=Tl.scale.linear().domain([0,h.scrollableAreaHeight]).range([0,h.totalHeight]).clamp(!0);h.topY<=v&&v<=h.bottomY||LF(t,e,null,p(v-h.barLength/2))(u)}).call(Tl.behavior.drag().origin(function(u){return Tl.event.stopPropagation(),u.scrollbarState.scrollbarScrollInProgress=!0,u}).on("drag",LF(t,e)).on("dragend",function(){})),l.attr("y2",function(u){return u.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(s.remove(),l.remove())}function cj(e,t,r,i){var n=mWt(r),a=xWt(n);TWt(a);var o=_Wt(a);MWt(o);var s=wWt(a),l=bWt(s);AWt(l),bHe(l,t,i,e),yj(a)}function mWt(e){var t=e.selectAll("."+Di.cn.columnCells).data(Is.repeat,Is.keyFun);return t.enter().append("g").classed(Di.cn.columnCells,!0),t.exit().remove(),t}function xWt(e){var t=e.selectAll("."+Di.cn.columnCell).data(xHe.splitToCells,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Di.cn.columnCell,!0),t.exit().remove(),t}function _Wt(e){var t=e.selectAll("."+Di.cn.cellRect).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("rect").classed(Di.cn.cellRect,!0),t}function bWt(e){var t=e.selectAll("."+Di.cn.cellText).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("text").classed(Di.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){Tl.event.stopPropagation()}),t}function wWt(e){var t=e.selectAll("."+Di.cn.cellTextHolder).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Di.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}function TWt(e){e.each(function(t,r){var i=t.calcdata.cells.font,n=t.column.specIndex,a={size:bg(i.size,n,r),color:bg(i.color,n,r),family:bg(i.family,n,r)};t.rowNumber=t.key,t.align=bg(t.calcdata.cells.align,n,r),t.cellBorderWidth=bg(t.calcdata.cells.line.width,n,r),t.font=a})}function AWt(e){e.each(function(t){fj.font(Tl.select(this),t.font)})}function MWt(e){e.attr("width",function(t){return t.column.columnWidth}).attr("stroke-width",function(t){return t.cellBorderWidth}).each(function(t){var r=Tl.select(this);vHe.stroke(r,bg(t.calcdata.cells.line.color,t.column.specIndex,t.rowNumber)),vHe.fill(r,bg(t.calcdata.cells.fill.color,t.column.specIndex,t.rowNumber))})}function bHe(e,t,r,i){e.text(function(n){var a=n.column.specIndex,o=n.rowNumber,s=n.value,l=typeof s=="string",u=l&&s.match(/<br>/i),f=!l||u;n.mayHaveMarkup=l&&s.match(/[<&>]/);var c=SWt(s);n.latex=c;var h=c?"":bg(n.calcdata.cells.prefix,a,o)||"",v=c?"":bg(n.calcdata.cells.suffix,a,o)||"",p=c?null:bg(n.calcdata.cells.format,a,o)||null,_=h+(p?vWt(p)(n.value):n.value)+v,T;n.wrappingNeeded=!n.wrapped&&!f&&!c&&(T=gHe(_)),n.cellHeightMayIncrease=u||c||n.mayHaveMarkup||(T===void 0?gHe(_):T),n.needsConvertToTspans=n.mayHaveMarkup||n.wrappingNeeded||n.latex;var g;if(n.wrappingNeeded){var A=Di.wrapSplitCharacter===" "?_.replace(/<a href=/ig,"<a_href="):_,b=A.split(Di.wrapSplitCharacter),w=Di.wrapSplitCharacter===" "?b.map(function(k){return k.replace(/<a_href=/ig,"<a href=")}):b;n.fragments=w.map(function(k){return{text:k,width:null}}),n.fragments.push({fragment:Di.wrapSpacer,width:null}),g=w.join(Di.lineBreaker)+Di.lineBreaker+Di.wrapSpacer}else delete n.fragments,g=_;return g}).attr("dy",function(n){return n.needsConvertToTspans?0:"0.75em"}).each(function(n){var a=this,o=Tl.select(a),s=n.wrappingNeeded?LWt:PWt;n.needsConvertToTspans?dWt.convertToTspans(o,i,s(r,a,t,i,n)):Tl.select(a.parentNode).attr("transform",function(l){return Up(wHe(l),Di.cellPad)}).attr("text-anchor",function(l){return{left:"start",center:"middle",right:"end"}[l.align]})})}function SWt(e){return typeof e=="string"&&e.match(Di.latexCheck)}function gHe(e){return e.indexOf(Di.wrapSplitCharacter)!==-1}function EWt(e,t,r){var i=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(n,a){return r[i.indexOf(n)]-r[i.indexOf(a)]}),t.columnorder=r,e.emit("plotly_restyle")}function bg(e,t,r){if(uj.isArrayOrTypedArray(e)){var i=e[Math.min(t,e.length-1)];return uj.isArrayOrTypedArray(i)?i[Math.min(r,i.length-1)]:i}else return e}function yHe(e,t,r){e.transition().ease(Di.releaseTransitionEase).duration(Di.releaseTransitionDuration).attr("transform",Up(t.x,r))}function pj(e){return e.type==="cells"}function kWt(e){return e.type==="header"}function hj(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce(function(r,i){return r+PF(i,1/0)},0)}function CWt(e,t,r){for(var i=[],n=0,a=0;a<e.length;a++){for(var o=e[a],s=o.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;o.allRowsHeight=l;var f=n+l,c=t,h=c+r;c<f&&h>n&&i.push(a),n+=l}return i}function gj(e,t,r){var i=_He(t)[0];if(i!==void 0){var n=i.rowBlocks,a=i.calcdata,o=vj(n,n.length),s=i.calcdata.groupHeight-hj(i),l=a.scrollY=Math.max(0,Math.min(o-s,a.scrollY)),u=CWt(n,l,s);u.length===1&&(u[0]===n.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(f,c){f.page=u[c],f.scrollY=l}),t.attr("transform",function(f){var c=vj(f.rowBlocks,f.page)-f.scrollY;return Up(0,c)}),e&&(mHe(e,r,t,u,i.prevPages,i,0),mHe(e,r,t,u,i.prevPages,i,1),N5(r,e))}}function LF(e,t,r,i){return function(a){var o=a.calcdata?a.calcdata:a,s=t.filter(function(c){return o.key===c.key}),l=r||o.scrollbarState.dragMultiplier,u=o.scrollY;o.scrollY=i===void 0?o.scrollY+l*Tl.event.dy:i;var f=s.selectAll("."+Di.cn.yColumn).selectAll("."+Di.cn.columnBlock).filter(pj);return gj(e,f,s),o.scrollY===u}}function mHe(e,t,r,i,n,a,o){var s=i[o]!==n[o];s&&(clearTimeout(a.currentRepaint[o]),a.currentRepaint[o]=setTimeout(function(){var l=r.filter(function(u,f){return f===o&&i[f]!==n[f]});cj(e,t,l,r),n[o]=i[o]}))}function LWt(e,t,r,i){return function(){var a=Tl.select(t.parentNode);a.each(function(o){var s=o.fragments;a.selectAll("tspan.line").each(function(_,T){s[T].width=this.getComputedTextLength()});var l=s[s.length-1].width,u=s.slice(0,-1),f=[],c,h,v=0,p=o.column.columnWidth-2*Di.cellPad;for(o.value="";u.length;)c=u.shift(),h=c.width+l,v+h>p&&(o.value+=f.join(Di.wrapSpacer)+Di.lineBreaker,f=[],v=0),f.push(c.text),v+=h;v&&(o.value+=f.join(Di.wrapSpacer)),o.wrapped=!0}),a.selectAll("tspan.line").remove(),bHe(a.select("."+Di.cn.cellText),r,e,i),Tl.select(t.parentNode.parentNode).call(yj)}}function PWt(e,t,r,i,n){return function(){if(!n.settledY){var o=Tl.select(t.parentNode),s=dj(n),l=n.key-s.firstRowIndex,u=s.rows[l].rowHeight,f=n.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*Di.cellPad:u,c=Math.max(f,u),h=c-s.rows[l].rowHeight;h&&(s.rows[l].rowHeight=c,e.selectAll("."+Di.cn.columnCell).call(yj),gj(null,e.filter(pj),0),N5(r,i,!0)),o.attr("transform",function(){var v=this,p=v.parentNode,_=p.getBoundingClientRect(),T=Tl.select(v.parentNode).select("."+Di.cn.cellRect).node().getBoundingClientRect(),g=v.transform.baseVal.consolidate(),A=T.top-_.top+(g?g.matrix.f:Di.cellPad);return Up(wHe(n,Tl.select(v.parentNode).select("."+Di.cn.cellTextHolder).node().getBoundingClientRect().width),A)}),n.settledY=!0}}}function wHe(e,t){switch(e.align){case"left":return Di.cellPad;case"right":return e.column.columnWidth-(t||0)-Di.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return Di.cellPad}}function yj(e){e.attr("transform",function(t){var r=t.rowBlocks[0].auxiliaryBlocks.reduce(function(o,s){return o+PF(s,1/0)},0),i=dj(t),n=PF(i,t.key),a=n+r;return Up(0,a)}).selectAll("."+Di.cn.cellRect).attr("height",function(t){return DWt(dj(t),t.key).rowHeight})}function vj(e,t){for(var r=0,i=t-1;i>=0;i--)r+=RWt(e[i]);return r}function PF(e,t){for(var r=0,i=0;i<e.rows.length&&e.rows[i].rowIndex<t;i++)r+=e.rows[i].rowHeight;return r}function RWt(e){var t=e.allRowsHeight;if(t!==void 0)return t;for(var r=0,i=0;i<e.rows.length;i++)r+=e.rows[i].rowHeight;return e.allRowsHeight=r,r}function dj(e){return e.rowBlocks[e.page]}function DWt(e,t){return e.rows[t-e.firstRowIndex]}});var AHe=ne(DF=>{"use strict";var IWt=vc().getModuleCalcData,FWt=mj(),RF="table";DF.name=RF;DF.plot=function(e){var t=IWt(e.calcdata,RF)[0];t.length&&FWt(e,t)};DF.clean=function(e,t,r,i){var n=i._has&&i._has(RF),a=t._has&&t._has(RF);n&&!a&&i._paperdiv.selectAll(".table").remove()}});var SHe=ne((zmr,MHe)=>{"use strict";MHe.exports={attributes:nj(),supplyDefaults:$Ve(),calc:tHe(),plot:mj(),moduleType:"trace",name:"table",basePlotModule:AHe(),categories:["noOpacity"],meta:{}}});var kHe=ne((Omr,EHe)=>{"use strict";EHe.exports=SHe()});var RHe=ne((Bmr,PHe)=>{"use strict";var xj=ll(),CHe=Ku(),_j=dc(),qWt=kl().descriptionWithDates,zWt=Xs().overrideAll,LHe=hc().dash,bj=oa().extendFlat;PHe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:xj({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:_j.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:bj({},_j.labelalias,{editType:"calc"}),tickfont:xj({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:qWt("tick label")},tickformatstops:zWt(_j.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:CHe.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:bj({},LHe,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:bj({},LHe,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:CHe.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:xj({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}});var FF=ne((Nmr,FHe)=>{"use strict";var OWt=ll(),DHe=RHe(),IHe=Ku(),IF=OWt({editType:"calc"});IF.family.dflt='"Open Sans", verdana, arial, sans-serif';IF.size.dflt=12;IF.color.dflt=IHe.defaultLine;FHe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:DHe,baxis:DHe,font:IF,color:{valType:"color",dflt:IHe.defaultLine,editType:"plot"},transforms:void 0}});var OHe=ne((Umr,zHe)=>{"use strict";var qHe=Wt().isArray1D;zHe.exports=function(t,r,i){var n=i("x"),a=n&&n.length,o=i("y"),s=o&&o.length;if(!a&&!s)return!1;if(r._cheater=!n,(!a||qHe(n))&&(!s||qHe(o))){var l=a?n.length:1/0;s&&(l=Math.min(l,o.length)),r.a&&r.a.length&&(l=Math.min(l,r.a.length)),r.b&&r.b.length&&(l=Math.min(l,r.b.length)),r._length=l}else r._length=null;return!0}});var UHe=ne((Vmr,NHe)=>{"use strict";var BWt=FF(),BHe=_i().addOpacity,NWt=wi(),U5=Wt(),UWt=hx(),VWt=im(),HWt=am(),GWt=pL(),YWt=B0(),WWt=x2();NHe.exports=function(t,r,i){var n=i.letter,a=i.font||{},o=BWt[n+"axis"];function s(d,C){return U5.coerce(t,r,o,d,C)}function l(d,C){return U5.coerce2(t,r,o,d,C)}i.name&&(r._name=i.name,r._id=i.name),s("autotypenumbers",i.autotypenumbersDflt);var u=s("type");if(u==="-"&&(i.data&&XWt(r,i.data),r.type==="-"?r.type="linear":u=t.type=r.type),s("smoothing"),s("cheatertype"),s("showticklabels"),s("labelprefix",n+" = "),s("labelsuffix"),s("showtickprefix"),s("showticksuffix"),s("separatethousands"),s("tickformat"),s("exponentformat"),s("minexponent"),s("showexponent"),s("categoryorder"),s("tickmode"),s("tickvals"),s("ticktext"),s("tick0"),s("dtick"),r.tickmode==="array"&&(s("arraytick0"),s("arraydtick")),s("labelpadding"),r._hovertitle=n,u==="date"){var f=NWt.getComponentMethod("calendars","handleDefaults");f(t,r,"calendar",i.calendar)}YWt(r,i.fullLayout),r.c2p=U5.identity;var c=s("color",i.dfltColor),h=c===t.color?c:a.color,v=s("title.text");v&&(U5.coerceFont(s,"title.font",{family:a.family,size:U5.bigFont(a.size),color:h}),s("title.offset")),s("tickangle");var p=s("autorange",!r.isValidRange(t.range));p&&s("rangemode"),s("range"),r.cleanRange(),s("fixedrange"),UWt(t,r,s,u),HWt(t,r,s,u,i),VWt(t,r,s,u,i),GWt(t,r,s,{data:i.data,dataAttr:n});var _=l("gridcolor",BHe(c,.3)),T=l("gridwidth"),g=l("griddash"),A=s("showgrid");A||(delete r.gridcolor,delete r.gridwidth,delete r.griddash);var b=l("startlinecolor",c),w=l("startlinewidth",T),k=s("startline",r.showgrid||!!b||!!w);k||(delete r.startlinecolor,delete r.startlinewidth);var x=l("endlinecolor",c),E=l("endlinewidth",T),M=s("endline",r.showgrid||!!x||!!E);return M||(delete r.endlinecolor,delete r.endlinewidth),A?(s("minorgridcount"),s("minorgridwidth",T),s("minorgriddash",g),s("minorgridcolor",BHe(_,.06)),r.minorgridcount||(delete r.minorgridwidth,delete r.minorgriddash,delete r.minorgridcolor)):(delete r.gridcolor,delete r.gridwidth,delete r.griddash),r.showticklabels==="none"&&(delete r.tickfont,delete r.tickangle,delete r.showexponent,delete r.exponentformat,delete r.minexponent,delete r.tickformat,delete r.showticksuffix,delete r.showtickprefix),r.showticksuffix||delete r.ticksuffix,r.showtickprefix||delete r.tickprefix,s("tickmode"),r};function XWt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n=i+"calendar",a=e[n];e.type=WWt(t,a,{autotypenumbers:e.autotypenumbers})}}});var HHe=ne((Hmr,VHe)=>{"use strict";var ZWt=UHe(),jWt=So();VHe.exports=function(t,r,i,n,a){var o=n("a");o||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),KWt(t,r,i,a)};function KWt(e,t,r,i){var n=["aaxis","baxis"];n.forEach(function(a){var o=a.charAt(0),s=e[a]||{},l=jWt.newContainer(t,a),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:t.font,name:a,data:e[o],calendar:t.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};ZWt(s,l,u),l._categories=l._categories||[],!e[a]&&s.type!=="-"&&(e[a]={type:s.type})})}});var WHe=ne((Gmr,YHe)=>{"use strict";var GHe=Wt(),JWt=OHe(),QWt=HHe(),$Wt=FF(),eXt=Ku();YHe.exports=function(t,r,i,n){function a(l,u){return GHe.coerce(t,r,$Wt,l,u)}r._clipPathId="clip"+r.uid+"carpet";var o=a("color",eXt.defaultLine);if(GHe.coerceFont(a,"font"),a("carpet"),QWt(t,r,n,a,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var s=JWt(t,r,a);s||(r.visible=!1),r._cheater&&a("cheaterslope")}});var wj=ne((Ymr,XHe)=>{"use strict";var tXt=Wt().isArrayOrTypedArray;XHe.exports=function(t,r,i){var n;for(tXt(t)?t.length>r.length&&(t=t.slice(0,r.length)):t=[],n=0;n<r.length;n++)t[n]=i(r[n]);return t}});var Tj=ne((Wmr,ZHe)=>{"use strict";ZHe.exports=function(t,r,i){if(t.length===0)return"";var n,a=[],o=i?3:1;for(n=0;n<t.length;n+=o)a.push(t[n]+","+r[n]),i&&n<t.length-o&&(a.push("C"),a.push([t[n+1]+","+r[n+1],t[n+2]+","+r[n+2]+" "].join(" ")));return a.join(i?"":"L")}});var KHe=ne((Xmr,jHe)=>{"use strict";jHe.exports=function(t,r,i,n,a,o){var s=a[0]*t.dpdx(r),l=a[1]*t.dpdy(i),u=1,f=1;if(o){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),v=(a[0]*o[0]+a[1]*o[1])/c/h;f=Math.max(0,v)}var p=Math.atan2(l,s)*180/Math.PI;return p<-90?(p+=180,u=-u):p>90&&(p-=180,u=-u),{angle:p,flip:u,p:t.c2p(n,r,i),offsetMultplier:f}}});var iGe=ne((Zmr,nGe)=>{"use strict";var BF=Ai(),qF=aa(),zF=wj(),$He=Tj(),V5=KHe(),Aj=Es(),md=Wt(),eGe=md.strRotate,OF=md.strTranslate,tGe=Tf();nGe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=r.xaxis,s=r.yaxis,l=t._fullLayout,u=l._clips;md.makeTraceGroups(n,i,"trace").each(function(f){var c=BF.select(this),h=f[0],v=h.trace,p=v.aaxis,_=v.baxis,T=md.ensureSingle(c,"g","minorlayer"),g=md.ensureSingle(c,"g","majorlayer"),A=md.ensureSingle(c,"g","boundarylayer"),b=md.ensureSingle(c,"g","labellayer");c.style("opacity",v.opacity),wT(o,s,g,p,"a",p._gridlines,!0,a),wT(o,s,g,_,"b",_._gridlines,!0,a),wT(o,s,T,p,"a",p._minorgridlines,!0,a),wT(o,s,T,_,"b",_._minorgridlines,!0,a),wT(o,s,A,p,"a-boundary",p._boundarylines,a),wT(o,s,A,_,"b-boundary",_._boundarylines,a);var w=JHe(t,o,s,v,h,b,p._labels,"a-label"),k=JHe(t,o,s,v,h,b,_._labels,"b-label");nXt(t,b,v,h,o,s,w,k),rXt(v,h,u,o,s)})};function rXt(e,t,r,i,n){var a,o,s,l,u=r.select("#"+e._clipPathId);u.size()||(u=r.append("clipPath").classed("carpetclip",!0));var f=md.ensureSingle(u,"path","carpetboundary"),c=t.clipsegments,h=[];for(l=0;l<c.length;l++)a=c[l],o=zF([],a.x,i.c2p),s=zF([],a.y,n.c2p),h.push($He(o,s,a.bicubic));var v="M"+h.join("L")+"Z";u.attr("id",e._clipPathId),f.attr("d",v)}function wT(e,t,r,i,n,a,o){var s="const-"+n+"-lines",l=r.selectAll("."+s).data(a);l.enter().append("path").classed(s,!0).style("vector-effect",o?"none":"non-scaling-stroke"),l.each(function(u){var f=u,c=f.x,h=f.y,v=zF([],c,e.c2p),p=zF([],h,t.c2p),_="M"+$He(v,p,f.smoothing),T=BF.select(this);T.attr("d",_).style("stroke-width",f.width).style("stroke",f.color).style("stroke-dasharray",qF.dashStyle(f.dash,f.width)).style("fill","none")}),l.exit().remove()}function JHe(e,t,r,i,n,a,o,s){var l=a.selectAll("text."+s).data(o);l.enter().append("text").classed(s,!0);var u=0,f={};return l.each(function(c,h){var v;if(c.axis.tickangle==="auto")v=V5(i,t,r,c.xy,c.dxy);else{var p=(c.axis.tickangle+180)*Math.PI/180;v=V5(i,t,r,c.xy,[Math.cos(p),Math.sin(p)])}h||(f={angle:v.angle,flip:v.flip});var _=(c.endAnchor?-1:1)*v.flip,T=BF.select(this).attr({"text-anchor":_>0?"start":"end","data-notex":1}).call(qF.font,c.font).text(c.text).call(Aj.convertToTspans,e),g=qF.bBox(this);T.attr("transform",OF(v.p[0],v.p[1])+eGe(v.angle)+OF(c.axis.labelpadding*_,g.height*.3)),u=Math.max(u,g.width+c.axis.labelpadding)}),l.exit().remove(),f.maxExtent=u,f}function nXt(e,t,r,i,n,a,o,s){var l,u,f,c,h=md.aggNums(Math.min,null,r.a),v=md.aggNums(Math.max,null,r.a),p=md.aggNums(Math.min,null,r.b),_=md.aggNums(Math.max,null,r.b);l=.5*(h+v),u=p,f=r.ab2xy(l,u,!0),c=r.dxyda_rough(l,u),o.angle===void 0&&md.extendFlat(o,V5(r,n,a,f,r.dxydb_rough(l,u))),QHe(e,t,r,i,f,c,r.aaxis,n,a,o,"a-title"),l=h,u=.5*(p+_),f=r.ab2xy(l,u,!0),c=r.dxydb_rough(l,u),s.angle===void 0&&md.extendFlat(s,V5(r,n,a,f,r.dxyda_rough(l,u))),QHe(e,t,r,i,f,c,r.baxis,n,a,s,"b-title")}var rGe=tGe.LINE_SPACING,iXt=(1-tGe.MID_SHIFT)/rGe+1;function QHe(e,t,r,i,n,a,o,s,l,u,f){var c=[];o.title.text&&c.push(o.title.text);var h=t.selectAll("text."+f).data(c),v=u.maxExtent;h.enter().append("text").classed(f,!0),h.each(function(){var p=V5(r,s,l,n,a);["start","both"].indexOf(o.showticklabels)===-1&&(v=0);var _=o.title.font.size;v+=_+o.title.offset;var T=u.angle+(u.flip<0?180:0),g=(T-p.angle+450)%360,A=g>90&&g<270,b=BF.select(this);b.text(o.title.text).call(Aj.convertToTspans,e),A&&(v=(-Aj.lineCount(b)+iXt)*rGe*_-v),b.attr("transform",OF(p.p[0],p.p[1])+eGe(p.angle)+OF(0,v)).attr("text-anchor","middle").call(qF.font,o.title.font)}),h.exit().remove()}});var oGe=ne((jmr,aGe)=>{"use strict";var NF=Wt().isArrayOrTypedArray;aGe.exports=function(e,t,r){var i,n,a,o,s,l,u=[],f=NF(e)?e.length:e,c=NF(t)?t.length:t,h=NF(e)?e:null,v=NF(t)?t:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(f-1)),v&&(o=(v.length-1)/(v[v.length-1]-v[0])/(c-1));var p,_=1/0,T=-1/0;for(n=0;n<c;n++)for(u[n]=[],l=v?(v[n]-v[0])*o:n/(c-1),i=0;i<f;i++)s=h?(h[i]-h[0])*a:i/(f-1),p=s-l*r,_=Math.min(p,_),T=Math.max(p,T),u[n][i]=p;var g=1/(T-_),A=-_*g;for(n=0;n<c;n++)for(i=0;i<f;i++)u[n][i]=g*u[n][i]+A;return u}});var fGe=ne((Kmr,uGe)=>{"use strict";var sGe=Wt().isArrayOrTypedArray;uGe.exports=function(e){return lGe(e,0)};function lGe(e,t){if(!sGe(e)||t>=10)return null;for(var r=1/0,i=-1/0,n=e.length,a=0;a<n;a++){var o=e[a];if(sGe(o)){var s=lGe(o,t+1);s&&(r=Math.min(s[0],r),i=Math.max(s[1],i))}else r=Math.min(o,r),i=Math.max(o,i)}return[r,i]}});var hGe=ne((Jmr,cGe)=>{"use strict";var aXt=Xi(),L1=oa().extendFlat;cGe.exports=function(t,r,i){var n,a,o,s,l,u,f,c,h,v,p,_,T,g,A=t["_"+r],b=t[r+"axis"],w=b._gridlines=[],k=b._minorgridlines=[],x=b._boundarylines=[],E=t["_"+i],M=t[i+"axis"];b.tickmode==="array"&&(b.tickvals=A.slice());var d=t._xctrl,C=t._yctrl,S=d[0].length,P=d.length,D=t._a.length,z=t._b.length;aXt.prepTicks(b),b.tickmode==="array"&&delete b.tickvals;var O=b.smoothing?3:1;function V(F){var N,Z,J,re,le,fe,K,X,ae,oe,_e,be,he=[],ie=[],ye={};if(r==="b")for(Z=t.b2j(F),J=Math.floor(Math.max(0,Math.min(z-2,Z))),re=Z-J,ye.length=z,ye.crossLength=D,ye.xy=function(ue){return t.evalxy([],ue,Z)},ye.dxy=function(ue,Ae){return t.dxydi([],ue,J,Ae,re)},N=0;N<D;N++)fe=Math.min(D-2,N),K=N-fe,X=t.evalxy([],N,Z),M.smoothing&&N>0&&(ae=t.dxydi([],N-1,J,0,re),he.push(le[0]+ae[0]/3),ie.push(le[1]+ae[1]/3),oe=t.dxydi([],N-1,J,1,re),he.push(X[0]-oe[0]/3),ie.push(X[1]-oe[1]/3)),he.push(X[0]),ie.push(X[1]),le=X;else for(N=t.a2i(F),fe=Math.floor(Math.max(0,Math.min(D-2,N))),K=N-fe,ye.length=D,ye.crossLength=z,ye.xy=function(ue){return t.evalxy([],N,ue)},ye.dxy=function(ue,Ae){return t.dxydj([],fe,ue,K,Ae)},Z=0;Z<z;Z++)J=Math.min(z-2,Z),re=Z-J,X=t.evalxy([],N,Z),M.smoothing&&Z>0&&(_e=t.dxydj([],fe,Z-1,K,0),he.push(le[0]+_e[0]/3),ie.push(le[1]+_e[1]/3),be=t.dxydj([],fe,Z-1,K,1),he.push(X[0]-be[0]/3),ie.push(X[1]-be[1]/3)),he.push(X[0]),ie.push(X[1]),le=X;return ye.axisLetter=r,ye.axis=b,ye.crossAxis=M,ye.value=F,ye.constvar=i,ye.index=c,ye.x=he,ye.y=ie,ye.smoothing=M.smoothing,ye}function B(F){var N,Z,J,re,le,fe=[],K=[],X={};if(X.length=A.length,X.crossLength=E.length,r==="b")for(J=Math.max(0,Math.min(z-2,F)),le=Math.min(1,Math.max(0,F-J)),X.xy=function(ae){return t.evalxy([],ae,F)},X.dxy=function(ae,oe){return t.dxydi([],ae,J,oe,le)},N=0;N<S;N++)fe[N]=d[F*O][N],K[N]=C[F*O][N];else for(Z=Math.max(0,Math.min(D-2,F)),re=Math.min(1,Math.max(0,F-Z)),X.xy=function(ae){return t.evalxy([],F,ae)},X.dxy=function(ae,oe){return t.dxydj([],Z,ae,re,oe)},N=0;N<P;N++)fe[N]=d[N][F*O],K[N]=C[N][F*O];return X.axisLetter=r,X.axis=b,X.crossAxis=M,X.value=A[F],X.constvar=i,X.index=F,X.x=fe,X.y=K,X.smoothing=M.smoothing,X}if(b.tickmode==="array"){for(s=5e-15,l=[Math.floor((A.length-1-b.arraytick0)/b.arraydtick*(1+s)),Math.ceil(-b.arraytick0/b.arraydtick/(1+s))].sort(function(F,N){return F-N}),u=l[0]-1,f=l[1]+1,c=u;c<f;c++)a=b.arraytick0+b.arraydtick*c,!(a<0||a>A.length-1)&&w.push(L1(B(a),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(c=u;c<f;c++)if(o=b.arraytick0+b.arraydtick*c,p=Math.min(o+b.arraydtick,A.length-1),!(o<0||o>A.length-1)&&!(p<0||p>A.length-1))for(_=A[o],T=A[p],n=0;n<b.minorgridcount;n++)g=p-o,!(g<=0)&&(v=_+(T-_)*(n+1)/(b.minorgridcount+1)*(b.arraydtick/g),!(v<A[0]||v>A[A.length-1])&&k.push(L1(V(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash})));b.startline&&x.push(L1(B(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&x.push(L1(B(A.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(s=5e-15,l=[Math.floor((A[A.length-1]-b.tick0)/b.dtick*(1+s)),Math.ceil((A[0]-b.tick0)/b.dtick/(1+s))].sort(function(F,N){return F-N}),u=l[0],f=l[1],c=u;c<=f;c++)h=b.tick0+b.dtick*c,w.push(L1(V(h),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(c=u-1;c<f+1;c++)for(h=b.tick0+b.dtick*c,n=0;n<b.minorgridcount;n++)v=h+b.dtick*(n+1)/(b.minorgridcount+1),!(v<A[0]||v>A[A.length-1])&&k.push(L1(V(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&x.push(L1(V(A[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&x.push(L1(V(A[A.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}});var gGe=ne((Qmr,pGe)=>{"use strict";var vGe=Xi(),dGe=oa().extendFlat;pGe.exports=function(t,r){var i,n,a,o,s,l=r._labels=[],u=r._gridlines;for(i=0;i<u.length;i++)s=u[i],["start","both"].indexOf(r.showticklabels)!==-1&&(n=vGe.tickText(r,s.value),dGe(n,{prefix:a,suffix:o,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n)),["end","both"].indexOf(r.showticklabels)!==-1&&(n=vGe.tickText(r,s.value),dGe(n,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n))}});var mGe=ne(($mr,yGe)=>{"use strict";yGe.exports=function(t,r,i,n){var a,o,s,l=[],u=!!i.smoothing,f=!!n.smoothing,c=t[0].length-1,h=t.length-1;for(a=0,o=[],s=[];a<=c;a++)o[a]=t[0][a],s[a]=r[0][a];for(l.push({x:o,y:s,bicubic:u}),a=0,o=[],s=[];a<=h;a++)o[a]=t[a][c],s[a]=r[a][c];for(l.push({x:o,y:s,bicubic:f}),a=c,o=[],s=[];a>=0;a--)o[c-a]=t[h][a],s[c-a]=r[h][a];for(l.push({x:o,y:s,bicubic:u}),a=h,o=[],s=[];a>=0;a--)o[h-a]=t[a][0],s[h-a]=r[a][0];return l.push({x:o,y:s,bicubic:f}),l}});var _Ge=ne((e1r,xGe)=>{"use strict";var oXt=Wt();xGe.exports=function(t,r,i){var n,a,o,s=[],l=[],u=t[0].length,f=t.length;function c(J,re){var le=0,fe,K=0;return J>0&&(fe=t[re][J-1])!==void 0&&(K++,le+=fe),J<u-1&&(fe=t[re][J+1])!==void 0&&(K++,le+=fe),re>0&&(fe=t[re-1][J])!==void 0&&(K++,le+=fe),re<f-1&&(fe=t[re+1][J])!==void 0&&(K++,le+=fe),le/Math.max(1,K)}var h=0;for(n=0;n<u;n++)for(a=0;a<f;a++)t[a][n]===void 0&&(s.push(n),l.push(a),t[a][n]=c(n,a)),h=Math.max(h,Math.abs(t[a][n]));if(!s.length)return t;var v,p,_,T,g,A,b,w,k,x,E,M=1e-5,d=0,C=100,S=0,P=s.length;do{for(d=0,o=0;o<P;o++){n=s[o],a=l[o];var D=0,z=0,O,V,B,F,N,Z;n===0?(N=Math.min(u-1,2),B=r[N],F=r[1],O=t[a][N],V=t[a][1],z+=V+(V-O)*(r[0]-F)/(F-B),D++):n===u-1&&(N=Math.max(0,u-3),B=r[N],F=r[u-2],O=t[a][N],V=t[a][u-2],z+=V+(V-O)*(r[u-1]-F)/(F-B),D++),(n===0||n===u-1)&&a>0&&a<f-1&&(v=i[a+1]-i[a],p=i[a]-i[a-1],z+=(p*t[a+1][n]+v*t[a-1][n])/(p+v),D++),a===0?(Z=Math.min(f-1,2),B=i[Z],F=i[1],O=t[Z][n],V=t[1][n],z+=V+(V-O)*(i[0]-F)/(F-B),D++):a===f-1&&(Z=Math.max(0,f-3),B=i[Z],F=i[f-2],O=t[Z][n],V=t[f-2][n],z+=V+(V-O)*(i[f-1]-F)/(F-B),D++),(a===0||a===f-1)&&n>0&&n<u-1&&(v=r[n+1]-r[n],p=r[n]-r[n-1],z+=(p*t[a][n+1]+v*t[a][n-1])/(p+v),D++),D?z/=D:(_=r[n+1]-r[n],T=r[n]-r[n-1],g=i[a+1]-i[a],A=i[a]-i[a-1],b=_*T*(_+T),w=g*A*(g+A),z=(b*(A*t[a+1][n]+g*t[a-1][n])+w*(T*t[a][n+1]+_*t[a][n-1]))/(w*(T+_)+b*(A+g))),k=z-t[a][n],x=k/h,d+=x*x,E=D?0:.85,t[a][n]+=k*(1+E)}d=Math.sqrt(d)}while(S++<C&&d>M);return oXt.log("Smoother converged to",d,"after",S,"iterations"),t}});var wGe=ne((t1r,bGe)=>{"use strict";bGe.exports={RELATIVE_CULL_TOLERANCE:1e-6}});var MGe=ne((r1r,AGe)=>{"use strict";var TGe=.5;AGe.exports=function(t,r,i,n){var a=t[0]-r[0],o=t[1]-r[1],s=i[0]-r[0],l=i[1]-r[1],u=Math.pow(a*a+o*o,TGe/2),f=Math.pow(s*s+l*l,TGe/2),c=(f*f*a-u*u*s)*n,h=(f*f*o-u*u*l)*n,v=f*(u+f)*3,p=u*(u+f)*3;return[[r[0]+(v&&c/v),r[1]+(v&&h/v)],[r[0]-(p&&c/p),r[1]-(p&&h/p)]]}});var EGe=ne((n1r,SGe)=>{"use strict";var Mj=MGe(),UF=Wt().ensureArray;function TT(e,t,r){var i=-.5*r[0]+1.5*t[0],n=-.5*r[1]+1.5*t[1];return[(2*i+e[0])/3,(2*n+e[1])/3]}SGe.exports=function(t,r,i,n,a,o){var s,l,u,f,c,h,v,p,_,T,g=i[0].length,A=i.length,b=a?3*g-2:g,w=o?3*A-2:A;for(t=UF(t,w),r=UF(r,w),u=0;u<w;u++)t[u]=UF(t[u],b),r[u]=UF(r[u],b);for(l=0,f=0;l<A;l++,f+=o?3:1)for(c=t[f],h=r[f],v=i[l],p=n[l],s=0,u=0;s<g;s++,u+=a?3:1)c[u]=v[s],h[u]=p[s];if(a)for(l=0,f=0;l<A;l++,f+=o?3:1){for(s=1,u=3;s<g-1;s++,u+=3)_=Mj([i[l][s-1],n[l][s-1]],[i[l][s],n[l][s]],[i[l][s+1],n[l][s+1]],a),t[f][u-1]=_[0][0],r[f][u-1]=_[0][1],t[f][u+1]=_[1][0],r[f][u+1]=_[1][1];T=TT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=T[0],r[f][1]=T[1],T=TT([t[f][b-1],r[f][b-1]],[t[f][b-3],r[f][b-3]],[t[f][b-4],r[f][b-4]]),t[f][b-2]=T[0],r[f][b-2]=T[1]}if(o)for(u=0;u<b;u++){for(f=3;f<w-3;f+=3)_=Mj([t[f-3][u],r[f-3][u]],[t[f][u],r[f][u]],[t[f+3][u],r[f+3][u]],o),t[f-1][u]=_[0][0],r[f-1][u]=_[0][1],t[f+1][u]=_[1][0],r[f+1][u]=_[1][1];T=TT([t[0][u],r[0][u]],[t[2][u],r[2][u]],[t[3][u],r[3][u]]),t[1][u]=T[0],r[1][u]=T[1],T=TT([t[w-1][u],r[w-1][u]],[t[w-3][u],r[w-3][u]],[t[w-4][u],r[w-4][u]]),t[w-2][u]=T[0],r[w-2][u]=T[1]}if(a&&o)for(f=1;f<w;f+=(f+1)%3===0?2:1){for(u=3;u<b-3;u+=3)_=Mj([t[f][u-3],r[f][u-3]],[t[f][u],r[f][u]],[t[f][u+3],r[f][u+3]],a),t[f][u-1]=.5*(t[f][u-1]+_[0][0]),r[f][u-1]=.5*(r[f][u-1]+_[0][1]),t[f][u+1]=.5*(t[f][u+1]+_[1][0]),r[f][u+1]=.5*(r[f][u+1]+_[1][1]);T=TT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=.5*(t[f][1]+T[0]),r[f][1]=.5*(r[f][1]+T[1]),T=TT([t[f][b-1],r[f][b-1]],[t[f][b-3],r[f][b-3]],[t[f][b-4],r[f][b-4]]),t[f][b-2]=.5*(t[f][b-2]+T[0]),r[f][b-2]=.5*(r[f][b-2]+T[1])}return[t,r]}});var CGe=ne((i1r,kGe)=>{"use strict";kGe.exports=function(e,t,r,i,n){var a=t-2,o=r-2;return i&&n?function(s,l,u){s||(s=[]);var f,c,h,v,p,_,T=Math.max(0,Math.min(Math.floor(l),a)),g=Math.max(0,Math.min(Math.floor(u),o)),A=Math.max(0,Math.min(1,l-T)),b=Math.max(0,Math.min(1,u-g));T*=3,g*=3;var w=A*A,k=w*A,x=1-A,E=x*x,M=E*x,d=b*b,C=d*b,S=1-b,P=S*S,D=P*S;for(_=0;_<e.length;_++)p=e[_],f=M*p[g][T]+3*(E*A*p[g][T+1]+x*w*p[g][T+2])+k*p[g][T+3],c=M*p[g+1][T]+3*(E*A*p[g+1][T+1]+x*w*p[g+1][T+2])+k*p[g+1][T+3],h=M*p[g+2][T]+3*(E*A*p[g+2][T+1]+x*w*p[g+2][T+2])+k*p[g+2][T+3],v=M*p[g+3][T]+3*(E*A*p[g+3][T+1]+x*w*p[g+3][T+2])+k*p[g+3][T+3],s[_]=D*f+3*(P*b*c+S*d*h)+C*v;return s}:i?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,_,T,g,A,b;f*=3;var w=h*h,k=w*h,x=1-h,E=x*x,M=E*x,d=1-v;for(A=0;A<e.length;A++)b=e[A],p=d*b[c][f]+v*b[c+1][f],_=d*b[c][f+1]+v*b[c+1][f+1],T=d*b[c][f+2]+v*b[c+1][f+1],g=d*b[c][f+3]+v*b[c+1][f+1],s[A]=M*p+3*(E*h*_+x*w*T)+k*g;return s}:n?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,_,T,g,A,b;c*=3;var w=v*v,k=w*v,x=1-v,E=x*x,M=E*x,d=1-h;for(A=0;A<e.length;A++)b=e[A],p=d*b[c][f]+h*b[c][f+1],_=d*b[c+1][f]+h*b[c+1][f+1],T=d*b[c+2][f]+h*b[c+2][f+1],g=d*b[c+3][f]+h*b[c+3][f+1],s[A]=M*p+3*(E*v*_+x*w*T)+k*g;return s}:function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),p,_,T,g,A=1-v,b=1-h;for(T=0;T<e.length;T++)g=e[T],p=b*g[c][f]+h*g[c][f+1],_=b*g[c+1][f]+h*g[c+1][f+1],s[T]=A*p+v*_;return s}}});var PGe=ne((a1r,LGe)=>{"use strict";LGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var p=o*o,_=1-o,T=_*_,g=_*o*2,A=-3*T,b=3*(T-g),w=3*(g-p),k=3*p,x=s*s,E=x*s,M=1-s,d=M*M,C=d*M;for(v=0;v<e.length;v++)h=e[v],l=A*h[a][n]+b*h[a][n+1]+w*h[a][n+2]+k*h[a][n+3],u=A*h[a+1][n]+b*h[a+1][n+1]+w*h[a+1][n+2]+k*h[a+1][n+3],f=A*h[a+2][n]+b*h[a+2][n+1]+w*h[a+2][n+2]+k*h[a+2][n+3],c=A*h[a+3][n]+b*h[a+3][n+1]+w*h[a+3][n+2]+k*h[a+3][n+3],i[v]=C*l+3*(d*s*u+M*x*f)+E*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;n*=3;var h=o*o,v=1-o,p=v*v,_=v*o*2,T=-3*p,g=3*(p-_),A=3*(_-h),b=3*h,w=1-s;for(f=0;f<e.length;f++)c=e[f],l=T*c[a][n]+g*c[a][n+1]+A*c[a][n+2]+b*c[a][n+3],u=T*c[a+1][n]+g*c[a+1][n+1]+A*c[a+1][n+2]+b*c[a+1][n+3],i[f]=w*l+s*u;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;a*=3;var p=s*s,_=p*s,T=1-s,g=T*T,A=g*T;for(h=0;h<e.length;h++)v=e[h],l=v[a][n+1]-v[a][n],u=v[a+1][n+1]-v[a+1][n],f=v[a+2][n+1]-v[a+2][n],c=v[a+3][n+1]-v[a+3][n],i[h]=A*l+3*(g*s*u+T*p*f)+_*c;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-s;for(f=0;f<e.length;f++)c=e[f],l=c[a][n+1]-c[a][n],u=c[a+1][n+1]-c[a+1][n],i[f]=h*l+s*u;return i}}});var DGe=ne((o1r,RGe)=>{"use strict";RGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var p=o*o,_=p*o,T=1-o,g=T*T,A=g*T,b=s*s,w=1-s,k=w*w,x=w*s*2,E=-3*k,M=3*(k-x),d=3*(x-b),C=3*b;for(v=0;v<e.length;v++)h=e[v],l=E*h[a][n]+M*h[a+1][n]+d*h[a+2][n]+C*h[a+3][n],u=E*h[a][n+1]+M*h[a+1][n+1]+d*h[a+2][n+1]+C*h[a+3][n+1],f=E*h[a][n+2]+M*h[a+1][n+2]+d*h[a+2][n+2]+C*h[a+3][n+2],c=E*h[a][n+3]+M*h[a+1][n+3]+d*h[a+2][n+3]+C*h[a+3][n+3],i[v]=A*l+3*(g*o*u+T*p*f)+_*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3;var p=s*s,_=p*s,T=1-s,g=T*T,A=g*T;for(h=0;h<e.length;h++)v=e[h],l=v[a+1][n]-v[a][n],u=v[a+1][n+1]-v[a][n+1],f=v[a+1][n+2]-v[a][n+2],c=v[a+1][n+3]-v[a][n+3],i[h]=A*l+3*(g*s*u+T*p*f)+_*c;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;a*=3;var h=1-o,v=s*s,p=1-s,_=p*p,T=p*s*2,g=-3*_,A=3*(_-T),b=3*(T-v),w=3*v;for(f=0;f<e.length;f++)c=e[f],l=g*c[a][n]+A*c[a+1][n]+b*c[a+2][n]+w*c[a+3][n],u=g*c[a][n+1]+A*c[a+1][n+1]+b*c[a+2][n+1]+w*c[a+3][n+1],i[f]=h*l+o*u;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-o;for(f=0;f<e.length;f++)c=e[f],l=c[a+1][n]-c[a][n],u=c[a+1][n+1]-c[a][n+1],i[f]=h*l+o*u;return i}}});var zGe=ne((s1r,qGe)=>{"use strict";var IGe=wGe(),FGe=Jk().findBin,sXt=EGe(),lXt=CGe(),uXt=PGe(),fXt=DGe();qGe.exports=function(t){var r=t._a,i=t._b,n=r.length,a=i.length,o=t.aaxis,s=t.baxis,l=r[0],u=r[n-1],f=i[0],c=i[a-1],h=r[r.length-1]-r[0],v=i[i.length-1]-i[0],p=h*IGe.RELATIVE_CULL_TOLERANCE,_=v*IGe.RELATIVE_CULL_TOLERANCE;l-=p,u+=p,f-=_,c+=_,t.isVisible=function(T,g){return T>l&&T<u&&g>f&&g<c},t.isOccluded=function(T,g){return T<l||T>u||g<f||g>c},t.setScale=function(){var T=t._x,g=t._y,A=sXt(t._xctrl,t._yctrl,T,g,o.smoothing,s.smoothing);t._xctrl=A[0],t._yctrl=A[1],t.evalxy=lXt([t._xctrl,t._yctrl],n,a,o.smoothing,s.smoothing),t.dxydi=uXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing),t.dxydj=fXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing)},t.i2a=function(T){var g=Math.max(0,Math.floor(T[0]),n-2),A=T[0]-g;return(1-A)*r[g]+A*r[g+1]},t.j2b=function(T){var g=Math.max(0,Math.floor(T[1]),n-2),A=T[1]-g;return(1-A)*i[g]+A*i[g+1]},t.ij2ab=function(T){return[t.i2a(T[0]),t.j2b(T[1])]},t.a2i=function(T){var g=Math.max(0,Math.min(FGe(T,r),n-2)),A=r[g],b=r[g+1];return Math.max(0,Math.min(n-1,g+(T-A)/(b-A)))},t.b2j=function(T){var g=Math.max(0,Math.min(FGe(T,i),a-2)),A=i[g],b=i[g+1];return Math.max(0,Math.min(a-1,g+(T-A)/(b-A)))},t.ab2ij=function(T){return[t.a2i(T[0]),t.b2j(T[1])]},t.i2c=function(T,g){return t.evalxy([],T,g)},t.ab2xy=function(T,g,A){if(!A&&(T<r[0]||T>r[n-1]|g<i[0]||g>i[a-1]))return[!1,!1];var b=t.a2i(T),w=t.b2j(g),k=t.evalxy([],b,w);if(A){var x=0,E=0,M=[],d,C,S,P;T<r[0]?(d=0,C=0,x=(T-r[0])/(r[1]-r[0])):T>r[n-1]?(d=n-2,C=1,x=(T-r[n-1])/(r[n-1]-r[n-2])):(d=Math.max(0,Math.min(n-2,Math.floor(b))),C=b-d),g<i[0]?(S=0,P=0,E=(g-i[0])/(i[1]-i[0])):g>i[a-1]?(S=a-2,P=1,E=(g-i[a-1])/(i[a-1]-i[a-2])):(S=Math.max(0,Math.min(a-2,Math.floor(w))),P=w-S),x&&(t.dxydi(M,d,S,C,P),k[0]+=M[0]*x,k[1]+=M[1]*x),E&&(t.dxydj(M,d,S,C,P),k[0]+=M[0]*E,k[1]+=M[1]*E)}return k},t.c2p=function(T,g,A){return[g.c2p(T[0]),A.c2p(T[1])]},t.p2x=function(T,g,A){return[g.p2c(T[0]),A.p2c(T[1])]},t.dadi=function(T){var g=Math.max(0,Math.min(r.length-2,T));return r[g+1]-r[g]},t.dbdj=function(T){var g=Math.max(0,Math.min(i.length-2,T));return i[g+1]-i[g]},t.dxyda=function(T,g,A,b){var w=t.dxydi(null,T,g,A,b),k=t.dadi(T,A);return[w[0]/k,w[1]/k]},t.dxydb=function(T,g,A,b){var w=t.dxydj(null,T,g,A,b),k=t.dbdj(g,b);return[w[0]/k,w[1]/k]},t.dxyda_rough=function(T,g,A){var b=h*(A||.1),w=t.ab2xy(T+b,g,!0),k=t.ab2xy(T-b,g,!0);return[(w[0]-k[0])*.5/b,(w[1]-k[1])*.5/b]},t.dxydb_rough=function(T,g,A){var b=v*(A||.1),w=t.ab2xy(T,g+b,!0),k=t.ab2xy(T,g-b,!0);return[(w[0]-k[0])*.5/b,(w[1]-k[1])*.5/b]},t.dpdx=function(T){return T._m},t.dpdy=function(T){return T._m}}});var YGe=ne((l1r,GGe)=>{"use strict";var VF=Xi(),OGe=Wt().isArray1D,cXt=oGe(),BGe=fGe(),NGe=hGe(),UGe=gGe(),hXt=mGe(),VGe=vP(),HGe=_Ge(),vXt=cP(),dXt=zGe();GGe.exports=function(t,r){var i=VF.getFromId(t,r.xaxis),n=VF.getFromId(t,r.yaxis),a=r.aaxis,o=r.baxis,s=r.x,l=r.y,u=[];s&&OGe(s)&&u.push("x"),l&&OGe(l)&&u.push("y"),u.length&&vXt(r,a,o,"a","b",u);var f=r._a=r._a||r.a,c=r._b=r._b||r.b;s=r._x||r.x,l=r._y||r.y;var h={};if(r._cheater){var v=a.cheatertype==="index"?f.length:f,p=o.cheatertype==="index"?c.length:c;s=cXt(v,p,r.cheaterslope)}r._x=s=VGe(s),r._y=l=VGe(l),HGe(s,f,c),HGe(l,f,c),dXt(r),r.setScale();var _=BGe(s),T=BGe(l),g=.5*(_[1]-_[0]),A=.5*(_[1]+_[0]),b=.5*(T[1]-T[0]),w=.5*(T[1]+T[0]),k=1.3;return _=[A-g*k,A+g*k],T=[w-b*k,w+b*k],r._extremes[i._id]=VF.findExtremes(i,_,{padded:!0}),r._extremes[n._id]=VF.findExtremes(n,T,{padded:!0}),NGe(r,"a","b"),NGe(r,"b","a"),UGe(r,a),UGe(r,o),h.clipsegments=hXt(r._xctrl,r._yctrl,a,o),h.x=s,h.y=l,h.a=f,h.b=c,[h]}});var XGe=ne((u1r,WGe)=>{"use strict";WGe.exports={attributes:FF(),supplyDefaults:WHe(),plot:iGe(),calc:YGe(),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:vu(),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}});var jGe=ne((f1r,ZGe)=>{"use strict";ZGe.exports=XGe()});var Sj=ne((c1r,JGe)=>{"use strict";var pXt=Y0(),Hp=cu(),gXt=es(),yXt=Ba().hovertemplateAttrs,mXt=Ba().texttemplateAttrs,KGe=Ps(),P1=oa().extendFlat,Vp=Hp.marker,AT=Hp.line,xXt=Vp.line;JGe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:P1({},Hp.mode,{dflt:"markers"}),text:P1({},Hp.text,{}),texttemplate:mXt({editType:"plot"},{keys:["a","b","text"]}),hovertext:P1({},Hp.hovertext,{}),line:{color:AT.color,width:AT.width,dash:AT.dash,backoff:AT.backoff,shape:P1({},AT.shape,{values:["linear","spline"]}),smoothing:AT.smoothing,editType:"calc"},connectgaps:Hp.connectgaps,fill:P1({},Hp.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:pXt(),marker:P1({symbol:Vp.symbol,opacity:Vp.opacity,maxdisplayed:Vp.maxdisplayed,angle:Vp.angle,angleref:Vp.angleref,standoff:Vp.standoff,size:Vp.size,sizeref:Vp.sizeref,sizemin:Vp.sizemin,sizemode:Vp.sizemode,line:P1({width:xXt.width,editType:"calc"},KGe("marker.line")),gradient:Vp.gradient,editType:"calc"},KGe("marker")),textfont:Hp.textfont,textposition:Hp.textposition,selected:Hp.selected,unselected:Hp.unselected,hoverinfo:P1({},gXt.hoverinfo,{flags:["a","b","text","name"]}),hoveron:Hp.hoveron,hovertemplate:yXt()}});var tYe=ne((h1r,eYe)=>{"use strict";var QGe=Wt(),_Xt=G0(),MT=js(),bXt=dp(),wXt=s0(),$Ge=N2(),TXt=l0(),AXt=X0(),MXt=Sj();eYe.exports=function(t,r,i,n){function a(h,v){return QGe.coerce(t,r,MXt,h,v)}a("carpet"),r.xaxis="x",r.yaxis="y";var o=a("a"),s=a("b"),l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("text"),a("texttemplate"),a("hovertext");var u=l<_Xt.PTS_LINESONLY?"lines+markers":"lines";a("mode",u),MT.hasMarkers(r)&&bXt(t,r,i,n,a,{gradient:!0}),MT.hasLines(r)&&(wXt(t,r,i,n,a,{backoff:!0}),$Ge(t,r,a),a("connectgaps")),MT.hasText(r)&&TXt(t,r,n,a);var f=[];(MT.hasMarkers(r)||MT.hasText(r))&&(a("marker.maxdisplayed"),f.push("points")),a("fill"),r.fill!=="none"&&(AXt(t,r,i,a),MT.hasLines(r)||$Ge(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&f.push("fills");var c=a("hoveron",f.join("+")||"points");c!=="fills"&&a("hovertemplate"),QGe.coerceSelectionMarkerOpacity(r,a)}});var nYe=ne((v1r,rYe)=>{"use strict";rYe.exports=function(t,r){var i={},n=r._carpet,a=n.ab2ij([t.a,t.b]),o=Math.floor(a[0]),s=a[0]-o,l=Math.floor(a[1]),u=a[1]-l,f=n.evalxy([],o,l,s,u);return i.yLabel=f[1].toFixed(3),i}});var HF=ne((d1r,iYe)=>{"use strict";iYe.exports=function(e,t){for(var r=e._fullData.length,i,n=0;n<r;n++){var a=e._fullData[n];if(a.index!==t.index&&a.type==="carpet"&&(i||(i=a),a.carpet===t.carpet))return a}return i}});var sYe=ne((p1r,oYe)=>{"use strict";var aYe=la(),SXt=pp(),EXt=Z0(),kXt=gp(),CXt=yp().calcMarkerSize,LXt=HF();oYe.exports=function(t,r){var i=r._carpetTrace=LXt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){var n;r.xaxis=i.xaxis,r.yaxis=i.yaxis;var a=r._length,o=new Array(a),s,l,u=!1;for(n=0;n<a;n++)if(s=r.a[n],l=r.b[n],aYe(s)&&aYe(l)){var f=i.ab2xy(+s,+l,!0),c=i.isVisible(+s,+l);c||(u=!0),o[n]={x:f[0],y:f[1],a:s,b:l,vis:c}}else o[n]={x:!1,y:!1};return r._needsCull=u,o[0].carpet=i,o[0].trace=r,CXt(r,a),SXt(t,r),EXt(o,r),kXt(o,r),o}}});var fYe=ne((g1r,uYe)=>{"use strict";var PXt=W2(),lYe=Xi(),RXt=aa();uYe.exports=function(t,r,i,n){var a,o,s,l=i[0][0].carpet,u=lYe.getFromId(t,l.xaxis||"x"),f=lYe.getFromId(t,l.yaxis||"y"),c={xaxis:u,yaxis:f,plot:r.plot};for(a=0;a<i.length;a++)o=i[a][0].trace,o._xA=u,o._yA=f;for(PXt(t,c,i,n),a=0;a<i.length;a++)o=i[a][0].trace,s=n.selectAll("g.trace"+o.uid+" .js-line"),RXt.setClipUrl(s,i[a][0].carpet._clipPathId,t)}});var hYe=ne((y1r,cYe)=>{"use strict";var DXt=K2(),IXt=Wt().fillText;cYe.exports=function(t,r,i,n){var a=DXt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index];o.a=c.a,o.b=c.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var h=o.trace,v=h._carpet,p=h._module.formatLabels(c,h);o.yLabel=p.yLabel,delete o.text;var _=[];function T(b,w){var k;b.labelprefix&&b.labelprefix.length>0?k=b.labelprefix.replace(/ = $/,""):k=b._hovertitle,_.push(k+": "+w.toFixed(3)+b.labelsuffix)}if(!h.hovertemplate){var g=c.hi||h.hoverinfo,A=g.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&T(v.aaxis,c.a),A.indexOf("b")!==-1&&T(v.baxis,c.b),_.push("y: "+o.yLabel),A.indexOf("text")!==-1&&IXt(c,h,_),o.extraText=_.join("<br>")}return a}});var dYe=ne((m1r,vYe)=>{"use strict";vYe.exports=function(t,r,i,n,a){var o=n[a];return t.a=o.a,t.b=o.b,t.y=o.y,t}});var gYe=ne((x1r,pYe)=>{"use strict";pYe.exports={attributes:Sj(),supplyDefaults:tYe(),colorbar:ph(),formatLabels:nYe(),calc:sYe(),plot:fYe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:hYe(),selectPoints:J2(),eventData:dYe(),moduleType:"trace",name:"scattercarpet",basePlotModule:vu(),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}});var mYe=ne((_1r,yYe)=>{"use strict";yYe.exports=gYe()});var Ej=ne((b1r,xYe)=>{"use strict";var Gp=Xx(),R1=sS(),FXt=Ps(),qXt=oa().extendFlat,wg=R1.contours;xYe.exports=qXt({carpet:{valType:"string",editType:"calc"},z:Gp.z,a:Gp.x,a0:Gp.x0,da:Gp.dx,b:Gp.y,b0:Gp.y0,db:Gp.dy,text:Gp.text,hovertext:Gp.hovertext,transpose:Gp.transpose,atype:Gp.xtype,btype:Gp.ytype,fillcolor:R1.fillcolor,autocontour:R1.autocontour,ncontours:R1.ncontours,contours:{type:wg.type,start:wg.start,end:wg.end,size:wg.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:wg.showlines,showlabels:wg.showlabels,labelfont:wg.labelfont,labelformat:wg.labelformat,operation:wg.operation,value:wg.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:R1.line.color,width:R1.line.width,dash:R1.line.dash,smoothing:R1.line.smoothing,editType:"plot"},transforms:void 0},FXt("",{cLetter:"z",autoColorDflt:!1}))});var kj=ne((w1r,wYe)=>{"use strict";var _Ye=Wt(),zXt=$M(),bYe=Ej(),OXt=_N(),BXt=CP(),NXt=LP();wYe.exports=function(t,r,i,n){function a(u,f){return _Ye.coerce(t,r,bYe,u,f)}function o(u){return _Ye.coerce2(t,r,bYe,u)}if(a("carpet"),t.a&&t.b){var s=zXt(t,r,a,n,"a","b");if(!s){r.visible=!1;return}a("text");var l=a("contours.type")==="constraint";l?OXt(t,r,a,n,i,{hasHover:!1}):(BXt(t,r,a,o),NXt(t,r,a,n,{hasHover:!1}))}else r._defaultColor=i,r._length=null}});var SYe=ne((T1r,MYe)=>{"use strict";var UXt=gv(),TYe=Wt(),VXt=cP(),HXt=vP(),GXt=dP(),YXt=pP(),AYe=U9(),WXt=kj(),XXt=HF(),ZXt=lN();MYe.exports=function(t,r){var i=r._carpetTrace=XXt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){if(!r.a||!r.b){var n=t.data[i.index],a=t.data[r.index];a.a||(a.a=n.a),a.b||(a.b=n.b),WXt(a,r,r._defaultColor,t._fullLayout)}var o=jXt(t,r);return ZXt(r,r._z),o}};function jXt(e,t){var r=t._carpetTrace,i=r.aaxis,n=r.baxis,a,o,s,l,u,f,c;i._minDtick=0,n._minDtick=0,TYe.isArray1D(t.z)&&VXt(t,i,n,"a","b",["z"]),a=t._a=t._a||t.a,l=t._b=t._b||t.b,a=a?i.makeCalcdata(t,"_a"):[],l=l?n.makeCalcdata(t,"_b"):[],o=t.a0||0,s=t.da||1,u=t.b0||0,f=t.db||1,c=t._z=HXt(t._z||t.z,t.transpose),t._emptypoints=YXt(c),GXt(c,t._emptypoints);var h=TYe.maxRowLength(c),v=t.xtype==="scaled"?"":a,p=AYe(t,v,o,s,h,i),_=t.ytype==="scaled"?"":l,T=AYe(t,_,u,f,c.length,n),g={a:p,b:T,z:c};return t.contours.type==="levels"&&t.contours.coloring!=="none"&&UXt(e,t,{vals:c,containerStr:"",cLetter:"z"}),[g]}});var kYe=ne((A1r,EYe)=>{"use strict";var KXt=Wt().isArrayOrTypedArray;EYe.exports=function(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,p,_,T,g=KXt(r)?"a":"b",A=g==="a"?e.aaxis:e.baxis,b=A.smoothing,w=g==="a"?e.a2i:e.b2j,k=g==="a"?r:i,x=g==="a"?i:r,E=g==="a"?t.a.length:t.b.length,M=g==="a"?t.b.length:t.a.length,d=Math.floor(g==="a"?e.b2j(x):e.a2i(x)),C=g==="a"?function(re){return e.evalxy([],re,d)}:function(re){return e.evalxy([],d,re)};b&&(o=Math.max(0,Math.min(M-2,d)),s=d-o,a=g==="a"?function(re,le){return e.dxydi([],re,o,le,s)}:function(re,le){return e.dxydj([],o,re,s,le)});var S=w(k[0]),P=w(k[1]),D=S<P?1:-1,z=(P-S)*1e-8,O=D>0?Math.floor:Math.ceil,V=D>0?Math.ceil:Math.floor,B=D>0?Math.min:Math.max,F=D>0?Math.max:Math.min,N=O(S+z),Z=V(P-z);f=C(S);var J=[[f]];for(n=N;n*D<Z*D;n+=D)l=[],p=F(S,n),_=B(P,n+D),T=_-p,u=Math.max(0,Math.min(E-2,Math.floor(.5*(p+_)))),c=C(_),b&&(h=a(u,p-u),v=a(u,_-u),l.push([f[0]+h[0]/3*T,f[1]+h[1]/3*T]),l.push([c[0]-v[0]/3*T,c[1]-v[1]/3*T])),l.push(c),J.push(l),f=c;return J}});var FYe=ne((M1r,IYe)=>{"use strict";var YF=Ai(),WF=wj(),DYe=Tj(),H5=aa(),Cy=Wt(),JXt=fN(),QXt=cN(),ab=DP(),GF=uS(),$Xt=pN(),eZt=dN(),tZt=gN(),rZt=HF(),CYe=kYe();IYe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;Cy.makeTraceGroups(n,i,"contour").each(function(s){var l=YF.select(this),u=s[0],f=u.trace,c=f._carpetTrace=rZt(t,f),h=t.calcdata[c.index][0];if(!c.visible||c.visible==="legendonly")return;var v=u.a,p=u.b,_=f.contours,T=eZt(_,r,u),g=_.type==="constraint",A=_._operation,b=g?A==="="?"lines":"fill":_.coloring;function w(O){var V=c.ab2xy(O[0],O[1],!0);return[a.c2p(V[0]),o.c2p(V[1])]}var k=[[v[0],p[p.length-1]],[v[v.length-1],p[p.length-1]],[v[v.length-1],p[0]],[v[0],p[0]]];JXt(T);var x=(v[v.length-1]-v[0])*1e-8,E=(p[p.length-1]-p[0])*1e-8;QXt(T,x,E);var M=T;_.type==="constraint"&&(M=$Xt(T,A)),nZt(T,w);var d,C,S,P,D=[];for(P=h.clipsegments.length-1;P>=0;P--)d=h.clipsegments[P],C=WF([],d.x,a.c2p),S=WF([],d.y,o.c2p),C.reverse(),S.reverse(),D.push(DYe(C,S,d.bicubic));var z="M"+D.join("L")+"Z";oZt(l,h.clipsegments,a,o,g,b),sZt(f,l,a,o,M,k,w,c,h,b,z),iZt(l,T,t,u,_,r,c),H5.setClipUrl(l,c._clipPathId,t)})};function nZt(e,t){var r,i,n,a,o,s,l,u,f;for(r=0;r<e.length;r++){for(a=e[r],o=a.pedgepaths=[],s=a.ppaths=[],i=0;i<a.edgepaths.length;i++){for(f=a.edgepaths[i],l=[],n=0;n<f.length;n++)l[n]=t(f[n]);o.push(l)}for(i=0;i<a.paths.length;i++){for(f=a.paths[i],u=[],n=0;n<f.length;n++)u[n]=t(f[n]);s.push(u)}}}function iZt(e,t,r,i,n,a,o){var s=r._context.staticPlot,l=Cy.ensureSingle(e,"g","contourlines"),u=n.showlines!==!1,f=n.showlabels,c=u&&f,h=ab.createLines(l,u||f,t,s),v=ab.createLineClip(l,c,r,i.trace.uid),p=e.selectAll("g.contourlabels").data(f?[0]:[]);if(p.exit().remove(),p.enter().append("g").classed("contourlabels",!0),f){var _=a.xaxis,T=a.yaxis,g=_._length,A=T._length,b=[[[0,0],[g,0],[g,A],[0,A]]],w=[];Cy.clearLocationCache();var k=ab.labelFormatter(r,i),x=H5.tester.append("text").attr("data-notex",1).call(H5.font,n.labelfont),E={left:0,right:g,center:g/2,top:0,bottom:A,middle:A/2},M=Math.sqrt(g*g+A*A),d=GF.LABELDISTANCE*M/Math.max(1,t.length/GF.LABELINCREASE);h.each(function(C){var S=ab.calcTextOpts(C.level,k,x,r);YF.select(this).selectAll("path").each(function(P){var D=this,z=Cy.getVisibleSegment(D,E,S.height/2);if(z&&(aZt(D,P,C,z,o,S.height),!(z.len<(S.width+S.height)*GF.LABELMIN)))for(var O=Math.min(Math.ceil(z.len/d),GF.LABELMAX),V=0;V<O;V++){var B=ab.findBestTextLocation(D,z,S,w,E);if(!B)break;ab.addLabelData(B,S,w,b)}})}),x.remove(),ab.drawLabels(p,w,r,v,c?b:null)}f&&!u&&h.remove()}function aZt(e,t,r,i,n,a){for(var o,s=0;s<r.pedgepaths.length;s++)t===r.pedgepaths[s]&&(o=r.edgepaths[s]);if(!o)return;var l=n.a[0],u=n.a[n.a.length-1],f=n.b[0],c=n.b[n.b.length-1];function h(g,A){var b=0,w,k=.1;return(Math.abs(g[0]-l)<k||Math.abs(g[0]-u)<k)&&(w=PYe(n.dxydb_rough(g[0],g[1],k)),b=Math.max(b,a*RYe(A,w)/2)),(Math.abs(g[1]-f)<k||Math.abs(g[1]-c)<k)&&(w=PYe(n.dxyda_rough(g[0],g[1],k)),b=Math.max(b,a*RYe(A,w)/2)),b}var v=LYe(e,0,1),p=LYe(e,i.total,i.total-1),_=h(o[0],v),T=i.total-h(o[o.length-1],p);i.min<_&&(i.min=_),i.max>T&&(i.max=T),i.len=i.max-i.min}function LYe(e,t,r){var i=e.getPointAtLength(t),n=e.getPointAtLength(r),a=n.x-i.x,o=n.y-i.y,s=Math.sqrt(a*a+o*o);return[a/s,o/s]}function PYe(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function RYe(e,t){var r=Math.abs(e[0]*t[0]+e[1]*t[1]),i=Math.sqrt(1-r*r);return i/r}function oZt(e,t,r,i,n,a){var o,s,l,u,f=Cy.ensureSingle(e,"g","contourbg"),c=f.selectAll("path").data(a==="fill"&&!n?[0]:[]);c.enter().append("path"),c.exit().remove();var h=[];for(u=0;u<t.length;u++)o=t[u],s=WF([],o.x,r.c2p),l=WF([],o.y,i.c2p),h.push(DYe(s,l,o.bicubic));c.attr("d","M"+h.join("L")+"Z").style("stroke","none")}function sZt(e,t,r,i,n,a,o,s,l,u,f){var c=u==="fill";c&&tZt(n,e.contours);var h=Cy.ensureSingle(t,"g","contourfill"),v=h.selectAll("path").data(c?n:[]);v.enter().append("path"),v.exit().remove(),v.each(function(p){var _=(p.prefixBoundary?f:"")+lZt(e,p,a,o,s,l,r,i);_?YF.select(this).attr("d",_).style("stroke","none"):YF.select(this).remove()})}function lZt(e,t,r,i,n,a,o,s){var l,u="",f=t.edgepaths.map(function(S,P){return P}),c=!0,h,v,p,_,T,g,A=Math.abs(r[0][0]-r[2][0])*1e-4,b=Math.abs(r[0][1]-r[2][1])*1e-4;function w(S){return Math.abs(S[1]-r[0][1])<b}function k(S){return Math.abs(S[1]-r[2][1])<b}function x(S){return Math.abs(S[0]-r[0][0])<A}function E(S){return Math.abs(S[0]-r[2][0])<A}function M(S,P){var D,z,O,V,B="";for(w(S)&&!E(S)||k(S)&&!x(S)?(V=n.aaxis,O=CYe(n,a,[S[0],P[0]],.5*(S[1]+P[1]))):(V=n.baxis,O=CYe(n,a,.5*(S[0]+P[0]),[S[1],P[1]])),D=1;D<O.length;D++)for(B+=V.smoothing?"C":"L",z=0;z<O[D].length;z++){var F=O[D][z];B+=[o.c2p(F[0]),s.c2p(F[1])]+" "}return B}for(l=0,h=null;f.length;){var d=t.edgepaths[l][0];for(h&&(u+=M(h,d)),g=H5.smoothopen(t.edgepaths[l].map(i),t.smoothing),u+=c?g:g.replace(/^M/,"L"),f.splice(f.indexOf(l),1),h=t.edgepaths[l][t.edgepaths[l].length-1],_=-1,p=0;p<4;p++){if(!h){Cy.log("Missing end?",l,t);break}for(w(h)&&!E(h)?v=r[1]:x(h)?v=r[0]:k(h)?v=r[3]:E(h)&&(v=r[2]),T=0;T<t.edgepaths.length;T++){var C=t.edgepaths[T][0];Math.abs(h[0]-v[0])<A?Math.abs(h[0]-C[0])<A&&(C[1]-h[1])*(v[1]-C[1])>=0&&(v=C,_=T):Math.abs(h[1]-v[1])<b?Math.abs(h[1]-C[1])<b&&(C[0]-h[0])*(v[0]-C[0])>=0&&(v=C,_=T):Cy.log("endpt to newendpt is not vert. or horz.",h,v,C)}if(_>=0)break;u+=M(h,v),h=v}if(_===t.edgepaths.length){Cy.log("unclosed perimeter path");break}l=_,c=f.indexOf(l)===-1,c&&(l=f[0],u+=M(h,v)+"Z",h=null)}for(l=0;l<t.paths.length;l++)u+=H5.smoothclosed(t.paths[l].map(i),t.smoothing);return u}});var zYe=ne((S1r,qYe)=>{"use strict";qYe.exports={attributes:Ej(),supplyDefaults:kj(),colorbar:qP(),calc:SYe(),plot:FYe(),style:FP(),moduleType:"trace",name:"contourcarpet",basePlotModule:vu(),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}});var BYe=ne((E1r,OYe)=>{"use strict";OYe.exports=zYe()});var jF=ne((k1r,GYe)=>{"use strict";var XF=Wt().extendFlat,ZF=cu(),NYe=kl().axisHoverFormat,VYe=hc().dash,uZt=Kb(),HYe=Rw(),fZt=HYe.INCREASING.COLOR,cZt=HYe.DECREASING.COLOR,Cj=ZF.line;function UYe(e){return{line:{color:XF({},Cj.color,{dflt:e}),width:Cj.width,dash:VYe,editType:"style"},editType:"style"}}GYe.exports={xperiod:ZF.xperiod,xperiod0:ZF.xperiod0,xperiodalignment:ZF.xperiodalignment,xhoverformat:NYe("x"),yhoverformat:NYe("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:XF({},Cj.width,{}),dash:XF({},VYe,{}),editType:"style"},increasing:UYe(fZt),decreasing:UYe(cZt),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:XF({},uZt.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}});var Lj=ne((C1r,YYe)=>{"use strict";var hZt=wi(),vZt=Wt();YYe.exports=function(t,r,i,n){var a=i("x"),o=i("open"),s=i("high"),l=i("low"),u=i("close");i("hoverlabel.split");var f=hZt.getComponentMethod("calendars","handleTraceDefaults");if(f(t,r,["x"],n),!!(o&&s&&l&&u)){var c=Math.min(o.length,s.length,l.length,u.length);return a&&(c=Math.min(c,vZt.minRowLength(a))),r._length=c,c}}});var ZYe=ne((L1r,XYe)=>{"use strict";var dZt=Wt(),pZt=Lj(),gZt=o0(),yZt=jF();XYe.exports=function(t,r,i,n){function a(s,l){return dZt.coerce(t,r,yZt,s,l)}var o=pZt(t,r,a,n);if(!o){r.visible=!1;return}gZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),WYe(t,r,a,"increasing"),WYe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),n._requestRangeslider[r.xaxis]=!0};function WYe(e,t,r,i){r(i+".line.color"),r(i+".line.width",t.line.width),r(i+".line.dash",t.line.dash)}});var Pj=ne((P1r,KYe)=>{"use strict";var ST=Wt(),KF=ST._,JF=Xi(),mZt=u0(),G5=$a().BADNUM;function xZt(e,t){var r=JF.getFromId(e,t.xaxis),i=JF.getFromId(e,t.yaxis),n=bZt(e,r,t),a=t._minDiff;t._minDiff=null;var o=t._origX;t._origX=null;var s=t._xcalc;t._xcalc=null;var l=jYe(e,t,o,s,i,_Zt);return t._extremes[r._id]=JF.findExtremes(r,s,{vpad:a/2}),l.length?(ST.extendFlat(l[0].t,{wHover:a/2,tickLen:n}),l):[{t:{empty:!0}}]}function _Zt(e,t,r,i){return{o:e,h:t,l:r,c:i}}function jYe(e,t,r,i,n,a){for(var o=n.makeCalcdata(t,"open"),s=n.makeCalcdata(t,"high"),l=n.makeCalcdata(t,"low"),u=n.makeCalcdata(t,"close"),f=ST.isArrayOrTypedArray(t.text),c=ST.isArrayOrTypedArray(t.hovertext),h=!0,v=null,p=!!t.xperiodalignment,_=[],T=0;T<i.length;T++){var g=i[T],A=o[T],b=s[T],w=l[T],k=u[T];if(g!==G5&&A!==G5&&b!==G5&&w!==G5&&k!==G5){k===A?v!==null&&k!==v&&(h=k>v):h=k>A,v=k;var x=a(A,b,w,k);x.pos=g,x.yc=(A+k)/2,x.i=T,x.dir=h?"increasing":"decreasing",x.x=x.pos,x.y=[w,b],p&&(x.orig_p=r[T]),f&&(x.tx=t.text[T]),c&&(x.htx=t.hovertext[T]),_.push(x)}else _.push({pos:g,empty:!0})}return t._extremes[n._id]=JF.findExtremes(n,ST.concat(l,s),{padded:!0}),_.length&&(_[0].t={labels:{open:KF(e,"open:")+" ",high:KF(e,"high:")+" ",low:KF(e,"low:")+" ",close:KF(e,"close:")+" "}}),_}function bZt(e,t,r){var i=r._minDiff;if(!i){var n=e._fullData,a=[];i=1/0;var o;for(o=0;o<n.length;o++){var s=n[o];if(s.type==="ohlc"&&s.visible===!0&&s.xaxis===t._id){a.push(s);var l=t.makeCalcdata(s,"x");s._origX=l;var u=mZt(r,t,"x",l).vals;s._xcalc=u;var f=ST.distinctVals(u).minDiff;f&&isFinite(f)&&(i=Math.min(i,f))}}for(i===1/0&&(i=1),o=0;o<a.length;o++)a[o]._minDiff=i}return i*r.tickwidth}KYe.exports={calc:xZt,calcCommon:jYe}});var $Ye=ne((R1r,QYe)=>{"use strict";var wZt=Ai(),JYe=Wt();QYe.exports=function(t,r,i,n){var a=r.yaxis,o=r.xaxis,s=!!o.rangebreaks;JYe.makeTraceGroups(n,i,"trace ohlc").each(function(l){var u=wZt.select(this),f=l[0],c=f.t,h=f.trace;if(h.visible!==!0||c.empty){u.remove();return}var v=c.tickLen,p=u.selectAll("path").data(JYe.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(_){if(_.empty)return"M0,0Z";var T=o.c2p(_.pos-v,!0),g=o.c2p(_.pos+v,!0),A=s?(T+g)/2:o.c2p(_.pos,!0),b=a.c2p(_.o,!0),w=a.c2p(_.h,!0),k=a.c2p(_.l,!0),x=a.c2p(_.c,!0);return"M"+T+","+b+"H"+A+"M"+A+","+w+"V"+k+"M"+g+","+x+"H"+A})})}});var tWe=ne((D1r,eWe)=>{"use strict";var Rj=Ai(),TZt=aa(),AZt=_i();eWe.exports=function(t,r,i){var n=i||Rj.select(t).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var o=a[0].trace;Rj.select(this).selectAll("path").each(function(s){if(!s.empty){var l=o[s.dir].line;Rj.select(this).style("fill","none").call(AZt.stroke,l.color).call(TZt.dashLine,l.dash,l.width).style("opacity",o.selectedpoints&&!s.selected?.3:1)}})})}});var Ij=ne((I1r,oWe)=>{"use strict";var Dj=Xi(),MZt=Wt(),QF=Ol(),SZt=_i(),EZt=Wt().fillText,rWe=Rw(),kZt={increasing:rWe.INCREASING.SYMBOL,decreasing:rWe.DECREASING.SYMBOL};function CZt(e,t,r,i){var n=e.cd,a=n[0].trace;return a.hoverlabel.split?iWe(e,t,r,i):aWe(e,t,r,i)}function nWe(e,t,r,i){var n=e.cd,a=e.xa,o=n[0].trace,s=n[0].t,l=o.type,u=l==="ohlc"?"l":"min",f=l==="ohlc"?"h":"max",c,h,v=s.bPos||0,p=function(C){return C.pos+v-t},_=s.bdPos||s.tickLen,T=s.wHover,g=Math.min(1,_/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));c=e.maxHoverDistance-g,h=e.maxSpikeDistance-g;function A(C){var S=p(C);return QF.inbox(S-T,S+T,c)}function b(C){var S=C[u],P=C[f];return S===P||QF.inbox(S-r,P-r,c)}function w(C){return(A(C)+b(C))/2}var k=QF.getDistanceFunction(i,A,b,w);if(QF.getClosest(n,k,e),e.index===!1)return null;var x=n[e.index];if(x.empty)return null;var E=x.dir,M=o[E],d=M.line.color;return SZt.opacity(d)&&M.line.width?e.color=d:e.color=M.fillcolor,e.x0=a.c2p(x.pos+v-_,!0),e.x1=a.c2p(x.pos+v+_,!0),e.xLabelVal=x.orig_p!==void 0?x.orig_p:x.pos,e.spikeDistance=w(x)*h/c,e.xSpike=a.c2p(x.pos,!0),e}function iWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=[],u=nWe(e,t,r,i);if(!u)return[];var f=u.index,c=n[f],h=c.hi||o.hoverinfo,v=h.split("+"),p=h==="all",_=p||v.indexOf("y")!==-1;if(!_)return[];for(var T=["high","open","close","low"],g={},A=0;A<T.length;A++){var b=T[A],w=o[b][u.index],k=a.c2p(w,!0),x;w in g?(x=g[w],x.yLabel+="<br>"+s.labels[b]+Dj.hoverLabelText(a,w,o.yhoverformat)):(x=MZt.extendFlat({},u),x.y0=x.y1=k,x.yLabelVal=w,x.yLabel=s.labels[b]+Dj.hoverLabelText(a,w,o.yhoverformat),x.name="",l.push(x),g[w]=x)}return l}function aWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=nWe(e,t,r,i);if(!l)return[];var u=l.index,f=n[u],c=l.index=f.i,h=f.dir;function v(w){return s.labels[w]+Dj.hoverLabelText(a,o[w][c],o.yhoverformat)}var p=f.hi||o.hoverinfo,_=p.split("+"),T=p==="all",g=T||_.indexOf("y")!==-1,A=T||_.indexOf("text")!==-1,b=g?[v("open"),v("high"),v("low"),v("close")+"  "+kZt[h]]:[];return A&&EZt(f,o,b),l.extraText=b.join("<br>"),l.y0=l.y1=a.c2p(f.yc,!0),[l]}oWe.exports={hoverPoints:CZt,hoverSplit:iWe,hoverOnPoints:aWe}});var Fj=ne((F1r,sWe)=>{"use strict";sWe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l=i[0].t.bPos||0;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++){var u=i[s];r.contains([n.c2p(u.pos+l),a.c2p(u.yc)],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.pos),y:a.c2d(u.yc)}),u.selected=1):u.selected=0}return o}});var uWe=ne((q1r,lWe)=>{"use strict";lWe.exports={moduleType:"trace",name:"ohlc",basePlotModule:vu(),categories:["cartesian","svg","showLegend"],meta:{},attributes:jF(),supplyDefaults:ZYe(),calc:Pj().calc,plot:$Ye(),style:tWe(),hoverPoints:Ij().hoverPoints,selectPoints:Fj()}});var cWe=ne((z1r,fWe)=>{"use strict";fWe.exports=uWe()});var zj=ne((O1r,dWe)=>{"use strict";var qj=Wt().extendFlat,hWe=kl().axisHoverFormat,Bd=jF(),Y5=jM();function vWe(e){return{line:{color:qj({},Y5.line.color,{dflt:e}),width:Y5.line.width,editType:"style"},fillcolor:Y5.fillcolor,editType:"style"}}dWe.exports={xperiod:Bd.xperiod,xperiod0:Bd.xperiod0,xperiodalignment:Bd.xperiodalignment,xhoverformat:hWe("x"),yhoverformat:hWe("y"),x:Bd.x,open:Bd.open,high:Bd.high,low:Bd.low,close:Bd.close,line:{width:qj({},Y5.line.width,{}),editType:"style"},increasing:vWe(Bd.increasing.line.color.dflt),decreasing:vWe(Bd.decreasing.line.color.dflt),text:Bd.text,hovertext:Bd.hovertext,whiskerwidth:qj({},Y5.whiskerwidth,{dflt:0}),hoverlabel:Bd.hoverlabel}});var yWe=ne((B1r,gWe)=>{"use strict";var LZt=Wt(),PZt=_i(),RZt=Lj(),DZt=o0(),IZt=zj();gWe.exports=function(t,r,i,n){function a(s,l){return LZt.coerce(t,r,IZt,s,l)}var o=RZt(t,r,a,n);if(!o){r.visible=!1;return}DZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),pWe(t,r,a,"increasing"),pWe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("whiskerwidth"),n._requestRangeslider[r.xaxis]=!0};function pWe(e,t,r,i){var n=r(i+".line.color");r(i+".line.width",t.line.width),r(i+".fillcolor",PZt.addOpacity(n,.5))}});var bWe=ne((N1r,_We)=>{"use strict";var mWe=Wt(),xWe=Xi(),FZt=u0(),qZt=Pj().calcCommon;_We.exports=function(e,t){var r=e._fullLayout,i=xWe.getFromId(e,t.xaxis),n=xWe.getFromId(e,t.yaxis),a=i.makeCalcdata(t,"x"),o=FZt(t,i,"x",a).vals,s=qZt(e,t,a,o,n,zZt);return s.length?(mWe.extendFlat(s[0].t,{num:r._numBoxes,dPos:mWe.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,s):[{t:{empty:!0}}]};function zZt(e,t,r,i){return{min:r,q1:Math.min(e,i),med:i,q3:Math.max(e,i),max:t}}});var TWe=ne((U1r,wWe)=>{"use strict";wWe.exports={moduleType:"trace",name:"candlestick",basePlotModule:vu(),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:zj(),layoutAttributes:KM(),supplyLayoutDefaults:nP().supplyLayoutDefaults,crossTraceCalc:aP().crossTraceCalc,supplyDefaults:yWe(),calc:bWe(),plot:oP().plot,layerName:"boxlayer",style:sP().style,hoverPoints:Ij().hoverPoints,selectPoints:Fj()}});var MWe=ne((V1r,AWe)=>{"use strict";AWe.exports=TWe()});var Bj=ne((H1r,SWe)=>{"use strict";var e8=Wt(),OZt=B0(),$F=e8.deg2rad,Oj=e8.rad2deg;SWe.exports=function(t,r,i){switch(OZt(t,i),t._id){case"x":case"radialaxis":BZt(t,r);break;case"angularaxis":VZt(t,r);break}};function BZt(e,t){var r=t._subplot;e.setGeometry=function(){var i=e._rl[0],n=e._rl[1],a=r.innerRadius,o=(r.radius-a)/(n-i),s=a/o,l=i>n?function(u){return u<=0}:function(u){return u>=0};e.c2g=function(u){var f=e.c2l(u)-i;return(l(f)?f:0)+s},e.g2c=function(u){return e.l2c(u+i-s)},e.g2p=function(u){return u*o},e.c2p=function(u){return e.g2p(e.c2g(u))}}}function NZt(e,t){return t==="degrees"?$F(e):e}function UZt(e,t){return t==="degrees"?Oj(e):e}function VZt(e,t){var r=e.type;if(r==="linear"){var i=e.d2c,n=e.c2d;e.d2c=function(a,o){return NZt(i(a),o)},e.c2d=function(a,o){return n(UZt(a,o))}}e.makeCalcdata=function(a,o){var s=a[o],l=a._length,u,f,c=function(T){return e.d2c(T,a.thetaunit)};if(s)for(u=new Array(l),f=0;f<l;f++)u[f]=c(s[f]);else{var h=o+"0",v="d"+o,p=h in a?c(a[h]):0,_=a[v]?c(a[v]):(e.period||2*Math.PI)/l;for(u=new Array(l),f=0;f<l;f++)u[f]=p+f*_}return u},e.setGeometry=function(){var a=t.sector,o=a.map($F),s={clockwise:-1,counterclockwise:1}[e.direction],l=$F(e.rotation),u=function(g){return s*g+l},f=function(g){return(g-l)/s},c,h,v,p;switch(r){case"linear":h=c=e8.identity,p=$F,v=Oj,e.range=e8.isFullCircle(o)?[a[0],a[0]+360]:o.map(f).map(Oj);break;case"category":var _=e._categories.length,T=e.period?Math.max(e.period,_):_;T===0&&(T=1),h=p=function(g){return g*2*Math.PI/T},c=v=function(g){return g*T/Math.PI/2},e.range=[0,T];break}e.c2g=function(g){return u(h(g))},e.g2c=function(g){return c(f(g))},e.t2g=function(g){return u(p(g))},e.g2t=function(g){return v(f(g))}}}});var t8=ne((G1r,EWe)=>{"use strict";EWe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}});var n8=ne((Y1r,RWe)=>{"use strict";var ob=Wt(),kWe=eM().tester,Nj=ob.findIndexOfMin,LWe=ob.isAngleInsideSector,HZt=ob.angleDelta,CWe=ob.angleDist;function GZt(e,t,r,i,n){if(!LWe(t,i))return!1;var a,o;r[0]<r[1]?(a=r[0],o=r[1]):(a=r[1],o=r[0]);var s=kWe(ET(a,i[0],i[1],n)),l=kWe(ET(o,i[0],i[1],n)),u=[e*Math.cos(t),e*Math.sin(t)];return l.contains(u)&&!s.contains(u)}function PWe(e,t,r,i){var n,a,o=i[0],s=i[1],l=r8(Math.sin(t)-Math.sin(e)),u=r8(Math.cos(t)-Math.cos(e)),f=Math.tan(r),c=r8(1/f),h=l/u,v=s-h*o;return c?l&&u?(n=v/(f-h),a=f*n):u?(n=s*c,a=s):(n=o,a=o*f):l&&u?(n=0,a=v):u?(n=0,a=s):n=a=NaN,[n,a]}function YZt(e,t,r,i){var n=-t*r,a=t*t+1,o=2*(t*n-r),s=n*n+r*r-e*e,l=Math.sqrt(o*o-4*a*s),u=(-o+l)/(2*a),f=(-o-l)/(2*a);return[[u,t*u+n+i],[f,t*f+n+i]]}function WZt(e,t){var r=t.length,i=new Array(r+1),n;for(n=0;n<r;n++){var a=t[n];i[n]=[e*Math.cos(a),e*Math.sin(a)]}return i[n]=i[0].slice(),i}function XZt(e,t,r,i){var n=i.length,a=[],o,s;function l(g){return[e*Math.cos(g),e*Math.sin(g)]}function u(g,A,b){return PWe(g,A,b,l(g))}function f(g){return ob.mod(g,n)}function c(g){return LWe(g,[t,r])}var h=Nj(i,function(g){return c(g)?CWe(g,t):1/0}),v=u(i[h],i[f(h-1)],t);for(a.push(v),o=h,s=0;s<n;o++,s++){var p=i[f(o)];if(!c(p))break;a.push(l(p))}var _=Nj(i,function(g){return c(g)?CWe(g,r):1/0}),T=u(i[_],i[f(_+1)],r);return a.push(T),a.push([0,0]),a.push(a[0].slice()),a}function ET(e,t,r,i){return ob.isFullCircle([t,r])?WZt(e,i):XZt(e,t,r,i)}function ZZt(e,t,r,i){for(var n=1/0,a=1/0,o=ET(e,t,r,i),s=0;s<o.length;s++){var l=o[s];n=Math.min(n,l[0]),a=Math.min(a,-l[1])}return[n,a]}function jZt(e,t){var r=function(a){var o=HZt(a,e);return o>0?o:1/0},i=Nj(t,r),n=ob.mod(i+1,t.length);return[t[i],t[n]]}function r8(e){return Math.abs(e)>1e-10?e:0}function Uj(e,t,r){t=t||0,r=r||0;for(var i=e.length,n=new Array(i),a=0;a<i;a++){var o=e[a];n[a]=[t+o[0],r-o[1]]}return n}function KZt(e,t,r,i,n,a){var o=ET(e,t,r,i);return"M"+Uj(o,n,a).join("L")}function JZt(e,t,r,i,n,a,o){var s,l;e<t?(s=e,l=t):(s=t,l=e);var u=Uj(ET(s,r,i,n),a,o),f=Uj(ET(l,r,i,n),a,o);return"M"+f.reverse().join("L")+"M"+u.join("L")}RWe.exports={isPtInsidePolygon:GZt,findPolygonOffset:ZZt,findEnclosingVertexAngles:jZt,findIntersectionXY:PWe,findXYatLength:YZt,clampTiny:r8,pathPolygon:KZt,pathPolygonAnnulus:JZt}});var Vj=ne((W1r,FWe)=>{"use strict";function DWe(e){return e<0?-1:e>0?1:0}function kT(e){var t=e[0],r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var i=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/i,2*r/i]}function CT(e,t){var r=t[0],i=t[1];return[r*e.radius+e.cx,-i*e.radius+e.cy]}function IWe(e,t){return t*e.radius}function QZt(e,t,r,i){var n=CT(e,kT([r,t])),a=n[0],o=n[1],s=CT(e,kT([i,t])),l=s[0],u=s[1];if(t===0)return["M"+a+","+o,"L"+l+","+u].join(" ");var f=IWe(e,1/Math.abs(t));return["M"+a+","+o,"A"+f+","+f+" 0 0,"+(t<0?1:0)+" "+l+","+u].join(" ")}function $Zt(e,t,r,i){var n=IWe(e,1/(t+1)),a=CT(e,kT([t,r])),o=a[0],s=a[1],l=CT(e,kT([t,i])),u=l[0],f=l[1];if(DWe(r)!==DWe(i)){var c=CT(e,kT([t,0])),h=c[0],v=c[1];return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+h+","+v,"A"+n+","+n+" 0 0,"+(i<0?0:1)+u+","+f].join(" ")}return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(i<r?0:1)+" "+u+","+f].join(" ")}FWe.exports={smith:kT,reactanceArc:QZt,resistanceArc:$Zt,smithTransform:CT}});var Yj=ne((X1r,GWe)=>{"use strict";var sb=Ai(),ejt=Xf(),ub=wi(),hl=Wt(),Tg=hl.strRotate,ic=hl.strTranslate,Hj=_i(),W5=aa(),tjt=Zs(),Pv=Xi(),rjt=B0(),njt=Bj(),ijt=Cd().doAutoRange,Ly=D7(),o8=Hh(),qWe=Ol(),ajt=yx(),ojt=Mf().prepSelect,sjt=Mf().selectOnClick,Gj=Mf().clearOutline,zWe=e0(),OWe=UA(),BWe=ZA().redrawReglTraces,ljt=Tf().MID_SHIFT,D1=t8(),Py=n8(),s8=Vj(),i8=s8.smith,ujt=s8.reactanceArc,fjt=s8.resistanceArc,a8=s8.smithTransform,cjt=hl._,NWe=hl.mod,I1=hl.deg2rad,lb=hl.rad2deg;function UWe(e,t,r){this.isSmith=r||!1,this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var i=e._fullLayout,n="clip"+i._uid+t;this.clipIds.forTraces=n+"-for-traces",this.clipPaths.forTraces=i._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=i["_"+(r?"smith":"polar")+"layer"].append("g").attr("class",t),this.getHole=function(a){return this.isSmith?0:a.hole},this.getSector=function(a){return this.isSmith?[0,360]:a.sector},this.getRadial=function(a){return this.isSmith?a.realaxis:a.radialaxis},this.getAngular=function(a){return this.isSmith?a.imaginaryaxis:a.angularaxis},r||(this.radialTickLayout=null,this.angularTickLayout=null)}var wc=UWe.prototype;GWe.exports=function(t,r,i){return new UWe(t,r,i)};wc.plot=function(e,t){for(var r=this,i=t[r.id],n=!1,a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){n=!0;break}}r._hasClipOnAxisFalse=n,r.updateLayers(t,i),r.updateLayout(t,i),tjt.generalUpdatePerTraceModule(r.gd,r,e,i),r.updateFx(t,i),r.isSmith&&(delete i.realaxis.range,delete i.imaginaryaxis.range)};wc.updateLayers=function(e,t){var r=this,i=r.isSmith,n=r.layers,a=r.getRadial(t),o=r.getAngular(t),s=D1.layerNames,l=s.indexOf("frontplot"),u=s.slice(0,l),f=o.layer==="below traces",c=a.layer==="below traces";f&&u.push("angular-line"),c&&u.push("radial-line"),f&&u.push("angular-axis"),c&&u.push("radial-axis"),u.push("frontplot"),f||u.push("angular-line"),c||u.push("radial-line"),f||u.push("angular-axis"),c||u.push("radial-axis");var h=(i?"smith":"polar")+"sublayer",v=r.framework.selectAll("."+h).data(u,String);v.enter().append("g").attr("class",function(p){return h+" "+p}).each(function(p){var _=n[p]=sb.select(this);switch(p){case"frontplot":i||_.append("g").classed("barlayer",!0),_.append("g").classed("scatterlayer",!0);break;case"backplot":_.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=_.append("path");break;case"radial-grid":_.style("fill","none");break;case"angular-grid":_.style("fill","none");break;case"radial-line":_.append("line").style("fill","none");break;case"angular-line":_.append("path").style("fill","none");break}}),v.order()};wc.updateLayout=function(e,t){var r=this,i=r.layers,n=e._size,a=r.getRadial(t),o=r.getAngular(t),s=t.domain.x,l=t.domain.y;r.xOffset=n.l+n.w*s[0],r.yOffset=n.t+n.h*(1-l[1]);var u=r.xLength=n.w*(s[1]-s[0]),f=r.yLength=n.h*(l[1]-l[0]),c=r.getSector(t);r.sectorInRad=c.map(I1);var h=r.sectorBBox=hjt(c),v=h[2]-h[0],p=h[3]-h[1],_=f/u,T=Math.abs(p/v),g,A,b,w,k;_>T?(g=u,A=u*T,k=(f-A)/n.h/2,b=[s[0],s[1]],w=[l[0]+k,l[1]-k]):(g=f/T,A=f,k=(u-g)/n.w/2,b=[s[0]+k,s[1]-k],w=[l[0],l[1]]),r.xLength2=g,r.yLength2=A,r.xDomain2=b,r.yDomain2=w;var x=r.xOffset2=n.l+n.w*b[0],E=r.yOffset2=n.t+n.h*(1-w[1]),M=r.radius=g/v,d=r.innerRadius=r.getHole(t)*M,C=r.cx=x-M*h[0],S=r.cy=E+M*h[3],P=r.cxx=C-x,D=r.cyy=S-E,z=a.side,O;z==="counterclockwise"?(O=z,z="top"):z==="clockwise"&&(O=z,z="bottom"),r.radialAxis=r.mockAxis(e,t,a,{_id:"x",side:z,_trueSide:O,domain:[d/n.w,M/n.w]}),r.angularAxis=r.mockAxis(e,t,o,{side:"right",domain:[0,Math.PI],autorange:!1}),r.doAutoRange(e,t),r.updateAngularAxis(e,t),r.updateRadialAxis(e,t),r.updateRadialAxisTitle(e,t),r.xaxis=r.mockCartesianAxis(e,t,{_id:"x",domain:b}),r.yaxis=r.mockCartesianAxis(e,t,{_id:"y",domain:w});var V=r.pathSubplot();r.clipPaths.forTraces.select("path").attr("d",V).attr("transform",ic(P,D)),i.frontplot.attr("transform",ic(x,E)).call(W5.setClipUrl,r._hasClipOnAxisFalse?null:r.clipIds.forTraces,r.gd),i.bg.attr("d",V).attr("transform",ic(C,S)).call(Hj.fill,t.bgcolor)};wc.mockAxis=function(e,t,r,i){var n=hl.extendFlat({},r,i);return njt(n,t,e),n};wc.mockCartesianAxis=function(e,t,r){var i=this,n=i.isSmith,a=r._id,o=hl.extendFlat({type:"linear"},r);rjt(o,e);var s={x:[0,2],y:[1,3]};return o.setRange=function(){var l=i.sectorBBox,u=s[a],f=i.radialAxis._rl,c=(f[1]-f[0])/(1-i.getHole(t));o.range=[l[u[0]]*c,l[u[1]]*c]},o.isPtWithinRange=a==="x"&&!n?function(l){return i.isPtInside(l)}:function(){return!0},o.setRange(),o.setScale(),o};wc.doAutoRange=function(e,t){var r=this,i=r.gd,n=r.radialAxis,a=r.getRadial(t);ijt(i,n);var o=n.range;if(a.range=o.slice(),a._input.range=o.slice(),n._rl=[n.r2l(o[0],null,"gregorian"),n.r2l(o[1],null,"gregorian")],n.minallowed!==void 0){var s=n.r2l(n.minallowed);n._rl[0]>n._rl[1]?n._rl[1]=Math.max(n._rl[1],s):n._rl[0]=Math.max(n._rl[0],s)}if(n.maxallowed!==void 0){var l=n.r2l(n.maxallowed);n._rl[0]<n._rl[1]?n._rl[1]=Math.min(n._rl[1],l):n._rl[0]=Math.min(n._rl[0],l)}};wc.updateRadialAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getRadial(t),f=NWe(r.getSector(t)[0],360),c=r.radialAxis,h=o<a,v=r.isSmith;v||(r.fillViewInitialKey("radialaxis.angle",u.angle),r.fillViewInitialKey("radialaxis.range",c.range.slice()),c.setGeometry()),c.tickangle==="auto"&&f>90&&f<=270&&(c.tickangle=180);var p=v?function(M){var d=a8(r,i8([M.x,0]));return ic(d[0]-s,d[1]-l)}:function(M){return ic(c.l2p(M.x)+o,0)},_=v?function(M){return fjt(r,M.x,-1/0,1/0)}:function(M){return r.pathArc(c.r2p(M.x)+o)},T=VWe(u);if(r.radialTickLayout!==T&&(n["radial-axis"].selectAll(".xtick").remove(),r.radialTickLayout=T),h){c.setScale();var g=0,A=v?(c.tickvals||[]).filter(function(M){return M>=0}).map(function(M){return Pv.tickText(c,M,!0,!1)}):Pv.calcTicks(c),b=v?A:Pv.clipEnds(c,A),w=Pv.getTickSigns(c)[2];v&&((c.ticks==="top"&&c.side==="bottom"||c.ticks==="bottom"&&c.side==="top")&&(w=-w),c.ticks==="top"&&c.side==="top"&&(g=-c.ticklen),c.ticks==="bottom"&&c.side==="bottom"&&(g=c.ticklen)),Pv.drawTicks(i,c,{vals:A,layer:n["radial-axis"],path:Pv.makeTickPath(c,0,w),transFn:p,crisp:!1}),Pv.drawGrid(i,c,{vals:b,layer:n["radial-grid"],path:_,transFn:hl.noop,crisp:!1}),Pv.drawLabels(i,c,{vals:A,layer:n["radial-axis"],transFn:p,labelFns:Pv.makeLabelFns(c,g)})}var k=r.radialAxisAngle=r.vangles?lb(HWe(I1(u.angle),r.vangles)):u.angle,x=ic(s,l),E=x+Tg(-k);X5(n["radial-axis"],h&&(u.showticklabels||u.ticks),{transform:E}),X5(n["radial-grid"],h&&u.showgrid,{transform:v?"":x}),X5(n["radial-line"].select("line"),h&&u.showline,{x1:v?-a:o,y1:0,x2:a,y2:0,transform:E}).attr("stroke-width",u.linewidth).call(Hj.stroke,u.linecolor)};wc.updateRadialAxisTitle=function(e,t,r){if(!this.isSmith){var i=this,n=i.gd,a=i.radius,o=i.cx,s=i.cy,l=i.getRadial(t),u=i.id+"title",f=0;if(l.title){var c=W5.bBox(i.layers["radial-axis"].node()).height,h=l.title.font.size,v=l.side;f=v==="top"?h:v==="counterclockwise"?-(c+h*.4):c+h*.8}var p=r!==void 0?r:i.radialAxisAngle,_=I1(p),T=Math.cos(_),g=Math.sin(_),A=o+a/2*T+f*g,b=s-a/2*g+f*T;i.layers["radial-axis-title"]=ajt.draw(n,u,{propContainer:l,propName:i.id+".radialaxis.title",placeholder:cjt(n,"Click to enter radial axis title"),attributes:{x:A,y:b,"text-anchor":"middle"},transform:{rotate:-p}})}};wc.updateAngularAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getAngular(t),f=r.angularAxis,c=r.isSmith;c||(r.fillViewInitialKey("angularaxis.rotation",u.rotation),f.setGeometry(),f.setScale());var h=c?function(d){var C=a8(r,i8([0,d.x]));return Math.atan2(C[0]-s,C[1]-l)-Math.PI/2}:function(d){return f.t2g(d.x)};f.type==="linear"&&f.thetaunit==="radians"&&(f.tick0=lb(f.tick0),f.dtick=lb(f.dtick));var v=function(d){return ic(s+a*Math.cos(d),l-a*Math.sin(d))},p=c?function(d){var C=a8(r,i8([0,d.x]));return ic(C[0],C[1])}:function(d){return v(h(d))},_=c?function(d){var C=a8(r,i8([0,d.x])),S=Math.atan2(C[0]-s,C[1]-l)-Math.PI/2;return ic(C[0],C[1])+Tg(-lb(S))}:function(d){var C=h(d);return v(C)+Tg(-lb(C))},T=c?function(d){return ujt(r,d.x,0,1/0)}:function(d){var C=h(d),S=Math.cos(C),P=Math.sin(C);return"M"+[s+o*S,l-o*P]+"L"+[s+a*S,l-a*P]},g=Pv.makeLabelFns(f,0),A=g.labelStandoff,b={};b.xFn=function(d){var C=h(d);return Math.cos(C)*A},b.yFn=function(d){var C=h(d),S=Math.sin(C)>0?.2:1;return-Math.sin(C)*(A+d.fontSize*S)+Math.abs(Math.cos(C))*(d.fontSize*ljt)},b.anchorFn=function(d){var C=h(d),S=Math.cos(C);return Math.abs(S)<.1?"middle":S>0?"start":"end"},b.heightFn=function(d,C,S){var P=h(d);return-.5*(1+Math.sin(P))*S};var w=VWe(u);r.angularTickLayout!==w&&(n["angular-axis"].selectAll("."+f._id+"tick").remove(),r.angularTickLayout=w);var k=c?[1/0].concat(f.tickvals||[]).map(function(d){return Pv.tickText(f,d,!0,!1)}):Pv.calcTicks(f);c&&(k[0].text="\u221E",k[0].fontSize*=1.75);var x;if(t.gridshape==="linear"?(x=k.map(h),hl.angleDelta(x[0],x[1])<0&&(x=x.slice().reverse())):x=null,r.vangles=x,f.type==="category"&&(k=k.filter(function(d){return hl.isAngleInsideSector(h(d),r.sectorInRad)})),f.visible){var E=f.ticks==="inside"?-1:1,M=(f.linewidth||1)/2;Pv.drawTicks(i,f,{vals:k,layer:n["angular-axis"],path:"M"+E*M+",0h"+E*f.ticklen,transFn:_,crisp:!1}),Pv.drawGrid(i,f,{vals:k,layer:n["angular-grid"],path:T,transFn:hl.noop,crisp:!1}),Pv.drawLabels(i,f,{vals:k,layer:n["angular-axis"],repositionOnUpdate:!0,transFn:p,labelFns:b})}X5(n["angular-line"].select("path"),u.showline,{d:r.pathSubplot(),transform:ic(s,l)}).attr("stroke-width",u.linewidth).call(Hj.stroke,u.linecolor)};wc.updateFx=function(e,t){if(!this.gd._context.staticPlot){var r=!this.isSmith;r&&(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1)),this.updateHoverAndMainDrag(e)}};wc.updateHoverAndMainDrag=function(e){var t=this,r=t.isSmith,i=t.gd,n=t.layers,a=e._zoomlayer,o=D1.MINZOOM,s=D1.OFFEDGE,l=t.radius,u=t.innerRadius,f=t.cx,c=t.cy,h=t.cxx,v=t.cyy,p=t.sectorInRad,_=t.vangles,T=t.radialAxis,g=Py.clampTiny,A=Py.findXYatLength,b=Py.findEnclosingVertexAngles,w=D1.cornerHalfWidth,k=D1.cornerLen/2,x,E,M=Ly.makeDragger(n,"path","maindrag",e.dragmode===!1?"none":"crosshair");sb.select(M).attr("d",t.pathSubplot()).attr("transform",ic(f,c)),M.onmousemove=function(ue){qWe.hover(i,ue,t.id),i._fullLayout._lasthover=M,i._fullLayout._hoversubplot=t.id},M.onmouseout=function(ue){i._dragging||o8.unhover(i,ue)};var d={element:M,gd:i,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]},C,S,P,D,z,O,V,B,F;function N(ue,Ae){return Math.sqrt(ue*ue+Ae*Ae)}function Z(ue,Ae){return N(ue-h,Ae-v)}function J(ue,Ae){return Math.atan2(v-Ae,ue-h)}function re(ue,Ae){return[ue*Math.cos(Ae),ue*Math.sin(-Ae)]}function le(ue,Ae){if(ue===0)return t.pathSector(2*w);var Re=k/ue,ze=Ae-Re,et=Ae+Re,Le=Math.max(0,Math.min(ue,l)),Ie=Le-w,dt=Le+w;return"M"+re(Ie,ze)+"A"+[Ie,Ie]+" 0,0,0 "+re(Ie,et)+"L"+re(dt,et)+"A"+[dt,dt]+" 0,0,1 "+re(dt,ze)+"Z"}function fe(ue,Ae,Re){if(ue===0)return t.pathSector(2*w);var ze=re(ue,Ae),et=re(ue,Re),Le=g((ze[0]+et[0])/2),Ie=g((ze[1]+et[1])/2),dt,ct;if(Le&&Ie){var Ke=Ie/Le,_t=-1/Ke,zt=A(w,Ke,Le,Ie);dt=A(k,_t,zt[0][0],zt[0][1]),ct=A(k,_t,zt[1][0],zt[1][1])}else{var Et,Se;Ie?(Et=k,Se=w):(Et=w,Se=k),dt=[[Le-Et,Ie-Se],[Le+Et,Ie-Se]],ct=[[Le-Et,Ie+Se],[Le+Et,Ie+Se]]}return"M"+dt.join("L")+"L"+ct.reverse().join("L")+"Z"}function K(){P=null,D=null,z=t.pathSubplot(),O=!1;var ue=i._fullLayout[t.id];V=ejt(ue.bgcolor).getLuminance(),B=Ly.makeZoombox(a,V,f,c,z),B.attr("fill-rule","evenodd"),F=Ly.makeCorners(a,f,c),Gj(i)}function X(ue,Ae){return Ae=Math.max(Math.min(Ae,l),u),ue<s?ue=0:l-ue<s?ue=l:Ae<s?Ae=0:l-Ae<s&&(Ae=l),Math.abs(Ae-ue)>o?(ue<Ae?(P=ue,D=Ae):(P=Ae,D=ue),!0):(P=null,D=null,!1)}function ae(ue,Ae){ue=ue||z,Ae=Ae||"M0,0Z",B.attr("d",ue),F.attr("d",Ae),Ly.transitionZoombox(B,F,O,V),O=!0;var Re={};ie(Re),i.emit("plotly_relayouting",Re)}function oe(ue,Ae){ue=ue*x,Ae=Ae*E;var Re=C+ue,ze=S+Ae,et=Z(C,S),Le=Math.min(Z(Re,ze),l),Ie=J(C,S),dt,ct;X(et,Le)&&(dt=z+t.pathSector(D),P&&(dt+=t.pathSector(P)),ct=le(P,Ie)+le(D,Ie)),ae(dt,ct)}function _e(ue,Ae,Re,ze){var et=Py.findIntersectionXY(Re,ze,Re,[ue-h,v-Ae]);return N(et[0],et[1])}function be(ue,Ae){var Re=C+ue,ze=S+Ae,et=J(C,S),Le=J(Re,ze),Ie=b(et,_),dt=b(Le,_),ct=_e(C,S,Ie[0],Ie[1]),Ke=Math.min(_e(Re,ze,dt[0],dt[1]),l),_t,zt;X(ct,Ke)&&(_t=z+t.pathSector(D),P&&(_t+=t.pathSector(P)),zt=[fe(P,Ie[0],Ie[1]),fe(D,Ie[0],Ie[1])].join(" ")),ae(_t,zt)}function he(){if(Ly.removeZoombox(i),!(P===null||D===null)){var ue={};ie(ue),Ly.showDoubleClickNotifier(i),ub.call("_guiRelayout",i,ue)}}function ie(ue){var Ae=T._rl,Re=(Ae[1]-Ae[0])/(1-u/l)/l,ze=[Ae[0]+(P-u)*Re,Ae[0]+(D-u)*Re];ue[t.id+".radialaxis.range"]=ze}function ye(ue,Ae){var Re=i._fullLayout.clickmode;if(Ly.removeZoombox(i),ue===2){var ze={};for(var et in t.viewInitial)ze[t.id+"."+et]=t.viewInitial[et];i.emit("plotly_doubleclick",null),ub.call("_guiRelayout",i,ze)}Re.indexOf("select")>-1&&ue===1&&sjt(Ae,i,[t.xaxis],[t.yaxis],t.id,d),Re.indexOf("event")>-1&&qWe.click(i,Ae,t.id)}d.prepFn=function(ue,Ae,Re){var ze=i._fullLayout.dragmode,et=M.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var Le=i._fullLayout._invTransform;x=i._fullLayout._invScaleX,E=i._fullLayout._invScaleY;var Ie=hl.apply3DTransform(Le)(Ae-et.left,Re-et.top);if(C=Ie[0],S=Ie[1],_){var dt=Py.findPolygonOffset(l,p[0],p[1],_);C+=h+dt[0],S+=v+dt[1]}switch(ze){case"zoom":d.clickFn=ye,r||(_?d.moveFn=be:d.moveFn=oe,d.doneFn=he,K(ue,Ae,Re));break;case"select":case"lasso":ojt(ue,Ae,Re,d,ze);break}},o8.init(d)};wc.updateRadialDrag=function(e,t,r){var i=this,n=i.gd,a=i.layers,o=i.radius,s=i.innerRadius,l=i.cx,u=i.cy,f=i.radialAxis,c=D1.radialDragBoxSize,h=c/2;if(!f.visible)return;var v=I1(i.radialAxisAngle),p=f._rl,_=p[0],T=p[1],g=p[r],A=.75*(p[1]-p[0])/(1-i.getHole(t))/o,b,w,k;r?(b=l+(o+h)*Math.cos(v),w=u-(o+h)*Math.sin(v),k="radialdrag"):(b=l+(s-h)*Math.cos(v),w=u-(s-h)*Math.sin(v),k="radialdrag-inner");var x=Ly.makeRectDragger(a,k,"crosshair",-h,-h,c,c),E={element:x,gd:n};e.dragmode===!1&&(E.dragmode=!1),X5(sb.select(x),f.visible&&s<o,{transform:ic(b,w)});var M,d,C;function S(V,B){if(M)M(V,B);else{var F=[V,-B],N=[Math.cos(v),Math.sin(v)],Z=Math.abs(hl.dot(F,N)/Math.sqrt(hl.dot(F,F)));isNaN(Z)||(M=Z<.5?z:O)}var J={};P(J),n.emit("plotly_relayouting",J)}function P(V){d!==null?V[i.id+".radialaxis.angle"]=d:C!==null&&(V[i.id+".radialaxis.range["+r+"]"]=C)}function D(){d!==null?ub.call("_guiRelayout",n,i.id+".radialaxis.angle",d):C!==null&&ub.call("_guiRelayout",n,i.id+".radialaxis.range["+r+"]",C)}function z(V,B){if(r!==0){var F=b+V,N=w+B;d=Math.atan2(u-N,F-l),i.vangles&&(d=HWe(d,i.vangles)),d=lb(d);var Z=ic(l,u)+Tg(-d);a["radial-axis"].attr("transform",Z),a["radial-line"].select("line").attr("transform",Z);var J=i.gd._fullLayout,re=J[i.id];i.updateRadialAxisTitle(J,re,d)}}function O(V,B){var F=hl.dot([V,-B],[Math.cos(v),Math.sin(v)]);if(C=g-A*F,A>0!=(r?C>_:C<T)){C=null;return}var N=n._fullLayout,Z=N[i.id];f.range[r]=C,f._rl[r]=C,i.updateRadialAxis(N,Z),i.xaxis.setRange(),i.xaxis.setScale(),i.yaxis.setRange(),i.yaxis.setScale();var J=!1;for(var re in i.traceHash){var le=i.traceHash[re],fe=hl.filterVisible(le),K=le[0][0].trace._module;K.plot(n,i,fe,Z),ub.traceIs(re,"gl")&&fe.length&&(J=!0)}J&&(OWe(n),BWe(n))}E.prepFn=function(){M=null,d=null,C=null,E.moveFn=S,E.doneFn=D,Gj(n)},E.clampFn=function(V,B){return Math.sqrt(V*V+B*B)<D1.MINDRAG&&(V=0,B=0),[V,B]},o8.init(E)};wc.updateAngularDrag=function(e){var t=this,r=t.gd,i=t.layers,n=t.radius,a=t.angularAxis,o=t.cx,s=t.cy,l=t.cxx,u=t.cyy,f=D1.angularDragBoxSize,c=Ly.makeDragger(i,"path","angulardrag",e.dragmode===!1?"none":"move"),h={element:c,gd:r};e.dragmode===!1?h.dragmode=!1:sb.select(c).attr("d",t.pathAnnulus(n,n+f)).attr("transform",ic(o,s)).call(zWe,"move");function v(C,S){return Math.atan2(u+f-S,C-l-f)}var p=i.frontplot.select(".scatterlayer").selectAll(".trace"),_=p.selectAll(".point"),T=p.selectAll(".textpoint"),g,A,b,w,k,x;function E(C,S){var P=t.gd._fullLayout,D=P[t.id],z=g+C*e._invScaleX,O=A+S*e._invScaleY,V=v(z,O),B=lb(V-x);if(w=b+B,i.frontplot.attr("transform",ic(t.xOffset2,t.yOffset2)+Tg([-B,l,u])),t.vangles){k=t.radialAxisAngle+B;var F=ic(o,s)+Tg(-B),N=ic(o,s)+Tg(-k);i.bg.attr("transform",F),i["radial-grid"].attr("transform",F),i["radial-axis"].attr("transform",N),i["radial-line"].select("line").attr("transform",N),t.updateRadialAxisTitle(P,D,k)}else t.clipPaths.forTraces.select("path").attr("transform",ic(l,u)+Tg(B));_.each(function(){var X=sb.select(this),ae=W5.getTranslate(X);X.attr("transform",ic(ae.x,ae.y)+Tg([B]))}),T.each(function(){var X=sb.select(this),ae=X.select("text"),oe=W5.getTranslate(X);X.attr("transform",Tg([B,ae.attr("x"),ae.attr("y")])+ic(oe.x,oe.y))}),a.rotation=hl.modHalf(w,360),t.updateAngularAxis(P,D),t._hasClipOnAxisFalse&&!hl.isFullCircle(t.sectorInRad)&&p.call(W5.hideOutsideRangePoints,t);var Z=!1;for(var J in t.traceHash)if(ub.traceIs(J,"gl")){var re=t.traceHash[J],le=hl.filterVisible(re),fe=re[0][0].trace._module;fe.plot(r,t,le,D),le.length&&(Z=!0)}Z&&(OWe(r),BWe(r));var K={};M(K),r.emit("plotly_relayouting",K)}function M(C){C[t.id+".angularaxis.rotation"]=w,t.vangles&&(C[t.id+".radialaxis.angle"]=k)}function d(){T.select("text").attr("transform",null);var C={};M(C),ub.call("_guiRelayout",r,C)}h.prepFn=function(C,S,P){var D=e[t.id];b=D.angularaxis.rotation;var z=c.getBoundingClientRect();g=S-z.left,A=P-z.top,r._fullLayout._calcInverseTransform(r);var O=hl.apply3DTransform(e._invTransform)(g,A);g=O[0],A=O[1],x=v(g,A),h.moveFn=E,h.doneFn=d,Gj(r)},t.vangles&&!hl.isFullCircle(t.sectorInRad)&&(h.prepFn=hl.noop,zWe(sb.select(c),null)),o8.init(h)};wc.isPtInside=function(e){if(this.isSmith)return!0;var t=this.sectorInRad,r=this.vangles,i=this.angularAxis.c2g(e.theta),n=this.radialAxis,a=n.c2l(e.r),o=n._rl,s=r?Py.isPtInsidePolygon:hl.isPtInsideSector;return s(a,i,o,t,r)};wc.pathArc=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Py.pathPolygon:hl.pathArc;return i(e,t[0],t[1],r)};wc.pathSector=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Py.pathPolygon:hl.pathSector;return i(e,t[0],t[1],r)};wc.pathAnnulus=function(e,t){var r=this.sectorInRad,i=this.vangles,n=i?Py.pathPolygonAnnulus:hl.pathAnnulus;return n(e,t,r[0],r[1],i)};wc.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)};wc.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)};function VWe(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function hjt(e){var t=e[0],r=e[1],i=r-t,n=NWe(t,360),a=n+i,o=Math.cos(I1(n)),s=Math.sin(I1(n)),l=Math.cos(I1(a)),u=Math.sin(I1(a)),f,c,h,v;return n<=90&&a>=90||n>90&&a>=450?v=1:s<=0&&u<=0?v=0:v=Math.max(s,u),n<=180&&a>=180||n>180&&a>=540?f=-1:o>=0&&l>=0?f=0:f=Math.min(o,l),n<=270&&a>=270||n>270&&a>=630?c=-1:s>=0&&u>=0?c=0:c=Math.min(s,u),a>=360?h=1:o<=0&&l<=0?h=0:h=Math.max(o,l),[f,c,h,v]}function HWe(e,t){var r=function(n){return hl.angleDist(e,n)},i=hl.findIndexOfMin(t,r);return t[i]}function X5(e,t,r){return t?(e.attr("display",null),e.attr(r)):e&&e.attr("display","none"),e}});var Wj=ne((Z1r,KWe)=>{"use strict";var vjt=Ku(),Fa=dc(),djt=fl().attributes,Nd=Wt().extendFlat,YWe=Xs().overrideAll,WWe=YWe({color:Fa.color,showline:Nd({},Fa.showline,{dflt:!0}),linecolor:Fa.linecolor,linewidth:Fa.linewidth,showgrid:Nd({},Fa.showgrid,{dflt:!0}),gridcolor:Fa.gridcolor,gridwidth:Fa.gridwidth,griddash:Fa.griddash},"plot","from-root"),XWe=YWe({tickmode:Fa.minor.tickmode,nticks:Fa.nticks,tick0:Fa.tick0,dtick:Fa.dtick,tickvals:Fa.tickvals,ticktext:Fa.ticktext,ticks:Fa.ticks,ticklen:Fa.ticklen,tickwidth:Fa.tickwidth,tickcolor:Fa.tickcolor,ticklabelstep:Fa.ticklabelstep,showticklabels:Fa.showticklabels,labelalias:Fa.labelalias,showtickprefix:Fa.showtickprefix,tickprefix:Fa.tickprefix,showticksuffix:Fa.showticksuffix,ticksuffix:Fa.ticksuffix,showexponent:Fa.showexponent,exponentformat:Fa.exponentformat,minexponent:Fa.minexponent,separatethousands:Fa.separatethousands,tickfont:Fa.tickfont,tickangle:Fa.tickangle,tickformat:Fa.tickformat,tickformatstops:Fa.tickformatstops,layer:Fa.layer},"plot","from-root"),ZWe={visible:Nd({},Fa.visible,{dflt:!0}),type:Nd({},Fa.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Fa.autotypenumbers,autorangeoptions:{minallowed:Fa.autorangeoptions.minallowed,maxallowed:Fa.autorangeoptions.maxallowed,clipmin:Fa.autorangeoptions.clipmin,clipmax:Fa.autorangeoptions.clipmax,include:Fa.autorangeoptions.include,editType:"plot"},autorange:Nd({},Fa.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:Nd({},Fa.minallowed,{editType:"plot"}),maxallowed:Nd({},Fa.maxallowed,{editType:"plot"}),range:Nd({},Fa.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:Fa.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:Nd({},Fa.title.text,{editType:"plot",dflt:""}),font:Nd({},Fa.title.font,{editType:"plot"}),editType:"plot"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:Fa._deprecated.title,titlefont:Fa._deprecated.titlefont}};Nd(ZWe,WWe,XWe);var jWe={visible:Nd({},Fa.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:Fa.autotypenumbers,categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};Nd(jWe,WWe,XWe);KWe.exports={domain:djt({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:vjt.background},radialaxis:ZWe,angularaxis:jWe,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}});var eXe=ne((j1r,$We)=>{"use strict";var l8=Wt(),pjt=_i(),gjt=So(),yjt=Kx(),mjt=vc().getSubplotData,xjt=hx(),_jt=d2(),bjt=im(),wjt=am(),Tjt=pL(),Ajt=CM(),Mjt=fO(),Sjt=x2(),QWe=Wj(),Ejt=Bj(),u8=t8(),JWe=u8.axisNames;function kjt(e,t,r,i){var n=r("bgcolor");i.bgColor=pjt.combine(n,i.paper_bgcolor);var a=r("sector");r("hole");var o=mjt(i.fullData,u8.name,i.id),s=i.layoutOut,l;function u(S,P){return r(l+"."+S,P)}for(var f=0;f<JWe.length;f++){l=JWe[f],l8.isPlainObject(e[l])||(e[l]={});var c=e[l],h=gjt.newContainer(t,l);h._id=h._name=l,h._attr=i.id+"."+l,h._traceIndices=o.map(function(S){return S._expandedIndex});var v=u8.axisName2dataArray[l],p=Cjt(c,h,u,o,v,i);Tjt(c,h,u,{axData:o,dataAttr:v});var _=u("visible");switch(Ejt(h,t,s),u("uirevision",t.uirevision),h._m=1,l){case"radialaxis":u("minallowed"),u("maxallowed");var T=u("range"),g=h.getAutorangeDflt(T),A=u("autorange",g),b;T&&(T[0]===null&&T[1]===null||(T[0]===null||T[1]===null)&&(A==="reversed"||A===!0)||T[0]!==null&&(A==="min"||A==="max reversed")||T[1]!==null&&(A==="max"||A==="min reversed"))&&(T=void 0,delete h.range,h.autorange=!0,b=!0),b||(g=h.getAutorangeDflt(T),A=u("autorange",g)),c.autorange=A,A&&(Mjt(u,A,T),(p==="linear"||p==="-")&&u("rangemode"),h.isReversed()&&(h._m=-1)),h.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(p==="date"){l8.log("Polar plots do not support date angular axes yet.");for(var w=0;w<o.length;w++)o[w].visible=!1;p=c.type=h.type="linear"}u(p==="linear"?"thetaunit":"period");var k=u("direction");u("rotation",{counterclockwise:0,clockwise:90}[k]);break}if(wjt(c,h,u,h.type,{tickSuffixDflt:h.thetaunit==="degrees"?"\xB0":void 0}),_){var x,E,M,d,C=i.font||{};x=u("color"),E=x===c.color?x:C.color,M=C.size,d=C.family,xjt(c,h,u,h.type),bjt(c,h,u,h.type,{font:{color:E,size:M,family:d},noAutotickangles:l==="angularaxis"}),_jt(c,h,u,{outerTicks:!0}),Ajt(c,h,u,{dfltColor:x,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:QWe[l]}),u("layer"),l==="radialaxis"&&(u("side"),u("angle",a[0]),u("title.text"),l8.coerceFont(u,"title.font",{color:E,size:l8.bigFont(M),family:d}))}p!=="category"&&u("hoverformat"),h._input=c}t.angularaxis.type==="category"&&r("gridshape")}function Cjt(e,t,r,i,n,a){var o=r("autotypenumbers",a.autotypenumbersDflt),s=r("type");if(s==="-"){for(var l,u=0;u<i.length;u++)if(i[u].visible){l=i[u];break}l&&l[n]&&(t.type=Sjt(l[n],"gregorian",{noMultiCategory:!0,autotypenumbers:o})),t.type==="-"?t.type="linear":e.type=t.type}return t.type}$We.exports=function(t,r,i){yjt(t,r,i,{type:u8.name,attributes:QWe,handleDefaults:kjt,font:r.font,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})}});var f8=ne((K1r,aXe)=>{"use strict";var Ljt=vc().getSubplotCalcData,Pjt=Wt().counterRegex,Rjt=Yj(),rXe=t8(),nXe=rXe.attr,fb=rXe.name,tXe=Pjt(fb),iXe={};iXe[nXe]={valType:"subplotid",dflt:fb,editType:"calc"};function Djt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[fb],n=0;n<i.length;n++){var a=i[n],o=Ljt(r,fb,a),s=t[a]._subplot;s||(s=Rjt(e,a),t[a]._subplot=s),s.plot(o,t,e._promises)}}function Ijt(e,t,r,i){for(var n=i._subplots[fb]||[],a=i._has&&i._has("gl"),o=t._has&&t._has("gl"),s=a&&!o,l=0;l<n.length;l++){var u=n[l],f=i[u]._subplot;if(!t[u]&&f){f.framework.remove(),f.layers["radial-axis-title"].remove();for(var c in f.clipPaths)f.clipPaths[c].remove()}s&&f._scene&&(f._scene.destroy(),f._scene=null)}}aXe.exports={attr:nXe,name:fb,idRoot:fb,idRegex:tXe,attrRegex:tXe,attributes:iXe,layoutAttributes:Wj(),supplyLayoutDefaults:eXe(),plot:Djt,clean:Ijt,toSVG:vu().toSVG}});var Z5=ne((J1r,oXe)=>{"use strict";var Fjt=Ba().hovertemplateAttrs,qjt=Ba().texttemplateAttrs,c8=oa().extendFlat,zjt=Y0(),Ud=cu(),Ojt=es(),LT=Ud.line;oXe.exports={mode:Ud.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:Ud.text,texttemplate:qjt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:Ud.hovertext,line:{color:LT.color,width:LT.width,dash:LT.dash,backoff:LT.backoff,shape:c8({},LT.shape,{values:["linear","spline"]}),smoothing:LT.smoothing,editType:"calc"},connectgaps:Ud.connectgaps,marker:Ud.marker,cliponaxis:c8({},Ud.cliponaxis,{dflt:!1}),textposition:Ud.textposition,textfont:Ud.textfont,fill:c8({},Ud.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:zjt(),hoverinfo:c8({},Ojt.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:Ud.hoveron,hovertemplate:Fjt(),selected:Ud.selected,unselected:Ud.unselected}});var v8=ne((Q1r,uXe)=>{"use strict";var h8=Wt(),PT=js(),Bjt=dp(),Njt=s0(),sXe=N2(),Ujt=l0(),Vjt=X0(),Hjt=G0().PTS_LINESONLY,Gjt=Z5();function Yjt(e,t,r,i){function n(s,l){return h8.coerce(e,t,Gjt,s,l)}var a=lXe(e,t,i,n);if(!a){t.visible=!1;return}n("thetaunit"),n("mode",a<Hjt?"lines+markers":"lines"),n("text"),n("hovertext"),t.hoveron!=="fills"&&n("hovertemplate"),PT.hasMarkers(t)&&Bjt(e,t,r,i,n,{gradient:!0}),PT.hasLines(t)&&(Njt(e,t,r,i,n,{backoff:!0}),sXe(e,t,n),n("connectgaps")),PT.hasText(t)&&(n("texttemplate"),Ujt(e,t,i,n));var o=[];(PT.hasMarkers(t)||PT.hasText(t))&&(n("cliponaxis"),n("marker.maxdisplayed"),o.push("points")),n("fill"),t.fill!=="none"&&(Vjt(e,t,r,n),PT.hasLines(t)||sXe(e,t,n)),(t.fill==="tonext"||t.fill==="toself")&&o.push("fills"),n("hoveron",o.join("+")||"points"),h8.coerceSelectionMarkerOpacity(t,n)}function lXe(e,t,r,i){var n=i("r"),a=i("theta");h8.isTypedArray(n)&&(t.r=n=Array.from(n)),h8.isTypedArray(a)&&(t.theta=a=Array.from(a));var o;if(n)a?o=Math.min(n.length,a.length):(o=n.length,i("theta0"),i("dtheta"));else{if(!a)return 0;o=t.theta.length,i("r0"),i("dr")}return t._length=o,o}uXe.exports={handleRThetaDefaults:lXe,supplyDefaults:Yjt}});var d8=ne(($1r,cXe)=>{"use strict";var Wjt=Wt(),fXe=Xi();cXe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o,s;a?(o=a.radialAxis,s=a.angularAxis):(a=i[r.subplot],o=a.radialaxis,s=a.angularaxis);var l=o.c2l(t.r);n.rLabel=fXe.tickText(o,l,!0).text;var u=s.thetaunit==="degrees"?Wjt.rad2deg(t.theta):t.theta;return n.thetaLabel=fXe.tickText(s,u,!0).text,n}});var dXe=ne((exr,vXe)=>{"use strict";var hXe=la(),Xjt=$a().BADNUM,Zjt=Xi(),jjt=pp(),Kjt=Z0(),Jjt=gp(),Qjt=yp().calcMarkerSize;vXe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=a.makeCalcdata(r,"r"),l=o.makeCalcdata(r,"theta"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],p=f[c]={};hXe(h)&&hXe(v)?(p.r=h,p.theta=v):p.r=Xjt}var _=Qjt(r,u);return r._extremes.x=Zjt.findExtremes(a,s,{ppad:_}),jjt(t,r),Kjt(f,r),Jjt(f,r),f}});var yXe=ne((txr,gXe)=>{"use strict";var $jt=W2(),pXe=$a().BADNUM;gXe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=r.radialAxis,u=r.angularAxis,f=0;f<i.length;f++)for(var c=i[f],h=0;h<c.length;h++){h===0&&(c[0].trace._xA=a,c[0].trace._yA=o);var v=c[h],p=v.r;if(p===pXe)v.x=v.y=pXe;else{var _=l.c2g(p),T=u.c2g(v.theta);v.x=_*Math.cos(T),v.y=_*Math.sin(T)}}$jt(t,s,i,n)}});var p8=ne((rxr,xXe)=>{"use strict";var eKt=K2();function tKt(e,t,r,i){var n=eKt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,mXe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function mXe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="r",a._hovertitle="\u03B8";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&f(n,i.rLabel),c.indexOf("theta")!==-1&&f(a,i.thetaLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}xXe.exports={hoverPoints:tKt,makeHoverPointText:mXe}});var bXe=ne((nxr,_Xe)=>{"use strict";_Xe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:f8(),categories:["polar","symbols","showLegend","scatter-like"],attributes:Z5(),supplyDefaults:v8().supplyDefaults,colorbar:ph(),formatLabels:d8(),calc:dXe(),plot:yXe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:p8().hoverPoints,selectPoints:J2(),meta:{}}});var TXe=ne((ixr,wXe)=>{"use strict";wXe.exports=bXe()});var Xj=ne((axr,AXe)=>{"use strict";var xd=Z5(),Ry=WE(),rKt=Ba().texttemplateAttrs;AXe.exports={mode:xd.mode,r:xd.r,theta:xd.theta,r0:xd.r0,dr:xd.dr,theta0:xd.theta0,dtheta:xd.dtheta,thetaunit:xd.thetaunit,text:xd.text,texttemplate:rKt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:xd.hovertext,hovertemplate:xd.hovertemplate,line:{color:Ry.line.color,width:Ry.line.width,dash:Ry.line.dash,editType:"calc"},connectgaps:Ry.connectgaps,marker:Ry.marker,fill:Ry.fill,fillcolor:Ry.fillcolor,textposition:Ry.textposition,textfont:Ry.textfont,hoverinfo:xd.hoverinfo,selected:xd.selected,unselected:xd.unselected}});var EXe=ne((oxr,SXe)=>{"use strict";var MXe=Wt(),Zj=js(),nKt=v8().handleRThetaDefaults,iKt=dp(),aKt=s0(),oKt=l0(),sKt=X0(),lKt=G0().PTS_LINESONLY,uKt=Xj();SXe.exports=function(t,r,i,n){function a(s,l){return MXe.coerce(t,r,uKt,s,l)}var o=nKt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("mode",o<lKt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),Zj.hasMarkers(r)&&iKt(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),Zj.hasLines(r)&&(aKt(t,r,i,n,a),a("connectgaps")),Zj.hasText(r)&&(a("texttemplate"),oKt(t,r,n,a)),a("fill"),r.fill!=="none"&&sKt(t,r,i,a),MXe.coerceSelectionMarkerOpacity(r,a)}});var CXe=ne((sxr,kXe)=>{"use strict";var fKt=d8();kXe.exports=function(t,r,i){var n=t.i;return"r"in t||(t.r=r._r[n]),"theta"in t||(t.theta=r._theta[n]),fKt(t,r,i)}});var PXe=ne((lxr,LXe)=>{"use strict";var cKt=pp(),hKt=yp().calcMarkerSize,vKt=V_(),dKt=Xi(),pKt=h1().TOO_MANY_POINTS;LXe.exports=function(t,r){var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=r._r=a.makeCalcdata(r,"r"),l=r._theta=o.makeCalcdata(r,"theta"),u=r._length,f={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),f.r=s,f.theta=l,cKt(t,r);var c=f.opts=vKt.style(t,r),h;return u<pKt?h=hKt(r,u):c.marker&&(h=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),r._extremes.x=dKt.findExtremes(a,s,{ppad:h}),[{x:!1,y:!1,t:f,trace:r}]}});var DXe=ne((uxr,RXe)=>{"use strict";var gKt=ND(),yKt=p8().makeHoverPointText;function mKt(e,t,r,i){var n=e.cd,a=n[0].t,o=a.r,s=a.theta,l=gKt.hoverPoints(e,t,r,i);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=e.subplot,c=u.cd[u.index],h=u.trace;if(c.r=o[u.index],c.theta=s[u.index],!!f.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,yKt(c,h,f,u),l}}RXe.exports={hoverPoints:mKt}});var FXe=ne((fxr,IXe)=>{"use strict";IXe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:f8(),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:Xj(),supplyDefaults:EXe(),colorbar:ph(),formatLabels:CXe(),calc:PXe(),hoverPoints:DXe().hoverPoints,selectPoints:xW(),meta:{}}});var qXe=ne((cxr,jj)=>{"use strict";var xKt=HD(),_Kt=la(),bKt=TX(),wKt=gW(),g8=V_(),y8=Wt(),TKt=h1().TOO_MANY_POINTS,AKt={};jj.exports=function(t,r,i){if(i.length){var n=r.radialAxis,a=r.angularAxis,o=wKt(t,r);return i.forEach(function(s){if(!(!s||!s[0]||!s[0].trace)){var l=s[0],u=l.trace,f=l.t,c=u._length,h=f.r,v=f.theta,p=f.opts,_,T=h.slice(),g=v.slice();for(_=0;_<h.length;_++)r.isPtInside({r:h[_],theta:v[_]})||(T[_]=NaN,g[_]=NaN);var A=new Array(c*2),b=Array(c),w=Array(c);for(_=0;_<c;_++){var k=T[_],x,E;if(_Kt(k)){var M=n.c2g(k),d=a.c2g(g[_],u.thetaunit);x=M*Math.cos(d),E=M*Math.sin(d)}else x=E=NaN;b[_]=A[_*2]=x,w[_]=A[_*2+1]=E}f.tree=xKt(A),p.marker&&c>=TKt&&(p.marker.cluster=f.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=A),p.line&&A.length>1&&y8.extendFlat(p.line,g8.linePositions(t,u,A)),p.text&&(y8.extendFlat(p.text,{positions:A},g8.textPosition(t,u,p.text,p.marker)),y8.extendFlat(p.textSel,{positions:A},g8.textPosition(t,u,p.text,p.markerSel)),y8.extendFlat(p.textUnsel,{positions:A},g8.textPosition(t,u,p.text,p.markerUnsel))),p.fill&&!o.fill2d&&(o.fill2d=!0),p.marker&&!o.scatter2d&&(o.scatter2d=!0),p.line&&!o.line2d&&(o.line2d=!0),p.text&&!o.glText&&(o.glText=!0),o.lineOptions.push(p.line),o.fillOptions.push(p.fill),o.markerOptions.push(p.marker),o.markerSelectedOptions.push(p.markerSel),o.markerUnselectedOptions.push(p.markerUnsel),o.textOptions.push(p.text),o.textSelectedOptions.push(p.textSel),o.textUnselectedOptions.push(p.textUnsel),o.selectBatch.push([]),o.unselectBatch.push([]),f.x=b,f.y=w,f.rawx=b,f.rawy=w,f.r=h,f.theta=v,f.positions=A,f._scene=o,f.index=o.count,o.count++}}),bKt(t,r,i)}};jj.exports.reglPrecompiled=AKt});var BXe=ne((hxr,OXe)=>{"use strict";var zXe=FXe();zXe.plot=qXe();OXe.exports=zXe});var UXe=ne((vxr,NXe)=>{"use strict";NXe.exports=BXe()});var Kj=ne((dxr,VXe)=>{"use strict";var MKt=Ba().hovertemplateAttrs,RT=oa().extendFlat,F1=Z5(),q1=J0();VXe.exports={r:F1.r,theta:F1.theta,r0:F1.r0,dr:F1.dr,theta0:F1.theta0,dtheta:F1.dtheta,thetaunit:F1.thetaunit,base:RT({},q1.base,{}),offset:RT({},q1.offset,{}),width:RT({},q1.width,{}),text:RT({},q1.text,{}),hovertext:RT({},q1.hovertext,{}),marker:SKt(),hoverinfo:F1.hoverinfo,hovertemplate:MKt(),selected:q1.selected,unselected:q1.unselected};function SKt(){var e=RT({},q1.marker);return delete e.cornerradius,e}});var Jj=ne((pxr,HXe)=>{"use strict";HXe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}});var WXe=ne((gxr,YXe)=>{"use strict";var GXe=Wt(),EKt=v8().handleRThetaDefaults,kKt=JL(),CKt=Kj();YXe.exports=function(t,r,i,n){function a(s,l){return GXe.coerce(t,r,CKt,s,l)}var o=EKt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),kKt(t,r,a,i,n),GXe.coerceSelectionMarkerOpacity(r,a)}});var ZXe=ne((yxr,XXe)=>{"use strict";var LKt=Wt(),PKt=Jj();XXe.exports=function(e,t,r){var i={},n;function a(l,u){return LKt.coerce(e[n]||{},t[n],PKt,l,u)}for(var o=0;o<r.length;o++){var s=r[o];s.type==="barpolar"&&s.visible===!0&&(n=s.subplot,i[n]||(a("barmode"),a("bargap"),i[n]=1))}}});var Qj=ne((mxr,JXe)=>{"use strict";var jXe=Uh().hasColorscale,KXe=gv(),RKt=Wt().isArrayOrTypedArray,DKt=YM(),IKt=Ix().setGroupPositions,FKt=gp(),qKt=wi().traceIs,zKt=Wt().extendFlat;function OKt(e,t){for(var r=e._fullLayout,i=t.subplot,n=r[i].radialaxis,a=r[i].angularaxis,o=n.makeCalcdata(t,"r"),s=a.makeCalcdata(t,"theta"),l=t._length,u=new Array(l),f=o,c=s,h=0;h<l;h++)u[h]={p:c[h],s:f[h]};function v(p){var _=t[p];_!==void 0&&(t["_"+p]=RKt(_)?a.makeCalcdata(t,p):a.d2c(_,t.thetaunit))}return a.type==="linear"&&(v("width"),v("offset")),jXe(t,"marker")&&KXe(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),jXe(t,"marker.line")&&KXe(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),DKt(u,t),FKt(u,t),u}function BKt(e,t,r){for(var i=e.calcdata,n=[],a=0;a<i.length;a++){var o=i[a],s=o[0].trace;s.visible===!0&&qKt(s,"bar")&&s.subplot===r&&n.push(o)}var l=zKt({},t.radialaxis,{_id:"x"}),u=t.angularaxis;IKt(e,u,l,n,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}JXe.exports={calc:OKt,crossTraceCalc:BKt}});var eZe=ne((xxr,$Xe)=>{"use strict";var QXe=Ai(),m8=la(),DT=Wt(),NKt=aa(),$j=n8();$Xe.exports=function(t,r,i){var n=t._context.staticPlot,a=r.xaxis,o=r.yaxis,s=r.radialAxis,l=r.angularAxis,u=UKt(r),f=r.layers.frontplot.select("g.barlayer");DT.makeTraceGroups(f,i,"trace bars").each(function(){var c=QXe.select(this),h=DT.ensureSingle(c,"g","points"),v=h.selectAll("g.point").data(DT.identity);v.enter().append("g").style("vector-effect",n?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(p){var _=QXe.select(this),T=p.rp0=s.c2p(p.s0),g=p.rp1=s.c2p(p.s1),A=p.thetag0=l.c2g(p.p0),b=p.thetag1=l.c2g(p.p1),w;if(!m8(T)||!m8(g)||!m8(A)||!m8(b)||T===g||A===b)w="M0,0Z";else{var k=s.c2g(p.s1),x=(A+b)/2;p.ct=[a.c2p(k*Math.cos(x)),o.c2p(k*Math.sin(x))],w=u(T,g,A,b)}DT.ensureSingle(_,"path").attr("d",w)}),NKt.setClipUrl(c,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})};function UKt(e){var t=e.cxx,r=e.cyy;return e.vangles?function(i,n,a,o){var s,l;DT.angleDelta(a,o)>0?(s=a,l=o):(s=o,l=a);var u=$j.findEnclosingVertexAngles(s,e.vangles)[0],f=$j.findEnclosingVertexAngles(l,e.vangles)[1],c=[u,(s+l)/2,f];return $j.pathPolygonAnnulus(i,n,s,l,c,t,r)}:function(i,n,a,o){return DT.pathAnnulus(i,n,a,o,t,r)}}});var rZe=ne((_xr,tZe)=>{"use strict";var VKt=Ol(),eK=Wt(),HKt=vw().getTraceColor,GKt=eK.fillText,YKt=p8().makeHoverPointText,WKt=n8().isPtInsidePolygon;tZe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s=o.radialAxis,l=o.angularAxis,u=o.vangles,f=u?WKt:eK.isPtInsideSector,c=t.maxHoverDistance,h=l._period||2*Math.PI,v=Math.abs(s.g2p(Math.sqrt(r*r+i*i))),p=Math.atan2(i,r);s.range[0]>s.range[1]&&(p+=Math.PI);var _=function(b){return f(v,p,[b.rp0,b.rp1],[b.thetag0,b.thetag1],u)?c+Math.min(1,Math.abs(b.thetag1-b.thetag0)/h)-1+(b.rp1-v)/(b.rp1-b.rp0)-1:1/0};if(VKt.getClosest(n,_,t),t.index!==!1){var T=t.index,g=n[T];t.x0=t.x1=g.ct[0],t.y0=t.y1=g.ct[1];var A=eK.extendFlat({},g,{r:g.s,theta:g.p});return GKt(g,a,t),YKt(A,a,o,t),t.hovertemplate=a.hovertemplate,t.color=HKt(a,g),t.xLabelVal=t.yLabelVal=void 0,g.s<0&&(t.idealAlign="left"),[t]}}});var iZe=ne((bxr,nZe)=>{"use strict";nZe.exports={moduleType:"trace",name:"barpolar",basePlotModule:f8(),categories:["polar","bar","showLegend"],attributes:Kj(),layoutAttributes:Jj(),supplyDefaults:WXe(),supplyLayoutDefaults:ZXe(),calc:Qj().calc,crossTraceCalc:Qj().crossTraceCalc,plot:eZe(),colorbar:ph(),formatLabels:d8(),style:_p().style,styleOnSelect:_p().styleOnSelect,hoverPoints:rZe(),selectPoints:dw(),meta:{}}});var oZe=ne((wxr,aZe)=>{"use strict";aZe.exports=iZe()});var tK=ne((Txr,sZe)=>{"use strict";sZe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}});var rK=ne((Axr,cZe)=>{"use strict";var XKt=Ku(),Ql=dc(),ZKt=fl().attributes,z1=Wt().extendFlat,lZe=Xs().overrideAll,uZe=lZe({color:Ql.color,showline:z1({},Ql.showline,{dflt:!0}),linecolor:Ql.linecolor,linewidth:Ql.linewidth,showgrid:z1({},Ql.showgrid,{dflt:!0}),gridcolor:Ql.gridcolor,gridwidth:Ql.gridwidth,griddash:Ql.griddash},"plot","from-root"),fZe=lZe({ticklen:Ql.ticklen,tickwidth:z1({},Ql.tickwidth,{dflt:2}),tickcolor:Ql.tickcolor,showticklabels:Ql.showticklabels,labelalias:Ql.labelalias,showtickprefix:Ql.showtickprefix,tickprefix:Ql.tickprefix,showticksuffix:Ql.showticksuffix,ticksuffix:Ql.ticksuffix,tickfont:Ql.tickfont,tickformat:Ql.tickformat,hoverformat:Ql.hoverformat,layer:Ql.layer},"plot","from-root"),jKt=z1({visible:z1({},Ql.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:z1({},Ql.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},uZe,fZe),KKt=z1({visible:z1({},Ql.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:Ql.ticks,editType:"calc"},uZe,fZe);cZe.exports={domain:ZKt({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:XKt.background},realaxis:jKt,imaginaryaxis:KKt,editType:"calc"}});var dZe=ne((Mxr,vZe)=>{"use strict";var IT=Wt(),JKt=_i(),QKt=So(),$Kt=Kx(),eJt=vc().getSubplotData,tJt=am(),rJt=im(),nJt=CM(),iJt=B0(),FT=rK(),nK=tK(),hZe=nK.axisNames,aJt=sJt(function(e){return IT.isTypedArray(e)&&(e=Array.from(e)),e.slice().reverse().map(function(t){return-t}).concat([0]).concat(e)},String);function oJt(e,t,r,i){var n=r("bgcolor");i.bgColor=JKt.combine(n,i.paper_bgcolor);var a=eJt(i.fullData,nK.name,i.id),o=i.layoutOut,s;function l(k,x){return r(s+"."+k,x)}for(var u=0;u<hZe.length;u++){s=hZe[u],IT.isPlainObject(e[s])||(e[s]={});var f=e[s],c=QKt.newContainer(t,s);c._id=c._name=s,c._attr=i.id+"."+s,c._traceIndices=a.map(function(k){return k._expandedIndex});var h=l("visible");if(c.type="linear",iJt(c,o),tJt(f,c,l,c.type),h){var v=s==="realaxis";if(v&&l("side"),v)l("tickvals");else{var p=aJt(t.realaxis.tickvals||FT.realaxis.tickvals.dflt);l("tickvals",p)}IT.isTypedArray(c.tickvals)&&(c.tickvals=Array.from(c.tickvals));var _,T,g,A,b=i.font||{};h&&(_=l("color"),T=_===f.color?_:b.color,g=b.size,A=b.family),rJt(f,c,l,c.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!v,noExp:!0,font:{color:T,size:g,family:A}}),IT.coerce2(e,t,FT,s+".ticklen"),IT.coerce2(e,t,FT,s+".tickwidth"),IT.coerce2(e,t,FT,s+".tickcolor",t.color);var w=l("ticks");w||(delete t[s].ticklen,delete t[s].tickwidth,delete t[s].tickcolor),nJt(f,c,l,{dfltColor:_,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:FT[s]}),l("layer")}l("hoverformat"),delete c.type,c._input=f}}vZe.exports=function(t,r,i){$Kt(t,r,i,{noUirevision:!0,type:nK.name,attributes:FT,handleDefaults:oJt,font:r.font,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})};function sJt(e,t){var r={};return function(i){var n=t?t(i):i;if(n in r)return r[n];var a=e(i);return r[n]=a,a}}});var _Ze=ne((Sxr,xZe)=>{"use strict";var lJt=vc().getSubplotCalcData,uJt=Wt().counterRegex,fJt=Yj(),gZe=tK(),yZe=gZe.attr,cb=gZe.name,pZe=uJt(cb),mZe={};mZe[yZe]={valType:"subplotid",dflt:cb,editType:"calc"};function cJt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[cb],n=0;n<i.length;n++){var a=i[n],o=lJt(r,cb,a),s=t[a]._subplot;s||(s=fJt(e,a,!0),t[a]._subplot=s),s.plot(o,t,e._promises)}}function hJt(e,t,r,i){for(var n=i._subplots[cb]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;if(!t[o]&&s){s.framework.remove();for(var l in s.clipPaths)s.clipPaths[l].remove()}}}xZe.exports={attr:yZe,name:cb,idRoot:cb,idRegex:pZe,attrRegex:pZe,attributes:mZe,layoutAttributes:rK(),supplyLayoutDefaults:dZe(),plot:cJt,clean:hJt,toSVG:vu().toSVG}});var iK=ne((Exr,bZe)=>{"use strict";var vJt=Ba().hovertemplateAttrs,dJt=Ba().texttemplateAttrs,x8=oa().extendFlat,pJt=Y0(),Vd=cu(),gJt=es(),qT=Vd.line;bZe.exports={mode:Vd.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:Vd.text,texttemplate:dJt({editType:"plot"},{keys:["real","imag","text"]}),hovertext:Vd.hovertext,line:{color:qT.color,width:qT.width,dash:qT.dash,backoff:qT.backoff,shape:x8({},qT.shape,{values:["linear","spline"]}),smoothing:qT.smoothing,editType:"calc"},connectgaps:Vd.connectgaps,marker:Vd.marker,cliponaxis:x8({},Vd.cliponaxis,{dflt:!1}),textposition:Vd.textposition,textfont:Vd.textfont,fill:x8({},Vd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:pJt(),hoverinfo:x8({},gJt.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:Vd.hoveron,hovertemplate:vJt(),selected:Vd.selected,unselected:Vd.unselected}});var AZe=ne((kxr,TZe)=>{"use strict";var _8=Wt(),zT=js(),yJt=dp(),mJt=s0(),wZe=N2(),xJt=l0(),_Jt=X0(),bJt=G0().PTS_LINESONLY,wJt=iK();TZe.exports=function(t,r,i,n){function a(l,u){return _8.coerce(t,r,wJt,l,u)}var o=TJt(t,r,n,a);if(!o){r.visible=!1;return}a("mode",o<bJt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),zT.hasMarkers(r)&&yJt(t,r,i,n,a,{gradient:!0}),zT.hasLines(r)&&(mJt(t,r,i,n,a,{backoff:!0}),wZe(t,r,a),a("connectgaps")),zT.hasText(r)&&(a("texttemplate"),xJt(t,r,n,a));var s=[];(zT.hasMarkers(r)||zT.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),s.push("points")),a("fill"),r.fill!=="none"&&(_Jt(t,r,i,a),zT.hasLines(r)||wZe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&s.push("fills"),a("hoveron",s.join("+")||"points"),_8.coerceSelectionMarkerOpacity(r,a)};function TJt(e,t,r,i){var n=i("real"),a=i("imag"),o;return n&&a&&(o=Math.min(n.length,a.length)),_8.isTypedArray(n)&&(t.real=n=Array.from(n)),_8.isTypedArray(a)&&(t.imag=a=Array.from(a)),t._length=o,o}});var EZe=ne((Cxr,SZe)=>{"use strict";var MZe=Xi();SZe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.realLabel=MZe.tickText(a.radialAxis,t.real,!0).text,n.imagLabel=MZe.tickText(a.angularAxis,t.imag,!0).text,n}});var LZe=ne((Lxr,CZe)=>{"use strict";var kZe=la(),AJt=$a().BADNUM,MJt=pp(),SJt=Z0(),EJt=gp(),kJt=yp().calcMarkerSize;CZe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].realaxis,o=i[n].imaginaryaxis,s=a.makeCalcdata(r,"real"),l=o.makeCalcdata(r,"imag"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],p=f[c]={};kZe(h)&&kZe(v)?(p.real=h,p.imag=v):p.real=AJt}return kJt(r,u),MJt(t,r),SJt(f,r),EJt(f,r),f}});var DZe=ne((Pxr,RZe)=>{"use strict";var CJt=W2(),PZe=$a().BADNUM,LJt=Vj(),PJt=LJt.smith;RZe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=0;l<i.length;l++)for(var u=i[l],f=0;f<u.length;f++){f===0&&(u[0].trace._xA=a,u[0].trace._yA=o);var c=u[f],h=c.real;if(h===PZe)c.x=c.y=PZe;else{var v=PJt([h,c.imag]);c.x=v[0],c.y=v[1]}}CJt(t,s,i,n)}});var qZe=ne((Rxr,FZe)=>{"use strict";var RJt=K2();function DJt(e,t,r,i){var n=RJt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,IZe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function IZe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="real",a._hovertitle="imag";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&f(n,i.realLabel),c.indexOf("imag")!==-1&&f(a,i.imagLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}FZe.exports={hoverPoints:DJt,makeHoverPointText:IZe}});var OZe=ne((Dxr,zZe)=>{"use strict";zZe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:_Ze(),categories:["smith","symbols","showLegend","scatter-like"],attributes:iK(),supplyDefaults:AZe(),colorbar:ph(),formatLabels:EZe(),calc:LZe(),plot:DZe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:qZe().hoverPoints,selectPoints:J2(),meta:{}}});var NZe=ne((Ixr,BZe)=>{"use strict";BZe.exports=OZe()});var j5=ne(UZe=>{"use strict";UZe.pointsAccessorFunction=function(e,t){for(var r,i,n=0;n<e.length&&(r=e[n],r!==t);n++)!r._indexToPoints||r.enabled===!1||(i=r._indexToPoints);var a=i?function(o){return i[o]}:function(o){return[o]};return a}});var YZe=ne(BT=>{"use strict";var IJt=Xi(),OT=Wt(),FJt=tm(),qJt=j5().pointsAccessorFunction,mu=$a().BADNUM;BT.moduleType="transform";BT.name="aggregate";var GZe=BT.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},VZe=GZe.aggregations;BT.supplyDefaults=function(e,t){var r={},i;function n(T,g){return OT.coerce(e,r,GZe,T,g)}var a=n("enabled");if(!a)return r;var o=FJt.findArrayAttributes(t),s={};for(i=0;i<o.length;i++)s[o[i]]=1;var l=n("groups");if(!Array.isArray(l)){if(!s[l])return r.enabled=!1,r;s[l]=0}var u=e.aggregations||[],f=r.aggregations=new Array(u.length),c;function h(T,g){return OT.coerce(u[i],c,VZe,T,g)}for(i=0;i<u.length;i++){c={_index:i};var v=h("target"),p=h("func"),_=h("enabled");_&&v&&(s[v]||p==="count"&&s[v]===void 0)?(p==="stddev"&&h("funcmode"),s[v]=0,f[i]=c):f[i]={enabled:!1,_index:i}}for(i=0;i<o.length;i++)s[o[i]]&&f.push({target:o[i],func:VZe.func.dflt,enabled:!0,_index:-1});return r};BT.calcTransform=function(e,t,r){if(r.enabled){var i=r.groups,n=OT.getTargetArray(t,{target:i});if(n){var a,o,s,l,u={},f={},c=[],h=qJt(t.transforms,r),v=n.length;for(t._length&&(v=Math.min(v,t._length)),a=0;a<v;a++)o=n[a],s=u[o],s===void 0?(u[o]=c.length,l=[a],c.push(l),f[u[o]]=h(a)):(c[s].push(a),f[u[o]]=(f[u[o]]||[]).concat(h(a)));r._indexToPoints=f;var p=r.aggregations;for(a=0;a<p.length;a++)HZe(e,t,c,p[a]);typeof i=="string"&&HZe(e,t,c,{target:i,func:"first",enabled:!0}),t._length=c.length}}};function HZe(e,t,r,i){if(i.enabled){for(var n=i.target,a=OT.nestedProperty(t,n),o=a.get(),s=IJt.getDataConversions(e,t,n,o),l=zJt(i,s),u=new Array(r.length),f=0;f<r.length;f++)u[f]=l(o,r[f]);a.set(u),i.func==="count"&&OT.pushUnique(t._arrayAttrs,n)}}function zJt(e,t){var r=e.func,i=t.d2c,n=t.c2d;switch(r){case"count":return OJt;case"first":return BJt;case"last":return NJt;case"sum":return function(a,o){for(var s=0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s+=u)}return n(s)};case"avg":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s+=f,l++)}return l?n(s/l):mu};case"min":return function(a,o){for(var s=1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s=Math.min(s,u))}return s===1/0?mu:n(s)};case"max":return function(a,o){for(var s=-1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s=Math.max(s,u))}return s===-1/0?mu:n(s)};case"range":return function(a,o){for(var s=1/0,l=-1/0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s=Math.min(s,f),l=Math.max(l,f))}return l===-1/0||s===1/0?mu:n(l-s)};case"change":return function(a,o){var s=i(a[o[0]]),l=i(a[o[o.length-1]]);return s===mu||l===mu?mu:n(l-s)};case"median":return function(a,o){for(var s=[],l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&s.push(u)}if(!s.length)return mu;s.sort(OT.sorterAsc);var f=(s.length-1)/2;return n((s[Math.floor(f)]+s[Math.ceil(f)])/2)};case"mode":return function(a,o){for(var s={},l=0,u=mu,f=0;f<o.length;f++){var c=i(a[o[f]]);if(c!==mu){var h=s[c]=(s[c]||0)+1;h>l&&(l=h,u=c)}}return l?n(u):mu};case"rms":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s+=f*f,l++)}return l?n(Math.sqrt(s/l)):mu};case"stddev":return function(a,o){var s=0,l=0,u=1,f=mu,c;for(c=0;c<o.length&&f===mu;c++)f=i(a[o[c]]);if(f===mu)return mu;for(;c<o.length;c++){var h=i(a[o[c]]);if(h!==mu){var v=h-f;s+=v,l+=v*v,u++}}var p=e.funcmode==="sample"?u-1:u;return p?Math.sqrt((l-s*s/u)/p):0}}}function OJt(e,t){return t.length}function BJt(e,t){return e[t[0]]}function NJt(e,t){return e[t[t.length-1]]}});var XZe=ne((zxr,WZe)=>{"use strict";WZe.exports=YZe()});var JZe=ne(hb=>{"use strict";var O1=Wt(),UJt=wi(),VJt=Xi(),HJt=j5().pointsAccessorFunction,aK=oS(),ZZe=aK.COMPARISON_OPS,jZe=aK.INTERVAL_OPS,KZe=aK.SET_OPS;hb.moduleType="transform";hb.name="filter";hb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(ZZe).concat(jZe).concat(KZe),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};hb.supplyDefaults=function(e){var t={};function r(o,s){return O1.coerce(e,t,hb.attributes,o,s)}var i=r("enabled");if(i){var n=r("target");if(O1.isArrayOrTypedArray(n)&&n.length===0)return t.enabled=!1,t;r("preservegaps"),r("operation"),r("value");var a=UJt.getComponentMethod("calendars","handleDefaults");a(e,t,"valuecalendar",null),a(e,t,"targetcalendar",null)}return t};hb.calcTransform=function(e,t,r){if(!r.enabled)return;var i=O1.getTargetArray(t,r);if(!i)return;var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=r.targetcalendar,s=t._arrayAttrs,l=r.preservegaps;if(typeof n=="string"){var u=O1.nestedProperty(t,n+"calendar").get();u&&(o=u)}var f=VJt.getDataToCoordFunc(e,t,n,i),c=GJt(r,f,o),h={},v={},p=0;function _(k,x){for(var E=0;E<s.length;E++){var M=O1.nestedProperty(t,s[E]);k(M,x)}}var T,g;l?(T=function(k){h[k.astr]=O1.extendDeep([],k.get()),k.set(new Array(a))},g=function(k,x){var E=h[k.astr][x];k.get()[x]=E}):(T=function(k){h[k.astr]=O1.extendDeep([],k.get()),k.set([])},g=function(k,x){var E=h[k.astr][x];k.get().push(E)}),_(T);for(var A=HJt(t.transforms,r),b=0;b<a;b++){var w=c(i[b]);w?(_(g,b),v[p++]=A(b)):l&&p++}r._indexToPoints=v,t._length=p};function GJt(e,t,r){var i=e.operation,n=e.value,a=O1.isArrayOrTypedArray(n);function o(f){return f.indexOf(i)!==-1}var s=function(f){return t(f,0,e.valuecalendar)},l=function(f){return t(f,0,r)},u;switch(o(ZZe)?u=s(a?n[0]:n):o(jZe)?u=a?[s(n[0]),s(n[1])]:[s(n),s(n)]:o(KZe)&&(u=a?n.map(s):[s(n)]),i){case"=":return function(f){return l(f)===u};case"!=":return function(f){return l(f)!==u};case"<":return function(f){return l(f)<u};case"<=":return function(f){return l(f)<=u};case">":return function(f){return l(f)>u};case">=":return function(f){return l(f)>=u};case"[]":return function(f){var c=l(f);return c>=u[0]&&c<=u[1]};case"()":return function(f){var c=l(f);return c>u[0]&&c<u[1]};case"[)":return function(f){var c=l(f);return c>=u[0]&&c<u[1]};case"(]":return function(f){var c=l(f);return c>u[0]&&c<=u[1]};case"][":return function(f){var c=l(f);return c<=u[0]||c>=u[1]};case")(":return function(f){var c=l(f);return c<u[0]||c>u[1]};case"](":return function(f){var c=l(f);return c<=u[0]||c>u[1]};case")[":return function(f){var c=l(f);return c<u[0]||c>=u[1]};case"{}":return function(f){return u.indexOf(l(f))!==-1};case"}{":return function(f){return u.indexOf(l(f))===-1}}}});var $Ze=ne((Bxr,QZe)=>{"use strict";QZe.exports=JZe()});var eje=ne(Dy=>{"use strict";var Rv=Wt(),YJt=tm(),WJt=Zs(),XJt=j5().pointsAccessorFunction;Dy.moduleType="transform";Dy.name="groupby";Dy.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};Dy.supplyDefaults=function(e,t,r){var i,n={};function a(c,h){return Rv.coerce(e,n,Dy.attributes,c,h)}var o=a("enabled");if(!o)return n;a("groups"),a("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var s=e.styles,l=n.styles=[];if(s)for(i=0;i<s.length;i++){var u=l[i]={};Rv.coerce(s[i],l[i],Dy.attributes.styles,"target");var f=Rv.coerce(s[i],l[i],Dy.attributes.styles,"value");Rv.isPlainObject(f)?u.value=Rv.extendDeep({},f):f&&delete u.value}return n};Dy.transform=function(e,t){var r,i,n,a=[];for(i=0;i<e.length;i++)for(r=ZJt(e[i],t),n=0;n<r.length;n++)a.push(r[n]);return a};function ZJt(e,t){var r,i,n,a,o,s,l,u,f,c,h=t.transform,v=t.transformIndex,p=e.transforms[v].groups,_=XJt(e.transforms,h);if(!Rv.isArrayOrTypedArray(p)||p.length===0)return[e];var T=Rv.filterUnique(p),g=new Array(T.length),A=p.length,b=YJt.findArrayAttributes(e),w=h.styles||[],k={};for(r=0;r<w.length;r++)k[w[r].target]=w[r].value;h.styles&&(c=Rv.keyedContainer(h,"styles","target","value.name"));var x={},E={};for(r=0;r<T.length;r++){s=T[r],x[s]=r,E[s]=0,l=g[r]=Rv.extendDeepNoArrays({},e),l._group=s,l.transforms[v]._indexToPoints={};var M=null;for(c&&(M=c.get(s)),M||M===""?l.name=M:l.name=Rv.templateString(h.nameformat,{trace:e.name,group:s}),u=l.transforms,l.transforms=[],i=0;i<u.length;i++)l.transforms[i]=Rv.extendDeepNoArrays({},u[i]);for(i=0;i<b.length;i++)Rv.nestedProperty(l,b[i]).set([])}for(n=0;n<b.length;n++){for(a=b[n],i=0,f=[];i<T.length;i++)f[i]=Rv.nestedProperty(g[i],a).get();for(o=Rv.nestedProperty(e,a).get(),i=0;i<A;i++)f[x[p[i]]].push(o[i])}for(i=0;i<A;i++){l=g[x[p[i]]];var d=l.transforms[v]._indexToPoints;d[E[p[i]]]=_(i),E[p[i]]++}for(r=0;r<T.length;r++)s=T[r],l=g[r],WJt.clearExpandedTraceDefaultColors(l),l=Rv.extendDeepNoArrays(l,k[s]||{});return g}});var rje=ne((Uxr,tje)=>{"use strict";tje.exports=eje()});var nje=ne(vb=>{"use strict";var oK=Wt(),jJt=Xi(),KJt=j5().pointsAccessorFunction,b8=$a().BADNUM;vb.moduleType="transform";vb.name="sort";vb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};vb.supplyDefaults=function(e){var t={};function r(n,a){return oK.coerce(e,t,vb.attributes,n,a)}var i=r("enabled");return i&&(r("target"),r("order")),t};vb.calcTransform=function(e,t,r){if(r.enabled){var i=oK.getTargetArray(t,r);if(i){var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=t._arrayAttrs,s=jJt.getDataToCoordFunc(e,t,n,i),l=JJt(r,i,s,a),u=KJt(t.transforms,r),f={},c,h;for(c=0;c<o.length;c++){var v=oK.nestedProperty(t,o[c]),p=v.get(),_=new Array(a);for(h=0;h<a;h++)_[h]=p[l[h]];v.set(_)}for(h=0;h<a;h++)f[h]=u(l[h]);r._indexToPoints=f,t._length=a}}};function JJt(e,t,r,i){var n=new Array(i),a=new Array(i),o;for(o=0;o<i;o++)n[o]={v:t[o],i:o};for(n.sort(QJt(e,r)),o=0;o<i;o++)a[o]=n[o].i;return a}function QJt(e,t){switch(e.order){case"ascending":return function(r,i){var n=t(r.v),a=t(i.v);return n===b8?1:a===b8?-1:n-a};case"descending":return function(r,i){var n=t(r.v),a=t(i.v);return n===b8?1:a===b8?-1:a-n}}}});var aje=ne((Hxr,ije)=>{"use strict";ije.exports=nje()});var Th=ne((Gxr,sje)=>{var T8=of();function oje(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}T8(oje.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,n){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,n):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",n=0;r>0;){var a=r%10;i=(a===0?"":e[a]+t[n])+i,n++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function sK(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(fo.local.invalidDate||fo.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w8(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}T8(sK.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(fo.local.invalidDate||fo.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(fo.local.differentCalendars||fo.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+w8(Math.abs(this.year()),4)+"-"+w8(this.month(),2)+"-"+w8(this.day(),2)}});function lK(){this.shortYearCutoff="+10"}T8(lK.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new sK(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+w8(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),n=e.calendar().fromJD(i);return this._validateLevel--,[n.year(),n.month(),n.day()]}try{var a=e.year()+(r==="y"?t:0),o=e.monthOfYear()+(r==="m"?t:0),n=e.day(),s=function(f){for(;o<f.minMonth;)a--,o+=f.monthsInYear(a);for(var c=f.monthsInYear(a);o>c-1+f.minMonth;)a++,o-=c,c=f.monthsInYear(a)};r==="y"?(e.month()!==this.fromMonthOfYear(a,o)&&(o=this.newDate(a,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(a)),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o)))):r==="m"&&(s(this),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o))));var l=[a,this.fromMonthOfYear(a,o),n];return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],a=r<0?-1:1;t=this._add(e,r*n[0]+a*n[1],n[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),n=r==="m"?t:e.month(),a=r==="d"?t:e.day();return(r==="y"||r==="m")&&(a=Math.min(a,this.daysInMonth(i,n))),e.date(i,n,a)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var n=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(n)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return fo.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(fo.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(fo.local.differentCalendars||fo.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var n=this.newDate(e,t,r);return this._validateLevel--,n}catch(a){throw this._validateLevel--,a}}});function uK(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}uK.prototype=new lK;T8(uK.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var n=Math.floor(e/100),a=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+a-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,n=Math.floor((i-122.1)/365.25),a=Math.floor(365.25*n),o=Math.floor((i-a)/30.6001),s=i-a-Math.floor(o*30.6001),l=o-(o>13.5?13:1),u=n-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),n=new Date(i.year(),i.month()-1,i.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(n.getHours()>12?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var fo=sje.exports=new oje;fo.cdate=sK;fo.baseCalendar=lK;fo.calendars.gregorian=uK});var lje=ne(()=>{var fK=of(),Tc=Th();fK(Tc.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});Tc.local=Tc.regionalOptions[""];fK(Tc.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});fK(Tc.baseCalendar.prototype,{UNIX_EPOCH:Tc.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:Tc.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw Tc.local.invalidFormat||Tc.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,n=r.dayNames||this.local.dayNames,a=r.monthNumbers||this.local.monthNumbers,o=r.monthNamesShort||this.local.monthNamesShort,s=r.monthNames||this.local.monthNames,l=r.calculateWeek||this.local.calculateWeek,u=function(w,k){for(var x=1;b+x<e.length&&e.charAt(b+x)===w;)x++;return b+=x-1,Math.floor(x/(k||1))>1},f=function(w,k,x,E){var M=""+k;if(u(w,E))for(;M.length<x;)M="0"+M;return M},c=function(w,k,x,E){return u(w)?E[k]:x[k]},h=this,v=function(w){return typeof a=="function"?a.call(h,w,u("m")):T(f("m",w.month(),2))},p=function(w,k){return k?typeof s=="function"?s.call(h,w):s[w.month()-h.minMonth]:typeof o=="function"?o.call(h,w):o[w.month()-h.minMonth]},_=this.local.digits,T=function(w){return r.localNumbers&&_?_(w):w},g="",A=!1,b=0;b<e.length;b++)if(A)e.charAt(b)==="'"&&!u("'")?A=!1:g+=e.charAt(b);else switch(e.charAt(b)){case"d":g+=T(f("d",t.day(),2));break;case"D":g+=c("D",t.dayOfWeek(),i,n);break;case"o":g+=f("o",t.dayOfYear(),3);break;case"w":g+=f("w",t.weekOfYear(),2);break;case"m":g+=v(t);break;case"M":g+=p(t,u("M"));break;case"y":g+=u("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":u("Y",2),g+=t.formatYear();break;case"J":g+=t.toJD();break;case"@":g+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?g+="'":A=!0;break;default:g+=e.charAt(b)}return g},parseDate:function(e,t,r){if(t==null)throw Tc.local.invalidArguments||Tc.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var n=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,o=r.parseMonth||this.local.parseMonth,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,u=r.monthNames||this.local.monthNames,f=-1,c=-1,h=-1,v=-1,p=-1,_=!1,T=!1,g=function(P,D){for(var z=1;d+z<e.length&&e.charAt(d+z)===P;)z++;return d+=z-1,Math.floor(z/(D||1))>1},A=function(P,D){var z=g(P,D),O=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(P)+1],V=new RegExp("^-?\\d{1,"+O+"}"),B=t.substring(M).match(V);if(!B)throw(Tc.local.missingNumberAt||Tc.regionalOptions[""].missingNumberAt).replace(/\{0\}/,M);return M+=B[0].length,parseInt(B[0],10)},b=this,w=function(){if(typeof s=="function"){g("m");var P=s.call(b,t.substring(M));return M+=P.length,P}return A("m")},k=function(P,D,z,O){for(var V=g(P,O)?z:D,B=0;B<V.length;B++)if(t.substr(M,V[B].length).toLowerCase()===V[B].toLowerCase())return M+=V[B].length,B+b.minMonth;throw(Tc.local.unknownNameAt||Tc.regionalOptions[""].unknownNameAt).replace(/\{0\}/,M)},x=function(){if(typeof u=="function"){var P=g("M")?u.call(b,t.substring(M)):l.call(b,t.substring(M));return M+=P.length,P}return k("M",l,u)},E=function(){if(t.charAt(M)!==e.charAt(d))throw(Tc.local.unexpectedLiteralAt||Tc.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,M);M++},M=0,d=0;d<e.length;d++)if(T)e.charAt(d)==="'"&&!g("'")?T=!1:E();else switch(e.charAt(d)){case"d":v=A("d");break;case"D":k("D",n,a);break;case"o":p=A("o");break;case"w":A("w");break;case"m":h=w();break;case"M":h=x();break;case"y":var C=d;_=!g("y",2),d=C,c=A("y",2);break;case"Y":c=A("Y",2);break;case"J":f=A("J")+.5,t.charAt(M)==="."&&(M++,A("J"));break;case"@":f=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":M=t.length;break;case"'":g("'")?E():T=!0;break;default:E()}if(M<t.length)throw Tc.local.unexpectedText||Tc.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&_&&(c+=i===-1?1900:this.today().year()-this.today().year()%100-(c<=i?0:100)),typeof h=="string"&&(h=o.call(this,c,h)),p>-1){h=1,v=p;for(var S=this.daysInMonth(c,h);v>S;S=this.daysInMonth(c,h))h++,v-=S}return f>-1?this.fromJD(f):this.newDate(c,h,v)},determineDate:function(e,t,r,i,n){r&&typeof r!="object"&&(n=i,i=r,r=null),typeof i!="string"&&(n=i,i="");var a=this,o=function(s){try{return a.parseDate(i,s,n)}catch(c){}s=s.toLowerCase();for(var l=(s.match(/^c/)&&r?r.newDate():null)||a.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=u.exec(s);f;)l.add(parseInt(f[1],10),f[2]||"d"),f=u.exec(s);return l};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?o(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:a.today().add(e,"d"):a.newDate(e),e}})});var uje=ne(()=>{var B1=Th(),$Jt=of(),cK=B1.instance();function A8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A8.prototype=new B1.baseCalendar;$Jt(A8.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(tQt);return r?r[0]:""}var i=this._validateYear(e),n=e.month(),a=""+this.toChineseMonth(i,n);return t&&a.length<2&&(a="0"+a),this.isIntercalaryMonth(i,n)&&(a+="i"),a},monthNames:function(e){if(typeof e=="string"){var t=e.match(rQt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(nQt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var n=t[t.length-1];i=n==="i"||n==="I"}var a=this.toMonthIndex(e,r,i);return a},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),n=r&&t!==i;if(n||t<1||t>12)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return i?!r&&t<=i?a=t-1:a=t:a=t-1,a},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var n;return r?t<r?n=t+1:n=t:n=t+1,n},intercalaryMonth:function(e){e=this._validateYear(e);var t=N1[e-N1[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,B1.local.invalidyear),n=U1[i-U1[0]],a=n>>9&4095,o=n>>5&15,s=n&31,l;l=cK.newDate(a,o,s),l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=N1[e-N1[0]],i=r>>13,n=i?12:11;if(t>n)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a=r&1<<12-t?30:29;return a},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,a,r,B1.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var n=this.isIntercalaryMonth(e,t),a=this.toChineseMonth(e,t),o=aQt(e,a,r,n);return cK.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=cK.fromJD(e),r=iQt(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(eQt),r=this._validateYear(+t[1]),i=+t[2],n=!!t[3],a=this.toMonthIndex(r,i,n),o=+t[4];return this.newDate(r,a,o)},add:function(e,t,r){var i=e.year(),n=e.month(),a=this.isIntercalaryMonth(i,n),o=this.toChineseMonth(i,n),s=Object.getPrototypeOf(A8.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year(),u=s.month(),f=this.isIntercalaryMonth(l,o),c=a&&f?this.toMonthIndex(l,o,!0):this.toMonthIndex(l,o,!1);c!==u&&s.month(c)}return s}});var eQt=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,tQt=/^\d?\d[iI]?/m,rQt=/^闰?十?[一二三四五六七八九]?月/m,nQt=/^闰?十?[一二三四五六七八九]?/m;B1.calendars.chinese=A8;var N1=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],U1=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function iQt(e,t,r,i){var n,a;if(typeof e=="object")n=e,a=t||{};else{var o=typeof e=="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t=="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r=="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r},a=i||{}}var u=U1[n.year-U1[0]],f=n.year<<9|n.month<<5|n.day;a.year=f>=u?n.year:n.year-1,u=U1[a.year-U1[0]];var c=u>>9&4095,h=u>>5&15,v=u&31,p,_=new Date(c,h-1,v),T=new Date(n.year,n.month-1,n.day);p=Math.round((T-_)/(24*3600*1e3));var g=N1[a.year-N1[0]],A;for(A=0;A<13;A++){var b=g&1<<12-A?30:29;if(p<b)break;p-=b}var w=g>>13;return!w||A<w?(a.isIntercalary=!1,a.month=1+A):A===w?(a.isIntercalary=!0,a.month=A):(a.isIntercalary=!1,a.month=A),a.day=1+p,a}function aQt(e,t,r,i,n){var a,o;if(typeof e=="object")o=e,a=t||{};else{var s=typeof e=="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t=="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r=="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var f;typeof i=="object"?(f=!1,a=i):(f=!!i,a=n||{}),o={year:e,month:t,day:r,isIntercalary:f}}var c;c=o.day-1;var h=N1[o.year-N1[0]],v=h>>13,p;v&&(o.month>v||o.isIntercalary)?p=o.month:p=o.month-1;for(var _=0;_<p;_++){var T=h&1<<12-_?30:29;c+=T}var g=U1[o.year-U1[0]],A=g>>9&4095,b=g>>5&15,w=g&31,k=new Date(A,b-1,w+c);return a.year=k.getFullYear(),a.month=1+k.getMonth(),a.day=k.getDate(),a}});var fje=ne(()=>{var db=Th(),oQt=of();function hK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}hK.prototype=new db.baseCalendar;oQt(hK.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,db.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,db.local.invalidYear||db.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,db.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,db.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});db.calendars.coptic=hK});var cje=ne(()=>{var Iy=Th(),sQt=of();function vK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}vK.prototype=new Iy.baseCalendar;sQt(vK.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Iy.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return{century:lQt[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var lQt={20:"Fruitbat",21:"Anchovy"};Iy.calendars.discworld=vK});var hje=ne(()=>{var pb=Th(),uQt=of();function dK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}dK.prototype=new pb.baseCalendar;uQt(dK.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,pb.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,pb.local.invalidYear||pb.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,pb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,pb.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});pb.calendars.ethiopian=dK});var vje=ne(()=>{var V1=Th(),fQt=of();function pK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}pK.prototype=new V1.baseCalendar;fQt(pK.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,M8(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,V1.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&M8(this.daysInYear(e),10)===5?30:t===9&&M8(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,V1.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,V1.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e<=0?e+1:e,a=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++)a+=this.daysInMonth(e,o);for(var o=1;o<t;o++)a+=this.daysInMonth(e,o)}else for(var o=7;o<t;o++)a+=this.daysInMonth(e,o);return a},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return M8(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function M8(e,t){return e-t*Math.floor(e/t)}V1.calendars.hebrew=pK});var dje=ne(()=>{var K5=Th(),cQt=of();function gK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}gK.prototype=new K5.baseCalendar;cQt(gK.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,K5.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,K5.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,K5.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});K5.calendars.islamic=gK});var pje=ne(()=>{var J5=Th(),hQt=of();function yK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}yK.prototype=new J5.baseCalendar;hQt(yK.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,J5.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,J5.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,J5.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),n=Math.floor(365.25*i),a=Math.floor((r-n)/30.6001),o=a-Math.floor(a<14?1:13),s=i-Math.floor(o>2?4716:4715),l=r-n-Math.floor(30.6001*a);return s<=0&&s--,this.newDate(s,o,l)}});J5.calendars.julian=yK});var yje=ne(()=>{var Yp=Th(),vQt=of();function xK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}xK.prototype=new Yp.baseCalendar;vQt(xK.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,Yp.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,Yp.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,Yp.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate),n=i.toJD(),a=this._toHaab(n),o=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=mK(e+8+17*20,365);return[Math.floor(t/20)+1,mK(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[gje(e+20,20),gje(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function mK(e,t){return e-t*Math.floor(e/t)}function gje(e,t){return mK(e-1,t)+1}Yp.calendars.mayan=xK});var xje=ne(()=>{var gb=Th(),dQt=of();function _K(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_K.prototype=new gb.baseCalendar;var mje=gb.instance("gregorian");dQt(_K.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,gb.local.invalidYear||gb.regionalOptions[""].invalidYear);return mje.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,gb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,gb.local.invalidMonth),n=i.year();n<0&&n++;for(var a=i.day(),o=1;o<i.month();o++)a+=this.daysPerMonth[o-1];return a+mje.toJD(n+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});gb.calendars.nanakshahi=_K});var _je=ne(()=>{var yb=Th(),pQt=of();function bK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}bK.prototype=new yb.baseCalendar;pQt(bK.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,yb.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,yb.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,yb.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=yb.instance(),a=0,o=t,s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(t!==9&&(a=r,o--);o!==9;)o<=0&&(o=12,s--),a+=this.NEPALI_CALENDAR_DATA[s][o],o--;return t===9?(a+=r-this.NEPALI_CALENDAR_DATA[s][0],a<0&&(a+=n.daysInYear(l))):a+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(e){var t=yb.instance(),r=t.fromJD(e),i=r.year(),n=r.dayOfYear(),a=i+56;this._createMissingCalendarData(a);for(var o=9,s=this.NEPALI_CALENDAR_DATA[a][0],l=this.NEPALI_CALENDAR_DATA[a][o]-s+1;n>l;)o++,o>12&&(o=1,a++),l+=this.NEPALI_CALENDAR_DATA[a][o];var u=this.NEPALI_CALENDAR_DATA[a][o]-(l-n);return this.newDate(a,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});yb.calendars.nepali=bK});var bje=ne(()=>{var NT=Th(),gQt=of();function S8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}S8.prototype=new NT.baseCalendar;gQt(S8.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,NT.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,NT.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,NT.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e-(e>=0?474:473),a=474+wK(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((a*682-110)/2816)+(a-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),i=wK(t,1029983),n=2820;if(i!==1029982){var a=Math.floor(i/366),o=wK(i,366);n=Math.floor((2134*a+2816*o+2815)/1028522)+a+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=e-this.toJD(s,u,1)+1;return this.newDate(s,u,f)}});function wK(e,t){return e-t*Math.floor(e/t)}NT.calendars.persian=S8;NT.calendars.jalali=S8});var wje=ne(()=>{var mb=Th(),yQt=of(),E8=mb.instance();function TK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}TK.prototype=new mb.baseCalendar;yQt(TK.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,mb.local.invalidYear),r=this._t2gYear(t.year());return E8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,mb.local.invalidYear),n=this._t2gYear(i.year());return E8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,mb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,mb.local.invalidDate),n=this._t2gYear(i.year());return E8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=E8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});mb.calendars.taiwan=TK});var Tje=ne(()=>{var xb=Th(),mQt=of(),k8=xb.instance();function AK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}AK.prototype=new xb.baseCalendar;mQt(AK.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,xb.local.invalidYear),r=this._t2gYear(t.year());return k8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,xb.local.invalidYear),n=this._t2gYear(i.year());return k8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,xb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,xb.local.invalidDate),n=this._t2gYear(i.year());return k8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=k8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});xb.calendars.thai=AK});var Aje=ne(()=>{var _b=Th(),xQt=of();function MK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}MK.prototype=new _b.baseCalendar;xQt(MK.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,_b.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,_b.local.invalidMonth),i=r.toJD()-24e5+.5,n=0,a=0;a<H1.length;a++){if(H1[a]>i)return H1[n]-H1[n-1];n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,_b.local.invalidDate),n=12*(i.year()-1)+i.month()-15292,a=i.day()+H1[n-1]-1;return a+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<H1.length&&!(H1[i]>t);i++)r++;var n=r+15292,a=Math.floor((n-1)/12),o=a+1,s=n-12*a,l=t-H1[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var i=_b.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var n=_b.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw i.replace(/\{0\}/,this.local.name);return n}});_b.calendars.ummalqura=MK;var H1=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var Sje=ne((b_r,Mje)=>{"use strict";Mje.exports=Th();lje();uje();fje();cje();hje();vje();dje();pje();yje();xje();_je();bje();wje();Tje();Aje()});var Dje=ne((w_r,Rje)=>{"use strict";var kje=Sje(),Q5=Wt(),Cje=$a(),_Qt=Cje.EPOCHJD,bQt=Cje.ONEDAY,kK={valType:"enumerated",values:Q5.sortObjectKeys(kje.calendars),editType:"calc",dflt:"gregorian"},Lje=function(e,t,r,i){var n={};return n[r]=kK,Q5.coerce(e,t,n,r,i)},wQt=function(e,t,r,i){for(var n=0;n<r.length;n++)Lje(e,t,r[n]+"calendar",i.calendar)},TQt={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},AQt={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},MQt={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},C8="##",SQt={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:C8,w:C8,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function EQt(e,t,r){for(var i=Math.floor((t+.05)/bQt)+_Qt,n=Pje(r).fromJD(i),a=0,o,s,l,u,f;(a=e.indexOf("%",a))!==-1;)o=e.charAt(a+1),o==="0"||o==="-"||o==="_"?(l=3,s=e.charAt(a+2),o==="_"&&(o="-")):(s=o,o="0",l=2),u=SQt[s],u?(u===C8?f=C8:f=n.formatDate(u[o]),e=e.substr(0,a)+f+e.substr(a+l),a+=f.length):a+=l;return e}var Eje={};function Pje(e){var t=Eje[e];return t||(t=Eje[e]=kje.instance(e),t)}function bb(e){return Q5.extendFlat({},kK,{description:e})}function CK(e){return"Sets the calendar system to use with `"+e+"` date data."}var EK={xcalendar:bb(CK("x"))},Ag=Q5.extendFlat({},EK,{ycalendar:bb(CK("y"))}),SK=Q5.extendFlat({},Ag,{zcalendar:bb(CK("z"))}),UT=bb(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Rje.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Ag,bar:Ag,box:Ag,heatmap:Ag,contour:Ag,histogram:Ag,histogram2d:Ag,histogram2dcontour:Ag,scatter3d:SK,surface:SK,mesh3d:SK,scattergl:Ag,ohlc:EK,candlestick:EK},layout:{calendar:bb(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:UT},yaxis:{calendar:UT},scene:{xaxis:{calendar:UT},yaxis:{calendar:UT},zaxis:{calendar:UT}},polar:{radialaxis:{calendar:UT}}},transforms:{filter:{valuecalendar:bb(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:bb(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:kK,handleDefaults:Lje,handleTraceDefaults:wQt,CANONICAL_SUNDAY:AQt,CANONICAL_TICK:TQt,DFLTRANGE:MQt,getCal:Pje,worldCalFmt:EQt}});var Fje=ne((T_r,Ije)=>{"use strict";Ije.exports=Dje()});var qje=T0e();qje.register([Mge(),hye(),bme(),Ume(),e1e(),K1e(),uxe(),jxe(),A_e(),abe(),Ybe(),iSe(),WSe(),q5e(),Tke(),$ke(),wCe(),j4e(),dLe(),RLe(),GLe(),iPe(),xPe(),FPe(),CRe(),jRe(),iOe(),r7e(),z7e(),j7e(),$Be(),M9e(),PNe(),WNe(),gUe(),TVe(),XVe(),kHe(),jGe(),mYe(),BYe(),cWe(),MWe(),TXe(),UXe(),oZe(),NZe(),XZe(),$Ze(),rje(),aje(),Fje()]);module.exports=qje;
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/
if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
